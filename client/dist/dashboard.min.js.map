{
  "version": 3,
  "sources": ["_tmp_dashboard.js"],
  "sourcesContent": ["/* === assets/js/features/pick-standardizer.js === */\n/**\n * Pick Standardizer v3.0\n * Parses picks from multiple formats:\n * - Sportsbook game lines HTML (div-based panels)\n * - Sportsbook HTML tables (legacy bet slip format)\n * - Text shorthand (e.g., \"Spurs 2.5 -105 $50\")\n * - Screenshot OCR text\n */\n\n(function () {\n  \"use strict\";\n\n  // Default unit multiplier (e.g., $50 = $50,000 when unit is 1000)\n  let unitMultiplier = 1000; // $1 = $1,000\n\n  // Team name mappings (abbreviations to full names)\n  const TEAM_ALIASES = {\n    // NBA - Full names and nicknames\n    spurs: \"San Antonio Spurs\",\n    \"san antonio\": \"San Antonio Spurs\",\n    sas: \"San Antonio Spurs\",\n    knicks: \"New York Knicks\",\n    \"new york\": \"New York Knicks\",\n    nyk: \"New York Knicks\",\n    lakers: \"Los Angeles Lakers\",\n    \"la lakers\": \"Los Angeles Lakers\",\n    lal: \"Los Angeles Lakers\",\n    clippers: \"Los Angeles Clippers\",\n    \"la clippers\": \"Los Angeles Clippers\",\n    lac: \"Los Angeles Clippers\",\n    warriors: \"Golden State Warriors\",\n    \"golden state\": \"Golden State Warriors\",\n    gsw: \"Golden State Warriors\",\n    gs: \"Golden State Warriors\",\n    celtics: \"Boston Celtics\",\n    boston: \"Boston Celtics\",\n    bos: \"Boston Celtics\",\n    heat: \"Miami Heat\",\n    miami: \"Miami Heat\",\n    mia: \"Miami Heat\",\n    bulls: \"Chicago Bulls\",\n    chicago: \"Chicago Bulls\",\n    chi: \"Chicago Bulls\",\n    cavs: \"Cleveland Cavaliers\",\n    cavaliers: \"Cleveland Cavaliers\",\n    cleveland: \"Cleveland Cavaliers\",\n    cle: \"Cleveland Cavaliers\",\n    mavs: \"Dallas Mavericks\",\n    mavericks: \"Dallas Mavericks\",\n    dallas: \"Dallas Mavericks\",\n    dal: \"Dallas Mavericks\",\n    nuggets: \"Denver Nuggets\",\n    denver: \"Denver Nuggets\",\n    den: \"Denver Nuggets\",\n    pistons: \"Detroit Pistons\",\n    detroit: \"Detroit Pistons\",\n    det: \"Detroit Pistons\",\n    rockets: \"Houston Rockets\",\n    houston: \"Houston Rockets\",\n    hou: \"Houston Rockets\",\n    pacers: \"Indiana Pacers\",\n    indiana: \"Indiana Pacers\",\n    ind: \"Indiana Pacers\",\n    grizzlies: \"Memphis Grizzlies\",\n    memphis: \"Memphis Grizzlies\",\n    mem: \"Memphis Grizzlies\",\n    bucks: \"Milwaukee Bucks\",\n    milwaukee: \"Milwaukee Bucks\",\n    mil: \"Milwaukee Bucks\",\n    wolves: \"Minnesota Timberwolves\",\n    timberwolves: \"Minnesota Timberwolves\",\n    minnesota: \"Minnesota Timberwolves\",\n    min: \"Minnesota Timberwolves\",\n    pelicans: \"New Orleans Pelicans\",\n    \"new orleans\": \"New Orleans Pelicans\",\n    nop: \"New Orleans Pelicans\",\n    no: \"New Orleans Pelicans\",\n    nets: \"Brooklyn Nets\",\n    brooklyn: \"Brooklyn Nets\",\n    bkn: \"Brooklyn Nets\",\n    bk: \"Brooklyn Nets\",\n    thunder: \"Oklahoma City Thunder\",\n    okc: \"Oklahoma City Thunder\",\n    magic: \"Orlando Magic\",\n    orlando: \"Orlando Magic\",\n    orl: \"Orlando Magic\",\n    \"76ers\": \"Philadelphia 76ers\",\n    sixers: \"Philadelphia 76ers\",\n    philly: \"Philadelphia 76ers\",\n    philadelphia: \"Philadelphia 76ers\",\n    phi: \"Philadelphia 76ers\",\n    suns: \"Phoenix Suns\",\n    phoenix: \"Phoenix Suns\",\n    phx: \"Phoenix Suns\",\n    blazers: \"Portland Trail Blazers\",\n    portland: \"Portland Trail Blazers\",\n    por: \"Portland Trail Blazers\",\n    kings: \"Sacramento Kings\",\n    sacramento: \"Sacramento Kings\",\n    sac: \"Sacramento Kings\",\n    raptors: \"Toronto Raptors\",\n    toronto: \"Toronto Raptors\",\n    tor: \"Toronto Raptors\",\n    jazz: \"Utah Jazz\",\n    utah: \"Utah Jazz\",\n    uta: \"Utah Jazz\",\n    wizards: \"Washington Wizards\",\n    washington: \"Washington Wizards\",\n    was: \"Washington Wizards\",\n    wsh: \"Washington Wizards\",\n    hawks: \"Atlanta Hawks\",\n    atlanta: \"Atlanta Hawks\",\n    atl: \"Atlanta Hawks\",\n    hornets: \"Charlotte Hornets\",\n    charlotte: \"Charlotte Hornets\",\n    cha: \"Charlotte Hornets\",\n\n    // NFL\n    chiefs: \"Kansas City Chiefs\",\n    \"kansas city\": \"Kansas City Chiefs\",\n    kc: \"Kansas City Chiefs\",\n    eagles: \"Philadelphia Eagles\",\n    cowboys: \"Dallas Cowboys\",\n    niners: \"San Francisco 49ers\",\n    \"49ers\": \"San Francisco 49ers\",\n    bills: \"Buffalo Bills\",\n    buffalo: \"Buffalo Bills\",\n    ravens: \"Baltimore Ravens\",\n    baltimore: \"Baltimore Ravens\",\n    bengals: \"Cincinnati Bengals\",\n    cincinnati: \"Cincinnati Bengals\",\n    browns: \"Cleveland Browns\",\n    steelers: \"Pittsburgh Steelers\",\n    pittsburgh: \"Pittsburgh Steelers\",\n    colts: \"Indianapolis Colts\",\n    texans: \"Houston Texans\",\n    jaguars: \"Jacksonville Jaguars\",\n    jags: \"Jacksonville Jaguars\",\n    jacksonville: \"Jacksonville Jaguars\",\n    titans: \"Tennessee Titans\",\n    tennessee: \"Tennessee Titans\",\n    broncos: \"Denver Broncos\",\n    chargers: \"Los Angeles Chargers\",\n    \"la chargers\": \"Los Angeles Chargers\",\n    raiders: \"Las Vegas Raiders\",\n    vegas: \"Las Vegas Raiders\",\n    seahawks: \"Seattle Seahawks\",\n    seattle: \"Seattle Seahawks\",\n    cardinals: \"Arizona Cardinals\",\n    arizona: \"Arizona Cardinals\",\n    rams: \"Los Angeles Rams\",\n    \"la rams\": \"Los Angeles Rams\",\n    packers: \"Green Bay Packers\",\n    \"green bay\": \"Green Bay Packers\",\n    bears: \"Chicago Bears\",\n    lions: \"Detroit Lions\",\n    vikings: \"Minnesota Vikings\",\n    saints: \"New Orleans Saints\",\n    falcons: \"Atlanta Falcons\",\n    panthers: \"Carolina Panthers\",\n    carolina: \"Carolina Panthers\",\n    bucs: \"Tampa Bay Buccaneers\",\n    buccaneers: \"Tampa Bay Buccaneers\",\n    tampa: \"Tampa Bay Buccaneers\",\n    \"tampa bay\": \"Tampa Bay Buccaneers\",\n    commanders: \"Washington Commanders\",\n    giants: \"New York Giants\",\n    \"ny giants\": \"New York Giants\",\n    jets: \"New York Jets\",\n    \"ny jets\": \"New York Jets\",\n    patriots: \"New England Patriots\",\n    pats: \"New England Patriots\",\n    \"new england\": \"New England Patriots\",\n    dolphins: \"Miami Dolphins\",\n\n    // College - Power conferences & common\n    army: \"Army Black Knights\",\n    navy: \"Navy Midshipmen\",\n    alabama: \"Alabama Crimson Tide\",\n    bama: \"Alabama Crimson Tide\",\n    georgia: \"Georgia Bulldogs\",\n    \"ohio state\": \"Ohio State Buckeyes\",\n    \"ohio st\": \"Ohio State Buckeyes\",\n    osu: \"Ohio State Buckeyes\",\n    michigan: \"Michigan Wolverines\",\n    \"michigan state\": \"Michigan State Spartans\",\n    \"michigan st\": \"Michigan State Spartans\",\n    msu: \"Michigan State Spartans\",\n    texas: \"Texas Longhorns\",\n    \"notre dame\": \"Notre Dame Fighting Irish\",\n    duke: \"Duke Blue Devils\",\n    unc: \"North Carolina Tar Heels\",\n    \"north carolina\": \"North Carolina Tar Heels\",\n    kentucky: \"Kentucky Wildcats\",\n    kansas: \"Kansas Jayhawks\",\n    gonzaga: \"Gonzaga Bulldogs\",\n    auburn: \"Auburn Tigers\",\n    tennessee: \"Tennessee Volunteers\",\n    purdue: \"Purdue Boilermakers\",\n    uconn: \"UConn Huskies\",\n    \"iowa state\": \"Iowa State Cyclones\",\n    \"iowa st\": \"Iowa State Cyclones\",\n    houston: \"Houston Cougars\",\n    baylor: \"Baylor Bears\",\n    arizona: \"Arizona Wildcats\",\n    ucla: \"UCLA Bruins\",\n    florida: \"Florida Gators\",\n    lsu: \"LSU Tigers\",\n    arkansas: \"Arkansas Razorbacks\",\n    oregon: \"Oregon Ducks\",\n    wisconsin: \"Wisconsin Badgers\",\n    illinois: \"Illinois Fighting Illini\",\n    iowa: \"Iowa Hawkeyes\",\n\n    // NCAAM - Mid-majors & smaller conferences (Horizon, MAAC, C-USA, etc.)\n    siena: \"Siena Saints\",\n    \"st peters\": \"Saint Peter's Peacocks\",\n    \"saint peters\": \"Saint Peter's Peacocks\",\n    \"st peter's\": \"Saint Peter's Peacocks\",\n    \"saint peter's\": \"Saint Peter's Peacocks\",\n    iona: \"Iona Gaels\",\n    merrimack: \"Merrimack Warriors\",\n    \"robert morris\": \"Robert Morris Colonials\",\n    \"rob morris\": \"Robert Morris Colonials\",\n    \"wright state\": \"Wright State Raiders\",\n    \"wright st\": \"Wright State Raiders\",\n    \"cleveland state\": \"Cleveland State Vikings\",\n    \"cleveland st\": \"Cleveland State Vikings\",\n    ipfw: \"Purdue Fort Wayne Mastodons\",\n    \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\",\n    \"n kentucky\": \"Northern Kentucky Norse\",\n    \"northern kentucky\": \"Northern Kentucky Norse\",\n    nku: \"Northern Kentucky Norse\",\n    youngstown: \"Youngstown State Penguins\",\n    \"youngstown state\": \"Youngstown State Penguins\",\n    \"youngstown st\": \"Youngstown State Penguins\",\n    \"wisc green bay\": \"Green Bay Phoenix\",\n    \"green bay\": \"Green Bay Phoenix\",\n    \"wisconsin green bay\": \"Green Bay Phoenix\",\n    \"detroit mercy\": \"Detroit Mercy Titans\",\n    detroit: \"Detroit Mercy Titans\",\n    rice: \"Rice Owls\",\n    utsa: \"UTSA Roadrunners\",\n    tulane: \"Tulane Green Wave\",\n    uab: \"UAB Blazers\",\n    \"louisiana tech\": \"Louisiana Tech Bulldogs\",\n    \"la tech\": \"Louisiana Tech Bulldogs\",\n    \"wisc milwaukee\": \"Milwaukee Panthers\",\n    milwaukee: \"Milwaukee Panthers\",\n    \"wisconsin milwaukee\": \"Milwaukee Panthers\",\n    uwm: \"Milwaukee Panthers\",\n    oakland: \"Oakland Golden Grizzlies\",\n    marist: \"Marist Red Foxes\",\n    \"sacred heart\": \"Sacred Heart Pioneers\",\n    fairfield: \"Fairfield Stags\",\n    quinnipiac: \"Quinnipiac Bobcats\",\n    rider: \"Rider Broncs\",\n    niagara: \"Niagara Purple Eagles\",\n    manhattan: \"Manhattan Jaspers\",\n    canisius: \"Canisius Golden Griffins\",\n    \"mount st marys\": \"Mount St. Mary's Mountaineers\",\n    wagner: \"Wagner Seahawks\",\n    \"youngstown state\": \"Youngstown State Penguins\",\n    \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\",\n    marshall: \"Marshall Thundering Herd\",\n    wku: \"Western Kentucky Hilltoppers\",\n    \"western kentucky\": \"Western Kentucky Hilltoppers\",\n    fiu: \"FIU Panthers\",\n    \"middle tennessee\": \"Middle Tennessee Blue Raiders\",\n    mtsu: \"Middle Tennessee Blue Raiders\",\n    \"old dominion\": \"Old Dominion Monarchs\",\n    odu: \"Old Dominion Monarchs\",\n    charlotte: \"Charlotte 49ers\",\n    \"east carolina\": \"East Carolina Pirates\",\n    ecu: \"East Carolina Pirates\",\n    \"north texas\": \"North Texas Mean Green\",\n    utep: \"UTEP Miners\",\n    \"sam houston\": \"Sam Houston Bearkats\",\n    \"jacksonville st\": \"Jacksonville State Gamecocks\",\n    \"new mexico st\": \"New Mexico State Aggies\",\n    liberty: \"Liberty Flames\",\n    \"kennesaw state\": \"Kennesaw State Owls\",\n  };\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // TEAM VARIANT REGISTRY \u2014 loaded from JSON (362 NCAAM + 30 NBA teams)\n  // Builds a lookup: lowercase name/location/abbreviation \u2192 canonical name\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  let _variantsLoaded = false;\n\n  async function loadTeamVariants() {\n    if (_variantsLoaded) return;\n    try {\n      const [ncaamRes, nbaRes] = await Promise.all([\n        fetch(\"assets/data/team-variants/ncaam_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n        fetch(\"assets/data/team-variants/nba_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n      ]);\n\n      if (ncaamRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(ncaamRes)) {\n          const canonical = team.name;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          const nick = (team.nickname || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 2 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          if (nick && nick.length > 5 && !TEAM_ALIASES[nick])\n            TEAM_ALIASES[nick] = canonical;\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NCAAM team variants into standardizer`);\n      }\n\n      if (nbaRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(nbaRes)) {\n          const canonical = team.name || team.fullName;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 1 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NBA team variants into standardizer`);\n      }\n\n      _variantsLoaded = true;\n    } catch (e) {\n      console.warn(\"[PickStandardizer] Could not load team variants:\", e);\n    }\n  }\n\n  // Kick off loading immediately\n  loadTeamVariants();\n\n  /**\n   * Main entry point - detects format and parses accordingly\n   */\n  function standardizePicks(input, options = {}) {\n    if (options.unitMultiplier) {\n      unitMultiplier = options.unitMultiplier;\n    }\n\n    // Detect bet-history format (timestamps + picks + dollar amounts)\n    if (typeof input === \"string\" && isBetHistoryFormat(input)) {\n      console.log(\"\uD83D\uDCCB Detected bet-history paste format\");\n      return parseBetHistory(input);\n    }\n\n    // Detect if input is HTML\n    if (typeof input === \"string\" && input.includes(\"<\")) {\n      // Check for sportsbook game lines format (div-based panels)\n      if (\n        input.includes('data-panel=\"line\"') ||\n        input.includes(\"data-sport-line\")\n      ) {\n        return parseSportsbookGameLines(input);\n      }\n      // Legacy bet slip table format\n      if (input.includes(\"<table\") || input.includes(\"<tr\")) {\n        return parseHTMLPicks(input);\n      }\n      // Generic HTML with classes (may contain picks)\n      if (input.includes(\"class=\")) {\n        return parseSportsbookGameLines(input);\n      }\n    }\n\n    // Otherwise treat as text\n    return parseTextPicks(input);\n  }\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // Bet history support (minimal)\n  // The UI references these helpers; keep them defined to avoid runtime\n  // ReferenceErrors even when bet-history parsing isn't used.\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n  function isBetHistoryFormat(text) {\n    if (typeof text !== \"string\") return false;\n    const hasMoney = /\\$[\\d,]+/.test(text);\n    const hasTimestamp =\n      /\\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\b\\s+\\d{1,2},?\\s*\\d{4}/i.test(\n        text,\n      );\n    const hasOddsSignals = /\\bML\\b/i.test(text) || /[+-]\\d{3,4}/.test(text);\n    return hasMoney && (hasTimestamp || hasOddsSignals);\n  }\n\n  function parseBetHistory(text) {\n    if (typeof text !== \"string\") return [];\n\n    // Strip common bet-history timestamp prefixes and $risk/$win lines,\n    // then fall back to the existing flexible text parser.\n    const cleanedLines = text\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter(Boolean)\n      .map((line) =>\n        line\n          .replace(\n            /^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\s+\\d{1,2},?\\s*\\d{4}\\s+\\d{1,2}:\\d{2}\\s*(?:am|pm)?\\s*/i,\n            \"\",\n          )\n          .trim(),\n      )\n      .filter((line) => !/^\\$[\\d,]+/.test(line));\n\n    return parseTextPicks(cleanedLines.join(\"\\n\"));\n  }\n\n  function parseBetHistoryLeg(line, defaultSport = \"NBA\", currentGame = null) {\n    if (typeof line !== \"string\") return null;\n    return parseFlexibleLine(line, defaultSport, currentGame);\n  }\n\n  /**\n   * Parse sportsbook game lines HTML (div-based panels)\n   * Handles structure like: div[data-panel=\"line\"] with nested teams, dates, and betting lines\n   */\n  function parseSportsbookGameLines(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all game panels - try multiple selectors\n    let gamePanels = doc.querySelectorAll('[data-panel=\"line\"]');\n\n    if (gamePanels.length === 0) {\n      gamePanels = doc.querySelectorAll(\n        \".line-panel, .game-panel, [data-sport-line]\",\n      );\n    }\n\n    if (gamePanels.length === 0) {\n      // Try alternate selector for different HTML structures\n      gamePanels = doc.querySelectorAll(\".lines-row, .game-row, .event-row\");\n    }\n\n    console.log(`\uD83D\uDD0D Found ${gamePanels.length} game panels to parse`);\n\n    gamePanels.forEach((panel, idx) => {\n      try {\n        const gamePicks = parseGamePanel(panel);\n        console.log(`  Panel ${idx + 1}: ${gamePicks.length} picks found`);\n        picks.push(...gamePicks);\n      } catch (e) {\n        console.warn(\"Failed to parse game panel:\", e);\n      }\n    });\n\n    // If no picks found from HTML structure, try extracting text and parsing as text\n    if (picks.length === 0) {\n      console.log(\"\uD83D\uDCDD No HTML picks found, falling back to text parsing...\");\n      const textContent =\n        doc.body?.textContent || html.replace(/<[^>]*>/g, \" \");\n      const textPicks = parseTextPicks(textContent);\n      picks.push(...textPicks);\n    }\n\n    console.log(`\uD83D\uDCCA Total parsed: ${picks.length} betting lines`);\n    return picks;\n  }\n\n  /**\n   * Parse a single game panel into multiple betting line picks\n   */\n  function parseGamePanel(panel) {\n    const picks = [];\n\n    // Extract game metadata\n    const gameInfo = extractGameInfo(panel);\n\n    if (!gameInfo.firstTeam && !gameInfo.secondTeam) {\n      // No teams found, skip this panel\n      return picks;\n    }\n\n    // Find all betting line groups\n    const lineGroups = panel.querySelectorAll(\n      \".group, .line-group, [data-group-line]\",\n    );\n\n    lineGroups.forEach((group) => {\n      try {\n        const groupPicks = parseLineGroup(group, gameInfo);\n        picks.push(...groupPicks);\n      } catch (e) {\n        console.warn(\"Failed to parse line group:\", e);\n      }\n    });\n\n    // If no line groups found, try parsing individual lines\n    if (picks.length === 0) {\n      const individualLines = panel.querySelectorAll(\n        '.line-play, .bet-line, [data-field=\"line\"]',\n      );\n      individualLines.forEach((line) => {\n        const pick = parseIndividualLine(line, gameInfo);\n        if (pick) picks.push(pick);\n      });\n    }\n\n    return picks;\n  }\n\n  /**\n   * Extract game information from a panel (teams, date, time, sport)\n   */\n  function extractGameInfo(panel) {\n    const info = {\n      firstTeam: \"\",\n      secondTeam: \"\",\n      date: getTodayDate(),\n      time: \"\",\n      sport: \"NBA\", // Default\n      league: \"\",\n    };\n\n    // Extract team names\n    const firstTeamEl = panel.querySelector(\n      '[data-field=\"first-team\"], .first-team, .away-team, .team-1',\n    );\n    const secondTeamEl = panel.querySelector(\n      '[data-field=\"second-team\"], .second-team, .home-team, .team-2',\n    );\n\n    if (firstTeamEl) info.firstTeam = firstTeamEl.textContent.trim();\n    if (secondTeamEl) info.secondTeam = secondTeamEl.textContent.trim();\n\n    // Extract date and time\n    const dateEl = panel.querySelector(\n      '[data-field=\"min-date\"], .game-date, .date',\n    );\n    const timeEl = panel.querySelector(\n      '[data-field=\"min-time\"], .game-time, .time',\n    );\n\n    if (dateEl) info.date = dateEl.textContent.trim();\n    if (timeEl) info.time = timeEl.textContent.trim();\n\n    // Extract sport/league\n    const leagueEl = panel.querySelector(\n      '[data-field=\"league-name\"], .league, .sport-name',\n    );\n    if (leagueEl) {\n      info.league = leagueEl.textContent.trim();\n      info.sport = detectSportFromLeague(info.league);\n    }\n\n    // Try to detect sport from panel attributes\n    const sportLine = panel.querySelector(\"[data-sport-line]\");\n    if (sportLine) {\n      const sportAttr = sportLine.getAttribute(\"data-sport-line\");\n      if (sportAttr) {\n        info.sport = detectSportFromAttribute(sportAttr);\n      }\n    }\n\n    // Build game string\n    if (info.firstTeam && info.secondTeam) {\n      info.game = `${info.firstTeam} @ ${info.secondTeam}`;\n      info.awayTeam = info.firstTeam;\n      info.homeTeam = info.secondTeam;\n    }\n\n    return info;\n  }\n\n  /**\n   * Parse a betting line group (spread, moneyline, total, etc.)\n   */\n  function parseLineGroup(group, gameInfo) {\n    const picks = [];\n\n    // Determine the bet type from the group\n    const groupType = detectGroupType(group);\n\n    // Find all line plays within this group\n    const linePlays = group.querySelectorAll(\n      \".line-play, .bet-option, [data-type]\",\n    );\n\n    linePlays.forEach((play, index) => {\n      const pick = parseLinePlacement(play, gameInfo, groupType, index);\n      if (pick) picks.push(pick);\n    });\n\n    return picks;\n  }\n\n  /**\n   * Detect the type of betting group (spread, ML, total, team total)\n   */\n  function detectGroupType(group) {\n    const groupClass = group.className || \"\";\n    const dataType = group.getAttribute(\"data-type\") || \"\";\n    const groupText = group.textContent.toLowerCase();\n\n    // Check data-type attribute\n    if (dataType.includes(\"spread\") || dataType.includes(\"ps\")) return \"spread\";\n    if (dataType.includes(\"ml\") || dataType.includes(\"money\"))\n      return \"moneyline\";\n    if (dataType.includes(\"total\") || dataType.includes(\"ou\")) {\n      if (dataType.includes(\"team\") || dataType.includes(\"tt\"))\n        return \"team-total\";\n      return \"total\";\n    }\n\n    // Check class names\n    if (groupClass.includes(\"spread\")) return \"spread\";\n    if (groupClass.includes(\"money\") || groupClass.includes(\"ml\"))\n      return \"moneyline\";\n    if (groupClass.includes(\"team-total\") || groupClass.includes(\"tt\"))\n      return \"team-total\";\n    if (groupClass.includes(\"total\") || groupClass.includes(\"ou\"))\n      return \"total\";\n\n    // Check group position/content\n    if (groupClass.includes(\"group-1\") || groupClass.includes(\"group-0\"))\n      return \"spread\";\n    if (groupClass.includes(\"group-2\")) return \"moneyline\";\n    if (groupClass.includes(\"group-3\")) return \"total\";\n    if (groupClass.includes(\"group-4\") || groupClass.includes(\"group-5\"))\n      return \"team-total\";\n\n    // Infer from text content\n    if (groupText.includes(\"spread\")) return \"spread\";\n    if (groupText.includes(\"money\")) return \"moneyline\";\n    if (groupText.includes(\"over\") || groupText.includes(\"under\"))\n      return \"total\";\n\n    return \"spread\"; // Default\n  }\n\n  /**\n   * Parse an individual line placement into a pick object\n   */\n  function parseLinePlacement(play, gameInfo, betType, index) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    // Extract line value\n    const lineEl = play.querySelector(\n      '[data-field=\"line\"], .line, .spread-value, .total-value',\n    );\n    const priceEl = play.querySelector(\n      '[data-field=\"price\"], .price, .odds, .juice',\n    );\n\n    let line = lineEl ? lineEl.textContent.trim() : \"\";\n    let price = priceEl ? priceEl.textContent.trim() : \"-110\";\n\n    // Normalize line (convert fractions to decimals)\n    line = line.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Determine which team this line is for\n    const teamIndex = determineTeamIndex(play, index);\n\n    switch (betType) {\n      case \"spread\":\n        pick.pickType = \"spread\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = formatLine(line);\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"moneyline\":\n        pick.pickType = \"moneyline\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.odds = formatOdds(line || price); // ML often shows odds in the line field\n        break;\n\n      case \"total\":\n        pick.pickType = \"total\";\n        pick.pickDirection = teamIndex === 0 ? \"Over\" : \"Under\";\n        pick.pickTeam = pick.pickDirection;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"team-total\":\n        pick.pickType = \"team-total\";\n        pick.pickDirection = determineOverUnder(play, index);\n        // Team totals alternate: Team1 Over, Team1 Under, Team2 Over, Team2 Under\n        const ttTeamIdx = Math.floor(index / 2);\n        pick.pickTeam =\n          ttTeamIdx === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n    }\n\n    // Validate pick has required fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    // Skip if no meaningful line/odds\n    if (!pick.line && !pick.odds && pick.pickType !== \"moneyline\") {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse an individual line element (fallback when no groups found)\n   */\n  function parseIndividualLine(lineEl, gameInfo) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    const lineText = lineEl.textContent.trim();\n\n    // Try to parse the line text\n    if (!lineText) return null;\n\n    // Determine bet type and parse accordingly\n    parseLineAndOdds(pick, lineText);\n\n    if (!pick.pickType) return null;\n\n    // Default to first team if we can't determine\n    if (!pick.pickTeam) {\n      pick.pickTeam = gameInfo.firstTeam || \"Unknown\";\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine team index (0 = first/away, 1 = second/home)\n   */\n  function determineTeamIndex(play, defaultIndex) {\n    // Check for data attributes\n    const teamAttr =\n      play.getAttribute(\"data-team\") || play.getAttribute(\"data-index\");\n    if (teamAttr) {\n      return parseInt(teamAttr) || 0;\n    }\n\n    // Check parent for position info\n    const parent = play.parentElement;\n    if (parent) {\n      const siblings = Array.from(parent.children);\n      const position = siblings.indexOf(play);\n      if (position !== -1) {\n        return position % 2; // Alternates between 0 and 1\n      }\n    }\n\n    return defaultIndex % 2;\n  }\n\n  /**\n   * Determine over/under for team totals\n   */\n  function determineOverUnder(play, index) {\n    const text = play.textContent.toLowerCase();\n    if (text.includes(\"over\") || text.includes(\"o \")) return \"Over\";\n    if (text.includes(\"under\") || text.includes(\"u \")) return \"Under\";\n\n    // Alternates: even = Over, odd = Under\n    return index % 2 === 0 ? \"Over\" : \"Under\";\n  }\n\n  /**\n   * Format line value (ensure proper +/- prefix)\n   */\n  function formatLine(line) {\n    if (!line) return \"\";\n    line = line.trim();\n\n    // If it's a total number without prefix (e.g., \"220\"), return as-is\n    if (/^\\d+\\.?\\d*$/.test(line)) return line;\n\n    // Ensure +/- prefix for spreads\n    if (/^[+-]/.test(line)) return line;\n    if (/^\\d/.test(line)) return \"+\" + line;\n\n    return line;\n  }\n\n  /**\n   * Format odds value (ensure proper format)\n   */\n  function formatOdds(odds) {\n    if (!odds) return \"-110\";\n    odds = odds.trim();\n\n    // Remove any currency symbols\n    odds = odds.replace(/[$\u20AC\u00A3]/g, \"\");\n\n    // If just a number, assume negative\n    if (/^\\d+$/.test(odds)) {\n      const num = parseInt(odds);\n      return num >= 100 ? `-${num}` : `+${num}`;\n    }\n\n    // Already has +/-\n    if (/^[+-]\\d+/.test(odds)) return odds;\n\n    return \"-110\"; // Default\n  }\n\n  /**\n   * Detect sport from league name\n   */\n  function detectSportFromLeague(league) {\n    const lower = league.toLowerCase();\n    if (lower.includes(\"nba\") || lower.includes(\"basketball\")) return \"NBA\";\n    if (lower.includes(\"nfl\") || lower.includes(\"football\")) return \"NFL\";\n    if (\n      lower.includes(\"ncaab\") ||\n      lower.includes(\"ncaam\") ||\n      lower.includes(\"college basketball\")\n    )\n      return \"NCAAB\";\n    if (lower.includes(\"ncaaf\") || lower.includes(\"college football\"))\n      return \"NCAAF\";\n    if (lower.includes(\"mlb\") || lower.includes(\"baseball\")) return \"MLB\";\n    if (lower.includes(\"nhl\") || lower.includes(\"hockey\")) return \"NHL\";\n    if (\n      lower.includes(\"soccer\") ||\n      lower.includes(\"mls\") ||\n      lower.includes(\"premier\")\n    )\n      return \"Soccer\";\n    return \"NBA\"; // Default\n  }\n\n  /**\n   * Detect sport from data attribute\n   */\n  function detectSportFromAttribute(attr) {\n    const lower = attr.toLowerCase();\n    if (lower.includes(\"nba\")) return \"NBA\";\n    if (lower.includes(\"nfl\")) return \"NFL\";\n    if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\")) return \"NCAAB\";\n    if (lower.includes(\"ncaaf\")) return \"NCAAF\";\n    if (lower.includes(\"mlb\")) return \"MLB\";\n    if (lower.includes(\"nhl\")) return \"NHL\";\n    return \"NBA\";\n  }\n\n  /**\n   * Parse HTML from sportsbook bet slip tables\n   * Enhanced to handle parlays, round robins, and multi-leg bets\n   */\n  function parseHTMLPicks(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all bet rows\n    const rows = doc.querySelectorAll(\"tr[data-ticket], tr.odd, tr.even\");\n\n    // Track seen tickets to avoid duplicates in round robins\n    const seenLegs = new Set();\n\n    rows.forEach((row) => {\n      try {\n        const ticketId = row.getAttribute(\"data-ticket\") || \"\";\n\n        // Check if this is a parlay/round robin row\n        const parlayLabel = row.querySelector(\".type-magic\");\n        const isParlayRow = parlayLabel !== null;\n\n        if (isParlayRow) {\n          // Parse parlay row - extract all legs\n          const parlayType = parlayLabel.textContent.trim();\n          const legs = row.querySelectorAll(\".wager-simple\");\n\n          // Get the row's total risk/win (shared among all 2-leg combos in round robin)\n          const rowRisk =\n            parseFloat(\n              row.querySelector(\"[data-risk]\")?.getAttribute(\"data-risk\"),\n            ) || 0;\n          const rowWin =\n            parseFloat(\n              row.querySelector(\"[data-win]\")?.getAttribute(\"data-win\"),\n            ) || 0;\n\n          legs.forEach((leg, legIdx) => {\n            const legPick = parseParlayLeg(leg, ticketId, parlayType, legIdx);\n            if (legPick) {\n              // Create unique key for this leg to avoid duplicates\n              const legKey = `${ticketId}_${legPick.pickTeam}_${legPick.line || \"ML\"}_${legPick.segment}`;\n\n              if (!seenLegs.has(legKey)) {\n                seenLegs.add(legKey);\n                // Distribute risk/win proportionally across legs\n                legPick.risk = Math.round(rowRisk / legs.length);\n                legPick.win = Math.round(rowWin / legs.length);\n                legPick.parlayId = ticketId;\n                legPick.parlayType = parlayType;\n                legPick.isParlay = true;\n                picks.push(legPick);\n              }\n            }\n          });\n        } else {\n          // Single bet row\n          const pick = parseHTMLRow(row);\n          if (pick) {\n            pick.isParlay = false;\n            picks.push(pick);\n          }\n        }\n      } catch (e) {\n        console.warn(\"Failed to parse HTML row:\", e);\n      }\n    });\n\n    return picks;\n  }\n\n  /**\n   * Parse a single leg from a parlay/round robin wager\n   */\n  function parseParlayLeg(legEl, ticketId, parlayType, legIndex) {\n    const pick = {\n      sport: \"NCAAB\", // Default for college games\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get team name\n    const teamEl = legEl.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n      // Check if it contains a \"/\" indicating a total bet on a game\n      if (pick.pickTeam.includes(\"/\")) {\n        const parts = pick.pickTeam.split(\"/\").map((s) => s.trim());\n        pick.awayTeam = parts[0];\n        pick.homeTeam = parts[1];\n      }\n    }\n\n    // Get line/odds\n    const lineEl = legEl.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = legEl.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      }\n    }\n\n    // Detect sport from icon or team name\n    const icon = legEl.querySelector(\"img.team-logo\");\n    if (icon) {\n      const src = icon.getAttribute(\"src\") || \"\";\n      if (\n        src.includes(\"NBA\") ||\n        src.includes(\"Spurs\") ||\n        src.includes(\"Knicks\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Check pick team name to infer sport\n    if (pick.pickTeam) {\n      const teamLower = pick.pickTeam.toLowerCase();\n      if (\n        teamLower.includes(\"spurs\") ||\n        teamLower.includes(\"knicks\") ||\n        teamLower.includes(\"lakers\") ||\n        teamLower.includes(\"celtics\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Get date from nearest sibling with date\n    const dateCell = legEl.closest(\"tr\")?.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Validate\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse a single HTML table row from sportsbook\n   */\n  function parseHTMLRow(row) {\n    const pick = {\n      sport: \"NBA\",\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get accepted date/time\n    const dateCell = row.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Get team name\n    const teamEl = row.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n    }\n\n    // Get line/odds - handle both spread and moneyline\n    const lineEl = row.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = row.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      } else if (\n        periodText.includes(\"1st quarter\") ||\n        periodText.includes(\"q1\") ||\n        periodText.includes(\"1q\")\n      ) {\n        pick.segment = \"1st Quarter\";\n      }\n    }\n\n    // Get risk amount\n    const riskEl = row.querySelector(\"[data-risk]\");\n    if (riskEl) {\n      pick.risk = parseFloat(riskEl.getAttribute(\"data-risk\")) || 0;\n    } else {\n      const riskText = row.querySelector(\".risk-col span\");\n      if (riskText) {\n        pick.risk = parseCurrency(riskText.textContent);\n      }\n    }\n\n    // Get win amount\n    const winEl = row.querySelector(\"[data-win]\");\n    if (winEl) {\n      pick.win = parseFloat(winEl.getAttribute(\"data-win\")) || 0;\n    } else {\n      const winText = row.querySelector(\".win-col span\");\n      if (winText) {\n        pick.win = parseCurrency(winText.textContent);\n      }\n    }\n\n    // Get game info from hidden details\n    const gameEl = row.querySelector(\".d-r\");\n    if (gameEl) {\n      const gameText = gameEl.textContent;\n      if (\n        gameText.includes(\"/\") ||\n        gameText.includes(\" vs \") ||\n        gameText.includes(\" @ \")\n      ) {\n        pick.game = gameText.trim();\n        const teams = parseGameString(gameText);\n        if (teams) {\n          pick.awayTeam = teams.away;\n          pick.homeTeam = teams.home;\n        }\n      }\n    }\n\n    // Detect sport from selection info\n    const selectionEl = row.querySelector(\n      \".selection-S .d-r, .selection-M .d-r\",\n    );\n    if (selectionEl) {\n      const selText = selectionEl.textContent.toLowerCase();\n      if (selText.includes(\"nba\")) pick.sport = \"NBA\";\n      else if (selText.includes(\"nfl\")) pick.sport = \"NFL\";\n      else if (selText.includes(\"ncaab\") || selText.includes(\"ncaam\"))\n        pick.sport = \"NCAAB\";\n      else if (selText.includes(\"ncaaf\")) pick.sport = \"NCAAF\";\n      else if (selText.includes(\"mlb\")) pick.sport = \"MLB\";\n      else if (selText.includes(\"nhl\")) pick.sport = \"NHL\";\n    }\n\n    // Validate minimum fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse line and odds from text like \"+1\u00BD -115\" or \"ML +115\"\n   */\n  function parseLineAndOdds(pick, text) {\n    // Convert fractions to decimals\n    text = text.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Check for moneyline first\n    if (/\\bML\\b/i.test(text)) {\n      pick.pickType = \"moneyline\";\n      // Extract odds after ML\n      const oddsMatch = text.match(/ML\\s*([+-]\\d+)/i);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Check for total (over/under)\n    if (/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i.test(text)) {\n      const match = text.match(/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i);\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(match[1]) ? \"Over\" : \"Under\";\n      pick.line = match[2];\n      // Extract odds\n      const oddsMatch = text.match(/([+-]\\d{2,4})(?:\\s|$)/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Otherwise it's a spread\n    // Pattern: \"+2.5 -110\" or \"-3 +105\"\n    const spreadMatch = text.match(/([+-]?\\d+\\.?\\d*)\\s+([+-]\\d{2,4})/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.line =\n        spreadMatch[1].startsWith(\"+\") || spreadMatch[1].startsWith(\"-\")\n          ? spreadMatch[1]\n          : \"+\" + spreadMatch[1];\n      pick.odds = spreadMatch[2];\n      return;\n    }\n\n    // Just a line without odds\n    const lineOnly = text.match(/([+-]?\\d+\\.?\\d*)/);\n    if (lineOnly) {\n      pick.pickType = \"spread\";\n      pick.line =\n        lineOnly[1].startsWith(\"+\") || lineOnly[1].startsWith(\"-\")\n          ? lineOnly[1]\n          : \"+\" + lineOnly[1];\n    }\n  }\n\n  /**\n   * Parse text-based picks - SMART INTUITIVE PARSER\n   * Handles any reasonable format:\n   *   \"POR +7\"\n   *   \"bills fg -3; bills over 44.5\"\n   *   \"bills ml 1h; bills -2.5 1h\"\n   *   \"bills o10 tto 1h\"\n   *   \"BOS @ POR under 117.5\"\n   *   \"1H POR +3.5\"\n   *   \"under 220\"\n   */\n  function parseTextPicks(text) {\n    const picks = [];\n\n    // Split on newlines, semicolons, and periods (but not decimal points)\n    const rawLines = text\n      .replace(/;/g, \"\\n\")\n      .replace(/\\.\\s+/g, \"\\n\") // Period followed by space = new line\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter((l) => l.length > 0);\n\n    let currentSport = \"NBA\";\n    let currentGame = null;\n\n    for (const line of rawLines) {\n      // ===== PIPE-DELIMITED FORMAT =====\n      // Format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n      // Example: \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n      if (line.includes(\"|\")) {\n        const pipePick = parsePipeDelimitedLine(line);\n        if (pipePick) {\n          // Ensure sport is uppercase\n          if (pipePick.sport) pipePick.sport = pipePick.sport.toUpperCase();\n          picks.push(pipePick);\n          continue;\n        }\n      }\n\n      // Check for sport/game context\n      const contextInfo = extractContext(line);\n      if (contextInfo.sport) currentSport = contextInfo.sport.toUpperCase();\n      if (contextInfo.game) currentGame = contextInfo.game;\n\n      // Skip if it's just a context line (no bet info)\n      if (contextInfo.isContextOnly) continue;\n\n      const pick = parseFlexibleLine(line, currentSport, currentGame);\n      if (pick) {\n        picks.push(pick);\n      }\n    }\n\n    // Normalize all picks for consistency\n    const normalizedPicks = picks.map((pick) => ({\n      ...pick,\n      sport: (pick.sport || \"NBA\").toUpperCase(),\n      league: (pick.league || pick.sport || \"NBA\").toUpperCase(),\n      pickDirection: pick.pickDirection\n        ? pick.pickDirection.replace(/^UNDE\\b/i, \"UNDER\").toUpperCase()\n        : \"\",\n      pickType: (pick.pickType || \"spread\").toLowerCase(),\n    }));\n\n    console.log(`\uD83D\uDCCA Parsed ${normalizedPicks.length} picks from text input`);\n    return normalizedPicks;\n  }\n\n  /**\n   * Extract context (sport, game) from a line\n   */\n  function extractContext(line) {\n    const lower = line.toLowerCase();\n    const result = { sport: null, game: null, isContextOnly: false };\n\n    // Detect sport - ALWAYS uppercase\n    if (/\\bnfl\\b/i.test(lower)) result.sport = \"NFL\";\n    else if (/\\bnba\\b/i.test(lower)) result.sport = \"NBA\";\n    else if (/\\bncaab\\b|\\bncaam\\b|\\bcbb\\b/i.test(lower)) result.sport = \"NCAAB\";\n    else if (/\\bncaaf\\b|\\bcfb\\b/i.test(lower)) result.sport = \"NCAAF\";\n    else if (/\\bmlb\\b/i.test(lower)) result.sport = \"MLB\";\n    else if (/\\bnhl\\b/i.test(lower)) result.sport = \"NHL\";\n\n    // Detect game matchup (eagles at bills, bos @ por, etc.)\n    const gameMatch = line.match(\n      /\\b([A-Za-z]+)\\s*(?:at|@|vs\\.?|versus)\\s*([A-Za-z]+)\\b/i,\n    );\n    if (gameMatch) {\n      result.game = {\n        away: resolveTeamName(gameMatch[1]),\n        home: resolveTeamName(gameMatch[2]),\n      };\n    }\n\n    // Check if this line is ONLY context (no numbers = no bet)\n    if (!line.match(/\\d/) && (result.sport || result.game)) {\n      result.isContextOnly = true;\n    }\n\n    return result;\n  }\n\n  /**\n   * Smart flexible parser - handles any format intuitively\n   */\n  function parseFlexibleLine(line, defaultSport, currentGame) {\n    // Normalize default sport to uppercase\n    const normalizedSport = (defaultSport || \"NBA\").toUpperCase();\n    const pick = {\n      sport: normalizedSport,\n      league: normalizedSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n    };\n\n    // Apply game context if available\n    if (currentGame) {\n      pick.awayTeam = currentGame.away;\n      pick.homeTeam = currentGame.home;\n      pick.game = `${currentGame.away} @ ${currentGame.home}`;\n    }\n\n    // Normalize: remove extra spaces, handle slashes as spaces\n    let normalized = line\n      .replace(/\\s*\\/\\s*/g, \" \")\n      .replace(/\\s+/g, \" \")\n      .trim();\n    const originalLine = normalized;\n\n    // ===== STEP 1: Extract segment (1H, 2H, FG, 1st half, etc.) =====\n    const segmentPatterns = [\n      { pattern: /\\b(1st\\s*half|first\\s*half|1h)\\b/i, segment: \"1st Half\" },\n      { pattern: /\\b(2nd\\s*half|second\\s*half|2h)\\b/i, segment: \"2nd Half\" },\n      {\n        pattern: /\\b(1st\\s*quarter|first\\s*quarter|1q)\\b/i,\n        segment: \"1st Quarter\",\n      },\n      { pattern: /\\b(full\\s*game|fg)\\b/i, segment: \"Full Game\" },\n    ];\n\n    for (const { pattern, segment } of segmentPatterns) {\n      if (pattern.test(normalized)) {\n        pick.segment = segment;\n        normalized = normalized.replace(pattern, \" \").trim();\n        break;\n      }\n    }\n\n    // ===== STEP 2: Check for MONEYLINE (ml) =====\n    if (/\\bml\\b/i.test(normalized)) {\n      pick.pickType = \"moneyline\";\n      normalized = normalized.replace(/\\bml\\b/gi, \" \").trim();\n\n      // Find the team\n      const teamKeys = Object.keys(TEAM_ALIASES);\n      for (const teamKey of teamKeys) {\n        const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n        if (teamRegex.test(normalized)) {\n          pick.pickTeam = resolveTeamName(teamKey);\n          break;\n        }\n      }\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      if (pick.pickTeam) {\n        console.log(\n          `\u2705 Parsed ML: \"${originalLine}\" -> ${pick.pickTeam} ML (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 3: Check for TEAM TOTAL (tto/ttu or \"team o/u\") =====\n    const teamTotalMatch =\n      normalized.match(/\\b([A-Za-z]+)\\s*(?:tto|ttu|o|u)\\s*([\\d.]+)/i) ||\n      normalized.match(/\\b([A-Za-z]+)\\s+(?:over|under)\\s*([\\d.]+)/i);\n    if (teamTotalMatch) {\n      const teamPart = teamTotalMatch[1].toLowerCase();\n      const linePart = teamTotalMatch[2];\n      const fullMatch = teamTotalMatch[0].toLowerCase();\n\n      // Check if it's actually a team (not \"over\" or \"under\")\n      if (\n        teamPart !== \"over\" &&\n        teamPart !== \"under\" &&\n        teamPart !== \"o\" &&\n        teamPart !== \"u\"\n      ) {\n        pick.pickType = \"team-total\";\n        pick.pickTeam = resolveTeamName(teamPart);\n        pick.line = linePart;\n\n        // Determine over/under\n        if (/tto|over|\\bo\\d/i.test(fullMatch)) {\n          pick.pickDirection = \"Over\";\n        } else {\n          pick.pickDirection = \"Under\";\n        }\n\n        console.log(\n          `\u2705 Parsed team total: \"${originalLine}\" -> ${pick.pickTeam} ${pick.pickDirection} ${pick.line} (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 4: Detect GAME TOTAL (over/under without team prefix) =====\n    const gameTotalMatch = normalized.match(/\\b(over|under|o|u)\\s*([\\d.]+)/i);\n    if (gameTotalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(gameTotalMatch[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = gameTotalMatch[2];\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      console.log(\n        `\u2705 Parsed game total: \"${originalLine}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Remove remaining keywords\n    normalized = normalized\n      .replace(/\\b(spread|total|moneyline)\\b/gi, \" \")\n      .trim();\n\n    // ===== STEP 5: Find team and spread =====\n    const teamKeys = Object.keys(TEAM_ALIASES);\n    let foundTeam = null;\n    let foundTeamPos = -1;\n\n    for (const teamKey of teamKeys) {\n      const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n      const match = normalized.match(teamRegex);\n      if (match) {\n        const pos = match.index;\n        if (foundTeamPos === -1 || pos < foundTeamPos) {\n          foundTeam = teamKey;\n          foundTeamPos = pos;\n        }\n      }\n    }\n\n    if (!foundTeam) {\n      // Try to find any capitalized word that might be a team\n      const capsMatch = normalized.match(/\\b([A-Z]{2,4})\\b/);\n      if (capsMatch) {\n        foundTeam = capsMatch[1].toLowerCase();\n      }\n    }\n\n    if (!foundTeam) {\n      console.log(`\u26A0\uFE0F No team found in: \"${originalLine}\"`);\n      return null;\n    }\n\n    pick.pickTeam = resolveTeamName(foundTeam);\n\n    // ===== STEP 4: Find the line (spread) =====\n    // Look for +/- number patterns\n    const spreadPatterns = [\n      /([+-]?\\d+\\.?\\d*)\\s*([+-]\\d{3,4})?/, // \"+7.0 -110\" or \"+7\" or \"7.0\"\n    ];\n\n    // Find all numbers in the line\n    const numbers = normalized.match(/[+-]?\\d+\\.?\\d*/g) || [];\n\n    for (const num of numbers) {\n      const numVal = parseFloat(num);\n\n      // Skip if it looks like odds (100+ with sign)\n      if (\n        Math.abs(numVal) >= 100 &&\n        (num.startsWith(\"+\") || num.startsWith(\"-\"))\n      ) {\n        // This is likely odds, not a spread\n        pick.odds = num;\n        continue;\n      }\n\n      // This is likely a spread\n      if (!pick.line) {\n        pick.pickType = \"spread\";\n        pick.line =\n          num.startsWith(\"+\") || num.startsWith(\"-\") ? num : `+${num}`;\n      }\n    }\n\n    // If no spread found but we have a team, might be ML\n    if (!pick.line && pick.pickTeam) {\n      // Check if there's just odds (moneyline)\n      const mlOdds = normalized.match(/([+-]\\d{3,4})/);\n      if (mlOdds) {\n        pick.pickType = \"moneyline\";\n        pick.odds = mlOdds[1];\n      } else {\n        // Just a team name with no line - invalid\n        console.log(`\u26A0\uFE0F No line/odds found for team in: \"${originalLine}\"`);\n        return null;\n      }\n    }\n\n    // ===== STEP 5: Try to find game context (opponent) =====\n    const vsMatch = normalized.match(/([A-Za-z]+)\\s*[@vs]+\\s*([A-Za-z]+)/i);\n    if (vsMatch) {\n      pick.awayTeam = resolveTeamName(vsMatch[1]);\n      pick.homeTeam = resolveTeamName(vsMatch[2]);\n      pick.game = `${pick.awayTeam} @ ${pick.homeTeam}`;\n    }\n\n    console.log(\n      `\u2705 Parsed: \"${originalLine}\" -> ${pick.pickTeam} ${pick.line || pick.odds} (${pick.segment})`,\n    );\n    return pick;\n  }\n\n  /**\n   * Parse pipe-delimited format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n   * Examples:\n   *   \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n   *   \"Siena vs Mount St Marys | Full Game | Siena -3 (-110)\"\n   *   \"UAB vs East Carolina | Full Game | UAB -7.5 (-110)\"\n   *   \"IPFW vs Robert Morris | Full Game | IPFW +4 (-110)\"\n   *   \"Northern Kentucky vs Wisc Green Bay | Full Game | N Kentucky -4 (-110)\"\n   */\n  function parsePipeDelimitedLine(line) {\n    const parts = line.split(\"|\").map((p) => p.trim());\n\n    if (parts.length < 3) return null;\n\n    const [matchupPart, segmentPart, pickPart] = parts;\n\n    // Parse matchup (Team1 vs Team2)\n    const matchupMatch = matchupPart.match(\n      /^(.+?)\\s*(?:vs\\.?|@|versus)\\s*(.+)$/i,\n    );\n    if (!matchupMatch) return null;\n\n    const awayTeam = matchupMatch[1].trim();\n    const homeTeam = matchupMatch[2].trim();\n\n    // Parse segment\n    let segment = \"Full Game\";\n    const segLower = segmentPart.toLowerCase();\n    if (segLower.includes(\"1st half\") || segLower.includes(\"1h\")) {\n      segment = \"1st Half\";\n    } else if (segLower.includes(\"2nd half\") || segLower.includes(\"2h\")) {\n      segment = \"2nd Half\";\n    } else if (segLower.includes(\"1st quarter\") || segLower.includes(\"1q\")) {\n      segment = \"1st Quarter\";\n    }\n\n    // Parse pick part: \"FAU -2 (-110)\" or \"Over 150 (-110)\" or \"FAU ML (-110)\"\n    const pick = {\n      sport: \"NCAAB\", // Default for college basketball\n      segment: segment,\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n      awayTeam: awayTeam,\n      homeTeam: homeTeam,\n      game: `${awayTeam} @ ${homeTeam}`,\n    };\n\n    // Extract odds (in parentheses at end)\n    const oddsMatch = pickPart.match(/\\(([+-]?\\d+)\\)\\s*$/);\n    if (oddsMatch) {\n      pick.odds =\n        oddsMatch[1].startsWith(\"+\") || oddsMatch[1].startsWith(\"-\")\n          ? oddsMatch[1]\n          : `-${oddsMatch[1]}`;\n    }\n\n    // Remove odds from pick part for further parsing\n    let pickText = pickPart.replace(/\\s*\\([+-]?\\d+\\)\\s*$/, \"\").trim();\n\n    // Check for game total (Over/Under)\n    const totalMatch = pickText.match(/^(over|under|o|u)\\s+(\\d+\\.?\\d*)/i);\n    if (totalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = totalMatch[2];\n      console.log(\n        `\u2705 Parsed pipe format (total): \"${line}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Check for moneyline (Team ML)\n    const mlMatch = pickText.match(/^(.+?)\\s+ml$/i);\n    if (mlMatch) {\n      pick.pickType = \"moneyline\";\n      pick.pickTeam = mlMatch[1].trim();\n      console.log(\n        `\u2705 Parsed pipe format (ML): \"${line}\" -> ${pick.pickTeam} ML`,\n      );\n      return pick;\n    }\n\n    // Default: Spread (Team +/- Line)\n    const spreadMatch = pickText.match(/^(.+?)\\s+([+-]?\\d+\\.?\\d*)$/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.pickTeam = spreadMatch[1].trim();\n      const lineVal = spreadMatch[2];\n      pick.line =\n        lineVal.startsWith(\"+\") || lineVal.startsWith(\"-\")\n          ? lineVal\n          : `+${lineVal}`;\n      console.log(\n        `\u2705 Parsed pipe format (spread): \"${line}\" -> ${pick.pickTeam} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Couldn't parse the pick part\n    console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: \"${pickPart}\"`);\n    return null;\n  }\n\n  /**\n   * Parse a single line of text picks (legacy function - kept for fallback)\n   */\n  function parseTextLine(line, defaultSport, defaultGame) {\n    const pick = {\n      sport: defaultSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n    };\n\n    // Check for segment markers first\n    if (/\\b1h\\b/i.test(line)) {\n      pick.segment = \"1st Half\";\n      line = line.replace(/\\b1h\\b/i, \"\").trim();\n    } else if (/\\b2h\\b/i.test(line)) {\n      pick.segment = \"2nd Half\";\n      line = line.replace(/\\b2h\\b/i, \"\").trim();\n    } else if (/\\b1q\\b/i.test(line)) {\n      pick.segment = \"1st Quarter\";\n      line = line.replace(/\\b1q\\b/i, \"\").trim();\n    }\n\n    // Extract risk amount (at end: $50, $100, etc.)\n    const riskMatch = line.match(/\\$(\\d+(?:\\.\\d+)?)\\s*$/);\n    if (riskMatch) {\n      pick.risk = parseFloat(riskMatch[1]) * unitMultiplier;\n      line = line.replace(/\\$\\d+(?:\\.\\d+)?\\s*$/, \"\").trim();\n    }\n\n    // Now parse the bet itself\n    // Pattern 1: \"Team SPREAD ODDS\" (e.g., \"Spurs 2.5 -105\")\n    // Pattern 2: \"Team ODDS\" (e.g., \"Spurs +118\" = ML)\n    // Pattern 3: \"Team ML ODDS\" (e.g., \"Spurs ML +118\")\n    // Pattern 4: \"Over/Under LINE ODDS\" (e.g., \"Over 220 -110\")\n\n    // FIRST: Check if line starts with Over/Under (game total without team context)\n    // This must be checked BEFORE team extraction to avoid \"Over\" being captured as a team\n    const standaloneTotal = line.match(\n      /^(over|under|o|u)\\s+(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n    );\n    if (standaloneTotal) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(standaloneTotal[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection; // Set pickTeam to direction for display\n      pick.line = standaloneTotal[2];\n      if (standaloneTotal[3]) {\n        pick.odds = standaloneTotal[3];\n      }\n\n      // Calculate win and return early\n      if (pick.risk && pick.odds) {\n        pick.win = calculateWin(pick.risk, pick.odds);\n      }\n      if (defaultGame) {\n        pick.game = defaultGame;\n      }\n      return pick;\n    }\n\n    // Find the team name (at the start)\n    const teamMatch = line.match(\n      /^([A-Za-z][A-Za-z\\s]*?)(?=\\s+[\\d+-]|\\s+ML|\\s+over|\\s+under|\\s*$)/i,\n    );\n\n    if (!teamMatch) {\n      return null;\n    }\n\n    const teamName = teamMatch[1].trim();\n    pick.pickTeam = resolveTeamName(teamName);\n\n    // Remove team name from line\n    let remainder = line.substring(teamMatch[0].length).trim();\n\n    // Check for explicit ML\n    if (/^ML\\s*/i.test(remainder)) {\n      pick.pickType = \"moneyline\";\n      remainder = remainder.replace(/^ML\\s*/i, \"\").trim();\n\n      // Get odds\n      const oddsMatch = remainder.match(/^([+-]\\d{2,4})/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n    }\n    // Check for team total (e.g., \"Spurs over 110 -115\")\n    else if (/^(over|under|o|u)\\s*/i.test(remainder)) {\n      pick.pickType = \"team-total\";\n      const totalMatch = remainder.match(\n        /^(over|under|o|u)\\s*(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n      );\n      if (totalMatch) {\n        pick.pickDirection = /over|o/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n        pick.line = totalMatch[2];\n        if (totalMatch[3]) {\n          pick.odds = totalMatch[3];\n        }\n      }\n    }\n    // Check for spread with odds: \"2.5 -105\" or moneyline odds only: \"+118\"\n    else if (/^\\d/.test(remainder) || /^[+-]\\d/.test(remainder)) {\n      // Determine if it's:\n      // - Spread with odds: \"2.5 -105\" or \"+3.5 -110\"\n      // - Spread only: \"2.5\" or \"+3\"\n      // - Moneyline (odds only): \"+118\" or \"-150\"\n\n      // Key insight: ML odds are typically 100+ (3+ digits after the sign)\n      // Spreads are typically under 100 and often have decimals\n\n      // Pattern: Check if it starts with +/- and has 3+ digits (100+) = likely ML odds\n      const mlOddsMatch = remainder.match(/^([+-])(\\d+)(?:\\s|$)/);\n\n      if (mlOddsMatch) {\n        const sign = mlOddsMatch[1];\n        const number = mlOddsMatch[2];\n        const numValue = parseInt(number);\n\n        // If number is 100 or higher, it's almost certainly ML odds\n        // If it's a single or double digit number, it's a spread\n        if (numValue >= 100) {\n          pick.pickType = \"moneyline\";\n          pick.odds = sign + number;\n        } else {\n          // It's a spread (like +3 or -7)\n          pick.pickType = \"spread\";\n          pick.line = sign + number;\n          // Check for odds after the spread\n          const afterSpread = remainder.substring(mlOddsMatch[0].length).trim();\n          const oddsAfter = afterSpread.match(/^([+-]\\d{2,4})/);\n          if (oddsAfter) {\n            pick.odds = oddsAfter[1];\n          }\n        }\n      } else {\n        // Doesn't start with +/-, so it's a spread starting with just a number (like \"2.5 -105\")\n        pick.pickType = \"spread\";\n        const spreadMatch = remainder.match(/^(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/);\n        if (spreadMatch) {\n          pick.line = \"+\" + spreadMatch[1]; // Assume positive spread\n          if (spreadMatch[2]) {\n            pick.odds = spreadMatch[2];\n          }\n        }\n      }\n    }\n\n    // Calculate win amount if we have risk and odds\n    if (pick.risk && pick.odds) {\n      pick.win = calculateWin(pick.risk, pick.odds);\n    }\n\n    // Set game context if available\n    if (defaultGame) {\n      pick.game = defaultGame;\n    }\n\n    // Validate\n    if (!pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine if a line should be skipped\n   */\n  function shouldSkipLine(line) {\n    const lower = line.toLowerCase();\n\n    // Skip empty or very short lines\n    if (line.length < 3) return true;\n\n    // Skip common header/context phrases\n    const skipPatterns = [\n      /^tonight['']?s?\\s+game/i,\n      /^today['']?s?\\s+game/i,\n      /^correction/i,\n      /^note:/i,\n      /^fyi/i,\n      /^\\d+k\\s+is\\s+the\\s+unit/i,\n      /^unit/i,\n      /^\\^+/, // Lines starting with ^\n    ];\n\n    return skipPatterns.some((p) => p.test(line));\n  }\n\n  /**\n   * Extract context info from header lines\n   */\n  function updateContextFromLine(line, callback) {\n    const lower = line.toLowerCase();\n    const ctx = {};\n\n    // Detect sport\n    if (lower.includes(\"nba\")) ctx.sport = \"NBA\";\n    else if (lower.includes(\"nfl\")) ctx.sport = \"NFL\";\n    else if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\"))\n      ctx.sport = \"NCAAB\";\n    else if (lower.includes(\"ncaaf\")) ctx.sport = \"NCAAF\";\n    else if (lower.includes(\"mlb\")) ctx.sport = \"MLB\";\n    else if (lower.includes(\"nhl\")) ctx.sport = \"NHL\";\n\n    // Detect game matchup\n    const gameMatch = line.match(\n      /([A-Za-z\\s]+)\\s*(?:vs\\.?|@|\\/)\\s*([A-Za-z\\s]+)/i,\n    );\n    if (gameMatch) {\n      ctx.game = `${gameMatch[1].trim()} @ ${gameMatch[2].trim()}`;\n    }\n\n    callback(ctx);\n  }\n\n  /**\n   * Resolve team alias to full name\n   */\n  function resolveTeamName(name) {\n    const lower = name.toLowerCase().trim();\n    return TEAM_ALIASES[lower] || name;\n  }\n\n  /**\n   * Parse currency string to number\n   */\n  function parseCurrency(text) {\n    if (!text) return 0;\n    const cleaned = text.replace(/[$,]/g, \"\");\n    return parseFloat(cleaned) || 0;\n  }\n\n  /**\n   * Parse date/time string\n   */\n  function parseDateTimeString(text) {\n    // Format: \"Dec 16, 2025 3:53 PM\"\n    const match = text.match(/(\\w+\\s+\\d+,?\\s+\\d{4})\\s+(\\d+:\\d+\\s*[AP]M)/i);\n    if (match) {\n      return {\n        date: match[1].trim(),\n        time: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Parse game string to away/home teams\n   */\n  function parseGameString(text) {\n    const match = text.match(/(.+?)\\s*(?:\\/|vs\\.?|@)\\s*(.+)/i);\n    if (match) {\n      return {\n        away: match[1].trim(),\n        home: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Calculate win amount from risk and odds\n   */\n  function calculateWin(risk, odds) {\n    const oddsNum = parseInt(odds);\n    if (oddsNum > 0) {\n      // Positive odds: win = risk * (odds/100)\n      return risk * (oddsNum / 100);\n    } else {\n      // Negative odds: win = risk / (|odds|/100)\n      return risk / (Math.abs(oddsNum) / 100);\n    }\n  }\n\n  /**\n   * Get today's date in MM/DD/YYYY format\n   */\n  function getTodayDate() {\n    const now = new Date();\n    return `${now.getMonth() + 1}/${now.getDate()}/${now.getFullYear()}`;\n  }\n\n  /**\n   * Convert picks to display format for the dashboard\n   */\n  function picksToDisplayFormat(picks) {\n    return picks.map((pick) => {\n      // Build selection string\n      let selection = \"\";\n      if (pick.pickType === \"spread\") {\n        selection = `${pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"moneyline\") {\n        selection = `${pick.pickTeam} ML`;\n      } else if (pick.pickType === \"total\") {\n        selection = `${pick.pickDirection || pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"team-total\") {\n        selection = `${pick.pickTeam} ${pick.pickDirection} ${pick.line}`;\n      }\n\n      if (pick.odds) {\n        selection += ` (${pick.odds})`;\n      }\n\n      return {\n        ...pick,\n        selection,\n        displaySegment: pick.segment !== \"Full Game\" ? pick.segment : \"\",\n        displayRisk: pick.risk ? `$${pick.risk.toLocaleString()}` : \"\",\n        displayWin: pick.win ? `$${Math.round(pick.win).toLocaleString()}` : \"\",\n      };\n    });\n  }\n\n  /**\n   * Convert picks to CSV format\n   */\n  function picksToCSV(picks) {\n    const headers = [\n      \"Date\",\n      \"Time\",\n      \"Sport\",\n      \"Game\",\n      \"Team\",\n      \"Pick Type\",\n      \"Line\",\n      \"Odds\",\n      \"Segment\",\n      \"Risk\",\n      \"To Win\",\n      \"Status\",\n    ];\n    const rows = picks.map((pick) => [\n      pick.date || \"\",\n      pick.time || \"\",\n      pick.sport || \"\",\n      pick.game || \"\",\n      pick.pickTeam || \"\",\n      pick.pickType || \"\",\n      pick.line || \"\",\n      pick.odds || \"\",\n      pick.segment || \"\",\n      pick.risk || \"\",\n      pick.win ? Math.round(pick.win) : \"\",\n      pick.status || \"pending\",\n    ]);\n\n    return [headers, ...rows]\n      .map((row) => row.map((cell) => `\"${cell}\"`).join(\",\"))\n      .join(\"\\n\");\n  }\n\n  /**\n   * Set the unit multiplier for risk calculations\n   */\n  function setUnitMultiplier(multiplier) {\n    unitMultiplier = multiplier;\n  }\n\n  // Export functions\n  window.PickStandardizer = {\n    standardize: standardizePicks,\n    parseHTML: parseHTMLPicks,\n    parseGameLines: parseSportsbookGameLines,\n    parseText: parseTextPicks,\n    parseBetHistory: parseBetHistory,\n    loadTeamVariants: loadTeamVariants,\n    toDisplayFormat: picksToDisplayFormat,\n    toCSV: picksToCSV,\n    setUnitMultiplier: setUnitMultiplier,\n    resolveTeamName: resolveTeamName,\n\n    // For testing\n    _parseTextLine: parseTextLine,\n    _parseLineAndOdds: parseLineAndOdds,\n    _parseGamePanel: parseGamePanel,\n    _isBetHistoryFormat: isBetHistoryFormat,\n    _parseBetHistoryLeg: parseBetHistoryLeg,\n  };\n\n  console.log(\n    \"\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser\",\n  );\n})();\n\n\n/* === assets/js/features/import-options.js === */\n/**\r\n * Import Options Handler - Upload via API\r\n * Uploads files and pasted content through Azure Functions API\r\n */\r\n\r\n// Use API endpoint instead of direct blob storage\r\nconst API_BASE_URL = window.APP_CONFIG?.API_BASE_URL || '/api';\r\n\r\nlet selectedFiles = [];\r\n\r\n// Security: Allowed file types and max size\r\nconst ALLOWED_EXTENSIONS = ['.pdf', '.jpg', '.jpeg', '.png', '.html', '.htm', '.txt', '.csv'];\r\nconst ALLOWED_MIME_TYPES = ['application/pdf', 'image/jpeg', 'image/png', 'text/html', 'text/plain', 'text/csv'];\r\nconst MAX_FILE_SIZE_MB = 10;\r\nconst MAX_FILE_SIZE = MAX_FILE_SIZE_MB * 1024 * 1024;\r\n\r\nfunction getSelectedSportsbookMeta() {\r\n    const select = document.getElementById('upload-sportsbook-select') || document.getElementById('manual-sportsbook-select');\r\n    if (!select) {\r\n        return { value: 'manual', label: 'Manual Upload' };\r\n    }\r\n\r\n    const value = (select.value || '').trim();\r\n    const label = (select.options[select.selectedIndex]?.textContent || value || 'Manual Upload').trim();\r\n\r\n    return {\r\n        value: value || 'manual',\r\n        label: label || 'Manual Upload'\r\n    };\r\n}\r\n\r\nfunction isFileAllowed(file) {\r\n    const ext = '.' + file.name.split('.').pop().toLowerCase();\r\n    const isExtAllowed = ALLOWED_EXTENSIONS.includes(ext);\r\n    const isMimeAllowed = ALLOWED_MIME_TYPES.some(mime => file.type.startsWith(mime.split('/')[0]) || file.type === mime);\r\n    const isSizeAllowed = file.size <= MAX_FILE_SIZE;\r\n    return { valid: isExtAllowed && isSizeAllowed, ext, size: file.size, isSizeAllowed, isExtAllowed };\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const actionButtons = document.getElementById('action-buttons');\r\n    const importOptions = document.getElementById('import-options');\r\n    const importBtn = document.querySelector('.import-picks-btn');\r\n    const backBtn = document.querySelector('.import-back-btn');\r\n\r\n    // Don't exit early - import options may already be visible\r\n    if (!importOptions) {\r\n        console.warn('Import options element not found');\r\n        return;\r\n    }\r\n\r\n    // Show/hide import options\r\n    function showImportOptions() {\r\n        if (actionButtons) actionButtons.style.display = 'none';\r\n        importOptions.removeAttribute('hidden');\r\n    }\r\n\r\n    function hideImportOptions() {\r\n        importOptions.setAttribute('hidden', '');\r\n        if (actionButtons) actionButtons.style.display = 'flex';\r\n        resetUploadForm();\r\n    }\r\n\r\n    function resetUploadForm() {\r\n        selectedFiles = [];\r\n        const fileInput = document.getElementById('file-upload');\r\n        const pasteArea = document.getElementById('paste-area');\r\n        const fileList = document.getElementById('file-list');\r\n        const uploadBtn = document.getElementById('upload-files-btn');\r\n        const statusDiv = document.getElementById('upload-status');\r\n\r\n        if (fileInput) fileInput.value = '';\r\n        if (pasteArea) pasteArea.value = '';\r\n        if (fileList) {\r\n            fileList.innerHTML = '';\r\n            fileList.style.display = 'none';\r\n        }\r\n        if (uploadBtn) uploadBtn.style.display = 'none';\r\n        if (statusDiv) statusDiv.style.display = 'none';\r\n    }\r\n\r\n    if (importBtn) {\r\n        importBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            showImportOptions();\r\n        });\r\n    }\r\n\r\n    if (backBtn) {\r\n        backBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            hideImportOptions();\r\n        });\r\n    }\r\n\r\n    // File upload handling\r\n    const dropZone = document.getElementById('drop-zone');\r\n    const fileInput = document.getElementById('file-upload');\r\n    const fileList = document.getElementById('file-list');\r\n    const uploadFilesBtn = document.getElementById('upload-files-btn');\r\n\r\n    if (dropZone && fileInput) {\r\n        // Drag and drop\r\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, preventDefaults, false);\r\n        });\r\n\r\n        function preventDefaults(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n\r\n        ['dragenter', 'dragover'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, () => {\r\n                dropZone.style.borderColor = '#10b981';\r\n                dropZone.style.background = 'rgba(16, 185, 129, 0.05)';\r\n            });\r\n        });\r\n\r\n        ['dragleave', 'drop'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, () => {\r\n                dropZone.style.borderColor = '';\r\n                dropZone.style.background = '';\r\n            });\r\n        });\r\n\r\n        dropZone.addEventListener('drop', (e) => {\r\n            const dt = e.dataTransfer;\r\n            const files = dt.files;\r\n            handleFiles(files);\r\n        });\r\n\r\n        fileInput.addEventListener('change', function() {\r\n            handleFiles(this.files);\r\n        });\r\n    }\r\n\r\n    function handleFiles(files) {\r\n        const validFiles = [];\r\n        const rejected = [];\r\n\r\n        Array.from(files).forEach(file => {\r\n            const check = isFileAllowed(file);\r\n            if (check.valid) {\r\n                validFiles.push(file);\r\n            } else {\r\n                const reason = !check.isExtAllowed\r\n                    ? `Invalid file type (${check.ext})`\r\n                    : `File too large (${formatFileSize(check.size)} > ${MAX_FILE_SIZE_MB}MB)`;\r\n                rejected.push({ name: file.name, reason });\r\n            }\r\n        });\r\n\r\n        if (rejected.length > 0) {\r\n            const rejectMsg = rejected.map(r => `${r.name}: ${r.reason}`).join('\\n');\r\n            console.warn('Rejected files:', rejectMsg);\r\n            showStatus(`Some files rejected:\\n${rejected.map(r => r.name).join(', ')}`, 'error');\r\n        }\r\n\r\n        selectedFiles = validFiles;\r\n        renderFileList();\r\n    }\r\n\r\n    function renderFileList() {\r\n        if (selectedFiles.length === 0) {\r\n            fileList.style.display = 'none';\r\n            uploadFilesBtn.style.display = 'none';\r\n            return;\r\n        }\r\n\r\n        fileList.style.display = 'block';\r\n        uploadFilesBtn.style.display = 'block';\r\n\r\n        fileList.innerHTML = selectedFiles.map((file, index) => {\r\n            const size = formatFileSize(file.size);\r\n            return `\r\n                <div style=\"display: flex; align-items: center; justify-content: space-between; padding: 0.5rem; background: rgba(16, 185, 129, 0.05); border-radius: 4px; margin-bottom: 0.25rem;\">\r\n                    <span style=\"font-size: 0.75rem; color: #374151; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;\">${escapeHtml(file.name)} (${size})</span>\r\n                    <button onclick=\"window.removeFile(${index})\" style=\"background: none; border: none; color: #ef4444; cursor: pointer; font-size: 1rem; padding: 0 0.5rem;\">\u00D7</button>\r\n                </div>\r\n            `;\r\n        }).join('');\r\n    }\r\n\r\n    // Make removeFile available globally for inline onclick\r\n    window.removeFile = function(index) {\r\n        selectedFiles.splice(index, 1);\r\n        renderFileList();\r\n    };\r\n\r\n    // Upload files button\r\n    if (uploadFilesBtn) {\r\n        uploadFilesBtn.addEventListener('click', async (e) => {\r\n            e.stopPropagation();\r\n            await uploadFiles();\r\n        });\r\n    }\r\n\r\n    async function uploadFiles() {\r\n        if (selectedFiles.length === 0) return;\r\n\r\n        uploadFilesBtn.disabled = true;\r\n        uploadFilesBtn.textContent = 'Uploading...';\r\n\r\n        try {\r\n            // Upload files one by one to the API\r\n            for (const file of selectedFiles) {\r\n                const formData = new FormData();\r\n                const { value: sportsbookKey, label: sportsbookLabel } = getSelectedSportsbookMeta();\r\n                formData.append('file', file);\r\n                formData.append('sportsbook', sportsbookKey);\r\n                formData.append('sportsbookLabel', sportsbookLabel);\r\n\r\n                const response = await fetch(`${API_BASE_URL}/upload`, {\r\n                    method: 'POST',\r\n                    body: formData\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to upload ${file.name}: ${response.statusText}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n                console.log(`Uploaded ${file.name}:`, result);\r\n            }\r\n\r\n            showStatus(`Successfully uploaded ${selectedFiles.length} file(s)!`, 'success');\r\n            selectedFiles = [];\r\n            renderFileList();\r\n            fileInput.value = '';\r\n\r\n            // Process and display picks immediately\r\n            if (window.loadUploadedPicks) {\r\n                setTimeout(() => window.loadUploadedPicks(), 1000);\r\n            } else if (window.loadAndAppendPicks) {\r\n                setTimeout(() => window.loadAndAppendPicks(), 1000);\r\n            }\r\n\r\n            // Also try to load from database if available\r\n            if (window.loadPicksFromDatabase) {\r\n                setTimeout(() => window.loadPicksFromDatabase(), 1500);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Upload error:', error);\r\n            showStatus(`Upload failed: ${error.message}`, 'error');\r\n        } finally {\r\n            uploadFilesBtn.disabled = false;\r\n            uploadFilesBtn.textContent = 'Upload Selected Files';\r\n        }\r\n    }\r\n\r\n    // Paste content upload\r\n    const pasteArea = document.getElementById('paste-area');\r\n    const uploadPasteBtn = document.getElementById('upload-paste-btn');\r\n    const clearBtn = document.querySelector('.paste-clear-btn');\r\n\r\n    if (uploadPasteBtn) {\r\n        uploadPasteBtn.addEventListener('click', async (e) => {\r\n            e.stopPropagation();\r\n            const content = pasteArea.value.trim();\r\n            const selectedBook = getSelectedSportsbookMeta();\r\n\r\n            if (!content) {\r\n                showStatus('Please paste some content first.', 'error');\r\n                return;\r\n            }\r\n\r\n            uploadPasteBtn.disabled = true;\r\n            uploadPasteBtn.textContent = 'Uploading...';\r\n\r\n            try {\r\n                // Detect if content is HTML or text\r\n                const isHTML = content.includes('<html') || content.includes('<!DOCTYPE') || content.includes('<div');\r\n\r\n                // Use LocalPicksManager if available (local dev), otherwise use API\r\n                const saveFn = window.LocalPicksManager?.parseAndAdd || processAndSavePicks;\r\n                const picks = window.LocalPicksManager?.parseAndAdd\r\n                    ? await saveFn(content, selectedBook.label)\r\n                    : await saveFn(content, isHTML, selectedBook);\r\n                \r\n                if (picks.length === 0) {\r\n                    showStatus('No picks could be parsed from the pasted content.', 'error');\r\n                    return;\r\n                }\r\n\r\n                showStatus(`Successfully parsed and saved ${picks.length} pick(s)!`, 'success');\r\n                pasteArea.value = '';\r\n\r\n                // Process and display picks immediately\r\n                if (window.loadUploadedPicks) {\r\n                    setTimeout(() => window.loadUploadedPicks(), 1000);\r\n                } else if (window.loadAndAppendPicks) {\r\n                    setTimeout(() => window.loadAndAppendPicks(), 1000);\r\n                }\r\n\r\n                // Also try to load from database if available\r\n                if (window.loadPicksFromDatabase) {\r\n                    setTimeout(() => window.loadPicksFromDatabase(), 1500);\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Upload error:', error);\r\n                showStatus(`Processing failed: ${error.message}`, 'error');\r\n            } finally {\r\n                uploadPasteBtn.disabled = false;\r\n                uploadPasteBtn.textContent = 'Upload Pasted Content';\r\n            }\r\n        });\r\n    }\r\n\r\n    if (clearBtn) {\r\n        clearBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            if (pasteArea) pasteArea.value = '';\r\n        });\r\n    }\r\n\r\n    function showStatus(message, type) {\r\n        const statusDiv = document.getElementById('upload-status');\r\n        if (!statusDiv) return;\r\n\r\n        statusDiv.textContent = message;\r\n        statusDiv.style.display = 'block';\r\n\r\n        if (type === 'success') {\r\n            statusDiv.style.background = 'rgba(16, 185, 129, 0.1)';\r\n            statusDiv.style.color = '#059669';\r\n            statusDiv.style.border = '1px solid rgba(16, 185, 129, 0.3)';\r\n        } else {\r\n            statusDiv.style.background = 'rgba(239, 68, 68, 0.1)';\r\n            statusDiv.style.color = '#dc2626';\r\n            statusDiv.style.border = '1px solid rgba(239, 68, 68, 0.3)';\r\n        }\r\n\r\n        setTimeout(() => {\r\n            statusDiv.style.display = 'none';\r\n        }, 5000);\r\n    }\r\n\r\n    function formatFileSize(bytes) {\r\n        if (bytes < 1024) return bytes + ' B';\r\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n    }\r\n\r\n    function escapeHtml(text) {\r\n        const div = document.createElement('div');\r\n        div.textContent = text;\r\n        return div.innerHTML;\r\n    }\r\n\r\n    // Function to process and save picks to database\r\n    async function processAndSavePicks(content, isHTML = false, selectedBookMeta = null) {\r\n        try {\r\n            const bookMeta = selectedBookMeta || getSelectedSportsbookMeta();\r\n            const sportsbookKey = bookMeta?.value || 'manual';\r\n            const sportsbookLabel = bookMeta?.label || 'Manual Upload';\r\n\r\n            // Parse the content to extract picks\r\n            let picks = [];\r\n\r\n            if (window.PickStandardizer) {\r\n                try {\r\n                    picks = window.PickStandardizer.standardize(content);\r\n                    console.log('Used PickStandardizer to parse picks:', picks.length);\r\n                } catch (e) {\r\n                    console.warn('PickStandardizer failed, falling back to basic parser:', e);\r\n                    picks = isHTML ? parseHTMLPicks(content) : parseTextPicks(content);\r\n                }\r\n            } else {\r\n                picks = isHTML ? parseHTMLPicks(content) : parseTextPicks(content);\r\n            }\r\n\r\n            // Attach sportsbook metadata immediately for consistency\r\n            picks = picks.map(pick => ({\r\n                ...pick,\r\n                sportsbook: pick.sportsbook || sportsbookLabel,\r\n                bookKey: pick.bookKey || sportsbookKey\r\n            }));\r\n\r\n            // Helper to derive teams from a game/description string like \"Lakers @ Warriors Over\"\r\n            const deriveTeams = (pick) => {\r\n                const source = (pick.game || pick.description || pick.pickTeam || '').trim();\r\n                if (!source) return null;\r\n                const match = source.match(/(.+?)\\s+(?:vs\\.?|@|at)\\s+(.+?)(?:\\s+(over|under))?$/i);\r\n                if (!match) return null;\r\n                return {\r\n                    awayTeam: match[1].trim(),\r\n                    homeTeam: match[2].trim()\r\n                };\r\n            };\r\n\r\n            // Validate and enrich picks with game data using AutoGameFetcher\r\n            if (picks.length > 0 && window.AutoGameFetcher) {\r\n                try {\r\n                    // Fetch today's games if not already cached\r\n                    await window.AutoGameFetcher.fetchTodaysGames();\r\n                    const todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n\r\n                    picks = picks.filter(pick => {\r\n                        // Derive missing teams from game/description to improve matching\r\n                        const derivedTeams = deriveTeams(pick);\r\n                        if (derivedTeams) {\r\n                            if (!pick.awayTeam) pick.awayTeam = derivedTeams.awayTeam;\r\n                            if (!pick.homeTeam) pick.homeTeam = derivedTeams.homeTeam;\r\n                        }\r\n\r\n                        // Find matching game\r\n                        const game = window.AutoGameFetcher.findGame(\r\n                            (pick.awayTeam || pick.pickTeam || '').replace(/\\bover\\b|\\bunder\\b/i, '').trim(),\r\n                            pick.homeTeam\r\n                        );\r\n\r\n                        if (!game) {\r\n                            console.warn(`Game not found for today: ${pick.game || pick.pickTeam}`);\r\n                            return true; // Keep the pick but warn\r\n                        }\r\n\r\n                        // Check if game has finished\r\n                        if (window.AutoGameFetcher.isGameFinished(game)) {\r\n                            console.warn(`Skipping pick for finished game: ${game.awayTeam} @ ${game.homeTeam}`);\r\n                            return false; // Remove finished games\r\n                        }\r\n\r\n                        // Auto-populate game info\r\n                        pick.game = `${game.awayTeam} @ ${game.homeTeam}`;\r\n                        pick.date = game.date;\r\n                        pick.time = game.time;\r\n                        pick.sport = game.sport;\r\n                        pick.gameStatus = game.status;\r\n                        pick.awayTeam = game.awayTeam;\r\n                        pick.homeTeam = game.homeTeam;\r\n\r\n                        return true;\r\n                    });\r\n\r\n                    console.log(`After validation: ${picks.length} valid picks remaining`);\r\n                } catch (e) {\r\n                    console.warn('AutoGameFetcher validation failed:', e);\r\n                    // Continue with picks even if validation fails\r\n                }\r\n            }\r\n\r\n            if (picks.length > 0) {\r\n                // Save to database via API\r\n                const response = await fetch(`${API_BASE_URL}/save-picks`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        picks: picks,\r\n                        source: 'upload',\r\n                        sportsbook: sportsbookKey,\r\n                        sportsbookLabel: sportsbookLabel\r\n                    })\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    const errorText = await response.text();\r\n                    throw new Error(`Failed to save picks: ${response.statusText} - ${errorText}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n                console.log('Picks saved to database:', result);\r\n            } else {\r\n                console.warn('No valid picks to save after processing');\r\n            }\r\n\r\n            return picks;\r\n        } catch (error) {\r\n            console.error('Error processing picks:', error);\r\n            throw error; // Re-throw to let caller handle\r\n        }\r\n    }\r\n\r\n    // Parse HTML picks (from sportsbook)\r\n    function parseHTMLPicks(html) {\r\n        const picks = [];\r\n        // Basic parsing - can be enhanced based on specific sportsbook format\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(html, 'text/html');\r\n\r\n        // Look for common bet slip elements\r\n        const betElements = doc.querySelectorAll('[class*=\"bet\"], [class*=\"pick\"], [class*=\"wager\"]');\r\n\r\n        betElements.forEach(element => {\r\n            try {\r\n                const text = element.textContent;\r\n                const pick = parsePickFromText(text);\r\n                if (pick) picks.push(pick);\r\n            } catch (e) {\r\n                console.warn('Failed to parse bet element:', e);\r\n            }\r\n        });\r\n\r\n        return picks;\r\n    }\r\n\r\n    // Parse text picks\r\n    function parseTextPicks(text) {\r\n        const picks = [];\r\n        const lines = text.split('\\n');\r\n\r\n        lines.forEach(line => {\r\n            const pick = parsePickFromText(line);\r\n            if (pick) picks.push(pick);\r\n        });\r\n\r\n        return picks;\r\n    }\r\n\r\n    // Parse individual pick from text\r\n    function parsePickFromText(text) {\r\n        // Regex patterns for common pick formats\r\n        // Examples: \"Raiders -2.5 (-110)\", \"Lakers/Suns O 215.5\", \"Cowboys ML +150\"\r\n\r\n        const spreadPattern = /([A-Za-z\\s]+)\\s+([-+]?\\d+\\.?\\d*)\\s+\\(([-+]\\d+)\\)/;\r\n        const totalPattern = /([A-Za-z\\s]+)\\s+(O|U|Over|Under)\\s+(\\d+\\.?\\d*)/i;\r\n        const mlPattern = /([A-Za-z\\s]+)\\s+ML\\s+([-+]\\d+)/i;\r\n\r\n        let match;\r\n        let pick = null;\r\n\r\n        if (match = text.match(spreadPattern)) {\r\n            pick = {\r\n                pickType: 'spread',\r\n                pickTeam: match[1].trim(),\r\n                line: match[2],\r\n                odds: match[3]\r\n            };\r\n        } else if (match = text.match(totalPattern)) {\r\n            pick = {\r\n                pickType: 'total',\r\n                pickTeam: match[2].toUpperCase() === 'O' || match[2].toLowerCase() === 'over' ? 'Over' : 'Under',\r\n                line: match[3]\r\n            };\r\n        } else if (match = text.match(mlPattern)) {\r\n            pick = {\r\n                pickType: 'moneyline',\r\n                pickTeam: match[1].trim(),\r\n                odds: match[2]\r\n            };\r\n        }\r\n\r\n        // Extract teams from text if possible\r\n        if (pick) {\r\n            const vsPattern = /([A-Za-z\\s]+)\\s+(vs?|@|at)\\s+([A-Za-z\\s]+)/i;\r\n            const teamMatch = text.match(vsPattern);\r\n            if (teamMatch) {\r\n                pick.awayTeam = teamMatch[1].trim();\r\n                pick.homeTeam = teamMatch[3].trim();\r\n            }\r\n\r\n            // Add default values\r\n            pick.sport = 'nfl'; // Default, can be enhanced\r\n            pick.gameDate = new Date().toISOString().split('T')[0];\r\n            pick.status = 'pending';\r\n        }\r\n\r\n        return pick;\r\n    }\r\n\r\n    // Make functions available globally for testing\r\n    window.processAndSavePicks = processAndSavePicks;\r\n    window.parseTextPicks = parseTextPicks;\r\n});\r\n\n\n/* === assets/js/modules/picks-table-renderer.js === */\n/**\r\n * Picks Table Renderer Module\r\n * Handles all table rendering, DOM updates, and visual presentation\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const TableRenderer = {\r\n        /**\r\n         * Get parent rows only (excluding parlay-legs rows)\r\n         */\r\n        getParentRowsOnly(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(row =>\r\n                row && row.tagName === 'TR' && !row.classList.contains('parlay-legs')\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get all direct child rows from tbody\r\n         */\r\n        getDirectChildRows(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(node => node && node.tagName === 'TR');\r\n        },\r\n\r\n        /**\r\n         * Check if row is visible for zebra striping\r\n         */\r\n        isRowVisibleForZebra(row) {\r\n            if (!row) return false;\r\n            if (row.style.display === 'none') return false;\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Apply zebra stripes to table\r\n         */\r\n        applyZebraStripes() {\r\n            if (window.ZebraStripes && typeof window.ZebraStripes.applyPicksTableZebraStripes === 'function') {\r\n                window.ZebraStripes.applyPicksTableZebraStripes();\r\n                return;\r\n            }\r\n\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            const visibleRows = this.getParentRowsOnly(tbody)\r\n                .filter(row => this.isRowVisibleForZebra(row));\r\n\r\n            visibleRows.forEach((row, index) => {\r\n                const className = index % 2 === 0 ? 'zebra-even' : 'zebra-odd';\r\n                const otherClass = index % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n\r\n                row.classList.remove(otherClass);\r\n                row.classList.add(className);\r\n                row.classList.add('zebra-row');\r\n\r\n                // Apply same class to associated parlay-legs row\r\n                if (window.PicksParlayManager) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        legsRow.classList.remove(otherClass);\r\n                        legsRow.classList.add(className);\r\n                        legsRow.classList.add('zebra-row');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update table with current filters and sorting\r\n         */\r\n        updateTable() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            let parentRows = this.getParentRowsOnly(tbody);\r\n\r\n            // Apply sorting if active\r\n            const sortState = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            if (sortState.column) {\r\n                parentRows = window.PicksSortManager ?\r\n                    window.PicksSortManager.applySorting(parentRows) :\r\n                    parentRows;\r\n\r\n                // Re-append in sorted order, keeping parlay-legs with parents\r\n                parentRows.forEach(row => {\r\n                    tbody.appendChild(row);\r\n\r\n                    // Delegate parlay leg row management to ParlayManager\r\n                    if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                        window.PicksParlayManager.ensureLegRowPosition(row);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Apply filters to rows\r\n            this.applyFiltersToRows(parentRows);\r\n\r\n            // Ensure parlay visibility is synced with state\r\n            if (window.PicksParlayManager) {\r\n                window.PicksParlayManager.refreshAllParlayVisibility();\r\n            }\r\n\r\n            // Apply zebra stripes\r\n            this.applyZebraStripes();\r\n\r\n            // Render filter chips\r\n            this.renderFilterChips();\r\n        },\r\n\r\n        /**\r\n         * Apply filters to table rows\r\n         */\r\n        applyFiltersToRows(rows) {\r\n            if (!rows) {\r\n                const tbody = document.getElementById('picks-tbody');\r\n                rows = this.getParentRowsOnly(tbody);\r\n            }\r\n\r\n            rows.forEach(row => {\r\n                // Prioritize DashboardFilterPills for dashboard page filters\r\n                // Falls back to PicksFilterManager for other pages\r\n                const shouldShow = window.DashboardFilterPills?.passesAllFilters ?\r\n                    window.DashboardFilterPills.passesAllFilters(row) :\r\n                    (window.PicksFilterManager ?\r\n                        window.PicksFilterManager.passesAllFilters(row) :\r\n                        true);\r\n\r\n                row.style.display = shouldShow ? '' : 'none';\r\n\r\n                // Manage parlay-legs visibility via ParlayManager\r\n                if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        if (!shouldShow) {\r\n                            legsRow.style.display = 'none';\r\n                        } else {\r\n                            // Only show if parent is expanded\r\n                            const parlayId = row.getAttribute('data-row-id');\r\n                            const isExpanded = window.PicksStateManager ?\r\n                                window.PicksStateManager.isParlayExpanded(parlayId) :\r\n                                row.getAttribute('aria-expanded') === 'true';\r\n\r\n                            legsRow.style.display = isExpanded ? 'table-row' : 'none';\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render filter chips showing active filters\r\n         */\r\n        renderFilterChips() {\r\n            const container = document.querySelector('.filter-chips') ||\r\n                            document.getElementById('filter-chips-container');\r\n            if (!container) return;\r\n\r\n            container.innerHTML = '';\r\n\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getState() :\r\n                window.tableState;\r\n\r\n            const filters = state.filters;\r\n            const chips = [];\r\n\r\n            // Date filters\r\n            if (filters.date.selectedDates && filters.date.selectedDates.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'dates',\r\n                    label: `Dates: ${filters.date.selectedDates.length} selected`,\r\n                    value: filters.date.selectedDates\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedTimes && filters.date.selectedTimes.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'times',\r\n                    label: `Times: ${filters.date.selectedTimes.length} selected`,\r\n                    value: filters.date.selectedTimes\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedBooks && filters.date.selectedBooks.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'books',\r\n                    label: `Books: ${filters.date.selectedBooks.length} selected`,\r\n                    value: filters.date.selectedBooks\r\n                });\r\n            }\r\n\r\n            // Matchup filters\r\n            if (filters.matchup.league || filters.matchup.selectedTeams) {\r\n                const label = filters.matchup.selectedTeams ?\r\n                    `Teams: ${filters.matchup.selectedTeams.length} selected` :\r\n                    `League: ${filters.matchup.league}`;\r\n                chips.push({\r\n                    type: 'matchup',\r\n                    label: label,\r\n                    value: filters.matchup\r\n                });\r\n            }\r\n\r\n            // Pick filters\r\n            if (filters.pick.betType || filters.pick.subtype) {\r\n                const parts = [];\r\n                if (filters.pick.betType) parts.push(filters.pick.betType);\r\n                if (filters.pick.subtype) parts.push(filters.pick.subtype);\r\n                chips.push({\r\n                    type: 'pick',\r\n                    label: `Pick: ${parts.join(' - ')}`,\r\n                    value: filters.pick\r\n                });\r\n            }\r\n\r\n            if (filters.pick.segment) {\r\n                chips.push({\r\n                    type: 'segment',\r\n                    label: `Segment: ${filters.pick.segment}`,\r\n                    value: filters.pick.segment\r\n                });\r\n            }\r\n\r\n            // Risk filters\r\n            if (filters.risk.selectedRiskRanges && filters.risk.selectedRiskRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'risk',\r\n                    label: `Risk: ${filters.risk.selectedRiskRanges.length} ranges`,\r\n                    value: filters.risk.selectedRiskRanges\r\n                });\r\n            }\r\n\r\n            if (filters.risk.selectedWinRanges && filters.risk.selectedWinRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'win',\r\n                    label: `Win: ${filters.risk.selectedWinRanges.length} ranges`,\r\n                    value: filters.risk.selectedWinRanges\r\n                });\r\n            }\r\n\r\n            // Status filters\r\n            if (filters.status && filters.status.length > 0) {\r\n                chips.push({\r\n                    type: 'status',\r\n                    label: `Status: ${filters.status.join(', ')}`,\r\n                    value: filters.status\r\n                });\r\n            }\r\n\r\n            // Render chips\r\n            chips.forEach(chip => {\r\n                const chipEl = document.createElement('div');\r\n                chipEl.className = 'filter-chip';\r\n                chipEl.setAttribute('data-filter-type', chip.type);\r\n                if (chip.subtype) {\r\n                    chipEl.setAttribute('data-filter-subtype', chip.subtype);\r\n                }\r\n\r\n                const labelSpan = document.createElement('span');\r\n                labelSpan.className = 'filter-chip-label';\r\n                labelSpan.textContent = chip.label;\r\n\r\n                const removeBtn = document.createElement('button');\r\n                removeBtn.className = 'filter-chip-remove';\r\n                removeBtn.innerHTML = '&times;';\r\n                removeBtn.setAttribute('aria-label', `Remove ${chip.label} filter`);\r\n                removeBtn.onclick = () => this.removeFilterChip(chip.type, chip.subtype);\r\n\r\n                chipEl.appendChild(labelSpan);\r\n                chipEl.appendChild(removeBtn);\r\n                container.appendChild(chipEl);\r\n            });\r\n\r\n            // Add clear all button if there are chips\r\n            if (chips.length > 0) {\r\n                const clearAllBtn = document.createElement('button');\r\n                clearAllBtn.className = 'clear-all-filters';\r\n                clearAllBtn.textContent = 'Clear All';\r\n                clearAllBtn.onclick = () => this.clearAllFilters();\r\n                container.appendChild(clearAllBtn);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove a filter chip\r\n         */\r\n        removeFilterChip(type, subtype) {\r\n            if (window.PicksFilterManager) {\r\n                window.PicksFilterManager.clearFilterByChip(type, subtype);\r\n            } else {\r\n                console.warn('PicksFilterManager not loaded');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear all filters\r\n         */\r\n        clearAllFilters() {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetAllFilters();\r\n            }\r\n            this.updateTable();\r\n        },\r\n\r\n        /**\r\n         * Update filter indicators in header\r\n         */\r\n        updateFilterIndicators() {\r\n            const indicators = {\r\n                'date-filter-btn': window.tableState.filters.date.selectedDates ||\r\n                                   window.tableState.filters.date.selectedTimes ||\r\n                                   window.tableState.filters.date.selectedBooks,\r\n                'matchup-filter-btn': window.tableState.filters.matchup.league ||\r\n                                     window.tableState.filters.matchup.selectedTeams,\r\n                'pick-filter-btn': window.tableState.filters.pick.betType ||\r\n                                  window.tableState.filters.pick.subtype,\r\n                'risk-filter-btn': window.tableState.filters.risk.selectedRiskRanges?.length > 0 ||\r\n                                  window.tableState.filters.risk.selectedWinRanges?.length > 0,\r\n                'status-filter-btn': window.tableState.filters.status?.length > 0\r\n            };\r\n\r\n            Object.entries(indicators).forEach(([btnId, hasFilter]) => {\r\n                const btn = document.getElementById(btnId);\r\n                if (!btn) return;\r\n\r\n                const indicator = btn.querySelector('.filter-indicator') ||\r\n                                btn.querySelector('.indicator');\r\n\r\n                if (hasFilter) {\r\n                    btn.classList.add('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'inline-block';\r\n                    }\r\n                } else {\r\n                    btn.classList.remove('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'none';\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Update filter count\r\n            const filterCount = window.PicksStateManager ?\r\n                window.PicksStateManager.getActiveFilterCount() : 0;\r\n\r\n            const countEl = document.getElementById('active-filter-count');\r\n            if (countEl) {\r\n                countEl.textContent = filterCount > 0 ? `(${filterCount})` : '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Announce filter changes for accessibility\r\n         */\r\n        announceFilterChange(message) {\r\n            let announcer = document.getElementById('filter-announcer');\r\n            if (!announcer) {\r\n                announcer = document.createElement('div');\r\n                announcer.id = 'filter-announcer';\r\n                announcer.setAttribute('role', 'status');\r\n                announcer.setAttribute('aria-live', 'polite');\r\n                announcer.setAttribute('aria-atomic', 'true');\r\n                announcer.style.position = 'absolute';\r\n                announcer.style.left = '-10000px';\r\n                announcer.style.width = '1px';\r\n                announcer.style.height = '1px';\r\n                announcer.style.overflow = 'hidden';\r\n                document.body.appendChild(announcer);\r\n            }\r\n            announcer.textContent = message;\r\n        },\r\n\r\n        /**\r\n         * Refresh the table display\r\n         */\r\n        refresh() {\r\n            this.updateTable();\r\n            this.updateFilterIndicators();\r\n        }\r\n    };\r\n\r\n    // Create debounced version of applyZebraStripes for performance\r\n    let zebraDebounceTimer;\r\n    TableRenderer.debouncedZebraStripes = function() {\r\n        clearTimeout(zebraDebounceTimer);\r\n        zebraDebounceTimer = setTimeout(() => {\r\n            TableRenderer.applyZebraStripes();\r\n        }, 50);\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksTableRenderer = TableRenderer;\r\n\r\n})();\n\n/* === assets/js/modules/picks-sort-manager.js === */\n/**\r\n * Picks Sort Manager Module\r\n * Handles table sorting logic for all columns\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const SortManager = {\r\n        /**\r\n         * Get 1-based column index - delegates to shared PicksDOMUtils\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            if (window.PicksDOMUtils?.getColumnIndex) {\r\n                return window.PicksDOMUtils.getColumnIndex(row, columnKey);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Get a table cell - delegates to shared PicksDOMUtils\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            if (window.PicksDOMUtils?.getCell) {\r\n                return window.PicksDOMUtils.getCell(row, columnKey, fallbackIndex);\r\n            }\r\n            const idx = fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        /**\r\n         * Get date sort value from date text\r\n         * Handles cross-year dates (e.g., Dec 31 vs Jan 1)\r\n         */\r\n        getDateSortValue(dateText) {\r\n            if (!dateText) return 0;\r\n\r\n            // Remove weekday prefix if present\r\n            const cleanDate = dateText.replace(/^(mon|tue|wed|thu|fri|sat|sun)\\s+/i, '');\r\n\r\n            // Parse date string (MM/DD format)\r\n            const parts = cleanDate.split('/');\r\n            if (parts.length === 2) {\r\n                const month = parseInt(parts[0], 10) || 0;\r\n                const day = parseInt(parts[1], 10) || 0;\r\n                const now = new Date();\r\n                const currentMonth = now.getMonth() + 1; // 1-based\r\n                const currentYear = now.getFullYear();\r\n\r\n                // Handle year rollover: if we're in Dec (12) and date is Jan (1),\r\n                // assume it's next year. If we're in Jan and date is Dec, assume last year.\r\n                let year = currentYear;\r\n                if (currentMonth >= 11 && month <= 2) {\r\n                    // Late in year, early month dates are next year\r\n                    year = currentYear + 1;\r\n                } else if (currentMonth <= 2 && month >= 11) {\r\n                    // Early in year, late month dates are last year\r\n                    year = currentYear - 1;\r\n                }\r\n\r\n                return new Date(year, month - 1, day).getTime();\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Get time sort value from time text\r\n         */\r\n        getTimeSortValue(timeText) {\r\n            if (!timeText) return 0;\r\n\r\n            // Extract time and convert to 24hr format for sorting\r\n            const match = timeText.match(/(\\d{1,2}):(\\d{2})\\s*(am|pm)?/i);\r\n            if (match) {\r\n                let hours = parseInt(match[1], 10);\r\n                const minutes = parseInt(match[2], 10);\r\n                const period = match[3] ? match[3].toLowerCase() : '';\r\n\r\n                if (period === 'pm' && hours !== 12) {\r\n                    hours += 12;\r\n                } else if (period === 'am' && hours === 12) {\r\n                    hours = 0;\r\n                }\r\n\r\n                return hours * 60 + minutes;\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Get sort value for a specific column\r\n         */\r\n        getSortValue(row, column) {\r\n            switch(column) {\r\n                case 'date': {\r\n                    const dateCell = row.querySelector('td:first-child');\r\n                    if (!dateCell) return 0;\r\n\r\n                    const dateEl = dateCell.querySelector('.cell-date');\r\n                    const timeEl = dateCell.querySelector('.cell-time');\r\n\r\n                    const dateValue = this.getDateSortValue(dateEl ? dateEl.textContent : '');\r\n                    const timeValue = this.getTimeSortValue(timeEl ? timeEl.textContent : '');\r\n\r\n                    // Combine date and time for full sorting\r\n                    return dateValue + timeValue / (24 * 60);\r\n                }\r\n\r\n                case 'league': {\r\n                    const cell = this.getCell(row, 'league');\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'matchup': {\r\n                    const cell = this.getCell(row, 'matchup', 2);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'pick': {\r\n                    const cell = this.getCell(row, 'pick', 3);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'segment': {\r\n                    const cell = this.getCell(row, 'segment', 4);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'risk': {\r\n                    const cell = this.getCell(row, 'risk', 5);\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.risk-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'win': {\r\n                    const cell = this.getCell(row, 'risk', 5);\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.win-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'status': {\r\n                    const cell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n                    if (!cell) return 0;\r\n\r\n                    const badge = cell.querySelector('.status-badge');\r\n                    if (badge) {\r\n                        const status = badge.getAttribute('data-status') ||\r\n                                      badge.className.match(/status-(\\w+)/)?.[1] ||\r\n                                      badge.textContent.trim();\r\n                        return this.getStatusSortPriority(status);\r\n                    }\r\n\r\n                    return this.getStatusSortPriority(cell.textContent.trim().toLowerCase());\r\n                }\r\n\r\n                case 'profit': {\r\n                    const cell = row.querySelector('td:last-child');\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.profit-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'score': {\r\n                    const dataEpoch = row.getAttribute('data-epoch');\r\n                    return dataEpoch ? parseInt(dataEpoch, 10) : 0;\r\n                }\r\n\r\n                default:\r\n                    return '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get status sort priority (for consistent ordering)\r\n         */\r\n        getStatusSortPriority(status) {\r\n            const priorities = {\r\n                'live': 1,\r\n                'in-progress': 1,\r\n                'active': 1,\r\n                'pending': 2,\r\n                'open': 2,\r\n                'win': 3,\r\n                'won': 3,\r\n                'loss': 4,\r\n                'lost': 4,\r\n                'push': 5,\r\n                'tie': 5,\r\n                'void': 6,\r\n                'voided': 6,\r\n                'cancelled': 6\r\n            };\r\n\r\n            const normalized = status.toString().toLowerCase();\r\n            return priorities[normalized] || 99;\r\n        },\r\n\r\n        /**\r\n         * Apply sorting to table rows\r\n         */\r\n        applySorting(rows) {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            if (!state.column) {\r\n                return rows;\r\n            }\r\n\r\n            const sorted = [...rows].sort((a, b) => {\r\n                const aValue = this.getSortValue(a, state.column);\r\n                const bValue = this.getSortValue(b, state.column);\r\n\r\n                // Handle numeric vs string comparison\r\n                if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n                    return state.direction === 'asc' ?\r\n                        aValue - bValue :\r\n                        bValue - aValue;\r\n                }\r\n\r\n                // String comparison\r\n                const aStr = aValue.toString();\r\n                const bStr = bValue.toString();\r\n\r\n                if (state.direction === 'asc') {\r\n                    return aStr.localeCompare(bStr);\r\n                } else {\r\n                    return bStr.localeCompare(aStr);\r\n                }\r\n            });\r\n\r\n            return sorted;\r\n        },\r\n\r\n        /**\r\n         * Handle header click for sorting\r\n         */\r\n        handleHeaderClick(column) {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            // Toggle direction if same column, otherwise default to asc\r\n            if (state.column === column) {\r\n                const newDirection = state.direction === 'asc' ? 'desc' : 'asc';\r\n                this.updateSort(column, newDirection);\r\n            } else {\r\n                this.updateSort(column, 'asc');\r\n            }\r\n\r\n            // Update table display\r\n            if (window.PicksTableRenderer) {\r\n                window.PicksTableRenderer.updateTable();\r\n            }\r\n\r\n            // Update header indicators\r\n            this.updateSortIndicators();\r\n        },\r\n\r\n        /**\r\n         * Update sort state\r\n         */\r\n        updateSort(column, direction) {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.updateSort(column, direction);\r\n            } else {\r\n                window.tableState.sort = { column, direction };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset sorting\r\n         */\r\n        resetSorting() {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetSort();\r\n            } else {\r\n                window.tableState.sort = { column: null, direction: 'asc' };\r\n            }\r\n\r\n            this.updateSortIndicators();\r\n\r\n            if (window.PicksTableRenderer) {\r\n                window.PicksTableRenderer.updateTable();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update sort indicators in headers\r\n         * NOTE: Sort indicators removed - filter icons are sufficient\r\n         */\r\n        /**\r\n         * Sort icon glyphs - standardized across all pages\r\n         * \u25B2 = unsorted/ascending (up triangle)\r\n         * \u25BC = descending (down triangle)\r\n         */\r\n        SORT_ICONS: {\r\n            unsorted: '\u25B2',\r\n            asc: '\u25B2',\r\n            desc: '\u25BC'\r\n        },\r\n\r\n        updateSortIndicators() {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState?.sort;\r\n\r\n            const headers = document.querySelectorAll('th[data-sort]');\r\n\r\n            headers.forEach(th => {\r\n                // Remove both naming conventions for compatibility\r\n                th.classList.remove('sorted-asc', 'sorted-desc', 'sort-asc', 'sort-desc');\r\n                th.setAttribute('aria-sort', 'none');\r\n\r\n                const icon = th.querySelector('.sort-icon');\r\n                if (icon) {\r\n                    icon.textContent = this.SORT_ICONS.unsorted;\r\n                }\r\n            });\r\n\r\n            if (!state?.column) return;\r\n\r\n            const activeHeader = document.querySelector(`th[data-sort=\"${state.column}\"]`);\r\n            if (!activeHeader) return;\r\n\r\n            const isDesc = state.direction === 'desc';\r\n            // Use standardized class names\r\n            activeHeader.classList.add(isDesc ? 'sorted-desc' : 'sorted-asc');\r\n            activeHeader.setAttribute('aria-sort', isDesc ? 'descending' : 'ascending');\r\n\r\n            const activeIcon = activeHeader.querySelector('.sort-icon');\r\n            if (activeIcon) {\r\n                activeIcon.textContent = isDesc ? this.SORT_ICONS.desc : this.SORT_ICONS.asc;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize sort functionality\r\n         */\r\n        initSorting() {\r\n            // Select all sort buttons\r\n            const sortButtons = document.querySelectorAll('.th-sort-btn');\r\n            \r\n            sortButtons.forEach(btn => {\r\n                btn.addEventListener('click', (e) => {\r\n                    // Stop propagation to prevent bubbling issues\r\n                    e.stopPropagation();\r\n                    \r\n                    const th = btn.closest('th');\r\n                    if (!th) return;\r\n                    \r\n                    const column = th.getAttribute('data-sort');\r\n                    if (column) {\r\n                        this.handleHeaderClick(column);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Initialize indicators\r\n            this.updateSortIndicators();\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksSortManager = SortManager;\r\n\r\n})();\n\n/* === assets/js/modules/picks-state-manager.js === */\n/**\r\n * Picks State Manager Module\r\n * Centralized state management for the active picks table\r\n * Handles filter state, sort state, and state persistence\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    // Initialize the global state object if not already present\r\n    if (typeof window.tableState === 'undefined') {\r\n        window.tableState = {\r\n            filters: {\r\n                date: {\r\n                    start: null,\r\n                    end: null,\r\n                    selectedDates: null,\r\n                    selectedTimes: null,\r\n                    selectedBooks: null\r\n                },\r\n                matchup: {\r\n                    league: '',\r\n                    selectedLeagues: null,\r\n                    selectedTeams: null,\r\n                    ticketType: 'all'\r\n                },\r\n                pick: {\r\n                    betType: '',\r\n                    subtype: '',\r\n                    segment: '',\r\n                    selectedSegments: null\r\n                },\r\n                risk: {\r\n                    min: null,\r\n                    max: null,\r\n                    selectedRiskRanges: [],\r\n                    selectedWinRanges: []\r\n                },\r\n                status: []\r\n            },\r\n            sort: {\r\n                column: null,\r\n                direction: 'asc'\r\n            },\r\n            expandedParlayIds: []\r\n        };\r\n    }\r\n\r\n    // State shape validators\r\n    const StateShapeValidators = {\r\n        /**\r\n         * Creates a new date filter state object with all filter properties\r\n         */\r\n        createDateFilterState() {\r\n            return {\r\n                start: null,\r\n                end: null,\r\n                selectedDates: null,\r\n                selectedTimes: null,\r\n                selectedBooks: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new matchup filter state object\r\n         */\r\n        createMatchupFilterState() {\r\n            return {\r\n                league: '',\r\n                selectedLeagues: null,\r\n                selectedTeams: null,\r\n                ticketType: 'all'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new risk filter state object\r\n         */\r\n        createRiskFilterState() {\r\n            return {\r\n                min: null,\r\n                max: null,\r\n                selectedRiskRanges: [],\r\n                selectedWinRanges: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new pick filter state object\r\n         */\r\n        createPickFilterState() {\r\n            return {\r\n                betType: '',\r\n                subtype: '',\r\n                segment: '',\r\n                selectedSegments: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Ensures date filter state has the correct shape\r\n         */\r\n        ensureDateFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.date || typeof state.filters.date !== 'object') {\r\n                state.filters.date = this.createDateFilterState();\r\n                return;\r\n            }\r\n            const dateFilter = state.filters.date;\r\n            if (!('start' in dateFilter)) dateFilter.start = null;\r\n            if (!('end' in dateFilter)) dateFilter.end = null;\r\n            if (!('selectedDates' in dateFilter)) dateFilter.selectedDates = null;\r\n            if (!('selectedTimes' in dateFilter)) dateFilter.selectedTimes = null;\r\n            if (!('selectedBooks' in dateFilter)) dateFilter.selectedBooks = null;\r\n        },\r\n\r\n        /**\r\n         * Ensures matchup filter state has the correct shape\r\n         */\r\n        ensureMatchupFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.matchup || typeof state.filters.matchup !== 'object') {\r\n                state.filters.matchup = this.createMatchupFilterState();\r\n                return;\r\n            }\r\n            const matchupFilter = state.filters.matchup;\r\n            if (!('ticketType' in matchupFilter)) matchupFilter.ticketType = 'all';\r\n            if (!('selectedTeams' in matchupFilter)) matchupFilter.selectedTeams = null;\r\n            if (!('league' in matchupFilter)) matchupFilter.league = '';\r\n        },\r\n\r\n        /**\r\n         * Ensures risk filter state has the correct shape\r\n         */\r\n        ensureRiskFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.risk || typeof state.filters.risk !== 'object') {\r\n                state.filters.risk = this.createRiskFilterState();\r\n                return;\r\n            }\r\n            const riskFilter = state.filters.risk;\r\n            if (!('min' in riskFilter)) riskFilter.min = null;\r\n            if (!('max' in riskFilter)) riskFilter.max = null;\r\n            if (!Array.isArray(riskFilter.selectedRiskRanges)) riskFilter.selectedRiskRanges = [];\r\n            if (!Array.isArray(riskFilter.selectedWinRanges)) riskFilter.selectedWinRanges = [];\r\n        },\r\n\r\n        /**\r\n         * Ensures pick filter state has the correct shape\r\n         */\r\n        ensurePickFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.pick) {\r\n                state.filters.pick = this.createPickFilterState();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Ensures all filter states have correct shapes\r\n         */\r\n        ensureAllFilterShapes() {\r\n            this.ensureDateFilterShape();\r\n            this.ensureMatchupFilterShape();\r\n            this.ensureRiskFilterShape();\r\n            this.ensurePickFilterShape();\r\n        }\r\n    };\r\n\r\n    // State management functions\r\n    const StateManager = {\r\n        /**\r\n         * Get the current table state\r\n         */\r\n        getState() {\r\n            return window.tableState;\r\n        },\r\n\r\n        /**\r\n         * Get a specific filter state\r\n         */\r\n        getFilter(filterType) {\r\n            return window.tableState.filters[filterType];\r\n        },\r\n\r\n        /**\r\n         * Update a specific filter\r\n         */\r\n        updateFilter(filterType, updates) {\r\n            if (!window.tableState.filters[filterType]) {\r\n                console.warn(`Filter type ${filterType} does not exist`);\r\n                return;\r\n            }\r\n            Object.assign(window.tableState.filters[filterType], updates);\r\n        },\r\n\r\n        /**\r\n         * Reset a specific filter to its default state\r\n         */\r\n        resetFilter(filterType) {\r\n            switch(filterType) {\r\n                case 'date':\r\n                    window.tableState.filters.date = StateShapeValidators.createDateFilterState();\r\n                    break;\r\n                case 'matchup':\r\n                    window.tableState.filters.matchup = StateShapeValidators.createMatchupFilterState();\r\n                    break;\r\n                case 'pick':\r\n                    window.tableState.filters.pick = StateShapeValidators.createPickFilterState();\r\n                    break;\r\n                case 'risk':\r\n                    window.tableState.filters.risk = StateShapeValidators.createRiskFilterState();\r\n                    break;\r\n                case 'status':\r\n                    window.tableState.filters.status = [];\r\n                    break;\r\n                case 'league':\r\n                    // Reset league-specific filters only\r\n                    window.tableState.filters.matchup.league = '';\r\n                    window.tableState.filters.matchup.selectedLeagues = null;\r\n                    break;\r\n                case 'segment':\r\n                    // Reset segment-specific filters only\r\n                    window.tableState.filters.pick.segment = '';\r\n                    window.tableState.filters.pick.selectedSegments = null;\r\n                    break;\r\n                default:\r\n                    console.warn(`Unknown filter type: ${filterType}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset all filters\r\n         */\r\n        resetAllFilters() {\r\n            window.tableState.filters = {\r\n                date: StateShapeValidators.createDateFilterState(),\r\n                matchup: StateShapeValidators.createMatchupFilterState(),\r\n                pick: StateShapeValidators.createPickFilterState(),\r\n                risk: StateShapeValidators.createRiskFilterState(),\r\n                status: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get expanded parlay IDs\r\n         */\r\n        getExpandedParlayIds() {\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n            return window.tableState.expandedParlayIds;\r\n        },\r\n\r\n        /**\r\n         * Set parlay expansion state\r\n         */\r\n        setParlayExpanded(parlayId, isExpanded) {\r\n            if (!parlayId) return;\r\n\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n\r\n            const index = window.tableState.expandedParlayIds.indexOf(parlayId);\r\n\r\n            if (isExpanded && index === -1) {\r\n                window.tableState.expandedParlayIds.push(parlayId);\r\n            } else if (!isExpanded && index !== -1) {\r\n                window.tableState.expandedParlayIds.splice(index, 1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if parlay is expanded\r\n         */\r\n        isParlayExpanded(parlayId) {\r\n            if (!parlayId || !Array.isArray(window.tableState.expandedParlayIds)) {\r\n                return false;\r\n            }\r\n            return window.tableState.expandedParlayIds.includes(parlayId);\r\n        },\r\n\r\n        /**\r\n         * Toggle parlay expansion state\r\n         */\r\n        toggleParlayExpanded(parlayId) {\r\n            const isCurrentlyExpanded = this.isParlayExpanded(parlayId);\r\n            this.setParlayExpanded(parlayId, !isCurrentlyExpanded);\r\n            return !isCurrentlyExpanded;\r\n        },\r\n\r\n        /**\r\n         * Reset expansion state\r\n         */\r\n        resetExpansionState() {\r\n            window.tableState.expandedParlayIds = [];\r\n        },\r\n\r\n        /**\r\n         * Get sort state\r\n         */\r\n        getSortState() {\r\n            return window.tableState.sort;\r\n        },\r\n\r\n        /**\r\n         * Update sort state\r\n         */\r\n        updateSort(column, direction) {\r\n            window.tableState.sort = {\r\n                column: column,\r\n                direction: direction || 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Reset sort state\r\n         */\r\n        resetSort() {\r\n            window.tableState.sort = {\r\n                column: null,\r\n                direction: 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check if any filters are active\r\n         */\r\n        hasActiveFilters() {\r\n            const filters = window.tableState.filters;\r\n\r\n            // Check date filters\r\n            if (filters.date.selectedDates || filters.date.selectedTimes || filters.date.selectedBooks ||\r\n                filters.date.start || filters.date.end) {\r\n                return true;\r\n            }\r\n\r\n            // Check matchup/league filters\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues ||\r\n                filters.matchup.selectedTeams || filters.matchup.ticketType !== 'all') {\r\n                return true;\r\n            }\r\n\r\n            // Check pick/segment filters\r\n            if (filters.pick.betType || filters.pick.subtype || filters.pick.segment ||\r\n                filters.pick.selectedSegments) {\r\n                return true;\r\n            }\r\n\r\n            // Check risk filters\r\n            if (filters.risk.min !== null || filters.risk.max !== null ||\r\n                filters.risk.selectedRiskRanges.length > 0 ||\r\n                filters.risk.selectedWinRanges.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            // Check status filters\r\n            if (filters.status.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get active filter count\r\n         */\r\n        getActiveFilterCount() {\r\n            let count = 0;\r\n            const filters = window.tableState.filters;\r\n\r\n            if (filters.date.selectedDates) count++;\r\n            if (filters.date.selectedTimes) count++;\r\n            if (filters.date.selectedBooks) count++;\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues) count++;\r\n            if (filters.matchup.selectedTeams) count++;\r\n            if (filters.pick.betType || filters.pick.subtype) count++;\r\n            if (filters.pick.segment || filters.pick.selectedSegments) count++;\r\n            if (filters.risk.selectedRiskRanges.length > 0) count++;\r\n            if (filters.risk.selectedWinRanges.length > 0) count++;\r\n            if (filters.status.length > 0) count++;\r\n\r\n            return count;\r\n        },\r\n\r\n        /**\r\n         * Initialize state\r\n         */\r\n        init() {\r\n            StateShapeValidators.ensureAllFilterShapes();\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksStateManager = {\r\n        ...StateManager,\r\n        validators: StateShapeValidators,\r\n        // Expose the tableState directly for backward compatibility\r\n        state: window.tableState\r\n    };\r\n\r\n    // Initialize on load\r\n    StateManager.init();\r\n\r\n})();\n\n/* === dashboard/js/kpi-calculator.js === */\n/**\r\n * KPI Calculator\r\n * Calculates and updates KPI metrics from picks data\r\n */\r\n\r\nfunction parseScoreFromResult(resultString) {\r\n  /**\r\n   * Parse score from result string\r\n   * E.g., \"Raiders 7 - Broncos 10\" => { away: 7, home: 10 }\r\n   */\r\n  if (!resultString) return { away: null, home: null };\r\n\r\n  const scorePattern = /(\\d+)\\s*-\\s*(\\d+)/;\r\n  const match = resultString.match(scorePattern);\r\n\r\n  if (match) {\r\n    return {\r\n      away: parseInt(match[1]),\r\n      home: parseInt(match[2]),\r\n    };\r\n  }\r\n\r\n  return { away: null, home: null };\r\n}\r\n\r\nfunction normalizeStatus(status) {\r\n  const value = (status || \"\").toString().toLowerCase();\r\n  return value === \"lost\" ? \"loss\" : value;\r\n}\r\n\r\nfunction calculateKPIs(picks) {\r\n  /**\r\n   * Calculate all KPI metrics from picks array\r\n   */\r\n  // Defensive: ensure picks is an array\r\n  if (!picks || !Array.isArray(picks)) {\r\n    picks = [];\r\n  }\r\n\r\n  const kpis = {\r\n    activePicks: 0,\r\n    activeRisk: 0,\r\n    toWin: 0,\r\n    onTrackAmount: 0,\r\n    atRiskAmount: 0,\r\n    projected: 0,\r\n    netProfit: 0,\r\n    totalWon: 0,\r\n    totalLost: 0,\r\n    wins: 0,\r\n    losses: 0,\r\n    pushes: 0,\r\n    roePercentage: 0,\r\n    winPercentage: 0,\r\n    currentStreak: \"\",\r\n    totalRisk: 0,\r\n    topLeague: { name: \"N/A\", winRate: 0 },\r\n    topBetType: { name: \"N/A\", winRate: 0 },\r\n    topSegment: { name: \"N/A\", winRate: 0 },\r\n    topSportsbook: { name: \"N/A\", winRate: 0 },\r\n  };\r\n\r\n  // Track stats by category for \"top\" calculations\r\n  const leagueStats = {};\r\n  const betTypeStats = {};\r\n  const segmentStats = {};\r\n  const sportsbookStats = {};\r\n\r\n  picks.forEach((pick) => {\r\n    // Safely parse risk and win values - handle both string and number types\r\n    const riskStr =\r\n      pick.risk != null ? String(pick.risk).replace(/,/g, \"\") : \"0\";\r\n    const winStr = pick.win != null ? String(pick.win).replace(/,/g, \"\") : \"0\";\r\n    const risk = parseFloat(riskStr) || 0;\r\n    const win = parseFloat(winStr) || 0;\r\n    const status = normalizeStatus(pick.status);\r\n    const isLoss = status === \"loss\";\r\n\r\n    // Active picks (pending, live, on-track, at-risk)\r\n    if (\r\n      status === \"pending\" ||\r\n      status === \"live\" ||\r\n      status === \"on-track\" ||\r\n      status === \"at-risk\"\r\n    ) {\r\n      kpis.activePicks++;\r\n      kpis.toWin += win;\r\n      kpis.activeRisk += risk;\r\n\r\n      // Track on-track vs at-risk amounts\r\n      if (status === \"on-track\") {\r\n        kpis.onTrackAmount += win; // Potential payout for on-track picks\r\n      } else if (status === \"at-risk\") {\r\n        kpis.atRiskAmount += risk; // Risk amount for at-risk picks\r\n      } else if (status === \"pending\") {\r\n        // Pending picks are neither on-track nor at-risk yet\r\n        kpis.onTrackAmount += win * 0.5; // Assume 50% distribution for pending\r\n        kpis.atRiskAmount += risk * 0.5;\r\n      }\r\n    }\r\n\r\n    // Wins\r\n    if (status === \"win\") {\r\n      kpis.wins++;\r\n      kpis.totalWon += win;\r\n\r\n      // Track wins by category\r\n      trackWin(leagueStats, pick.league || \"Unknown\");\r\n      trackWin(betTypeStats, pick.pickType || \"Unknown\");\r\n      trackWin(segmentStats, pick.segment || \"Full Game\");\r\n      trackWin(sportsbookStats, pick.book || \"Unknown\");\r\n    }\r\n\r\n    // Losses\r\n    if (isLoss) {\r\n      kpis.losses++;\r\n      kpis.totalLost += risk;\r\n\r\n      // Track losses by category\r\n      trackLoss(leagueStats, pick.league || \"Unknown\");\r\n      trackLoss(betTypeStats, pick.pickType || \"Unknown\");\r\n      trackLoss(segmentStats, pick.segment || \"Full Game\");\r\n      trackLoss(sportsbookStats, pick.book || \"Unknown\");\r\n    }\r\n\r\n    // Pushes\r\n    if (status === \"push\") {\r\n      kpis.pushes++;\r\n    }\r\n\r\n    // Total risk\r\n    kpis.totalRisk += risk;\r\n  });\r\n\r\n  // Calculate projected gain if all active picks win\r\n  kpis.projected = kpis.toWin - kpis.activeRisk;\r\n\r\n  // Calculate net profit/loss\r\n  kpis.netProfit = kpis.totalWon - kpis.totalLost;\r\n\r\n  // Calculate percentages\r\n  const totalGames = kpis.wins + kpis.losses + kpis.pushes;\r\n  const totalDecided = kpis.wins + kpis.losses;\r\n  if (totalDecided > 0) {\r\n    kpis.winPercentage = ((kpis.wins / totalDecided) * 100).toFixed(1);\r\n  } else {\r\n    kpis.winPercentage = \"0.0\";\r\n  }\r\n\r\n  // Calculate ROE (Return on Equity)\r\n  if (kpis.totalRisk > 0) {\r\n    kpis.roePercentage = ((kpis.netProfit / kpis.totalRisk) * 100).toFixed(1);\r\n  } else {\r\n    kpis.roePercentage = \"0.0\";\r\n  }\r\n\r\n  // Calculate streak\r\n  kpis.currentStreak = calculateStreak(picks);\r\n\r\n  // Find top performers\r\n  kpis.topLeague = findTopPerformer(leagueStats);\r\n  kpis.topBetType = findTopPerformer(betTypeStats);\r\n  kpis.topSegment = findTopPerformer(segmentStats);\r\n  kpis.topSportsbook = findTopPerformer(sportsbookStats);\r\n\r\n  return kpis;\r\n}\r\n\r\nfunction trackWin(stats, key) {\r\n  if (!stats[key]) stats[key] = { wins: 0, losses: 0 };\r\n  stats[key].wins++;\r\n}\r\n\r\nfunction trackLoss(stats, key) {\r\n  if (!stats[key]) stats[key] = { wins: 0, losses: 0 };\r\n  stats[key].losses++;\r\n}\r\n\r\nfunction findTopPerformer(stats) {\r\n  let topName = \"N/A\";\r\n  let topWinRate = 0;\r\n\r\n  for (const [name, record] of Object.entries(stats)) {\r\n    const total = record.wins + record.losses;\r\n    if (total >= 3) {\r\n      // Minimum 3 picks to qualify\r\n      const winRate = (record.wins / total) * 100;\r\n      if (winRate > topWinRate) {\r\n        topWinRate = winRate;\r\n        topName = name;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { name: topName, winRate: topWinRate.toFixed(1) };\r\n}\r\n\r\nfunction calculateStreak(picks) {\r\n  /**\r\n   * Calculate current win/loss streak\r\n   */\r\n  const finishedPicks = picks\r\n    .filter((p) => {\r\n      const status = normalizeStatus(p.status);\r\n      return status === \"win\" || status === \"loss\";\r\n    })\r\n    .reverse(); // Most recent first\r\n\r\n  if (finishedPicks.length === 0) return \"W0\";\r\n\r\n  let streak = 1;\r\n  const lastStatus = normalizeStatus(finishedPicks[0].status);\r\n\r\n  for (let i = 1; i < finishedPicks.length; i++) {\r\n    if (normalizeStatus(finishedPicks[i].status) === lastStatus) {\r\n      streak++;\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return lastStatus === \"win\" ? `W${streak}` : `L${streak}`;\r\n}\r\n\r\nfunction updateKPITiles(kpis) {\r\n  /**\r\n   * Update the KPI tiles in the dashboard\r\n   * Uses dual-layer structure (.kpi-tile-layer) with flip functionality\r\n   */\r\n\r\n  // Tile 1 - Projected PnL (front) / Net Profit (back)\r\n  const tile1 = document.querySelector('[data-tile-id=\"1\"]');\r\n  if (tile1) {\r\n    const layers = tile1.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Projected PnL\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const projectedSign = kpis.projected >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${projectedSign}$${Math.abs(kpis.projected).toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (kpis.projected > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (kpis.projected < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `${kpis.activePicks} Active Picks`;\r\n      }\r\n    }\r\n\r\n    // Back layer - Net Profit\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const netSign = kpis.netProfit >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${netSign}$${Math.abs(kpis.netProfit).toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (kpis.netProfit > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (kpis.netProfit < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Season Total`;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Tile 2 - Win Rate (front) / ROI (back)\r\n  const tile2 = document.querySelector('[data-tile-id=\"2\"]');\r\n  if (tile2) {\r\n    const layers = tile2.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Win Rate\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `${kpis.winPercentage}%`;\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `${kpis.wins}-${kpis.losses}-${kpis.pushes} Record`;\r\n      }\r\n    }\r\n\r\n    // Back layer - ROI\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const roiSign = parseFloat(kpis.roePercentage) >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${roiSign}${kpis.roePercentage}%`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (parseFloat(kpis.roePercentage) > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (parseFloat(kpis.roePercentage) < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Return on Equity`;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Tile 3 - Active Volume (front) / To Win (back)\r\n  const tile3 = document.querySelector('[data-tile-id=\"3\"]');\r\n  if (tile3) {\r\n    const layers = tile3.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Active Risk\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `$${kpis.activeRisk.toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Total at Risk`;\r\n      }\r\n    }\r\n\r\n    // Back layer - To Win\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `$${kpis.toWin.toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n        valueEl.classList.add(\"positive\");\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Potential Payout`;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Export functions\r\nwindow.calculateKPIs = calculateKPIs;\r\nwindow.updateKPITiles = updateKPITiles;\r\nwindow.parseScoreFromResult = parseScoreFromResult;\r\n\r\n// CJS export for Node.js testing\r\nif (typeof module !== \"undefined\" && module.exports) {\r\n  module.exports = { calculateKPIs, parseScoreFromResult, normalizeStatus };\r\n}\r\n\n\n/* === dashboard/js/picks-service.js === */\n/**\r\n * Azure Picks Service - Enterprise-grade pick storage via Azure Cosmos DB\r\n * Replaces localStorage-based LocalPicksManager\r\n *\r\n * @module PicksService\r\n */\r\n\r\nconst PicksService = (function () {\r\n    'use strict';\r\n\r\n    // API Configuration\r\n    const apiBaseFromConfig =\r\n        window.GBSV_CONFIG?.FUNCTIONS_URL ||\r\n        window.APP_CONFIG?.FUNCTIONS_BASE_URL ||\r\n        (window.APP_CONFIG?.API_BASE_URL ? window.APP_CONFIG.API_BASE_URL.replace(/\\/api$/, '') : '') ||\r\n        window.APP_CONFIG?.API_BASE_FALLBACK ||\r\n        window.location.origin;\r\n    const API_BASE = apiBaseFromConfig;\r\n    const PICKS_ENDPOINT = `${API_BASE}/api/picks`;\r\n\r\n    // Cache for performance (optional local caching)\r\n    let picksCache = null;\r\n    let lastFetch = null;\r\n    const CACHE_TTL = 30000; // 30 seconds\r\n\r\n    /**\r\n     * Make authenticated API request\r\n     */\r\n    async function apiRequest(endpoint, options = {}) {\r\n        const url = endpoint.startsWith('http') ? endpoint : `${PICKS_ENDPOINT}${endpoint}`;\r\n\r\n        const config = {\r\n            method: options.method || 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...options.headers\r\n            },\r\n            ...options\r\n        };\r\n\r\n        if (options.body && typeof options.body === 'object') {\r\n            config.body = JSON.stringify(options.body);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(url, config);\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || `API error: ${response.status}`);\r\n            }\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.error('[PicksService] API request failed:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Invalidate cache\r\n     */\r\n    function invalidateCache() {\r\n        picksCache = null;\r\n        lastFetch = null;\r\n    }\r\n\r\n    /**\r\n     * Get all picks with optional filtering\r\n     * @param {Object} filters - Query filters (status, league, date, etc.)\r\n     * @returns {Promise<Array>} Array of pick objects\r\n     */\r\n    async function getAll(filters = {}) {\r\n        // Build query string\r\n        const params = new URLSearchParams();\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n            if (value !== undefined && value !== null && value !== '') {\r\n                params.append(key, value);\r\n            }\r\n        });\r\n\r\n        const query = params.toString() ? `?${params}` : '';\r\n\r\n        try {\r\n            const response = await apiRequest(query);\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get active picks (pending, live, on-track, at-risk)\r\n     * @returns {Promise<Array>} Array of active picks\r\n     */\r\n    async function getActive() {\r\n        try {\r\n            const response = await apiRequest('/active');\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get active picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get settled picks (won, lost, push)\r\n     * @returns {Promise<Array>} Array of settled picks\r\n     */\r\n    async function getSettled() {\r\n        try {\r\n            const response = await apiRequest('/settled');\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get settled picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get a single pick by ID\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<Object|null>} Pick object or null\r\n     */\r\n    async function getById(id) {\r\n        try {\r\n            const response = await apiRequest(`/${id}`);\r\n            return response.pick || null;\r\n        } catch (error) {\r\n            if (error.message.includes('404')) {\r\n                return null;\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get picks by league\r\n     * @param {string} league - League code (NBA, NFL, NCAAB, NCAAF)\r\n     * @returns {Promise<Array>} Array of picks for the league\r\n     */\r\n    async function getByLeague(league) {\r\n        return getAll({ league: league.toUpperCase() });\r\n    }\r\n\r\n    /**\r\n     * Get picks by date\r\n     * @param {string} date - Date in YYYY-MM-DD format\r\n     * @returns {Promise<Array>} Array of picks for the date\r\n     */\r\n    async function getByDate(date) {\r\n        return getAll({ date });\r\n    }\r\n\r\n    /**\r\n     * Get picks within a date range\r\n     * @param {string} fromDate - Start date (YYYY-MM-DD)\r\n     * @param {string} toDate - End date (YYYY-MM-DD)\r\n     * @returns {Promise<Array>} Array of picks in range\r\n     */\r\n    async function getByDateRange(fromDate, toDate) {\r\n        return getAll({ from: fromDate, to: toDate });\r\n    }\r\n\r\n    /**\r\n     * Get today's picks\r\n     * @returns {Promise<Array>} Array of today's picks\r\n     */\r\n    async function getToday() {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        return getByDate(today);\r\n    }\r\n\r\n    /**\r\n     * Create one or more picks\r\n     * @param {Object|Array} picks - Single pick or array of picks\r\n     * @returns {Promise<Object>} Creation result\r\n     */\r\n    async function create(picks) {\r\n        invalidateCache();\r\n\r\n        const body = Array.isArray(picks) ? picks : [picks];\r\n\r\n        try {\r\n            const response = await apiRequest('', {\r\n                method: 'POST',\r\n                body\r\n            });\r\n\r\n            // Dispatch event for UI updates\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'create', count: response.created || body.length }\r\n            }));\r\n\r\n            return response;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to create picks:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update a pick\r\n     * @param {string} id - Pick ID\r\n     * @param {Object} updates - Fields to update\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function update(id, updates) {\r\n        invalidateCache();\r\n\r\n        try {\r\n            const response = await apiRequest(`/${id}`, {\r\n                method: 'PATCH',\r\n                body: updates\r\n            });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'update', id }\r\n            }));\r\n\r\n            return response.pick;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to update pick:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update pick status (convenience method)\r\n     * @param {string} id - Pick ID\r\n     * @param {string} status - New status (pending, live, won, lost, push)\r\n     * @param {Object} additionalUpdates - Optional additional fields\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function updateStatus(id, status, additionalUpdates = {}) {\r\n        return update(id, { status, ...additionalUpdates });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as won\r\n     * @param {string} id - Pick ID\r\n     * @param {number} pnl - P&L amount\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markWon(id, pnl = 0) {\r\n        return update(id, { status: 'won', result: 'WIN', pnl });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as lost\r\n     * @param {string} id - Pick ID\r\n     * @param {number} pnl - P&L amount (negative)\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markLost(id, pnl = 0) {\r\n        return update(id, { status: 'lost', result: 'LOSS', pnl: -Math.abs(pnl) });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as push\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markPush(id) {\r\n        return update(id, { status: 'push', result: 'PUSH', pnl: 0 });\r\n    }\r\n\r\n    /**\r\n     * Delete a pick\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<boolean>} Success status\r\n     */\r\n    async function remove(id) {\r\n        invalidateCache();\r\n\r\n        try {\r\n            await apiRequest(`/${id}`, { method: 'DELETE' });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'delete', id }\r\n            }));\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to delete pick:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear all picks (requires confirmation)\r\n     * @param {boolean} confirm - Must be true to proceed\r\n     * @returns {Promise<Object>} Deletion result\r\n     */\r\n    async function clearAll(confirm = false) {\r\n        if (!confirm) {\r\n            throw new Error('Must pass confirm=true to clear all picks');\r\n        }\r\n\r\n        invalidateCache();\r\n\r\n        try {\r\n            const response = await apiRequest('/clear', {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'x-confirm-clear': 'true'\r\n                }\r\n            });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'clearAll', deleted: response.deleted }\r\n            }));\r\n\r\n            return response;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to clear picks:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculate summary statistics for picks\r\n     * @param {Array} picks - Array of picks to analyze (optional, fetches if not provided)\r\n     * @returns {Promise<Object>} Summary stats\r\n     */\r\n    async function getSummary(picks = null) {\r\n        if (!picks) {\r\n            picks = await getAll();\r\n        }\r\n\r\n        const summary = {\r\n            total: picks.length,\r\n            pending: 0,\r\n            live: 0,\r\n            won: 0,\r\n            lost: 0,\r\n            push: 0,\r\n            totalRisk: 0,\r\n            totalPnl: 0,\r\n            byLeague: {}\r\n        };\r\n\r\n        picks.forEach(pick => {\r\n            const status = (pick.status || 'pending').toLowerCase();\r\n            if (status === 'pending') summary.pending++;\r\n            else if (status === 'live' || status === 'on-track' || status === 'at-risk') summary.live++;\r\n            else if (status === 'won' || status === 'win') summary.won++;\r\n            else if (status === 'lost' || status === 'loss') summary.lost++;\r\n            else if (status === 'push') summary.push++;\r\n\r\n            summary.totalRisk += parseFloat(pick.risk) || 0;\r\n            summary.totalPnl += parseFloat(pick.pnl) || 0;\r\n\r\n            const league = pick.league || 'Unknown';\r\n            if (!summary.byLeague[league]) {\r\n                summary.byLeague[league] = { total: 0, won: 0, lost: 0, pnl: 0 };\r\n            }\r\n            summary.byLeague[league].total++;\r\n            if (status === 'won' || status === 'win') summary.byLeague[league].won++;\r\n            if (status === 'lost' || status === 'loss') summary.byLeague[league].lost++;\r\n            summary.byLeague[league].pnl += parseFloat(pick.pnl) || 0;\r\n        });\r\n\r\n        summary.winRate = summary.won + summary.lost > 0\r\n            ? (summary.won / (summary.won + summary.lost) * 100).toFixed(1) + '%'\r\n            : 'N/A';\r\n\r\n        return summary;\r\n    }\r\n\r\n    /**\r\n     * Migrate picks from localStorage to Azure (one-time operation)\r\n     * @returns {Promise<Object>} Migration result\r\n     */\r\n    async function migrateFromLocalStorage() {\r\n        const STORAGE_KEY = 'gbsv_picks';\r\n\r\n        try {\r\n            const localData = localStorage.getItem(STORAGE_KEY);\r\n            if (!localData) {\r\n                return { success: true, migrated: 0, message: 'No local picks to migrate' };\r\n            }\r\n\r\n            const localPicks = JSON.parse(localData);\r\n            if (!Array.isArray(localPicks) || localPicks.length === 0) {\r\n                return { success: true, migrated: 0, message: 'No local picks to migrate' };\r\n            }\r\n\r\n            console.log(`[PicksService] Migrating ${localPicks.length} picks from localStorage to Azure...`);\r\n\r\n            const result = await create(localPicks);\r\n\r\n            if (result.success) {\r\n                // Backup and clear localStorage\r\n                localStorage.setItem(`${STORAGE_KEY}_backup_${Date.now()}`, localData);\r\n                localStorage.removeItem(STORAGE_KEY);\r\n\r\n                console.log(`[PicksService] Migration complete: ${result.created} picks migrated`);\r\n                return {\r\n                    success: true,\r\n                    migrated: result.created,\r\n                    errors: result.errors,\r\n                    message: `Successfully migrated ${result.created} picks to Azure`\r\n                };\r\n            }\r\n\r\n            return { success: false, migrated: 0, error: 'Migration failed' };\r\n        } catch (error) {\r\n            console.error('[PicksService] Migration failed:', error);\r\n            return { success: false, migrated: 0, error: error.message };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if there are picks in localStorage that need migration\r\n     * @returns {Object} Migration status\r\n     */\r\n    function checkMigrationNeeded() {\r\n        const STORAGE_KEY = 'gbsv_picks';\r\n        try {\r\n            const localData = localStorage.getItem(STORAGE_KEY);\r\n            if (!localData) return { needed: false, count: 0 };\r\n\r\n            const localPicks = JSON.parse(localData);\r\n            return {\r\n                needed: Array.isArray(localPicks) && localPicks.length > 0,\r\n                count: Array.isArray(localPicks) ? localPicks.length : 0\r\n            };\r\n        } catch {\r\n            return { needed: false, count: 0 };\r\n        }\r\n    }\r\n\r\n    // Public API\r\n    return {\r\n        // Core CRUD\r\n        getAll,\r\n        getActive,\r\n        getSettled,\r\n        getById,\r\n        create,\r\n        update,\r\n        remove,\r\n        clearAll,\r\n\r\n        // Convenience getters\r\n        getByLeague,\r\n        getByDate,\r\n        getByDateRange,\r\n        getToday,\r\n\r\n        // Status updates\r\n        updateStatus,\r\n        markWon,\r\n        markLost,\r\n        markPush,\r\n\r\n        // Analytics\r\n        getSummary,\r\n\r\n        // Migration\r\n        migrateFromLocalStorage,\r\n        checkMigrationNeeded,\r\n\r\n        // Utilities\r\n        invalidateCache\r\n    };\r\n})();\r\n\r\n// Export for module systems\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = PicksService;\r\n}\r\n\r\n// Make globally available\r\nwindow.PicksService = PicksService;\r\n\n\n/* === dashboard/js/local-picks-manager.js === */\n/**\r\n * Local Picks Manager v33.02.0\r\n * Production version - Real data only, no sample data, auto-cleanup of stale picks\r\n * Stores picks in localStorage, auto-fetches game data from ESPN\r\n *\r\n * @deprecated This module uses localStorage for pick storage. Prefer the\r\n *   Cosmos DB-backed picks-service.js for new features. This file is still\r\n *   loaded by index.html and weekly-lineup.html for backward compatibility\r\n *   and will be removed once all callers migrate to the DB-backed service.\r\n */\r\n\r\n(function () {\r\n  \"use strict\";\r\n\r\n  const STORAGE_KEY = \"gbsv_picks\";\r\n  const UNIT_MULTIPLIER_KEY = \"gbsv_unit_multiplier\";\r\n\r\n  // ========== STORAGE FUNCTIONS ==========\r\n\r\n  function getAllPicks() {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEY);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (e) {\r\n      console.error(\"Error reading picks from localStorage:\", e);\r\n      if (window.ErrorHandler) {\r\n        window.ErrorHandler.handleStorage(e, \"read\");\r\n      }\r\n      return [];\r\n    }\r\n  }\r\n\r\n  function savePicks(picks) {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(picks));\r\n      console.log(`\u2705 Saved ${picks.length} picks to localStorage`);\r\n      return true;\r\n    } catch (e) {\r\n      console.error(\"Error saving picks to localStorage:\", e);\r\n      if (window.ErrorHandler) {\r\n        window.ErrorHandler.handleStorage(e, \"write\");\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function addPicks(newPicks) {\r\n    const existing = getAllPicks();\r\n    const enrichedPicks = newPicks.map((pick, idx) => {\r\n      // Normalize league/sport values\r\n      let sport = (pick.sport || pick.league || \"NBA\").toUpperCase();\r\n\r\n      // Map league variants to standard values\r\n      const leagueMap = {\r\n        NCAAM: \"NCAAB\",\r\n        NCAB: \"NCAAB\",\r\n        CBB: \"NCAAB\",\r\n        \"COLLEGE BASKETBALL\": \"NCAAB\",\r\n        NCAAF: \"NCAAF\",\r\n        CFB: \"NCAAF\",\r\n        \"COLLEGE FOOTBALL\": \"NCAAF\",\r\n        NFL: \"NFL\",\r\n        NBA: \"NBA\",\r\n        NCAAB: \"NCAAB\",\r\n        MLB: \"MLB\",\r\n        NHL: \"NHL\",\r\n      };\r\n      sport = leagueMap[sport] || sport;\r\n\r\n      // Ensure awayTeam and homeTeam are set correctly\r\n      let awayTeam = pick.awayTeam || \"\";\r\n      let homeTeam = pick.homeTeam || \"\";\r\n\r\n      // If game field exists, try to parse it\r\n      if (pick.game && !awayTeam && !homeTeam) {\r\n        const parts = pick.game.split(/\\s*(?:@|vs\\.?|versus)\\s*/i);\r\n        if (parts.length === 2) {\r\n          awayTeam = parts[0].trim();\r\n          homeTeam = parts[1].trim();\r\n        }\r\n      }\r\n\r\n      // Normalize pick direction for totals\r\n      let pickDirection = pick.pickDirection || \"\";\r\n      if (pickDirection) {\r\n        pickDirection = pickDirection\r\n          .replace(/^UNDE\\b/i, \"UNDER\")\r\n          .toUpperCase();\r\n      }\r\n\r\n      // Ensure pickType is normalized\r\n      let pickType = (pick.pickType || \"spread\").toLowerCase();\r\n      if (pickType === \"ml\") pickType = \"moneyline\";\r\n      if (pickType === \"tt\") pickType = \"team-total\";\r\n      if (pickType === \"ou\") pickType = \"total\";\r\n\r\n      return {\r\n        ...pick,\r\n        id:\r\n          pick.id ||\r\n          `pick_${Date.now()}_${idx}_${Math.random().toString(36).substring(7)}`,\r\n        createdAt: pick.createdAt || new Date().toISOString(),\r\n        status: pick.status || \"pending\",\r\n        sport: sport,\r\n        league: sport,\r\n        awayTeam: awayTeam,\r\n        homeTeam: homeTeam,\r\n        pickDirection: pickDirection,\r\n        pickType: pickType,\r\n      };\r\n    });\r\n    const all = [...existing, ...enrichedPicks];\r\n    savePicks(all);\r\n    return enrichedPicks;\r\n  }\r\n\r\n  function clearPicks() {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    console.log(\"CLEANUP Cleared all picks from localStorage\");\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function deletePick(pickId) {\r\n    const picks = getAllPicks().filter((p) => p.id !== pickId);\r\n    savePicks(picks);\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function updatePickStatus(pickId, newStatus) {\r\n    const picks = getAllPicks().map((p) => {\r\n      if (p.id === pickId) {\r\n        return { ...p, status: newStatus, updatedAt: new Date().toISOString() };\r\n      }\r\n      return p;\r\n    });\r\n    savePicks(picks);\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function getUnitMultiplier() {\r\n    return parseInt(localStorage.getItem(UNIT_MULTIPLIER_KEY)) || 1000;\r\n  }\r\n\r\n  function setUnitMultiplier(multiplier) {\r\n    localStorage.setItem(UNIT_MULTIPLIER_KEY, multiplier.toString());\r\n    if (window.PickStandardizer) {\r\n      window.PickStandardizer.setUnitMultiplier(multiplier);\r\n    }\r\n  }\r\n\r\n  // ========== STATUS LABEL HELPER ==========\r\n\r\n  /**\r\n   * Format status badge label based on status and game time\r\n   * @param {string} status - The pick status\r\n   * @param {Object} pick - The pick object with countdown/scheduled info\r\n   * @returns {string} - Formatted label for the status badge\r\n   */\r\n  function formatStatusLabel(status, pick = {}) {\r\n    const normalizedStatus = (status || \"pending\").toLowerCase();\r\n\r\n    // Map status to proper labels\r\n    const labelMap = {\r\n      win: \"Won\",\r\n      won: \"Won\",\r\n      loss: \"Lost\",\r\n      lost: \"Lost\",\r\n      push: \"Push\",\r\n      \"on-track\": \"On Track\",\r\n      \"at-risk\": \"At Risk\",\r\n      live: \"Live\",\r\n    };\r\n\r\n    if (labelMap[normalizedStatus]) {\r\n      return labelMap[normalizedStatus];\r\n    }\r\n\r\n    // For pending, show countdown or scheduled time if available\r\n    if (normalizedStatus === \"pending\") {\r\n      if (pick.countdown) {\r\n        return pick.countdown;\r\n      }\r\n      if (pick.scheduled || pick.gameTime) {\r\n        return `Starts ${pick.scheduled || pick.gameTime}`;\r\n      }\r\n      return \"Pending\";\r\n    }\r\n\r\n    // Default: capitalize first letter\r\n    return status.charAt(0).toUpperCase() + status.slice(1);\r\n  }\r\n\r\n  /**\r\n   * Generate tooltip blurb based on status and pick data\r\n   * @param {string} status - The pick status\r\n   * @param {Object} pick - The pick object\r\n   * @returns {string} - Tooltip text\r\n   */\r\n  function generateStatusBlurb(status, pick = {}) {\r\n    const normalizedStatus = (status || \"pending\").toLowerCase();\r\n    const pickType = (pick.pickType || \"spread\").toLowerCase();\r\n    const line = pick.line || \"\";\r\n\r\n    switch (normalizedStatus) {\r\n      case \"pending\":\r\n        if (pick.gameTime) {\r\n          return `Game starts at ${pick.gameTime}`;\r\n        }\r\n        return \"Awaiting game start\";\r\n\r\n      case \"on-track\":\r\n        if (pickType === \"spread\") {\r\n          return `Covering by 8.5 pts \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"total\") {\r\n          return `On pace for ${pick.pickDirection || \"Over\"} \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"moneyline\") {\r\n          return `Leading \u2022 ${pick.countdown || \"Live\"}`;\r\n        }\r\n        return `On track to hit \u2022 ${pick.countdown || \"Live\"}`;\r\n\r\n      case \"at-risk\":\r\n        if (pickType === \"spread\") {\r\n          return `Need 5.5 pts to cover \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"total\") {\r\n          return `Need 12 more pts \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"moneyline\") {\r\n          return `Trailing \u2022 ${pick.countdown || \"Live\"}`;\r\n        }\r\n        return `At risk \u2022 ${pick.countdown || \"Live\"}`;\r\n\r\n      case \"win\":\r\n      case \"won\":\r\n        const winAmt = pick.win || 0;\r\n        return `+$${winAmt.toLocaleString()}`;\r\n\r\n      case \"loss\":\r\n      case \"lost\":\r\n        const lossAmt = pick.risk || 0;\r\n        return `-$${lossAmt.toLocaleString()}`;\r\n\r\n      case \"push\":\r\n        return \"$0 \u2022 Refunded\";\r\n\r\n      default:\r\n        return \"\";\r\n    }\r\n  }\r\n\r\n  // ========== TEAM DATA ==========\r\n  // Team data is now loaded from assets/data/team-data.json via TeamDataLoader\r\n  // Fallback to hardcoded data for backward compatibility\r\n\r\n  const TEAM_DATA_FALLBACK = {\r\n    // NBA Teams - logos now loaded via LogoLoader\r\n    \"san antonio spurs\": { abbr: \"SAS\", league: \"nba\" },\r\n    spurs: { abbr: \"SAS\", league: \"nba\" },\r\n    \"new york knicks\": { abbr: \"NYK\", league: \"nba\" },\r\n    knicks: { abbr: \"NYK\", league: \"nba\" },\r\n    \"los angeles lakers\": { abbr: \"LAL\", league: \"nba\" },\r\n    lakers: { abbr: \"LAL\", league: \"nba\" },\r\n    \"golden state warriors\": { abbr: \"GSW\", league: \"nba\" },\r\n    warriors: { abbr: \"GSW\", league: \"nba\" },\r\n    \"boston celtics\": { abbr: \"BOS\", league: \"nba\" },\r\n    celtics: { abbr: \"BOS\", league: \"nba\" },\r\n    \"miami heat\": { abbr: \"MIA\", league: \"nba\" },\r\n    heat: { abbr: \"MIA\", league: \"nba\" },\r\n    \"dallas mavericks\": { abbr: \"DAL\", league: \"nba\" },\r\n    mavericks: { abbr: \"DAL\", league: \"nba\" },\r\n    mavs: { abbr: \"DAL\", league: \"nba\" },\r\n    \"denver nuggets\": { abbr: \"DEN\", league: \"nba\" },\r\n    nuggets: { abbr: \"DEN\", league: \"nba\" },\r\n    \"phoenix suns\": { abbr: \"PHX\", league: \"nba\" },\r\n    suns: { abbr: \"PHX\", league: \"nba\" },\r\n    \"milwaukee bucks\": { abbr: \"MIL\", league: \"nba\" },\r\n    bucks: { abbr: \"MIL\", league: \"nba\" },\r\n    \"philadelphia 76ers\": { abbr: \"PHI\", league: \"nba\" },\r\n    \"76ers\": { abbr: \"PHI\", league: \"nba\" },\r\n    sixers: { abbr: \"PHI\", league: \"nba\" },\r\n    \"brooklyn nets\": { abbr: \"BKN\", league: \"nba\" },\r\n    nets: { abbr: \"BKN\", league: \"nba\" },\r\n    \"chicago bulls\": { abbr: \"CHI\", league: \"nba\" },\r\n    bulls: { abbr: \"CHI\", league: \"nba\" },\r\n    \"cleveland cavaliers\": { abbr: \"CLE\", league: \"nba\" },\r\n    cavaliers: { abbr: \"CLE\", league: \"nba\" },\r\n    cavs: { abbr: \"CLE\", league: \"nba\" },\r\n    \"atlanta hawks\": { abbr: \"ATL\", league: \"nba\" },\r\n    hawks: { abbr: \"ATL\", league: \"nba\" },\r\n    \"toronto raptors\": { abbr: \"TOR\", league: \"nba\" },\r\n    raptors: { abbr: \"TOR\", league: \"nba\" },\r\n    \"orlando magic\": { abbr: \"ORL\", league: \"nba\" },\r\n    magic: { abbr: \"ORL\", league: \"nba\" },\r\n    \"indiana pacers\": { abbr: \"IND\", league: \"nba\" },\r\n    pacers: { abbr: \"IND\", league: \"nba\" },\r\n    \"detroit pistons\": { abbr: \"DET\", league: \"nba\" },\r\n    pistons: { abbr: \"DET\", league: \"nba\" },\r\n    \"charlotte hornets\": { abbr: \"CHA\", league: \"nba\" },\r\n    hornets: { abbr: \"CHA\", league: \"nba\" },\r\n    \"washington wizards\": { abbr: \"WAS\", league: \"nba\" },\r\n    wizards: { abbr: \"WAS\", league: \"nba\" },\r\n    \"memphis grizzlies\": { abbr: \"MEM\", league: \"nba\" },\r\n    grizzlies: { abbr: \"MEM\", league: \"nba\" },\r\n    \"new orleans pelicans\": { abbr: \"NOP\", league: \"nba\" },\r\n    pelicans: { abbr: \"NOP\", league: \"nba\" },\r\n    \"houston rockets\": { abbr: \"HOU\", league: \"nba\" },\r\n    rockets: { abbr: \"HOU\", league: \"nba\" },\r\n    \"minnesota timberwolves\": { abbr: \"MIN\", league: \"nba\" },\r\n    timberwolves: { abbr: \"MIN\", league: \"nba\" },\r\n    wolves: { abbr: \"MIN\", league: \"nba\" },\r\n    \"oklahoma city thunder\": { abbr: \"OKC\", league: \"nba\" },\r\n    thunder: { abbr: \"OKC\", league: \"nba\" },\r\n    \"portland trail blazers\": { abbr: \"POR\", league: \"nba\" },\r\n    \"trail blazers\": { abbr: \"POR\", league: \"nba\" },\r\n    blazers: { abbr: \"POR\", league: \"nba\" },\r\n    \"utah jazz\": { abbr: \"UTA\", league: \"nba\" },\r\n    jazz: { abbr: \"UTA\", league: \"nba\" },\r\n    \"sacramento kings\": { abbr: \"SAC\", league: \"nba\" },\r\n    kings: { abbr: \"SAC\", league: \"nba\" },\r\n    \"la clippers\": { abbr: \"LAC\", league: \"nba\" },\r\n    clippers: { abbr: \"LAC\", league: \"nba\" },\r\n\r\n    // NCAAB Teams (from today's picks) - Full names and abbreviations\r\n    butler: {\r\n      abbr: \"BUT\",\r\n      fullName: \"Butler Bulldogs\",\r\n      league: \"ncaam\",\r\n      logoId: \"2086\",\r\n    },\r\n    \"butler bulldogs\": {\r\n      abbr: \"BUT\",\r\n      fullName: \"Butler Bulldogs\",\r\n      league: \"ncaam\",\r\n      logoId: \"2086\",\r\n    },\r\n    connecticut: {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"u conn\": {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    uconn: {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"uconn huskies\": {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"abilene christian\": {\r\n      abbr: \"ACU\",\r\n      fullName: \"Abilene Christian Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"2000\",\r\n    },\r\n    \"abilene christian wildcats\": {\r\n      abbr: \"ACU\",\r\n      fullName: \"Abilene Christian Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"2000\",\r\n    },\r\n    arizona: {\r\n      abbr: \"ARIZ\",\r\n      fullName: \"Arizona Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"12\",\r\n    },\r\n    \"arizona wildcats\": {\r\n      abbr: \"ARIZ\",\r\n      fullName: \"Arizona Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"12\",\r\n    },\r\n    \"montana st\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"montana state\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"montana state bobcats\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"cal poly slo\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"cal poly\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"cal poly mustangs\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"oral roberts\": {\r\n      abbr: \"ORU\",\r\n      fullName: \"Oral Roberts Golden Eagles\",\r\n      league: \"ncaam\",\r\n      logoId: \"198\",\r\n    },\r\n    \"oral roberts golden eagles\": {\r\n      abbr: \"ORU\",\r\n      fullName: \"Oral Roberts Golden Eagles\",\r\n      league: \"ncaam\",\r\n      logoId: \"198\",\r\n    },\r\n    \"missouri st\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    \"missouri state\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    \"missouri state bears\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    marist: {\r\n      abbr: \"MAR\",\r\n      fullName: \"Marist Red Foxes\",\r\n      league: \"ncaam\",\r\n      logoId: \"2368\",\r\n    },\r\n    \"marist red foxes\": {\r\n      abbr: \"MAR\",\r\n      fullName: \"Marist Red Foxes\",\r\n      league: \"ncaam\",\r\n      logoId: \"2368\",\r\n    },\r\n    \"georgia tech\": {\r\n      abbr: \"GT\",\r\n      fullName: \"Georgia Tech Yellow Jackets\",\r\n      league: \"ncaam\",\r\n      logoId: \"59\",\r\n    },\r\n    \"georgia tech yellow jackets\": {\r\n      abbr: \"GT\",\r\n      fullName: \"Georgia Tech Yellow Jackets\",\r\n      league: \"ncaam\",\r\n      logoId: \"59\",\r\n    },\r\n    \"east tenn st\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee st\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee state\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee state buccaneers\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"etsu buccaneers\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"north carolina\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    unc: {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    \"north carolina tar heels\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    \"tar heels\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n\r\n    // NFL Teams\r\n    \"buffalo bills\": { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    bills: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    buffalo: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    \"philadelphia eagles\": {\r\n      abbr: \"PHI\",\r\n      fullName: \"Philadelphia Eagles\",\r\n      league: \"nfl\",\r\n    },\r\n    eagles: { abbr: \"PHI\", fullName: \"Philadelphia Eagles\", league: \"nfl\" },\r\n    \"kansas city chiefs\": {\r\n      abbr: \"KC\",\r\n      fullName: \"Kansas City Chiefs\",\r\n      league: \"nfl\",\r\n    },\r\n    chiefs: { abbr: \"KC\", fullName: \"Kansas City Chiefs\", league: \"nfl\" },\r\n    \"kansas city\": {\r\n      abbr: \"KC\",\r\n      fullName: \"Kansas City Chiefs\",\r\n      league: \"nfl\",\r\n    },\r\n    \"detroit lions\": { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\r\n    lions: { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\r\n    \"baltimore ravens\": {\r\n      abbr: \"BAL\",\r\n      fullName: \"Baltimore Ravens\",\r\n      league: \"nfl\",\r\n    },\r\n    ravens: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\r\n    baltimore: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\r\n    \"minnesota vikings\": {\r\n      abbr: \"MIN\",\r\n      fullName: \"Minnesota Vikings\",\r\n      league: \"nfl\",\r\n    },\r\n    vikings: { abbr: \"MIN\", fullName: \"Minnesota Vikings\", league: \"nfl\" },\r\n    \"green bay packers\": {\r\n      abbr: \"GB\",\r\n      fullName: \"Green Bay Packers\",\r\n      league: \"nfl\",\r\n    },\r\n    packers: { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\r\n    \"green bay\": { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\r\n    \"pittsburgh steelers\": {\r\n      abbr: \"PIT\",\r\n      fullName: \"Pittsburgh Steelers\",\r\n      league: \"nfl\",\r\n    },\r\n    steelers: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\r\n    pittsburgh: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\r\n    \"houston texans\": {\r\n      abbr: \"HOU\",\r\n      fullName: \"Houston Texans\",\r\n      league: \"nfl\",\r\n    },\r\n    texans: { abbr: \"HOU\", fullName: \"Houston Texans\", league: \"nfl\" },\r\n    \"los angeles chargers\": {\r\n      abbr: \"LAC\",\r\n      fullName: \"Los Angeles Chargers\",\r\n      league: \"nfl\",\r\n    },\r\n    chargers: { abbr: \"LAC\", fullName: \"Los Angeles Chargers\", league: \"nfl\" },\r\n    \"la chargers\": {\r\n      abbr: \"LAC\",\r\n      fullName: \"Los Angeles Chargers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"denver broncos\": {\r\n      abbr: \"DEN\",\r\n      fullName: \"Denver Broncos\",\r\n      league: \"nfl\",\r\n    },\r\n    broncos: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\r\n    denver: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\r\n    \"cincinnati bengals\": {\r\n      abbr: \"CIN\",\r\n      fullName: \"Cincinnati Bengals\",\r\n      league: \"nfl\",\r\n    },\r\n    bengals: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\r\n    cincinnati: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\r\n    \"seattle seahawks\": {\r\n      abbr: \"SEA\",\r\n      fullName: \"Seattle Seahawks\",\r\n      league: \"nfl\",\r\n    },\r\n    seahawks: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\r\n    seattle: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\r\n    \"tampa bay buccaneers\": {\r\n      abbr: \"TB\",\r\n      fullName: \"Tampa Bay Buccaneers\",\r\n      league: \"nfl\",\r\n    },\r\n    buccaneers: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\r\n    bucs: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\r\n    \"tampa bay\": {\r\n      abbr: \"TB\",\r\n      fullName: \"Tampa Bay Buccaneers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"san francisco 49ers\": {\r\n      abbr: \"SF\",\r\n      fullName: \"San Francisco 49ers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"49ers\": { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\r\n    niners: { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\r\n    \"san francisco\": {\r\n      abbr: \"SF\",\r\n      fullName: \"San Francisco 49ers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"dallas cowboys\": {\r\n      abbr: \"DAL\",\r\n      fullName: \"Dallas Cowboys\",\r\n      league: \"nfl\",\r\n    },\r\n    cowboys: { abbr: \"DAL\", fullName: \"Dallas Cowboys\", league: \"nfl\" },\r\n    \"miami dolphins\": {\r\n      abbr: \"MIA\",\r\n      fullName: \"Miami Dolphins\",\r\n      league: \"nfl\",\r\n    },\r\n    dolphins: { abbr: \"MIA\", fullName: \"Miami Dolphins\", league: \"nfl\" },\r\n    \"los angeles rams\": {\r\n      abbr: \"LAR\",\r\n      fullName: \"Los Angeles Rams\",\r\n      league: \"nfl\",\r\n    },\r\n    rams: { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\r\n    \"la rams\": { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\r\n    \"arizona cardinals\": {\r\n      abbr: \"ARI\",\r\n      fullName: \"Arizona Cardinals\",\r\n      league: \"nfl\",\r\n    },\r\n    cardinals: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\r\n    arizona: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\r\n    \"indianapolis colts\": {\r\n      abbr: \"IND\",\r\n      fullName: \"Indianapolis Colts\",\r\n      league: \"nfl\",\r\n    },\r\n    colts: { abbr: \"IND\", fullName: \"Indianapolis Colts\", league: \"nfl\" },\r\n    indianapolis: {\r\n      abbr: \"IND\",\r\n      fullName: \"Indianapolis Colts\",\r\n      league: \"nfl\",\r\n    },\r\n    \"tennessee titans\": {\r\n      abbr: \"TEN\",\r\n      fullName: \"Tennessee Titans\",\r\n      league: \"nfl\",\r\n    },\r\n    titans: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\r\n    tennessee: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\r\n    \"jacksonville jaguars\": {\r\n      abbr: \"JAX\",\r\n      fullName: \"Jacksonville Jaguars\",\r\n      league: \"nfl\",\r\n    },\r\n    jaguars: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\r\n    jags: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\r\n    jacksonville: {\r\n      abbr: \"JAX\",\r\n      fullName: \"Jacksonville Jaguars\",\r\n      league: \"nfl\",\r\n    },\r\n    \"cleveland browns\": {\r\n      abbr: \"CLE\",\r\n      fullName: \"Cleveland Browns\",\r\n      league: \"nfl\",\r\n    },\r\n    browns: { abbr: \"CLE\", fullName: \"Cleveland Browns\", league: \"nfl\" },\r\n    \"new york giants\": {\r\n      abbr: \"NYG\",\r\n      fullName: \"New York Giants\",\r\n      league: \"nfl\",\r\n    },\r\n    giants: { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\r\n    \"ny giants\": { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\r\n    \"new york jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    jets: { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    \"ny jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    \"new england patriots\": {\r\n      abbr: \"NE\",\r\n      fullName: \"New England Patriots\",\r\n      league: \"nfl\",\r\n    },\r\n    patriots: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\r\n    pats: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\r\n    \"new england\": {\r\n      abbr: \"NE\",\r\n      fullName: \"New England Patriots\",\r\n      league: \"nfl\",\r\n    },\r\n    \"washington commanders\": {\r\n      abbr: \"WSH\",\r\n      fullName: \"Washington Commanders\",\r\n      league: \"nfl\",\r\n    },\r\n    commanders: {\r\n      abbr: \"WSH\",\r\n      fullName: \"Washington Commanders\",\r\n      league: \"nfl\",\r\n    },\r\n    \"carolina panthers\": {\r\n      abbr: \"CAR\",\r\n      fullName: \"Carolina Panthers\",\r\n      league: \"nfl\",\r\n    },\r\n    panthers: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\r\n    carolina: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\r\n    \"atlanta falcons\": {\r\n      abbr: \"ATL\",\r\n      fullName: \"Atlanta Falcons\",\r\n      league: \"nfl\",\r\n    },\r\n    falcons: { abbr: \"ATL\", fullName: \"Atlanta Falcons\", league: \"nfl\" },\r\n    \"new orleans saints\": {\r\n      abbr: \"NO\",\r\n      fullName: \"New Orleans Saints\",\r\n      league: \"nfl\",\r\n    },\r\n    saints: { abbr: \"NO\", fullName: \"New Orleans Saints\", league: \"nfl\" },\r\n    \"new orleans\": {\r\n      abbr: \"NO\",\r\n      fullName: \"New Orleans Saints\",\r\n      league: \"nfl\",\r\n    },\r\n    \"chicago bears\": { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\r\n    bears: { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\r\n    \"las vegas raiders\": {\r\n      abbr: \"LV\",\r\n      fullName: \"Las Vegas Raiders\",\r\n      league: \"nfl\",\r\n    },\r\n    raiders: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n    \"las vegas\": { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n    vegas: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n  };\r\n\r\n  /**\r\n   * Get team logo URL using LogoLoader (Azure Blob Storage)\r\n   * @param {string} teamAbbr - Team abbreviation (e.g., 'LAL', 'BUF')\r\n   * @param {string} league - League identifier ('nba', 'nfl', 'ncaam', etc.)\r\n   * @param {string} logoId - Optional ESPN logo ID for NCAA teams\r\n   * @returns {string} Logo URL\r\n   */\r\n  function getTeamLogoUrl(teamAbbr, league, logoId) {\r\n    if (!window.LogoLoader || !teamAbbr) return \"\";\r\n\r\n    // For NCAA teams, we may need to use logoId\r\n    if ((league === \"ncaam\" || league === \"ncaaf\") && logoId) {\r\n      // LogoLoader expects teamId, for NCAA it's the numeric ID\r\n      return window.LogoLoader.getLogoUrl(league, logoId);\r\n    }\r\n\r\n    // For NBA/NFL, use the abbreviation (lowercase)\r\n    const teamId = teamAbbr.toLowerCase();\r\n    return window.LogoLoader.getLogoUrl(league, teamId);\r\n  }\r\n\r\n  async function getTeamInfo(teamName) {\r\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\r\n\r\n    // Try to use TeamDataLoader if available\r\n    if (\r\n      window.TeamDataLoader &&\r\n      typeof window.TeamDataLoader.getTeamInfo === \"function\"\r\n    ) {\r\n      try {\r\n        const info = await window.TeamDataLoader.getTeamInfo(teamName);\r\n        if (info && info.abbr !== \"N/A\") {\r\n          return info;\r\n        }\r\n      } catch (e) {\r\n        console.warn(\r\n          \"[LocalPicksManager] TeamDataLoader failed, using fallback:\",\r\n          e,\r\n        );\r\n      }\r\n    }\r\n\r\n    // Fallback to hardcoded data\r\n    const lower = teamName.toLowerCase().trim();\r\n    const data = TEAM_DATA_FALLBACK[lower];\r\n    if (data) {\r\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\r\n      const league = data.league || \"nba\"; // Default to NBA if not specified\r\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\r\n      return {\r\n        abbr: data.abbr,\r\n        fullName: data.fullName || teamName,\r\n        logo: logo,\r\n      };\r\n    }\r\n    return {\r\n      abbr: teamName.substring(0, 3).toUpperCase(),\r\n      fullName: teamName,\r\n      logo: \"\",\r\n    };\r\n  }\r\n\r\n  // Synchronous version for backward compatibility (uses fallback)\r\n  function getTeamInfoSync(teamName) {\r\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\r\n    const lower = teamName.toLowerCase().trim();\r\n    const data = TEAM_DATA_FALLBACK[lower];\r\n    if (data) {\r\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\r\n      const league = data.league || \"nba\"; // Default to NBA if not specified\r\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\r\n      return {\r\n        abbr: data.abbr,\r\n        fullName: data.fullName || teamName,\r\n        logo: logo,\r\n      };\r\n    }\r\n    return {\r\n      abbr: teamName.substring(0, 3).toUpperCase(),\r\n      fullName: teamName,\r\n      logo: \"\",\r\n    };\r\n  }\r\n\r\n  // ========== PARSE AND ADD PICKS ==========\r\n\r\n  async function parseAndAddPicks(content, sportsbook = \"\") {\r\n    if (!window.PickStandardizer) {\r\n      console.error(\"PickStandardizer not loaded\");\r\n      return [];\r\n    }\r\n\r\n    // Ensure team variant registry is loaded (362 NCAAM + 30 NBA teams)\r\n    if (window.PickStandardizer.loadTeamVariants) {\r\n      await window.PickStandardizer.loadTeamVariants();\r\n    }\r\n\r\n    // Set unit multiplier\r\n    window.PickStandardizer.setUnitMultiplier(getUnitMultiplier());\r\n\r\n    // Parse content\r\n    const picks = window.PickStandardizer.standardize(content);\r\n\r\n    if (picks.length === 0) {\r\n      console.warn(\"No picks could be parsed from content\");\r\n      return [];\r\n    }\r\n\r\n    // Add sportsbook and default values to each pick\r\n    const defaultRisk = getUnitMultiplier(); // 1 unit = $1000 default\r\n    const picksWithBook = picks.map((pick) => {\r\n      // Set default risk if not provided\r\n      const risk = pick.risk || defaultRisk;\r\n\r\n      // Calculate win from odds if not provided\r\n      let win = pick.win;\r\n      if (!win && pick.odds && risk) {\r\n        const oddsNum = parseInt(pick.odds);\r\n        if (oddsNum > 0) {\r\n          win = risk * (oddsNum / 100);\r\n        } else if (oddsNum < 0) {\r\n          win = risk / (Math.abs(oddsNum) / 100);\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...pick,\r\n        sportsbook: sportsbook || pick.sportsbook || \"Manual Upload\",\r\n        risk: Math.round(risk),\r\n        win: Math.round(win || risk * 0.91), // Default to -110 odds if no odds\r\n        gameDate:\r\n          pick.gameDate ||\r\n          new Date().toLocaleDateString(\"en-US\", {\r\n            weekday: \"short\",\r\n            month: \"short\",\r\n            day: \"numeric\",\r\n          }),\r\n        gameTime: pick.gameTime || \"TBD\",\r\n      };\r\n    });\r\n\r\n    // Try to enrich picks with game data from ESPN\r\n    const enrichedPicks = await enrichPicksWithGameData(picksWithBook);\r\n\r\n    // Add to storage\r\n    const added = addPicks(enrichedPicks);\r\n\r\n    // Refresh the table\r\n    refreshPicksTable();\r\n\r\n    return added;\r\n  }\r\n\r\n  async function enrichPicksWithGameData(picks) {\r\n    // Fetch today's games if AutoGameFetcher is available\r\n    let todaysGames = [];\r\n    if (window.AutoGameFetcher) {\r\n      try {\r\n        await window.AutoGameFetcher.fetchTodaysGames();\r\n        todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n        console.log(\r\n          `\uD83C\uDFC0 Found ${todaysGames.length} games today:`,\r\n          todaysGames.map((g) => `${g.awayTeam} @ ${g.homeTeam} (${g.time})`),\r\n        );\r\n      } catch (e) {\r\n        console.warn(\"Could not fetch games:\", e);\r\n      }\r\n    } else {\r\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available\");\r\n    }\r\n\r\n    return picks.map((pick) => {\r\n      const enriched = { ...pick };\r\n      const teamToFind = pick.pickTeam;\r\n\r\n      console.log(`\uD83D\uDD0D Looking for game with team: \"${teamToFind}\"`);\r\n\r\n      // Try to find the game\r\n      if (window.AutoGameFetcher && todaysGames.length > 0) {\r\n        const game = window.AutoGameFetcher.findGame(teamToFind);\r\n        if (game) {\r\n          console.log(\r\n            `\u2705 Found game: ${game.awayTeam} (${game.awayRecord}) @ ${game.homeTeam} (${game.homeRecord}) at ${game.time}`,\r\n          );\r\n          enriched.awayTeam = game.awayTeam;\r\n          enriched.homeTeam = game.homeTeam;\r\n          enriched.awayRecord = game.awayRecord || \"\";\r\n          enriched.homeRecord = game.homeRecord || \"\";\r\n          enriched.gameTime = game.time;\r\n          enriched.gameDate = game.date;\r\n          enriched.sport = game.sport;\r\n          enriched.gameStatus = game.status;\r\n          enriched.game = `${game.awayTeam} @ ${game.homeTeam}`;\r\n        } else {\r\n          console.warn(\r\n            `\u274C No game found for \"${teamToFind}\" - available teams:`,\r\n            todaysGames.flatMap((g) => [g.awayTeam, g.homeTeam]),\r\n          );\r\n        }\r\n      }\r\n\r\n      // Set default date/time if not found\r\n      if (!enriched.gameDate) {\r\n        enriched.gameDate = new Date().toLocaleDateString(\"en-US\", {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        });\r\n      }\r\n      if (!enriched.gameTime) {\r\n        enriched.gameTime = \"TBD\";\r\n      }\r\n\r\n      return enriched;\r\n    });\r\n  }\r\n\r\n  // ========== REFRESH TABLE ==========\r\n\r\n  /**\r\n   * Format currency with fixed two decimals\r\n   */\r\n  function formatCurrencyValue(val) {\r\n    if (val === undefined || val === null || val === \"\") return \"$0.00\";\r\n    const num =\r\n      typeof val === \"number\"\r\n        ? val\r\n        : parseFloat(String(val).replace(/[$,]/g, \"\"));\r\n    if (isNaN(num)) return \"$0.00\";\r\n    return `$${num.toLocaleString(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n  }\r\n\r\n  /**\r\n   * Format date string into short month/day display\r\n   */\r\n  function formatDateValue(date) {\r\n    if (!date) return \"Today\";\r\n    if (date.includes(\"/\") || date.includes(\"-\")) {\r\n      const d = new Date(date);\r\n      if (!isNaN(d)) {\r\n        return d.toLocaleDateString(\"en-US\", {\r\n          weekday: \"short\",\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        });\r\n      }\r\n    }\r\n    return date;\r\n  }\r\n\r\n  // League logos now served via LogoLoader (Azure Blob + static assets)\r\n  // LogoLoader automatically handles fallbacks and caching\r\n  function getLeagueLogo(league) {\r\n    if (!league) return \"\";\r\n    const leagueUpper = league.toUpperCase();\r\n\r\n    // Use LogoLoader if available\r\n    if (\r\n      window.LogoLoader &&\r\n      typeof window.LogoLoader.getLeagueLogoUrl === \"function\"\r\n    ) {\r\n      // Map variations to standard league names\r\n      const leagueMap = {\r\n        NCAAB: \"ncaam\",\r\n        NCAAM: \"ncaam\",\r\n        \"NCAA MEN'S BASKETBALL\": \"ncaam\",\r\n        CBB: \"ncaam\",\r\n        NCAAF: \"ncaaf\",\r\n        \"COLLEGE FOOTBALL\": \"ncaaf\",\r\n        CFB: \"ncaaf\",\r\n        NBA: \"nba\",\r\n        NFL: \"nfl\",\r\n        MLB: \"mlb\",\r\n        NHL: \"nhl\",\r\n        MLS: \"mls\",\r\n      };\r\n      const standardLeague =\r\n        leagueMap[leagueUpper] || leagueUpper.toLowerCase();\r\n      return window.LogoLoader.getLeagueLogoUrl(standardLeague);\r\n    }\r\n\r\n    // Legacy fallback (should rarely be used)\r\n    const LEAGUE_LOGOS_FALLBACK = {\r\n      NBA: \"/assets/nba-logo.png\",\r\n      NFL: \"/assets/nfl-logo.png\",\r\n      NCAAB: \"/assets/ncaam-logo.png\",\r\n      NCAAM: \"/assets/ncaam-logo.png\",\r\n      NCAAF: \"/assets/ncaaf-logo.png\",\r\n      MLB: \"/assets/mlb-logo.png\",\r\n      NHL: \"/assets/nhl-logo.png\",\r\n    };\r\n    return LEAGUE_LOGOS_FALLBACK[leagueUpper] || \"\";\r\n  }\r\n\r\n  function renderLeagueCell(sport) {\r\n    // Convert to uppercase for lookup (LEAGUE_LOGOS keys are uppercase)\r\n    const sportUpper = (sport || \"\").toUpperCase();\r\n    // Map normalized values to display names\r\n    const displayMap = {\r\n      NCAAAB: \"NCAAM\",\r\n      NCAAB: \"NCAAM\",\r\n      NCAAF: \"NCAAF\",\r\n      NBA: \"NBA\",\r\n      NFL: \"NFL\",\r\n      MLB: \"MLB\",\r\n      NHL: \"NHL\",\r\n    };\r\n    const displayText = displayMap[sportUpper] || sportUpper;\r\n    // Get logo via LogoLoader\r\n    const logo = getLeagueLogo(sportUpper);\r\n    return `\r\n            <div class=\"league-cell\">\r\n                ${logo ? `<img src=\"${logo}\" class=\"league-logo\" alt=\"${displayText}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                <span class=\"league-text\">${displayText}</span>\r\n            </div>\r\n        `;\r\n  }\r\n\r\n  function refreshPicksTable() {\r\n    const picks = getAllPicks();\r\n    const tbody = document.getElementById(\"picks-tbody\");\r\n\r\n    if (!tbody) {\r\n      // Silent return if table not present (e.g. on pages without the picks table)\r\n      return;\r\n    }\r\n\r\n    // Clear existing rows\r\n    tbody.innerHTML = \"\";\r\n\r\n    // Update table container class\r\n    const tableContainer = tbody.closest(\".table-container\");\r\n    if (tableContainer) {\r\n      tableContainer.classList.toggle(\"has-picks\", picks.length > 0);\r\n    }\r\n\r\n    if (picks.length === 0) {\r\n      console.log(\"No picks to display\");\r\n      return;\r\n    }\r\n\r\n    // Render each pick as a row (using sync version for immediate rendering)\r\n    picks.forEach((pick, idx) => {\r\n      const row = createPickRow(pick, idx);\r\n      tbody.appendChild(row);\r\n    });\r\n\r\n    console.log(`\uD83D\uDCCA Displayed ${picks.length} picks in table`);\r\n\r\n    // Trigger recalculations\r\n    if (\r\n      typeof window.calculateKPIs === \"function\" &&\r\n      typeof window.updateKPITiles === \"function\"\r\n    ) {\r\n      setTimeout(() => {\r\n        const kpis = window.calculateKPIs(getAllPicks());\r\n        window.updateKPITiles(kpis);\r\n      }, 100);\r\n    }\r\n    if (window.ZebraStripes?.applyPicksTableZebraStripes) {\r\n      setTimeout(() => window.ZebraStripes.applyPicksTableZebraStripes(), 50);\r\n    }\r\n\r\n    // Re-apply filters if they exist\r\n    if (\r\n      window.DashboardFilters &&\r\n      typeof window.DashboardFilters.applyFilters === \"function\"\r\n    ) {\r\n      setTimeout(() => window.DashboardFilters.applyFilters(), 50);\r\n    }\r\n\r\n    // Re-apply filter pills if available\r\n    if (\r\n      window.DashboardFilterPills &&\r\n      typeof window.DashboardFilterPills.applyFilters === \"function\"\r\n    ) {\r\n      setTimeout(() => window.DashboardFilterPills.applyFilters(), 50);\r\n    }\r\n\r\n    // ========== ACTIVATE LIVE SCORES & BOX SCORES ==========\r\n    // Fetch today's games and start live score updates\r\n    setTimeout(async () => {\r\n      try {\r\n        // 1. Fetch today's games first (needed for matching)\r\n        if (window.AutoGameFetcher) {\r\n          console.log(\r\n            \"[PICKS-TABLE] Fetching today's games for live scores...\",\r\n          );\r\n          await window.AutoGameFetcher.fetchTodaysGames(true); // Force refresh\r\n          const games = window.AutoGameFetcher.getTodaysGames() || [];\r\n          console.log(\r\n            `[PICKS-TABLE] Loaded ${games.length} games for live score matching`,\r\n          );\r\n        }\r\n\r\n        // 2. Start/restart LiveScoreUpdater\r\n        if (window.LiveScoreUpdater) {\r\n          console.log(\"[PICKS-TABLE] Starting live score updates...\");\r\n          window.LiveScoreUpdater.stopLiveUpdates(); // Stop if running\r\n          window.LiveScoreUpdater.startLiveUpdates(); // Start fresh\r\n          // Also trigger an immediate update\r\n          window.LiveScoreUpdater.updateScores();\r\n        }\r\n\r\n        // 3. Populate team records in box scores\r\n        if (typeof window.populateTeamRecordsWhenReady === \"function\") {\r\n          window.populateTeamRecordsWhenReady(tbody, { force: true });\r\n        }\r\n\r\n        console.log(\"[PICKS-TABLE] \u2705 Live scores and box scores activated\");\r\n      } catch (e) {\r\n        console.warn(\"[PICKS-TABLE] Error activating live scores:\", e);\r\n      }\r\n    }, 200);\r\n\r\n    // Attach sportsbook dropdown event handlers\r\n    attachSportsbookDropdownListeners();\r\n\r\n    // Attach risk/win amount edit handlers\r\n    attachRiskWinEditListeners();\r\n  }\r\n\r\n  // ========== SPORTSBOOK DROPDOWN HANDLER ==========\r\n\r\n  function attachSportsbookDropdownListeners() {\r\n    const dropdowns = document.querySelectorAll(\".sportsbook-dropdown\");\r\n    dropdowns.forEach((dropdown) => {\r\n      // Remove any existing listeners to avoid duplicates\r\n      dropdown.removeEventListener(\"change\", handleSportsbookChange);\r\n      // Attach new listener\r\n      dropdown.addEventListener(\"change\", handleSportsbookChange);\r\n    });\r\n  }\r\n\r\n  function handleSportsbookChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newSportsbook = event.target.value;\r\n\r\n    if (!pickId) return;\r\n\r\n    // Update the pick's sportsbook\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.sportsbook = newSportsbook;\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} sportsbook to: ${newSportsbook || \"None\"}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== RISK/WIN AMOUNT EDIT HANDLERS ==========\r\n\r\n  function attachRiskWinEditListeners() {\r\n    const riskInputs = document.querySelectorAll(\".editable-risk\");\r\n    const winInputs = document.querySelectorAll(\".editable-win\");\r\n\r\n    riskInputs.forEach((input) => {\r\n      input.removeEventListener(\"change\", handleRiskChange);\r\n      input.addEventListener(\"change\", handleRiskChange);\r\n    });\r\n\r\n    winInputs.forEach((input) => {\r\n      input.removeEventListener(\"change\", handleWinChange);\r\n      input.addEventListener(\"change\", handleWinChange);\r\n    });\r\n  }\r\n\r\n  function handleRiskChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newRisk = parseFloat(event.target.value) || 0;\r\n\r\n    if (!pickId) return;\r\n\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.risk = Math.round(newRisk);\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} risk to: $${pick.risk.toLocaleString()}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  function handleWinChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newWin = parseFloat(event.target.value) || 0;\r\n\r\n    if (!pickId) return;\r\n\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.win = Math.round(newWin);\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} win to: $${pick.win.toLocaleString()}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== CREATE ROW (FULL TEMPLATE) ==========\r\n  // Note: Using synchronous version for immediate rendering\r\n  // Async team data loading happens in background via TeamDataLoader\r\n\r\n  function createPickRow(pick, idx) {\r\n    const row = document.createElement(\"tr\");\r\n    const pickTeamInfo = getTeamInfoSync(pick.pickTeam);\r\n    const awayTeam = pick.awayTeam || pick.pickTeam || \"TBD\";\r\n    const homeTeam = pick.homeTeam || \"TBD\";\r\n    const awayRecord = pick.awayRecord || \"\";\r\n    const homeRecord = pick.homeRecord || \"\";\r\n    const awayInfo = getTeamInfoSync(awayTeam);\r\n    const homeInfo = getTeamInfoSync(homeTeam);\r\n\r\n    const segment = pick.segment || \"Full Game\";\r\n    const segmentKey =\r\n      segment.toLowerCase().includes(\"1h\") ||\r\n      segment.toLowerCase().includes(\"1st\")\r\n        ? \"1h\"\r\n        : segment.toLowerCase().includes(\"2h\") ||\r\n            segment.toLowerCase().includes(\"2nd\")\r\n          ? \"2h\"\r\n          : \"full-game\";\r\n\r\n    const segmentLabel =\r\n      {\r\n        \"1h\": \"1st Half\",\r\n        \"2h\": \"2nd Half\",\r\n        \"1q\": \"1st Quarter\",\r\n        \"2q\": \"2nd Quarter\",\r\n        \"3q\": \"3rd Quarter\",\r\n        \"4q\": \"4th Quarter\",\r\n        \"full-game\": \"Full Game\",\r\n      }[segmentKey] || \"Full Game\";\r\n\r\n    let selection = \"\";\r\n    if (pick.pickType === \"spread\") {\r\n      const line = pick.line || \"\";\r\n      selection =\r\n        line.startsWith(\"+\") || line.startsWith(\"-\")\r\n          ? line\r\n          : line\r\n            ? `+${line}`\r\n            : \"\";\r\n    } else if (pick.pickType === \"moneyline\" || pick.pickType === \"ml\") {\r\n      selection = \"ML\";\r\n    } else if (\r\n      pick.pickType === \"total\" ||\r\n      pick.pickType === \"team-total\" ||\r\n      pick.pickType === \"tt\"\r\n    ) {\r\n      // Normalize pickDirection - fix \"UNDE\" typo\r\n      let direction = (pick.pickDirection || \"Over\").toUpperCase();\r\n      if (direction === \"UNDE\" || direction.startsWith(\"UNDE\")) {\r\n        direction = \"UNDER\";\r\n      }\r\n      selection = `${direction} ${pick.line || \"\"}`.trim();\r\n    }\r\n\r\n    const status = pick.status || \"pending\";\r\n    const sportsbook = pick.sportsbook || \"\";\r\n    let sport = (pick.sport || \"NBA\").toLowerCase();\r\n\r\n    // Normalize league values to match filter dropdown options\r\n    const leagueNormMap = {\r\n      college: \"ncaaf\",\r\n      cfb: \"ncaaf\",\r\n      \"college football\": \"ncaaf\",\r\n      \"ncaa football\": \"ncaaf\",\r\n      cbb: \"ncaab\",\r\n      \"college basketball\": \"ncaab\",\r\n      \"ncaa basketball\": \"ncaab\",\r\n      ncaam: \"ncaab\",\r\n    };\r\n    if (leagueNormMap[sport]) {\r\n      sport = leagueNormMap[sport];\r\n    }\r\n\r\n    const epochTime =\r\n      pick.gameDate && pick.gameTime\r\n        ? new Date(`${pick.gameDate} ${pick.gameTime}`).getTime()\r\n        : Date.now();\r\n\r\n    row.setAttribute(\"data-pick-id\", pick.id || `pick-${idx}`);\r\n    row.setAttribute(\"data-row-id\", pick.id || `pick-${idx}`); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-league\", sport);\r\n    row.setAttribute(\"data-sport\", sport); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-epoch\", epochTime);\r\n    row.setAttribute(\"data-book\", sportsbook.toLowerCase());\r\n    row.setAttribute(\"data-away\", awayTeam.toLowerCase());\r\n    row.setAttribute(\"data-home\", homeTeam.toLowerCase());\r\n    row.setAttribute(\"data-away-team\", awayTeam); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-home-team\", homeTeam); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-away-abbr\", awayInfo.abbr || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-home-abbr\", homeInfo.abbr || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-pick-type\", pick.pickType || \"spread\");\r\n    row.setAttribute(\"data-pick-team\", pick.pickTeam || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-pick-text\", selection);\r\n    row.setAttribute(\"data-line\", pick.line || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-segment\", segmentKey);\r\n    row.setAttribute(\"data-odds\", pick.odds || \"\");\r\n    row.setAttribute(\"data-risk\", pick.risk || \"\");\r\n    row.setAttribute(\"data-win\", pick.win || \"\");\r\n    row.setAttribute(\"data-status\", status);\r\n    row.setAttribute(\"data-game-id\", pick.gameId || \"\"); // For LiveScoreUpdater\r\n    row.classList.add(\"group-start\");\r\n\r\n    const isSingleTeamBet = !pick.homeTeam || homeTeam === \"TBD\";\r\n\r\n    const awayLogoHtml = awayInfo.logo\r\n      ? `<img src=\"${awayInfo.logo}\" class=\"team-logo\" alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n    const homeLogoHtml = homeInfo.logo\r\n      ? `<img src=\"${homeInfo.logo}\" class=\"team-logo\" alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n    const pickLogoHtml = pickTeamInfo.logo\r\n      ? `<img src=\"${pickTeamInfo.logo}\" class=\"pick-team-logo\" alt=\"${pickTeamInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n\r\n    const matchupHtml = isSingleTeamBet\r\n      ? `<div class=\"matchup-cell\">\r\n                    <div class=\"team-line\">\r\n                        ${awayLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${awayTeam}</span>\r\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>`\r\n      : `<div class=\"matchup-cell\">\r\n                    <div class=\"team-line\">\r\n                        ${awayLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${awayTeam}</span>\r\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"vs-divider\">vs</div>\r\n                    <div class=\"team-line\">\r\n                        ${homeLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${homeTeam}</span>\r\n                            <span class=\"team-record\">${homeRecord ? `(${homeRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>`;\r\n\r\n    // Sport-specific box score layout\r\n    // NBA/NFL: Q1, Q2, Q3, Q4, T (quarters)\r\n    // NCAAB/NCAAF: 1H, 2H, T (halves)\r\n    const useQuarters = sport === \"NBA\" || sport === \"NFL\";\r\n    const boxscoreClass = useQuarters ? \"boxscore-quarters\" : \"boxscore-halves\";\r\n\r\n    let awayBoxRow, homeBoxRow, headerCells;\r\n\r\n    if (useQuarters) {\r\n      headerCells = `\r\n                <div class=\"boxscore-cell header-cell\">Q1</div>\r\n                <div class=\"boxscore-cell header-cell\">Q2</div>\r\n                <div class=\"boxscore-cell header-cell\">Q3</div>\r\n                <div class=\"boxscore-cell header-cell\">Q4</div>\r\n                <div class=\"boxscore-cell header-cell\">T</div>`;\r\n\r\n      awayBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell q1-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q2-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q3-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q4-away\"></div>\r\n                    <div class=\"boxscore-cell total total-away\"></div>\r\n                </div>`;\r\n\r\n      homeBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell q1-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q2-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q3-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q4-home\"></div>\r\n                    <div class=\"boxscore-cell total total-home\"></div>\r\n                </div>`;\r\n    } else {\r\n      // College basketball/football - halves\r\n      headerCells = `\r\n                <div class=\"boxscore-cell header-cell\">1H</div>\r\n                <div class=\"boxscore-cell header-cell\">2H</div>\r\n                <div class=\"boxscore-cell header-cell\">T</div>`;\r\n\r\n      awayBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell h1-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell h2-away\"></div>\r\n                    <div class=\"boxscore-cell total total-away\"></div>\r\n                </div>`;\r\n\r\n      homeBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell h1-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell h2-home\"></div>\r\n                    <div class=\"boxscore-cell total total-home\"></div>\r\n                </div>`;\r\n    }\r\n\r\n    // Determine appropriate status for boxscore header\r\n    const pickStatus = pick.status || \"pending\";\r\n    let statusText = pick.gameTime || \"Pending\";\r\n    let statusClass = \"countdown\";\r\n\r\n    if (\r\n      pickStatus === \"final\" ||\r\n      pickStatus === \"win\" ||\r\n      pickStatus === \"loss\" ||\r\n      pickStatus === \"push\"\r\n    ) {\r\n      statusText = \"Final\";\r\n      statusClass = \"final\";\r\n    } else if (\r\n      pickStatus === \"live\" ||\r\n      pickStatus === \"on-track\" ||\r\n      pickStatus === \"at-risk\"\r\n    ) {\r\n      statusText = pick.gameTime || \"Live\";\r\n      statusClass = \"live\";\r\n    } else if (pickStatus === \"pending\") {\r\n      statusText = pick.gameTime || \"Pending\";\r\n      statusClass = \"countdown\";\r\n    }\r\n\r\n    const boxscoreHtml = `\r\n            <div class=\"boxscore-container\" data-live-ready=\"false\">\r\n                <div class=\"compact-boxscore\">\r\n                    <div class=\"boxscore-grid ${boxscoreClass}\">\r\n                        <div class=\"boxscore-row header\">\r\n                            <div class=\"boxscore-cell header-cell game-time-cell\">\r\n                                <span class=\"game-time-status ${statusClass}\">${statusText}</span>\r\n                            </div>\r\n                            ${headerCells}\r\n                        </div>\r\n                        ${awayBoxRow}\r\n                        ${isSingleTeamBet ? \"\" : homeBoxRow}\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n\r\n    // Calculate hit/miss and won/lost values - both show dollar amounts\r\n    const formatWonLost = (amount) => `$${Math.abs(amount).toLocaleString()}`;\r\n    const hitMissValue =\r\n      status === \"win\"\r\n        ? `+${formatWonLost(pick.win || 0)}`\r\n        : status === \"loss\"\r\n          ? `-${formatWonLost(pick.risk || 0)}`\r\n          : status === \"push\"\r\n            ? \"$0\"\r\n            : \"\";\r\n    const wonLostValue = hitMissValue; // Same value for both columns\r\n\r\n    row.innerHTML = `\r\n            <td data-label=\"Date & Time\">\r\n                <div class=\"cell-date\">${formatDateValue(pick.gameDate)}</div>\r\n                <div class=\"cell-time\">${pick.gameTime || \"TBD\"}</div>\r\n                <select class=\"sportsbook-dropdown\" data-pick-id=\"${pick.id}\" aria-label=\"Change sportsbook for this pick\">\r\n                    <option value=\"\">No Book</option>\r\n                    <option value=\"hulkwager\" ${sportsbook === \"hulkwager\" ? \"selected\" : \"\"}>Hulk Wager</option>\r\n                    <option value=\"bombay711\" ${sportsbook === \"bombay711\" ? \"selected\" : \"\"}>Bombay 711</option>\r\n                    <option value=\"kingofsports\" ${sportsbook === \"kingofsports\" ? \"selected\" : \"\"}>King of Sports</option>\r\n                    <option value=\"primetimeaction\" ${sportsbook === \"primetimeaction\" ? \"selected\" : \"\"}>Prime Time Action</option>\r\n                    <option value=\"other\" ${sportsbook === \"other\" ? \"selected\" : \"\"}>Other</option>\r\n                </select>\r\n            </td>\r\n            <td class=\"center\" data-label=\"League\">\r\n                ${renderLeagueCell(sport)}\r\n            </td>\r\n            <td data-label=\"Matchup\">\r\n                ${matchupHtml}\r\n            </td>\r\n            <td class=\"center\" data-label=\"Segment\">\r\n                <span class=\"game-segment\" data-segment=\"${segmentKey}\">${segmentLabel}</span>\r\n            </td>\r\n            <td data-label=\"Pick\">\r\n                <div class=\"pick-cell\">\r\n                    <div class=\"pick-team-info\">\r\n                        ${pickLogoHtml}\r\n                        <span class=\"pick-team-abbr\">${pickTeamInfo.abbr || pick.pickTeam}</span>\r\n                    </div>\r\n                    <div class=\"pick-details\">\r\n                        <span class=\"pick-line\">${selection || pick.line || \"\"}</span>\r\n                        <span class=\"pick-odds\">(${pick.odds || \"-110\"})</span>\r\n                    </div>\r\n                    ${pick.edge ? `<div class=\"pick-edge\"><span class=\"edge-badge\">+${parseFloat(pick.edge).toFixed(1)}%</span></div>` : \"\"}\r\n                </div>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Risk / Win\">\r\n                <div class=\"currency-combined currency-stacked editable-amounts\">\r\n                    <div class=\"currency-risk-row\">\r\n                        <input type=\"number\"\r\n                               class=\"editable-risk\"\r\n                               value=\"${Math.round(pick.risk || 50000)}\"\r\n                               data-pick-id=\"${pick.id}\"\r\n                               aria-label=\"Risk amount\"\r\n                               min=\"0\"\r\n                               step=\"1000\">\r\n                        <span class=\"currency-separator\"> /</span>\r\n                    </div>\r\n                    <input type=\"number\"\r\n                           class=\"editable-win\"\r\n                           value=\"${Math.round(pick.win || 50000)}\"\r\n                           data-pick-id=\"${pick.id}\"\r\n                           aria-label=\"Win amount\"\r\n                           min=\"0\"\r\n                           step=\"1000\">\r\n                </div>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Box Score\">\r\n                ${boxscoreHtml}\r\n            </td>\r\n            <td class=\"center\" data-label=\"Status\">\r\n                <span class=\"status-badge\" data-status=\"${status}\" data-blurb=\"${generateStatusBlurb(status, pick)}\">${formatStatusLabel(status, pick)}</span>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Hit / Miss\">\r\n                <span class=\"hit-miss-value\" data-status=\"${status}\">${hitMissValue}</span>\r\n            </td>\r\n            <td class=\"center\" data-label=\"$ Won / Lost\">\r\n                <span class=\"won-lost-value\" data-status=\"${status}\">${wonLostValue}</span>\r\n                <button class=\"delete-pick-btn\" onclick=\"event.stopPropagation(); window.LocalPicksManager.delete('${pick.id}')\" title=\"Remove pick from dashboard\">\u2715</button>\r\n            </td>\r\n        `;\r\n\r\n    return row;\r\n  }\r\n\r\n  // ========== RE-ENRICH EXISTING PICKS ==========\r\n\r\n  async function reEnrichExistingPicks() {\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) return;\r\n\r\n    // Check if any picks are missing records\r\n    const needsEnrichment = picks.some((p) => !p.awayRecord && !p.homeRecord);\r\n    if (!needsEnrichment) {\r\n      console.log(\"\u2705 All picks already have records\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"\uD83D\uDD04 Re-enriching existing picks with ESPN data...\");\r\n\r\n    // Wait for AutoGameFetcher to be ready\r\n    let attempts = 0;\r\n    while (!window.AutoGameFetcher && attempts < 10) {\r\n      await new Promise((r) => setTimeout(r, 200));\r\n      attempts++;\r\n    }\r\n\r\n    if (!window.AutoGameFetcher) {\r\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available for re-enrichment\");\r\n      return;\r\n    }\r\n\r\n    // Fetch today's games\r\n    try {\r\n      await window.AutoGameFetcher.fetchTodaysGames();\r\n      const todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n\r\n      if (todaysGames.length === 0) {\r\n        console.log(\"\uD83D\uDCED No games today to enrich with\");\r\n        return;\r\n      }\r\n\r\n      console.log(`\uD83C\uDFC0 Found ${todaysGames.length} games for enrichment`);\r\n\r\n      let updated = false;\r\n      const enrichedPicks = picks.map((pick) => {\r\n        // Skip if already has records\r\n        if (pick.awayRecord || pick.homeRecord) return pick;\r\n\r\n        const teamToFind = pick.pickTeam || pick.awayTeam;\r\n        if (!teamToFind) return pick;\r\n\r\n        const game = window.AutoGameFetcher.findGame(teamToFind);\r\n        if (game) {\r\n          console.log(\r\n            `\uD83D\uDCDD Enriching: ${pick.pickTeam} -> ${game.awayTeam} (${game.awayRecord}) vs ${game.homeTeam} (${game.homeRecord})`,\r\n          );\r\n          updated = true;\r\n          return {\r\n            ...pick,\r\n            awayTeam: game.awayTeam,\r\n            homeTeam: game.homeTeam,\r\n            awayRecord: game.awayRecord || \"\",\r\n            homeRecord: game.homeRecord || \"\",\r\n            gameTime: pick.gameTime || game.time,\r\n            gameDate: pick.gameDate || game.date,\r\n            sport: pick.sport || game.sport,\r\n            gameStatus: game.status,\r\n          };\r\n        }\r\n        return pick;\r\n      });\r\n\r\n      if (updated) {\r\n        savePicks(enrichedPicks);\r\n        console.log(\"\u2705 Picks re-enriched with team records\");\r\n        refreshPicksTable();\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error re-enriching picks:\", e);\r\n    }\r\n  }\r\n\r\n  // ========== DEMO PICKS REMOVED (v33.00.0 Production) ==========\r\n  // Demo picks functionality has been completely removed for production.\r\n  // Real picks come from weekly-lineup page and model APIs only.\r\n\r\n  // ========== CLEANUP SAMPLE DATA ==========\r\n\r\n  /**\r\n   * Clean up stale pending picks older than specified days\r\n   * Runs once per day to prevent accumulation of old picks\r\n   */\r\n  function cleanupStalePicks(daysOld = 7) {\r\n    const LAST_CLEANUP_KEY = \"gbsv_last_stale_cleanup\";\r\n    const lastCleanup = localStorage.getItem(LAST_CLEANUP_KEY);\r\n    const today = new Date().toDateString();\r\n\r\n    // Only run once per day\r\n    if (lastCleanup === today) {\r\n      return;\r\n    }\r\n\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) {\r\n      localStorage.setItem(LAST_CLEANUP_KEY, today);\r\n      return;\r\n    }\r\n\r\n    const cutoffDate = new Date();\r\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\r\n    cutoffDate.setHours(0, 0, 0, 0);\r\n\r\n    const freshPicks = picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n\r\n      // Keep all settled picks (won, lost, push) regardless of age\r\n      if ([\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status)) {\r\n        return true;\r\n      }\r\n\r\n      // For pending/live picks, check age\r\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\r\n      let pickDate = null;\r\n\r\n      try {\r\n        pickDate = dateStr ? new Date(dateStr) : null;\r\n      } catch {}\r\n\r\n      // Keep if we can't determine date (safer to keep)\r\n      if (!pickDate || isNaN(pickDate.getTime())) {\r\n        return true;\r\n      }\r\n\r\n      // Remove if older than cutoff\r\n      return pickDate >= cutoffDate;\r\n    });\r\n\r\n    if (freshPicks.length < picks.length) {\r\n      const removed = picks.length - freshPicks.length;\r\n      console.log(\r\n        `\uD83D\uDDD1\uFE0F [Stale Cleanup] Removed ${removed} old pending picks (>${daysOld}d), kept ${freshPicks.length} picks`,\r\n      );\r\n      savePicks(freshPicks);\r\n    }\r\n\r\n    localStorage.setItem(LAST_CLEANUP_KEY, today);\r\n  }\r\n\r\n  function cleanupSampleData() {\r\n    const CLEANUP_VERSION_KEY = \"gbsv_cleanup_v5\"; // Bump version to re-run cleanup\r\n\r\n    // Only run cleanup once per browser (per version)\r\n    if (localStorage.getItem(CLEANUP_VERSION_KEY)) {\r\n      return;\r\n    }\r\n\r\n    // Clear the old demo import flag so cleanup runs fresh\r\n    localStorage.removeItem(\"gbsv_demo_imported_v1\");\r\n    localStorage.removeItem(\"gbsv_cleanup_v1\");\r\n\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) {\r\n      localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\r\n      return;\r\n    }\r\n\r\n    const sampleSources = new Set([\r\n      \"demo\",\r\n      \"sample\",\r\n      \"mock\",\r\n      \"placeholder\",\r\n      \"fake\",\r\n      \"test\",\r\n      \"example\",\r\n    ]);\r\n\r\n    // Filter out ONLY explicitly marked demo/sample picks - keep everything else\r\n    const realPicks = picks.filter((pick) => {\r\n      // Remove if it has explicit demo/sample markers\r\n      if (pick.isDemo === true || pick.isSample === true) {\r\n        return false;\r\n      }\r\n      // Remove if source is explicitly marked as demo/fake\r\n      const source = String(pick.source || \"\").toLowerCase();\r\n      if (sampleSources.has(source)) {\r\n        return false;\r\n      }\r\n      // Remove Demo Book picks\r\n      const sportsbook = String(pick.sportsbook || \"\").toLowerCase();\r\n      if (\r\n        sportsbook === \"demo book\" ||\r\n        /(demo|sample|mock|placeholder|fake|test|example)/.test(sportsbook)\r\n      ) {\r\n        return false;\r\n      }\r\n      // KEEP everything else - don't be aggressive with cleanup\r\n      return true;\r\n    });\r\n\r\n    if (realPicks.length < picks.length) {\r\n      const removed = picks.length - realPicks.length;\r\n      console.log(\r\n        `[Cleanup] Removed ${removed} demo picks, kept ${realPicks.length} real picks`,\r\n      );\r\n      savePicks(realPicks);\r\n    }\r\n\r\n    localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\r\n  }\r\n\r\n  // ========== INITIALIZE ==========\r\n\r\n  /**\r\n   * Check if we're on the dashboard page (not weekly-lineup or other pages)\r\n   */\r\n  function isDashboardPage() {\r\n    // Check for the page-weekly-lineup class on body\r\n    if (document.body.classList.contains(\"page-weekly-lineup\")) {\r\n      return false;\r\n    }\r\n    // Check the URL path\r\n    const path = window.location.pathname.toLowerCase();\r\n    if (path.includes(\"weekly-lineup\") || path.includes(\"odds-market\")) {\r\n      return false;\r\n    }\r\n    // Default to true if on index.html or dashboard-like page\r\n    return true;\r\n  }\r\n\r\n  function initialize() {\r\n    console.log(\r\n      \"\uD83C\uDFE0 LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)\",\r\n    );\r\n\r\n    // Clean up any legacy sample/demo data (runs once)\r\n    cleanupSampleData();\r\n\r\n    // Clean up stale pending picks (runs daily)\r\n    cleanupStalePicks(7); // Remove pending picks older than 7 days\r\n\r\n    // NO DEMO DATA: Production version uses only real picks from weekly-lineup\r\n    // importTodaysPicks(); -- DISABLED: No sample/placeholder data in production\r\n\r\n    // Override global functions\r\n    window.processAndSavePicks = parseAndAddPicks;\r\n    window.loadUploadedPicks = refreshPicksTable;\r\n\r\n    // Only auto-refresh table on dashboard page (not weekly-lineup)\r\n    if (isDashboardPage()) {\r\n      // Load existing picks first (shows immediately)\r\n      refreshPicksTable();\r\n\r\n      // Initialize table sorting\r\n      if (\r\n        window.PicksSortManager &&\r\n        typeof window.PicksSortManager.initSorting === \"function\"\r\n      ) {\r\n        setTimeout(() => window.PicksSortManager.initSorting(), 100);\r\n      }\r\n\r\n      // Then re-enrich with ESPN data (async, updates when ready)\r\n      setTimeout(() => reEnrichExistingPicks(), 500);\r\n    } else {\r\n      console.log(\r\n        \"\uD83C\uDFE0 LocalPicksManager: Skipping auto-refresh (not on dashboard page)\",\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== FILTERING HELPERS (read-only, don't modify storage) ==========\r\n\r\n  /**\r\n   * Get active picks (pending or live status)\r\n   * These are picks that haven't been settled yet\r\n   */\r\n  function getActivePicks() {\r\n    const picks = getAllPicks();\r\n    return picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      return (\r\n        status === \"pending\" ||\r\n        status === \"live\" ||\r\n        status === \"on-track\" ||\r\n        status === \"at-risk\"\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get settled picks (won, lost, push)\r\n   */\r\n  function getSettledPicks() {\r\n    const picks = getAllPicks();\r\n    return picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      return (\r\n        status === \"win\" ||\r\n        status === \"won\" ||\r\n        status === \"loss\" ||\r\n        status === \"lost\" ||\r\n        status === \"push\"\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get picks by date range (doesn't delete, just filters)\r\n   * @param {Date|null} startDate - Start of range (inclusive)\r\n   * @param {Date|null} endDate - End of range (inclusive)\r\n   */\r\n  function getPicksByDateRange(startDate = null, endDate = null) {\r\n    const picks = getAllPicks();\r\n    if (!startDate && !endDate) return picks;\r\n\r\n    return picks.filter((pick) => {\r\n      const dateStr = pick.gameDate || pick.createdAt || pick.date || \"\";\r\n      if (!dateStr) return true; // Include if no date info\r\n\r\n      try {\r\n        const pickDate = new Date(dateStr);\r\n        if (startDate && pickDate < startDate) return false;\r\n        if (endDate && pickDate > endDate) return false;\r\n        return true;\r\n      } catch {\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get picks for today only\r\n   */\r\n  function getTodaysPicks() {\r\n    const now = new Date();\r\n    const startOfDay = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n    );\r\n    const endOfDay = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n      23,\r\n      59,\r\n      59,\r\n      999,\r\n    );\r\n    return getPicksByDateRange(startOfDay, endOfDay);\r\n  }\r\n\r\n  /**\r\n   * Archive old settled picks (move to separate storage key for analytics)\r\n   * Only call this manually or on a schedule, not on every page load\r\n   * @param {number} daysOld - Archive picks older than this many days (default 30)\r\n   */\r\n  function archiveOldPicks(daysOld = 30) {\r\n    const picks = getAllPicks();\r\n    const cutoffDate = new Date();\r\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\r\n    cutoffDate.setHours(0, 0, 0, 0);\r\n\r\n    const toArchive = [];\r\n    const toKeep = [];\r\n\r\n    picks.forEach((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      const isSettled = [\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status);\r\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\r\n      let pickDate = null;\r\n\r\n      try {\r\n        pickDate = dateStr ? new Date(dateStr) : null;\r\n      } catch {}\r\n\r\n      // Archive if: settled AND older than cutoff\r\n      if (isSettled && pickDate && pickDate < cutoffDate) {\r\n        toArchive.push(pick);\r\n      } else {\r\n        toKeep.push(pick);\r\n      }\r\n    });\r\n\r\n    if (toArchive.length > 0) {\r\n      // Save archived picks to separate key\r\n      const existingArchive = JSON.parse(\r\n        localStorage.getItem(\"gbsv_picks_archive\") || \"[]\",\r\n      );\r\n      localStorage.setItem(\r\n        \"gbsv_picks_archive\",\r\n        JSON.stringify([...existingArchive, ...toArchive]),\r\n      );\r\n      savePicks(toKeep);\r\n      console.log(\r\n        `\uD83D\uDCE6 [LocalPicksManager] Archived ${toArchive.length} old settled picks`,\r\n      );\r\n    }\r\n\r\n    return toArchive.length;\r\n  }\r\n\r\n  // Auto-initialize\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", initialize);\r\n  } else {\r\n    initialize();\r\n  }\r\n\r\n  // Export API\r\n  window.LocalPicksManager = {\r\n    getAll: getAllPicks,\r\n    getActive: getActivePicks,\r\n    getSettled: getSettledPicks,\r\n    getByDateRange: getPicksByDateRange,\r\n    getToday: getTodaysPicks,\r\n    add: addPicks,\r\n    parseAndAdd: parseAndAddPicks,\r\n    clear: clearPicks,\r\n    delete: deletePick,\r\n    updateStatus: updatePickStatus,\r\n    refresh: refreshPicksTable,\r\n    reEnrich: reEnrichExistingPicks,\r\n    getUnitMultiplier,\r\n    setUnitMultiplier,\r\n    archiveOldPicks,\r\n    cleanupStale: cleanupStalePicks, // Manually trigger stale picks cleanup\r\n    // Debug helpers\r\n    debug: () => {\r\n      const picks = getAllPicks();\r\n      console.log(\"=== LocalPicksManager Debug ===\");\r\n      console.log(`Total picks in localStorage: ${picks.length}`);\r\n      console.log(\"Storage key:\", STORAGE_KEY);\r\n      console.log(\r\n        \"Raw localStorage:\",\r\n        localStorage.getItem(STORAGE_KEY)?.substring(0, 500),\r\n      );\r\n      if (picks.length > 0) {\r\n        console.log(\"Sample pick:\", JSON.stringify(picks[0], null, 2));\r\n      }\r\n      const tbody = document.getElementById(\"picks-tbody\");\r\n      console.log(\"Table element found:\", !!tbody);\r\n      console.log(\"Table rows:\", tbody?.children?.length || 0);\r\n      return picks;\r\n    },\r\n    forceRefresh: () => {\r\n      console.log(\"Force refreshing picks table...\");\r\n      refreshPicksTable();\r\n      return getAllPicks().length;\r\n    },\r\n  };\r\n\r\n  console.log(\"\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)\");\r\n})();\r\n\n\n/* === dashboard/js/dashboard-init.js === */\n/**\r\n * Dashboard Initialization Script\r\n * Handles dashboard-specific interactions like KPI tile flipping and refresh logic.\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const DashboardInit = {\r\n        init() {\r\n            console.log('Initializing Dashboard UI...');\r\n            this.initKPITiles();\r\n            this.initRefreshButton();\r\n            this.initBackToTop();\r\n        },\r\n\r\n        /**\r\n         * Initialize KPI Tile Flip Interaction\r\n         */\r\n        initKPITiles() {\r\n            const tiles = document.querySelectorAll('.kpi-tile[data-action=\"flip-tile\"]');\r\n            \r\n            tiles.forEach(tile => {\r\n                // Click handler\r\n                tile.addEventListener('click', () => {\r\n                    this.flipTile(tile);\r\n                });\r\n\r\n                // Keyboard handler (Enter/Space)\r\n                tile.addEventListener('keydown', (e) => {\r\n                    if (e.key === 'Enter' || e.key === ' ') {\r\n                        e.preventDefault();\r\n                        this.flipTile(tile);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Flip a KPI tile to show the other side\r\n         */\r\n        flipTile(tile) {\r\n            const layers = tile.querySelectorAll('.kpi-tile-layer');\r\n            if (layers.length < 2) return;\r\n\r\n            layers.forEach(layer => {\r\n                layer.classList.toggle('active');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initialize Refresh Button\r\n         */\r\n        initRefreshButton() {\r\n            const refreshBtn = document.querySelector('.refresh-btn');\r\n            if (refreshBtn) {\r\n                refreshBtn.addEventListener('click', () => {\r\n                    this.handleRefresh(refreshBtn);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle Dashboard Refresh\r\n         */\r\n        handleRefresh(btn) {\r\n            // Add spinning animation\r\n            btn.classList.add('spinning');\r\n            \r\n            // Call data refresh if available\r\n            if (window.ActivePicks && typeof window.ActivePicks.refreshData === 'function') {\r\n                window.ActivePicks.refreshData();\r\n            } else {\r\n                // Fallback reload\r\n                window.location.reload();\r\n            }\r\n\r\n            // Remove class after timeout (if page doesn't reload)\r\n            setTimeout(() => {\r\n                btn.classList.remove('spinning');\r\n            }, 1000);\r\n        },\r\n\r\n        /**\r\n         * Initialize Back to Top Button\r\n         */\r\n        initBackToTop() {\r\n            const backToTopBtn = document.getElementById('back-to-top');\r\n            if (!backToTopBtn) return;\r\n\r\n            window.addEventListener('scroll', () => {\r\n                if (window.scrollY > 300) {\r\n                    backToTopBtn.classList.add('visible');\r\n                } else {\r\n                    backToTopBtn.classList.remove('visible');\r\n                }\r\n            });\r\n\r\n            backToTopBtn.addEventListener('click', () => {\r\n                window.scrollTo({\r\n                    top: 0,\r\n                    behavior: 'smooth'\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => DashboardInit.init());\r\n    } else {\r\n        DashboardInit.init();\r\n    }\r\n\r\n})();\r\n"],
  "mappings": "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",
  "names": ["unitMultiplier", "TEAM_ALIASES", "_variantsLoaded", "loadTeamVariants", "ncaamRes", "nbaRes", "r", "count", "abbr", "team", "canonical", "loc", "nick", "alt", "a", "e", "standardizePicks", "input", "options", "isBetHistoryFormat", "parseBetHistory", "parseSportsbookGameLines", "parseHTMLPicks", "parseTextPicks", "text", "hasMoney", "hasTimestamp", "hasOddsSignals", "cleanedLines", "l", "line", "parseBetHistoryLeg", "defaultSport", "currentGame", "parseFlexibleLine", "html", "picks", "doc", "gamePanels", "panel", "idx", "gamePicks", "parseGamePanel", "textContent", "textPicks", "gameInfo", "extractGameInfo", "group", "groupPicks", "parseLineGroup", "pick", "parseIndividualLine", "info", "getTodayDate", "firstTeamEl", "secondTeamEl", "dateEl", "timeEl", "leagueEl", "detectSportFromLeague", "sportLine", "sportAttr", "detectSportFromAttribute", "groupType", "detectGroupType", "play", "index", "parseLinePlacement", "groupClass", "dataType", "groupText", "betType", "lineEl", "priceEl", "price", "teamIndex", "determineTeamIndex", "formatLine", "formatOdds", "determineOverUnder", "ttTeamIdx", "lineText", "parseLineAndOdds", "defaultIndex", "teamAttr", "parent", "position", "odds", "num", "league", "lower", "attr", "rows", "seenLegs", "row", "ticketId", "parlayLabel", "parlayType", "legs", "rowRisk", "rowWin", "leg", "legIdx", "legPick", "parseParlayLeg", "legKey", "parseHTMLRow", "legEl", "legIndex", "teamEl", "parts", "s", "periodEl", "periodText", "icon", "src", "teamLower", "dateCell", "dateText", "parsed", "parseDateTimeString", "riskEl", "riskText", "parseCurrency", "winEl", "winText", "gameEl", "gameText", "teams", "parseGameString", "selectionEl", "selText", "oddsMatch", "match", "spreadMatch", "lineOnly", "rawLines", "currentSport", "pipePick", "parsePipeDelimitedLine", "contextInfo", "extractContext", "normalizedPicks", "result", "gameMatch", "resolveTeamName", "normalizedSport", "normalized", "originalLine", "segmentPatterns", "pattern", "segment", "teamKeys", "teamKey", "teamTotalMatch", "teamPart", "linePart", "fullMatch", "gameTotalMatch", "foundTeam", "foundTeamPos", "teamRegex", "pos", "capsMatch", "spreadPatterns", "numbers", "numVal", "mlOdds", "vsMatch", "p", "matchupPart", "segmentPart", "pickPart", "matchupMatch", "awayTeam", "homeTeam", "segLower", "pickText", "totalMatch", "mlMatch", "lineVal", "parseTextLine", "defaultGame", "riskMatch", "standaloneTotal", "calculateWin", "teamMatch", "teamName", "remainder", "mlOddsMatch", "sign", "number", "oddsAfter", "shouldSkipLine", "updateContextFromLine", "callback", "ctx", "name", "cleaned", "risk", "oddsNum", "now", "picksToDisplayFormat", "selection", "picksToCSV", "headers", "cell", "setUnitMultiplier", "multiplier", "select", "value", "label", "file", "ext", "isExtAllowed", "isMimeAllowed", "mime", "isSizeAllowed", "actionButtons", "importOptions", "importBtn", "backBtn", "showImportOptions", "hideImportOptions", "resetUploadForm", "fileInput", "pasteArea", "fileList", "uploadBtn", "statusDiv", "dropZone", "uploadFilesBtn", "preventDefaults", "eventName", "files", "handleFiles", "validFiles", "rejected", "check", "reason", "formatFileSize", "rejectMsg", "showStatus", "renderFileList", "size", "escapeHtml", "uploadFiles", "formData", "sportsbookKey", "sportsbookLabel", "response", "error", "uploadPasteBtn", "clearBtn", "content", "selectedBook", "isHTML", "saveFn", "processAndSavePicks", "message", "type", "bytes", "div", "selectedBookMeta", "bookMeta", "deriveTeams", "source", "todaysGames", "derivedTeams", "game", "errorText", "element", "parsePickFromText", "spreadPattern", "totalPattern", "mlPattern", "vsPattern", "TableRenderer", "tbody", "node", "className", "otherClass", "legsRow", "parentRows", "shouldShow", "parlayId", "isExpanded", "container", "filters", "chips", "chip", "chipEl", "labelSpan", "removeBtn", "clearAllBtn", "subtype", "indicators", "btnId", "hasFilter", "btn", "indicator", "filterCount", "countEl", "announcer", "zebraDebounceTimer", "SortManager", "columnKey", "fallbackIndex", "month", "day", "currentMonth", "currentYear", "year", "timeText", "hours", "minutes", "period", "column", "dateValue", "timeValue", "amountEl", "badge", "status", "dataEpoch", "priorities", "state", "b", "aValue", "bValue", "aStr", "bStr", "newDirection", "direction", "th", "activeHeader", "isDesc", "activeIcon", "StateShapeValidators", "dateFilter", "matchupFilter", "riskFilter", "StateManager", "filterType", "updates", "isCurrentlyExpanded", "resultString", "scorePattern", "kpis", "leagueStats", "betTypeStats", "segmentStats", "sportsbookStats", "riskStr", "winStr", "win", "isLoss", "totalGames", "totalDecided", "stats", "key", "topName", "topWinRate", "record", "total", "winRate", "finishedPicks", "streak", "lastStatus", "i", "tile1", "layers", "valueEl", "subtextEl", "projectedSign", "netSign", "tile2", "roiSign", "tile3", "PICKS_ENDPOINT", "picksCache", "lastFetch", "CACHE_TTL", "apiRequest", "endpoint", "url", "config", "data", "invalidateCache", "getAll", "params", "query", "getActive", "getSettled", "getById", "id", "getByLeague", "getByDate", "date", "getByDateRange", "fromDate", "toDate", "getToday", "today", "create", "body", "update", "updateStatus", "additionalUpdates", "markWon", "pnl", "markLost", "markPush", "remove", "clearAll", "confirm", "getSummary", "summary", "migrateFromLocalStorage", "STORAGE_KEY", "localData", "localPicks", "checkMigrationNeeded", "UNIT_MULTIPLIER_KEY", "getAllPicks", "savePicks", "addPicks", "newPicks", "existing", "enrichedPicks", "sport", "pickDirection", "pickType", "all", "clearPicks", "refreshPicksTable", "deletePick", "pickId", "updatePickStatus", "newStatus", "getUnitMultiplier", "formatStatusLabel", "normalizedStatus", "labelMap", "generateStatusBlurb", "TEAM_DATA_FALLBACK", "getTeamLogoUrl", "teamAbbr", "logoId", "teamId", "getTeamInfo", "logo", "getTeamInfoSync", "parseAndAddPicks", "sportsbook", "defaultRisk", "picksWithBook", "enrichPicksWithGameData", "added", "g", "enriched", "teamToFind", "formatCurrencyValue", "val", "formatDateValue", "getLeagueLogo", "leagueUpper", "standardLeague", "renderLeagueCell", "sportUpper", "displayText", "tableContainer", "createPickRow", "games", "attachSportsbookDropdownListeners", "attachRiskWinEditListeners", "dropdown", "handleSportsbookChange", "event", "newSportsbook", "riskInputs", "winInputs", "handleRiskChange", "handleWinChange", "newRisk", "newWin", "pickTeamInfo", "awayRecord", "homeRecord", "awayInfo", "homeInfo", "segmentKey", "segmentLabel", "leagueNormMap", "epochTime", "isSingleTeamBet", "awayLogoHtml", "homeLogoHtml", "pickLogoHtml", "matchupHtml", "useQuarters", "boxscoreClass", "awayBoxRow", "homeBoxRow", "headerCells", "pickStatus", "statusText", "statusClass", "boxscoreHtml", "formatWonLost", "amount", "hitMissValue", "wonLostValue", "reEnrichExistingPicks", "attempts", "updated", "cleanupStalePicks", "daysOld", "LAST_CLEANUP_KEY", "lastCleanup", "cutoffDate", "freshPicks", "dateStr", "pickDate", "removed", "cleanupSampleData", "CLEANUP_VERSION_KEY", "sampleSources", "realPicks", "isDashboardPage", "path", "initialize", "getActivePicks", "getSettledPicks", "getPicksByDateRange", "startDate", "endDate", "getTodaysPicks", "startOfDay", "endOfDay", "archiveOldPicks", "toArchive", "toKeep", "isSettled", "existingArchive", "DashboardInit", "tile", "layer", "refreshBtn", "backToTopBtn"]
}
