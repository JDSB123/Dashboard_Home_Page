{
  "version": 3,
  "sources": ["_tmp_dashboard.js"],
  "sourcesContent": ["/* === assets/js/utils/team-data-loader.js === */\n/**\r\n * Team Data Loader\r\n * Loads team data from external JSON file\r\n * Falls back to hardcoded data if file fails to load\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    let teamDataCache = null;\r\n    let teamDataPromise = null;\r\n\r\n    /**\r\n     * Load team data from JSON file\r\n     * @returns {Promise<Object>} Team data object\r\n     */\r\n    async function loadTeamData() {\r\n        if (teamDataCache) {\r\n            return teamDataCache;\r\n        }\r\n\r\n        if (teamDataPromise) {\r\n            return teamDataPromise;\r\n        }\r\n\r\n        teamDataPromise = (async () => {\r\n            try {\r\n                const response = await fetch('assets/data/team-data.json?v=20250101');\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                \r\n                // Flatten the structure for backward compatibility\r\n                const flattened = {};\r\n                Object.keys(data).forEach(league => {\r\n                    Object.assign(flattened, data[league]);\r\n                });\r\n                \r\n                teamDataCache = flattened;\r\n                return flattened;\r\n            } catch (error) {\r\n                console.warn('[TeamDataLoader] Failed to load team-data.json, using fallback:', error);\r\n                // Return empty object - will fall back to hardcoded data in local-picks-manager\r\n                return {};\r\n            }\r\n        })();\r\n\r\n        return teamDataPromise;\r\n    }\r\n\r\n    /**\r\n     * Get team info from loaded data\r\n     * @param {string} teamName - Team name to lookup\r\n     * @param {string} league - Optional league hint (nba, nfl, ncaab)\r\n     * @returns {Object} Team info with abbr, logo, fullName\r\n     */\r\n    async function getTeamInfo(teamName, league = null) {\r\n        if (!teamName) {\r\n            return { abbr: 'N/A', fullName: '', logo: '' };\r\n        }\r\n\r\n        // Ensure data is loaded\r\n        const data = await loadTeamData();\r\n        \r\n        const lower = teamName.toLowerCase().trim();\r\n        \r\n        // Try direct lookup\r\n        if (data[lower]) {\r\n            return {\r\n                abbr: data[lower].abbr || teamName.substring(0, 3).toUpperCase(),\r\n                fullName: data[lower].fullName || teamName,\r\n                logo: data[lower].logo || ''\r\n            };\r\n        }\r\n\r\n        // Try with league-specific lookup if league provided\r\n        if (league && window.TEAM_DATA_BY_LEAGUE && window.TEAM_DATA_BY_LEAGUE[league]) {\r\n            const leagueData = window.TEAM_DATA_BY_LEAGUE[league];\r\n            if (leagueData[lower]) {\r\n                return {\r\n                    abbr: leagueData[lower].abbr || teamName.substring(0, 3).toUpperCase(),\r\n                    fullName: leagueData[lower].fullName || teamName,\r\n                    logo: leagueData[lower].logo || ''\r\n                };\r\n            }\r\n        }\r\n\r\n        // Fallback: generate abbreviation\r\n        return {\r\n            abbr: teamName.substring(0, 3).toUpperCase(),\r\n            fullName: teamName,\r\n            logo: ''\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Preload team data (call on page load)\r\n     */\r\n    function preloadTeamData() {\r\n        loadTeamData().catch(err => {\r\n            console.warn('[TeamDataLoader] Preload failed:', err);\r\n        });\r\n    }\r\n\r\n    // Export to global scope\r\n    window.TeamDataLoader = {\r\n        load: loadTeamData,\r\n        getTeamInfo: getTeamInfo,\r\n        preload: preloadTeamData\r\n    };\r\n\r\n    // Auto-preload on page load\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', preloadTeamData);\r\n    } else {\r\n        preloadTeamData();\r\n    }\r\n\r\n})();\r\n\n\n/* === assets/js/utils/filter-state-persistence.js === */\n/**\r\n * Filter State Persistence\r\n * Persists filter state to localStorage and restores on page load\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const STORAGE_KEY = 'gbsv_filter_state';\r\n    const STORAGE_VERSION = '1.0';\r\n\r\n    /**\r\n     * Save filter state to localStorage\r\n     */\r\n    function saveFilterState() {\r\n        try {\r\n            if (!window.tableState || !window.tableState.filters) {\r\n                return;\r\n            }\r\n\r\n            const stateToSave = {\r\n                version: STORAGE_VERSION,\r\n                filters: {\r\n                    matchup: {\r\n                        league: window.tableState.filters.matchup?.league || '',\r\n                        selectedLeagues: window.tableState.filters.matchup?.selectedLeagues || null\r\n                    },\r\n                    pick: {\r\n                        segment: window.tableState.filters.pick?.segment || '',\r\n                        selectedSegments: window.tableState.filters.pick?.selectedSegments || null\r\n                    },\r\n                    status: window.tableState.filters.status || []\r\n                },\r\n                // Also save DashboardFilterPills state if available\r\n                dashboardFilters: window.DashboardFilterPills ? {\r\n                    leagues: window.DashboardFilterPills.activeFilters?.leagues || [],\r\n                    segment: window.DashboardFilterPills.activeFilters?.segment || '',\r\n                    pick: window.DashboardFilterPills.activeFilters?.pick || '',\r\n                    status: window.DashboardFilterPills.activeFilters?.status || ''\r\n                } : null,\r\n                timestamp: Date.now()\r\n            };\r\n\r\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(stateToSave));\r\n        } catch (e) {\r\n            console.warn('[FilterStatePersistence] Failed to save filter state:', e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load filter state from localStorage\r\n     */\r\n    function loadFilterState() {\r\n        try {\r\n            const saved = localStorage.getItem(STORAGE_KEY);\r\n            if (!saved) {\r\n                return null;\r\n            }\r\n\r\n            const state = JSON.parse(saved);\r\n            \r\n            // Validate version\r\n            if (state.version !== STORAGE_VERSION) {\r\n                console.log('[FilterStatePersistence] Version mismatch, clearing old state');\r\n                localStorage.removeItem(STORAGE_KEY);\r\n                return null;\r\n            }\r\n\r\n            return state;\r\n        } catch (e) {\r\n            console.warn('[FilterStatePersistence] Failed to load filter state:', e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Restore filter state to UI\r\n     */\r\n    function restoreFilterState() {\r\n        const saved = loadFilterState();\r\n        if (!saved) {\r\n            return;\r\n        }\r\n\r\n        // Restore tableState filters\r\n        if (saved.filters && window.tableState && window.tableState.filters) {\r\n            if (saved.filters.matchup) {\r\n                window.tableState.filters.matchup.league = saved.filters.matchup.league || '';\r\n                window.tableState.filters.matchup.selectedLeagues = saved.filters.matchup.selectedLeagues;\r\n            }\r\n            if (saved.filters.pick) {\r\n                window.tableState.filters.pick.segment = saved.filters.pick.segment || '';\r\n                window.tableState.filters.pick.selectedSegments = saved.filters.pick.selectedSegments;\r\n            }\r\n            if (saved.filters.status) {\r\n                window.tableState.filters.status = saved.filters.status;\r\n            }\r\n        }\r\n\r\n        // Restore DashboardFilterPills state\r\n        if (saved.dashboardFilters && window.DashboardFilterPills) {\r\n            window.DashboardFilterPills.activeFilters = {\r\n                leagues: saved.dashboardFilters.leagues || [],\r\n                segment: saved.dashboardFilters.segment || '',\r\n                pick: saved.dashboardFilters.pick || '',\r\n                status: saved.dashboardFilters.status || ''\r\n            };\r\n\r\n            // Restore UI state\r\n            setTimeout(() => {\r\n                // Restore league pills\r\n                if (saved.dashboardFilters.leagues && saved.dashboardFilters.leagues.length > 0) {\r\n                    document.querySelectorAll('.ft-pill.ft-league').forEach(pill => {\r\n                        const value = pill.getAttribute('data-league');\r\n                        if (value === 'all') {\r\n                            pill.classList.remove('active');\r\n                        } else if (saved.dashboardFilters.leagues.includes(value)) {\r\n                            pill.classList.add('active');\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Restore segment dropdown\r\n                if (saved.dashboardFilters.segment) {\r\n                    const segmentBtn = document.getElementById('segment-dropdown-btn');\r\n                    const segmentItem = document.querySelector(`#segment-dropdown-menu .ft-dropdown-item[data-v=\"${saved.dashboardFilters.segment}\"]`);\r\n                    if (segmentItem && segmentBtn) {\r\n                        document.querySelectorAll('#segment-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                        segmentItem.classList.add('active');\r\n                        const labels = {\r\n                            'all': 'Segment',\r\n                            'full': 'Full Game',\r\n                            '1h': '1st Half',\r\n                            '2h': '2nd Half'\r\n                        };\r\n                        segmentBtn.textContent = `${labels[saved.dashboardFilters.segment] || 'Segment'} \u25BE`;\r\n                    }\r\n                }\r\n\r\n                // Restore pick type dropdown\r\n                if (saved.dashboardFilters.pick) {\r\n                    const pickBtn = document.getElementById('pick-dropdown-btn');\r\n                    const pickItem = document.querySelector(`#pick-dropdown-menu .ft-dropdown-item[data-v=\"${saved.dashboardFilters.pick}\"]`);\r\n                    if (pickItem && pickBtn) {\r\n                        document.querySelectorAll('#pick-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                        pickItem.classList.add('active');\r\n                        const labels = {\r\n                            'all': 'Pick Type',\r\n                            'spread': 'Spread',\r\n                            'ml': 'Moneyline',\r\n                            'total': 'Total',\r\n                            'tt': 'Team Total'\r\n                        };\r\n                        pickBtn.textContent = `${labels[saved.dashboardFilters.pick] || 'Pick Type'} \u25BE`;\r\n                    }\r\n                }\r\n\r\n                // Restore status dropdown\r\n                if (saved.dashboardFilters.status) {\r\n                    const statusBtn = document.getElementById('status-dropdown-btn');\r\n                    const statusItem = document.querySelector(`#status-dropdown-menu .ft-dropdown-item[data-v=\"${saved.dashboardFilters.status}\"]`);\r\n                    if (statusItem && statusBtn) {\r\n                        document.querySelectorAll('#status-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                        statusItem.classList.add('active');\r\n                        const labels = {\r\n                            'all': 'Status',\r\n                            'pending': 'Pending',\r\n                            'win': 'Won',\r\n                            'loss': 'Lost',\r\n                            'push': 'Push'\r\n                        };\r\n                        statusBtn.textContent = `${labels[saved.dashboardFilters.status] || 'Status'} \u25BE`;\r\n                    }\r\n                }\r\n\r\n                // Apply filters\r\n                if (window.DashboardFilterPills && typeof window.DashboardFilterPills.applyFilters === 'function') {\r\n                    window.DashboardFilterPills.applyFilters();\r\n                }\r\n            }, 100);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear saved filter state\r\n     */\r\n    function clearFilterState() {\r\n        try {\r\n            localStorage.removeItem(STORAGE_KEY);\r\n        } catch (e) {\r\n            console.warn('[FilterStatePersistence] Failed to clear filter state:', e);\r\n        }\r\n    }\r\n\r\n    // Auto-save on filter changes (debounced)\r\n    let saveTimeout = null;\r\n    function scheduleSave() {\r\n        clearTimeout(saveTimeout);\r\n        saveTimeout = setTimeout(saveFilterState, 500);\r\n    }\r\n\r\n    // Hook into filter changes\r\n    function initializePersistence() {\r\n        // Watch for DashboardFilterPills changes\r\n        if (window.DashboardFilterPills) {\r\n            const originalApplyFilters = window.DashboardFilterPills.applyFilters;\r\n            if (originalApplyFilters) {\r\n                window.DashboardFilterPills.applyFilters = function() {\r\n                    originalApplyFilters.apply(this, arguments);\r\n                    scheduleSave();\r\n                };\r\n            }\r\n        }\r\n\r\n        // Watch for tableState changes\r\n        const originalUpdateFilter = window.PicksStateManager?.updateFilter;\r\n        if (originalUpdateFilter) {\r\n            window.PicksStateManager.updateFilter = function(filterType, updates) {\r\n                originalUpdateFilter.apply(this, arguments);\r\n                scheduleSave();\r\n            };\r\n        }\r\n\r\n        // Restore state on page load\r\n        restoreFilterState();\r\n    }\r\n\r\n    // Export to global scope\r\n    window.FilterStatePersistence = {\r\n        save: saveFilterState,\r\n        load: loadFilterState,\r\n        restore: restoreFilterState,\r\n        clear: clearFilterState,\r\n        init: initializePersistence\r\n    };\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', initializePersistence);\r\n    } else {\r\n        initializePersistence();\r\n    }\r\n\r\n})();\r\n\n\n/* === assets/js/features/manual-upload.js === */\n/**\r\n * Manual Upload Feature\r\n * Handles file upload, drag & drop, and paste functionality for manual picks\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    class ManualUploadManager {\r\n        constructor() {\r\n            this.dropZone = document.getElementById('manual-upload-drop-zone');\r\n            this.fileInput = document.getElementById('manual-upload-file');\r\n            this.browseBtn = document.querySelector('.upload-browse-btn');\r\n            this.textArea = document.querySelector('.manual-picks-input');\r\n            this.submitBtn = document.querySelector('.manual-submit-btn-header');\r\n            this.clearBtn = document.querySelector('.manual-clear-btn-header');\r\n            this.sportsbookSelect = document.getElementById('manual-sportsbook-select');\r\n            \r\n            if (this.dropZone) {\r\n                this.init();\r\n            }\r\n        }\r\n\r\n        init() {\r\n            this.setupDragAndDrop();\r\n            this.setupFileSelection();\r\n            this.setupPaste();\r\n            this.setupSubmit();\r\n            this.setupClear();\r\n        }\r\n\r\n        setupDragAndDrop() {\r\n            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\r\n                this.dropZone.addEventListener(eventName, (e) => {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                }, false);\r\n            });\r\n\r\n            ['dragenter', 'dragover'].forEach(eventName => {\r\n                this.dropZone.addEventListener(eventName, () => {\r\n                    this.dropZone.classList.add('drag-over');\r\n                }, false);\r\n            });\r\n\r\n            ['dragleave', 'drop'].forEach(eventName => {\r\n                this.dropZone.addEventListener(eventName, () => {\r\n                    this.dropZone.classList.remove('drag-over');\r\n                }, false);\r\n            });\r\n\r\n            this.dropZone.addEventListener('drop', (e) => {\r\n                const dt = e.dataTransfer;\r\n                const files = dt.files;\r\n                this.handleFiles(files);\r\n            }, false);\r\n        }\r\n\r\n        setupFileSelection() {\r\n            this.browseBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation(); // Prevent dropdown from closing\r\n                this.fileInput.click();\r\n            });\r\n\r\n            this.fileInput.addEventListener('change', (e) => {\r\n                this.handleFiles(this.fileInput.files);\r\n            });\r\n            \r\n            // Prevent clicks on the dropzone from bubbling up if they aren't on the button\r\n            this.dropZone.addEventListener('click', (e) => {\r\n                if (e.target !== this.browseBtn) {\r\n                    e.stopPropagation();\r\n                    this.fileInput.click();\r\n                }\r\n            });\r\n        }\r\n\r\n        setupPaste() {\r\n            // Handle paste on the textarea\r\n            this.textArea.addEventListener('paste', (e) => {\r\n                const items = (e.clipboardData || e.originalEvent.clipboardData).items;\r\n                let blob = null;\r\n\r\n                for (let i = 0; i < items.length; i++) {\r\n                    if (items[i].type.indexOf('image') !== -1) {\r\n                        blob = items[i].getAsFile();\r\n                        e.preventDefault(); // Prevent pasting the image binary text\r\n                        this.handleFiles([blob]);\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            \r\n            // Handle paste on the dropzone area (when focused or modal is open)\r\n            this.dropZone.addEventListener('paste', (e) => {\r\n                const items = (e.clipboardData || e.originalEvent.clipboardData).items;\r\n                let blob = null;\r\n\r\n                for (let i = 0; i < items.length; i++) {\r\n                    if (items[i].type.indexOf('image') !== -1) {\r\n                        blob = items[i].getAsFile();\r\n                        e.preventDefault();\r\n                        this.handleFiles([blob]);\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Handle global paste when document has focus (for any images in clipboard)\r\n            const self = this;\r\n            document.addEventListener('paste', (e) => {\r\n                // Only process if the dropdown menu is currently visible\r\n                const dropdownMenu = document.getElementById('sportsbooks-menu');\r\n                if (!dropdownMenu || dropdownMenu.hasAttribute('hidden')) {\r\n                    return;\r\n                }\r\n\r\n                const items = (e.clipboardData || e.originalEvent.clipboardData).items;\r\n                \r\n                for (let i = 0; i < items.length; i++) {\r\n                    if (items[i].type.indexOf('image') !== -1) {\r\n                        const blob = items[i].getAsFile();\r\n                        e.preventDefault();\r\n                        self.handleFiles([blob]);\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        setupSubmit() {\r\n            this.submitBtn.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.uploadPicks();\r\n            });\r\n        }\r\n\r\n        setupClear() {\r\n            if (this.clearBtn) {\r\n                this.clearBtn.addEventListener('click', (e) => {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    \r\n                    // If there's content in the form, just clear the form\r\n                    if (this.textArea.value.trim() || this.selectedFile) {\r\n                        this.resetForm();\r\n                        return;\r\n                    }\r\n                    \r\n                    // Otherwise, offer to clear all picks\r\n                    if (confirm('Clear ALL saved picks from the dashboard?')) {\r\n                        if (window.LocalPicksManager?.clear) {\r\n                            window.LocalPicksManager.clear();\r\n                            console.log('\u2705 Cleared all picks');\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        handleFiles(files) {\r\n            if (files.length > 0) {\r\n                const file = files[0];\r\n                // Update UI to show file selected\r\n                const textEl = this.dropZone.querySelector('.drop-zone-text');\r\n                textEl.textContent = `Selected: ${file.name}`;\r\n                textEl.style.color = '#00ffaa';\r\n                \r\n                // Store file for upload\r\n                this.selectedFile = file;\r\n            }\r\n        }\r\n\r\n        async uploadPicks() {\r\n            const textPicks = this.textArea.value.trim();\r\n            const file = this.selectedFile;\r\n            const sportsbook = this.sportsbookSelect?.value || '';\r\n\r\n            if (!sportsbook) {\r\n                alert('Please select a sportsbook first.');\r\n                this.sportsbookSelect?.focus();\r\n                return;\r\n            }\r\n\r\n            if (!textPicks && !file) {\r\n                alert('Please enter picks or upload a file.');\r\n                return;\r\n            }\r\n\r\n            const originalText = this.submitBtn.textContent;\r\n            this.submitBtn.textContent = 'Processing...';\r\n            this.submitBtn.disabled = true;\r\n\r\n            try {\r\n                let content = textPicks;\r\n                \r\n                // If a file was selected, read its contents\r\n                if (file && !textPicks) {\r\n                    content = await this.readFileContent(file);\r\n                }\r\n                \r\n                console.log('Processing picks:', { content: content.substring(0, 200), file: file ? file.name : null });\r\n                \r\n                // Use LocalPicksManager to parse and save picks with sportsbook\r\n                const selectedBookMeta = {\r\n                    value: sportsbook,\r\n                    label: this.sportsbookSelect?.options[this.sportsbookSelect.selectedIndex]?.textContent?.trim() || sportsbook\r\n                };\r\n\r\n                const addedPicks = window.LocalPicksManager?.parseAndAdd\r\n                    ? await window.LocalPicksManager.parseAndAdd(content, selectedBookMeta.label)\r\n                    : window.processAndSavePicks\r\n                        ? await window.processAndSavePicks(content, false, selectedBookMeta)\r\n                        : null;\r\n                \r\n                if (!addedPicks) {\r\n                    throw new Error('Pick processing not available. Please refresh the page.');\r\n                }\r\n                \r\n                if (!addedPicks || addedPicks.length === 0) {\r\n                    throw new Error('No picks could be parsed from the input. Please check the format.');\r\n                }\r\n                \r\n                console.log(`\u2705 Successfully added ${addedPicks.length} picks`);\r\n                \r\n                // Success feedback\r\n                this.submitBtn.textContent = `Added ${addedPicks.length} picks!`;\r\n                this.submitBtn.style.background = '#00ffaa';\r\n                \r\n                setTimeout(() => {\r\n                    this.resetForm();\r\n                }, 2000);\r\n                \r\n                // Clear sportsbook selection after successful upload\r\n                if (this.sportsbookSelect) {\r\n                    this.sportsbookSelect.value = '';\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Upload failed:', error);\r\n                this.submitBtn.textContent = 'Error';\r\n                this.submitBtn.style.background = '#ff5570';\r\n                alert(error.message || 'Failed to process picks. Please try again.');\r\n                \r\n                setTimeout(() => {\r\n                    this.submitBtn.textContent = originalText;\r\n                    this.submitBtn.disabled = false;\r\n                    this.submitBtn.style.background = ''; // Reset to CSS default\r\n                }, 2000);\r\n            }\r\n        }\r\n        \r\n        readFileContent(file) {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => resolve(e.target.result);\r\n                reader.onerror = (e) => reject(new Error('Failed to read file'));\r\n                reader.readAsText(file);\r\n            });\r\n        }\r\n\r\n        resetForm() {\r\n            this.textArea.value = '';\r\n            this.selectedFile = null;\r\n            this.fileInput.value = '';\r\n            \r\n            const textEl = this.dropZone.querySelector('.drop-zone-text');\r\n            textEl.textContent = 'Drag & Drop or Paste Image';\r\n            textEl.style.color = '';\r\n            \r\n            this.submitBtn.textContent = 'Upload Picks';\r\n            this.submitBtn.disabled = false;\r\n            this.submitBtn.style.background = '';\r\n        }\r\n    }\r\n\r\n    // Initialize when DOM is ready\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        new ManualUploadManager();\r\n    });\r\n\r\n})();\r\n\n\n/* === assets/js/features/sportsbook-selection-handler.js === */\n/**\r\n * Sportsbook Selection Handler\r\n * Manages visual indication of selected sportsbook across the dashboard\r\n * Shows a \"selected\" state on the chosen sportsbook card without dropdown appearance\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const STORAGE_KEY = 'GBSV_SELECTED_SPORTSBOOK';\r\n    let selectedSportsbook = null;\r\n\r\n    /**\r\n     * Initialize sportsbook selection handlers\r\n     */\r\n    function init() {\r\n        // Load persisted selection\r\n        selectedSportsbook = localStorage.getItem(STORAGE_KEY);\r\n        \r\n        // Attach click handlers to sportsbook cards\r\n        if (document.readyState === 'loading') {\r\n            document.addEventListener('DOMContentLoaded', attachHandlers);\r\n        } else {\r\n            attachHandlers();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attach event handlers to sportsbook cards\r\n     */\r\n    function attachHandlers() {\r\n        // Get all sportsbook cards (excluding the upload card)\r\n        const cards = document.querySelectorAll('.sportsbook-card:not(.upload-picks-card)');\r\n        \r\n        cards.forEach(card => {\r\n            const bookKey = card.getAttribute('data-book');\r\n            \r\n            // Make card clickable\r\n            card.addEventListener('click', (e) => {\r\n                // Don't trigger on input/button clicks\r\n                if (e.target.closest('input') || e.target.closest('button')) {\r\n                    return;\r\n                }\r\n                \r\n                selectSportsbook(bookKey, card);\r\n            });\r\n        });\r\n        \r\n        // Apply initial selected state if one was persisted\r\n        if (selectedSportsbook) {\r\n            applySelectedState(selectedSportsbook);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select a sportsbook and update visual state\r\n     */\r\n    function selectSportsbook(bookKey, cardElement) {\r\n        if (!bookKey) return;\r\n        \r\n        // Persist selection\r\n        selectedSportsbook = bookKey;\r\n        localStorage.setItem(STORAGE_KEY, bookKey);\r\n        \r\n        // Update visual state on all cards\r\n        document.querySelectorAll('.sportsbook-card:not(.upload-picks-card)').forEach(card => {\r\n            if (card.getAttribute('data-book') === bookKey) {\r\n                card.classList.add('selected');\r\n            } else {\r\n                card.classList.remove('selected');\r\n            }\r\n        });\r\n        \r\n        // Update nav trigger to show selected state\r\n        updateNavTriggerState(bookKey);\r\n        \r\n        console.log('[SPORTSBOOK SELECTION]', `Selected: ${bookKey}`);\r\n    }\r\n\r\n    /**\r\n     * Apply selected state without triggering the full click flow\r\n     */\r\n    function applySelectedState(bookKey) {\r\n        const card = document.querySelector(`.sportsbook-card[data-book=\"${bookKey}\"]`);\r\n        if (card) {\r\n            selectSportsbook(bookKey, card);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update nav trigger to show selected state\r\n     */\r\n    function updateNavTriggerState(bookKey) {\r\n        const trigger = document.getElementById('sportsbooks-trigger');\r\n        if (!trigger) return;\r\n        \r\n        if (bookKey) {\r\n            trigger.classList.add('has-selection');\r\n        } else {\r\n            trigger.classList.remove('has-selection');\r\n        }\r\n        // Always keep trigger text as \"My Sports Books\"\r\n        trigger.textContent = 'My Sports Books';\r\n    }\r\n\r\n    /**\r\n     * Get the currently selected sportsbook\r\n     */\r\n    function getSelectedSportsbook() {\r\n        return selectedSportsbook;\r\n    }\r\n\r\n    /**\r\n     * Clear selection\r\n     */\r\n    function clearSelection() {\r\n        selectedSportsbook = null;\r\n        localStorage.removeItem(STORAGE_KEY);\r\n        \r\n        document.querySelectorAll('.sportsbook-card').forEach(card => {\r\n            card.classList.remove('selected');\r\n        });\r\n        \r\n        const trigger = document.getElementById('sportsbooks-trigger');\r\n        if (trigger) {\r\n            trigger.classList.remove('has-selection');\r\n            trigger.textContent = 'My Sports Books';\r\n        }\r\n    }\r\n\r\n    // Expose for external use\r\n    window.SportsBookSelectionHandler = {\r\n        getSelected: getSelectedSportsbook,\r\n        selectBook: selectSportsbook,\r\n        clearSelection: clearSelection\r\n    };\r\n\r\n    // Initialize on load\r\n    init();\r\n\r\n})();\r\n\n\n/* === assets/js/modules/zebra-stripes.js === */\n/**\r\n * @file zebra-stripes.js\r\n * @description Zebra stripe utility for alternating table row backgrounds with performance optimizations\r\n * @module ZebraStripes\r\n * @version 2.0.0\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Debouncing configuration\r\n    let zebraTimeout = null;\r\n    const DEBOUNCE_DELAY = 50; // milliseconds\r\n\r\n    /**\r\n     * Checks if a table row is visible for zebra striping purposes\r\n     * @param {HTMLTableRowElement} row - Table row element\r\n     * @returns {boolean} True if row should be counted for zebra striping\r\n     */\r\n    function isRowVisibleForZebra(row) {\r\n        if (!row) return false;\r\n        if (row.style.display === 'none') return false;\r\n        if (row.hasAttribute('hidden') || row.getAttribute('aria-hidden') === 'true') return false;\r\n        if (row.classList.contains('is-hidden') || row.classList.contains('hidden')) return false;\r\n        if (typeof window !== 'undefined' && typeof window.getComputedStyle === 'function') {\r\n            const computed = window.getComputedStyle(row);\r\n            if (!computed) return false;\r\n            if (computed.display === 'none' || computed.visibility === 'hidden') return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Gets direct child TR elements from a tbody\r\n     * @param {HTMLTableSectionElement} tbody - Table body element\r\n     * @returns {HTMLTableRowElement[]} Array of TR elements\r\n     */\r\n    function getDirectChildRows(tbody) {\r\n        if (!tbody) return [];\r\n        return Array.from(tbody.children).filter(node => node && node.tagName === 'TR');\r\n    }\r\n\r\n    /**\r\n     * Gets parent rows only (excludes parlay-legs rows)\r\n     * @param {HTMLTableSectionElement} tbody - Table body element\r\n     * @returns {HTMLTableRowElement[]} Array of parent TR elements\r\n     */\r\n    function getParentRowsOnly(tbody) {\r\n        return getDirectChildRows(tbody).filter(row => !row.classList.contains('parlay-legs'));\r\n    }\r\n\r\n    /**\r\n     * Finds the parlay legs row associated with a parent parlay row\r\n     * @param {HTMLTableRowElement} parentRow - Parent parlay row\r\n     * @returns {HTMLTableRowElement|null} Associated legs row or null\r\n     */\r\n    function findParlayLegsRow(parentRow) {\r\n        if (!parentRow) return null;\r\n        const rowId = parentRow.getAttribute('data-row-id');\r\n        if (rowId) {\r\n            const byId = document.querySelector(`tr.parlay-legs[data-parent-id=\"${rowId}\"]`);\r\n            if (byId) return byId;\r\n        }\r\n        const nextSibling = parentRow.nextElementSibling;\r\n        if (nextSibling && nextSibling.classList.contains('parlay-legs')) {\r\n            return nextSibling;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // Cache for tbody element to avoid repeated DOM queries\r\n    let cachedTbody = null;\r\n    let lastTbodyCheck = 0;\r\n    const TBODY_CACHE_TIME = 1000; // milliseconds\r\n\r\n    /**\r\n     * Applies zebra striping to the picks table\r\n     * Alternates odd/even classes on visible rows\r\n     * @param {HTMLTableSectionElement} [forceTbody] - Optional tbody to use instead of cached\r\n     * @returns {number} Number of visible rows striped\r\n     */\r\n    function applyPicksTableZebraStripes(forceTbody) {\r\n        // Use provided tbody or get cached/fresh tbody\r\n        let tbody = forceTbody;\r\n        if (!tbody) {\r\n            const now = Date.now();\r\n            if (!cachedTbody || now - lastTbodyCheck > TBODY_CACHE_TIME) {\r\n                cachedTbody = document.getElementById('picks-tbody') || document.querySelector('.picks-table tbody');\r\n                lastTbodyCheck = now;\r\n            }\r\n            tbody = cachedTbody;\r\n        }\r\n\r\n        if (!tbody) return 0;\r\n\r\n        const zebraClasses = ['zebra-row', 'zebra-odd', 'zebra-even'];\r\n        \r\n        // Clear existing zebra classes\r\n        tbody.querySelectorAll('.zebra-row, .zebra-odd, .zebra-even').forEach(row => {\r\n            zebraClasses.forEach(cls => row.classList.remove(cls));\r\n        });\r\n\r\n        // Get parent rows (not parlay legs)\r\n        const parentRows = getDirectChildRows(tbody).filter(row => {\r\n            if (!row) return false;\r\n            if (row.classList.contains('parlay-legs')) return false;\r\n            if (row.dataset && row.dataset.zebraIgnore === 'true') return false;\r\n            return true;\r\n        });\r\n\r\n        /**\r\n         * Applies zebra stripes to nested leg table rows\r\n         * @param {HTMLTableRowElement} legsRow - Parlay legs container row\r\n         */\r\n        const applyLegTableStripes = (legsRow) => {\r\n            if (!legsRow) return;\r\n            // Try tbody tr first, fall back to filtering out thead rows\r\n            let legRows = legsRow.querySelectorAll('.compact-leg-table tbody tr');\r\n            if (!legRows.length) {\r\n                // Fallback: get all tr and filter out any in thead\r\n                const allRows = legsRow.querySelectorAll('.compact-leg-table tr');\r\n                legRows = Array.from(allRows).filter(tr => !tr.closest('thead'));\r\n            }\r\n            if (!legRows.length) return;\r\n            legRows.forEach((legRow, legIndex) => {\r\n                zebraClasses.forEach(cls => legRow.classList.remove(cls));\r\n                const legClass = legIndex % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n                legRow.classList.add('zebra-row', legClass);\r\n            });\r\n        };\r\n\r\n        let visibleIndex = 0;\r\n        parentRows.forEach(row => {\r\n            if (!isRowVisibleForZebra(row)) {\r\n                return;\r\n            }\r\n\r\n            const zebraClass = visibleIndex % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n            row.classList.add('zebra-row', zebraClass);\r\n            visibleIndex += 1;\r\n\r\n            if (row.classList.contains('parlay-row')) {\r\n                const legsRow = findParlayLegsRow(row);\r\n                if (legsRow) {\r\n                    const legsVisible = isRowVisibleForZebra(legsRow);\r\n                    \r\n                    // Only apply zebra classes if the legs row is visible\r\n                    if (legsVisible) {\r\n                        const legsZebraClass = visibleIndex % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n                        legsRow.classList.add('zebra-row', legsZebraClass);\r\n                        applyLegTableStripes(legsRow);\r\n                        visibleIndex += 1;\r\n                    } else {\r\n                        // Hidden legs inherit parent's stripe for when they become visible\r\n                        legsRow.classList.add('zebra-row', zebraClass);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Return count of visible rows striped for diagnostics\r\n        return visibleIndex;\r\n    }\r\n\r\n    /**\r\n     * Debounced version of applyPicksTableZebraStripes\r\n     * Prevents excessive recalculation during rapid DOM changes\r\n     * @param {number} [customDelay] - Optional custom delay in milliseconds\r\n     */\r\n    function debouncedApplyZebraStripes(customDelay) {\r\n        const delay = customDelay || DEBOUNCE_DELAY;\r\n        clearTimeout(zebraTimeout);\r\n        zebraTimeout = setTimeout(() => {\r\n            applyPicksTableZebraStripes();\r\n        }, delay);\r\n    }\r\n\r\n    /**\r\n     * Immediately applies zebra stripes (cancels any pending debounced calls)\r\n     */\r\n    function applyZebraStripesNow() {\r\n        clearTimeout(zebraTimeout);\r\n        applyPicksTableZebraStripes();\r\n    }\r\n\r\n    // Export to window for cross-script access\r\n    window.ZebraStripes = {\r\n        isRowVisibleForZebra,\r\n        getDirectChildRows,\r\n        getParentRowsOnly,\r\n        findParlayLegsRow,\r\n        applyPicksTableZebraStripes,\r\n        debouncedApply: debouncedApplyZebraStripes,\r\n        applyNow: applyZebraStripesNow,\r\n        DEBOUNCE_DELAY\r\n    };\r\n\r\n    // Also expose commonly used functions directly\r\n    window.__gbsvApplyZebraStripes = applyPicksTableZebraStripes;\r\n    window.getDirectChildRows = getDirectChildRows;\r\n    window.getParentRowsOnly = getParentRowsOnly;\r\n    window.findParlayLegsRow = findParlayLegsRow;\r\n\r\n    // Apply initial zebra stripes on load\r\n    if (typeof document !== 'undefined') {\r\n        if (document.readyState === 'loading') {\r\n            document.addEventListener('DOMContentLoaded', applyPicksTableZebraStripes);\r\n        } else {\r\n            try {\r\n                applyPicksTableZebraStripes();\r\n            } catch (_) {\r\n                // no-op\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log('\u2705 zebra-stripes.js loaded');\r\n})();\n\n/* === assets/js/modules/picks-dom-utils.js === */\n/**\r\n * Picks DOM Utilities Module\r\n * Common DOM manipulation utilities and helper functions\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    // Shared column index cache across all modules\r\n    const _columnIndexCache = new WeakMap();\r\n\r\n    const DOMUtils = {\r\n        /**\r\n         * Get the 1-based column index for a given column key by reading the table header.\r\n         * Shared utility to avoid duplication in filter/sort managers.\r\n         * @param {HTMLElement} row - A table row element\r\n         * @param {string} columnKey - The data-sort or data-filter attribute value\r\n         * @returns {number|null} 1-based column index or null if not found\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            try {\r\n                const table = row?.closest?.('table');\r\n                if (!table) return null;\r\n\r\n                let cacheForTable = _columnIndexCache.get(table);\r\n                if (!cacheForTable) {\r\n                    cacheForTable = new Map();\r\n                    _columnIndexCache.set(table, cacheForTable);\r\n                }\r\n\r\n                if (cacheForTable.has(columnKey)) {\r\n                    return cacheForTable.get(columnKey);\r\n                }\r\n\r\n                const th = table.querySelector(`thead th[data-sort=\"${columnKey}\"]`) ||\r\n                           table.querySelector(`thead th[data-filter=\"${columnKey}\"]`);\r\n                if (!th) {\r\n                    cacheForTable.set(columnKey, null);\r\n                    return null;\r\n                }\r\n\r\n                const rowEl = th.closest('tr');\r\n                const ths = rowEl ? Array.from(rowEl.children).filter(el => el.tagName === 'TH') : [];\r\n                const idx = ths.indexOf(th);\r\n                const oneBased = idx >= 0 ? idx + 1 : null;\r\n                cacheForTable.set(columnKey, oneBased);\r\n                return oneBased;\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get a table cell by column key or fallback index\r\n         * @param {HTMLElement} row - A table row element\r\n         * @param {string} columnKey - The data-sort or data-filter attribute value\r\n         * @param {number} fallbackIndex - Fallback 1-based index if column not found\r\n         * @returns {HTMLElement|null} The table cell or null\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            const idx = this.getColumnIndex(row, columnKey) || fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        /**\r\n         * Clear the column index cache for a specific table or all tables\r\n         * @param {HTMLElement} table - Optional table to clear cache for\r\n         */\r\n        clearColumnIndexCache(table) {\r\n            if (table) {\r\n                _columnIndexCache.delete(table);\r\n            }\r\n            // Note: WeakMap doesn't support clear(), but entries are garbage collected\r\n        },\r\n\r\n        /**\r\n         * Escape HTML to prevent XSS\r\n         */\r\n        escapeHtml(value) {\r\n            if (!value) return '';\r\n            const div = document.createElement('div');\r\n            div.textContent = value;\r\n            return div.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Format currency value for display\r\n         */\r\n        formatCurrency(value) {\r\n            if (value == null || isNaN(value)) return '-';\r\n\r\n            const num = parseFloat(value);\r\n            const formatted = new Intl.NumberFormat('en-US', {\r\n                style: 'currency',\r\n                currency: 'USD',\r\n                minimumFractionDigits: 0,\r\n                maximumFractionDigits: 0\r\n            }).format(Math.abs(num));\r\n\r\n            return num < 0 ? `(${formatted})` : formatted;\r\n        },\r\n\r\n        /**\r\n         * Format currency for filter chips (abbreviated)\r\n         */\r\n        formatCurrencyForChip(value) {\r\n            if (!value) return '';\r\n            const num = parseFloat(value);\r\n\r\n            if (num >= 1000) {\r\n                return `$${(num / 1000).toFixed(1)}k`;\r\n            }\r\n            return `$${num}`;\r\n        },\r\n\r\n        /**\r\n         * Format date with weekday\r\n         */\r\n        formatDateWithDay(dateText) {\r\n            if (!dateText) return '';\r\n\r\n            // If already has weekday, return as is\r\n            if (/^(mon|tue|wed|thu|fri|sat|sun)\\s+/i.test(dateText)) {\r\n                return dateText;\r\n            }\r\n\r\n            // Add weekday\r\n            const weekday = this.getWeekdayName(dateText);\r\n            return weekday ? `${weekday} ${dateText}` : dateText;\r\n        },\r\n\r\n        /**\r\n         * Get weekday name from date string\r\n         */\r\n        getWeekdayName(dateText) {\r\n            if (!dateText) return '';\r\n\r\n            // Parse MM/DD format\r\n            const match = dateText.match(/(\\d{1,2})\\/(\\d{1,2})/);\r\n            if (!match) return '';\r\n\r\n            const month = parseInt(match[1], 10) - 1;\r\n            const day = parseInt(match[2], 10);\r\n            const year = new Date().getFullYear();\r\n\r\n            const date = new Date(year, month, day);\r\n            const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n            return weekdays[date.getDay()];\r\n        },\r\n\r\n        /**\r\n         * Normalize status to standard values (win, loss, push, void, pending, live)\r\n         */\r\n        normalizeStatus(status) {\r\n            if (!status) return 'pending';\r\n\r\n            const lower = status.toString().toLowerCase().trim();\r\n            const statusMap = {\r\n                'win': 'win',\r\n                'won': 'win',\r\n                'winner': 'win',\r\n                'loss': 'loss',\r\n                'lost': 'loss',\r\n                'lose': 'loss',\r\n                'loser': 'loss',\r\n                'push': 'push',\r\n                'tie': 'push',\r\n                'void': 'void',\r\n                'voided': 'void',\r\n                'cancelled': 'void',\r\n                'pending': 'pending',\r\n                'open': 'pending',\r\n                'live': 'live',\r\n                'active': 'live',\r\n                'in-progress': 'live',\r\n                'in progress': 'live'\r\n            };\r\n\r\n            return statusMap[lower] || 'pending';\r\n        },\r\n\r\n        /**\r\n         * Format badge status text\r\n         */\r\n        formatBadgeStatus(status) {\r\n            if (!status) return '';\r\n\r\n            const normalized = this.normalizeStatus(status);\r\n            return normalized.toUpperCase();\r\n        },\r\n\r\n        /**\r\n         * Format team record value\r\n         */\r\n        formatTeamRecordValue(value) {\r\n            if (!value) return '';\r\n            // Ensure format is W-L\r\n            return value.toString().replace(/[^\\d-]/g, '');\r\n        },\r\n\r\n        /**\r\n         * Format bet type label\r\n         */\r\n        formatBetTypeLabel(type) {\r\n            if (!type) return '';\r\n\r\n            const typeMap = {\r\n                'spread': 'Spread',\r\n                'total': 'Total',\r\n                'moneyline': 'Moneyline',\r\n                'ml': 'Moneyline',\r\n                'parlay': 'Parlay',\r\n                'prop': 'Prop',\r\n                'player': 'Player Prop'\r\n            };\r\n\r\n            return typeMap[type.toLowerCase()] || type;\r\n        },\r\n\r\n        /**\r\n         * Format subtype label\r\n         */\r\n        formatSubtypeLabel(subtype) {\r\n            if (!subtype) return '';\r\n\r\n            const subtypeMap = {\r\n                '1h': '1st Half',\r\n                '2h': '2nd Half',\r\n                '1q': '1st Quarter',\r\n                '2q': '2nd Quarter',\r\n                '3q': '3rd Quarter',\r\n                '4q': '4th Quarter',\r\n                'game': 'Full Game',\r\n                'full': 'Full Game'\r\n            };\r\n\r\n            return subtypeMap[subtype.toLowerCase()] || subtype;\r\n        },\r\n\r\n        /**\r\n         * Format segment label\r\n         */\r\n        formatSegmentLabel(segment) {\r\n            if (!segment) return '';\r\n\r\n            const segmentMap = {\r\n                '1h': '1st Half',\r\n                '2h': '2nd Half',\r\n                'game': 'Full Game',\r\n                'full': 'Full Game',\r\n                'live': 'Live',\r\n                'pregame': 'Pre-Game'\r\n            };\r\n\r\n            return segmentMap[segment.toLowerCase()] || segment;\r\n        },\r\n\r\n        /**\r\n         * Create element with attributes\r\n         */\r\n        createElement(tag, attributes = {}, children = []) {\r\n            const element = document.createElement(tag);\r\n\r\n            // Set attributes\r\n            Object.entries(attributes).forEach(([key, value]) => {\r\n                if (key === 'className') {\r\n                    element.className = value;\r\n                } else if (key === 'innerHTML') {\r\n                    element.innerHTML = value;\r\n                } else if (key === 'textContent') {\r\n                    element.textContent = value;\r\n                } else if (key.startsWith('data-')) {\r\n                    element.setAttribute(key, value);\r\n                } else {\r\n                    element[key] = value;\r\n                }\r\n            });\r\n\r\n            // Add children\r\n            children.forEach(child => {\r\n                if (typeof child === 'string') {\r\n                    element.appendChild(document.createTextNode(child));\r\n                } else if (child instanceof Element) {\r\n                    element.appendChild(child);\r\n                }\r\n            });\r\n\r\n            return element;\r\n        },\r\n\r\n        /**\r\n         * Position dropdown relative to trigger button\r\n         */\r\n        positionDropdown(button, dropdown) {\r\n            if (!button || !dropdown) return;\r\n\r\n            const btnRect = button.getBoundingClientRect();\r\n            const dropdownHeight = dropdown.offsetHeight;\r\n            const viewportHeight = window.innerHeight;\r\n\r\n            // Reset positioning\r\n            dropdown.style.position = 'absolute';\r\n            dropdown.style.left = `${btnRect.left}px`;\r\n\r\n            // Check if dropdown would go off bottom of viewport\r\n            if (btnRect.bottom + dropdownHeight > viewportHeight && btnRect.top > dropdownHeight) {\r\n                // Position above button\r\n                dropdown.style.top = `${btnRect.top - dropdownHeight}px`;\r\n                dropdown.classList.add('dropdown-above');\r\n            } else {\r\n                // Position below button\r\n                dropdown.style.top = `${btnRect.bottom}px`;\r\n                dropdown.classList.remove('dropdown-above');\r\n            }\r\n\r\n            // Check horizontal overflow\r\n            const dropdownRect = dropdown.getBoundingClientRect();\r\n            if (dropdownRect.right > window.innerWidth) {\r\n                dropdown.style.left = `${window.innerWidth - dropdown.offsetWidth - 10}px`;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Close all dropdowns\r\n         */\r\n        closeAllDropdowns() {\r\n            document.querySelectorAll('.filter-dropdown.show').forEach(dropdown => {\r\n                dropdown.classList.remove('show');\r\n\r\n                // Find associated button and update aria\r\n                const btnId = dropdown.getAttribute('aria-labelledby');\r\n                if (btnId) {\r\n                    const btn = document.getElementById(btnId);\r\n                    if (btn) {\r\n                        btn.setAttribute('aria-expanded', 'false');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Extract abbreviation from team name\r\n         */\r\n        extractAbbreviation(name) {\r\n            if (!name) return '';\r\n\r\n            // Remove common suffixes\r\n            const cleaned = name\r\n                .replace(/(fc|united|city|town|athletic|rovers)$/i, '')\r\n                .trim();\r\n\r\n            // Split and get first letters\r\n            const words = cleaned.split(/\\s+/);\r\n\r\n            if (words.length === 1) {\r\n                // Single word - take first 3 letters\r\n                return words[0].substring(0, 3).toUpperCase();\r\n            } else {\r\n                // Multiple words - take first letter of each\r\n                return words\r\n                    .map(w => w.charAt(0))\r\n                    .join('')\r\n                    .substring(0, 3)\r\n                    .toUpperCase();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Format team name for display\r\n         */\r\n        formatTeamName(name) {\r\n            if (!name) return '';\r\n\r\n            // Title case\r\n            return name.replace(/\\w\\S*/g, txt =>\r\n                txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Debounce function for performance\r\n         */\r\n        debounce(func, wait) {\r\n            let timeout;\r\n            return function executedFunction(...args) {\r\n                const later = () => {\r\n                    clearTimeout(timeout);\r\n                    func(...args);\r\n                };\r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(later, wait);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Throttle function for performance\r\n         */\r\n        throttle(func, limit) {\r\n            let inThrottle;\r\n            return function(...args) {\r\n                if (!inThrottle) {\r\n                    func.apply(this, args);\r\n                    inThrottle = true;\r\n                    setTimeout(() => inThrottle = false, limit);\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check if element is visible\r\n         */\r\n        isElementVisible(element) {\r\n            if (!element) return false;\r\n\r\n            const rect = element.getBoundingClientRect();\r\n            return (\r\n                rect.top >= 0 &&\r\n                rect.left >= 0 &&\r\n                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n                rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Scroll element into view smoothly\r\n         */\r\n        scrollIntoViewSmoothly(element, options = {}) {\r\n            if (!element) return;\r\n\r\n            const defaultOptions = {\r\n                behavior: 'smooth',\r\n                block: 'center',\r\n                inline: 'nearest'\r\n            };\r\n\r\n            element.scrollIntoView({ ...defaultOptions, ...options });\r\n        },\r\n\r\n        /**\r\n         * Get text content safely\r\n         */\r\n        getTextContent(element, selector) {\r\n            if (!element) return '';\r\n\r\n            if (selector) {\r\n                const child = element.querySelector(selector);\r\n                return child ? child.textContent.trim() : '';\r\n            }\r\n\r\n            return element.textContent.trim();\r\n        },\r\n\r\n        /**\r\n         * Set loading state on element\r\n         */\r\n        setLoadingState(element, isLoading, text = 'Loading...') {\r\n            if (!element) return;\r\n\r\n            if (isLoading) {\r\n                element.classList.add('loading');\r\n                element.setAttribute('aria-busy', 'true');\r\n\r\n                if (element.tagName === 'BUTTON') {\r\n                    element.disabled = true;\r\n                    element.setAttribute('data-original-text', element.textContent);\r\n                    element.textContent = text;\r\n                }\r\n            } else {\r\n                element.classList.remove('loading');\r\n                element.setAttribute('aria-busy', 'false');\r\n\r\n                if (element.tagName === 'BUTTON') {\r\n                    element.disabled = false;\r\n                    const originalText = element.getAttribute('data-original-text');\r\n                    if (originalText) {\r\n                        element.textContent = originalText;\r\n                        element.removeAttribute('data-original-text');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Parse range string (e.g., \"100-500\")\r\n         */\r\n        parseRange(rangeStr) {\r\n            if (!rangeStr) return { min: null, max: null };\r\n\r\n            const parts = rangeStr.split('-').map(p => parseFloat(p.trim()));\r\n            return {\r\n                min: parts[0] || null,\r\n                max: parts[1] || parts[0] || null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Format range for display\r\n         */\r\n        formatRangeLabel(range) {\r\n            if (!range) return '';\r\n\r\n            if (typeof range === 'string') {\r\n                const { min, max } = this.parseRange(range);\r\n                if (min === max || !max) {\r\n                    return this.formatCurrency(min);\r\n                }\r\n                return `${this.formatCurrency(min)} - ${this.formatCurrency(max)}`;\r\n            }\r\n\r\n            return range.toString();\r\n        },\r\n\r\n        /**\r\n         * Add event listener with cleanup\r\n         */\r\n        addEventListenerWithCleanup(element, event, handler) {\r\n            if (!element) return null;\r\n\r\n            element.addEventListener(event, handler);\r\n\r\n            // Return cleanup function\r\n            return () => element.removeEventListener(event, handler);\r\n        },\r\n\r\n        /**\r\n         * Batch DOM updates for performance\r\n         */\r\n        batchDOMUpdates(updates) {\r\n            requestAnimationFrame(() => {\r\n                updates.forEach(update => update());\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Create document fragment for multiple elements\r\n         */\r\n        createFragment(elements) {\r\n            const fragment = document.createDocumentFragment();\r\n            elements.forEach(el => {\r\n                if (el) fragment.appendChild(el);\r\n            });\r\n            return fragment;\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksDOMUtils = DOMUtils;\r\n\r\n})();\n\n/* === assets/js/modules/picks-state-manager.js === */\n/**\r\n * Picks State Manager Module\r\n * Centralized state management for the active picks table\r\n * Handles filter state, sort state, and state persistence\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    // Initialize the global state object if not already present\r\n    if (typeof window.tableState === 'undefined') {\r\n        window.tableState = {\r\n            filters: {\r\n                date: {\r\n                    start: null,\r\n                    end: null,\r\n                    selectedDates: null,\r\n                    selectedTimes: null,\r\n                    selectedBooks: null\r\n                },\r\n                matchup: {\r\n                    league: '',\r\n                    selectedLeagues: null,\r\n                    selectedTeams: null,\r\n                    ticketType: 'all'\r\n                },\r\n                pick: {\r\n                    betType: '',\r\n                    subtype: '',\r\n                    segment: '',\r\n                    selectedSegments: null\r\n                },\r\n                risk: {\r\n                    min: null,\r\n                    max: null,\r\n                    selectedRiskRanges: [],\r\n                    selectedWinRanges: []\r\n                },\r\n                status: []\r\n            },\r\n            sort: {\r\n                column: null,\r\n                direction: 'asc'\r\n            },\r\n            expandedParlayIds: []\r\n        };\r\n    }\r\n\r\n    // State shape validators\r\n    const StateShapeValidators = {\r\n        /**\r\n         * Creates a new date filter state object with all filter properties\r\n         */\r\n        createDateFilterState() {\r\n            return {\r\n                start: null,\r\n                end: null,\r\n                selectedDates: null,\r\n                selectedTimes: null,\r\n                selectedBooks: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new matchup filter state object\r\n         */\r\n        createMatchupFilterState() {\r\n            return {\r\n                league: '',\r\n                selectedLeagues: null,\r\n                selectedTeams: null,\r\n                ticketType: 'all'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new risk filter state object\r\n         */\r\n        createRiskFilterState() {\r\n            return {\r\n                min: null,\r\n                max: null,\r\n                selectedRiskRanges: [],\r\n                selectedWinRanges: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new pick filter state object\r\n         */\r\n        createPickFilterState() {\r\n            return {\r\n                betType: '',\r\n                subtype: '',\r\n                segment: '',\r\n                selectedSegments: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Ensures date filter state has the correct shape\r\n         */\r\n        ensureDateFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.date || typeof state.filters.date !== 'object') {\r\n                state.filters.date = this.createDateFilterState();\r\n                return;\r\n            }\r\n            const dateFilter = state.filters.date;\r\n            if (!('start' in dateFilter)) dateFilter.start = null;\r\n            if (!('end' in dateFilter)) dateFilter.end = null;\r\n            if (!('selectedDates' in dateFilter)) dateFilter.selectedDates = null;\r\n            if (!('selectedTimes' in dateFilter)) dateFilter.selectedTimes = null;\r\n            if (!('selectedBooks' in dateFilter)) dateFilter.selectedBooks = null;\r\n        },\r\n\r\n        /**\r\n         * Ensures matchup filter state has the correct shape\r\n         */\r\n        ensureMatchupFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.matchup || typeof state.filters.matchup !== 'object') {\r\n                state.filters.matchup = this.createMatchupFilterState();\r\n                return;\r\n            }\r\n            const matchupFilter = state.filters.matchup;\r\n            if (!('ticketType' in matchupFilter)) matchupFilter.ticketType = 'all';\r\n            if (!('selectedTeams' in matchupFilter)) matchupFilter.selectedTeams = null;\r\n            if (!('league' in matchupFilter)) matchupFilter.league = '';\r\n        },\r\n\r\n        /**\r\n         * Ensures risk filter state has the correct shape\r\n         */\r\n        ensureRiskFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.risk || typeof state.filters.risk !== 'object') {\r\n                state.filters.risk = this.createRiskFilterState();\r\n                return;\r\n            }\r\n            const riskFilter = state.filters.risk;\r\n            if (!('min' in riskFilter)) riskFilter.min = null;\r\n            if (!('max' in riskFilter)) riskFilter.max = null;\r\n            if (!Array.isArray(riskFilter.selectedRiskRanges)) riskFilter.selectedRiskRanges = [];\r\n            if (!Array.isArray(riskFilter.selectedWinRanges)) riskFilter.selectedWinRanges = [];\r\n        },\r\n\r\n        /**\r\n         * Ensures pick filter state has the correct shape\r\n         */\r\n        ensurePickFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.pick) {\r\n                state.filters.pick = this.createPickFilterState();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Ensures all filter states have correct shapes\r\n         */\r\n        ensureAllFilterShapes() {\r\n            this.ensureDateFilterShape();\r\n            this.ensureMatchupFilterShape();\r\n            this.ensureRiskFilterShape();\r\n            this.ensurePickFilterShape();\r\n        }\r\n    };\r\n\r\n    // State management functions\r\n    const StateManager = {\r\n        /**\r\n         * Get the current table state\r\n         */\r\n        getState() {\r\n            return window.tableState;\r\n        },\r\n\r\n        /**\r\n         * Get a specific filter state\r\n         */\r\n        getFilter(filterType) {\r\n            return window.tableState.filters[filterType];\r\n        },\r\n\r\n        /**\r\n         * Update a specific filter\r\n         */\r\n        updateFilter(filterType, updates) {\r\n            if (!window.tableState.filters[filterType]) {\r\n                console.warn(`Filter type ${filterType} does not exist`);\r\n                return;\r\n            }\r\n            Object.assign(window.tableState.filters[filterType], updates);\r\n        },\r\n\r\n        /**\r\n         * Reset a specific filter to its default state\r\n         */\r\n        resetFilter(filterType) {\r\n            switch(filterType) {\r\n                case 'date':\r\n                    window.tableState.filters.date = StateShapeValidators.createDateFilterState();\r\n                    break;\r\n                case 'matchup':\r\n                    window.tableState.filters.matchup = StateShapeValidators.createMatchupFilterState();\r\n                    break;\r\n                case 'pick':\r\n                    window.tableState.filters.pick = StateShapeValidators.createPickFilterState();\r\n                    break;\r\n                case 'risk':\r\n                    window.tableState.filters.risk = StateShapeValidators.createRiskFilterState();\r\n                    break;\r\n                case 'status':\r\n                    window.tableState.filters.status = [];\r\n                    break;\r\n                case 'league':\r\n                    // Reset league-specific filters only\r\n                    window.tableState.filters.matchup.league = '';\r\n                    window.tableState.filters.matchup.selectedLeagues = null;\r\n                    break;\r\n                case 'segment':\r\n                    // Reset segment-specific filters only\r\n                    window.tableState.filters.pick.segment = '';\r\n                    window.tableState.filters.pick.selectedSegments = null;\r\n                    break;\r\n                default:\r\n                    console.warn(`Unknown filter type: ${filterType}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset all filters\r\n         */\r\n        resetAllFilters() {\r\n            window.tableState.filters = {\r\n                date: StateShapeValidators.createDateFilterState(),\r\n                matchup: StateShapeValidators.createMatchupFilterState(),\r\n                pick: StateShapeValidators.createPickFilterState(),\r\n                risk: StateShapeValidators.createRiskFilterState(),\r\n                status: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get expanded parlay IDs\r\n         */\r\n        getExpandedParlayIds() {\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n            return window.tableState.expandedParlayIds;\r\n        },\r\n\r\n        /**\r\n         * Set parlay expansion state\r\n         */\r\n        setParlayExpanded(parlayId, isExpanded) {\r\n            if (!parlayId) return;\r\n\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n\r\n            const index = window.tableState.expandedParlayIds.indexOf(parlayId);\r\n\r\n            if (isExpanded && index === -1) {\r\n                window.tableState.expandedParlayIds.push(parlayId);\r\n            } else if (!isExpanded && index !== -1) {\r\n                window.tableState.expandedParlayIds.splice(index, 1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if parlay is expanded\r\n         */\r\n        isParlayExpanded(parlayId) {\r\n            if (!parlayId || !Array.isArray(window.tableState.expandedParlayIds)) {\r\n                return false;\r\n            }\r\n            return window.tableState.expandedParlayIds.includes(parlayId);\r\n        },\r\n\r\n        /**\r\n         * Toggle parlay expansion state\r\n         */\r\n        toggleParlayExpanded(parlayId) {\r\n            const isCurrentlyExpanded = this.isParlayExpanded(parlayId);\r\n            this.setParlayExpanded(parlayId, !isCurrentlyExpanded);\r\n            return !isCurrentlyExpanded;\r\n        },\r\n\r\n        /**\r\n         * Reset expansion state\r\n         */\r\n        resetExpansionState() {\r\n            window.tableState.expandedParlayIds = [];\r\n        },\r\n\r\n        /**\r\n         * Get sort state\r\n         */\r\n        getSortState() {\r\n            return window.tableState.sort;\r\n        },\r\n\r\n        /**\r\n         * Update sort state\r\n         */\r\n        updateSort(column, direction) {\r\n            window.tableState.sort = {\r\n                column: column,\r\n                direction: direction || 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Reset sort state\r\n         */\r\n        resetSort() {\r\n            window.tableState.sort = {\r\n                column: null,\r\n                direction: 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check if any filters are active\r\n         */\r\n        hasActiveFilters() {\r\n            const filters = window.tableState.filters;\r\n\r\n            // Check date filters\r\n            if (filters.date.selectedDates || filters.date.selectedTimes || filters.date.selectedBooks ||\r\n                filters.date.start || filters.date.end) {\r\n                return true;\r\n            }\r\n\r\n            // Check matchup/league filters\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues ||\r\n                filters.matchup.selectedTeams || filters.matchup.ticketType !== 'all') {\r\n                return true;\r\n            }\r\n\r\n            // Check pick/segment filters\r\n            if (filters.pick.betType || filters.pick.subtype || filters.pick.segment ||\r\n                filters.pick.selectedSegments) {\r\n                return true;\r\n            }\r\n\r\n            // Check risk filters\r\n            if (filters.risk.min !== null || filters.risk.max !== null ||\r\n                filters.risk.selectedRiskRanges.length > 0 ||\r\n                filters.risk.selectedWinRanges.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            // Check status filters\r\n            if (filters.status.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get active filter count\r\n         */\r\n        getActiveFilterCount() {\r\n            let count = 0;\r\n            const filters = window.tableState.filters;\r\n\r\n            if (filters.date.selectedDates) count++;\r\n            if (filters.date.selectedTimes) count++;\r\n            if (filters.date.selectedBooks) count++;\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues) count++;\r\n            if (filters.matchup.selectedTeams) count++;\r\n            if (filters.pick.betType || filters.pick.subtype) count++;\r\n            if (filters.pick.segment || filters.pick.selectedSegments) count++;\r\n            if (filters.risk.selectedRiskRanges.length > 0) count++;\r\n            if (filters.risk.selectedWinRanges.length > 0) count++;\r\n            if (filters.status.length > 0) count++;\r\n\r\n            return count;\r\n        },\r\n\r\n        /**\r\n         * Initialize state\r\n         */\r\n        init() {\r\n            StateShapeValidators.ensureAllFilterShapes();\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksStateManager = {\r\n        ...StateManager,\r\n        validators: StateShapeValidators,\r\n        // Expose the tableState directly for backward compatibility\r\n        state: window.tableState\r\n    };\r\n\r\n    // Initialize on load\r\n    StateManager.init();\r\n\r\n})();\n\n/* === assets/js/modules/picks-data-processor.js === */\n/**\r\n * Picks Data Processor Module\r\n * Handles data collection, processing, and facet extraction from table\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const DataProcessor = {\r\n        _headerIndexCache: null,\r\n        _headerIndexCacheTable: null,\r\n\r\n        getPicksTable() {\r\n            return document.getElementById('picks-table');\r\n        },\r\n\r\n        /**\r\n         * Get 1-based column index by reading the table header for this page.\r\n         * Uses data-sort or data-filter on <th>.\r\n         */\r\n        getColumnIndex(columnKey) {\r\n            try {\r\n                const table = this.getPicksTable();\r\n                if (!table) return null;\r\n\r\n                if (this._headerIndexCacheTable !== table) {\r\n                    this._headerIndexCacheTable = table;\r\n                    this._headerIndexCache = new Map();\r\n                }\r\n\r\n                if (this._headerIndexCache.has(columnKey)) {\r\n                    return this._headerIndexCache.get(columnKey);\r\n                }\r\n\r\n                const th = table.querySelector(`thead th[data-sort=\"${columnKey}\"]`) ||\r\n                           table.querySelector(`thead th[data-filter=\"${columnKey}\"]`);\r\n                if (!th) {\r\n                    this._headerIndexCache.set(columnKey, null);\r\n                    return null;\r\n                }\r\n\r\n                const tr = th.closest('tr');\r\n                const ths = tr ? Array.from(tr.children).filter(el => el.tagName === 'TH') : [];\r\n                const idx = ths.indexOf(th);\r\n                const oneBased = idx >= 0 ? idx + 1 : null;\r\n                this._headerIndexCache.set(columnKey, oneBased);\r\n                return oneBased;\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            const idx = this.getColumnIndex(columnKey) || fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        /**\r\n         * Collect all unique date/time/book values from table\r\n         */\r\n        collectDateFilterFacets() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return { dates: new Set(), times: new Set(), books: new Set() };\r\n\r\n            const facets = {\r\n                dates: new Set(),\r\n                times: new Set(),\r\n                books: new Set()\r\n            };\r\n\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n            rows.forEach(row => {\r\n                const dateCell = row.querySelector('td:first-child');\r\n                if (!dateCell) return;\r\n\r\n                // Extract date\r\n                const dateEl = dateCell.querySelector('.cell-date');\r\n                if (dateEl) {\r\n                    const dateText = dateEl.textContent.trim();\r\n                    if (dateText) {\r\n                        // Add with weekday\r\n                        const weekday = window.PicksDOMUtils ?\r\n                            window.PicksDOMUtils.getWeekdayName(dateText) : '';\r\n                        const fullDate = weekday ? `${weekday} ${dateText}` : dateText;\r\n                        facets.dates.add(fullDate);\r\n                    }\r\n                }\r\n\r\n                // Extract time\r\n                const timeEl = dateCell.querySelector('.cell-time');\r\n                if (timeEl) {\r\n                    const timeText = timeEl.textContent.trim();\r\n                    if (timeText) {\r\n                        facets.times.add(timeText);\r\n                    }\r\n                }\r\n\r\n                // Extract sportsbook\r\n                const bookEl = dateCell.querySelector('.cell-book, .sportsbook-name, .sportsbook-value');\r\n                if (bookEl) {\r\n                    const bookText = bookEl.textContent.trim();\r\n                    if (bookText) {\r\n                        facets.books.add(bookText);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return {\r\n                dates: Array.from(facets.dates).sort(),\r\n                times: Array.from(facets.times).sort((a, b) => {\r\n                    // Sort times chronologically\r\n                    const timeA = this.parseTimeValue(a);\r\n                    const timeB = this.parseTimeValue(b);\r\n                    return timeA - timeB;\r\n                }),\r\n                books: Array.from(facets.books).sort()\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Parse time value for sorting\r\n         */\r\n        parseTimeValue(timeText) {\r\n            const match = timeText.match(/(\\d{1,2}):(\\d{2})\\s*(am|pm)?/i);\r\n            if (!match) return 0;\r\n\r\n            let hours = parseInt(match[1], 10);\r\n            const minutes = parseInt(match[2], 10);\r\n            const period = match[3] ? match[3].toLowerCase() : '';\r\n\r\n            if (period === 'pm' && hours !== 12) {\r\n                hours += 12;\r\n            } else if (period === 'am' && hours === 12) {\r\n                hours = 0;\r\n            }\r\n\r\n            return hours * 60 + minutes;\r\n        },\r\n\r\n        /**\r\n         * Get all unique leagues from table\r\n         */\r\n        getLeaguesFromTable() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return [];\r\n\r\n            const leagues = new Set();\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const raw = row.getAttribute('data-league') ||\r\n                            (this.getCell(row, 'league') ? this.getCell(row, 'league').textContent : '') ||\r\n                            '';\r\n                const league = raw.toString().trim();\r\n                if (league) leagues.add(league.toUpperCase());\r\n            });\r\n\r\n            return Array.from(leagues).sort();\r\n        },\r\n\r\n        /**\r\n         * Detect league from matchup cell\r\n         */\r\n        detectLeagueFromCell(cell) {\r\n            if (!cell) return '';\r\n\r\n            const text = cell.textContent.toLowerCase();\r\n\r\n            // Check for league indicators\r\n            const leaguePatterns = {\r\n                'nfl': /(?:patriots|cowboys|packers|chiefs|bills|dolphins|jets|ravens|bengals|browns|steelers|texans|colts|jaguars|titans|broncos|chargers|raiders|eagles|giants|commanders|bears|lions|vikings|falcons|panthers|saints|buccaneers|cardinals|rams|49ers|seahawks)/,\r\n                'nba': /(?:celtics|nets|knicks|76ers|raptors|bulls|cavaliers|pistons|pacers|bucks|hawks|heat|magic|wizards|hornets|nuggets|timberwolves|thunder|blazers|jazz|warriors|clippers|lakers|suns|kings|mavericks|rockets|grizzlies|pelicans|spurs)/,\r\n                'mlb': /(?:orioles|red sox|yankees|rays|blue jays|white sox|guardians|tigers|royals|twins|astros|athletics|angels|mariners|rangers|braves|marlins|mets|phillies|nationals|brewers|cubs|reds|pirates|cardinals|diamondbacks|rockies|dodgers|padres|giants)/,\r\n                'nhl': /(?:bruins|sabres|red wings|panthers|canadiens|senators|lightning|maple leafs|hurricanes|blue jackets|devils|islanders|rangers|flyers|penguins|capitals|blackhawks|avalanche|stars|wild|predators|blues|jets|ducks|coyotes|flames|oilers|kings|sharks|kraken|canucks|golden knights)/,\r\n                'ncaa': /(?:alabama|georgia|michigan|ohio state|clemson|lsu|oklahoma|texas|florida|usc|notre dame|penn state|tennessee|auburn|wisconsin|oregon|washington|miami|florida state|nebraska)/,\r\n                'soccer': /(?:manchester|liverpool|chelsea|arsenal|barcelona|real madrid|bayern|juventus|psg|milan|inter|atletico|dortmund|ajax|benfica|porto|celtic|rangers)/\r\n            };\r\n\r\n            for (const [league, pattern] of Object.entries(leaguePatterns)) {\r\n                if (pattern.test(text)) {\r\n                    return league;\r\n                }\r\n            }\r\n\r\n            return '';\r\n        },\r\n\r\n        /**\r\n         * Get teams for a specific league\r\n         */\r\n        getTeamsForLeague(league) {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody || !league) return [];\r\n\r\n            const teams = new Set();\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toString();\r\n                if (rowLeague && rowLeague.toUpperCase() !== league.toUpperCase()) return;\r\n\r\n                const matchupCell = this.getCell(row, 'matchup', 2);\r\n                if (!matchupCell) return;\r\n\r\n                const extractedTeams = this.extractTeamsFromCell(matchupCell);\r\n                extractedTeams.forEach(team => teams.add(team));\r\n            });\r\n\r\n            return Array.from(teams).sort();\r\n        },\r\n\r\n        /**\r\n         * Extract team names from matchup cell\r\n         */\r\n        extractTeamsFromCell(cell) {\r\n            if (!cell) return [];\r\n\r\n            const teams = [];\r\n\r\n            // Try to get from logos\r\n            const logos = cell.querySelectorAll('.team-logo');\r\n            if (logos.length > 0) {\r\n                logos.forEach(logo => {\r\n                    const name = logo.getAttribute('alt') ||\r\n                                logo.getAttribute('title') ||\r\n                                '';\r\n                    if (name) teams.push(name);\r\n                });\r\n            }\r\n\r\n            // Fallback to text parsing\r\n            if (teams.length === 0) {\r\n                const text = cell.textContent;\r\n                // Split on common separators\r\n                const parts = text.split(/\\s+(?:vs?\\.?|@|at)\\s+/i);\r\n                parts.forEach(part => {\r\n                    const cleaned = part.trim();\r\n                    if (cleaned && cleaned.length > 2) {\r\n                        teams.push(cleaned);\r\n                    }\r\n                });\r\n            }\r\n\r\n            return teams;\r\n        },\r\n\r\n        /**\r\n         * Get game day/date from row\r\n         */\r\n        getGameDayFromRow(row) {\r\n            const dateCell = row.querySelector('td:first-child');\r\n            if (!dateCell) return null;\r\n\r\n            const dateEl = dateCell.querySelector('.cell-date');\r\n            if (!dateEl) return null;\r\n\r\n            const dateText = dateEl.textContent.trim();\r\n            if (!dateText) return null;\r\n\r\n            // Parse MM/DD format\r\n            const match = dateText.match(/(\\d{1,2})\\/(\\d{1,2})/);\r\n            if (!match) return null;\r\n\r\n            const month = parseInt(match[1], 10);\r\n            const day = parseInt(match[2], 10);\r\n            const year = new Date().getFullYear();\r\n\r\n            return new Date(year, month - 1, day);\r\n        },\r\n\r\n        /**\r\n         * Collect all status values from table\r\n         */\r\n        collectStatusValues() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return [];\r\n\r\n            const statuses = new Set();\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const statusCell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n                if (statusCell) {\r\n                    const badge = statusCell.querySelector('.status-badge');\r\n                    if (badge) {\r\n                        const status = badge.getAttribute('data-status') ||\r\n                                      badge.className.match(/status-(\\w+)/)?.[1] ||\r\n                                      badge.textContent.trim();\r\n                        if (status) {\r\n                            statuses.add(status.toLowerCase());\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return Array.from(statuses).sort();\r\n        },\r\n\r\n        collectRiskRanges() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return [];\r\n\r\n            const values = [];\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const cell = this.getCell(row, 'risk', 5);\r\n                if (!cell) return;\r\n                const amountEl = cell.querySelector('.risk-amount');\r\n                if (!amountEl) return;\r\n                const value = parseFloat(amountEl.textContent.replace(/[$,]/g, '').trim());\r\n                if (!isNaN(value)) values.push(value);\r\n            });\r\n\r\n            return this.createValueRanges(values);\r\n        },\r\n\r\n        collectWinRanges() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return [];\r\n\r\n            const values = [];\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const cell = this.getCell(row, 'risk', 5);\r\n                if (!cell) return;\r\n                const amountEl = cell.querySelector('.win-amount');\r\n                if (!amountEl) return;\r\n                const value = parseFloat(amountEl.textContent.replace(/[$,]/g, '').trim());\r\n                if (!isNaN(value)) values.push(value);\r\n            });\r\n\r\n            return this.createValueRanges(values);\r\n        },\r\n\r\n        /**\r\n         * Collect risk/win ranges from table\r\n         */\r\n        collectValueRanges(columnIndex) {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return [];\r\n\r\n            const values = [];\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                const cell = row.querySelector(`td:nth-child(${columnIndex})`);\r\n                if (cell) {\r\n                    const text = cell.textContent.replace(/[$,]/g, '').trim();\r\n                    const value = parseFloat(text);\r\n                    if (!isNaN(value)) {\r\n                        values.push(value);\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Create ranges based on data distribution\r\n            return this.createValueRanges(values);\r\n        },\r\n\r\n        /**\r\n         * Create value ranges for filtering\r\n         */\r\n        createValueRanges(values) {\r\n            if (!values || values.length === 0) return [];\r\n\r\n            const sorted = values.sort((a, b) => a - b);\r\n            const min = sorted[0];\r\n            const max = sorted[sorted.length - 1];\r\n\r\n            // Create logical ranges\r\n            const ranges = [];\r\n\r\n            if (max <= 100) {\r\n                ranges.push('0-25', '25-50', '50-75', '75-100');\r\n            } else if (max <= 500) {\r\n                ranges.push('0-50', '50-100', '100-250', '250-500');\r\n            } else if (max <= 1000) {\r\n                ranges.push('0-100', '100-250', '250-500', '500-1000');\r\n            } else {\r\n                ranges.push('0-100', '100-500', '500-1000', '1000-5000', '5000+');\r\n            }\r\n\r\n            // Filter to only include ranges with data\r\n            return ranges.filter(range => {\r\n                const [rangeMin, rangeMax] = range.includes('+') ?\r\n                    [parseFloat(range), Infinity] :\r\n                    range.split('-').map(parseFloat);\r\n\r\n                return values.some(v => v >= rangeMin && v <= rangeMax);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Calculate KPIs from visible rows\r\n         */\r\n        calculateKPIsFromVisibleRows() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return this.getEmptyKPIs();\r\n\r\n            const visibleRows = Array.from(tbody.querySelectorAll('tr:not(.parlay-legs)'))\r\n                .filter(row => row.style.display !== 'none');\r\n\r\n            let totalRisk = 0;\r\n            let totalWin = 0;\r\n            let wins = 0;\r\n            let losses = 0;\r\n            let pushes = 0;\r\n            let pending = 0;\r\n            let live = 0;\r\n\r\n            visibleRows.forEach(row => {\r\n                // Get risk amount\r\n                const riskWinCell = this.getCell(row, 'risk', 5);\r\n                if (riskWinCell) {\r\n                    const riskEl = riskWinCell.querySelector('.risk-amount');\r\n                    const winEl = riskWinCell.querySelector('.win-amount');\r\n                    const risk = riskEl ? (parseFloat(riskEl.textContent.replace(/[$,]/g, '')) || 0) : 0;\r\n                    const win = winEl ? (parseFloat(winEl.textContent.replace(/[$,]/g, '')) || 0) : 0;\r\n                    totalRisk += risk;\r\n                    totalWin += win;\r\n                }\r\n\r\n                // Get status\r\n                const statusCell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n                if (statusCell) {\r\n                    const badge = statusCell.querySelector('.status-badge');\r\n                    const statusText = badge ?\r\n                        (badge.getAttribute('data-status') || badge.textContent.trim()) :\r\n                        statusCell.textContent.trim();\r\n\r\n                    const normalized = window.PicksDOMUtils && window.PicksDOMUtils.normalizeStatus ?\r\n                        window.PicksDOMUtils.normalizeStatus(statusText) :\r\n                        statusText.toLowerCase();\r\n\r\n                    if (normalized === 'win' || normalized.includes('win') || normalized === 'won') wins++;\r\n                    else if (normalized === 'loss' || normalized.includes('loss') || normalized === 'lost') losses++;\r\n                    else if (normalized === 'push' || normalized.includes('push')) pushes++;\r\n                    else if (normalized === 'live' || normalized.includes('live') || normalized.includes('active')) live++;\r\n                    else if (normalized === 'pending' || normalized.includes('pending') || normalized === 'open') pending++;\r\n                }\r\n            });\r\n\r\n            const totalBets = visibleRows.length;\r\n            const settledBets = wins + losses + pushes;\r\n            const winRate = settledBets > 0 ? (wins / settledBets * 100).toFixed(1) : 0;\r\n            const roi = totalRisk > 0 ? ((totalWin - totalRisk) / totalRisk * 100).toFixed(1) : 0;\r\n\r\n            return {\r\n                totalBets,\r\n                totalRisk,\r\n                totalWin,\r\n                profit: totalWin - totalRisk,\r\n                roi,\r\n                winRate,\r\n                wins,\r\n                losses,\r\n                pushes,\r\n                pending,\r\n                live,\r\n                settled: settledBets\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get empty KPI object\r\n         */\r\n        getEmptyKPIs() {\r\n            return {\r\n                totalBets: 0,\r\n                totalRisk: 0,\r\n                totalWin: 0,\r\n                profit: 0,\r\n                roi: 0,\r\n                winRate: 0,\r\n                wins: 0,\r\n                losses: 0,\r\n                pushes: 0,\r\n                pending: 0,\r\n                live: 0,\r\n                settled: 0\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Detect bet types from all rows\r\n         */\r\n        collectBetTypes() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return { types: [], subtypes: [] };\r\n\r\n            const types = new Set();\r\n            const subtypes = new Set();\r\n\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n            rows.forEach(row => {\r\n                const pickCell = this.getCell(row, 'pick', 5);\r\n                if (pickCell) {\r\n                    const detected = this.detectBetTypeFromCell(pickCell);\r\n                    if (detected.type) types.add(detected.type);\r\n                    if (detected.subtype) subtypes.add(detected.subtype);\r\n                }\r\n            });\r\n\r\n            return {\r\n                types: Array.from(types).sort(),\r\n                subtypes: Array.from(subtypes).sort()\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Detect bet type from pick cell\r\n         */\r\n        detectBetTypeFromCell(cell) {\r\n            if (!cell) return { type: '', subtype: '' };\r\n\r\n            const text = (cell.textContent || '').toLowerCase();\r\n\r\n            // Check data attributes first\r\n            const betTypeEl = cell.querySelector('[data-bet-type]');\r\n            if (betTypeEl) {\r\n                return {\r\n                    type: betTypeEl.getAttribute('data-bet-type') || '',\r\n                    subtype: betTypeEl.getAttribute('data-bet-subtype') || ''\r\n                };\r\n            }\r\n\r\n            // Pattern matching\r\n            if (text.includes('spread') || /[+-]\\d+\\.?\\d*/.test(text)) {\r\n                return { type: 'spread', subtype: this.detectSegmentFromText(text) };\r\n            }\r\n\r\n            if (text.includes('total') || text.includes('over') || text.includes('under')) {\r\n                return { type: 'total', subtype: this.detectSegmentFromText(text) };\r\n            }\r\n\r\n            if (text.includes('moneyline') || text.includes(' ml ')) {\r\n                return { type: 'moneyline', subtype: this.detectSegmentFromText(text) };\r\n            }\r\n\r\n            if (text.includes('parlay')) {\r\n                return { type: 'parlay', subtype: '' };\r\n            }\r\n\r\n            if (text.includes('prop') || text.includes('player')) {\r\n                return { type: 'prop', subtype: '' };\r\n            }\r\n\r\n            return { type: '', subtype: '' };\r\n        },\r\n\r\n        /**\r\n         * Detect segment from text\r\n         */\r\n        detectSegmentFromText(text) {\r\n            const lower = text.toLowerCase();\r\n\r\n            if (lower.includes('1st') || lower.includes('first') ||\r\n                lower.includes('1h') || lower.includes('1q')) {\r\n                return '1h';\r\n            }\r\n\r\n            if (lower.includes('2nd') || lower.includes('second') ||\r\n                lower.includes('2h') || lower.includes('3q') || lower.includes('4q')) {\r\n                return '2h';\r\n            }\r\n\r\n            return 'game';\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksDataProcessor = DataProcessor;\r\n\r\n})();\n\n/* === assets/js/modules/picks-filter-manager.js === */\n/* ==========================================================================\r\n   PICKS FILTER MANAGER v1.1\r\n   --------------------------------------------------------------------------\r\n   Core filtering logic for the picks table. Exports window.PicksFilterManager.\r\n\r\n   ARCHITECTURE NOTE:\r\n   This is the \"source of truth\" for filter application logic.\r\n   Other modules should use window.PicksFilterManager methods:\r\n   - passesAllFilters(row): Check if a row passes all active filters\r\n   - applyFilter(type): Apply a specific filter type\r\n   - resetFilter(type): Reset a specific filter\r\n   - clearFilterByChip(type, subtype): Clear filter from chip click\r\n\r\n   Related modules:\r\n   - table-filters.js: UI initialization, dropdown handlers\r\n   - picks-state-manager.js: State persistence and updates\r\n   - picks-table-renderer.js: Uses passesAllFilters for row visibility\r\n   ========================================================================== */\r\n(function() {\r\n    'use strict';\r\n\r\n    const FilterManager = {\r\n        /**\r\n         * Get 1-based column index - delegates to shared PicksDOMUtils\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            if (window.PicksDOMUtils?.getColumnIndex) {\r\n                return window.PicksDOMUtils.getColumnIndex(row, columnKey);\r\n            }\r\n            // Fallback if PicksDOMUtils not loaded yet\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Get a table cell - delegates to shared PicksDOMUtils\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            if (window.PicksDOMUtils?.getCell) {\r\n                return window.PicksDOMUtils.getCell(row, columnKey, fallbackIndex);\r\n            }\r\n            // Fallback\r\n            const idx = fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        // Filter type configurations\r\n        DATE_FILTER_GROUP_MAP: {\r\n            dates: 'selectedDates',\r\n            times: 'selectedTimes',\r\n            books: 'selectedBooks'\r\n        },\r\n\r\n        DATE_FILTER_GROUP_LABELS: {\r\n            dates: 'Dates',\r\n            times: 'Times',\r\n            books: 'Sportsbooks'\r\n        },\r\n\r\n        /**\r\n         * Normalize filter value for comparison\r\n         */\r\n        normalizeFilterValue(value) {\r\n            return (value ?? '').toString().trim().toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Extract date/time parts from a row\r\n         */\r\n        getDateTimeParts(row) {\r\n            const dateCell = row.querySelector('td:first-child');\r\n            if (!dateCell) return { date: '', time: '', book: '' };\r\n\r\n            const dateEl = dateCell.querySelector('.cell-date');\r\n            const timeEl = dateCell.querySelector('.cell-time');\r\n            const bookEl = dateCell.querySelector('.cell-book, .sportsbook-name, .sportsbook-value');\r\n\r\n            let dateText = dateEl ? dateEl.textContent.trim() : '';\r\n            let timeText = timeEl ? timeEl.textContent.trim() : '';\r\n            let bookText = bookEl ? bookEl.textContent.trim() : '';\r\n\r\n            // Extract date with weekday if present\r\n            const weekdayEl = dateCell.querySelector('.cell-weekday');\r\n            if (weekdayEl) {\r\n                const weekday = weekdayEl.textContent.trim();\r\n                if (weekday && !dateText.includes(weekday)) {\r\n                    dateText = `${weekday} ${dateText}`;\r\n                }\r\n            }\r\n\r\n            return {\r\n                date: dateText,\r\n                time: timeText,\r\n                book: bookText\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get matchup value from row\r\n         */\r\n        getMatchupValue(row) {\r\n            const matchupCell = this.getCell(row, 'matchup', 2);\r\n            if (!matchupCell) return '';\r\n\r\n            // Get full text content\r\n            let text = matchupCell.textContent || '';\r\n\r\n            // Try to get team names from logos\r\n            const logos = matchupCell.querySelectorAll('.team-logo');\r\n            if (logos.length > 0) {\r\n                const teams = Array.from(logos).map(logo =>\r\n                    logo.getAttribute('alt') || logo.getAttribute('title') || ''\r\n                ).filter(Boolean);\r\n                if (teams.length > 0) {\r\n                    text = teams.join(' vs ');\r\n                }\r\n            }\r\n\r\n            return text.toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Get pick value from row\r\n         */\r\n        getPickValue(row) {\r\n            const pickCell = this.getCell(row, 'pick', 3);\r\n            if (!pickCell) return '';\r\n\r\n            const pickText = pickCell.textContent || '';\r\n            const betTypeEl = pickCell.querySelector('[data-bet-type]');\r\n            const betType = betTypeEl ? betTypeEl.getAttribute('data-bet-type') : '';\r\n\r\n            return {\r\n                text: pickText.toLowerCase(),\r\n                betType: betType.toLowerCase()\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get currency value from row\r\n         */\r\n        getCurrencyValue(row, columnIndex) {\r\n            const cell = row.querySelector(`td:nth-child(${columnIndex})`);\r\n            if (!cell) return null;\r\n\r\n            const text = cell.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get risk value from row\r\n         */\r\n        getRiskValue(row) {\r\n            const cell = this.getCell(row, 'risk', 5);\r\n            if (!cell) return null;\r\n            const amountEl = cell.querySelector('.risk-amount');\r\n            if (!amountEl) return null;\r\n            const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get win value from row\r\n         */\r\n        getWinValue(row) {\r\n            const cell = this.getCell(row, 'risk', 5);\r\n            if (!cell) return null;\r\n            const amountEl = cell.querySelector('.win-amount');\r\n            if (!amountEl) return null;\r\n            const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get status value from row\r\n         */\r\n        getStatusValue(row) {\r\n            const statusCell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n            if (!statusCell) return '';\r\n\r\n            const badge = statusCell.querySelector('.status-badge');\r\n            if (badge) {\r\n                // Try multiple attributes for status\r\n                return badge.getAttribute('data-status') ||\r\n                       badge.className.match(/status-(\\w+)/)?.[1] ||\r\n                       badge.textContent.trim().toLowerCase();\r\n            }\r\n\r\n            return statusCell.textContent.trim().toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Normalize status for comparison\r\n         */\r\n        normalizeStatus(raw) {\r\n            if (window.PicksDOMUtils && window.PicksDOMUtils.normalizeStatus) {\r\n                return window.PicksDOMUtils.normalizeStatus(raw);\r\n            }\r\n\r\n            if (!raw) return '';\r\n            const lower = raw.toString().toLowerCase().trim();\r\n\r\n            const statusMap = {\r\n                'win': 'win',\r\n                'won': 'win',\r\n                'winner': 'win',\r\n                'loss': 'loss',\r\n                'lost': 'loss',\r\n                'lose': 'loss',\r\n                'loser': 'loss',\r\n                'push': 'push',\r\n                'tie': 'push',\r\n                'void': 'void',\r\n                'voided': 'void',\r\n                'cancelled': 'void',\r\n                'pending': 'pending',\r\n                'open': 'pending',\r\n                'live': 'live',\r\n                'in-progress': 'live',\r\n                'in progress': 'live',\r\n                'active': 'live'\r\n            };\r\n\r\n            return statusMap[lower] || lower;\r\n        },\r\n\r\n        /**\r\n         * Detect bet type from row\r\n         */\r\n        detectBetType(row) {\r\n            const pickCell = this.getCell(row, 'pick', 3);\r\n            if (!pickCell) return { type: '', subtype: '' };\r\n\r\n            const pickText = (pickCell.textContent || '').toLowerCase();\r\n            const betTypeAttr = pickCell.querySelector('[data-bet-type]');\r\n\r\n            if (betTypeAttr) {\r\n                const type = betTypeAttr.getAttribute('data-bet-type').toLowerCase();\r\n                const subtype = betTypeAttr.getAttribute('data-bet-subtype') || '';\r\n                return { type, subtype: subtype.toLowerCase() };\r\n            }\r\n\r\n            // Pattern matching for bet types\r\n            if (pickText.includes('spread') || pickText.includes('+') || pickText.includes('-')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'spread', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'spread', subtype: '2h' };\r\n                }\r\n                return { type: 'spread', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('total') || pickText.includes('over') || pickText.includes('under')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'total', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'total', subtype: '2h' };\r\n                }\r\n                return { type: 'total', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('moneyline') || pickText.includes('ml')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'moneyline', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'moneyline', subtype: '2h' };\r\n                }\r\n                return { type: 'moneyline', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('parlay')) {\r\n                return { type: 'parlay', subtype: '' };\r\n            }\r\n\r\n            if (pickText.includes('prop') || pickText.includes('player')) {\r\n                return { type: 'prop', subtype: '' };\r\n            }\r\n\r\n            return { type: '', subtype: '' };\r\n        },\r\n\r\n        /**\r\n         * Detect game segment from row\r\n         */\r\n        detectSegment(row) {\r\n            const segmentCell = this.getCell(row, 'segment', 4);\r\n            if (!segmentCell) return 'game';\r\n\r\n            const segmentSpan = segmentCell.querySelector('.game-segment');\r\n            if (segmentSpan && segmentSpan.getAttribute('data-segment')) {\r\n                return segmentSpan.getAttribute('data-segment').toLowerCase();\r\n            }\r\n\r\n            const text = segmentCell.textContent.trim().toLowerCase();\r\n            if (text.includes('1st') || text.includes('1h') || text.includes('1q')) return '1h';\r\n            if (text.includes('2nd') || text.includes('2h') || text.includes('2q')) return '2h';\r\n            \r\n            return 'game';\r\n        },\r\n\r\n        /**\r\n         * Check if value matches range list\r\n         */\r\n        valueMatchesRangeList(ranges, value) {\r\n            if (!ranges || ranges.length === 0 || value === null) return false;\r\n\r\n            return ranges.some(range => {\r\n                const [min, max] = range.split('-').map(v => parseFloat(v));\r\n                return value >= min && value <= max;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check if row passes date filter\r\n         */\r\n        passesDateFilter(row) {\r\n            const filters = window.tableState.filters.date;\r\n\r\n            // If no date filters active, pass\r\n            if (!filters.selectedDates && !filters.selectedTimes &&\r\n                !filters.selectedBooks && !filters.start && !filters.end) {\r\n                return true;\r\n            }\r\n\r\n            const { date, time, book } = this.getDateTimeParts(row);\r\n\r\n            // Check selected dates\r\n            if (filters.selectedDates && filters.selectedDates.length > 0) {\r\n                const normalizedDate = this.normalizeFilterValue(date);\r\n                const passes = filters.selectedDates.some(selected =>\r\n                    normalizedDate.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            // Check selected times\r\n            if (filters.selectedTimes && filters.selectedTimes.length > 0) {\r\n                const normalizedTime = this.normalizeFilterValue(time);\r\n                const passes = filters.selectedTimes.some(selected =>\r\n                    normalizedTime.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            // Check selected books\r\n            if (filters.selectedBooks && filters.selectedBooks.length > 0) {\r\n                const normalizedBook = this.normalizeFilterValue(book);\r\n                const passes = filters.selectedBooks.some(selected =>\r\n                    normalizedBook.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes matchup filter\r\n         */\r\n        passesMatchupFilter(row) {\r\n            const filters = window.tableState.filters.matchup;\r\n\r\n            // Check ticket type filter\r\n            if (filters.ticketType && filters.ticketType !== 'all') {\r\n                const isParlay = row.classList.contains('parlay-row');\r\n                if (filters.ticketType === 'single' && isParlay) return false;\r\n                if (filters.ticketType === 'parlay' && !isParlay) return false;\r\n            }\r\n\r\n            // Check league filter\r\n            if (filters.league) {\r\n                const matchupText = this.getMatchupValue(row);\r\n                if (!matchupText.includes(filters.league.toLowerCase())) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check selected teams\r\n            if (filters.selectedTeams && filters.selectedTeams.length > 0) {\r\n                const matchupText = this.getMatchupValue(row);\r\n                const passes = filters.selectedTeams.some(team =>\r\n                    matchupText.includes(team.toLowerCase())\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes pick filter\r\n         */\r\n        passesPickFilter(row) {\r\n            const filters = window.tableState.filters.pick;\r\n\r\n            if (filters.betType || filters.subtype) {\r\n                const detected = this.detectBetType(row);\r\n\r\n                if (filters.betType && detected.type !== filters.betType.toLowerCase()) {\r\n                    return false;\r\n                }\r\n\r\n                if (filters.subtype && detected.subtype !== filters.subtype.toLowerCase()) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (filters.segment) {\r\n                const segment = this.detectSegment(row);\r\n                if (segment !== filters.segment.toLowerCase()) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes risk filter\r\n         */\r\n        passesRiskFilter(row) {\r\n            const filters = window.tableState.filters.risk;\r\n\r\n            // Check risk ranges\r\n            if (filters.selectedRiskRanges && filters.selectedRiskRanges.length > 0) {\r\n                const risk = this.getRiskValue(row);\r\n                if (!this.valueMatchesRangeList(filters.selectedRiskRanges, risk)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check win ranges\r\n            if (filters.selectedWinRanges && filters.selectedWinRanges.length > 0) {\r\n                const win = this.getWinValue(row);\r\n                if (!this.valueMatchesRangeList(filters.selectedWinRanges, win)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check min/max values (legacy support)\r\n            if (filters.min !== null || filters.max !== null) {\r\n                const risk = this.getRiskValue(row);\r\n                if (filters.min !== null && risk < filters.min) return false;\r\n                if (filters.max !== null && risk > filters.max) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes status filter\r\n         */\r\n        passesStatusFilter(row) {\r\n            const filters = window.tableState.filters.status;\r\n\r\n            if (!filters || filters.length === 0) {\r\n                return true;\r\n            }\r\n\r\n            const status = this.normalizeStatus(this.getStatusValue(row));\r\n            return filters.some(filter =>\r\n                this.normalizeStatus(filter) === status\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Check if row passes all filters\r\n         */\r\n        passesAllFilters(row) {\r\n            const filters = window.tableState?.filters;\r\n            if (!filters) return true;\r\n\r\n            // 1. Search Filter\r\n            if (filters.search) {\r\n                const rowText = row.textContent.toLowerCase();\r\n                if (!rowText.includes(filters.search)) return false;\r\n            }\r\n\r\n            // 2. Date Filter\r\n            if (filters.date) {\r\n                const { start, end } = filters.date;\r\n                if (start && end) {\r\n                    const rowEpoch = row.getAttribute('data-epoch');\r\n                    // Only filter by epoch if the row has the data-epoch attribute\r\n                    // Rows without data-epoch should pass through (don't exclude valid data)\r\n                    if (rowEpoch) {\r\n                        const epochNum = parseInt(rowEpoch, 10);\r\n                        if (!isNaN(epochNum)) {\r\n                            const rowDate = new Date(epochNum * 1000);\r\n                            // Set times to ensure inclusive comparison\r\n                            const startDate = new Date(start); startDate.setHours(0,0,0,0);\r\n                            const endDate = new Date(end); endDate.setHours(23,59,59,999);\r\n\r\n                            if (rowDate < startDate || rowDate > endDate) return false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 3. League Filter\r\n            if (filters.matchup?.league) {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toLowerCase();\r\n                if (rowLeague !== filters.matchup.league.toLowerCase()) return false;\r\n            } else if (filters.matchup?.selectedLeagues?.length > 0) {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toLowerCase();\r\n                const selectedLeagues = filters.matchup.selectedLeagues.map(l => l.toLowerCase());\r\n                if (!selectedLeagues.includes(rowLeague)) return false;\r\n            }\r\n\r\n            // 4. Segment Filter\r\n            if (filters.pick?.segment) {\r\n                const rowSegment = (row.getAttribute('data-segment') || '').toLowerCase();\r\n                let normalizedRowSegment = rowSegment;\r\n                if (rowSegment === 'full game') normalizedRowSegment = 'full';\r\n\r\n                if (normalizedRowSegment !== filters.pick.segment.toLowerCase()) return false;\r\n            } else if (filters.pick?.selectedSegments?.length > 0) {\r\n                const rowSegment = (row.getAttribute('data-segment') || '').toLowerCase();\r\n                let normalizedRowSegment = rowSegment;\r\n                if (rowSegment === 'full game') normalizedRowSegment = 'full';\r\n\r\n                const selectedSegments = filters.pick.selectedSegments.map(s => s.toLowerCase());\r\n                if (!selectedSegments.includes(normalizedRowSegment)) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Apply filters to table (debounced for performance)\r\n         */\r\n        applyFilters: (function() {\r\n            // Create debounced version of the actual filter application\r\n            let debouncedApply = null;\r\n\r\n            return function() {\r\n                // Lazy-init debounced function (SharedUtils may not be loaded yet)\r\n                if (!debouncedApply && window.SharedUtils?.debounce) {\r\n                    debouncedApply = window.SharedUtils.debounce(function() {\r\n                        if (window.PicksTableRenderer) {\r\n                            window.PicksTableRenderer.updateTable();\r\n                        }\r\n                    }, 150);\r\n                }\r\n\r\n                // Use debounced version if available, otherwise apply immediately\r\n                if (debouncedApply) {\r\n                    debouncedApply();\r\n                } else if (window.PicksTableRenderer) {\r\n                    window.PicksTableRenderer.updateTable();\r\n                } else {\r\n                    console.warn('PicksTableRenderer not loaded');\r\n                }\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * Apply specific filter type\r\n         */\r\n        applyFilter(type, options = {}) {\r\n            // Update state based on filter type\r\n            switch(type) {\r\n                case 'date':\r\n                    this.syncDateFilterStateFromUI();\r\n                    break;\r\n                case 'matchup':\r\n                    this.syncMatchupFilterStateFromUI();\r\n                    break;\r\n                case 'pick':\r\n                    this.syncPickFilterStateFromUI();\r\n                    break;\r\n                case 'risk':\r\n                    this.syncRiskFilterStateFromUI();\r\n                    break;\r\n                case 'status':\r\n                    this.syncStatusFilterStateFromUI();\r\n                    break;\r\n                case 'league':\r\n                    this.syncLeagueFilterStateFromUI();\r\n                    break;\r\n                case 'segment':\r\n                    this.syncSegmentFilterStateFromUI();\r\n                    break;\r\n            }\r\n\r\n            // Apply all filters\r\n            this.applyFilters();\r\n\r\n            // Announce change for accessibility\r\n            if (window.PicksTableRenderer) {\r\n                const count = this.countVisibleRows();\r\n                window.PicksTableRenderer.announceFilterChange(\r\n                    `Filter applied. ${count} rows visible.`\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset specific filter\r\n         */\r\n        resetFilter(type) {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetFilter(type);\r\n            }\r\n\r\n            // Clear UI elements\r\n            this.clearFilterUI(type);\r\n\r\n            // Re-apply filters\r\n            this.applyFilters();\r\n        },\r\n\r\n        /**\r\n         * Clear filter by chip\r\n         */\r\n        clearFilterByChip(type, subtype) {\r\n            if (type === 'date' && subtype) {\r\n                // Clear specific date filter subtype\r\n                const stateKey = this.DATE_FILTER_GROUP_MAP[subtype];\r\n                if (stateKey) {\r\n                    window.tableState.filters.date[stateKey] = null;\r\n                }\r\n            } else {\r\n                // Clear entire filter type\r\n                this.resetFilter(type);\r\n            }\r\n\r\n            this.applyFilters();\r\n        },\r\n\r\n        /**\r\n         * Sync date filter state from UI\r\n         */\r\n        syncDateFilterStateFromUI() {\r\n            const container = document.getElementById('date-filter-options');\r\n            if (!container) return;\r\n\r\n            const checkboxes = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const grouped = { dates: [], times: [], books: [] };\r\n\r\n            checkboxes.forEach(cb => {\r\n                if (cb.id === 'date-select-all') return;\r\n\r\n                const group = cb.getAttribute('data-group');\r\n                const value = cb.value;\r\n\r\n                if (group && value && grouped[group]) {\r\n                    grouped[group].push(value);\r\n                }\r\n            });\r\n\r\n            // Update state\r\n            window.tableState.filters.date.selectedDates = grouped.dates.length > 0 ? grouped.dates : null;\r\n            window.tableState.filters.date.selectedTimes = grouped.times.length > 0 ? grouped.times : null;\r\n            window.tableState.filters.date.selectedBooks = grouped.books.length > 0 ? grouped.books : null;\r\n        },\r\n\r\n        /**\r\n         * Sync matchup filter state from UI\r\n         */\r\n        syncMatchupFilterStateFromUI() {\r\n            const teamCheckboxes = document.querySelectorAll('#teams-list input[type=\"checkbox\"]:not(#teams-select-all)');\r\n            const selectedTeams = Array.from(teamCheckboxes)\r\n                .filter(cb => cb.checked)\r\n                .map(cb => cb.value);\r\n\r\n            window.tableState.filters.matchup.selectedTeams =\r\n                selectedTeams.length > 0 ? selectedTeams : null;\r\n        },\r\n\r\n        /**\r\n         * Sync pick filter state from UI\r\n         */\r\n        syncPickFilterStateFromUI() {\r\n            const betTypeSelect = document.getElementById('bet-type-select');\r\n            const subtypeSelect = document.getElementById('subtype-select');\r\n            const segmentSelect = document.getElementById('segment-select');\r\n\r\n            if (betTypeSelect) {\r\n                window.tableState.filters.pick.betType = betTypeSelect.value;\r\n            }\r\n\r\n            if (subtypeSelect) {\r\n                window.tableState.filters.pick.subtype = subtypeSelect.value;\r\n            }\r\n\r\n            if (segmentSelect) {\r\n                window.tableState.filters.pick.segment = segmentSelect.value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync risk filter state from UI\r\n         */\r\n        syncRiskFilterStateFromUI() {\r\n            const riskContainer = document.getElementById('risk-ranges');\r\n            const winContainer = document.getElementById('win-ranges');\r\n\r\n            if (riskContainer) {\r\n                const checked = riskContainer.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n                const ranges = Array.from(checked).map(cb => cb.value);\r\n                window.tableState.filters.risk.selectedRiskRanges = ranges;\r\n            }\r\n\r\n            if (winContainer) {\r\n                const checked = winContainer.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n                const ranges = Array.from(checked).map(cb => cb.value);\r\n                window.tableState.filters.risk.selectedWinRanges = ranges;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync status filter state from UI\r\n         */\r\n        syncStatusFilterStateFromUI() {\r\n            const container = document.getElementById('status-filter-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const statuses = Array.from(checked).map(cb => cb.value);\r\n\r\n            window.tableState.filters.status = statuses;\r\n        },\r\n\r\n        /**\r\n         * Sync league filter state from UI\r\n         */\r\n        syncLeagueFilterStateFromUI() {\r\n            const container = document.getElementById('league-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const leagues = Array.from(checked).map(cb => cb.value);\r\n\r\n            // If all are checked, treat as no filter\r\n            const allCheckboxes = container.querySelectorAll('input[type=\"checkbox\"]');\r\n            if (leagues.length === allCheckboxes.length) {\r\n                window.tableState.filters.matchup.league = null;\r\n            } else if (leagues.length === 1) {\r\n                // Single league selected\r\n                window.tableState.filters.matchup.league = leagues[0];\r\n            } else if (leagues.length > 0) {\r\n                // Multiple leagues - store as array\r\n                window.tableState.filters.matchup.selectedLeagues = leagues;\r\n                window.tableState.filters.matchup.league = null;\r\n            } else {\r\n                window.tableState.filters.matchup.league = null;\r\n                window.tableState.filters.matchup.selectedLeagues = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync segment filter state from UI\r\n         */\r\n        syncSegmentFilterStateFromUI() {\r\n            const container = document.getElementById('segment-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const segments = Array.from(checked).map(cb => cb.value);\r\n\r\n            // If all are checked, treat as no filter\r\n            const allCheckboxes = container.querySelectorAll('input[type=\"checkbox\"]');\r\n            if (segments.length === allCheckboxes.length) {\r\n                window.tableState.filters.pick.segment = null;\r\n            } else if (segments.length === 1) {\r\n                // Single segment selected\r\n                window.tableState.filters.pick.segment = segments[0];\r\n            } else if (segments.length > 0) {\r\n                // Multiple segments - store as array\r\n                window.tableState.filters.pick.selectedSegments = segments;\r\n                window.tableState.filters.pick.segment = null;\r\n            } else {\r\n                window.tableState.filters.pick.segment = null;\r\n                window.tableState.filters.pick.selectedSegments = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear filter UI elements\r\n         */\r\n        clearFilterUI(type) {\r\n            switch(type) {\r\n                case 'date':\r\n                    const dateChecks = document.querySelectorAll('#date-filter-options input[type=\"checkbox\"]');\r\n                    dateChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'matchup':\r\n                    const leagueSelect = document.getElementById('league-select');\r\n                    if (leagueSelect) leagueSelect.value = '';\r\n                    const teamChecks = document.querySelectorAll('#teams-list input[type=\"checkbox\"]');\r\n                    teamChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'pick':\r\n                    const betTypeSelect = document.getElementById('bet-type-select');\r\n                    if (betTypeSelect) betTypeSelect.value = '';\r\n                    const subtypeSelect = document.getElementById('subtype-select');\r\n                    if (subtypeSelect) subtypeSelect.value = '';\r\n                    const segmentSelect = document.getElementById('segment-select');\r\n                    if (segmentSelect) segmentSelect.value = '';\r\n                    break;\r\n                case 'risk':\r\n                    const riskChecks = document.querySelectorAll('#risk-ranges input[type=\"checkbox\"], #win-ranges input[type=\"checkbox\"]');\r\n                    riskChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'status':\r\n                    const statusChecks = document.querySelectorAll('#status-filter-options input[type=\"checkbox\"]');\r\n                    statusChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'league':\r\n                    const leagueChecks = document.querySelectorAll('#league-options input[type=\"checkbox\"]');\r\n                    leagueChecks.forEach(cb => cb.checked = true); // Reset to all selected\r\n                    break;\r\n                case 'segment':\r\n                    const segmentChecks = document.querySelectorAll('#segment-options input[type=\"checkbox\"]');\r\n                    segmentChecks.forEach(cb => cb.checked = true); // Reset to all selected\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Count visible rows after filtering\r\n         */\r\n        countVisibleRows() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return 0;\r\n\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n            return Array.from(rows).filter(row => row.style.display !== 'none').length;\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksFilterManager = FilterManager;\r\n\r\n})();\n\n/* === assets/js/modules/picks-sort-manager.js === */\n/**\r\n * Picks Sort Manager Module\r\n * Handles table sorting logic for all columns\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const SortManager = {\r\n        /**\r\n         * Get 1-based column index - delegates to shared PicksDOMUtils\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            if (window.PicksDOMUtils?.getColumnIndex) {\r\n                return window.PicksDOMUtils.getColumnIndex(row, columnKey);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Get a table cell - delegates to shared PicksDOMUtils\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            if (window.PicksDOMUtils?.getCell) {\r\n                return window.PicksDOMUtils.getCell(row, columnKey, fallbackIndex);\r\n            }\r\n            const idx = fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        /**\r\n         * Get date sort value from date text\r\n         * Handles cross-year dates (e.g., Dec 31 vs Jan 1)\r\n         */\r\n        getDateSortValue(dateText) {\r\n            if (!dateText) return 0;\r\n\r\n            // Remove weekday prefix if present\r\n            const cleanDate = dateText.replace(/^(mon|tue|wed|thu|fri|sat|sun)\\s+/i, '');\r\n\r\n            // Parse date string (MM/DD format)\r\n            const parts = cleanDate.split('/');\r\n            if (parts.length === 2) {\r\n                const month = parseInt(parts[0], 10) || 0;\r\n                const day = parseInt(parts[1], 10) || 0;\r\n                const now = new Date();\r\n                const currentMonth = now.getMonth() + 1; // 1-based\r\n                const currentYear = now.getFullYear();\r\n\r\n                // Handle year rollover: if we're in Dec (12) and date is Jan (1),\r\n                // assume it's next year. If we're in Jan and date is Dec, assume last year.\r\n                let year = currentYear;\r\n                if (currentMonth >= 11 && month <= 2) {\r\n                    // Late in year, early month dates are next year\r\n                    year = currentYear + 1;\r\n                } else if (currentMonth <= 2 && month >= 11) {\r\n                    // Early in year, late month dates are last year\r\n                    year = currentYear - 1;\r\n                }\r\n\r\n                return new Date(year, month - 1, day).getTime();\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Get time sort value from time text\r\n         */\r\n        getTimeSortValue(timeText) {\r\n            if (!timeText) return 0;\r\n\r\n            // Extract time and convert to 24hr format for sorting\r\n            const match = timeText.match(/(\\d{1,2}):(\\d{2})\\s*(am|pm)?/i);\r\n            if (match) {\r\n                let hours = parseInt(match[1], 10);\r\n                const minutes = parseInt(match[2], 10);\r\n                const period = match[3] ? match[3].toLowerCase() : '';\r\n\r\n                if (period === 'pm' && hours !== 12) {\r\n                    hours += 12;\r\n                } else if (period === 'am' && hours === 12) {\r\n                    hours = 0;\r\n                }\r\n\r\n                return hours * 60 + minutes;\r\n            }\r\n\r\n            return 0;\r\n        },\r\n\r\n        /**\r\n         * Get sort value for a specific column\r\n         */\r\n        getSortValue(row, column) {\r\n            switch(column) {\r\n                case 'date': {\r\n                    const dateCell = row.querySelector('td:first-child');\r\n                    if (!dateCell) return 0;\r\n\r\n                    const dateEl = dateCell.querySelector('.cell-date');\r\n                    const timeEl = dateCell.querySelector('.cell-time');\r\n\r\n                    const dateValue = this.getDateSortValue(dateEl ? dateEl.textContent : '');\r\n                    const timeValue = this.getTimeSortValue(timeEl ? timeEl.textContent : '');\r\n\r\n                    // Combine date and time for full sorting\r\n                    return dateValue + timeValue / (24 * 60);\r\n                }\r\n\r\n                case 'league': {\r\n                    const cell = this.getCell(row, 'league');\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'matchup': {\r\n                    const cell = this.getCell(row, 'matchup', 2);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'pick': {\r\n                    const cell = this.getCell(row, 'pick', 3);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'segment': {\r\n                    const cell = this.getCell(row, 'segment', 4);\r\n                    return cell ? cell.textContent.trim().toLowerCase() : '';\r\n                }\r\n\r\n                case 'risk': {\r\n                    const cell = this.getCell(row, 'risk', 5);\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.risk-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'win': {\r\n                    const cell = this.getCell(row, 'risk', 5);\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.win-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'status': {\r\n                    const cell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n                    if (!cell) return 0;\r\n\r\n                    const badge = cell.querySelector('.status-badge');\r\n                    if (badge) {\r\n                        const status = badge.getAttribute('data-status') ||\r\n                                      badge.className.match(/status-(\\w+)/)?.[1] ||\r\n                                      badge.textContent.trim();\r\n                        return this.getStatusSortPriority(status);\r\n                    }\r\n\r\n                    return this.getStatusSortPriority(cell.textContent.trim().toLowerCase());\r\n                }\r\n\r\n                case 'profit': {\r\n                    const cell = row.querySelector('td:last-child');\r\n                    if (!cell) return 0;\r\n                    const amountEl = cell.querySelector('.profit-amount');\r\n                    if (!amountEl) return 0;\r\n                    const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n                    return parseFloat(text) || 0;\r\n                }\r\n\r\n                case 'score': {\r\n                    const dataEpoch = row.getAttribute('data-epoch');\r\n                    return dataEpoch ? parseInt(dataEpoch, 10) : 0;\r\n                }\r\n\r\n                default:\r\n                    return '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get status sort priority (for consistent ordering)\r\n         */\r\n        getStatusSortPriority(status) {\r\n            const priorities = {\r\n                'live': 1,\r\n                'in-progress': 1,\r\n                'active': 1,\r\n                'pending': 2,\r\n                'open': 2,\r\n                'win': 3,\r\n                'won': 3,\r\n                'loss': 4,\r\n                'lost': 4,\r\n                'push': 5,\r\n                'tie': 5,\r\n                'void': 6,\r\n                'voided': 6,\r\n                'cancelled': 6\r\n            };\r\n\r\n            const normalized = status.toString().toLowerCase();\r\n            return priorities[normalized] || 99;\r\n        },\r\n\r\n        /**\r\n         * Apply sorting to table rows\r\n         */\r\n        applySorting(rows) {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            if (!state.column) {\r\n                return rows;\r\n            }\r\n\r\n            const sorted = [...rows].sort((a, b) => {\r\n                const aValue = this.getSortValue(a, state.column);\r\n                const bValue = this.getSortValue(b, state.column);\r\n\r\n                // Handle numeric vs string comparison\r\n                if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n                    return state.direction === 'asc' ?\r\n                        aValue - bValue :\r\n                        bValue - aValue;\r\n                }\r\n\r\n                // String comparison\r\n                const aStr = aValue.toString();\r\n                const bStr = bValue.toString();\r\n\r\n                if (state.direction === 'asc') {\r\n                    return aStr.localeCompare(bStr);\r\n                } else {\r\n                    return bStr.localeCompare(aStr);\r\n                }\r\n            });\r\n\r\n            return sorted;\r\n        },\r\n\r\n        /**\r\n         * Handle header click for sorting\r\n         */\r\n        handleHeaderClick(column) {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            // Toggle direction if same column, otherwise default to asc\r\n            if (state.column === column) {\r\n                const newDirection = state.direction === 'asc' ? 'desc' : 'asc';\r\n                this.updateSort(column, newDirection);\r\n            } else {\r\n                this.updateSort(column, 'asc');\r\n            }\r\n\r\n            // Update table display\r\n            if (window.PicksTableRenderer) {\r\n                window.PicksTableRenderer.updateTable();\r\n            }\r\n\r\n            // Update header indicators\r\n            this.updateSortIndicators();\r\n        },\r\n\r\n        /**\r\n         * Update sort state\r\n         */\r\n        updateSort(column, direction) {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.updateSort(column, direction);\r\n            } else {\r\n                window.tableState.sort = { column, direction };\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset sorting\r\n         */\r\n        resetSorting() {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetSort();\r\n            } else {\r\n                window.tableState.sort = { column: null, direction: 'asc' };\r\n            }\r\n\r\n            this.updateSortIndicators();\r\n\r\n            if (window.PicksTableRenderer) {\r\n                window.PicksTableRenderer.updateTable();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update sort indicators in headers\r\n         * NOTE: Sort indicators removed - filter icons are sufficient\r\n         */\r\n        /**\r\n         * Sort icon glyphs - standardized across all pages\r\n         * \u25B2 = unsorted/ascending (up triangle)\r\n         * \u25BC = descending (down triangle)\r\n         */\r\n        SORT_ICONS: {\r\n            unsorted: '\u25B2',\r\n            asc: '\u25B2',\r\n            desc: '\u25BC'\r\n        },\r\n\r\n        updateSortIndicators() {\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState?.sort;\r\n\r\n            const headers = document.querySelectorAll('th[data-sort]');\r\n\r\n            headers.forEach(th => {\r\n                // Remove both naming conventions for compatibility\r\n                th.classList.remove('sorted-asc', 'sorted-desc', 'sort-asc', 'sort-desc');\r\n                th.setAttribute('aria-sort', 'none');\r\n\r\n                const icon = th.querySelector('.sort-icon');\r\n                if (icon) {\r\n                    icon.textContent = this.SORT_ICONS.unsorted;\r\n                }\r\n            });\r\n\r\n            if (!state?.column) return;\r\n\r\n            const activeHeader = document.querySelector(`th[data-sort=\"${state.column}\"]`);\r\n            if (!activeHeader) return;\r\n\r\n            const isDesc = state.direction === 'desc';\r\n            // Use standardized class names\r\n            activeHeader.classList.add(isDesc ? 'sorted-desc' : 'sorted-asc');\r\n            activeHeader.setAttribute('aria-sort', isDesc ? 'descending' : 'ascending');\r\n\r\n            const activeIcon = activeHeader.querySelector('.sort-icon');\r\n            if (activeIcon) {\r\n                activeIcon.textContent = isDesc ? this.SORT_ICONS.desc : this.SORT_ICONS.asc;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Initialize sort functionality\r\n         */\r\n        initSorting() {\r\n            // Select all sort buttons\r\n            const sortButtons = document.querySelectorAll('.th-sort-btn');\r\n            \r\n            sortButtons.forEach(btn => {\r\n                btn.addEventListener('click', (e) => {\r\n                    // Stop propagation to prevent bubbling issues\r\n                    e.stopPropagation();\r\n                    \r\n                    const th = btn.closest('th');\r\n                    if (!th) return;\r\n                    \r\n                    const column = th.getAttribute('data-sort');\r\n                    if (column) {\r\n                        this.handleHeaderClick(column);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Initialize indicators\r\n            this.updateSortIndicators();\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksSortManager = SortManager;\r\n\r\n})();\n\n/* === assets/js/modules/picks-table-renderer.js === */\n/**\r\n * Picks Table Renderer Module\r\n * Handles all table rendering, DOM updates, and visual presentation\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const TableRenderer = {\r\n        /**\r\n         * Get parent rows only (excluding parlay-legs rows)\r\n         */\r\n        getParentRowsOnly(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(row =>\r\n                row && row.tagName === 'TR' && !row.classList.contains('parlay-legs')\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get all direct child rows from tbody\r\n         */\r\n        getDirectChildRows(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(node => node && node.tagName === 'TR');\r\n        },\r\n\r\n        /**\r\n         * Check if row is visible for zebra striping\r\n         */\r\n        isRowVisibleForZebra(row) {\r\n            if (!row) return false;\r\n            if (row.style.display === 'none') return false;\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Apply zebra stripes to table\r\n         */\r\n        applyZebraStripes() {\r\n            if (window.ZebraStripes && typeof window.ZebraStripes.applyPicksTableZebraStripes === 'function') {\r\n                window.ZebraStripes.applyPicksTableZebraStripes();\r\n                return;\r\n            }\r\n\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            const visibleRows = this.getParentRowsOnly(tbody)\r\n                .filter(row => this.isRowVisibleForZebra(row));\r\n\r\n            visibleRows.forEach((row, index) => {\r\n                const className = index % 2 === 0 ? 'zebra-even' : 'zebra-odd';\r\n                const otherClass = index % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n\r\n                row.classList.remove(otherClass);\r\n                row.classList.add(className);\r\n                row.classList.add('zebra-row');\r\n\r\n                // Apply same class to associated parlay-legs row\r\n                if (window.PicksParlayManager) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        legsRow.classList.remove(otherClass);\r\n                        legsRow.classList.add(className);\r\n                        legsRow.classList.add('zebra-row');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update table with current filters and sorting\r\n         */\r\n        updateTable() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            let parentRows = this.getParentRowsOnly(tbody);\r\n\r\n            // Apply sorting if active\r\n            const sortState = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            if (sortState.column) {\r\n                parentRows = window.PicksSortManager ?\r\n                    window.PicksSortManager.applySorting(parentRows) :\r\n                    parentRows;\r\n\r\n                // Re-append in sorted order, keeping parlay-legs with parents\r\n                parentRows.forEach(row => {\r\n                    tbody.appendChild(row);\r\n\r\n                    // Delegate parlay leg row management to ParlayManager\r\n                    if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                        window.PicksParlayManager.ensureLegRowPosition(row);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Apply filters to rows\r\n            this.applyFiltersToRows(parentRows);\r\n\r\n            // Ensure parlay visibility is synced with state\r\n            if (window.PicksParlayManager) {\r\n                window.PicksParlayManager.refreshAllParlayVisibility();\r\n            }\r\n\r\n            // Apply zebra stripes\r\n            this.applyZebraStripes();\r\n\r\n            // Render filter chips\r\n            this.renderFilterChips();\r\n        },\r\n\r\n        /**\r\n         * Apply filters to table rows\r\n         */\r\n        applyFiltersToRows(rows) {\r\n            if (!rows) {\r\n                const tbody = document.getElementById('picks-tbody');\r\n                rows = this.getParentRowsOnly(tbody);\r\n            }\r\n\r\n            rows.forEach(row => {\r\n                // Prioritize DashboardFilterPills for dashboard page filters\r\n                // Falls back to PicksFilterManager for other pages\r\n                const shouldShow = window.DashboardFilterPills?.passesAllFilters ?\r\n                    window.DashboardFilterPills.passesAllFilters(row) :\r\n                    (window.PicksFilterManager ?\r\n                        window.PicksFilterManager.passesAllFilters(row) :\r\n                        true);\r\n\r\n                row.style.display = shouldShow ? '' : 'none';\r\n\r\n                // Manage parlay-legs visibility via ParlayManager\r\n                if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        if (!shouldShow) {\r\n                            legsRow.style.display = 'none';\r\n                        } else {\r\n                            // Only show if parent is expanded\r\n                            const parlayId = row.getAttribute('data-row-id');\r\n                            const isExpanded = window.PicksStateManager ?\r\n                                window.PicksStateManager.isParlayExpanded(parlayId) :\r\n                                row.getAttribute('aria-expanded') === 'true';\r\n\r\n                            legsRow.style.display = isExpanded ? 'table-row' : 'none';\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render filter chips showing active filters\r\n         */\r\n        renderFilterChips() {\r\n            const container = document.querySelector('.filter-chips') ||\r\n                            document.getElementById('filter-chips-container');\r\n            if (!container) return;\r\n\r\n            container.innerHTML = '';\r\n\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getState() :\r\n                window.tableState;\r\n\r\n            const filters = state.filters;\r\n            const chips = [];\r\n\r\n            // Date filters\r\n            if (filters.date.selectedDates && filters.date.selectedDates.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'dates',\r\n                    label: `Dates: ${filters.date.selectedDates.length} selected`,\r\n                    value: filters.date.selectedDates\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedTimes && filters.date.selectedTimes.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'times',\r\n                    label: `Times: ${filters.date.selectedTimes.length} selected`,\r\n                    value: filters.date.selectedTimes\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedBooks && filters.date.selectedBooks.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'books',\r\n                    label: `Books: ${filters.date.selectedBooks.length} selected`,\r\n                    value: filters.date.selectedBooks\r\n                });\r\n            }\r\n\r\n            // Matchup filters\r\n            if (filters.matchup.league || filters.matchup.selectedTeams) {\r\n                const label = filters.matchup.selectedTeams ?\r\n                    `Teams: ${filters.matchup.selectedTeams.length} selected` :\r\n                    `League: ${filters.matchup.league}`;\r\n                chips.push({\r\n                    type: 'matchup',\r\n                    label: label,\r\n                    value: filters.matchup\r\n                });\r\n            }\r\n\r\n            // Pick filters\r\n            if (filters.pick.betType || filters.pick.subtype) {\r\n                const parts = [];\r\n                if (filters.pick.betType) parts.push(filters.pick.betType);\r\n                if (filters.pick.subtype) parts.push(filters.pick.subtype);\r\n                chips.push({\r\n                    type: 'pick',\r\n                    label: `Pick: ${parts.join(' - ')}`,\r\n                    value: filters.pick\r\n                });\r\n            }\r\n\r\n            if (filters.pick.segment) {\r\n                chips.push({\r\n                    type: 'segment',\r\n                    label: `Segment: ${filters.pick.segment}`,\r\n                    value: filters.pick.segment\r\n                });\r\n            }\r\n\r\n            // Risk filters\r\n            if (filters.risk.selectedRiskRanges && filters.risk.selectedRiskRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'risk',\r\n                    label: `Risk: ${filters.risk.selectedRiskRanges.length} ranges`,\r\n                    value: filters.risk.selectedRiskRanges\r\n                });\r\n            }\r\n\r\n            if (filters.risk.selectedWinRanges && filters.risk.selectedWinRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'win',\r\n                    label: `Win: ${filters.risk.selectedWinRanges.length} ranges`,\r\n                    value: filters.risk.selectedWinRanges\r\n                });\r\n            }\r\n\r\n            // Status filters\r\n            if (filters.status && filters.status.length > 0) {\r\n                chips.push({\r\n                    type: 'status',\r\n                    label: `Status: ${filters.status.join(', ')}`,\r\n                    value: filters.status\r\n                });\r\n            }\r\n\r\n            // Render chips\r\n            chips.forEach(chip => {\r\n                const chipEl = document.createElement('div');\r\n                chipEl.className = 'filter-chip';\r\n                chipEl.setAttribute('data-filter-type', chip.type);\r\n                if (chip.subtype) {\r\n                    chipEl.setAttribute('data-filter-subtype', chip.subtype);\r\n                }\r\n\r\n                const labelSpan = document.createElement('span');\r\n                labelSpan.className = 'filter-chip-label';\r\n                labelSpan.textContent = chip.label;\r\n\r\n                const removeBtn = document.createElement('button');\r\n                removeBtn.className = 'filter-chip-remove';\r\n                removeBtn.innerHTML = '&times;';\r\n                removeBtn.setAttribute('aria-label', `Remove ${chip.label} filter`);\r\n                removeBtn.onclick = () => this.removeFilterChip(chip.type, chip.subtype);\r\n\r\n                chipEl.appendChild(labelSpan);\r\n                chipEl.appendChild(removeBtn);\r\n                container.appendChild(chipEl);\r\n            });\r\n\r\n            // Add clear all button if there are chips\r\n            if (chips.length > 0) {\r\n                const clearAllBtn = document.createElement('button');\r\n                clearAllBtn.className = 'clear-all-filters';\r\n                clearAllBtn.textContent = 'Clear All';\r\n                clearAllBtn.onclick = () => this.clearAllFilters();\r\n                container.appendChild(clearAllBtn);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove a filter chip\r\n         */\r\n        removeFilterChip(type, subtype) {\r\n            if (window.PicksFilterManager) {\r\n                window.PicksFilterManager.clearFilterByChip(type, subtype);\r\n            } else {\r\n                console.warn('PicksFilterManager not loaded');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear all filters\r\n         */\r\n        clearAllFilters() {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetAllFilters();\r\n            }\r\n            this.updateTable();\r\n        },\r\n\r\n        /**\r\n         * Update filter indicators in header\r\n         */\r\n        updateFilterIndicators() {\r\n            const indicators = {\r\n                'date-filter-btn': window.tableState.filters.date.selectedDates ||\r\n                                   window.tableState.filters.date.selectedTimes ||\r\n                                   window.tableState.filters.date.selectedBooks,\r\n                'matchup-filter-btn': window.tableState.filters.matchup.league ||\r\n                                     window.tableState.filters.matchup.selectedTeams,\r\n                'pick-filter-btn': window.tableState.filters.pick.betType ||\r\n                                  window.tableState.filters.pick.subtype,\r\n                'risk-filter-btn': window.tableState.filters.risk.selectedRiskRanges?.length > 0 ||\r\n                                  window.tableState.filters.risk.selectedWinRanges?.length > 0,\r\n                'status-filter-btn': window.tableState.filters.status?.length > 0\r\n            };\r\n\r\n            Object.entries(indicators).forEach(([btnId, hasFilter]) => {\r\n                const btn = document.getElementById(btnId);\r\n                if (!btn) return;\r\n\r\n                const indicator = btn.querySelector('.filter-indicator') ||\r\n                                btn.querySelector('.indicator');\r\n\r\n                if (hasFilter) {\r\n                    btn.classList.add('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'inline-block';\r\n                    }\r\n                } else {\r\n                    btn.classList.remove('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'none';\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Update filter count\r\n            const filterCount = window.PicksStateManager ?\r\n                window.PicksStateManager.getActiveFilterCount() : 0;\r\n\r\n            const countEl = document.getElementById('active-filter-count');\r\n            if (countEl) {\r\n                countEl.textContent = filterCount > 0 ? `(${filterCount})` : '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Announce filter changes for accessibility\r\n         */\r\n        announceFilterChange(message) {\r\n            let announcer = document.getElementById('filter-announcer');\r\n            if (!announcer) {\r\n                announcer = document.createElement('div');\r\n                announcer.id = 'filter-announcer';\r\n                announcer.setAttribute('role', 'status');\r\n                announcer.setAttribute('aria-live', 'polite');\r\n                announcer.setAttribute('aria-atomic', 'true');\r\n                announcer.style.position = 'absolute';\r\n                announcer.style.left = '-10000px';\r\n                announcer.style.width = '1px';\r\n                announcer.style.height = '1px';\r\n                announcer.style.overflow = 'hidden';\r\n                document.body.appendChild(announcer);\r\n            }\r\n            announcer.textContent = message;\r\n        },\r\n\r\n        /**\r\n         * Refresh the table display\r\n         */\r\n        refresh() {\r\n            this.updateTable();\r\n            this.updateFilterIndicators();\r\n        }\r\n    };\r\n\r\n    // Create debounced version of applyZebraStripes for performance\r\n    let zebraDebounceTimer;\r\n    TableRenderer.debouncedZebraStripes = function() {\r\n        clearTimeout(zebraDebounceTimer);\r\n        zebraDebounceTimer = setTimeout(() => {\r\n            TableRenderer.applyZebraStripes();\r\n        }, 50);\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksTableRenderer = TableRenderer;\r\n\r\n})();\n\n/* === dashboard/js/kpi-calculator.js === */\n/**\r\n * KPI Calculator\r\n * Calculates and updates KPI metrics from picks data\r\n */\r\n\r\nfunction parseScoreFromResult(resultString) {\r\n  /**\r\n   * Parse score from result string\r\n   * E.g., \"Raiders 7 - Broncos 10\" => { away: 7, home: 10 }\r\n   */\r\n  if (!resultString) return { away: null, home: null };\r\n\r\n  const scorePattern = /(\\d+)\\s*-\\s*(\\d+)/;\r\n  const match = resultString.match(scorePattern);\r\n\r\n  if (match) {\r\n    return {\r\n      away: parseInt(match[1]),\r\n      home: parseInt(match[2]),\r\n    };\r\n  }\r\n\r\n  return { away: null, home: null };\r\n}\r\n\r\nfunction normalizeStatus(status) {\r\n  const value = (status || \"\").toString().toLowerCase();\r\n  return value === \"lost\" ? \"loss\" : value;\r\n}\r\n\r\nfunction calculateKPIs(picks) {\r\n  /**\r\n   * Calculate all KPI metrics from picks array\r\n   */\r\n  // Defensive: ensure picks is an array\r\n  if (!picks || !Array.isArray(picks)) {\r\n    picks = [];\r\n  }\r\n\r\n  const kpis = {\r\n    activePicks: 0,\r\n    activeRisk: 0,\r\n    toWin: 0,\r\n    onTrackAmount: 0,\r\n    atRiskAmount: 0,\r\n    projected: 0,\r\n    netProfit: 0,\r\n    totalWon: 0,\r\n    totalLost: 0,\r\n    wins: 0,\r\n    losses: 0,\r\n    pushes: 0,\r\n    roePercentage: 0,\r\n    winPercentage: 0,\r\n    currentStreak: \"\",\r\n    totalRisk: 0,\r\n    topLeague: { name: \"N/A\", winRate: 0 },\r\n    topBetType: { name: \"N/A\", winRate: 0 },\r\n    topSegment: { name: \"N/A\", winRate: 0 },\r\n    topSportsbook: { name: \"N/A\", winRate: 0 },\r\n  };\r\n\r\n  // Track stats by category for \"top\" calculations\r\n  const leagueStats = {};\r\n  const betTypeStats = {};\r\n  const segmentStats = {};\r\n  const sportsbookStats = {};\r\n\r\n  picks.forEach((pick) => {\r\n    // Safely parse risk and win values - handle both string and number types\r\n    const riskStr =\r\n      pick.risk != null ? String(pick.risk).replace(/,/g, \"\") : \"0\";\r\n    const winStr = pick.win != null ? String(pick.win).replace(/,/g, \"\") : \"0\";\r\n    const risk = parseFloat(riskStr) || 0;\r\n    const win = parseFloat(winStr) || 0;\r\n    const status = normalizeStatus(pick.status);\r\n    const isLoss = status === \"loss\";\r\n\r\n    // Active picks (pending, live, on-track, at-risk)\r\n    if (\r\n      status === \"pending\" ||\r\n      status === \"live\" ||\r\n      status === \"on-track\" ||\r\n      status === \"at-risk\"\r\n    ) {\r\n      kpis.activePicks++;\r\n      kpis.toWin += win;\r\n      kpis.activeRisk += risk;\r\n\r\n      // Track on-track vs at-risk amounts\r\n      if (status === \"on-track\") {\r\n        kpis.onTrackAmount += win; // Potential payout for on-track picks\r\n      } else if (status === \"at-risk\") {\r\n        kpis.atRiskAmount += risk; // Risk amount for at-risk picks\r\n      } else if (status === \"pending\") {\r\n        // Pending picks are neither on-track nor at-risk yet\r\n        kpis.onTrackAmount += win * 0.5; // Assume 50% distribution for pending\r\n        kpis.atRiskAmount += risk * 0.5;\r\n      }\r\n    }\r\n\r\n    // Wins\r\n    if (status === \"win\") {\r\n      kpis.wins++;\r\n      kpis.totalWon += win;\r\n\r\n      // Track wins by category\r\n      trackWin(leagueStats, pick.league || \"Unknown\");\r\n      trackWin(betTypeStats, pick.pickType || \"Unknown\");\r\n      trackWin(segmentStats, pick.segment || \"Full Game\");\r\n      trackWin(sportsbookStats, pick.book || \"Unknown\");\r\n    }\r\n\r\n    // Losses\r\n    if (isLoss) {\r\n      kpis.losses++;\r\n      kpis.totalLost += risk;\r\n\r\n      // Track losses by category\r\n      trackLoss(leagueStats, pick.league || \"Unknown\");\r\n      trackLoss(betTypeStats, pick.pickType || \"Unknown\");\r\n      trackLoss(segmentStats, pick.segment || \"Full Game\");\r\n      trackLoss(sportsbookStats, pick.book || \"Unknown\");\r\n    }\r\n\r\n    // Pushes\r\n    if (status === \"push\") {\r\n      kpis.pushes++;\r\n    }\r\n\r\n    // Total risk\r\n    kpis.totalRisk += risk;\r\n  });\r\n\r\n  // Calculate projected gain if all active picks win\r\n  kpis.projected = kpis.toWin - kpis.activeRisk;\r\n\r\n  // Calculate net profit/loss\r\n  kpis.netProfit = kpis.totalWon - kpis.totalLost;\r\n\r\n  // Calculate percentages\r\n  const totalGames = kpis.wins + kpis.losses + kpis.pushes;\r\n  const totalDecided = kpis.wins + kpis.losses;\r\n  if (totalDecided > 0) {\r\n    kpis.winPercentage = ((kpis.wins / totalDecided) * 100).toFixed(1);\r\n  } else {\r\n    kpis.winPercentage = \"0.0\";\r\n  }\r\n\r\n  // Calculate ROE (Return on Equity)\r\n  if (kpis.totalRisk > 0) {\r\n    kpis.roePercentage = ((kpis.netProfit / kpis.totalRisk) * 100).toFixed(1);\r\n  } else {\r\n    kpis.roePercentage = \"0.0\";\r\n  }\r\n\r\n  // Calculate streak\r\n  kpis.currentStreak = calculateStreak(picks);\r\n\r\n  // Find top performers\r\n  kpis.topLeague = findTopPerformer(leagueStats);\r\n  kpis.topBetType = findTopPerformer(betTypeStats);\r\n  kpis.topSegment = findTopPerformer(segmentStats);\r\n  kpis.topSportsbook = findTopPerformer(sportsbookStats);\r\n\r\n  return kpis;\r\n}\r\n\r\nfunction trackWin(stats, key) {\r\n  if (!stats[key]) stats[key] = { wins: 0, losses: 0 };\r\n  stats[key].wins++;\r\n}\r\n\r\nfunction trackLoss(stats, key) {\r\n  if (!stats[key]) stats[key] = { wins: 0, losses: 0 };\r\n  stats[key].losses++;\r\n}\r\n\r\nfunction findTopPerformer(stats) {\r\n  let topName = \"N/A\";\r\n  let topWinRate = 0;\r\n\r\n  for (const [name, record] of Object.entries(stats)) {\r\n    const total = record.wins + record.losses;\r\n    if (total >= 3) {\r\n      // Minimum 3 picks to qualify\r\n      const winRate = (record.wins / total) * 100;\r\n      if (winRate > topWinRate) {\r\n        topWinRate = winRate;\r\n        topName = name;\r\n      }\r\n    }\r\n  }\r\n\r\n  return { name: topName, winRate: topWinRate.toFixed(1) };\r\n}\r\n\r\nfunction calculateStreak(picks) {\r\n  /**\r\n   * Calculate current win/loss streak\r\n   */\r\n  const finishedPicks = picks\r\n    .filter((p) => {\r\n      const status = normalizeStatus(p.status);\r\n      return status === \"win\" || status === \"loss\";\r\n    })\r\n    .reverse(); // Most recent first\r\n\r\n  if (finishedPicks.length === 0) return \"W0\";\r\n\r\n  let streak = 1;\r\n  const lastStatus = normalizeStatus(finishedPicks[0].status);\r\n\r\n  for (let i = 1; i < finishedPicks.length; i++) {\r\n    if (normalizeStatus(finishedPicks[i].status) === lastStatus) {\r\n      streak++;\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return lastStatus === \"win\" ? `W${streak}` : `L${streak}`;\r\n}\r\n\r\nfunction updateKPITiles(kpis) {\r\n  /**\r\n   * Update the KPI tiles in the dashboard\r\n   * Uses dual-layer structure (.kpi-tile-layer) with flip functionality\r\n   */\r\n\r\n  // Tile 1 - Projected PnL (front) / Net Profit (back)\r\n  const tile1 = document.querySelector('[data-tile-id=\"1\"]');\r\n  if (tile1) {\r\n    const layers = tile1.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Projected PnL\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const projectedSign = kpis.projected >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${projectedSign}$${Math.abs(kpis.projected).toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (kpis.projected > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (kpis.projected < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `${kpis.activePicks} Active Picks`;\r\n      }\r\n    }\r\n\r\n    // Back layer - Net Profit\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const netSign = kpis.netProfit >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${netSign}$${Math.abs(kpis.netProfit).toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (kpis.netProfit > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (kpis.netProfit < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Season Total`;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Tile 2 - Win Rate (front) / ROI (back)\r\n  const tile2 = document.querySelector('[data-tile-id=\"2\"]');\r\n  if (tile2) {\r\n    const layers = tile2.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Win Rate\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `${kpis.winPercentage}%`;\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `${kpis.wins}-${kpis.losses}-${kpis.pushes} Record`;\r\n      }\r\n    }\r\n\r\n    // Back layer - ROI\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        const roiSign = parseFloat(kpis.roePercentage) >= 0 ? \"+\" : \"\";\r\n        valueEl.textContent = `${roiSign}${kpis.roePercentage}%`;\r\n\r\n        valueEl.classList.remove(\"positive\", \"negative\");\r\n        if (parseFloat(kpis.roePercentage) > 0) {\r\n          valueEl.classList.add(\"positive\");\r\n        } else if (parseFloat(kpis.roePercentage) < 0) {\r\n          valueEl.classList.add(\"negative\");\r\n        }\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Return on Equity`;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Tile 3 - Active Volume (front) / To Win (back)\r\n  const tile3 = document.querySelector('[data-tile-id=\"3\"]');\r\n  if (tile3) {\r\n    const layers = tile3.querySelectorAll(\".kpi-tile-layer\");\r\n\r\n    // Front layer - Active Risk\r\n    if (layers[0]) {\r\n      const valueEl = layers[0].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[0].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `$${kpis.activeRisk.toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Total at Risk`;\r\n      }\r\n    }\r\n\r\n    // Back layer - To Win\r\n    if (layers[1]) {\r\n      const valueEl = layers[1].querySelector(\".kpi-value\");\r\n      const subtextEl = layers[1].querySelector(\".kpi-subtext\");\r\n\r\n      if (valueEl) {\r\n        valueEl.textContent = `$${kpis.toWin.toLocaleString(\"en-US\", { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n        valueEl.classList.add(\"positive\");\r\n      }\r\n\r\n      if (subtextEl) {\r\n        subtextEl.textContent = `Potential Payout`;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Export functions\r\nwindow.calculateKPIs = calculateKPIs;\r\nwindow.updateKPITiles = updateKPITiles;\r\nwindow.parseScoreFromResult = parseScoreFromResult;\r\n\r\n// CJS export for Node.js testing\r\nif (typeof module !== \"undefined\" && module.exports) {\r\n  module.exports = { calculateKPIs, parseScoreFromResult, normalizeStatus };\r\n}\r\n\n\n/* === dashboard/js/picks-service.js === */\n/**\n * Azure Picks Service - Enterprise-grade pick storage via Azure Cosmos DB\n * Replaces localStorage-based LocalPicksManager\n *\n * @module PicksService\n */\n\nconst PicksService = (function () {\n  \"use strict\";\n\n  // API Configuration\n  const apiBaseFromConfig =\n    window.DEV_OVERRIDE_CONFIG?.API_BASE_URL ||\n    window.APP_CONFIG?.API_BASE_URL ||\n    (window.APP_CONFIG?.FUNCTIONS_BASE_URL\n      ? `${window.APP_CONFIG.FUNCTIONS_BASE_URL.replace(/\\/+$/, \"\")}/api`\n      : \"\") ||\n    window.APP_CONFIG?.API_BASE_FALLBACK ||\n    \"/api\";\n  const API_BASE = apiBaseFromConfig;\n  const PICKS_ENDPOINT = `${API_BASE.replace(/\\/+$/, \"\")}/picks`;\n\n  // Cache for performance (optional local caching)\n  let picksCache = null;\n  let lastFetch = null;\n  const CACHE_TTL = 30000; // 30 seconds\n\n  /**\n   * Make authenticated API request\n   */\n  async function apiRequest(endpoint, options = {}) {\n    const url = endpoint.startsWith(\"http\")\n      ? endpoint\n      : `${PICKS_ENDPOINT}${endpoint}`;\n\n    const config = {\n      method: options.method || \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...options.headers,\n      },\n      ...options,\n    };\n\n    if (options.body && typeof options.body === \"object\") {\n      config.body = JSON.stringify(options.body);\n    }\n\n    try {\n      const response = await fetch(url, config);\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.error || `API error: ${response.status}`);\n      }\n\n      return data;\n    } catch (error) {\n      console.error(\"[PicksService] API request failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Invalidate cache\n   */\n  function invalidateCache() {\n    picksCache = null;\n    lastFetch = null;\n  }\n\n  /**\n   * Get all picks with optional filtering\n   * @param {Object} filters - Query filters (status, league, date, etc.)\n   * @returns {Promise<Array>} Array of pick objects\n   */\n  async function getAll(filters = {}) {\n    // Build query string\n    const params = new URLSearchParams();\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== \"\") {\n        params.append(key, value);\n      }\n    });\n\n    const query = params.toString() ? `?${params}` : \"\";\n\n    try {\n      const response = await apiRequest(query);\n      return response.picks || [];\n    } catch (error) {\n      console.error(\"[PicksService] Failed to get picks:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get active picks (pending, live, on-track, at-risk)\n   * @returns {Promise<Array>} Array of active picks\n   */\n  async function getActive() {\n    try {\n      const response = await apiRequest(\"/active\");\n      return response.picks || [];\n    } catch (error) {\n      console.error(\"[PicksService] Failed to get active picks:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get settled picks (won, lost, push)\n   * @returns {Promise<Array>} Array of settled picks\n   */\n  async function getSettled() {\n    try {\n      const response = await apiRequest(\"/settled\");\n      return response.picks || [];\n    } catch (error) {\n      console.error(\"[PicksService] Failed to get settled picks:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * Get a single pick by ID\n   * @param {string} id - Pick ID\n   * @returns {Promise<Object|null>} Pick object or null\n   */\n  async function getById(id) {\n    try {\n      const response = await apiRequest(`/${id}`);\n      return response.pick || null;\n    } catch (error) {\n      if (error.message.includes(\"404\")) {\n        return null;\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * Get picks by league\n   * @param {string} league - League code (NBA, NFL, NCAAB, NCAAF)\n   * @returns {Promise<Array>} Array of picks for the league\n   */\n  async function getByLeague(league) {\n    return getAll({ league: league.toUpperCase() });\n  }\n\n  /**\n   * Get picks by date\n   * @param {string} date - Date in YYYY-MM-DD format\n   * @returns {Promise<Array>} Array of picks for the date\n   */\n  async function getByDate(date) {\n    return getAll({ date });\n  }\n\n  /**\n   * Get picks within a date range\n   * @param {string} fromDate - Start date (YYYY-MM-DD)\n   * @param {string} toDate - End date (YYYY-MM-DD)\n   * @returns {Promise<Array>} Array of picks in range\n   */\n  async function getByDateRange(fromDate, toDate) {\n    return getAll({ from: fromDate, to: toDate });\n  }\n\n  /**\n   * Get today's picks\n   * @returns {Promise<Array>} Array of today's picks\n   */\n  async function getToday() {\n    const today = new Date().toISOString().split(\"T\")[0];\n    return getByDate(today);\n  }\n\n  /**\n   * Create one or more picks\n   * @param {Object|Array} picks - Single pick or array of picks\n   * @returns {Promise<Object>} Creation result\n   */\n  async function create(picks) {\n    invalidateCache();\n\n    const body = Array.isArray(picks) ? picks : [picks];\n\n    try {\n      const response = await apiRequest(\"\", {\n        method: \"POST\",\n        body,\n      });\n\n      // Dispatch event for UI updates\n      window.dispatchEvent(\n        new CustomEvent(\"picksUpdated\", {\n          detail: { action: \"create\", count: response.created || body.length },\n        }),\n      );\n\n      return response;\n    } catch (error) {\n      console.error(\"[PicksService] Failed to create picks:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update a pick\n   * @param {string} id - Pick ID\n   * @param {Object} updates - Fields to update\n   * @returns {Promise<Object>} Updated pick\n   */\n  async function update(id, updates) {\n    invalidateCache();\n\n    try {\n      const response = await apiRequest(`/${id}`, {\n        method: \"PATCH\",\n        body: updates,\n      });\n\n      window.dispatchEvent(\n        new CustomEvent(\"picksUpdated\", {\n          detail: { action: \"update\", id },\n        }),\n      );\n\n      return response.pick;\n    } catch (error) {\n      console.error(\"[PicksService] Failed to update pick:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Update pick status (convenience method)\n   * @param {string} id - Pick ID\n   * @param {string} status - New status (pending, live, won, lost, push)\n   * @param {Object} additionalUpdates - Optional additional fields\n   * @returns {Promise<Object>} Updated pick\n   */\n  async function updateStatus(id, status, additionalUpdates = {}) {\n    return update(id, { status, ...additionalUpdates });\n  }\n\n  /**\n   * Mark pick as won\n   * @param {string} id - Pick ID\n   * @param {number} pnl - P&L amount\n   * @returns {Promise<Object>} Updated pick\n   */\n  async function markWon(id, pnl = 0) {\n    return update(id, { status: \"won\", result: \"WIN\", pnl });\n  }\n\n  /**\n   * Mark pick as lost\n   * @param {string} id - Pick ID\n   * @param {number} pnl - P&L amount (negative)\n   * @returns {Promise<Object>} Updated pick\n   */\n  async function markLost(id, pnl = 0) {\n    return update(id, { status: \"lost\", result: \"LOSS\", pnl: -Math.abs(pnl) });\n  }\n\n  /**\n   * Mark pick as push\n   * @param {string} id - Pick ID\n   * @returns {Promise<Object>} Updated pick\n   */\n  async function markPush(id) {\n    return update(id, { status: \"push\", result: \"PUSH\", pnl: 0 });\n  }\n\n  /**\n   * Delete a pick\n   * @param {string} id - Pick ID\n   * @returns {Promise<boolean>} Success status\n   */\n  async function remove(id) {\n    invalidateCache();\n\n    try {\n      await apiRequest(`/${id}`, { method: \"DELETE\" });\n\n      window.dispatchEvent(\n        new CustomEvent(\"picksUpdated\", {\n          detail: { action: \"delete\", id },\n        }),\n      );\n\n      return true;\n    } catch (error) {\n      console.error(\"[PicksService] Failed to delete pick:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Clear all picks (requires confirmation)\n   * @param {boolean} confirm - Must be true to proceed\n   * @returns {Promise<Object>} Deletion result\n   */\n  async function clearAll(confirm = false) {\n    if (!confirm) {\n      throw new Error(\"Must pass confirm=true to clear all picks\");\n    }\n\n    invalidateCache();\n\n    try {\n      const response = await apiRequest(\"/clear\", {\n        method: \"DELETE\",\n        headers: {\n          \"x-confirm-clear\": \"true\",\n        },\n      });\n\n      window.dispatchEvent(\n        new CustomEvent(\"picksUpdated\", {\n          detail: { action: \"clearAll\", deleted: response.deleted },\n        }),\n      );\n\n      return response;\n    } catch (error) {\n      console.error(\"[PicksService] Failed to clear picks:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate summary statistics for picks\n   * @param {Array} picks - Array of picks to analyze (optional, fetches if not provided)\n   * @returns {Promise<Object>} Summary stats\n   */\n  async function getSummary(picks = null) {\n    if (!picks) {\n      picks = await getAll();\n    }\n\n    const summary = {\n      total: picks.length,\n      pending: 0,\n      live: 0,\n      won: 0,\n      lost: 0,\n      push: 0,\n      totalRisk: 0,\n      totalPnl: 0,\n      byLeague: {},\n    };\n\n    picks.forEach((pick) => {\n      const status = (pick.status || \"pending\").toLowerCase();\n      if (status === \"pending\") summary.pending++;\n      else if (\n        status === \"live\" ||\n        status === \"on-track\" ||\n        status === \"at-risk\"\n      )\n        summary.live++;\n      else if (status === \"won\" || status === \"win\") summary.won++;\n      else if (status === \"lost\" || status === \"loss\") summary.lost++;\n      else if (status === \"push\") summary.push++;\n\n      summary.totalRisk += parseFloat(pick.risk) || 0;\n      summary.totalPnl += parseFloat(pick.pnl) || 0;\n\n      const league = pick.league || \"Unknown\";\n      if (!summary.byLeague[league]) {\n        summary.byLeague[league] = { total: 0, won: 0, lost: 0, pnl: 0 };\n      }\n      summary.byLeague[league].total++;\n      if (status === \"won\" || status === \"win\") summary.byLeague[league].won++;\n      if (status === \"lost\" || status === \"loss\")\n        summary.byLeague[league].lost++;\n      summary.byLeague[league].pnl += parseFloat(pick.pnl) || 0;\n    });\n\n    summary.winRate =\n      summary.won + summary.lost > 0\n        ? ((summary.won / (summary.won + summary.lost)) * 100).toFixed(1) + \"%\"\n        : \"N/A\";\n\n    return summary;\n  }\n\n  /**\n   * Migrate picks from localStorage to Azure (one-time operation)\n   * @returns {Promise<Object>} Migration result\n   */\n  async function migrateFromLocalStorage() {\n    const STORAGE_KEY = \"gbsv_picks\";\n\n    try {\n      const localData = localStorage.getItem(STORAGE_KEY);\n      if (!localData) {\n        return {\n          success: true,\n          migrated: 0,\n          message: \"No local picks to migrate\",\n        };\n      }\n\n      const localPicks = JSON.parse(localData);\n      if (!Array.isArray(localPicks) || localPicks.length === 0) {\n        return {\n          success: true,\n          migrated: 0,\n          message: \"No local picks to migrate\",\n        };\n      }\n\n      console.log(\n        `[PicksService] Migrating ${localPicks.length} picks from localStorage to Azure...`,\n      );\n\n      const result = await create(localPicks);\n\n      if (result.success) {\n        // Backup and clear localStorage\n        localStorage.setItem(`${STORAGE_KEY}_backup_${Date.now()}`, localData);\n        localStorage.removeItem(STORAGE_KEY);\n\n        console.log(\n          `[PicksService] Migration complete: ${result.created} picks migrated`,\n        );\n        return {\n          success: true,\n          migrated: result.created,\n          errors: result.errors,\n          message: `Successfully migrated ${result.created} picks to Azure`,\n        };\n      }\n\n      return { success: false, migrated: 0, error: \"Migration failed\" };\n    } catch (error) {\n      console.error(\"[PicksService] Migration failed:\", error);\n      return { success: false, migrated: 0, error: error.message };\n    }\n  }\n\n  /**\n   * Check if there are picks in localStorage that need migration\n   * @returns {Object} Migration status\n   */\n  function checkMigrationNeeded() {\n    const STORAGE_KEY = \"gbsv_picks\";\n    try {\n      const localData = localStorage.getItem(STORAGE_KEY);\n      if (!localData) return { needed: false, count: 0 };\n\n      const localPicks = JSON.parse(localData);\n      return {\n        needed: Array.isArray(localPicks) && localPicks.length > 0,\n        count: Array.isArray(localPicks) ? localPicks.length : 0,\n      };\n    } catch {\n      return { needed: false, count: 0 };\n    }\n  }\n\n  // Public API\n  return {\n    // Core CRUD\n    getAll,\n    getActive,\n    getSettled,\n    getById,\n    create,\n    update,\n    remove,\n    clearAll,\n\n    // Convenience getters\n    getByLeague,\n    getByDate,\n    getByDateRange,\n    getToday,\n\n    // Status updates\n    updateStatus,\n    markWon,\n    markLost,\n    markPush,\n\n    // Analytics\n    getSummary,\n\n    // Migration\n    migrateFromLocalStorage,\n    checkMigrationNeeded,\n\n    // Utilities\n    invalidateCache,\n  };\n})();\n\n// Export for module systems\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = PicksService;\n}\n\n// Make globally available\nwindow.PicksService = PicksService;\n\n\n/* === dashboard/js/smart-load-picks.js === */\n/**\n * Smart Picks Loader\n * Properly formats picks to match the dashboard template structure\n */\n\n// Modular League/Team Registry\nconst LEAGUE_REGISTRY = {\n  nfl: {\n    teams: [\n      \"bills\",\n      \"patriots\",\n      \"jets\",\n      \"dolphins\",\n      \"ravens\",\n      \"bengals\",\n      \"browns\",\n      \"steelers\",\n      \"jaguars\",\n      \"colts\",\n      \"titans\",\n      \"texans\",\n      \"chiefs\",\n      \"chargers\",\n      \"raiders\",\n      \"broncos\",\n      \"cowboys\",\n      \"eagles\",\n      \"giants\",\n      \"commanders\",\n      \"packers\",\n      \"vikings\",\n      \"lions\",\n      \"bears\",\n      \"saints\",\n      \"buccaneers\",\n      \"falcons\",\n      \"panthers\",\n      \"49ers\",\n      \"rams\",\n      \"seahawks\",\n      \"cardinals\",\n    ],\n    logoPath: \"team-logos/nfl-500-\",\n    display: \"NFL\",\n    color: \"#1d3557\",\n  },\n  nba: {\n    teams: [\n      \"suns\",\n      \"clippers\",\n      \"lakers\",\n      \"warriors\",\n      \"celtics\",\n      \"heat\",\n      \"knicks\",\n      \"spurs\",\n      \"mavericks\",\n      \"76ers\",\n      \"nets\",\n      \"kings\",\n      \"grizzlies\",\n      \"rockets\",\n      \"timberwolves\",\n      \"nuggets\",\n      \"pelicans\",\n      \"trail blazers\",\n      \"jazz\",\n      \"bucks\",\n      \"cavaliers\",\n      \"hawks\",\n      \"raptors\",\n      \"pacers\",\n      \"pistons\",\n      \"bulls\",\n      \"hornets\",\n    ],\n    logoPath: \"team-logos/nba-500-\",\n    display: \"NBA\",\n    color: \"#0a2342\",\n  },\n  ncaab: {\n    teams: [\n      \"georgia southern\",\n      \"appalachian st\",\n      \"appalachian state\",\n      \"uconn\",\n      \"connecticut\",\n      \"butler\",\n      \"abilene\",\n      \"oral roberts\",\n      \"marist\",\n      \"georgia tech\",\n      \"east tenn\",\n      \"north carolina\",\n      \"unc\",\n      \"duke\",\n      \"missouri st\",\n    ],\n    logoPath: \"team-logos/ncaam-500-\",\n    display: \"NCAAM\",\n    color: \"#264653\",\n  },\n  ncaaf: {\n    teams: [\"utsa\", \"south florida\", \"cal poly\", \"montana st\", \"arizona\"],\n    logoPath: \"team-logos/ncaaf-500-\",\n    display: \"NCAAF\",\n    color: \"#2a9d8f\",\n  },\n};\n\nfunction detectLeagueFromTeams(gameStr, awayTeam, homeTeam) {\n  const str = (gameStr || \"\").toLowerCase();\n  const away = (awayTeam || \"\").toLowerCase();\n  const home = (homeTeam || \"\").toLowerCase();\n  const combined = `${away} ${home}`.toLowerCase();\n  for (const [league, config] of Object.entries(LEAGUE_REGISTRY)) {\n    if (config.teams.some((team) => combined.includes(team))) {\n      return league;\n    }\n  }\n  // Default fallback\n  return \"nfl\";\n}\n\n// Modular team mapping for full name, abbreviation, logo, and league\nconst TEAM_MAP = {\n  // NFL\n  bills: { full: \"Buffalo Bills\", abbr: \"BUF\", logo: \"bills\", league: \"nfl\" },\n  jaguars: {\n    full: \"Jacksonville Jaguars\",\n    abbr: \"JAX\",\n    logo: \"jaguars\",\n    league: \"nfl\",\n  },\n  patriots: {\n    full: \"New England Patriots\",\n    abbr: \"NE\",\n    logo: \"patriots\",\n    league: \"nfl\",\n  },\n  jets: { full: \"New York Jets\", abbr: \"NYJ\", logo: \"jets\", league: \"nfl\" },\n  dolphins: {\n    full: \"Miami Dolphins\",\n    abbr: \"MIA\",\n    logo: \"dolphins\",\n    league: \"nfl\",\n  },\n  // ... add all NFL teams here\n  // NBA\n  suns: { full: \"Phoenix Suns\", abbr: \"PHX\", logo: \"suns\", league: \"nba\" },\n  clippers: {\n    full: \"Los Angeles Clippers\",\n    abbr: \"LAC\",\n    logo: \"clippers\",\n    league: \"nba\",\n  },\n  // ... add all NBA teams here\n  // NCAAM\n  \"georgia southern\": {\n    full: \"Georgia Southern\",\n    abbr: \"GASO\",\n    logo: \"georgia_southern\",\n    league: \"ncaab\",\n  },\n  // ... add all NCAAM teams here\n  // NCAAF\n  utsa: { full: \"UTSA\", abbr: \"UTSA\", logo: \"utsa\", league: \"ncaaf\" },\n  // ... add all NCAAF teams here\n};\n\nfunction getTeamInfo(teamKey) {\n  return (\n    TEAM_MAP[teamKey?.toLowerCase()] || {\n      full: teamKey,\n      abbr: teamKey,\n      logo: teamKey,\n      league: null,\n    }\n  );\n}\n\nfunction detectLeagueFromTeams(gameStr, awayTeam, homeTeam) {\n  const str = (gameStr || \"\").toLowerCase();\n  const away = (awayTeam || \"\").toLowerCase();\n  const home = (homeTeam || \"\").toLowerCase();\n  const combined = `${away} ${home}`.toLowerCase();\n\n  // Check NBA teams first\n  if (NBA_TEAMS.some((team) => combined.includes(team))) {\n    return \"nba\";\n  }\n\n  // Check NFL teams\n  if (NFL_TEAMS.some((team) => combined.includes(team))) {\n    return \"nfl\";\n  }\n\n  // Check College Basketball\n  if (COLLEGE_BASKETBALL_TEAMS.some((team) => combined.includes(team))) {\n    return \"ncaab\";\n  }\n\n  // Check College Football\n  if (COLLEGE_FOOTBALL_TEAMS.some((team) => combined.includes(team))) {\n    return \"ncaaf\";\n  }\n\n  // Default to NFL\n  return \"nfl\";\n}\n\n// Use getTeamInfo(teamKey) for all team display logic\n\nlet teamRecordsCache = null;\nlet teamRecordsPromise = null;\nconst globalScope = typeof window !== \"undefined\" ? window : globalThis;\n\nif (\n  globalScope &&\n  typeof globalScope.__TEAM_RECORDS_PROMISE__ === \"undefined\"\n) {\n  globalScope.__TEAM_RECORDS_PROMISE__ = null;\n}\n\nfunction normalizeTeamRecordValue(value) {\n  if (value === undefined || value === null) return \"\";\n  const cleaned = String(value).trim().replace(/[()]/g, \"\");\n  return cleaned ? `(${cleaned})` : \"\";\n}\n\nfunction getTeamRecordFromCache(teamKey) {\n  if (!teamRecordsCache || !teamKey) return \"\";\n  const upperKey = teamKey.toUpperCase();\n  return (\n    teamRecordsCache[upperKey] ||\n    teamRecordsCache[teamKey] ||\n    teamRecordsCache[upperKey.toLowerCase()] ||\n    \"\"\n  );\n}\n\nfunction populateTeamRecords(root = document, options = {}) {\n  if (!teamRecordsCache) return;\n  const { force = false } = options;\n  const scope =\n    root && typeof root.querySelectorAll === \"function\" ? root : document;\n\n  scope\n    .querySelectorAll(\n      \".team-record[data-team], .boxscore-team-record[data-team]\",\n    )\n    .forEach((el) => {\n      if (!force && el.textContent && el.textContent.trim()) {\n        return;\n      }\n      const teamKey = el.getAttribute(\"data-team\");\n      const recordValue = getTeamRecordFromCache(teamKey);\n      if (recordValue) {\n        el.textContent = normalizeTeamRecordValue(recordValue);\n      }\n    });\n}\n\nfunction populateTeamRecordsWhenReady(root = document, options = {}) {\n  if (!root || typeof populateTeamRecords !== \"function\") {\n    return;\n  }\n\n  const runPopulate = () => populateTeamRecords(root, options);\n\n  if (teamRecordsCache) {\n    runPopulate();\n    return;\n  }\n\n  const pending =\n    teamRecordsPromise ||\n    (typeof loadTeamRecords === \"function\" ? loadTeamRecords() : null);\n  if (pending && typeof pending.then === \"function\") {\n    pending\n      .then(() => runPopulate())\n      .catch((err) => console.warn(\"[RECORDS] Deferred populate failed:\", err));\n  }\n}\n\nif (globalScope) {\n  globalScope.populateTeamRecords = populateTeamRecords;\n  globalScope.populateTeamRecordsWhenReady = populateTeamRecordsWhenReady;\n}\n\nfunction parsePickDescription(description) {\n  /**\n   * Parse pick description to extract pick type, team, line, odds\n   * Examples:\n   * \"Raiders @ Broncos Under 43 (-110)\" - Game Total\n   * \"Raiders O 15 (-125)\" - Team Total\n   * \"Phoenix Suns Moneyline (-145)\" - Moneyline\n   * \"Phoenix Suns -2 (-120)\" - Spread\n   */\n\n  const result = {\n    matchup: \"\",\n    pickType: \"\",\n    pickTeam: \"\",\n    line: \"\",\n    odds: \"\",\n    segment: \"Full Game\",\n    isTeamTotal: false,\n  };\n\n  // Extract odds\n  const oddsMatch = description.match(/\\(([+-]\\d+)\\)/);\n  if (oddsMatch) {\n    result.odds = oddsMatch[1];\n  }\n\n  // Check for segments (1st Half, 2nd Half, etc.)\n  if (description.includes(\"1st Half\")) {\n    result.segment = \"1st Half\";\n  } else if (description.includes(\"2nd Half\")) {\n    result.segment = \"2nd Half\";\n  } else if (description.includes(\"1st Quarter\")) {\n    result.segment = \"1st Quarter\";\n  }\n\n  // Check for Team Total (e.g., \"Raiders O 15\" or \"Raiders U 20.5\")\n  const teamTotalMatch = description.match(/^(.+?)\\s+([OU])\\s+(\\d+\\.?\\d*)/i);\n  if (teamTotalMatch && !description.includes(\"@\")) {\n    result.pickTeam = teamTotalMatch[1].trim();\n    result.pickType =\n      teamTotalMatch[2].toUpperCase() === \"O\" ? \"Over\" : \"Under\";\n    result.line = teamTotalMatch[3];\n    result.isTeamTotal = true;\n    return result;\n  }\n\n  // Check for Game Total (has @ in description and Over/Under)\n  if (description.match(/under|over/i)) {\n    const totalMatch = description.match(/(under|over)\\s+(\\d+\\.?\\d*)/i);\n    if (totalMatch) {\n      result.pickType =\n        totalMatch[1].charAt(0).toUpperCase() + totalMatch[1].slice(1);\n      result.line = totalMatch[2];\n      result.isTeamTotal = false; // Game total, not team total\n    }\n  } else if (description.match(/moneyline|ml/i)) {\n    result.pickType = \"Moneyline\";\n    // Extract team name before \"Moneyline\"\n    const mlMatch = description.match(/^(.+?)\\s+(?:Moneyline|ML)/i);\n    if (mlMatch) {\n      result.pickTeam = mlMatch[1].replace(/@.*$/, \"\").trim();\n    }\n  } else {\n    // Spread - extract team name and line\n    const spreadMatch = description.match(/^(.+?)\\s+([+-]\\d+\\.?\\d*)/);\n    if (spreadMatch) {\n      result.pickTeam = spreadMatch[1].replace(/@.*$/, \"\").trim();\n      result.pickType = \"Spread\";\n      result.line = spreadMatch[2];\n    }\n  }\n\n  return result;\n}\n\nfunction buildDescriptionFromFields(pick = {}) {\n  const parts = [];\n  if (pick.awayTeam && pick.homeTeam) {\n    parts.push(`${pick.awayTeam} @ ${pick.homeTeam}`);\n  } else if (pick.game) {\n    parts.push(pick.game);\n  } else if (pick.pickTeam) {\n    parts.push(pick.pickTeam);\n  }\n\n  const type = (pick.pickType || \"\").toLowerCase();\n  if (type === \"moneyline\" || type === \"ml\") {\n    parts.push(\"ML\");\n  } else if (type === \"spread\" && pick.line) {\n    parts.push(pick.line);\n  } else if (\n    (type === \"total\" || type === \"team-total\") &&\n    pick.pickDirection\n  ) {\n    parts.push(`${pick.pickDirection} ${pick.line || \"\"}`.trim());\n  } else if (pick.line) {\n    parts.push(pick.line);\n  }\n\n  if (pick.odds) {\n    parts.push(`(${pick.odds})`);\n  }\n\n  return parts.filter(Boolean).join(\" \").trim();\n}\n\nfunction parseTeamsFromGame(gameString) {\n  /**\n   * Extract away and home teams from game string\n   * E.g., \"Las Vegas Raiders @ Denver Broncos\" or \"Los Angeles Clippers / Phoenix Suns\"\n   */\n  if (!gameString) return { away: \"\", home: \"\" };\n\n  const separators = [\"@\", \" / \", \" vs \", \" vs. \"];\n  for (let sep of separators) {\n    if (gameString.includes(sep)) {\n      const parts = gameString.split(sep);\n      return {\n        away: parts[0].trim(),\n        home: parts[1].trim(),\n      };\n    }\n  }\n\n  return { away: gameString, home: \"\" };\n}\n\nfunction getTeamAbbr(teamName) {\n  /**\n   * Get team abbreviation from full name\n   */\n  const teamLookup = {\n    \"las vegas raiders\": \"LV\",\n    raiders: \"LV\",\n    \"denver broncos\": \"DEN\",\n    broncos: \"DEN\",\n    \"dallas cowboys\": \"DAL\",\n    cowboys: \"DAL\",\n    \"philadelphia eagles\": \"PHI\",\n    eagles: \"PHI\",\n    \"phoenix suns\": \"PHX\",\n    suns: \"PHX\",\n    \"los angeles clippers\": \"LAC\",\n    clippers: \"LAC\",\n    \"georgia southern\": \"GASO\",\n    \"appalachian st\": \"APP\",\n    \"appalachian state\": \"APP\",\n    utsa: \"UTSA\",\n    \"south florida\": \"USF\",\n    butler: \"BUT\",\n    connecticut: \"CONN\",\n    \"u conn\": \"CONN\",\n    uconn: \"CONN\",\n    \"abilene christian\": \"ACU\",\n    arizona: \"ARIZ\",\n    \"montana st\": \"MTST\",\n    \"montana state\": \"MTST\",\n    \"cal poly slo\": \"CPSU\",\n    \"cal poly\": \"CPSU\",\n    \"oral roberts\": \"ORU\",\n    \"missouri st\": \"MOST\",\n    \"missouri state\": \"MOST\",\n    marist: \"MAR\",\n    \"georgia tech\": \"GT\",\n    \"east tenn st\": \"ETSU\",\n    \"east tennessee st\": \"ETSU\",\n    \"east tennessee state\": \"ETSU\",\n    \"north carolina\": \"UNC\",\n    unc: \"UNC\",\n    duke: \"DUKE\",\n    \"duke blue devils\": \"DUKE\",\n    \"san antonio spurs\": \"SAS\",\n    spurs: \"SAS\",\n    \"new york knicks\": \"NYK\",\n    knicks: \"NYK\",\n  };\n\n  const key = (teamName || \"\").toLowerCase();\n  if (teamLookup[key]) {\n    return teamLookup[key];\n  }\n\n  const parts = (teamName || \"\").match(/[A-Za-z0-9]+/g);\n  if (parts && parts.length > 1) {\n    const acronym = parts\n      .map((part) => part[0])\n      .join(\"\")\n      .toUpperCase();\n    if (acronym.length >= 2 && acronym.length <= 4) {\n      return acronym;\n    }\n  }\n\n  return (teamName || \"\").substring(0, 3).toUpperCase();\n}\n\nfunction getTeamLogoId(teamName) {\n  /**\n   * Get ESPN team ID for logo URLs\n   * NCAA uses numeric IDs, not abbreviations\n   */\n  const ncaaIds = {\n    \"georgia southern\": \"290\",\n    \"appalachian st\": \"2026\",\n    \"appalachian state\": \"2026\",\n    utsa: \"2636\",\n    \"south florida\": \"58\",\n    butler: \"2086\",\n    connecticut: \"41\",\n    \"u conn\": \"41\",\n    uconn: \"41\",\n    \"abilene christian\": \"2000\",\n    arizona: \"12\",\n    \"montana st\": \"149\",\n    \"montana state\": \"149\",\n    \"cal poly slo\": \"13\",\n    \"cal poly\": \"13\",\n    \"oral roberts\": \"198\",\n    \"missouri st\": \"2623\",\n    \"missouri state\": \"2623\",\n    marist: \"2368\",\n    \"georgia tech\": \"59\",\n    \"east tenn st\": \"2193\",\n    \"east tennessee st\": \"2193\",\n    \"east tennessee state\": \"2193\",\n    \"north carolina\": \"153\",\n    unc: \"153\",\n    duke: \"150\",\n    \"duke blue devils\": \"150\",\n  };\n\n  const key = teamName.toLowerCase();\n  if (ncaaIds[key]) {\n    return ncaaIds[key];\n  }\n\n  // For NFL/NBA, return lowercase abbr\n  return getTeamAbbr(teamName).toLowerCase();\n}\n\nfunction getTeamLogo(teamName, league = \"nfl\") {\n  /**\n   * Get ESPN logo URL for team\n   * Now uses LogoCache for better performance\n   */\n\n  // Use LogoCache if available\n  if (window.LogoCache && window.LogoCache.getTeamLogo) {\n    // LogoCache returns a promise, but we need synchronous for now\n    // So we'll return the direct URL and let cache update async\n    window.LogoCache.getTeamLogo(teamName, league).catch((err) => {\n      console.warn(\"Logo cache error:\", err);\n    });\n  }\n\n  // Return direct URL for immediate display\n  const logoId = getTeamLogoId(teamName);\n\n  if (league === \"nba\") {\n    return `https://a.espncdn.com/i/teamlogos/nba/500/${logoId}.png`;\n  } else if (\n    league === \"college\" ||\n    league.includes(\"ncaa\") ||\n    league === \"ncaab\" ||\n    league === \"ncaaf\"\n  ) {\n    // NCAA uses numeric IDs\n    return `https://a.espncdn.com/i/teamlogos/ncaa/500/${logoId}.png`;\n  } else {\n    return `https://a.espncdn.com/i/teamlogos/nfl/500/${logoId}.png`;\n  }\n}\n\nfunction generatePickDisplay(\n  parsedPick,\n  teamLogo,\n  teamAbbr,\n  teamName,\n  coverage = null,\n  statusClass = \"pending\",\n) {\n  /**\n   * Generate pick display based on pick type\n   * - Game Total: \"Total O/U 51 (-110)\"\n   * - Team Total: Logo + \"Raiders O 15 (-125)\"\n   * - Moneyline: Logo + \"Raiders (-125)\"\n   * - Spread: Logo + \"Raiders +2.7 (-110)\"\n   *\n   * Adds live status arrows (\u2191/\u2193) based on coverage for live picks\n   */\n\n  // Determine live status arrow\n  let liveArrow = \"\";\n  const isLive =\n    statusClass === \"on-track\" ||\n    statusClass === \"at-risk\" ||\n    statusClass === \"live\";\n\n  if (isLive && coverage) {\n    if (typeof coverage.diff === \"number\") {\n      if (coverage.diff > 0) {\n        liveArrow = '<span class=\"live-status-arrow up\">\u2191</span>';\n      } else if (coverage.diff < 0) {\n        liveArrow = '<span class=\"live-status-arrow down\">\u2193</span>';\n      }\n    } else if (coverage.coverageState === \"covering\") {\n      liveArrow = '<span class=\"live-status-arrow up\">\u2191</span>';\n    } else if (coverage.coverageState === \"trailing\") {\n      liveArrow = '<span class=\"live-status-arrow down\">\u2193</span>';\n    }\n  }\n\n  // Game Total (O/U) - NO logo, clean line: \"Over 51.5 (\u2212110)\" (no redundant \"Total\" prefix)\n  if (\n    (parsedPick.pickType === \"Over\" || parsedPick.pickType === \"Under\") &&\n    !parsedPick.isTeamTotal\n  ) {\n    return `\n            <div class=\"pick-details\">\n                ${liveArrow}\n                <span class=\"pick-line\">${parsedPick.pickType} ${parsedPick.line}</span>\n                ${parsedPick.odds ? `<span class=\"pick-odds\">(${parsedPick.odds})</span>` : \"\"}\n            </div>\n        `;\n  }\n\n  // Team Total - Logo + \"LV Over 15.5 (\u2212125)\" (no redundant \"TT\" prefix)\n  if (parsedPick.isTeamTotal) {\n    return `\n            <div class=\"pick-team-info\">\n                <img src=\"${teamLogo}\" class=\"pick-team-logo\" loading=\"lazy\" alt=\"${teamAbbr}\">\n                <span class=\"pick-team-abbr\">${teamAbbr}</span>\n            </div>\n            <div class=\"pick-details\">\n                ${liveArrow}\n                <span class=\"pick-line\">${parsedPick.pickType} ${parsedPick.line}</span>\n                ${parsedPick.odds ? `<span class=\"pick-odds\">(${parsedPick.odds})</span>` : \"\"}\n            </div>\n        `;\n  }\n\n  // Moneyline - Logo + \"LV (\u2212125)\" (no redundant \"ML\" text)\n  if (parsedPick.pickType === \"Moneyline\") {\n    return `\n            <div class=\"pick-team-info\">\n                <img src=\"${teamLogo}\" class=\"pick-team-logo\" loading=\"lazy\" alt=\"${teamAbbr}\">\n                <span class=\"pick-team-abbr\">${teamAbbr}</span>\n            </div>\n            <div class=\"pick-details\">\n                ${liveArrow}\n                ${parsedPick.odds ? `<span class=\"pick-odds\">(${parsedPick.odds})</span>` : \"\"}\n            </div>\n        `;\n  }\n\n  // Spread - Logo + \"LV +2.5 (\u2212110)\"\n  if (parsedPick.pickType === \"Spread\") {\n    return `\n            <div class=\"pick-team-info\">\n                <img src=\"${teamLogo}\" class=\"pick-team-logo\" loading=\"lazy\" alt=\"${teamAbbr}\">\n                <span class=\"pick-team-abbr\">${teamAbbr}</span>\n            </div>\n            <div class=\"pick-details\">\n                ${liveArrow}\n                <span class=\"pick-line\">${parsedPick.line}</span>\n                ${parsedPick.odds ? `<span class=\"pick-odds\">(${parsedPick.odds})</span>` : \"\"}\n            </div>\n        `;\n  }\n\n  // Fallback - show all info\n  return `\n        <div class=\"pick-team-info\">\n            <img src=\"${teamLogo}\" class=\"pick-team-logo\" loading=\"lazy\" alt=\"${teamAbbr}\">\n            <span class=\"pick-team-abbr\">${teamAbbr}</span>\n        </div>\n        <div class=\"pick-details\">\n            ${liveArrow}\n            ${parsedPick.pickType ? `<span class=\"pick-type\">${parsedPick.pickType}</span>` : \"\"}\n            ${parsedPick.line ? `<span class=\"pick-line\">${parsedPick.line}</span>` : \"\"}\n            ${parsedPick.odds ? `<span class=\"pick-odds\">(${parsedPick.odds})</span>` : \"\"}\n        </div>\n    `;\n}\n\nfunction createBoxScoreRows(\n  pick,\n  awayLogo,\n  awayAbbr,\n  homeLogo,\n  homeAbbr,\n  statusClass,\n) {\n  /**\n   * Create box score rows with actual scores if available\n   */\n\n  let awayScore = \"\u2014\";\n  let homeScore = \"\u2014\";\n  let awayRowClass = \"\";\n  let homeRowClass = \"\";\n\n  // Quarter scores\n  let q1_away = \"\u2014\",\n    q2_away = \"\u2014\",\n    q3_away = \"\u2014\",\n    q4_away = \"\u2014\";\n  let q1_home = \"\u2014\",\n    q2_home = \"\u2014\",\n    q3_home = \"\u2014\",\n    q4_home = \"\u2014\";\n\n  // Parse quarter-by-quarter scores if available\n  if (pick.quarters) {\n    q1_away = pick.quarters.q1_away !== undefined ? pick.quarters.q1_away : \"\u2014\";\n    q2_away = pick.quarters.q2_away !== undefined ? pick.quarters.q2_away : \"\u2014\";\n    q3_away = pick.quarters.q3_away !== undefined ? pick.quarters.q3_away : \"\u2014\";\n    q4_away = pick.quarters.q4_away !== undefined ? pick.quarters.q4_away : \"\u2014\";\n\n    q1_home = pick.quarters.q1_home !== undefined ? pick.quarters.q1_home : \"\u2014\";\n    q2_home = pick.quarters.q2_home !== undefined ? pick.quarters.q2_home : \"\u2014\";\n    q3_home = pick.quarters.q3_home !== undefined ? pick.quarters.q3_home : \"\u2014\";\n    q4_home = pick.quarters.q4_home !== undefined ? pick.quarters.q4_home : \"\u2014\";\n  }\n\n  // Parse final scores from result string\n  if (pick.result) {\n    const numbers = pick.result.match(/\\d+/g);\n\n    if (numbers && numbers.length >= 2) {\n      awayScore = numbers[0];\n      homeScore = numbers[1];\n\n      const awayNum = parseInt(awayScore);\n      const homeNum = parseInt(homeScore);\n\n      // Determine winner\n      if (awayNum > homeNum) {\n        awayRowClass = \"winning\";\n        homeRowClass = \"losing\";\n      } else if (homeNum > awayNum) {\n        homeRowClass = \"winning\";\n        awayRowClass = \"losing\";\n      }\n    }\n  }\n\n  return `\n        <div class=\"boxscore-row ${awayRowClass}\">\n            <div class=\"boxscore-cell team-cell\">\n                <div class=\"boxscore-team\">\n                    <img src=\"${awayLogo}\" class=\"boxscore-team-logo\" loading=\"lazy\" alt=\"${awayAbbr}\">\n                    <span class=\"boxscore-team-abbr\">${awayAbbr}</span>\n                    <span class=\"boxscore-team-record\" data-team=\"${awayAbbr}\"></span>\n                </div>\n            </div>\n            <div class=\"boxscore-cell\">${q1_away}</div>\n            <div class=\"boxscore-cell\">${q2_away}</div>\n            <div class=\"boxscore-cell\">${q3_away}</div>\n            <div class=\"boxscore-cell\">${q4_away}</div>\n            <div class=\"boxscore-cell total\">${awayScore}</div>\n        </div>\n        <div class=\"boxscore-row ${homeRowClass}\">\n            <div class=\"boxscore-cell team-cell\">\n                <div class=\"boxscore-team\">\n                    <img src=\"${homeLogo}\" class=\"boxscore-team-logo\" loading=\"lazy\" alt=\"${homeAbbr}\">\n                    <span class=\"boxscore-team-abbr\">${homeAbbr}</span>\n                    <span class=\"boxscore-team-record\" data-team=\"${homeAbbr}\"></span>\n                </div>\n            </div>\n            <div class=\"boxscore-cell\">${q1_home}</div>\n            <div class=\"boxscore-cell\">${q2_home}</div>\n            <div class=\"boxscore-cell\">${q3_home}</div>\n            <div class=\"boxscore-cell\">${q4_home}</div>\n            <div class=\"boxscore-cell total\">${homeScore}</div>\n        </div>\n    `;\n}\n\nfunction normalizeTeamKey(value) {\n  return (value || \"\")\n    .toString()\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, \"\");\n}\n\nfunction sanitizeSelectionName(selection) {\n  return (selection || \"\")\n    .replace(/\\([^)]+\\)/g, \"\")\n    .replace(/[+-]\\d+(\\.\\d+)?/g, \"\")\n    .replace(/\\b(ml|moneyline|spread|total|over|under|team total|tt)\\b/gi, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim();\n}\n\nfunction matchPickSide(pickTeamName, teams) {\n  const pickKey = normalizeTeamKey(pickTeamName);\n  if (!pickKey) return null;\n\n  const awayKey = normalizeTeamKey(teams.away);\n  const homeKey = normalizeTeamKey(teams.home);\n  const awayAbbrKey = normalizeTeamKey(getTeamAbbr(teams.away || \"\"));\n  const homeAbbrKey = normalizeTeamKey(getTeamAbbr(teams.home || \"\"));\n\n  if (awayKey && (awayKey.includes(pickKey) || pickKey.includes(awayKey)))\n    return \"away\";\n  if (homeKey && (homeKey.includes(pickKey) || pickKey.includes(homeKey)))\n    return \"home\";\n  if (awayAbbrKey && awayAbbrKey === pickKey) return \"away\";\n  if (homeAbbrKey && homeAbbrKey === pickKey) return \"home\";\n\n  return null;\n}\n\nfunction parsePhaseDetails(phaseRaw = \"\") {\n  const phase = (phaseRaw || \"\").trim();\n  if (!phase) {\n    return {\n      isFinal: false,\n      isHalftime: false,\n      isPreGame: false,\n      clock: \"\",\n      period: \"\",\n      label: \"\",\n    };\n  }\n\n  const upper = phase.toUpperCase();\n  const isFinal = upper.includes(\"FINAL\");\n  const isHalftime = !isFinal && upper.includes(\"HALF\");\n  const isPreGame =\n    /ET|AM|PM|START|TIP|PREGAME|SCHEDULED|KICK/i.test(upper) && !isFinal;\n\n  const clockMatch = phase.match(/(\\d{1,2}:\\d{2})/);\n  const clock = clockMatch ? clockMatch[1] : \"\";\n\n  const periodMatch = phase.match(/(Q\\d+|OT|1ST|2ND|3RD|4TH|OT|1H|2H)/i);\n  let period = periodMatch ? periodMatch[1].toUpperCase() : \"\";\n\n  if (period === \"1ST\") period = \"Q1\";\n  else if (period === \"2ND\") period = \"Q2\";\n  else if (period === \"3RD\") period = \"Q3\";\n  else if (period === \"4TH\") period = \"Q4\";\n\n  let label = \"\";\n  if (isFinal) {\n    label = \"Final\";\n  } else if (isHalftime) {\n    label = \"Halftime\";\n  } else if (clock && period) {\n    label = `${clock} left in ${period}`;\n  } else if (clock) {\n    label = `${clock} left`;\n  } else if (period) {\n    label = period;\n  } else {\n    label = phase;\n  }\n\n  return { isFinal, isHalftime, isPreGame, clock, period, label };\n}\n\nfunction extractScoreboardDetails(resultText, matchup) {\n  const text = (resultText || \"\").trim();\n  if (!text) return null;\n\n  const phaseMatch = text.match(/\\(([^)]+)\\)/);\n  const phase = phaseMatch ? phaseMatch[1].trim() : \"\";\n  const scorePortion = phaseMatch\n    ? text.replace(phaseMatch[0], \"\").trim()\n    : text;\n\n  const scorePattern = scorePortion.match(\n    /^([A-Za-z0-9 .&'\u2019-]+)\\s+(\\d+)\\s*[-\u2013]\\s*(\\d+)/,\n  );\n  const teams = parseTeamsFromGame(matchup || \"\");\n  const phaseDetails = parsePhaseDetails(phase);\n\n  if (!scorePattern) {\n    return {\n      raw: text,\n      phaseRaw: phase,\n      phaseLabel: phaseDetails.label,\n      isFinal: phaseDetails.isFinal,\n      isHalftime: phaseDetails.isHalftime,\n      isPreGame: phaseDetails.isPreGame,\n      clock: phaseDetails.clock,\n      period: phaseDetails.period,\n      teams,\n    };\n  }\n\n  const firstLabel = scorePattern[1].trim();\n  const firstScore = parseInt(scorePattern[2], 10);\n  const secondScore = parseInt(scorePattern[3], 10);\n\n  const awayAbbrRaw = getTeamAbbr(teams.away || firstLabel);\n  const homeAbbrRaw = getTeamAbbr(teams.home || \"\");\n\n  const firstLabelKey = normalizeTeamKey(firstLabel);\n  const awayKey = normalizeTeamKey(awayAbbrRaw || teams.away);\n  const homeKey = normalizeTeamKey(homeAbbrRaw || teams.home);\n\n  let awayScore = firstScore;\n  let homeScore = secondScore;\n\n  if (homeKey && firstLabelKey && firstLabelKey === homeKey) {\n    homeScore = firstScore;\n    awayScore = secondScore;\n  }\n\n  const fallbackAbbr = (name) => {\n    const parts = (name || \"\").trim().split(/\\s+/).filter(Boolean);\n    if (!parts.length) return \"\";\n    const acronym = parts\n      .map((part) => part[0])\n      .join(\"\")\n      .toUpperCase();\n    if (acronym.length >= 2 && acronym.length <= 4) return acronym;\n    return (name || \"\").substring(0, 3).toUpperCase();\n  };\n\n  const awayAbbr = awayAbbrRaw || fallbackAbbr(teams.away || \"Away\") || \"AWY\";\n  const homeAbbr = homeAbbrRaw || fallbackAbbr(teams.home || \"Home\") || \"HME\";\n\n  const scoreboardText = `${awayAbbr} ${awayScore}-${homeAbbr} ${homeScore}`;\n\n  return {\n    raw: text,\n    phaseRaw: phase,\n    phaseLabel: phaseDetails.label,\n    isFinal: phaseDetails.isFinal,\n    isHalftime: phaseDetails.isHalftime,\n    isPreGame: phaseDetails.isPreGame,\n    clock: phaseDetails.clock,\n    period: phaseDetails.period,\n    awayScore,\n    homeScore,\n    awayAbbr,\n    homeAbbr,\n    teams,\n    scoreboardText,\n  };\n}\n\nfunction determinePickMeta(payload) {\n  const matchup = payload.matchup || payload.game || \"\";\n  const selection = payload.selection || payload.description || \"\";\n  const parsed =\n    payload.parsedPick || (selection ? parsePickDescription(selection) : null);\n  const teams = parseTeamsFromGame(matchup);\n\n  const meta = {\n    type: \"unknown\",\n    side: null,\n    lineValue: null,\n    isOver: false,\n    isUnder: false,\n    parsedPick: parsed,\n    teams,\n  };\n\n  if (parsed) {\n    const pickType = (parsed.pickType || \"\").toLowerCase();\n    if (parsed.isTeamTotal) {\n      meta.type = \"team-total\";\n      meta.isOver = pickType === \"over\";\n      meta.isUnder = pickType === \"under\";\n    } else if (pickType === \"moneyline\") {\n      meta.type = \"moneyline\";\n    } else if (pickType === \"spread\") {\n      meta.type = \"spread\";\n    } else if (pickType === \"over\" || pickType === \"under\") {\n      meta.type = \"total\";\n      meta.isOver = pickType === \"over\";\n      meta.isUnder = pickType === \"under\";\n    }\n\n    if (\n      parsed.line !== undefined &&\n      parsed.line !== null &&\n      parsed.line !== \"\"\n    ) {\n      const numericLine = parseFloat(\n        String(parsed.line).replace(/[^\\d.-]/g, \"\"),\n      );\n      if (!Number.isNaN(numericLine)) {\n        meta.lineValue = numericLine;\n      }\n    }\n  }\n\n  if (meta.type === \"unknown\") {\n    const marketString = (payload.market || \"\").toLowerCase();\n    const selectionLower = selection.toLowerCase();\n    if (\n      marketString.includes(\"moneyline\") ||\n      /moneyline|ml/.test(selectionLower)\n    ) {\n      meta.type = \"moneyline\";\n    } else if (\n      marketString.includes(\"spread\") ||\n      /[+-]\\d/.test(selectionLower)\n    ) {\n      meta.type = \"spread\";\n    } else if (\n      marketString.includes(\"total\") ||\n      /over|under/.test(selectionLower)\n    ) {\n      meta.type = \"total\";\n    }\n  }\n\n  if (\n    (meta.type === \"moneyline\" ||\n      meta.type === \"spread\" ||\n      meta.type === \"team-total\") &&\n    !meta.side\n  ) {\n    const pickTeamName = parsed?.pickTeam || sanitizeSelectionName(selection);\n    meta.side = matchPickSide(pickTeamName, teams);\n  }\n\n  if (meta.type === \"total\" && meta.lineValue == null) {\n    const lineMatch = selection.match(/(\\d+\\.?\\d*)/);\n    if (lineMatch) {\n      const numericLine = parseFloat(lineMatch[1]);\n      if (!Number.isNaN(numericLine)) {\n        meta.lineValue = numericLine;\n      }\n    }\n  }\n\n  if (meta.type === \"team-total\" && meta.lineValue == null) {\n    const ttMatch = selection.match(/(\\d+\\.?\\d*)/);\n    if (ttMatch) {\n      const numericLine = parseFloat(ttMatch[1]);\n      if (!Number.isNaN(numericLine)) {\n        meta.lineValue = numericLine;\n      }\n    }\n    if (!meta.isOver && !meta.isUnder) {\n      if (/over/i.test(selection)) meta.isOver = true;\n      if (/under/i.test(selection)) meta.isUnder = true;\n    }\n  }\n\n  return meta;\n}\n\nfunction evaluateCoverage(liveInfo, pickMeta) {\n  if (!liveInfo) return { coverageState: \"unknown\" };\n  if (!pickMeta || typeof pickMeta !== \"object\")\n    return { coverageState: \"unknown\" };\n\n  const { type, side, lineValue, isOver, isUnder } = pickMeta;\n\n  if (liveInfo.awayScore == null || liveInfo.homeScore == null) {\n    return { coverageState: \"unknown\" };\n  }\n\n  if (type === \"total\") {\n    if (!Number.isFinite(lineValue)) return { coverageState: \"unknown\", type };\n    const totalScore = (liveInfo.awayScore || 0) + (liveInfo.homeScore || 0);\n    const margin = isOver ? totalScore - lineValue : lineValue - totalScore;\n    let coverageState = \"unknown\";\n    if (margin > 0) coverageState = \"covering\";\n    else if (margin < 0) coverageState = \"trailing\";\n    else coverageState = \"push\";\n    return { coverageState, totalScore, margin, lineValue, type };\n  }\n\n  if (type === \"team-total\") {\n    if (!side || !Number.isFinite(lineValue))\n      return { coverageState: \"unknown\", type };\n    const ourScore = side === \"home\" ? liveInfo.homeScore : liveInfo.awayScore;\n    const oppScore = side === \"home\" ? liveInfo.awayScore : liveInfo.homeScore;\n    const margin = isOver ? ourScore - lineValue : lineValue - ourScore;\n    let coverageState = \"unknown\";\n    if (margin > 0) coverageState = \"covering\";\n    else if (margin < 0) coverageState = \"trailing\";\n    else coverageState = \"push\";\n    return {\n      coverageState,\n      ourScore,\n      oppScore,\n      diff: ourScore - oppScore,\n      margin,\n      lineValue,\n      type,\n    };\n  }\n\n  if (type === \"moneyline\" || type === \"spread\") {\n    if (!side) return { coverageState: \"unknown\", type };\n    const ourScore = side === \"home\" ? liveInfo.homeScore : liveInfo.awayScore;\n    const oppScore = side === \"home\" ? liveInfo.awayScore : liveInfo.homeScore;\n    const diff = ourScore - oppScore;\n\n    if (type === \"spread\" && Number.isFinite(lineValue)) {\n      const coverMargin = diff + lineValue;\n      let coverageState = \"unknown\";\n      if (coverMargin > 0) coverageState = \"covering\";\n      else if (coverMargin < 0) coverageState = \"trailing\";\n      else coverageState = \"push\";\n      return {\n        coverageState,\n        ourScore,\n        oppScore,\n        diff,\n        coverMargin,\n        lineValue,\n        type,\n      };\n    }\n\n    let coverageState = \"unknown\";\n    if (diff > 0) coverageState = \"covering\";\n    else if (diff < 0) coverageState = \"trailing\";\n    else coverageState = \"push\";\n    return { coverageState, ourScore, oppScore, diff, type };\n  }\n\n  return { coverageState: \"unknown\", type };\n}\n\nfunction buildStatusDecision(baseStatus, liveInfo, coverage) {\n  const normalizedBase = (baseStatus || \"\").toLowerCase();\n  const canonicalBase = normalizedBase === \"loss\" ? \"lost\" : normalizedBase;\n  const titleCase = (key) =>\n    key\n      .split(\"-\")\n      .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n      .join(\" \");\n\n  if ([\"win\", \"lost\", \"push\"].includes(canonicalBase)) {\n    return { key: canonicalBase, label: titleCase(canonicalBase) };\n  }\n\n  if (liveInfo && liveInfo.isFinal) {\n    if (coverage.coverageState === \"covering\")\n      return { key: \"win\", label: \"Win\" };\n    if (coverage.coverageState === \"trailing\")\n      return { key: \"lost\", label: \"Lost\" };\n    if (coverage.coverageState === \"push\")\n      return { key: \"push\", label: \"Push\" };\n  }\n\n  if (coverage.coverageState === \"covering\") {\n    return { key: \"on-track\", label: \"On Track\" };\n  }\n\n  if (coverage.coverageState === \"trailing\") {\n    return { key: \"at-risk\", label: \"At Risk\" };\n  }\n\n  if (coverage.coverageState === \"push\") {\n    return {\n      key: canonicalBase || \"pending\",\n      label: titleCase(canonicalBase || \"Pending\"),\n    };\n  }\n\n  if (canonicalBase) {\n    return { key: canonicalBase, label: titleCase(canonicalBase) };\n  }\n\n  return { key: \"pending\", label: \"Pending\" };\n}\n\nfunction composeStatusTooltip(payload, liveInfo, coverage, decision, pickMeta) {\n  const parts = [];\n\n  if (liveInfo) {\n    if (coverage) {\n      if (\n        typeof coverage.diff === \"number\" &&\n        (pickMeta.type === \"moneyline\" ||\n          pickMeta.type === \"spread\" ||\n          pickMeta.type === \"team-total\")\n      ) {\n        if (coverage.diff > 0) parts.push(`Up ${Math.abs(coverage.diff)}`);\n        else if (coverage.diff < 0)\n          parts.push(`Down ${Math.abs(coverage.diff)}`);\n        else parts.push(\"Tied\");\n      } else if (\n        pickMeta.type === \"total\" &&\n        typeof coverage.margin === \"number\" &&\n        Number.isFinite(pickMeta.lineValue)\n      ) {\n        const margin = Math.abs(coverage.margin).toFixed(1).replace(/\\.0$/, \"\");\n        if (coverage.coverageState === \"covering\") {\n          parts.push(`+${margin}`);\n        } else if (coverage.coverageState === \"trailing\") {\n          parts.push(`Need ${margin}`);\n        }\n      }\n    }\n\n    // Only show scoreboard if no margin info (to avoid redundancy)\n    if (!coverage && liveInfo.scoreboardText) {\n      parts.push(liveInfo.scoreboardText);\n    } else if (!coverage && payload.result) {\n      parts.push(payload.result);\n    }\n\n    // Simplified phase label (remove \"left in\" verbosity)\n    if (liveInfo.phaseLabel) {\n      const phaseMatch = liveInfo.phaseLabel.match(\n        /(Q\\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i,\n      );\n      const clockMatch = liveInfo.phaseLabel.match(/(\\d{1,2}:\\d{2})/);\n      if (phaseMatch && clockMatch) {\n        parts.push(`${normalizePeriodLabel(phaseMatch[1])} ${clockMatch[1]}`);\n      } else if (phaseMatch) {\n        parts.push(normalizePeriodLabel(phaseMatch[1]));\n      } else if (clockMatch) {\n        parts.push(clockMatch[1]);\n      }\n    }\n  }\n\n  if (!parts.length && payload.start) {\n    parts.push(`Starts ${payload.start}`);\n  }\n\n  if (!parts.length && payload.countdown) {\n    parts.push(payload.countdown);\n  }\n\n  if (!parts.length && payload.result) {\n    parts.push(payload.result);\n  }\n\n  if (!parts.length && decision) {\n    parts.push(decision.label);\n  }\n\n  if (!parts.length && payload.status) {\n    parts.push(payload.status);\n  }\n\n  return parts.filter(Boolean).join(\" \u2022 \");\n}\n\nfunction formatPointValue(value) {\n  if (value === undefined || value === null) return \"\";\n  const absValue = Math.abs(value);\n  if (!Number.isFinite(absValue)) return \"\";\n  const rounded = Math.round(absValue * 10) / 10;\n  if (Number.isInteger(rounded)) return String(rounded);\n  return rounded.toFixed(1).replace(/\\.0$/, \"\");\n}\n\nfunction formatLineValue(value) {\n  if (!Number.isFinite(value)) return \"\";\n  const rounded = Math.round(value * 10) / 10;\n  if (Number.isInteger(rounded)) return String(rounded);\n  return rounded.toFixed(1).replace(/\\.0$/, \"\");\n}\n\nfunction normalizePeriodLabel(value) {\n  if (!value) return \"\";\n  const upper = value.toString().toUpperCase();\n  if (upper === \"1ST\") return \"Q1\";\n  if (upper === \"2ND\") return \"Q2\";\n  if (upper === \"3RD\") return \"Q3\";\n  if (upper === \"4TH\") return \"Q4\";\n  return upper;\n}\n\nfunction parsePhaseSnippet(source) {\n  if (!source) return \"\";\n  // Remove verbose phrases like \"left in\" or \"remaining\"\n  const cleaned = source.replace(/\\s*(left in|remaining|left)\\s*/i, \" \");\n  const clockMatch = cleaned.match(/(\\d{1,2}:\\d{2})/);\n  const periodMatch = cleaned.match(/(Q\\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i);\n  const periodText = periodMatch ? normalizePeriodLabel(periodMatch[1]) : \"\";\n  if (clockMatch && periodText) return `${periodText} ${clockMatch[1]}`;\n  if (periodText) return periodText;\n  if (clockMatch) return clockMatch[1];\n  return cleaned.trim();\n}\n\nfunction formatPhaseSnippet(liveInfo) {\n  if (!liveInfo) return \"\";\n  if (liveInfo.isFinal) return \"Final\";\n  if (liveInfo.isHalftime) return \"Halftime\";\n  const fromLabel = parsePhaseSnippet(liveInfo.phaseLabel);\n  if (fromLabel) return fromLabel;\n  const combined = [liveInfo.period, liveInfo.clock]\n    .filter(Boolean)\n    .join(\" \")\n    .trim();\n  if (combined) {\n    return parsePhaseSnippet(combined);\n  }\n  return \"\";\n}\n\nfunction formatLiveMarginSnippet(coverage, pickMeta) {\n  if (!coverage || !pickMeta) return \"\";\n  const { type } = pickMeta;\n\n  if (type === \"spread\" && typeof coverage.coverMargin === \"number\") {\n    if (coverage.coverMargin === 0) return \"At number\";\n    const valueText = formatPointValue(coverage.coverMargin);\n    if (!valueText) return \"\";\n    return coverage.coverMargin > 0\n      ? `Covering by ${valueText}`\n      : `Need ${valueText}`;\n  }\n\n  if (\n    (type === \"total\" || type === \"team-total\") &&\n    typeof coverage.margin === \"number\"\n  ) {\n    if (coverage.margin === 0) {\n      if (Number.isFinite(pickMeta.lineValue)) {\n        return `On ${formatLineValue(pickMeta.lineValue)}`;\n      }\n      return \"Even\";\n    }\n    const valueText = formatPointValue(coverage.margin);\n    if (!valueText) return \"\";\n    const label =\n      type === \"team-total\"\n        ? pickMeta.isOver\n          ? \"Over TT\"\n          : \"Under TT\"\n        : pickMeta.isOver\n          ? \"Over\"\n          : \"Under\";\n    // Remove redundant \"vs X\" - line value is already in badge context\n    return coverage.margin > 0\n      ? `${label} by ${valueText}`\n      : `Need ${valueText}`;\n  }\n\n  if (typeof coverage.diff === \"number\") {\n    if (coverage.diff === 0) return \"Tied\";\n    const valueText = formatPointValue(coverage.diff);\n    if (!valueText) return \"\";\n    return coverage.diff > 0 ? `Up ${valueText}` : `Down ${valueText}`;\n  }\n\n  return \"\";\n}\n\nfunction formatFinalBadgeContext(decisionKey, coverage, pickMeta) {\n  if (!pickMeta) return \"\";\n  if (decisionKey === \"push\") {\n    if (Number.isFinite(pickMeta.lineValue)) {\n      return `Push @ ${formatLineValue(pickMeta.lineValue)}`;\n    }\n    return \"Push\";\n  }\n\n  if (!coverage) return \"\";\n  const { type } = pickMeta;\n\n  if (type === \"spread\" && typeof coverage.coverMargin === \"number\") {\n    if (coverage.coverMargin === 0) {\n      return Number.isFinite(pickMeta.lineValue)\n        ? `Push @ ${formatLineValue(pickMeta.lineValue)}`\n        : \"Push\";\n    }\n    const coverValue = formatPointValue(coverage.coverMargin);\n    const diffValue = Number.isFinite(coverage.diff)\n      ? formatPointValue(coverage.diff)\n      : \"\";\n    if (!coverValue && !diffValue) return \"\";\n    if (coverage.coverMargin > 0) {\n      if (diffValue) {\n        return `Won by ${diffValue}${coverValue ? ` \u2022 Cov ${coverValue}` : \"\"}`;\n      }\n      return `Covered by ${coverValue}`;\n    }\n    if (diffValue) {\n      const scoreboardPhrase =\n        coverage.diff < 0 ? `Lost by ${diffValue}` : `Won by ${diffValue}`;\n      const needText = coverValue ? ` \u2022 Need ${coverValue}` : \"\";\n      return `${scoreboardPhrase}${needText}`;\n    }\n    return coverValue ? `Missed by ${coverValue}` : \"\";\n  }\n\n  if (\n    (type === \"total\" || type === \"team-total\") &&\n    typeof coverage.margin === \"number\"\n  ) {\n    if (coverage.margin === 0) {\n      return Number.isFinite(pickMeta.lineValue)\n        ? `Push @ ${formatLineValue(pickMeta.lineValue)}`\n        : \"Push\";\n    }\n    const valueText = formatPointValue(coverage.margin);\n    if (!valueText) return \"\";\n    const label =\n      type === \"team-total\"\n        ? pickMeta.isOver\n          ? \"Over TT\"\n          : \"Under TT\"\n        : pickMeta.isOver\n          ? \"Over\"\n          : \"Under\";\n    const lineText = Number.isFinite(pickMeta.lineValue)\n      ? ` vs ${formatLineValue(pickMeta.lineValue)}`\n      : \"\";\n    return coverage.margin > 0\n      ? `${label} by ${valueText}${lineText}`\n      : `Short ${valueText}${lineText}`;\n  }\n\n  if (typeof coverage.diff === \"number\") {\n    if (coverage.diff === 0) return \"Tied\";\n    const valueText = formatPointValue(coverage.diff);\n    if (!valueText) return \"\";\n    return coverage.diff > 0 ? `Won by ${valueText}` : `Lost by ${valueText}`;\n  }\n\n  return \"\";\n}\n\nfunction formatPendingBadgeContext(payload) {\n  if (!payload) return \"\";\n  if (payload.countdown) return payload.countdown;\n  if (payload.start) return payload.start;\n  if (payload.scheduled) return payload.scheduled;\n  return \"\";\n}\n\nfunction formatStatusBadgeContext(\n  decision,\n  liveInfo,\n  coverage,\n  pickMeta,\n  payload,\n) {\n  if (!decision) return \"\";\n  const key = decision.key;\n\n  if (key === \"on-track\" || key === \"at-risk\" || key === \"live\") {\n    const marginText = formatLiveMarginSnippet(coverage, pickMeta);\n    const phaseText = formatPhaseSnippet(liveInfo);\n    // Concise format: just phase if we have margin, or both if needed\n    if (marginText && phaseText) {\n      return `${marginText} \u2022 ${phaseText}`;\n    }\n    return marginText || phaseText;\n  }\n\n  if (key === \"win\" || key === \"lost\" || key === \"push\") {\n    const finalContext = formatFinalBadgeContext(key, coverage, pickMeta);\n    if (finalContext) return finalContext;\n    if (liveInfo?.scoreboardText) return liveInfo.scoreboardText;\n    if (payload?.result) return payload.result;\n    return \"\";\n  }\n\n  if (key === \"pending\") {\n    return formatPendingBadgeContext(payload);\n  }\n\n  return \"\";\n}\n\nfunction normalizeBlurbPayload(input) {\n  if (!input || typeof input !== \"object\" || Array.isArray(input)) {\n    return { status: input };\n  }\n  return { ...input };\n}\n\nfunction escapeHtmlForStatus(text) {\n  if (!text) return \"\";\n  return String(text)\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#39;\");\n}\n\nfunction calculatePickMargin(parsedPick, result, game) {\n  /**\n   * Calculate how much a pick won/lost by\n   * Returns margin string like \"Covered by 5 pts\" or \"Lost by 3 pts\"\n   */\n  if (!result || !parsedPick) return null;\n\n  // Extract scores from result\n  const scoreMatch = result.match(/(\\d+)-(\\d+)|(\\d+)\\s*-\\s*(\\d+)/);\n  if (!scoreMatch) return null;\n\n  const awayScore = parseInt(scoreMatch[1] || scoreMatch[3]);\n  const homeScore = parseInt(scoreMatch[2] || scoreMatch[4]);\n\n  if (isNaN(awayScore) || isNaN(homeScore)) return null;\n\n  const actualDiff = awayScore - homeScore; // positive = away won\n  const actualTotal = awayScore + homeScore;\n\n  // Determine which team was picked (away or home)\n  let isPickedAway = false;\n  if (parsedPick.pickTeam && game) {\n    const teams = parseTeamsFromGame(game);\n    const pickTeamLower = parsedPick.pickTeam.toLowerCase();\n    const awayLower = teams.away.toLowerCase();\n    isPickedAway =\n      awayLower.includes(pickTeamLower) || pickTeamLower.includes(awayLower);\n  }\n\n  // Calculate margin based on pick type\n  if (parsedPick.pickType === \"Spread\" && parsedPick.line) {\n    const spread = parseFloat(parsedPick.line);\n    // If picked away team with spread, their adjusted score is awayScore + spread\n    // If picked home team with spread, their adjusted score is homeScore + spread\n    let coverMargin;\n    if (isPickedAway) {\n      // Away team + spread vs home team\n      coverMargin = awayScore + spread - homeScore;\n    } else {\n      // Home team + spread vs away team\n      coverMargin = homeScore + spread - awayScore;\n    }\n\n    const absMargin = Math.abs(coverMargin);\n    if (coverMargin > 0) {\n      return `Covered by ${absMargin.toFixed(1)} pts`;\n    } else if (coverMargin < 0) {\n      return `Lost by ${absMargin.toFixed(1)} pts`;\n    } else {\n      return \"Push (exact)\";\n    }\n  } else if (\n    parsedPick.pickType === \"Over\" ||\n    parsedPick.pickType === \"Under\"\n  ) {\n    const line = parseFloat(parsedPick.line);\n    if (isNaN(line)) return null;\n\n    const margin = Math.abs(actualTotal - line);\n    if (parsedPick.pickType === \"Over\") {\n      if (actualTotal > line) {\n        return `Covered by ${margin.toFixed(1)} pts`;\n      } else if (actualTotal < line) {\n        return `Lost by ${margin.toFixed(1)} pts`;\n      } else {\n        return \"Push (exact)\";\n      }\n    } else {\n      // Under\n      if (actualTotal < line) {\n        return `Covered by ${margin.toFixed(1)} pts`;\n      } else if (actualTotal > line) {\n        return `Lost by ${margin.toFixed(1)} pts`;\n      } else {\n        return \"Push (exact)\";\n      }\n    }\n  } else if (parsedPick.pickType === \"Moneyline\") {\n    // For moneyline, just show the score differential\n    let margin;\n    if (isPickedAway) {\n      margin = awayScore - homeScore;\n    } else {\n      margin = homeScore - awayScore;\n    }\n\n    const absMargin = Math.abs(margin);\n    if (margin > 0) {\n      return `Won by ${absMargin} pts`;\n    } else if (margin < 0) {\n      return `Lost by ${absMargin} pts`;\n    } else {\n      return \"Tied\";\n    }\n  }\n\n  return null;\n}\n\nfunction buildStatusBadgeHTML({\n  statusClass,\n  label,\n  tooltip,\n  info,\n  extraClass = \"\",\n  margin = null,\n}) {\n  const safeStatus = escapeHtmlForStatus(statusClass || \"pending\");\n  const safeLabel = escapeHtmlForStatus(label || \"\");\n  const safeTooltip = tooltip ? escapeHtmlForStatus(tooltip) : \"\";\n  const safeInfo = info ? escapeHtmlForStatus(info) : \"\";\n  const safeMargin = margin ? escapeHtmlForStatus(margin) : \"\";\n\n  // Only include info if it's meaningful (has wins or losses, not just \"0W-0L-XP\")\n  const hasWinOrLoss =\n    safeInfo && /(^|[^\\d])([1-9]\\d*)W|(^|[^\\d])([1-9]\\d*)L/.test(safeInfo);\n  const shouldShowInfo = safeInfo && hasWinOrLoss;\n\n  const tooltipAttr = safeTooltip ? ` data-blurb=\"${safeTooltip}\"` : \"\";\n  const infoAttr = shouldShowInfo ? ` data-status-info=\"${safeInfo}\"` : \"\";\n  const marginAttr = safeMargin ? ` data-margin=\"${safeMargin}\"` : \"\";\n  // Note: status-badge-info span removed - info is now shown in tooltip via data-status-info\n  const extraClassValue = extraClass ? ` ${extraClass}` : \"\";\n  return `<span class=\"status-badge${extraClassValue}\" data-status=\"${safeStatus}\"${tooltipAttr}${infoAttr}${marginAttr}>${safeLabel}</span>`;\n}\n\nfunction formatGameTimeStatus(\n  statusClass,\n  liveInfo,\n  result,\n  status,\n  countdown,\n  start,\n) {\n  /**\n   * Format the game-time-status for the top-left box score cell\n   * Returns HTML string with proper status indicators:\n   * - FINAL for completed games\n   * - LIVE + period/time for live games\n   * - Countdown or \"Starts in X\" for pending games\n   */\n\n  // Final games\n  if (\n    statusClass === \"win\" ||\n    statusClass === \"lost\" ||\n    statusClass === \"final\"\n  ) {\n    return '<span class=\"game-time-status final\">FINAL</span>';\n  }\n\n  // Live games - show LIVE indicator + period/time\n  if (\n    statusClass === \"on-track\" ||\n    statusClass === \"at-risk\" ||\n    statusClass === \"live\"\n  ) {\n    let timeText = \"\";\n    if (liveInfo) {\n      if (liveInfo.phaseLabel) {\n        // Extract period and time from phaseLabel (e.g., \"Q4 8:42\" or \"8:42 left in Q4\")\n        const periodMatch = liveInfo.phaseLabel.match(\n          /(Q\\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i,\n        );\n        const clockMatch = liveInfo.phaseLabel.match(/(\\d{1,2}:\\d{2})/);\n        if (periodMatch && clockMatch) {\n          timeText = `${periodMatch[1].toUpperCase()} ${clockMatch[1]}`;\n        } else if (periodMatch) {\n          timeText = periodMatch[1].toUpperCase();\n        } else if (clockMatch) {\n          timeText = clockMatch[1];\n        } else {\n          timeText = liveInfo.phaseLabel;\n        }\n      } else if (liveInfo.period && liveInfo.clock) {\n        timeText = `${liveInfo.period} ${liveInfo.clock}`;\n      } else if (liveInfo.period) {\n        timeText = liveInfo.period;\n      } else if (liveInfo.clock) {\n        timeText = liveInfo.clock;\n      }\n    }\n\n    // Fallback to result if available\n    if (!timeText && result) {\n      const periodMatch = result.match(/(Q\\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i);\n      const clockMatch = result.match(/(\\d{1,2}:\\d{2})/);\n      if (periodMatch && clockMatch) {\n        timeText = `${periodMatch[1].toUpperCase()} ${clockMatch[1]}`;\n      } else if (periodMatch) {\n        timeText = periodMatch[1].toUpperCase();\n      } else if (clockMatch) {\n        timeText = clockMatch[1];\n      }\n    }\n\n    if (timeText) {\n      return `<span class=\"live-indicator\">LIVE</span><span class=\"game-time-status\">${escapeHtmlForStatus(timeText)}</span>`;\n    } else {\n      return '<span class=\"live-indicator\">LIVE</span><span class=\"game-time-status\">LIVE</span>';\n    }\n  }\n\n  // Pending games - show countdown or start time\n  if (countdown) {\n    return `<span class=\"game-time-status countdown\">${escapeHtmlForStatus(countdown)}</span>`;\n  }\n\n  if (start) {\n    // Check if it's a countdown format\n    if (start.includes(\"Starts in\") || start.includes(\"starts in\")) {\n      return `<span class=\"game-time-status countdown\">${escapeHtmlForStatus(start)}</span>`;\n    }\n    // Otherwise show as start time\n    return `<span class=\"game-time-status countdown\">${escapeHtmlForStatus(start)}</span>`;\n  }\n\n  // Default fallback\n  if (result) {\n    return `<span class=\"game-time-status\">${escapeHtmlForStatus(result)}</span>`;\n  }\n\n  if (status) {\n    return `<span class=\"game-time-status\">${escapeHtmlForStatus(status)}</span>`;\n  }\n\n  return '<span class=\"game-time-status\">\u2014</span>';\n}\n\nfunction buildStatusMeta(payloadInput, fallbackResult) {\n  const payload = normalizeBlurbPayload(payloadInput);\n  if (fallbackResult !== undefined && payload.result === undefined) {\n    payload.result = fallbackResult;\n  }\n  if (!payload.status && payload.baseStatus) {\n    payload.status = payload.baseStatus;\n  }\n  if (payload.score === undefined) {\n    payload.score = payload.result;\n  }\n  if (!payload.matchup && payload.game) {\n    payload.matchup = payload.game;\n  }\n\n  const pickMeta = determinePickMeta(payload);\n  const liveInfo = extractScoreboardDetails(payload.score, payload.matchup);\n  const coverage = evaluateCoverage(liveInfo, pickMeta);\n  const decision = buildStatusDecision(payload.status, liveInfo, coverage);\n  const tooltip = composeStatusTooltip(\n    payload,\n    liveInfo,\n    coverage,\n    decision,\n    pickMeta,\n  );\n  const badgeContext = formatStatusBadgeContext(\n    decision,\n    liveInfo,\n    coverage,\n    pickMeta,\n    payload,\n  );\n\n  return {\n    statusKey: decision.key,\n    statusLabel: decision.label,\n    tooltip,\n    liveInfo,\n    coverage,\n    pickMeta,\n    badgeContext,\n  };\n}\n\nfunction getStatusBlurb(statusOrPayload, resultMaybe) {\n  if (\n    typeof statusOrPayload === \"object\" &&\n    statusOrPayload !== null &&\n    !Array.isArray(statusOrPayload)\n  ) {\n    return buildStatusMeta(statusOrPayload).tooltip;\n  }\n  return buildStatusMeta({ status: statusOrPayload }, resultMaybe).tooltip;\n}\n\nfunction parseMoneyAmount(raw) {\n  if (raw === null || raw === undefined) return 0;\n  const n = parseFloat(raw.toString().replace(/[$,]/g, \"\").trim());\n  return Number.isFinite(n) ? n : 0;\n}\n\nfunction formatCurrencyTerse(value) {\n  if (value === null || value === undefined || value === \"\") return \"\u2014\";\n  const num = parseMoneyAmount(value);\n  if (!Number.isFinite(num)) return \"\u2014\";\n  return `$${Math.round(num).toLocaleString()}`;\n}\n\nfunction normalizeBookName(name) {\n  const trimmed = (name || \"\").toString().trim();\n  const cleaned = trimmed.replace(/_/g, \" \");\n  return cleaned || \"Manual Upload\";\n}\n\nfunction normalizeBookKey(name) {\n  return normalizeBookName(name)\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\");\n}\n\nfunction normalizeDateTimeParts(pick) {\n  let date = pick.gameDate || pick.date || \"\";\n  let time = pick.gameTime || pick.time || \"\";\n  const fallback = pick.scheduled || pick.start || pick.accepted || \"\";\n\n  const maybeParseFallback = (value) => {\n    const parsed = new Date(value);\n    if (!Number.isNaN(parsed.getTime())) {\n      return {\n        date: parsed.toLocaleDateString(undefined, {\n          month: \"short\",\n          day: \"numeric\",\n        }),\n        time: parsed.toLocaleTimeString([], {\n          hour: \"numeric\",\n          minute: \"2-digit\",\n        }),\n      };\n    }\n    const parts = value.split(\" \");\n    if (parts.length >= 2) {\n      return {\n        date: parts.slice(0, parts.length - 1).join(\" \"),\n        time: parts.slice(-1)[0],\n      };\n    }\n    return { date: value, time: \"\" };\n  };\n\n  if ((!date || !time) && fallback) {\n    const derived = maybeParseFallback(fallback);\n    if (!date) date = derived.date;\n    if (!time) time = derived.time;\n  }\n\n  const buildEpoch = () => {\n    if (date && time) {\n      const ts = Date.parse(`${date} ${time}`);\n      if (!Number.isNaN(ts)) return ts;\n    }\n    if (fallback) {\n      const ts = Date.parse(fallback);\n      if (!Number.isNaN(ts)) return ts;\n    }\n    return Date.now();\n  };\n\n  return {\n    displayDate: date || \"TBD\",\n    displayTime: time || \"\",\n    epoch: buildEpoch(),\n  };\n}\n\nfunction toMoneyValue(raw) {\n  if (raw === null || raw === undefined || raw === \"\") return null;\n  const cleaned = parseFloat(raw.toString().replace(/[$,]/g, \"\").trim());\n  return Number.isFinite(cleaned) ? cleaned : null;\n}\n\nfunction formatCurrencyDisplay(value, fallback = \"-\") {\n  if (value === null || value === undefined || Number.isNaN(value))\n    return fallback;\n  const num = typeof value === \"number\" ? value : parseMoneyAmount(value);\n  if (!Number.isFinite(num)) return fallback;\n  return `$${num.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 2 })}`;\n}\n\nfunction calculateWinFromOdds(risk, odds) {\n  const riskVal = toMoneyValue(risk);\n  const oddsText = (odds || \"\").toString().trim();\n  const oddsNum = parseInt(oddsText.replace(/[^\\d+-]/g, \"\"), 10);\n\n  if (riskVal === null || Number.isNaN(oddsNum)) return null;\n\n  if (oddsNum > 0) {\n    return riskVal * (oddsNum / 100);\n  }\n  if (oddsNum < 0) {\n    return riskVal / (Math.abs(oddsNum) / 100);\n  }\n  return null;\n}\n\nfunction normalizeOddsValue(odds) {\n  if (!odds && odds !== 0) return \"\";\n  const text = odds.toString().trim();\n  if (!text) return \"\";\n  if (!/^[+-]/.test(text) && /^\\d/.test(text)) {\n    return `+${text}`;\n  }\n  return text;\n}\n\nfunction normalizeSegmentLabel(segment) {\n  const raw = (segment || \"\").toString().toLowerCase().trim();\n  if (raw.includes(\"1q\")) return \"1st Quarter\";\n  if (raw.includes(\"2q\")) return \"2nd Quarter\";\n  if (raw.includes(\"3q\")) return \"3rd Quarter\";\n  if (raw.includes(\"4q\")) return \"4th Quarter\";\n  if (raw.includes(\"1h\") || raw.includes(\"1st half\")) return \"1st Half\";\n  if (raw.includes(\"2h\") || raw.includes(\"2nd half\")) return \"2nd Half\";\n  if (raw.includes(\"full\")) return \"Full Game\";\n  return \"Full Game\";\n}\n\nfunction combinePickDetails(parsedPick, rawPick) {\n  const combined = { ...parsedPick };\n  const rawType = (rawPick.pickType || \"\").toString().toLowerCase();\n  const rawDirection = (\n    rawPick.pickDirection ||\n    rawPick.totalType ||\n    \"\"\n  ).toString();\n  const segmentInput =\n    rawPick.segment || rawPick.period || parsedPick.segment || \"Full Game\";\n\n  combined.segment = normalizeSegmentLabel(segmentInput);\n  combined.pickTeam =\n    combined.pickTeam || rawPick.pickTeam || rawPick.team || \"\";\n  combined.line = combined.line || rawPick.line || \"\";\n  combined.odds = normalizeOddsValue(\n    combined.odds || rawPick.odds || rawPick.price || \"\",\n  );\n\n  if (!combined.pickDirection && rawDirection) {\n    combined.pickDirection =\n      rawDirection.charAt(0).toUpperCase() +\n      rawDirection.slice(1).toLowerCase();\n  }\n\n  if (!combined.pickType) {\n    if (rawType === \"moneyline\" || rawType === \"ml\") {\n      combined.pickType = \"Moneyline\";\n    } else if (rawType === \"spread\" || rawType === \"ats\") {\n      combined.pickType = \"Spread\";\n    } else if (rawType === \"team-total\" || rawType === \"tt\") {\n      combined.pickType = combined.pickDirection\n        ? combined.pickDirection\n        : \"Over\";\n      combined.isTeamTotal = true;\n    } else if (rawType === \"total\") {\n      combined.pickType = combined.pickDirection\n        ? combined.pickDirection\n        : \"Over\";\n    }\n  }\n\n  if (!combined.pickType && combined.pickDirection) {\n    combined.pickType = combined.pickDirection;\n  }\n\n  if (\n    (rawType === \"team-total\" || rawPick.isTeamTotal) &&\n    combined.pickDirection\n  ) {\n    combined.isTeamTotal = true;\n  }\n\n  if (combined.pickType === \"Moneyline\" && !combined.odds && combined.line) {\n    combined.odds = normalizeOddsValue(combined.line);\n    combined.line = \"\";\n  }\n\n  return combined;\n}\n\nfunction formatSignedCurrency(amount) {\n  const sign = amount > 0 ? \"+\" : amount < 0 ? \"-\" : \"\";\n  const abs = Math.abs(amount);\n  // Keep cents if present, but don't force them\n  const formatted = abs.toLocaleString(undefined, {\n    minimumFractionDigits: abs % 1 === 0 ? 0 : 2,\n    maximumFractionDigits: 2,\n  });\n  return `${sign}$${formatted}`;\n}\n\nfunction computeHitMissAndProfit(statusClass, riskRaw, winRaw) {\n  const normalized = (statusClass || \"\").toLowerCase();\n  const risk = parseMoneyAmount(riskRaw);\n  const win = parseMoneyAmount(winRaw);\n\n  if (normalized === \"win\" || normalized === \"won\") {\n    return {\n      key: \"hit\",\n      label: \"HIT\",\n      amount: win,\n      amountClass: \"profit-positive\",\n    };\n  }\n  if (normalized === \"loss\" || normalized === \"lost\") {\n    return {\n      key: \"miss\",\n      label: \"MISS\",\n      amount: -risk,\n      amountClass: \"profit-negative\",\n    };\n  }\n  if (normalized === \"push\" || normalized === \"tie\") {\n    return {\n      key: \"push\",\n      label: \"PUSH\",\n      amount: 0,\n      amountClass: \"profit-neutral\",\n    };\n  }\n\n  // Pending / live variants\n  return { key: \"na\", label: \"\u2014\", amount: null, amountClass: \"profit-neutral\" };\n}\n\nfunction buildPickRow(pick, index) {\n  /**\n   * Create a properly formatted table row matching the EXACT template structure\n   */\n  // SKIP STALE/EMPTY DATA: If we don't have a valid description/selection,\n  // or it's a \"TBD\" mockup without actual pick data, don't render it.\n  const description =\n    pick.description || pick.selection || buildDescriptionFromFields(pick);\n\n  if (\n    !description ||\n    description.toLowerCase().includes(\"tbd\") ||\n    (!pick.game && !pick.awayTeam && !pick.homeTeam && !description)\n  ) {\n    console.log(\"[PICKS LOADER] Skipping stale/empty pick row:\", pick);\n    return null;\n  }\n\n  const parsedPick = combinePickDetails(\n    parsePickDescription(description),\n    pick,\n  );\n  const matchupLabel =\n    pick.game ||\n    (pick.awayTeam && pick.homeTeam\n      ? `${pick.awayTeam} @ ${pick.homeTeam}`\n      : parsedPick.awayTeam && parsedPick.homeTeam\n        ? `${parsedPick.awayTeam} @ ${parsedPick.homeTeam}`\n        : description);\n\n  const statusMeta = buildStatusMeta({\n    status: pick.status,\n    result: pick.result,\n    score: pick.result,\n    matchup: matchupLabel,\n    selection: description,\n    description,\n    parsedPick,\n    start: pick.scheduled || pick.start,\n    countdown: pick.countdown,\n    market: pick.market,\n  });\n  const statusClass = (\n    statusMeta.statusKey ||\n    pick.status ||\n    \"pending\"\n  ).toLowerCase();\n  const isLive =\n    statusClass === \"on-track\" ||\n    statusClass === \"at-risk\" ||\n    statusClass === \"live\";\n\n  // Determine badge label - show countdown for pending, proper labels for live/final\n  let badgeLabel = statusMeta.statusLabel || pick.status || \"Pending\";\n  if (statusClass === \"pending\" && pick.countdown) {\n    badgeLabel = pick.countdown;\n  } else if (statusClass === \"pending\" && pick.scheduled) {\n    badgeLabel = `Starts ${pick.scheduled}`;\n  }\n\n  // Calculate margin for won/lost picks\n  let marginText = null;\n  if ((statusClass === \"win\" || statusClass === \"lost\") && pick.result) {\n    marginText = calculatePickMargin(\n      parsedPick,\n      pick.result,\n      pick.game || matchupLabel,\n    );\n  }\n\n  const statusBadgeMarkup = buildStatusBadgeHTML({\n    statusClass,\n    label: badgeLabel,\n    tooltip:\n      statusMeta.tooltip || getStatusBlurb(pick.status, pick.result) || \"\",\n    info: statusMeta.badgeContext,\n    margin: marginText,\n  });\n\n  // Determine league - intelligently detect from team names\n  const leagueFromPick = pick.league || pick.sport || \"\";\n  let league = leagueFromPick ? leagueFromPick.toString().toLowerCase() : \"\";\n\n  if (!league) {\n    // Use helper function to detect league from teams\n    league = detectLeagueFromTeams(pick.game, awayTeamName, homeTeamName);\n  }\n\n  // Normalize league values to match filter dropdown options\n  const leagueNormMap = {\n    college: \"ncaaf\",\n    cfb: \"ncaaf\",\n    \"college football\": \"ncaaf\",\n    \"ncaa football\": \"ncaaf\",\n    cbb: \"ncaab\",\n    \"college basketball\": \"ncaab\",\n    \"ncaa basketball\": \"ncaab\",\n    ncaam: \"ncaab\",\n    ncaab: \"ncaab\",\n    ncaa: \"ncaab\",\n  };\n  if (leagueNormMap[league]) {\n    league = leagueNormMap[league];\n  }\n\n  // Parse teams\n  const teamsFromGame = parseTeamsFromGame(pick.game);\n  const awayTeamName =\n    pick.awayTeam ||\n    teamsFromGame.away ||\n    parsedPick.awayTeam ||\n    parsedPick.pickTeam ||\n    \"TBD\";\n  const homeTeamName = pick.homeTeam || teamsFromGame.home || \"\";\n  const awayAbbr = getTeamAbbr(awayTeamName);\n  const homeAbbr = homeTeamName ? getTeamAbbr(homeTeamName) : \"\";\n  const awayLogo = getTeamLogo(awayTeamName, league);\n  const homeLogo = homeTeamName ? getTeamLogo(homeTeamName, league) : \"\";\n\n  // Determine which team is being picked\n  let pickedTeamLogo = awayLogo;\n  let pickedTeamAbbr = awayAbbr || (parsedPick.pickType === \"Over\" ? \"O\" : \"U\");\n  let pickedTeamName = awayTeamName;\n\n  if (parsedPick.pickTeam) {\n    // Match the picked team name to away or home\n    const pickTeamLower = parsedPick.pickTeam.toLowerCase();\n    const awayLower = awayTeamName.toLowerCase();\n    const homeLower = homeTeamName.toLowerCase();\n\n    if (\n      homeLower.includes(pickTeamLower) ||\n      pickTeamLower.includes(homeLower)\n    ) {\n      pickedTeamLogo = homeLogo;\n      pickedTeamAbbr = homeAbbr;\n      pickedTeamName = homeTeamName;\n    }\n  } else if (\n    parsedPick.pickType === \"Over\" ||\n    parsedPick.pickType === \"Under\"\n  ) {\n    // For totals, show game icon or both teams - use away for now\n    pickedTeamLogo = awayLogo;\n    pickedTeamAbbr = parsedPick.pickType.substring(0, 1); // \"O\" or \"U\"\n  }\n\n  const bookName = normalizeBookName(\n    pick.sportsbook ||\n      pick.book ||\n      pick.sourceBook ||\n      pick.bookKey ||\n      pick.source,\n  );\n  const bookKey = normalizeBookKey(bookName);\n  const riskValue = toMoneyValue(pick.risk);\n  const winProvided = toMoneyValue(pick.win);\n  const derivedWin =\n    winProvided !== null\n      ? winProvided\n      : calculateWinFromOdds(riskValue, parsedPick.odds);\n  const riskDisplay = formatCurrencyDisplay(riskValue);\n  const winDisplay = formatCurrencyDisplay(derivedWin);\n  const dateMeta = normalizeDateTimeParts({\n    ...pick,\n    gameDate: pick.gameDate || pick.date,\n    gameTime: pick.gameTime || pick.time,\n  });\n  const outcome = computeHitMissAndProfit(\n    statusClass,\n    riskValue ?? 0,\n    derivedWin ?? 0,\n  );\n\n  const row = document.createElement(\"tr\");\n  row.className = `group-start ${isLive ? \"live-game\" : \"\"}`;\n  row.dataset.pickIndex = index;\n\n  // Normalize pick type for filters\n  let normalizedPickType = \"spread\"; // default\n  if (parsedPick.pickType) {\n    const pt = parsedPick.pickType.toLowerCase();\n    if (pt === \"over\" || pt === \"under\") {\n      // Distinguish between team totals and game totals\n      normalizedPickType = parsedPick.isTeamTotal ? \"tt\" : \"total\";\n    } else if (pt === \"moneyline\") {\n      normalizedPickType = \"moneyline\";\n    } else if (pt === \"spread\") {\n      normalizedPickType = \"spread\";\n    }\n  }\n\n  // Set all data attributes for filters to work\n  row.setAttribute(\"data-league\", league);\n  row.setAttribute(\"data-book\", bookKey);\n  row.setAttribute(\"data-status\", statusClass);\n  row.setAttribute(\n    \"data-risk\",\n    riskValue != null ? String(riskValue).replace(/,/g, \"\") : \"0\",\n  );\n  row.setAttribute(\n    \"data-win\",\n    derivedWin != null ? String(derivedWin).replace(/,/g, \"\") : \"0\",\n  );\n  row.setAttribute(\"data-away\", awayTeamName.toLowerCase());\n  row.setAttribute(\"data-home\", homeTeamName ? homeTeamName.toLowerCase() : \"\");\n  row.setAttribute(\"data-pick-type\", normalizedPickType);\n  row.setAttribute(\"data-pick-text\", (description || \"\").toLowerCase());\n  row.setAttribute(\n    \"data-segment\",\n    parsedPick.segment.toLowerCase().replace(/\\s+/g, \"-\"),\n  );\n  row.setAttribute(\"data-odds\", parsedPick.odds || \"-110\");\n  row.setAttribute(\"data-epoch\", dateMeta.epoch);\n\n  // Generate League Logo URL\n  let leagueLogoUrl = \"\";\n  if (league === \"nba\")\n    leagueLogoUrl = \"https://a.espncdn.com/i/teamlogos/leagues/500/nba.png\";\n  else if (league === \"nfl\")\n    leagueLogoUrl = \"https://a.espncdn.com/i/teamlogos/leagues/500/nfl.png\";\n  else if (league === \"mlb\")\n    leagueLogoUrl = \"https://a.espncdn.com/i/teamlogos/leagues/500/mlb.png\";\n  else if (league === \"nhl\")\n    leagueLogoUrl = \"https://a.espncdn.com/i/teamlogos/leagues/500/nhl.png\";\n  else if (league === \"ncaaf\") leagueLogoUrl = \"assets/icons/league-ncaaf.svg\";\n  else if (league === \"ncaab\") leagueLogoUrl = \"assets/icons/league-ncaam.svg\";\n  else if (league.includes(\"college\") || league.includes(\"ncaa\"))\n    leagueLogoUrl = \"assets/icons/league-ncaaf.svg\";\n\n  row.innerHTML = `\n        <td>\n            <div class=\"datetime-cell\">\n                <span class=\"cell-date\">${dateMeta.displayDate}</span>\n                <span class=\"cell-time\">${dateMeta.displayTime}</span>\n                <span class=\"sportsbook-value\">${bookName}</span>\n            </div>\n        </td>\n        <td class=\"center\">\n            <div class=\"league-cell\">\n                ${leagueLogoUrl ? `<img src=\"${leagueLogoUrl}\" class=\"league-logo\" alt=\"${league}\">` : \"\"}\n                <span class=\"league-text\">${league.replace(\"college\", \"NCAA\").toUpperCase()}</span>\n            </div>\n        </td>\n        <td>\n            ${\n              homeTeamName\n                ? `<div class=\"matchup-cell\">\n                        <div class=\"team-line\">\n                            <img src=\"${awayLogo}\" class=\"team-logo\" loading=\"lazy\" alt=\"${awayAbbr}\">\n                            <div class=\"team-name-wrapper\">\n                                <span class=\"team-name-full\">${awayTeamName}</span>\n                                <span class=\"team-record\" data-team=\"${awayAbbr}\"></span>\n                            </div>\n                        </div>\n                        <div class=\"vs-divider\">vs</div>\n                        <div class=\"team-line\">\n                            <img src=\"${homeLogo}\" class=\"team-logo\" loading=\"lazy\" alt=\"${homeAbbr}\">\n                            <div class=\"team-name-wrapper\">\n                                <span class=\"team-name-full\">${homeTeamName}</span>\n                                <span class=\"team-record\" data-team=\"${homeAbbr}\"></span>\n                            </div>\n                        </div>\n                    </div>`\n                : `<div class=\"matchup-cell\">\n                        <div class=\"team-line\">\n                            <img src=\"${awayLogo}\" class=\"team-logo\" loading=\"lazy\" alt=\"${awayAbbr}\">\n                            <div class=\"team-name-wrapper\">\n                                <span class=\"team-name-full\">${awayTeamName}</span>\n                                <span class=\"team-record\" data-team=\"${awayAbbr}\"></span>\n                            </div>\n                        </div>\n                    </div>`\n            }\n        </td>\n        <td class=\"center\">\n            <span class=\"game-segment\">${parsedPick.segment || \"Full Game\"}</span>\n        </td>\n        <td>\n            <div class=\"pick-cell\">\n                ${generatePickDisplay(parsedPick, pickedTeamLogo, pickedTeamAbbr, pickedTeamName, statusMeta.coverage, statusClass)}\n            </div>\n        </td>\n        <td class=\"center\">\n            <span class=\"currency-combined currency-stacked\">\n                <span class=\"currency-risk-row\"><span class=\"risk-amount\">${riskDisplay}</span><span class=\"currency-separator\"> /</span></span>\n                <span class=\"win-amount\">${winDisplay}</span>\n            </span>\n        </td>\n        <td class=\"center\">\n            <div class=\"compact-boxscore\">\n                <div class=\"boxscore-grid\">\n                    <div class=\"boxscore-row header\">\n                        <div class=\"boxscore-cell header-cell game-time-cell\">\n                            ${formatGameTimeStatus(statusClass, statusMeta.liveInfo, pick.result, pick.status, pick.countdown, pick.scheduled || pick.start)}\n                            ${parsedPick.segment !== \"Full Game\" ? `<div style=\"font-size: 9px; color: rgba(170, 188, 204, 0.9); margin-top: 2px;\">${parsedPick.segment}</div>` : \"\"}\n                        </div>\n                        <div class=\"boxscore-cell header-cell\">Q1</div>\n                        <div class=\"boxscore-cell header-cell\">Q2</div>\n                        <div class=\"boxscore-cell header-cell\">Q3</div>\n                        <div class=\"boxscore-cell header-cell\">Q4</div>\n                        <div class=\"boxscore-cell header-cell\">T</div>\n                    </div>\n                    ${createBoxScoreRows(\n                      pick,\n                      awayLogo,\n                      awayAbbr,\n                      homeLogo || awayLogo,\n                      homeAbbr || awayAbbr,\n                      statusClass,\n                    )}\n                </div>\n            </div>\n        </td>\n        <td class=\"center\">\n            ${statusBadgeMarkup}\n        </td>\n        <td class=\"center\">\n            <span class=\"hitmiss-badge hitmiss-${outcome.key}\">${outcome.label}</span>\n        </td>\n        <td class=\"center\">\n            <div class=\"won-lost-cell\">\n                ${\n                  outcome.amount === null\n                    ? '<span class=\"profit-amount profit-neutral\">\u2014</span>'\n                    : `<span class=\"profit-amount ${outcome.amountClass}\">${formatSignedCurrency(outcome.amount)}</span>`\n                }\n                <button class=\"delete-pick-btn\" data-pick-index=\"${index}\" title=\"Remove pick\">\u2715</button>\n            </div>\n        </td>\n    `;\n\n  return row;\n}\n\nasync function loadAndAppendPicks() {\n  /**\n   * Load picks from API and append them to the table (don't clear existing)\n   */\n  console.log(\"[PICKS LOADER] Starting to load picks...\");\n  try {\n    const apiUrl =\n      window.DEV_OVERRIDE_CONFIG?.API_BASE_URL ||\n      window.APP_CONFIG?.API_BASE_URL ||\n      (window.APP_CONFIG?.FUNCTIONS_BASE_URL\n        ? `${window.APP_CONFIG.FUNCTIONS_BASE_URL.replace(/\\/+$/, \"\")}/api`\n        : \"\") ||\n      \"/api\";\n\n    // Check if database sync is enabled (default to false if not specified)\n    if (\n      window.APP_CONFIG?.ENABLE_DB_SYNC === false &&\n      !window.DEV_OVERRIDE_CONFIG?.ENABLE_DB_SYNC\n    ) {\n      console.log(\n        \"[PICKS LOADER] DB sync disabled in config - skipping API fetch\",\n      );\n      return; // Silently exit instead of throwing error\n    }\n\n    const response = await fetch(`${apiUrl}/picks`);\n    console.log(\"[PICKS LOADER] API response status:\", response.status);\n\n    if (!response.ok) {\n      console.log(\n        \"[PICKS LOADER] API /picks not available, falling back to LocalPicksManager. Status:\",\n        response.status,\n      );\n      return;\n    }\n\n    let data;\n    try {\n      data = await response.json();\n    } catch (e) {\n      if (window.ErrorHandler) {\n        window.ErrorHandler.handleParse(e, \"API response\");\n      }\n      return;\n    }\n    const picks = data.picks || [];\n    console.log(\"[PICKS LOADER] Received picks:\", picks.length, picks);\n\n    if (picks.length === 0) {\n      console.log(\"[PICKS LOADER] No picks to load\");\n      return;\n    }\n\n    const tbody = document.getElementById(\"picks-tbody\");\n    if (!tbody) {\n      console.error(\"[PICKS LOADER] ERROR: Table body #picks-tbody not found!\");\n      return;\n    }\n\n    console.log(\"[PICKS LOADER] Found table body, clearing and adding rows...\");\n\n    // Clear only if there are picks to show\n    // (keeps template examples if no picks loaded)\n    tbody.innerHTML = \"\";\n\n    // Update table container class based on whether we have picks\n    const tableContainer = tbody.closest(\".table-container\");\n    if (tableContainer) {\n      if (picks && picks.length > 0) {\n        tableContainer.classList.add(\"has-picks\");\n      } else {\n        tableContainer.classList.remove(\"has-picks\");\n      }\n    }\n\n    // Add each pick as a proper row\n    picks.forEach((pick, index) => {\n      try {\n        const row = buildPickRow(pick, index);\n        if (row) {\n          tbody.appendChild(row);\n        }\n      } catch (error) {\n        console.error(\n          `[PICKS LOADER] ERROR creating row for pick ${index + 1}:`,\n          error,\n        );\n        console.error(\"[PICKS LOADER] Pick data:\", pick);\n      }\n    });\n\n    console.log(\n      `[PICKS LOADER] \u2713 Successfully loaded ${picks.length} picks from API`,\n    );\n\n    // Calculate and update KPIs\n    if (\n      typeof calculateKPIs === \"function\" &&\n      typeof updateKPITiles === \"function\"\n    ) {\n      const kpis = calculateKPIs(picks);\n      updateKPITiles(kpis);\n    }\n\n    // Trigger table update for filters and sorting\n    if (typeof updateTable === \"function\") {\n      updateTable();\n    }\n\n    // Trigger filter update if available\n    if (typeof updateTableWithFilters === \"function\") {\n      updateTableWithFilters();\n    }\n\n    // Re-apply filter pills if available\n    if (\n      window.DashboardFilterPills &&\n      typeof window.DashboardFilterPills.applyFilters === \"function\"\n    ) {\n      window.DashboardFilterPills.applyFilters();\n    }\n\n    // Ensure zebra stripes are applied after DOM is fully updated\n    // Use multiple animation frames to ensure all DOM updates and style calculations are complete\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        if (typeof window.__gbsvApplyZebraStripes === \"function\") {\n          window.__gbsvApplyZebraStripes();\n        }\n      });\n    });\n\n    populateTeamRecordsWhenReady(document, { force: false });\n\n    // Refresh filter dropdowns to reflect newly loaded data\n    if (typeof populateLeagueDropdown === \"function\") {\n      populateLeagueDropdown();\n    }\n  } catch (error) {\n    console.log(\"[PICKS LOADER] API not available, using static HTML picks\");\n    // Only show error if it's not a network/CORS error (expected in dev)\n    if (\n      window.ErrorHandler &&\n      !error.message?.includes(\"Failed to fetch\") &&\n      !error.message?.includes(\"CORS\")\n    ) {\n      window.ErrorHandler.handleApi(error, \"Load picks\");\n    }\n  }\n}\n\n// Manual loading - call this function when you want to load picks\nwindow.loadLivePicks = loadAndAppendPicks;\n\nasync function loadTeamRecords(options = {}) {\n  /**\n   * Fetch team records from API and populate them\n   */\n  const { force = false } = options;\n\n  if (teamRecordsPromise && !force) {\n    return teamRecordsPromise;\n  }\n\n  const loaderPromise = (async () => {\n    try {\n      // Try to load from API first (only when explicitly enabled)\n      const apiUrl =\n        window.DEV_OVERRIDE_CONFIG?.API_BASE_URL ||\n        window.APP_CONFIG?.API_BASE_URL ||\n        (window.APP_CONFIG?.FUNCTIONS_BASE_URL\n          ? `${window.APP_CONFIG.FUNCTIONS_BASE_URL.replace(/\\/+$/, \"\")}/api`\n          : \"\") ||\n        \"/api\";\n      if (apiUrl && window.APP_CONFIG?.TEAM_RECORDS_API_ENABLED === true) {\n        // Check if DB sync is enabled\n        if (\n          window.APP_CONFIG?.ENABLE_DB_SYNC === false &&\n          !window.DEV_OVERRIDE_CONFIG?.ENABLE_DB_SYNC\n        ) {\n          // explicit false check to allow undefined to default to true/try\n          // But here we want to default to skip if we know it's missing\n          // Actually, defaulting to skip is safer if we want to avoid 404s\n        } else {\n          try {\n            const response = await fetch(\n              `${apiUrl.replace(/\\/+$/, \"\")}/team-records`,\n            );\n            if (response.ok) {\n              const data = await response.json();\n              if (data.records) {\n                const normalized = {};\n                Object.keys(data.records).forEach((key) => {\n                  normalized[key.toUpperCase()] = data.records[key];\n                });\n                teamRecordsCache = normalized;\n                if (globalScope) {\n                  globalScope.__TEAM_RECORDS_CACHE__ = normalized;\n                  globalScope.teamRecordsCache = normalized;\n                }\n                populateTeamRecords(document, { force: true });\n                return normalized;\n              }\n            }\n            // 404 is expected when endpoint doesn't exist - just skip\n            console.log(\n              \"[TEAM RECORDS] API endpoint not available (expected). Team records will use local data. Status:\",\n              response.status,\n            );\n          } catch (apiError) {\n            console.log(\"[RECORDS] API not available, trying config file\");\n          }\n        }\n      }\n\n      // Fallback: Load from config file\n      try {\n        const response = await fetch(\n          \"assets/data/team-records.json?v=20250101\",\n        );\n        if (response.ok) {\n          const data = await response.json();\n          // Flatten league-specific records\n          const records = {};\n          Object.keys(data).forEach((league) => {\n            Object.assign(records, data[league]);\n          });\n\n          const normalized = {};\n          Object.keys(records).forEach((key) => {\n            normalized[key.toUpperCase()] = records[key];\n          });\n          teamRecordsCache = normalized;\n          if (globalScope) {\n            globalScope.__TEAM_RECORDS_CACHE__ = normalized;\n            globalScope.teamRecordsCache = normalized;\n          }\n          populateTeamRecords(document, { force: true });\n          return normalized;\n        }\n      } catch (fileError) {\n        console.warn(\"[RECORDS] Config file not available:\", fileError);\n      }\n\n      // Final fallback: Empty records (will be populated by API later)\n      console.warn(\"[RECORDS] No team records available, using empty cache\");\n      teamRecordsCache = {};\n      return {};\n    } catch (error) {\n      console.warn(\"[RECORDS] Could not load team records:\", error);\n      if (window.ErrorHandler) {\n        window.ErrorHandler.handleApi(error, \"Load team records\");\n      }\n      throw error;\n    }\n  })();\n\n  teamRecordsPromise = loaderPromise;\n  if (globalScope) {\n    globalScope.__TEAM_RECORDS_PROMISE__ = loaderPromise;\n  }\n\n  loaderPromise.catch(() => {\n    if (teamRecordsPromise === loaderPromise) {\n      teamRecordsPromise = null;\n      if (globalScope) {\n        globalScope.__TEAM_RECORDS_PROMISE__ = null;\n      }\n    }\n  });\n\n  return loaderPromise;\n}\n\n/**\n * Load picks from Azure Cosmos DB via PicksService (enterprise-grade storage)\n * Falls back to localStorage if API unavailable\n */\nasync function loadPicksFromDatabase() {\n  try {\n    // Check if PicksService is available (enterprise Azure storage)\n    if (window.PicksService) {\n      console.log(\n        \"[DB LOADER] Loading picks from Azure Cosmos DB via PicksService...\",\n      );\n\n      // Check if migration from localStorage is needed\n      const migrationStatus = window.PicksService.checkMigrationNeeded();\n      if (migrationStatus.needed) {\n        console.log(\n          `[DB LOADER] Found ${migrationStatus.count} picks in localStorage, migrating to Azure...`,\n        );\n        const migrationResult =\n          await window.PicksService.migrateFromLocalStorage();\n        console.log(\"[DB LOADER] Migration result:\", migrationResult);\n      }\n\n      // Fetch picks from Azure (Dashboard is the \"locked portfolio\")\n      const picks = await window.PicksService.getAll({\n        locked: true,\n        limit: 200,\n      });\n\n      if (picks && picks.length > 0) {\n        console.log(\n          `[DB LOADER] \u2705 Loaded ${picks.length} picks from Azure Cosmos DB`,\n        );\n\n        // Transform picks to match expected format\n        return picks.map((pick) => ({\n          ...pick,\n          awayLogo: pick.awayLogo || getTeamLogo(pick.awayTeam, pick.sport),\n          homeLogo: pick.homeLogo || getTeamLogo(pick.homeTeam, pick.sport),\n        }));\n      }\n    }\n\n    // Fallback: Check legacy API config\n    const apiUrl =\n      window.DEV_OVERRIDE_CONFIG?.API_BASE_URL ||\n      window.APP_CONFIG?.API_BASE_URL ||\n      (window.APP_CONFIG?.FUNCTIONS_BASE_URL\n        ? `${window.APP_CONFIG.FUNCTIONS_BASE_URL.replace(/\\/+$/, \"\")}/api`\n        : \"\") ||\n      \"/api\";\n\n    // Check if database sync is enabled\n    if (\n      window.APP_CONFIG?.ENABLE_DB_SYNC === false &&\n      !window.DEV_OVERRIDE_CONFIG?.ENABLE_DB_SYNC\n    ) {\n      console.log(\n        \"[DB LOADER] DB sync disabled in config - skipping API fetch\",\n      );\n      return null;\n    }\n\n    // Correct path for new PicksAPI is /picks not /get-picks\n    const response = await fetch(\n      `${apiUrl.replace(/\\/+$/, \"\")}/picks?limit=100`,\n    );\n\n    if (!response.ok) {\n      console.log(\n        \"[DB LOADER] API not available at /picks, trying fallback or localStorage. Status:\",\n        response.status,\n      );\n      return null;\n    }\n\n    let data;\n    try {\n      data = await response.json();\n    } catch (e) {\n      if (window.ErrorHandler) {\n        window.ErrorHandler.handleParse(e, \"Database response\");\n      }\n      throw e;\n    }\n    const picks = data.picks || [];\n\n    console.log(`Loaded ${picks.length} picks from legacy database`);\n\n    // Transform picks to match expected format\n    return picks.map((pick) => ({\n      ...pick,\n      awayLogo: pick.awayLogo || getTeamLogo(pick.awayTeam, pick.sport),\n      homeLogo: pick.homeLogo || getTeamLogo(pick.homeTeam, pick.sport),\n    }));\n  } catch (error) {\n    console.warn(\"[DB LOADER] Failed to load picks from database:\", error);\n    if (\n      window.ErrorHandler &&\n      !error.message?.includes(\"Failed to fetch\") &&\n      !error.message?.includes(\"CORS\")\n    ) {\n      window.ErrorHandler.handleApi(error, \"Load picks from database\");\n    }\n    return null;\n  }\n}\n\nfunction initializePicksAndRecords() {\n  // Note: We no longer auto-delete old picks - filtering is done at display time\n  // Historical picks are kept for PnL tracking and analytics\n  // Use LocalPicksManager.archiveOldPicks() manually to move old settled picks to archive\n\n  // Try to load from database first, then fall back to API/localStorage picks\n  // Note: In local development, database/get-picks endpoints may not exist\n  // In that case, LocalPicksManager will handle loading from localStorage\n  const databasePromise = loadPicksFromDatabase();\n  databasePromise\n    .then((dbPicks) => {\n      if (dbPicks && dbPicks.length > 0) {\n        // Use database picks\n        console.log(\"[DASHBOARD] \u2705 Using picks from database\");\n        // Picks are already loaded and displayed by loadPicksFromDatabase\n      } else {\n        // Fall back to API or localStorage\n        console.log(\n          \"[DASHBOARD] No database picks available, falling back to localStorage (LocalPicksManager)\",\n        );\n        const picksPromise = loadAndAppendPicks();\n        if (picksPromise && typeof picksPromise.catch === \"function\") {\n          picksPromise.catch((error) =>\n            console.warn(\n              \"[PICKS LOADER] Initial load encountered an error:\",\n              error,\n            ),\n          );\n        }\n      }\n    })\n    .catch((error) => {\n      // Fall back to API/localStorage on error\n      console.warn(\n        \"[DASHBOARD] Database load failed, trying API/localStorage:\",\n        error.message,\n      );\n      const picksPromise = loadAndAppendPicks();\n      if (picksPromise && typeof picksPromise.catch === \"function\") {\n        picksPromise.catch((error) =>\n          console.warn(\n            \"[PICKS LOADER] Initial load encountered an error:\",\n            error,\n          ),\n        );\n      }\n    });\n}\n\n/**\n * Auto-load picks AND team records on page load\n * Tries database first, falls back to API/localStorage if available\n */\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    // Load team records (non-blocking)\n    const recordsPromise = loadTeamRecords();\n    if (recordsPromise && typeof recordsPromise.catch === \"function\") {\n      recordsPromise.catch((error) =>\n        console.warn(\"[RECORDS] Initial team records load failed:\", error),\n      );\n    }\n\n    // Load picks from database/API/localStorage\n    initializePicksAndRecords();\n\n    // Initialize delete buttons\n    initializeDeleteButtons();\n  });\n} else {\n  // Load team records (non-blocking)\n  const recordsPromise = loadTeamRecords();\n  if (recordsPromise && typeof recordsPromise.catch === \"function\") {\n    recordsPromise.catch((error) =>\n      console.warn(\"[RECORDS] Initial team records load failed:\", error),\n    );\n  }\n\n  // Load picks from database/API/localStorage\n  initializePicksAndRecords();\n\n  // Initialize delete buttons\n  initializeDeleteButtons();\n}\n\n// Initialize delete button handlers using event delegation\nfunction initializeDeleteButtons() {\n  const tbody = document.getElementById(\"picks-tbody\");\n  if (!tbody) return;\n\n  tbody.addEventListener(\"click\", async (e) => {\n    const deleteBtn = e.target.closest(\".delete-pick-btn\");\n    if (!deleteBtn) return;\n\n    e.stopPropagation();\n\n    const row = deleteBtn.closest(\"tr\");\n    if (!row) return;\n\n    // Confirm deletion\n    if (confirm(\"Remove this pick from the dashboard?\")) {\n      const pickIndex = deleteBtn.dataset.pickIndex;\n      const pickId = row.dataset.pickId || deleteBtn.dataset.pickId;\n\n      // Try PicksService first (Azure Cosmos DB)\n      if (window.PicksService && pickId) {\n        try {\n          // Removing from Dashboard == unlock (do not delete history)\n          await window.PicksService.update(pickId, {\n            locked: false,\n            lockedAt: null,\n          });\n          console.log(\"[PICKS] Unlocked pick in Azure:\", pickId);\n        } catch (error) {\n          console.warn(\n            \"[PICKS] Failed to unlock in Azure, trying delete/localStorage fallback:\",\n            error,\n          );\n          // Fall back to LocalPicksManager\n          if (window.LocalPicksManager && pickIndex !== undefined) {\n            const picks = window.LocalPicksManager.getAll\n              ? window.LocalPicksManager.getAll()\n              : [];\n            if (picks[pickIndex] && picks[pickIndex].id) {\n              window.LocalPicksManager.delete(picks[pickIndex].id);\n            }\n          }\n        }\n      } else if (window.LocalPicksManager && pickIndex !== undefined) {\n        // Fallback to LocalPicksManager\n        const picks = window.LocalPicksManager.getAll\n          ? window.LocalPicksManager.getAll()\n          : [];\n        if (picks[pickIndex] && picks[pickIndex].id) {\n          window.LocalPicksManager.delete(picks[pickIndex].id);\n        }\n      }\n\n      // Remove row from DOM\n      row.remove();\n      console.log(\"[PICKS] Removed pick from UI:\", pickId || pickIndex);\n\n      // Update KPI tiles if available\n      if (window.KPICalculator && window.KPICalculator.recalculateLiveKPI) {\n        window.KPICalculator.recalculateLiveKPI();\n      }\n    }\n  });\n\n  console.log(\"[PICKS] Delete button handlers initialized\");\n}\n\nif (globalScope) {\n  globalScope.loadTeamRecords = loadTeamRecords;\n}\n\n\n/* === dashboard/js/status-logic.js === */\n/**\r\n * Status Logic and KPI Sync for Dashboard v2.0\r\n * Handles On Track vs At Risk determination and real-time KPI updates\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // ===== STATUS CALCULATION LOGIC =====\r\n\r\n    /**\r\n     * Calculate status (On Track vs At Risk) based on game state\r\n     * @param {Object} pick - Pick data object\r\n     * @returns {string} - 'on-track', 'at-risk', 'win', 'lost', 'pending', 'push'\r\n     */\r\n    function calculatePickStatus(pick) {\r\n        // If game hasn't started\r\n        if (!pick.isLive) {\r\n            return 'pending';\r\n        }\r\n\r\n        // If game is final\r\n        if (pick.isFinal) {\r\n            if (pick.didWin) return 'win';\r\n            if (pick.didLose) return 'loss';\r\n            if (pick.isPush) return 'push';\r\n        }\r\n\r\n        // Live game logic\r\n        if (pick.pickType === 'spread') {\r\n            return calculateSpreadStatus(pick);\r\n        } else if (pick.pickType === 'total' || pick.pickType.includes('ou')) {\r\n            return calculateTotalStatus(pick);\r\n        } else if (pick.pickType === 'moneyline') {\r\n            return calculateMoneylineStatus(pick);\r\n        }\r\n\r\n        return 'pending';\r\n    }\r\n\r\n    /**\r\n     * Calculate spread bet status\r\n     */\r\n    function calculateSpreadStatus(pick) {\r\n        const { awayScore, homeScore, pickTeam, spread, timeRemaining, quarter } = pick;\r\n\r\n        // Determine if picking away or home\r\n        const isAwayPick = pickTeam === pick.awayTeam;\r\n        const actualSpread = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n        const coverMargin = actualSpread - spread;\r\n\r\n        // Win/Loss thresholds based on time remaining\r\n        const criticalTime = getCriticalTimeThreshold(quarter, timeRemaining);\r\n\r\n        if (coverMargin > 3 || (coverMargin > 0 && criticalTime < 0.15)) {\r\n            return 'on-track';  // Comfortably covering\r\n        } else if (coverMargin < -3 || (coverMargin < 0 && criticalTime < 0.15)) {\r\n            return 'at-risk';   // Not covering\r\n        } else if (Math.abs(coverMargin) <= 3) {\r\n            // Close game - check possession and time\r\n            return coverMargin >= 0 ? 'on-track' : 'at-risk';\r\n        }\r\n\r\n        return coverMargin >= 0 ? 'on-track' : 'at-risk';\r\n    }\r\n\r\n    /**\r\n     * Calculate total (over/under) bet status\r\n     */\r\n    function calculateTotalStatus(pick) {\r\n        const { awayScore, homeScore, pickTeam, total, isOver, timeRemaining, quarter, isTeamTotal = false } = pick;\r\n        let currentTotal;\r\n        if (isTeamTotal && pickTeam) {\r\n            const teamScore = pickTeam === pick.awayTeam ? awayScore : homeScore;\r\n            currentTotal = teamScore;\r\n        } else {\r\n            currentTotal = awayScore + homeScore;\r\n        }\r\n        const difference = isOver ? (currentTotal - total) : (total - currentTotal);\r\n\r\n        const criticalTime = getCriticalTimeThreshold(quarter, timeRemaining);\r\n        const remainingPossessions = estimateRemainingPossessions(timeRemaining, quarter);\r\n        const expectedPointsRemaining = remainingPossessions * 7; // Avg 7 pts per possession\r\n\r\n        if (isOver) {\r\n            // Need points - currently over or tracking well\r\n            if (difference > expectedPointsRemaining * 0.5) {\r\n                return 'on-track';\r\n            } else if (difference < -expectedPointsRemaining) {\r\n                return 'at-risk';\r\n            }\r\n        } else {\r\n            // Need under - currently under or tracking well\r\n            if (difference > expectedPointsRemaining * 0.5) {\r\n                return 'on-track';\r\n            } else if (difference < -expectedPointsRemaining) {\r\n                return 'at-risk';\r\n            }\r\n        }\r\n\r\n        return difference >= 0 ? 'on-track' : 'at-risk';\r\n    }\r\n\r\n    /**\r\n     * Calculate moneyline bet status\r\n     */\r\n    function calculateMoneylineStatus(pick) {\r\n        const { awayScore, homeScore, pickTeam, timeRemaining, quarter } = pick;\r\n\r\n        const isAwayPick = pickTeam === pick.awayTeam;\r\n        const leadMargin = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n\r\n        const criticalTime = getCriticalTimeThreshold(quarter, timeRemaining);\r\n\r\n        // Winning\r\n        if (leadMargin > 7 || (leadMargin > 0 && criticalTime < 0.10)) {\r\n            return 'on-track';\r\n        }\r\n        // Losing\r\n        else if (leadMargin < -7 || (leadMargin < 0 && criticalTime < 0.10)) {\r\n            return 'at-risk';\r\n        }\r\n        // Close game\r\n        else {\r\n            return leadMargin >= 0 ? 'on-track' : 'at-risk';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get critical time threshold (0.0 to 1.0) representing game completion\r\n     */\r\n    function getCriticalTimeThreshold(quarter, timeRemaining) {\r\n        // Convert to total game time remaining percentage\r\n        const totalGameSeconds = 3600; // 60 minutes for NFL/NCAAF\r\n        let secondsRemaining = 0;\r\n\r\n        if (quarter === 'Q1') {\r\n            secondsRemaining = (45 * 60) + parseTimeToSeconds(timeRemaining);\r\n        } else if (quarter === 'Q2') {\r\n            secondsRemaining = (30 * 60) + parseTimeToSeconds(timeRemaining);\r\n        } else if (quarter === 'Q3') {\r\n            secondsRemaining = (15 * 60) + parseTimeToSeconds(timeRemaining);\r\n        } else if (quarter === 'Q4') {\r\n            secondsRemaining = parseTimeToSeconds(timeRemaining);\r\n        }\r\n\r\n        return secondsRemaining / totalGameSeconds;\r\n    }\r\n\r\n    /**\r\n     * Estimate remaining possessions based on time\r\n     */\r\n    function estimateRemainingPossessions(timeRemaining, quarter) {\r\n        const totalSeconds = getCriticalTimeThreshold(quarter, timeRemaining) * 3600;\r\n        const avgPossessionTime = 180; // 3 minutes average\r\n        return Math.ceil(totalSeconds / avgPossessionTime);\r\n    }\r\n\r\n    /**\r\n     * Parse time string \"14:32\" to seconds\r\n     */\r\n    function parseTimeToSeconds(timeStr) {\r\n        if (!timeStr) return 0;\r\n        const [min, sec] = timeStr.split(':').map(Number);\r\n        return (min * 60) + (sec || 0);\r\n    }\r\n\r\n    // ===== STATUS TOOLTIP GENERATION =====\r\n\r\n    /**\r\n     * Generate tooltip text for status chip\r\n     */\r\n    function generateStatusTooltip(pick, status) {\r\n        if (status === 'pending') {\r\n            return `Game starts ${pick.startTime}`;\r\n        }\r\n\r\n        const { awayScore, homeScore, pickTeam, spread, total, isOver, finalScore, isTeamTotal = false } = pick;\r\n        let tooltipText = '';\r\n\r\n        if (status === 'win' || status === 'loss') {\r\n            if (pick.isFinal) {\r\n                const isAwayPick = pickTeam === pick.awayTeam;\r\n                let diff, line, betType;\r\n                \r\n                if (pick.pickType === 'spread') {\r\n                    const actualSpread = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n                    diff = actualSpread - spread;\r\n                    line = spread;\r\n                    betType = 'spread';\r\n                } else if (pick.pickType === 'total' || pick.pickType.includes('ou')) {\r\n                    let currentTotal;\r\n                    if (isTeamTotal && pickTeam) {\r\n                        const teamScore = isAwayPick ? awayScore : homeScore;\r\n                        currentTotal = teamScore;\r\n                    } else {\r\n                        currentTotal = awayScore + homeScore;\r\n                    }\r\n                    diff = isOver ? (currentTotal - total) : (total - currentTotal);\r\n                    line = total;\r\n                    betType = isTeamTotal ? 'team total' : 'total';\r\n                } else if (pick.pickType === 'moneyline') {\r\n                    const lead = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n                    diff = lead;\r\n                    betType = 'moneyline';\r\n                }\r\n\r\n                const absDiff = Math.abs(diff).toFixed(1);\r\n                const ttSuffix = isTeamTotal ? ' (TT)' : '';\r\n                \r\n                if (status === 'win') {\r\n                    if (betType === 'spread') {\r\n                        tooltipText = `\u2713 Bet won - Covered ${line >= 0 ? ' + ' : ''}${line} by ${absDiff} pts${ttSuffix} - ${finalScore}`;\r\n                    } else if (betType === 'total') {\r\n                        tooltipText = `\u2713 Bet won - ${isOver ? 'Over' : 'Under'} ${line}${ttSuffix} by ${absDiff} pts - ${finalScore}`;\r\n                    } else if (betType === 'moneyline') {\r\n                        tooltipText = `\u2713 Bet won - Won by ${absDiff} pts - ${finalScore}`;\r\n                    }\r\n                } else { // lost\r\n                    if (betType === 'spread') {\r\n                        tooltipText = `\u2717 Bet lost - Failed to cover ${line >= 0 ? '+' : ''}${line} (missed by ${absDiff} pts)${ttSuffix} - ${finalScore}`;\r\n                    } else if (betType === 'total') {\r\n                        if (isOver) {\r\n                            tooltipText = `\u2717 Bet lost - Over ${line}${ttSuffix} (scored ${currentTotal}, short ${absDiff} pts) - ${finalScore}`;\r\n                        } else {\r\n                            tooltipText = `\u2717 Bet lost - Under ${line}${ttSuffix} (scored ${currentTotal}, over by ${absDiff} pts) - ${finalScore}`;\r\n                        }\r\n                    } else if (betType === 'moneyline') {\r\n                        tooltipText = `\u2717 Bet lost - Lost by ${absDiff} pts - ${finalScore}`;\r\n                    }\r\n                }\r\n                \r\n                if (tooltipText) return tooltipText;\r\n            }\r\n            // Fallback\r\n            if (status === 'win') {\r\n                return `\u2713 Bet won - ${finalScore || 'Final'}`;\r\n            } else {\r\n                return `\u2717 Bet lost - ${finalScore || 'Final'}`;\r\n            }\r\n        }\r\n\r\n        if (status === 'push') {\r\n            return `Push - ${finalScore || pick.finalScore}`;\r\n        }\r\n\r\n        // Live game tooltips\r\n        if (pick.isLive) {\r\n            if (pick.pickType === 'spread') {\r\n                const isAwayPick = pickTeam === pick.awayTeam;\r\n                const actualSpread = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n                const coverMargin = actualSpread - spread;\r\n                if (status === 'on-track') {\r\n                    return `Covering by ${Math.abs(coverMargin).toFixed(1)} pts \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                } else {\r\n                    return `Need ${Math.abs(coverMargin).toFixed(1)} pts to cover \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                }\r\n            }\r\n\r\n            if (pick.pickType === 'total' || pick.pickType.includes('ou')) {\r\n                const isAwayPick = pickTeam === pick.awayTeam; // for team total\r\n                let currentTotal;\r\n                if (isTeamTotal && pickTeam) {\r\n                    currentTotal = isAwayPick ? awayScore : homeScore;\r\n                } else {\r\n                    currentTotal = awayScore + homeScore;\r\n                }\r\n                const diff = isOver ? (currentTotal - total) : (total - currentTotal);\r\n                const ttPrefix = isTeamTotal ? 'TT ' : '';\r\n                if (status === 'on-track') {\r\n                    return `${isOver ? 'Over' : 'Under'} ${ttPrefix}by ${Math.abs(diff).toFixed(1)} pts \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                } else {\r\n                    return `Need ${Math.abs(diff).toFixed(1)} more pts for ${isOver ? 'over' : 'under'} ${ttPrefix}\u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                }\r\n            }\r\n\r\n            if (pick.pickType === 'moneyline') {\r\n                const isAwayPick = pickTeam === pick.awayTeam;\r\n                const lead = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n                if (status === 'on-track') {\r\n                    return `Leading by ${Math.abs(lead)} \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                } else {\r\n                    return `Down ${Math.abs(lead)} \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n                }\r\n            }\r\n\r\n            return `Live \u2022 ${pick.timeRemaining} ${pick.quarter}`;\r\n        }\r\n\r\n        return `Status: ${status}`;\r\n    }\r\n\r\n    // ===== KPI SYNC FUNCTIONALITY =====\r\n\r\n    /**\r\n     * Sync KPI tiles with current table data\r\n     */\r\n    function syncKPIsWithTable() {\r\n        const tbody = document.getElementById('picks-tbody');\r\n        if (!tbody) return;\r\n\r\n        // Get all visible parent rows (not parlay-legs)\r\n        const visibleRows = Array.from(tbody.children)\r\n            .filter(row => row && row.tagName === 'TR' && !row.classList.contains('parlay-legs'))\r\n            .filter(row => row.style.display !== 'none');\r\n\r\n        const stats = {\r\n            totalActivePicks: 0,\r\n            toWin: 0,\r\n            riskAmount: 0,\r\n            winCount: 0,\r\n            lossCount: 0,\r\n            pendingCount: 0,\r\n            onTrackCount: 0,\r\n            atRiskCount: 0\r\n        };\r\n\r\n        visibleRows.forEach(row => {\r\n            const status = (row.getAttribute('data-status') || '').toLowerCase();\r\n            const risk = parseFloat(row.getAttribute('data-risk')) || 0;\r\n            const win = parseFloat(row.getAttribute('data-win')) || 0;\r\n\r\n            stats.riskAmount += risk;\r\n\r\n            if (status === 'win') {\r\n                stats.winCount++;\r\n                stats.toWin += win;\r\n            } else if (status === 'loss') {\r\n                stats.lossCount++;\r\n            } else if (status === 'pending') {\r\n                stats.pendingCount++;\r\n                stats.totalActivePicks++;\r\n                stats.toWin += win;\r\n            } else if (status === 'on-track') {\r\n                stats.onTrackCount++;\r\n                stats.totalActivePicks++;\r\n                stats.toWin += win;\r\n            } else if (status === 'at-risk') {\r\n                stats.atRiskCount++;\r\n                stats.totalActivePicks++;\r\n                stats.toWin += win;\r\n            }\r\n        });\r\n\r\n        // Update KPI tiles\r\n        updateKPITile('active-picks', stats.totalActivePicks);\r\n        updateKPITile('to-win', `$${stats.toWin.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`);\r\n\r\n        // Calculate ROE%\r\n        const roi = stats.riskAmount > 0 ? ((stats.toWin - stats.riskAmount) / stats.riskAmount * 100) : 0;\r\n        updateKPITile('roe', `${roi >= 0 ? '+' : ''}${roi.toFixed(1)}%`);\r\n\r\n        // Calculate streak\r\n        const recentResults = getRecentResults(visibleRows, 10);\r\n        const streak = calculateStreak(recentResults);\r\n        updateKPITile('streak', streak);\r\n    }\r\n\r\n    /**\r\n     * Update individual KPI tile\r\n     */\r\n    function updateKPITile(tileId, value) {\r\n        const tileSelectors = [\r\n            `#${tileId} .kpi-value`,\r\n            `.kpi-tile[data-metric=\"${tileId}\"] .kpi-value`,\r\n            `.metric-card[data-metric=\"${tileId}\"] .metric-value`\r\n        ];\r\n\r\n        for (const selector of tileSelectors) {\r\n            const element = document.querySelector(selector);\r\n            if (element) {\r\n                element.textContent = value;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get recent results for streak calculation\r\n     */\r\n    function getRecentResults(rows, limit = 10) {\r\n        return rows\r\n            .filter(row => {\r\n                const status = (row.getAttribute('data-status') || '').toLowerCase();\r\n                return status === 'win' || status === 'loss';\r\n            })\r\n            .slice(0, limit)\r\n            .map(row => {\r\n                const status = (row.getAttribute('data-status') || '').toLowerCase();\r\n                return status === 'win' ? 'W' : 'L';\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Calculate win/loss streak\r\n     */\r\n    function calculateStreak(results) {\r\n        if (results.length === 0) return 'N/A';\r\n\r\n        const mostRecent = results[0];\r\n        let count = 0;\r\n\r\n        for (const result of results) {\r\n            if (result === mostRecent) {\r\n                count++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        return `${mostRecent}${count}`;\r\n    }\r\n\r\n    // ===== INITIALIZE STATUS TOOLTIPS =====\r\n\r\n    function initializeStatusTooltips() {\r\n        const statusBadges = document.querySelectorAll('.status-badge, .status-chip, .status-badge--mini');\r\n\r\n        statusBadges.forEach(badge => {\r\n            const existingTooltip = badge.getAttribute('data-blurb') || badge.getAttribute('title');\r\n\r\n            if (!existingTooltip || existingTooltip === '') {\r\n                const row = badge.closest('tr');\r\n                if (row) {\r\n                    const status = badge.getAttribute('data-status') || row.getAttribute('data-status');\r\n                    const tooltip = generateDefaultTooltip(status);\r\n                    badge.setAttribute('data-blurb', tooltip);\r\n                }\r\n            }\r\n\r\n            // Remove native title attributes to avoid double-tooltips;\r\n            // the dedicated status-tooltip.js handles rendering.\r\n            if (badge.hasAttribute('title')) {\r\n                badge.removeAttribute('title');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Generate default tooltip based on status\r\n     */\r\n    function generateDefaultTooltip(status) {\r\n        const tooltips = {\r\n            'pending': 'Awaiting game start',\r\n            'on-track': 'Currently covering the bet',\r\n            'at-risk': 'Currently not covering',\r\n            'win': 'Bet won successfully',\r\n            'loss': 'Bet did not cover',\r\n            'push': 'Bet pushed (tie)'\r\n        };\r\n\r\n        return tooltips[status] || 'Status unknown';\r\n    }\r\n\r\n    // ===== AUTO-SYNC KPIs ON PAGE LOAD AND TABLE CHANGES =====\r\n\r\n    // Sync on page load\r\n    document.addEventListener('DOMContentLoaded', function() {\r\n        setTimeout(() => {\r\n            syncKPIsWithTable();\r\n            initializeStatusTooltips();\r\n        }, 500);\r\n    });\r\n\r\n    // Sync when table is filtered or sorted\r\n    const originalUpdateTable = window.updateTable || function() {};\r\n    window.updateTable = function() {\r\n        originalUpdateTable.apply(this, arguments);\r\n        setTimeout(syncKPIsWithTable, 100);\r\n    };\r\n\r\n    // Expose functions globally for external use\r\n    window.dashboardStatusLogic = {\r\n        calculatePickStatus,\r\n        generateStatusTooltip,\r\n        syncKPIsWithTable,\r\n        initializeStatusTooltips\r\n    };\r\n\r\n})();\r\n\n\n/* === dashboard/js/status-tooltip.js === */\n/**\r\n * Status Badge Tooltip System\r\n * Better tooltip implementation with dynamic positioning\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const BADGE_SELECTOR = '.status-badge, .status-badge--mini';\r\n    let tooltipElement = null;\r\n    let currentTarget = null;\r\n    let hideTimeout = null;\r\n    let showDelayTimeout = null;\r\n    let hideAnimationTimeout = null;\r\n\r\n    /**\r\n     * Create tooltip element if it doesn't exist\r\n     */\r\n    function createTooltipElement() {\r\n        if (tooltipElement) return tooltipElement;\r\n\r\n        tooltipElement = document.createElement('div');\r\n        tooltipElement.className = 'status-tooltip';\r\n        tooltipElement.setAttribute('role', 'tooltip');\r\n        tooltipElement.setAttribute('aria-hidden', 'true');\r\n        document.body.appendChild(tooltipElement);\r\n        return tooltipElement;\r\n    }\r\n\r\n    /**\r\n     * Get status-specific tooltip styling\r\n     */\r\n    function getStatusTooltipClass(status) {\r\n        const statusMap = {\r\n            'live': 'tooltip-live',\r\n            'on-track': 'tooltip-on-track',\r\n            'at-risk': 'tooltip-at-risk',\r\n            'win': 'tooltip-win',\r\n            'final': 'tooltip-win',\r\n            'loss': 'tooltip-loss',\r\n            'pending': 'tooltip-pending',\r\n            'push': 'tooltip-push'\r\n        };\r\n        return statusMap[status] || '';\r\n    }\r\n\r\n    /**\r\n     * Calculate optimal tooltip position\r\n     */\r\n    function calculateTooltipPosition(target, tooltip) {\r\n        const rect = target.getBoundingClientRect();\r\n        const tooltipRect = tooltip.getBoundingClientRect();\r\n        const viewport = {\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            scrollX: window.scrollX,\r\n            scrollY: window.scrollY\r\n        };\r\n\r\n        const spacing = 12;\r\n        const arrowSize = 6;\r\n        let top, left, placement = 'top';\r\n\r\n        // Try top first (default)\r\n        top = rect.top - tooltipRect.height - spacing - arrowSize;\r\n        left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);\r\n\r\n        // Check if tooltip goes off top of viewport\r\n        if (top < viewport.scrollY + 10) {\r\n            // Try bottom\r\n            top = rect.bottom + spacing + arrowSize;\r\n            placement = 'bottom';\r\n            \r\n            // If still doesn't fit, try sides\r\n            if (top + tooltipRect.height > viewport.scrollY + viewport.height - 10) {\r\n                // Try right side\r\n                if (rect.right + tooltipRect.width + spacing < viewport.scrollX + viewport.width) {\r\n                    left = rect.right + spacing;\r\n                    top = rect.top + (rect.height / 2) - (tooltipRect.height / 2);\r\n                    placement = 'right';\r\n                }\r\n                // Try left side\r\n                else if (rect.left - tooltipRect.width - spacing > viewport.scrollX) {\r\n                    left = rect.left - tooltipRect.width - spacing;\r\n                    top = rect.top + (rect.height / 2) - (tooltipRect.height / 2);\r\n                    placement = 'left';\r\n                }\r\n            }\r\n        }\r\n\r\n        // Keep tooltip within horizontal bounds\r\n        if (left < viewport.scrollX + 10) {\r\n            left = viewport.scrollX + 10;\r\n        } else if (left + tooltipRect.width > viewport.scrollX + viewport.width - 10) {\r\n            left = viewport.scrollX + viewport.width - tooltipRect.width - 10;\r\n        }\r\n\r\n        return { top, left, placement };\r\n    }\r\n\r\n    /**\r\n     * Format tooltip text with better structure\r\n     */\r\n    function formatTooltipContent(text, status) {\r\n        const escapeHtml = value => String(value ?? '')\r\n            .replace(/&/g, '&amp;')\r\n            .replace(/</g, '&lt;')\r\n            .replace(/>/g, '&gt;')\r\n            .replace(/\"/g, '&quot;')\r\n            .replace(/'/g, '&#39;');\r\n\r\n        const highlightNumbers = value => {\r\n            const safe = escapeHtml(value);\r\n            return safe.replace(/([+\\-]?\\d+(?:\\.\\d+)?%?)/g, '<span class=\"tooltip-highlight\">$1</span>');\r\n        };\r\n\r\n        const raw = String(text || '').trim();\r\n        if (!raw) return '';\r\n\r\n        // Parse structured content (bullet points)\r\n        const parts = raw.split('\u2022').map(s => s.trim()).filter(s => s);\r\n        \r\n        if (parts.length > 1) {\r\n            // Multi-line format for structured content with line breaks\r\n            return parts.map(highlightNumbers).join('<br>');\r\n        }\r\n        \r\n        // Single line fallback\r\n        return highlightNumbers(raw);\r\n    }\r\n\r\n    /**\r\n     * Show tooltip\r\n     */\r\n    function showTooltip(target, text) {\r\n        if (!text || text.trim() === '') return;\r\n\r\n        if (hideAnimationTimeout) {\r\n            clearTimeout(hideAnimationTimeout);\r\n            hideAnimationTimeout = null;\r\n        }\r\n\r\n        const tooltip = createTooltipElement();\r\n        const status = target.getAttribute('data-status') || '';\r\n        \r\n        // Format and set content with HTML structure\r\n        const formattedContent = formatTooltipContent(text, status);\r\n        tooltip.innerHTML = `<span class=\"tooltip-content\">${formattedContent}</span>`;\r\n        tooltip.className = 'status-tooltip ' + getStatusTooltipClass(status);\r\n        \r\n        // Make visible to measure\r\n        tooltip.style.visibility = 'hidden';\r\n        tooltip.style.display = 'block';\r\n        tooltip.setAttribute('aria-hidden', 'false');\r\n\r\n        // Calculate position\r\n        const position = calculateTooltipPosition(target, tooltip);\r\n        \r\n        // Apply position\r\n        tooltip.style.top = position.top + 'px';\r\n        tooltip.style.left = position.left + 'px';\r\n        tooltip.setAttribute('data-placement', position.placement);\r\n        \r\n        // Show tooltip with animation\r\n        tooltip.style.visibility = 'visible';\r\n        // Trigger reflow for animation\r\n        void tooltip.offsetWidth;\r\n        tooltip.style.opacity = '1';\r\n        tooltip.classList.add('showing');\r\n\r\n        currentTarget = target;\r\n    }\r\n\r\n    /**\r\n     * Hide tooltip\r\n     */\r\n    function hideTooltip() {\r\n        if (!tooltipElement) return;\r\n\r\n        if (showDelayTimeout) {\r\n            clearTimeout(showDelayTimeout);\r\n            showDelayTimeout = null;\r\n        }\r\n        \r\n        tooltipElement.classList.remove('showing');\r\n        tooltipElement.style.opacity = '0';\r\n        tooltipElement.setAttribute('aria-hidden', 'true');\r\n        \r\n        if (hideAnimationTimeout) {\r\n            clearTimeout(hideAnimationTimeout);\r\n        }\r\n\r\n        // Remove after quick transition\r\n        hideAnimationTimeout = setTimeout(() => {\r\n            if (tooltipElement) {\r\n                tooltipElement.style.display = 'none';\r\n                tooltipElement.style.visibility = 'hidden';\r\n            }\r\n            currentTarget = null;\r\n            hideAnimationTimeout = null;\r\n        }, 80);\r\n    }\r\n\r\n    function getTooltipText(target) {\r\n        // Primary tooltip text from data-blurb or title\r\n        const blurb = target.getAttribute('data-blurb') || target.getAttribute('title') || '';\r\n        // Additional status info (e.g., win/loss records like \"2W-1L-0P\")\r\n        const statusInfo = target.getAttribute('data-status-info') || '';\r\n        // Margin info (e.g., \"Covered by 5 pts\")\r\n        const margin = target.getAttribute('data-margin') || '';\r\n        \r\n        // Build the tooltip text\r\n        let parts = [];\r\n        \r\n        if (blurb.trim()) {\r\n            parts.push(blurb.trim());\r\n        }\r\n        \r\n        if (margin) {\r\n            parts.push(margin);\r\n        }\r\n        \r\n        if (statusInfo) {\r\n            parts.push(statusInfo);\r\n        }\r\n        \r\n        // Join parts with bullet separator\r\n        let text = parts.join(' \u2022 ');\r\n        \r\n        // Fallback to textContent if no data attributes\r\n        if (!text) {\r\n            text = target.textContent || '';\r\n        }\r\n        \r\n        return text.trim();\r\n    }\r\n\r\n    /**\r\n     * Handle mouse enter\r\n     */\r\n    function handleMouseEnter(e) {\r\n        const target = e.currentTarget;\r\n        \r\n        // Remove title attribute to prevent native browser tooltip\r\n        if (target.hasAttribute('title')) {\r\n            const titleText = target.getAttribute('title');\r\n            if (titleText && !target.hasAttribute('data-blurb')) {\r\n                target.setAttribute('data-blurb', titleText);\r\n            }\r\n            target.removeAttribute('title');\r\n        }\r\n        \r\n        const text = getTooltipText(target);\r\n        \r\n        if (!text) return;\r\n\r\n        if (hideTimeout) {\r\n            clearTimeout(hideTimeout);\r\n            hideTimeout = null;\r\n        }\r\n\r\n        if (showDelayTimeout) {\r\n            clearTimeout(showDelayTimeout);\r\n            showDelayTimeout = null;\r\n        }\r\n        \r\n        // Show immediately for snappy feel\r\n        showTooltip(target, text);\r\n    }\r\n\r\n    /**\r\n     * Handle mouse leave\r\n     */\r\n    function handleMouseLeave(e) {\r\n        if (showDelayTimeout) {\r\n            clearTimeout(showDelayTimeout);\r\n            showDelayTimeout = null;\r\n        }\r\n        // Hide immediately for snappy feel\r\n        hideTooltip();\r\n    }\r\n\r\n    /**\r\n     * Handle focus (keyboard navigation)\r\n     */\r\n    function handleFocus(e) {\r\n        const target = e.currentTarget;\r\n        const text = getTooltipText(target);\r\n        if (!text) return;\r\n\r\n        if (showDelayTimeout) {\r\n            clearTimeout(showDelayTimeout);\r\n            showDelayTimeout = null;\r\n        }\r\n\r\n        showTooltip(target, text);\r\n    }\r\n\r\n    /**\r\n     * Handle blur\r\n     */\r\n    function handleBlur() {\r\n        if (showDelayTimeout) {\r\n            clearTimeout(showDelayTimeout);\r\n            showDelayTimeout = null;\r\n        }\r\n        hideTooltip();\r\n    }\r\n\r\n    /**\r\n     * Initialize tooltips for all status badges\r\n     */\r\n    function initializeStatusTooltips() {\r\n        const badges = document.querySelectorAll(BADGE_SELECTOR);\r\n        \r\n        badges.forEach(badge => {\r\n            // Remove title attribute to prevent native browser tooltip\r\n            if (badge.hasAttribute('title')) {\r\n                const titleText = badge.getAttribute('title');\r\n                if (titleText && !badge.hasAttribute('data-blurb')) {\r\n                    badge.setAttribute('data-blurb', titleText);\r\n                }\r\n                badge.removeAttribute('title');\r\n            }\r\n            \r\n            // Remove old event listeners if any\r\n            badge.removeEventListener('mouseenter', handleMouseEnter);\r\n            badge.removeEventListener('mouseleave', handleMouseLeave);\r\n            badge.removeEventListener('focus', handleFocus);\r\n            badge.removeEventListener('blur', handleBlur);\r\n            \r\n            // Add new event listeners\r\n            badge.addEventListener('mouseenter', handleMouseEnter);\r\n            badge.addEventListener('mouseleave', handleMouseLeave);\r\n            badge.addEventListener('focus', handleFocus, true);\r\n            badge.addEventListener('blur', handleBlur, true);\r\n            // Make focusable for keyboard navigation\r\n            if (!badge.hasAttribute('tabindex')) {\r\n                badge.setAttribute('tabindex', '0');\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tooltip position on scroll/resize\r\n     */\r\n    function updateTooltipPosition() {\r\n        if (currentTarget && tooltipElement && tooltipElement.style.opacity === '1') {\r\n            const text = getTooltipText(currentTarget);\r\n            if (text) {\r\n                showTooltip(currentTarget, text);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Use event delegation for dynamically created elements\r\n    function setupEventDelegation() {\r\n        // Remove any existing delegated listeners\r\n        document.removeEventListener('mouseenter', delegatedMouseEnter, true);\r\n        document.removeEventListener('mouseleave', delegatedMouseLeave, true);\r\n        document.removeEventListener('focusin', delegatedFocus, true);\r\n        document.removeEventListener('focusout', delegatedBlur, true);\r\n\r\n        // Add delegated listeners\r\n        document.addEventListener('mouseenter', delegatedMouseEnter, true);\r\n        document.addEventListener('mouseleave', delegatedMouseLeave, true);\r\n        document.addEventListener('focusin', delegatedFocus, true);\r\n        document.addEventListener('focusout', delegatedBlur, true);\r\n    }\r\n\r\n    function delegatedMouseEnter(e) {\r\n        if (!e.target || typeof e.target.closest !== 'function') return;\r\n        const target = e.target.closest(BADGE_SELECTOR);\r\n        if (!target) return;\r\n        handleMouseEnter({ currentTarget: target });\r\n    }\r\n\r\n    function delegatedMouseLeave(e) {\r\n        if (!e.target || typeof e.target.closest !== 'function') return;\r\n        const target = e.target.closest(BADGE_SELECTOR);\r\n        if (!target) return;\r\n        handleMouseLeave({ currentTarget: target });\r\n    }\r\n\r\n    function delegatedFocus(e) {\r\n        if (!e.target || typeof e.target.closest !== 'function') return;\r\n        const target = e.target.closest(BADGE_SELECTOR);\r\n        if (!target) return;\r\n        handleFocus({ currentTarget: target });\r\n    }\r\n\r\n    function delegatedBlur(e) {\r\n        if (!e.target || typeof e.target.closest !== 'function') return;\r\n        const target = e.target.closest(BADGE_SELECTOR);\r\n        if (!target) return;\r\n        handleBlur();\r\n    }\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            initializeStatusTooltips();\r\n            setupEventDelegation();\r\n        });\r\n    } else {\r\n        initializeStatusTooltips();\r\n        setupEventDelegation();\r\n    }\r\n\r\n    // Re-initialize when table updates\r\n    const originalUpdateTable = window.updateTable || function() {};\r\n    window.updateTable = function() {\r\n        originalUpdateTable.apply(this, arguments);\r\n        setTimeout(initializeStatusTooltips, 100);\r\n    };\r\n\r\n    // Update position on scroll/resize\r\n    let resizeTimeout;\r\n    window.addEventListener('resize', () => {\r\n        clearTimeout(resizeTimeout);\r\n        resizeTimeout = setTimeout(updateTooltipPosition, 100);\r\n    });\r\n\r\n    let scrollTimeout;\r\n    window.addEventListener('scroll', () => {\r\n        clearTimeout(scrollTimeout);\r\n        scrollTimeout = setTimeout(updateTooltipPosition, 50);\r\n    }, { passive: true });\r\n\r\n    // Cleanup on page unload\r\n    window.addEventListener('beforeunload', () => {\r\n        if (tooltipElement) {\r\n            tooltipElement.remove();\r\n        }\r\n    });\r\n\r\n    // Expose for external use\r\n    window.statusTooltipSystem = {\r\n        initialize: initializeStatusTooltips,\r\n        setupDelegation: setupEventDelegation,\r\n        show: showTooltip,\r\n        hide: hideTooltip\r\n    };\r\n\r\n})();\r\n\n\n/* === assets/js/features/auto-game-fetcher.js === */\n/**\r\n * Auto Game Fetcher v2.4\r\n * Automatically fetches today's games and validates pick games\r\n * Prevents betting on finished/invalid games\r\n * v2.0: Fetches standings for team records (W-L)\r\n * v2.1: SportsDataIO as primary source for NFL/NCAAF (more accurate)\r\n * v2.2: Use Azure Functions proxy for SportsDataIO (avoids CORS)\r\n * v2.3: Fixed corrupted file structure\r\n * v2.4: Version bump to bypass cache\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Use local time instead of UTC to match CST game schedules\r\n    const today = new Date();\r\n    const todayISO = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\r\n    const todayESPN = todayISO.replace(/-/g, '');\r\n    const STANDINGS_TTL_MS = 6 * 60 * 60 * 1000; // cache standings for 6 hours\r\n    const SCOREBOARD_INTERVAL_INITIAL_MS = 180000; // 3 minutes\r\n    const SCOREBOARD_INTERVAL_MAX_MS = 600000; // 10 minutes\r\n\r\n    let todaysGamesCache = null;\r\n    let teamRecordsCache = {};\r\n    let lastFetch = null;\r\n    const lastStandingsFetch = {\r\n        NBA: 0,\r\n        NFL: 0,\r\n        NCAAM: 0,\r\n        NCAAF: 0\r\n    };\r\n    let scoreboardIntervalMs = SCOREBOARD_INTERVAL_INITIAL_MS;\r\n\r\n    /**\r\n     * Get scoreboard proxy URL from config\r\n     */\r\n    function getScoreboardProxyUrl() {\r\n        // Primary: API base (Front Door)\r\n        const apiBase = window.APP_CONFIG?.API_BASE_URL;\r\n        if (apiBase) {\r\n            const trimmed = apiBase.replace(/\\/+$/, '');\r\n            return `${trimmed}/scoreboard`;\r\n        }\r\n\r\n        // Secondary: Functions base (Front Door or direct)\r\n        const functionsBase = window.APP_CONFIG?.FUNCTIONS_BASE_URL;\r\n        if (functionsBase) {\r\n            const trimmed = functionsBase.replace(/\\/+$/, '');\r\n            return `${trimmed}/scoreboard`;\r\n        }\r\n\r\n        // Fallback: relative path\r\n        return '/api/scoreboard';\r\n    }\r\n\r\n    /**\r\n     * Fetch from SportsDataIO via Azure Functions proxy (avoids CORS)\r\n     */\r\n    async function fetchSportsDataIO(sport) {\r\n        const proxyBase = getScoreboardProxyUrl();\r\n        const url = `${proxyBase}/${sport}?date=${todayISO}`;\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} via proxy: ${url}`);\r\n\r\n        const response = await fetch(url);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Scoreboard proxy ${sport} error: ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n\r\n    /**\r\n     * Fetch standings from ESPN to get team records\r\n     */\r\n    async function fetchStandings(sport) {\r\n        const now = Date.now();\r\n        if (lastStandingsFetch[sport] && now - lastStandingsFetch[sport] < STANDINGS_TTL_MS) {\r\n            return;\r\n        }\r\n\r\n        const sportPath = sport === 'NBA' ? 'nba' :\r\n                         sport === 'NFL' ? 'nfl' :\r\n                         sport === 'NCAAM' ? 'mens-college-basketball' :\r\n                         sport === 'NCAAF' ? 'college-football' : null;\r\n\r\n        if (!sportPath) return;\r\n\r\n        const sportCategory = sport === 'NBA' || sport === 'NCAAM' ? 'basketball' : 'football';\r\n        const url = `https://site.api.espn.com/apis/v2/sports/${sportCategory}/${sportPath}/standings`;\r\n\r\n        try {\r\n            console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} standings...`);\r\n            const response = await fetch(url);\r\n            if (!response.ok) return;\r\n\r\n            const data = await response.json();\r\n\r\n            // Parse standings - structure: children[].standings.entries[]\r\n            const conferences = data.children || [];\r\n            for (const conf of conferences) {\r\n                const entries = conf.standings?.entries || [];\r\n                for (const entry of entries) {\r\n                    const teamName = entry.team?.displayName;\r\n                    if (!teamName) continue;\r\n\r\n                    const stats = entry.stats || [];\r\n                    const winsObj = stats.find(s => s.name === 'wins');\r\n                    const lossesObj = stats.find(s => s.name === 'losses');\r\n\r\n                    const wins = winsObj?.displayValue || winsObj?.value || '0';\r\n                    const losses = lossesObj?.displayValue || lossesObj?.value || '0';\r\n\r\n                    teamRecordsCache[teamName.toLowerCase()] = `${wins}-${losses}`;\r\n                }\r\n            }\r\n            lastStandingsFetch[sport] = now;\r\n            console.log(`[AUTO-GAME-FETCHER] Loaded ${Object.keys(teamRecordsCache).length} team records for ${sport}`);\r\n        } catch (e) {\r\n            console.warn(`[AUTO-GAME-FETCHER] Could not fetch ${sport} standings:`, e.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get team record from cache\r\n     */\r\n    function getTeamRecord(teamName) {\r\n        if (!teamName) return '';\r\n        const lower = teamName.toLowerCase();\r\n        return teamRecordsCache[lower] || '';\r\n    }\r\n\r\n    /**\r\n     * Fetch from ESPN API\r\n     */\r\n    async function fetchESPN(sport) {\r\n        const sportPath = sport === 'NCAAM' ? 'mens-college-basketball' :\r\n                         sport === 'NBA' ? 'nba' :\r\n                         sport === 'NCAAF' ? 'college-football' :\r\n                         sport === 'NFL' ? 'nfl' : null;\r\n\r\n        if (!sportPath) throw new Error('Unknown sport');\r\n\r\n        // Determine sport category for URL\r\n        const sportCategory = sport === 'NBA' || sport === 'NCAAM' ? 'basketball' : 'football';\r\n\r\n        // ESPN scoreboard expects YYYYMMDD format (no dashes)\r\n        const dateStr = todayESPN;\r\n        const url = `https://site.api.espn.com/apis/site/v2/sports/${sportCategory}/${sportPath}/scoreboard?dates=${dateStr}`;\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} from: ${url}`);\r\n\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n            throw new Error(`ESPN ${sport} API error: ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n\r\n    /**\r\n     * Parse ESPN games\r\n     */\r\n    function parseESPNGames(data, sport) {\r\n        if (!data || !data.events || data.events.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return data.events\r\n            .map(event => {\r\n                const competition = event.competitions?.[0];\r\n                const competitors = competition?.competitors || [];\r\n\r\n                const homeTeam = competitors.find(t => t.homeAway === 'home');\r\n                const awayTeam = competitors.find(t => t.homeAway === 'away');\r\n\r\n                // Skip malformed entries instead of throwing\r\n                if (!competition || !homeTeam || !awayTeam) {\r\n                    return null;\r\n                }\r\n\r\n                const status = competition.status || event.status || {};\r\n                const statusType = status.type || {};\r\n\r\n                const awayTeamName = awayTeam.team.displayName;\r\n                const homeTeamName = homeTeam.team.displayName;\r\n\r\n                return {\r\n                    sport,\r\n                    date: todayISO,\r\n                    time: new Date(event.date).toLocaleTimeString('en-US', {\r\n                        hour: 'numeric',\r\n                        minute: '2-digit',\r\n                        hour12: true\r\n                    }),\r\n                    awayTeam: awayTeamName,\r\n                    homeTeam: homeTeamName,\r\n                    awayRecord: getTeamRecord(awayTeamName),\r\n                    homeRecord: getTeamRecord(homeTeamName),\r\n                    awayScore: parseInt(awayTeam.score, 10) || 0,\r\n                    homeScore: parseInt(homeTeam.score, 10) || 0,\r\n                    status: statusType.description || statusType.name || 'Scheduled',\r\n                    statusDetail: statusType.detail || '',\r\n                    gameId: event.id,\r\n                    channel: competition.broadcasts?.[0]?.names?.[0] || 'TBD'\r\n                };\r\n            })\r\n            .filter(Boolean);\r\n    }\r\n\r\n    /**\r\n     * Parse SportsDataIO games into standard format\r\n     */\r\n    function parseSportsDataIOGames(games, sport) {\r\n        if (!Array.isArray(games) || games.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return games.map(game => {\r\n            const awayTeamName = game.AwayTeam || game.AwayTeamName || '';\r\n            const homeTeamName = game.HomeTeam || game.HomeTeamName || '';\r\n\r\n            // Parse game time\r\n            let gameTime = 'TBD';\r\n            if (game.DateTime) {\r\n                try {\r\n                    gameTime = new Date(game.DateTime).toLocaleTimeString('en-US', {\r\n                        hour: 'numeric',\r\n                        minute: '2-digit',\r\n                        hour12: true\r\n                    });\r\n                } catch (e) {\r\n                    gameTime = 'TBD';\r\n                }\r\n            }\r\n\r\n            // Determine status from SportsDataIO Status field\r\n            const sdStatus = (game.Status || '').toLowerCase();\r\n            let status = 'Scheduled';\r\n            let statusDetail = '';\r\n\r\n            if (sdStatus === 'final' || sdStatus === 'f' || sdStatus === 'f/ot') {\r\n                status = 'Final';\r\n                statusDetail = sdStatus === 'f/ot' ? 'Final/OT' : 'Final';\r\n            } else if (sdStatus === 'inprogress' || sdStatus === 'in progress') {\r\n                status = 'In Progress';\r\n                statusDetail = game.TimeRemaining ? `Q${game.Quarter} ${game.TimeRemaining}` : `Q${game.Quarter || 1}`;\r\n            } else if (sdStatus === 'halftime') {\r\n                status = 'Halftime';\r\n                statusDetail = 'Halftime';\r\n            } else if (sdStatus === 'postponed') {\r\n                status = 'Postponed';\r\n            } else if (sdStatus === 'canceled') {\r\n                status = 'Canceled';\r\n            }\r\n\r\n            return {\r\n                sport,\r\n                date: todayISO,\r\n                time: gameTime,\r\n                awayTeam: awayTeamName,\r\n                homeTeam: homeTeamName,\r\n                awayRecord: getTeamRecord(awayTeamName),\r\n                homeRecord: getTeamRecord(homeTeamName),\r\n                awayScore: game.AwayScore || 0,\r\n                homeScore: game.HomeScore || 0,\r\n                status: status,\r\n                statusDetail: statusDetail,\r\n                gameId: String(game.GameID || game.ScoreID || ''),\r\n                channel: game.Channel || 'TBD',\r\n                source: 'sportsdata.io'\r\n            };\r\n        }).filter(g => g.awayTeam && g.homeTeam);\r\n    }\r\n\r\n    /**\r\n     * Fetch all today's games\r\n     */\r\n    async function fetchTodaysGames(forceRefresh = false) {\r\n        // Use cache if fresh (within 60 seconds)\r\n        if (!forceRefresh && todaysGamesCache && lastFetch && (Date.now() - lastFetch < 60000)) {\r\n            return todaysGamesCache;\r\n        }\r\n\r\n        // Feature flags for disabled leagues\r\n        const disabledLeagues = new Set(window.APP_CONFIG?.WEEKLY_LINEUP_DISABLED_LEAGUES || window.WEEKLY_LINEUP_DISABLED_LEAGUES || ['NFL', 'NCAAF']);\r\n        const isEnabled = (league) => !disabledLeagues.has(league);\r\n\r\n        // FIRST: Fetch standings (cached) to get team records\r\n        console.log('[AUTO-GAME-FETCHER] Fetching team standings for records (cached)...');\r\n\r\n        const standingsPromises = [];\r\n        if (isEnabled('NBA')) standingsPromises.push(fetchStandings('NBA'));\r\n        if (isEnabled('NFL')) standingsPromises.push(fetchStandings('NFL'));\r\n        if (isEnabled('NCAAM')) standingsPromises.push(fetchStandings('NCAAM'));\r\n        if (isEnabled('NCAAF')) standingsPromises.push(fetchStandings('NCAAF'));\r\n\r\n        await Promise.all(standingsPromises);\r\n\r\n        const allGames = [];\r\n\r\n        // NCAAM via ESPN\r\n        try {\r\n            if (isEnabled('NCAAM')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NCAAM games...');\r\n                const ncaamData = await fetchESPN('NCAAM');\r\n                const ncaamGames = parseESPNGames(ncaamData, 'NCAAM');\r\n                allGames.push(...ncaamGames);\r\n                console.log(`[AUTO-GAME-FETCHER] Found ${ncaamGames.length} NCAAM games`);\r\n            }\r\n        } catch (e) {\r\n            console.error('[AUTO-GAME-FETCHER] Error fetching NCAAM:', e.message);\r\n        }\r\n\r\n        // NBA via ESPN\r\n        try {\r\n            if (isEnabled('NBA')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NBA games...');\r\n                const nbaData = await fetchESPN('NBA');\r\n                const nbaGames = parseESPNGames(nbaData, 'NBA');\r\n                allGames.push(...nbaGames);\r\n                console.log(`[AUTO-GAME-FETCHER] Found ${nbaGames.length} NBA games`);\r\n            }\r\n        } catch (e) {\r\n            console.error('[AUTO-GAME-FETCHER] Error fetching NBA:', e.message);\r\n        }\r\n\r\n        // NFL: SportsDataIO primary, ESPN fallback\r\n        try {\r\n            if (isEnabled('NFL')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NFL games from SportsDataIO...');\r\n                const nflSportsData = await fetchSportsDataIO('nfl');\r\n                const nflGames = parseSportsDataIOGames(nflSportsData, 'NFL');\r\n                if (nflGames.length > 0) {\r\n                    allGames.push(...nflGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${nflGames.length} NFL games (SportsDataIO)`);\r\n                } else {\r\n                    throw new Error('No games from SportsDataIO');\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (isEnabled('NFL')) {\r\n                console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NFL failed (${e.message}), trying ESPN...`);\r\n                try {\r\n                    const nflData = await fetchESPN('NFL');\r\n                    const nflGames = parseESPNGames(nflData, 'NFL');\r\n                    allGames.push(...nflGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${nflGames.length} NFL games (ESPN fallback)`);\r\n                } catch (e2) {\r\n                    console.error('[AUTO-GAME-FETCHER] Error fetching NFL from both sources:', e2.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        // NCAAF: SportsDataIO primary, ESPN fallback\r\n        try {\r\n            if (isEnabled('NCAAF')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NCAAF games from SportsDataIO...');\r\n                const ncaafSportsData = await fetchSportsDataIO('cfb');\r\n                const ncaafGames = parseSportsDataIOGames(ncaafSportsData, 'NCAAF');\r\n                if (ncaafGames.length > 0) {\r\n                    allGames.push(...ncaafGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${ncaafGames.length} NCAAF games (SportsDataIO)`);\r\n                } else {\r\n                    throw new Error('No games from SportsDataIO');\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (isEnabled('NCAAF')) {\r\n                console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NCAAF failed (${e.message}), trying ESPN...`);\r\n                try {\r\n                    const ncaafData = await fetchESPN('NCAAF');\r\n                    const ncaafGames = parseESPNGames(ncaafData, 'NCAAF');\r\n                    allGames.push(...ncaafGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${ncaafGames.length} NCAAF games (ESPN fallback)`);\r\n                } catch (e2) {\r\n                    console.error('[AUTO-GAME-FETCHER] Error fetching NCAAF from both sources:', e2.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        todaysGamesCache = allGames;\r\n        lastFetch = Date.now();\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Total games today: ${allGames.length}`);\r\n        return allGames;\r\n    }\r\n\r\n    /**\r\n     * Find game by team names\r\n     */\r\n    function findGame(teamName1, teamName2) {\r\n        if (!todaysGamesCache) return null;\r\n\r\n        const name1Lower = teamName1.toLowerCase();\r\n        const name2Lower = teamName2 ? teamName2.toLowerCase() : null;\r\n\r\n        return todaysGamesCache.find(game => {\r\n            const awayLower = game.awayTeam.toLowerCase();\r\n            const homeLower = game.homeTeam.toLowerCase();\r\n\r\n            // Check if both teams match\r\n            if (name2Lower) {\r\n                return (awayLower.includes(name1Lower) && homeLower.includes(name2Lower)) ||\r\n                       (awayLower.includes(name2Lower) && homeLower.includes(name1Lower));\r\n            }\r\n\r\n            // Check if single team matches\r\n            return awayLower.includes(name1Lower) || homeLower.includes(name1Lower);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if game has started\r\n     */\r\n    function hasGameStarted(game) {\r\n        if (!game) return false;\r\n        const status = (game.status || '').toLowerCase();\r\n        return !status.includes('scheduled') && !status.includes('pre');\r\n    }\r\n\r\n    /**\r\n     * Check if game is finished\r\n     */\r\n    function isGameFinished(game) {\r\n        if (!game) return false;\r\n        const status = (game.status || '').toLowerCase();\r\n        return status.includes('final') || status.includes('completed');\r\n    }\r\n\r\n    /**\r\n     * Get game status message\r\n     */\r\n    function getGameStatusMessage(game) {\r\n        if (!game) return 'Game not found for today';\r\n        if (isGameFinished(game)) return `Game finished: ${game.awayTeam} ${game.awayScore}, ${game.homeTeam} ${game.homeScore}`;\r\n        if (hasGameStarted(game)) return `In progress: ${game.awayTeam} ${game.awayScore}, ${game.homeTeam} ${game.homeScore}`;\r\n        return `Scheduled for ${game.time}`;\r\n    }\r\n\r\n    /**\r\n     * Schedule scoreboard refresh with exponential backoff\r\n     */\r\n    async function scheduleScoreboardRefresh() {\r\n        try {\r\n            await fetchTodaysGames(true);\r\n            scoreboardIntervalMs = SCOREBOARD_INTERVAL_INITIAL_MS;\r\n        } catch (err) {\r\n            console.error('[AUTO-GAME-FETCHER] Refresh failed:', err.message || err);\r\n            scoreboardIntervalMs = Math.min(scoreboardIntervalMs * 2, SCOREBOARD_INTERVAL_MAX_MS);\r\n        } finally {\r\n            setTimeout(scheduleScoreboardRefresh, scoreboardIntervalMs);\r\n        }\r\n    }\r\n\r\n    // Auto-fetch on load, then refresh with backoff\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            fetchTodaysGames().catch(console.error).finally(() => scheduleScoreboardRefresh());\r\n        });\r\n    } else {\r\n        fetchTodaysGames().catch(console.error).finally(() => scheduleScoreboardRefresh());\r\n    }\r\n\r\n    // Export\r\n    window.AutoGameFetcher = {\r\n        fetchTodaysGames,\r\n        findGame,\r\n        hasGameStarted,\r\n        isGameFinished,\r\n        getGameStatusMessage,\r\n        getTodaysGames: () => todaysGamesCache,\r\n        getTeamRecord,\r\n        getRecordsCache: () => teamRecordsCache\r\n    };\r\n\r\n    console.log('\u2705 AutoGameFetcher v2.4 loaded - NFL/NCAAF: SportsDataIO via proxy | NBA/NCAAM: ESPN');\r\n\r\n})();\r\n\n\n/* === assets/js/features/pick-standardizer.js === */\n/**\n * Pick Standardizer v3.0\n * Parses picks from multiple formats:\n * - Sportsbook game lines HTML (div-based panels)\n * - Sportsbook HTML tables (legacy bet slip format)\n * - Text shorthand (e.g., \"Spurs 2.5 -105 $50\")\n * - Screenshot OCR text\n */\n\n(function () {\n  \"use strict\";\n\n  // Default unit multiplier (e.g., $50 = $50,000 when unit is 1000)\n  let unitMultiplier = 1000; // $1 = $1,000\n\n  // Team name mappings (abbreviations to full names)\n  const TEAM_ALIASES = {\n    // NBA - Full names and nicknames\n    spurs: \"San Antonio Spurs\",\n    \"san antonio\": \"San Antonio Spurs\",\n    sas: \"San Antonio Spurs\",\n    knicks: \"New York Knicks\",\n    \"new york\": \"New York Knicks\",\n    nyk: \"New York Knicks\",\n    lakers: \"Los Angeles Lakers\",\n    \"la lakers\": \"Los Angeles Lakers\",\n    lal: \"Los Angeles Lakers\",\n    clippers: \"Los Angeles Clippers\",\n    \"la clippers\": \"Los Angeles Clippers\",\n    lac: \"Los Angeles Clippers\",\n    warriors: \"Golden State Warriors\",\n    \"golden state\": \"Golden State Warriors\",\n    gsw: \"Golden State Warriors\",\n    gs: \"Golden State Warriors\",\n    celtics: \"Boston Celtics\",\n    boston: \"Boston Celtics\",\n    bos: \"Boston Celtics\",\n    heat: \"Miami Heat\",\n    miami: \"Miami Heat\",\n    mia: \"Miami Heat\",\n    bulls: \"Chicago Bulls\",\n    chicago: \"Chicago Bulls\",\n    chi: \"Chicago Bulls\",\n    cavs: \"Cleveland Cavaliers\",\n    cavaliers: \"Cleveland Cavaliers\",\n    cleveland: \"Cleveland Cavaliers\",\n    cle: \"Cleveland Cavaliers\",\n    mavs: \"Dallas Mavericks\",\n    mavericks: \"Dallas Mavericks\",\n    dallas: \"Dallas Mavericks\",\n    dal: \"Dallas Mavericks\",\n    nuggets: \"Denver Nuggets\",\n    denver: \"Denver Nuggets\",\n    den: \"Denver Nuggets\",\n    pistons: \"Detroit Pistons\",\n    detroit: \"Detroit Pistons\",\n    det: \"Detroit Pistons\",\n    rockets: \"Houston Rockets\",\n    houston: \"Houston Rockets\",\n    hou: \"Houston Rockets\",\n    pacers: \"Indiana Pacers\",\n    indiana: \"Indiana Pacers\",\n    ind: \"Indiana Pacers\",\n    grizzlies: \"Memphis Grizzlies\",\n    memphis: \"Memphis Grizzlies\",\n    mem: \"Memphis Grizzlies\",\n    bucks: \"Milwaukee Bucks\",\n    milwaukee: \"Milwaukee Bucks\",\n    mil: \"Milwaukee Bucks\",\n    wolves: \"Minnesota Timberwolves\",\n    timberwolves: \"Minnesota Timberwolves\",\n    minnesota: \"Minnesota Timberwolves\",\n    min: \"Minnesota Timberwolves\",\n    pelicans: \"New Orleans Pelicans\",\n    \"new orleans\": \"New Orleans Pelicans\",\n    nop: \"New Orleans Pelicans\",\n    no: \"New Orleans Pelicans\",\n    nets: \"Brooklyn Nets\",\n    brooklyn: \"Brooklyn Nets\",\n    bkn: \"Brooklyn Nets\",\n    bk: \"Brooklyn Nets\",\n    thunder: \"Oklahoma City Thunder\",\n    okc: \"Oklahoma City Thunder\",\n    magic: \"Orlando Magic\",\n    orlando: \"Orlando Magic\",\n    orl: \"Orlando Magic\",\n    \"76ers\": \"Philadelphia 76ers\",\n    sixers: \"Philadelphia 76ers\",\n    philly: \"Philadelphia 76ers\",\n    philadelphia: \"Philadelphia 76ers\",\n    phi: \"Philadelphia 76ers\",\n    suns: \"Phoenix Suns\",\n    phoenix: \"Phoenix Suns\",\n    phx: \"Phoenix Suns\",\n    blazers: \"Portland Trail Blazers\",\n    portland: \"Portland Trail Blazers\",\n    por: \"Portland Trail Blazers\",\n    kings: \"Sacramento Kings\",\n    sacramento: \"Sacramento Kings\",\n    sac: \"Sacramento Kings\",\n    raptors: \"Toronto Raptors\",\n    toronto: \"Toronto Raptors\",\n    tor: \"Toronto Raptors\",\n    jazz: \"Utah Jazz\",\n    utah: \"Utah Jazz\",\n    uta: \"Utah Jazz\",\n    wizards: \"Washington Wizards\",\n    washington: \"Washington Wizards\",\n    was: \"Washington Wizards\",\n    wsh: \"Washington Wizards\",\n    hawks: \"Atlanta Hawks\",\n    atlanta: \"Atlanta Hawks\",\n    atl: \"Atlanta Hawks\",\n    hornets: \"Charlotte Hornets\",\n    charlotte: \"Charlotte Hornets\",\n    cha: \"Charlotte Hornets\",\n\n    // NFL\n    chiefs: \"Kansas City Chiefs\",\n    \"kansas city\": \"Kansas City Chiefs\",\n    kc: \"Kansas City Chiefs\",\n    eagles: \"Philadelphia Eagles\",\n    cowboys: \"Dallas Cowboys\",\n    niners: \"San Francisco 49ers\",\n    \"49ers\": \"San Francisco 49ers\",\n    bills: \"Buffalo Bills\",\n    buffalo: \"Buffalo Bills\",\n    ravens: \"Baltimore Ravens\",\n    baltimore: \"Baltimore Ravens\",\n    bengals: \"Cincinnati Bengals\",\n    cincinnati: \"Cincinnati Bengals\",\n    browns: \"Cleveland Browns\",\n    steelers: \"Pittsburgh Steelers\",\n    pittsburgh: \"Pittsburgh Steelers\",\n    colts: \"Indianapolis Colts\",\n    texans: \"Houston Texans\",\n    jaguars: \"Jacksonville Jaguars\",\n    jags: \"Jacksonville Jaguars\",\n    jacksonville: \"Jacksonville Jaguars\",\n    titans: \"Tennessee Titans\",\n    tennessee: \"Tennessee Titans\",\n    broncos: \"Denver Broncos\",\n    chargers: \"Los Angeles Chargers\",\n    \"la chargers\": \"Los Angeles Chargers\",\n    raiders: \"Las Vegas Raiders\",\n    vegas: \"Las Vegas Raiders\",\n    seahawks: \"Seattle Seahawks\",\n    seattle: \"Seattle Seahawks\",\n    cardinals: \"Arizona Cardinals\",\n    arizona: \"Arizona Cardinals\",\n    rams: \"Los Angeles Rams\",\n    \"la rams\": \"Los Angeles Rams\",\n    packers: \"Green Bay Packers\",\n    \"green bay\": \"Green Bay Packers\",\n    bears: \"Chicago Bears\",\n    lions: \"Detroit Lions\",\n    vikings: \"Minnesota Vikings\",\n    saints: \"New Orleans Saints\",\n    falcons: \"Atlanta Falcons\",\n    panthers: \"Carolina Panthers\",\n    carolina: \"Carolina Panthers\",\n    bucs: \"Tampa Bay Buccaneers\",\n    buccaneers: \"Tampa Bay Buccaneers\",\n    tampa: \"Tampa Bay Buccaneers\",\n    \"tampa bay\": \"Tampa Bay Buccaneers\",\n    commanders: \"Washington Commanders\",\n    giants: \"New York Giants\",\n    \"ny giants\": \"New York Giants\",\n    jets: \"New York Jets\",\n    \"ny jets\": \"New York Jets\",\n    patriots: \"New England Patriots\",\n    pats: \"New England Patriots\",\n    \"new england\": \"New England Patriots\",\n    dolphins: \"Miami Dolphins\",\n\n    // College - Power conferences & common\n    army: \"Army Black Knights\",\n    navy: \"Navy Midshipmen\",\n    alabama: \"Alabama Crimson Tide\",\n    bama: \"Alabama Crimson Tide\",\n    georgia: \"Georgia Bulldogs\",\n    \"ohio state\": \"Ohio State Buckeyes\",\n    \"ohio st\": \"Ohio State Buckeyes\",\n    osu: \"Ohio State Buckeyes\",\n    michigan: \"Michigan Wolverines\",\n    \"michigan state\": \"Michigan State Spartans\",\n    \"michigan st\": \"Michigan State Spartans\",\n    msu: \"Michigan State Spartans\",\n    texas: \"Texas Longhorns\",\n    \"notre dame\": \"Notre Dame Fighting Irish\",\n    duke: \"Duke Blue Devils\",\n    unc: \"North Carolina Tar Heels\",\n    \"north carolina\": \"North Carolina Tar Heels\",\n    kentucky: \"Kentucky Wildcats\",\n    kansas: \"Kansas Jayhawks\",\n    gonzaga: \"Gonzaga Bulldogs\",\n    auburn: \"Auburn Tigers\",\n    // tennessee: \"Tennessee Volunteers\", // Duplicate key, conflicts with Titans\n    purdue: \"Purdue Boilermakers\",\n    uconn: \"UConn Huskies\",\n    \"iowa state\": \"Iowa State Cyclones\",\n    \"iowa st\": \"Iowa State Cyclones\",\n    // houston: \"Houston Cougars\", // Duplicate key, conflicts with Rockets/Texans\n    baylor: \"Baylor Bears\",\n    // arizona: \"Arizona Wildcats\", // Duplicate key, conflicts with Cardinals\n    ucla: \"UCLA Bruins\",\n    florida: \"Florida Gators\",\n    lsu: \"LSU Tigers\",\n    arkansas: \"Arkansas Razorbacks\",\n    oregon: \"Oregon Ducks\",\n    wisconsin: \"Wisconsin Badgers\",\n    illinois: \"Illinois Fighting Illini\",\n    iowa: \"Iowa Hawkeyes\",\n\n    // NCAAM - Mid-majors & smaller conferences (Horizon, MAAC, C-USA, etc.)\n    siena: \"Siena Saints\",\n    \"st peters\": \"Saint Peter's Peacocks\",\n    \"saint peters\": \"Saint Peter's Peacocks\",\n    \"st peter's\": \"Saint Peter's Peacocks\",\n    \"saint peter's\": \"Saint Peter's Peacocks\",\n    iona: \"Iona Gaels\",\n    merrimack: \"Merrimack Warriors\",\n    \"robert morris\": \"Robert Morris Colonials\",\n    \"rob morris\": \"Robert Morris Colonials\",\n    \"wright state\": \"Wright State Raiders\",\n    \"wright st\": \"Wright State Raiders\",\n    \"cleveland state\": \"Cleveland State Vikings\",\n    \"cleveland st\": \"Cleveland State Vikings\",\n    ipfw: \"Purdue Fort Wayne Mastodons\",\n    \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\",\n    \"n kentucky\": \"Northern Kentucky Norse\",\n    \"northern kentucky\": \"Northern Kentucky Norse\",\n    nku: \"Northern Kentucky Norse\",\n    youngstown: \"Youngstown State Penguins\",\n    \"youngstown state\": \"Youngstown State Penguins\",\n    \"youngstown st\": \"Youngstown State Penguins\",\n    \"wisc green bay\": \"Green Bay Phoenix\",\n    // \"green bay\": \"Green Bay Phoenix\", // Duplicate key, conflicts with Packers\n    \"wisconsin green bay\": \"Green Bay Phoenix\",\n    \"detroit mercy\": \"Detroit Mercy Titans\",\n    // detroit: \"Detroit Mercy Titans\", // Duplicate key, conflicts with Lions/Pistons\n    rice: \"Rice Owls\",\n    utsa: \"UTSA Roadrunners\",\n    tulane: \"Tulane Green Wave\",\n    uab: \"UAB Blazers\",\n    \"louisiana tech\": \"Louisiana Tech Bulldogs\",\n    \"la tech\": \"Louisiana Tech Bulldogs\",\n    \"wisc milwaukee\": \"Milwaukee Panthers\",\n    // milwaukee: \"Milwaukee Panthers\", // Duplicate key, conflicts with Bucks\n    \"wisconsin milwaukee\": \"Milwaukee Panthers\",\n    uwm: \"Milwaukee Panthers\",\n    oakland: \"Oakland Golden Grizzlies\",\n    marist: \"Marist Red Foxes\",\n    \"sacred heart\": \"Sacred Heart Pioneers\",\n    fairfield: \"Fairfield Stags\",\n    quinnipiac: \"Quinnipiac Bobcats\",\n    rider: \"Rider Broncs\",\n    niagara: \"Niagara Purple Eagles\",\n    manhattan: \"Manhattan Jaspers\",\n    canisius: \"Canisius Golden Griffins\",\n    \"mount st marys\": \"Mount St. Mary's Mountaineers\",\n    wagner: \"Wagner Seahawks\",\n    // \"youngstown state\": \"Youngstown State Penguins\", // Duplicate key\n    // \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\", // Duplicate key\n    marshall: \"Marshall Thundering Herd\",\n    wku: \"Western Kentucky Hilltoppers\",\n    \"western kentucky\": \"Western Kentucky Hilltoppers\",\n    fiu: \"FIU Panthers\",\n    \"middle tennessee\": \"Middle Tennessee Blue Raiders\",\n    mtsu: \"Middle Tennessee Blue Raiders\",\n    \"old dominion\": \"Old Dominion Monarchs\",\n    odu: \"Old Dominion Monarchs\",\n    // charlotte: \"Charlotte 49ers\", // Duplicate key, conflicts with Hornets\n    \"east carolina\": \"East Carolina Pirates\",\n    ecu: \"East Carolina Pirates\",\n    \"north texas\": \"North Texas Mean Green\",\n    utep: \"UTEP Miners\",\n    \"sam houston\": \"Sam Houston Bearkats\",\n    \"jacksonville st\": \"Jacksonville State Gamecocks\",\n    \"new mexico st\": \"New Mexico State Aggies\",\n    liberty: \"Liberty Flames\",\n    \"kennesaw state\": \"Kennesaw State Owls\",\n  };\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // TEAM VARIANT REGISTRY \u2014 loaded from JSON (362 NCAAM + 30 NBA teams)\n  // Builds a lookup: lowercase name/location/abbreviation \u2192 canonical name\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  let _variantsLoaded = false;\n\n  async function loadTeamVariants() {\n    if (_variantsLoaded) return;\n    try {\n      const [ncaamRes, nbaRes] = await Promise.all([\n        fetch(\"assets/data/team-variants/ncaam_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n        fetch(\"assets/data/team-variants/nba_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n      ]);\n\n      if (ncaamRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(ncaamRes)) {\n          const canonical = team.name;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          const nick = (team.nickname || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 2 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          if (nick && nick.length > 5 && !TEAM_ALIASES[nick])\n            TEAM_ALIASES[nick] = canonical;\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NCAAM team variants into standardizer`);\n      }\n\n      if (nbaRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(nbaRes)) {\n          const canonical = team.name || team.fullName;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 1 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NBA team variants into standardizer`);\n      }\n\n      _variantsLoaded = true;\n    } catch (e) {\n      console.warn(\"[PickStandardizer] Could not load team variants:\", e);\n    }\n  }\n\n  // Kick off loading immediately\n  loadTeamVariants();\n\n  /**\n   * Main entry point - detects format and parses accordingly\n   */\n  function standardizePicks(input, options = {}) {\n    if (options.unitMultiplier) {\n      unitMultiplier = options.unitMultiplier;\n    }\n\n    // Detect bet-history format (timestamps + picks + dollar amounts)\n    if (typeof input === \"string\" && isBetHistoryFormat(input)) {\n      console.log(\"\uD83D\uDCCB Detected bet-history paste format\");\n      return parseBetHistory(input);\n    }\n\n    // Detect if input is HTML\n    if (typeof input === \"string\" && input.includes(\"<\")) {\n      // Check for sportsbook game lines format (div-based panels)\n      if (\n        input.includes('data-panel=\"line\"') ||\n        input.includes(\"data-sport-line\")\n      ) {\n        return parseSportsbookGameLines(input);\n      }\n      // Legacy bet slip table format\n      if (input.includes(\"<table\") || input.includes(\"<tr\")) {\n        return parseHTMLPicks(input);\n      }\n      // Generic HTML with classes (may contain picks)\n      if (input.includes(\"class=\")) {\n        return parseSportsbookGameLines(input);\n      }\n    }\n\n    // Otherwise treat as text\n    return parseTextPicks(input);\n  }\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // Bet history support (minimal)\n  // The UI references these helpers; keep them defined to avoid runtime\n  // ReferenceErrors even when bet-history parsing isn't used.\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n  function isBetHistoryFormat(text) {\n    if (typeof text !== \"string\") return false;\n    const hasMoney = /\\$[\\d,]+/.test(text);\n    const hasTimestamp =\n      /\\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\b\\s+\\d{1,2},?\\s*\\d{4}/i.test(\n        text,\n      );\n    const hasOddsSignals = /\\bML\\b/i.test(text) || /[+-]\\d{3,4}/.test(text);\n    return hasMoney && (hasTimestamp || hasOddsSignals);\n  }\n\n  function parseBetHistory(text) {\n    if (typeof text !== \"string\") return [];\n\n    // Strip common bet-history timestamp prefixes and $risk/$win lines,\n    // then fall back to the existing flexible text parser.\n    const cleanedLines = text\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter(Boolean)\n      .map((line) =>\n        line\n          .replace(\n            /^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\s+\\d{1,2},?\\s*\\d{4}\\s+\\d{1,2}:\\d{2}\\s*(?:am|pm)?\\s*/i,\n            \"\",\n          )\n          .trim(),\n      )\n      .filter((line) => !/^\\$[\\d,]+/.test(line));\n\n    return parseTextPicks(cleanedLines.join(\"\\n\"));\n  }\n\n  function parseBetHistoryLeg(line, defaultSport = \"NBA\", currentGame = null) {\n    if (typeof line !== \"string\") return null;\n    return parseFlexibleLine(line, defaultSport, currentGame);\n  }\n\n  /**\n   * Parse sportsbook game lines HTML (div-based panels)\n   * Handles structure like: div[data-panel=\"line\"] with nested teams, dates, and betting lines\n   */\n  function parseSportsbookGameLines(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all game panels - try multiple selectors\n    let gamePanels = doc.querySelectorAll('[data-panel=\"line\"]');\n\n    if (gamePanels.length === 0) {\n      gamePanels = doc.querySelectorAll(\n        \".line-panel, .game-panel, [data-sport-line]\",\n      );\n    }\n\n    if (gamePanels.length === 0) {\n      // Try alternate selector for different HTML structures\n      gamePanels = doc.querySelectorAll(\".lines-row, .game-row, .event-row\");\n    }\n\n    console.log(`\uD83D\uDD0D Found ${gamePanels.length} game panels to parse`);\n\n    gamePanels.forEach((panel, idx) => {\n      try {\n        const gamePicks = parseGamePanel(panel);\n        console.log(`  Panel ${idx + 1}: ${gamePicks.length} picks found`);\n        picks.push(...gamePicks);\n      } catch (e) {\n        console.warn(\"Failed to parse game panel:\", e);\n      }\n    });\n\n    // If no picks found from HTML structure, try extracting text and parsing as text\n    if (picks.length === 0) {\n      console.log(\"\uD83D\uDCDD No HTML picks found, falling back to text parsing...\");\n      const textContent =\n        doc.body?.textContent || html.replace(/<[^>]*>/g, \" \");\n      const textPicks = parseTextPicks(textContent);\n      picks.push(...textPicks);\n    }\n\n    console.log(`\uD83D\uDCCA Total parsed: ${picks.length} betting lines`);\n    return picks;\n  }\n\n  /**\n   * Parse a single game panel into multiple betting line picks\n   */\n  function parseGamePanel(panel) {\n    const picks = [];\n\n    // Extract game metadata\n    const gameInfo = extractGameInfo(panel);\n\n    if (!gameInfo.firstTeam && !gameInfo.secondTeam) {\n      // No teams found, skip this panel\n      return picks;\n    }\n\n    // Find all betting line groups\n    const lineGroups = panel.querySelectorAll(\n      \".group, .line-group, [data-group-line]\",\n    );\n\n    lineGroups.forEach((group) => {\n      try {\n        const groupPicks = parseLineGroup(group, gameInfo);\n        picks.push(...groupPicks);\n      } catch (e) {\n        console.warn(\"Failed to parse line group:\", e);\n      }\n    });\n\n    // If no line groups found, try parsing individual lines\n    if (picks.length === 0) {\n      const individualLines = panel.querySelectorAll(\n        '.line-play, .bet-line, [data-field=\"line\"]',\n      );\n      individualLines.forEach((line) => {\n        const pick = parseIndividualLine(line, gameInfo);\n        if (pick) picks.push(pick);\n      });\n    }\n\n    return picks;\n  }\n\n  /**\n   * Extract game information from a panel (teams, date, time, sport)\n   */\n  function extractGameInfo(panel) {\n    const info = {\n      firstTeam: \"\",\n      secondTeam: \"\",\n      date: getTodayDate(),\n      time: \"\",\n      sport: \"NBA\", // Default\n      league: \"\",\n    };\n\n    // Extract team names\n    const firstTeamEl = panel.querySelector(\n      '[data-field=\"first-team\"], .first-team, .away-team, .team-1',\n    );\n    const secondTeamEl = panel.querySelector(\n      '[data-field=\"second-team\"], .second-team, .home-team, .team-2',\n    );\n\n    if (firstTeamEl) info.firstTeam = firstTeamEl.textContent.trim();\n    if (secondTeamEl) info.secondTeam = secondTeamEl.textContent.trim();\n\n    // Extract date and time\n    const dateEl = panel.querySelector(\n      '[data-field=\"min-date\"], .game-date, .date',\n    );\n    const timeEl = panel.querySelector(\n      '[data-field=\"min-time\"], .game-time, .time',\n    );\n\n    if (dateEl) info.date = dateEl.textContent.trim();\n    if (timeEl) info.time = timeEl.textContent.trim();\n\n    // Extract sport/league\n    const leagueEl = panel.querySelector(\n      '[data-field=\"league-name\"], .league, .sport-name',\n    );\n    if (leagueEl) {\n      info.league = leagueEl.textContent.trim();\n      info.sport = detectSportFromLeague(info.league);\n    }\n\n    // Try to detect sport from panel attributes\n    const sportLine = panel.querySelector(\"[data-sport-line]\");\n    if (sportLine) {\n      const sportAttr = sportLine.getAttribute(\"data-sport-line\");\n      if (sportAttr) {\n        info.sport = detectSportFromAttribute(sportAttr);\n      }\n    }\n\n    // Build game string\n    if (info.firstTeam && info.secondTeam) {\n      info.game = `${info.firstTeam} @ ${info.secondTeam}`;\n      info.awayTeam = info.firstTeam;\n      info.homeTeam = info.secondTeam;\n    }\n\n    return info;\n  }\n\n  /**\n   * Parse a betting line group (spread, moneyline, total, etc.)\n   */\n  function parseLineGroup(group, gameInfo) {\n    const picks = [];\n\n    // Determine the bet type from the group\n    const groupType = detectGroupType(group);\n\n    // Find all line plays within this group\n    const linePlays = group.querySelectorAll(\n      \".line-play, .bet-option, [data-type]\",\n    );\n\n    linePlays.forEach((play, index) => {\n      const pick = parseLinePlacement(play, gameInfo, groupType, index);\n      if (pick) picks.push(pick);\n    });\n\n    return picks;\n  }\n\n  /**\n   * Detect the type of betting group (spread, ML, total, team total)\n   */\n  function detectGroupType(group) {\n    const groupClass = group.className || \"\";\n    const dataType = group.getAttribute(\"data-type\") || \"\";\n    const groupText = group.textContent.toLowerCase();\n\n    // Check data-type attribute\n    if (dataType.includes(\"spread\") || dataType.includes(\"ps\")) return \"spread\";\n    if (dataType.includes(\"ml\") || dataType.includes(\"money\"))\n      return \"moneyline\";\n    if (dataType.includes(\"total\") || dataType.includes(\"ou\")) {\n      if (dataType.includes(\"team\") || dataType.includes(\"tt\"))\n        return \"team-total\";\n      return \"total\";\n    }\n\n    // Check class names\n    if (groupClass.includes(\"spread\")) return \"spread\";\n    if (groupClass.includes(\"money\") || groupClass.includes(\"ml\"))\n      return \"moneyline\";\n    if (groupClass.includes(\"team-total\") || groupClass.includes(\"tt\"))\n      return \"team-total\";\n    if (groupClass.includes(\"total\") || groupClass.includes(\"ou\"))\n      return \"total\";\n\n    // Check group position/content\n    if (groupClass.includes(\"group-1\") || groupClass.includes(\"group-0\"))\n      return \"spread\";\n    if (groupClass.includes(\"group-2\")) return \"moneyline\";\n    if (groupClass.includes(\"group-3\")) return \"total\";\n    if (groupClass.includes(\"group-4\") || groupClass.includes(\"group-5\"))\n      return \"team-total\";\n\n    // Infer from text content\n    if (groupText.includes(\"spread\")) return \"spread\";\n    if (groupText.includes(\"money\")) return \"moneyline\";\n    if (groupText.includes(\"over\") || groupText.includes(\"under\"))\n      return \"total\";\n\n    return \"spread\"; // Default\n  }\n\n  /**\n   * Parse an individual line placement into a pick object\n   */\n  function parseLinePlacement(play, gameInfo, betType, index) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    // Extract line value\n    const lineEl = play.querySelector(\n      '[data-field=\"line\"], .line, .spread-value, .total-value',\n    );\n    const priceEl = play.querySelector(\n      '[data-field=\"price\"], .price, .odds, .juice',\n    );\n\n    let line = lineEl ? lineEl.textContent.trim() : \"\";\n    let price = priceEl ? priceEl.textContent.trim() : \"-110\";\n\n    // Normalize line (convert fractions to decimals)\n    line = line.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Determine which team this line is for\n    const teamIndex = determineTeamIndex(play, index);\n\n    switch (betType) {\n      case \"spread\":\n        pick.pickType = \"spread\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = formatLine(line);\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"moneyline\":\n        pick.pickType = \"moneyline\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.odds = formatOdds(line || price); // ML often shows odds in the line field\n        break;\n\n      case \"total\":\n        pick.pickType = \"total\";\n        pick.pickDirection = teamIndex === 0 ? \"Over\" : \"Under\";\n        pick.pickTeam = pick.pickDirection;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"team-total\":\n        pick.pickType = \"team-total\";\n        pick.pickDirection = determineOverUnder(play, index);\n        // Team totals alternate: Team1 Over, Team1 Under, Team2 Over, Team2 Under\n        const ttTeamIdx = Math.floor(index / 2);\n        pick.pickTeam =\n          ttTeamIdx === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n    }\n\n    // Validate pick has required fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    // Skip if no meaningful line/odds\n    if (!pick.line && !pick.odds && pick.pickType !== \"moneyline\") {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse an individual line element (fallback when no groups found)\n   */\n  function parseIndividualLine(lineEl, gameInfo) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    const lineText = lineEl.textContent.trim();\n\n    // Try to parse the line text\n    if (!lineText) return null;\n\n    // Determine bet type and parse accordingly\n    parseLineAndOdds(pick, lineText);\n\n    if (!pick.pickType) return null;\n\n    // Default to first team if we can't determine\n    if (!pick.pickTeam) {\n      pick.pickTeam = gameInfo.firstTeam || \"Unknown\";\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine team index (0 = first/away, 1 = second/home)\n   */\n  function determineTeamIndex(play, defaultIndex) {\n    // Check for data attributes\n    const teamAttr =\n      play.getAttribute(\"data-team\") || play.getAttribute(\"data-index\");\n    if (teamAttr) {\n      return parseInt(teamAttr) || 0;\n    }\n\n    // Check parent for position info\n    const parent = play.parentElement;\n    if (parent) {\n      const siblings = Array.from(parent.children);\n      const position = siblings.indexOf(play);\n      if (position !== -1) {\n        return position % 2; // Alternates between 0 and 1\n      }\n    }\n\n    return defaultIndex % 2;\n  }\n\n  /**\n   * Determine over/under for team totals\n   */\n  function determineOverUnder(play, index) {\n    const text = play.textContent.toLowerCase();\n    if (text.includes(\"over\") || text.includes(\"o \")) return \"Over\";\n    if (text.includes(\"under\") || text.includes(\"u \")) return \"Under\";\n\n    // Alternates: even = Over, odd = Under\n    return index % 2 === 0 ? \"Over\" : \"Under\";\n  }\n\n  /**\n   * Format line value (ensure proper +/- prefix)\n   */\n  function formatLine(line) {\n    if (!line) return \"\";\n    line = line.trim();\n\n    // If it's a total number without prefix (e.g., \"220\"), return as-is\n    if (/^\\d+\\.?\\d*$/.test(line)) return line;\n\n    // Ensure +/- prefix for spreads\n    if (/^[+-]/.test(line)) return line;\n    if (/^\\d/.test(line)) return \"+\" + line;\n\n    return line;\n  }\n\n  /**\n   * Format odds value (ensure proper format)\n   */\n  function formatOdds(odds) {\n    if (!odds) return \"-110\";\n    odds = odds.trim();\n\n    // Remove any currency symbols\n    odds = odds.replace(/[$\u20AC\u00A3]/g, \"\");\n\n    // If just a number, assume negative\n    if (/^\\d+$/.test(odds)) {\n      const num = parseInt(odds);\n      return num >= 100 ? `-${num}` : `+${num}`;\n    }\n\n    // Already has +/-\n    if (/^[+-]\\d+/.test(odds)) return odds;\n\n    return \"-110\"; // Default\n  }\n\n  /**\n   * Detect sport from league name\n   */\n  function detectSportFromLeague(league) {\n    const lower = league.toLowerCase();\n    if (lower.includes(\"nba\") || lower.includes(\"basketball\")) return \"NBA\";\n    if (lower.includes(\"nfl\") || lower.includes(\"football\")) return \"NFL\";\n    if (\n      lower.includes(\"ncaab\") ||\n      lower.includes(\"ncaam\") ||\n      lower.includes(\"college basketball\")\n    )\n      return \"NCAAB\";\n    if (lower.includes(\"ncaaf\") || lower.includes(\"college football\"))\n      return \"NCAAF\";\n    if (lower.includes(\"mlb\") || lower.includes(\"baseball\")) return \"MLB\";\n    if (lower.includes(\"nhl\") || lower.includes(\"hockey\")) return \"NHL\";\n    if (\n      lower.includes(\"soccer\") ||\n      lower.includes(\"mls\") ||\n      lower.includes(\"premier\")\n    )\n      return \"Soccer\";\n    return \"NBA\"; // Default\n  }\n\n  /**\n   * Detect sport from data attribute\n   */\n  function detectSportFromAttribute(attr) {\n    const lower = attr.toLowerCase();\n    if (lower.includes(\"nba\")) return \"NBA\";\n    if (lower.includes(\"nfl\")) return \"NFL\";\n    if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\")) return \"NCAAB\";\n    if (lower.includes(\"ncaaf\")) return \"NCAAF\";\n    if (lower.includes(\"mlb\")) return \"MLB\";\n    if (lower.includes(\"nhl\")) return \"NHL\";\n    return \"NBA\";\n  }\n\n  /**\n   * Parse HTML from sportsbook bet slip tables\n   * Enhanced to handle parlays, round robins, and multi-leg bets\n   */\n  function parseHTMLPicks(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all bet rows\n    const rows = doc.querySelectorAll(\"tr[data-ticket], tr.odd, tr.even\");\n\n    // Track seen tickets to avoid duplicates in round robins\n    const seenLegs = new Set();\n\n    rows.forEach((row) => {\n      try {\n        const ticketId = row.getAttribute(\"data-ticket\") || \"\";\n\n        // Check if this is a parlay/round robin row\n        const parlayLabel = row.querySelector(\".type-magic\");\n        const isParlayRow = parlayLabel !== null;\n\n        if (isParlayRow) {\n          // Parse parlay row - extract all legs\n          const parlayType = parlayLabel.textContent.trim();\n          const legs = row.querySelectorAll(\".wager-simple\");\n\n          // Get the row's total risk/win (shared among all 2-leg combos in round robin)\n          const rowRisk =\n            parseFloat(\n              row.querySelector(\"[data-risk]\")?.getAttribute(\"data-risk\"),\n            ) || 0;\n          const rowWin =\n            parseFloat(\n              row.querySelector(\"[data-win]\")?.getAttribute(\"data-win\"),\n            ) || 0;\n\n          legs.forEach((leg, legIdx) => {\n            const legPick = parseParlayLeg(leg, ticketId, parlayType, legIdx);\n            if (legPick) {\n              // Create unique key for this leg to avoid duplicates\n              const legKey = `${ticketId}_${legPick.pickTeam}_${legPick.line || \"ML\"}_${legPick.segment}`;\n\n              if (!seenLegs.has(legKey)) {\n                seenLegs.add(legKey);\n                // Distribute risk/win proportionally across legs\n                legPick.risk = Math.round(rowRisk / legs.length);\n                legPick.win = Math.round(rowWin / legs.length);\n                legPick.parlayId = ticketId;\n                legPick.parlayType = parlayType;\n                legPick.isParlay = true;\n                picks.push(legPick);\n              }\n            }\n          });\n        } else {\n          // Single bet row\n          const pick = parseHTMLRow(row);\n          if (pick) {\n            pick.isParlay = false;\n            picks.push(pick);\n          }\n        }\n      } catch (e) {\n        console.warn(\"Failed to parse HTML row:\", e);\n      }\n    });\n\n    return picks;\n  }\n\n  /**\n   * Parse a single leg from a parlay/round robin wager\n   */\n  function parseParlayLeg(legEl, ticketId, parlayType, legIndex) {\n    const pick = {\n      sport: \"NCAAB\", // Default for college games\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get team name\n    const teamEl = legEl.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n      // Check if it contains a \"/\" indicating a total bet on a game\n      if (pick.pickTeam.includes(\"/\")) {\n        const parts = pick.pickTeam.split(\"/\").map((s) => s.trim());\n        pick.awayTeam = parts[0];\n        pick.homeTeam = parts[1];\n      }\n    }\n\n    // Get line/odds\n    const lineEl = legEl.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = legEl.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      }\n    }\n\n    // Detect sport from icon or team name\n    const icon = legEl.querySelector(\"img.team-logo\");\n    if (icon) {\n      const src = icon.getAttribute(\"src\") || \"\";\n      if (\n        src.includes(\"NBA\") ||\n        src.includes(\"Spurs\") ||\n        src.includes(\"Knicks\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Check pick team name to infer sport\n    if (pick.pickTeam) {\n      const teamLower = pick.pickTeam.toLowerCase();\n      if (\n        teamLower.includes(\"spurs\") ||\n        teamLower.includes(\"knicks\") ||\n        teamLower.includes(\"lakers\") ||\n        teamLower.includes(\"celtics\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Get date from nearest sibling with date\n    const dateCell = legEl.closest(\"tr\")?.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Validate\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse a single HTML table row from sportsbook\n   */\n  function parseHTMLRow(row) {\n    const pick = {\n      sport: \"NBA\",\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get accepted date/time\n    const dateCell = row.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Get team name\n    const teamEl = row.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n    }\n\n    // Get line/odds - handle both spread and moneyline\n    const lineEl = row.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = row.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      } else if (\n        periodText.includes(\"1st quarter\") ||\n        periodText.includes(\"q1\") ||\n        periodText.includes(\"1q\")\n      ) {\n        pick.segment = \"1st Quarter\";\n      }\n    }\n\n    // Get risk amount\n    const riskEl = row.querySelector(\"[data-risk]\");\n    if (riskEl) {\n      pick.risk = parseFloat(riskEl.getAttribute(\"data-risk\")) || 0;\n    } else {\n      const riskText = row.querySelector(\".risk-col span\");\n      if (riskText) {\n        pick.risk = parseCurrency(riskText.textContent);\n      }\n    }\n\n    // Get win amount\n    const winEl = row.querySelector(\"[data-win]\");\n    if (winEl) {\n      pick.win = parseFloat(winEl.getAttribute(\"data-win\")) || 0;\n    } else {\n      const winText = row.querySelector(\".win-col span\");\n      if (winText) {\n        pick.win = parseCurrency(winText.textContent);\n      }\n    }\n\n    // Get game info from hidden details\n    const gameEl = row.querySelector(\".d-r\");\n    if (gameEl) {\n      const gameText = gameEl.textContent;\n      if (\n        gameText.includes(\"/\") ||\n        gameText.includes(\" vs \") ||\n        gameText.includes(\" @ \")\n      ) {\n        pick.game = gameText.trim();\n        const teams = parseGameString(gameText);\n        if (teams) {\n          pick.awayTeam = teams.away;\n          pick.homeTeam = teams.home;\n        }\n      }\n    }\n\n    // Detect sport from selection info\n    const selectionEl = row.querySelector(\n      \".selection-S .d-r, .selection-M .d-r\",\n    );\n    if (selectionEl) {\n      const selText = selectionEl.textContent.toLowerCase();\n      if (selText.includes(\"nba\")) pick.sport = \"NBA\";\n      else if (selText.includes(\"nfl\")) pick.sport = \"NFL\";\n      else if (selText.includes(\"ncaab\") || selText.includes(\"ncaam\"))\n        pick.sport = \"NCAAB\";\n      else if (selText.includes(\"ncaaf\")) pick.sport = \"NCAAF\";\n      else if (selText.includes(\"mlb\")) pick.sport = \"MLB\";\n      else if (selText.includes(\"nhl\")) pick.sport = \"NHL\";\n    }\n\n    // Validate minimum fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse line and odds from text like \"+1\u00BD -115\" or \"ML +115\"\n   */\n  function parseLineAndOdds(pick, text) {\n    // Convert fractions to decimals\n    text = text.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Check for moneyline first\n    if (/\\bML\\b/i.test(text)) {\n      pick.pickType = \"moneyline\";\n      // Extract odds after ML\n      const oddsMatch = text.match(/ML\\s*([+-]\\d+)/i);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Check for total (over/under)\n    if (/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i.test(text)) {\n      const match = text.match(/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i);\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(match[1]) ? \"Over\" : \"Under\";\n      pick.line = match[2];\n      // Extract odds\n      const oddsMatch = text.match(/([+-]\\d{2,4})(?:\\s|$)/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Otherwise it's a spread\n    // Pattern: \"+2.5 -110\" or \"-3 +105\"\n    const spreadMatch = text.match(/([+-]?\\d+\\.?\\d*)\\s+([+-]\\d{2,4})/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.line =\n        spreadMatch[1].startsWith(\"+\") || spreadMatch[1].startsWith(\"-\")\n          ? spreadMatch[1]\n          : \"+\" + spreadMatch[1];\n      pick.odds = spreadMatch[2];\n      return;\n    }\n\n    // Just a line without odds\n    const lineOnly = text.match(/([+-]?\\d+\\.?\\d*)/);\n    if (lineOnly) {\n      pick.pickType = \"spread\";\n      pick.line =\n        lineOnly[1].startsWith(\"+\") || lineOnly[1].startsWith(\"-\")\n          ? lineOnly[1]\n          : \"+\" + lineOnly[1];\n    }\n  }\n\n  /**\n   * Parse text-based picks - SMART INTUITIVE PARSER\n   * Handles any reasonable format:\n   *   \"POR +7\"\n   *   \"bills fg -3; bills over 44.5\"\n   *   \"bills ml 1h; bills -2.5 1h\"\n   *   \"bills o10 tto 1h\"\n   *   \"BOS @ POR under 117.5\"\n   *   \"1H POR +3.5\"\n   *   \"under 220\"\n   */\n  function parseTextPicks(text) {\n    const picks = [];\n\n    // Split on newlines, semicolons, and periods (but not decimal points)\n    const rawLines = text\n      .replace(/;/g, \"\\n\")\n      .replace(/\\.\\s+/g, \"\\n\") // Period followed by space = new line\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter((l) => l.length > 0);\n\n    let currentSport = \"NBA\";\n    let currentGame = null;\n\n    for (const line of rawLines) {\n      // ===== PIPE-DELIMITED FORMAT =====\n      // Format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n      // Example: \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n      if (line.includes(\"|\")) {\n        const pipePick = parsePipeDelimitedLine(line);\n        if (pipePick) {\n          // Ensure sport is uppercase\n          if (pipePick.sport) pipePick.sport = pipePick.sport.toUpperCase();\n          picks.push(pipePick);\n          continue;\n        }\n      }\n\n      // Check for sport/game context\n      const contextInfo = extractContext(line);\n      if (contextInfo.sport) currentSport = contextInfo.sport.toUpperCase();\n      if (contextInfo.game) currentGame = contextInfo.game;\n\n      // Skip if it's just a context line (no bet info)\n      if (contextInfo.isContextOnly) continue;\n\n      const pick = parseFlexibleLine(line, currentSport, currentGame);\n      if (pick) {\n        picks.push(pick);\n      }\n    }\n\n    // Normalize all picks for consistency\n    const normalizedPicks = picks.map((pick) => ({\n      ...pick,\n      sport: (pick.sport || \"NBA\").toUpperCase(),\n      league: (pick.league || pick.sport || \"NBA\").toUpperCase(),\n      pickDirection: pick.pickDirection\n        ? pick.pickDirection.replace(/^UNDE\\b/i, \"UNDER\").toUpperCase()\n        : \"\",\n      pickType: (pick.pickType || \"spread\").toLowerCase(),\n    }));\n\n    console.log(`\uD83D\uDCCA Parsed ${normalizedPicks.length} picks from text input`);\n    return normalizedPicks;\n  }\n\n  /**\n   * Extract context (sport, game) from a line\n   */\n  function extractContext(line) {\n    const lower = line.toLowerCase();\n    const result = { sport: null, game: null, isContextOnly: false };\n\n    // Detect sport - ALWAYS uppercase\n    if (/\\bnfl\\b/i.test(lower)) result.sport = \"NFL\";\n    else if (/\\bnba\\b/i.test(lower)) result.sport = \"NBA\";\n    else if (/\\bncaab\\b|\\bncaam\\b|\\bcbb\\b/i.test(lower)) result.sport = \"NCAAB\";\n    else if (/\\bncaaf\\b|\\bcfb\\b/i.test(lower)) result.sport = \"NCAAF\";\n    else if (/\\bmlb\\b/i.test(lower)) result.sport = \"MLB\";\n    else if (/\\bnhl\\b/i.test(lower)) result.sport = \"NHL\";\n\n    // Detect game matchup (eagles at bills, bos @ por, etc.)\n    const gameMatch = line.match(\n      /\\b([A-Za-z]+)\\s*(?:at|@|vs\\.?|versus)\\s*([A-Za-z]+)\\b/i,\n    );\n    if (gameMatch) {\n      result.game = {\n        away: resolveTeamName(gameMatch[1]),\n        home: resolveTeamName(gameMatch[2]),\n      };\n    }\n\n    // Check if this line is ONLY context (no numbers = no bet)\n    if (!line.match(/\\d/) && (result.sport || result.game)) {\n      result.isContextOnly = true;\n    }\n\n    return result;\n  }\n\n  /**\n   * Smart flexible parser - handles any format intuitively\n   */\n  function parseFlexibleLine(line, defaultSport, currentGame) {\n    // Normalize default sport to uppercase\n    const normalizedSport = (defaultSport || \"NBA\").toUpperCase();\n    const pick = {\n      sport: normalizedSport,\n      league: normalizedSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n    };\n\n    // Apply game context if available\n    if (currentGame) {\n      pick.awayTeam = currentGame.away;\n      pick.homeTeam = currentGame.home;\n      pick.game = `${currentGame.away} @ ${currentGame.home}`;\n    }\n\n    // Normalize: remove extra spaces, handle slashes as spaces\n    let normalized = line\n      .replace(/\\s*\\/\\s*/g, \" \")\n      .replace(/\\s+/g, \" \")\n      .trim();\n    const originalLine = normalized;\n\n    // ===== STEP 1: Extract segment (1H, 2H, FG, 1st half, etc.) =====\n    const segmentPatterns = [\n      { pattern: /\\b(1st\\s*half|first\\s*half|1h)\\b/i, segment: \"1st Half\" },\n      { pattern: /\\b(2nd\\s*half|second\\s*half|2h)\\b/i, segment: \"2nd Half\" },\n      {\n        pattern: /\\b(1st\\s*quarter|first\\s*quarter|1q)\\b/i,\n        segment: \"1st Quarter\",\n      },\n      { pattern: /\\b(full\\s*game|fg)\\b/i, segment: \"Full Game\" },\n    ];\n\n    for (const { pattern, segment } of segmentPatterns) {\n      if (pattern.test(normalized)) {\n        pick.segment = segment;\n        normalized = normalized.replace(pattern, \" \").trim();\n        break;\n      }\n    }\n\n    // ===== STEP 2: Check for MONEYLINE (ml) =====\n    if (/\\bml\\b/i.test(normalized)) {\n      pick.pickType = \"moneyline\";\n      normalized = normalized.replace(/\\bml\\b/gi, \" \").trim();\n\n      // Find the team\n      const teamKeys = Object.keys(TEAM_ALIASES);\n      for (const teamKey of teamKeys) {\n        const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n        if (teamRegex.test(normalized)) {\n          pick.pickTeam = resolveTeamName(teamKey);\n          break;\n        }\n      }\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      if (pick.pickTeam) {\n        console.log(\n          `\u2705 Parsed ML: \"${originalLine}\" -> ${pick.pickTeam} ML (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 3: Check for TEAM TOTAL (tto/ttu or \"team o/u\") =====\n    const teamTotalMatch =\n      normalized.match(/\\b([A-Za-z]+)\\s*(?:tto|ttu|o|u)\\s*([\\d.]+)/i) ||\n      normalized.match(/\\b([A-Za-z]+)\\s+(?:over|under)\\s*([\\d.]+)/i);\n    if (teamTotalMatch) {\n      const teamPart = teamTotalMatch[1].toLowerCase();\n      const linePart = teamTotalMatch[2];\n      const fullMatch = teamTotalMatch[0].toLowerCase();\n\n      // Check if it's actually a team (not \"over\" or \"under\")\n      if (\n        teamPart !== \"over\" &&\n        teamPart !== \"under\" &&\n        teamPart !== \"o\" &&\n        teamPart !== \"u\"\n      ) {\n        pick.pickType = \"team-total\";\n        pick.pickTeam = resolveTeamName(teamPart);\n        pick.line = linePart;\n\n        // Determine over/under\n        if (/tto|over|\\bo\\d/i.test(fullMatch)) {\n          pick.pickDirection = \"Over\";\n        } else {\n          pick.pickDirection = \"Under\";\n        }\n\n        console.log(\n          `\u2705 Parsed team total: \"${originalLine}\" -> ${pick.pickTeam} ${pick.pickDirection} ${pick.line} (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 4: Detect GAME TOTAL (over/under without team prefix) =====\n    const gameTotalMatch = normalized.match(/\\b(over|under|o|u)\\s*([\\d.]+)/i);\n    if (gameTotalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(gameTotalMatch[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = gameTotalMatch[2];\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      console.log(\n        `\u2705 Parsed game total: \"${originalLine}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Remove remaining keywords\n    normalized = normalized\n      .replace(/\\b(spread|total|moneyline)\\b/gi, \" \")\n      .trim();\n\n    // ===== STEP 5: Find team and spread =====\n    const teamKeys = Object.keys(TEAM_ALIASES);\n    let foundTeam = null;\n    let foundTeamPos = -1;\n\n    for (const teamKey of teamKeys) {\n      const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n      const match = normalized.match(teamRegex);\n      if (match) {\n        const pos = match.index;\n        if (foundTeamPos === -1 || pos < foundTeamPos) {\n          foundTeam = teamKey;\n          foundTeamPos = pos;\n        }\n      }\n    }\n\n    if (!foundTeam) {\n      // Try to find any capitalized word that might be a team\n      const capsMatch = normalized.match(/\\b([A-Z]{2,4})\\b/);\n      if (capsMatch) {\n        foundTeam = capsMatch[1].toLowerCase();\n      }\n    }\n\n    if (!foundTeam) {\n      console.log(`\u26A0\uFE0F No team found in: \"${originalLine}\"`);\n      return null;\n    }\n\n    pick.pickTeam = resolveTeamName(foundTeam);\n\n    // ===== STEP 4: Find the line (spread) =====\n    // Look for +/- number patterns\n    const spreadPatterns = [\n      /([+-]?\\d+\\.?\\d*)\\s*([+-]\\d{3,4})?/, // \"+7.0 -110\" or \"+7\" or \"7.0\"\n    ];\n\n    // Find all numbers in the line\n    const numbers = normalized.match(/[+-]?\\d+\\.?\\d*/g) || [];\n\n    for (const num of numbers) {\n      const numVal = parseFloat(num);\n\n      // Skip if it looks like odds (100+ with sign)\n      if (\n        Math.abs(numVal) >= 100 &&\n        (num.startsWith(\"+\") || num.startsWith(\"-\"))\n      ) {\n        // This is likely odds, not a spread\n        pick.odds = num;\n        continue;\n      }\n\n      // This is likely a spread\n      if (!pick.line) {\n        pick.pickType = \"spread\";\n        pick.line =\n          num.startsWith(\"+\") || num.startsWith(\"-\") ? num : `+${num}`;\n      }\n    }\n\n    // If no spread found but we have a team, might be ML\n    if (!pick.line && pick.pickTeam) {\n      // Check if there's just odds (moneyline)\n      const mlOdds = normalized.match(/([+-]\\d{3,4})/);\n      if (mlOdds) {\n        pick.pickType = \"moneyline\";\n        pick.odds = mlOdds[1];\n      } else {\n        // Just a team name with no line - invalid\n        console.log(`\u26A0\uFE0F No line/odds found for team in: \"${originalLine}\"`);\n        return null;\n      }\n    }\n\n    // ===== STEP 5: Try to find game context (opponent) =====\n    const vsMatch = normalized.match(/([A-Za-z]+)\\s*[@vs]+\\s*([A-Za-z]+)/i);\n    if (vsMatch) {\n      pick.awayTeam = resolveTeamName(vsMatch[1]);\n      pick.homeTeam = resolveTeamName(vsMatch[2]);\n      pick.game = `${pick.awayTeam} @ ${pick.homeTeam}`;\n    }\n\n    console.log(\n      `\u2705 Parsed: \"${originalLine}\" -> ${pick.pickTeam} ${pick.line || pick.odds} (${pick.segment})`,\n    );\n    return pick;\n  }\n\n  /**\n   * Parse pipe-delimited format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n   * Examples:\n   *   \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n   *   \"Siena vs Mount St Marys | Full Game | Siena -3 (-110)\"\n   *   \"UAB vs East Carolina | Full Game | UAB -7.5 (-110)\"\n   *   \"IPFW vs Robert Morris | Full Game | IPFW +4 (-110)\"\n   *   \"Northern Kentucky vs Wisc Green Bay | Full Game | N Kentucky -4 (-110)\"\n   */\n  function parsePipeDelimitedLine(line) {\n    const parts = line.split(\"|\").map((p) => p.trim());\n\n    if (parts.length < 3) return null;\n\n    const [matchupPart, segmentPart, pickPart] = parts;\n\n    // Parse matchup (Team1 vs Team2)\n    const matchupMatch = matchupPart.match(\n      /^(.+?)\\s*(?:vs\\.?|@|versus)\\s*(.+)$/i,\n    );\n    if (!matchupMatch) return null;\n\n    const awayTeam = matchupMatch[1].trim();\n    const homeTeam = matchupMatch[2].trim();\n\n    // Parse segment\n    let segment = \"Full Game\";\n    const segLower = segmentPart.toLowerCase();\n    if (segLower.includes(\"1st half\") || segLower.includes(\"1h\")) {\n      segment = \"1st Half\";\n    } else if (segLower.includes(\"2nd half\") || segLower.includes(\"2h\")) {\n      segment = \"2nd Half\";\n    } else if (segLower.includes(\"1st quarter\") || segLower.includes(\"1q\")) {\n      segment = \"1st Quarter\";\n    }\n\n    // Parse pick part: \"FAU -2 (-110)\" or \"Over 150 (-110)\" or \"FAU ML (-110)\"\n    const pick = {\n      sport: \"NCAAB\", // Default for college basketball\n      segment: segment,\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n      awayTeam: awayTeam,\n      homeTeam: homeTeam,\n      game: `${awayTeam} @ ${homeTeam}`,\n    };\n\n    // Extract odds (in parentheses at end)\n    const oddsMatch = pickPart.match(/\\(([+-]?\\d+)\\)\\s*$/);\n    if (oddsMatch) {\n      pick.odds =\n        oddsMatch[1].startsWith(\"+\") || oddsMatch[1].startsWith(\"-\")\n          ? oddsMatch[1]\n          : `-${oddsMatch[1]}`;\n    }\n\n    // Remove odds from pick part for further parsing\n    let pickText = pickPart.replace(/\\s*\\([+-]?\\d+\\)\\s*$/, \"\").trim();\n\n    // Check for game total (Over/Under)\n    const totalMatch = pickText.match(/^(over|under|o|u)\\s+(\\d+\\.?\\d*)/i);\n    if (totalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = totalMatch[2];\n      console.log(\n        `\u2705 Parsed pipe format (total): \"${line}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Check for moneyline (Team ML)\n    const mlMatch = pickText.match(/^(.+?)\\s+ml$/i);\n    if (mlMatch) {\n      pick.pickType = \"moneyline\";\n      pick.pickTeam = mlMatch[1].trim();\n      console.log(\n        `\u2705 Parsed pipe format (ML): \"${line}\" -> ${pick.pickTeam} ML`,\n      );\n      return pick;\n    }\n\n    // Default: Spread (Team +/- Line)\n    const spreadMatch = pickText.match(/^(.+?)\\s+([+-]?\\d+\\.?\\d*)$/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.pickTeam = spreadMatch[1].trim();\n      const lineVal = spreadMatch[2];\n      pick.line =\n        lineVal.startsWith(\"+\") || lineVal.startsWith(\"-\")\n          ? lineVal\n          : `+${lineVal}`;\n      console.log(\n        `\u2705 Parsed pipe format (spread): \"${line}\" -> ${pick.pickTeam} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Couldn't parse the pick part\n    console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: \"${pickPart}\"`);\n    return null;\n  }\n\n  /**\n   * Parse a single line of text picks (legacy function - kept for fallback)\n   */\n  function parseTextLine(line, defaultSport, defaultGame) {\n    const pick = {\n      sport: defaultSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n    };\n\n    // Check for segment markers first\n    if (/\\b1h\\b/i.test(line)) {\n      pick.segment = \"1st Half\";\n      line = line.replace(/\\b1h\\b/i, \"\").trim();\n    } else if (/\\b2h\\b/i.test(line)) {\n      pick.segment = \"2nd Half\";\n      line = line.replace(/\\b2h\\b/i, \"\").trim();\n    } else if (/\\b1q\\b/i.test(line)) {\n      pick.segment = \"1st Quarter\";\n      line = line.replace(/\\b1q\\b/i, \"\").trim();\n    }\n\n    // Extract risk amount (at end: $50, $100, etc.)\n    const riskMatch = line.match(/\\$(\\d+(?:\\.\\d+)?)\\s*$/);\n    if (riskMatch) {\n      pick.risk = parseFloat(riskMatch[1]) * unitMultiplier;\n      line = line.replace(/\\$\\d+(?:\\.\\d+)?\\s*$/, \"\").trim();\n    }\n\n    // Now parse the bet itself\n    // Pattern 1: \"Team SPREAD ODDS\" (e.g., \"Spurs 2.5 -105\")\n    // Pattern 2: \"Team ODDS\" (e.g., \"Spurs +118\" = ML)\n    // Pattern 3: \"Team ML ODDS\" (e.g., \"Spurs ML +118\")\n    // Pattern 4: \"Over/Under LINE ODDS\" (e.g., \"Over 220 -110\")\n\n    // FIRST: Check if line starts with Over/Under (game total without team context)\n    // This must be checked BEFORE team extraction to avoid \"Over\" being captured as a team\n    const standaloneTotal = line.match(\n      /^(over|under|o|u)\\s+(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n    );\n    if (standaloneTotal) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(standaloneTotal[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection; // Set pickTeam to direction for display\n      pick.line = standaloneTotal[2];\n      if (standaloneTotal[3]) {\n        pick.odds = standaloneTotal[3];\n      }\n\n      // Calculate win and return early\n      if (pick.risk && pick.odds) {\n        pick.win = calculateWin(pick.risk, pick.odds);\n      }\n      if (defaultGame) {\n        pick.game = defaultGame;\n      }\n      return pick;\n    }\n\n    // Find the team name (at the start)\n    const teamMatch = line.match(\n      /^([A-Za-z][A-Za-z\\s]*?)(?=\\s+[\\d+-]|\\s+ML|\\s+over|\\s+under|\\s*$)/i,\n    );\n\n    if (!teamMatch) {\n      return null;\n    }\n\n    const teamName = teamMatch[1].trim();\n    pick.pickTeam = resolveTeamName(teamName);\n\n    // Remove team name from line\n    let remainder = line.substring(teamMatch[0].length).trim();\n\n    // Check for explicit ML\n    if (/^ML\\s*/i.test(remainder)) {\n      pick.pickType = \"moneyline\";\n      remainder = remainder.replace(/^ML\\s*/i, \"\").trim();\n\n      // Get odds\n      const oddsMatch = remainder.match(/^([+-]\\d{2,4})/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n    }\n    // Check for team total (e.g., \"Spurs over 110 -115\")\n    else if (/^(over|under|o|u)\\s*/i.test(remainder)) {\n      pick.pickType = \"team-total\";\n      const totalMatch = remainder.match(\n        /^(over|under|o|u)\\s*(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n      );\n      if (totalMatch) {\n        pick.pickDirection = /over|o/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n        pick.line = totalMatch[2];\n        if (totalMatch[3]) {\n          pick.odds = totalMatch[3];\n        }\n      }\n    }\n    // Check for spread with odds: \"2.5 -105\" or moneyline odds only: \"+118\"\n    else if (/^\\d/.test(remainder) || /^[+-]\\d/.test(remainder)) {\n      // Determine if it's:\n      // - Spread with odds: \"2.5 -105\" or \"+3.5 -110\"\n      // - Spread only: \"2.5\" or \"+3\"\n      // - Moneyline (odds only): \"+118\" or \"-150\"\n\n      // Key insight: ML odds are typically 100+ (3+ digits after the sign)\n      // Spreads are typically under 100 and often have decimals\n\n      // Pattern: Check if it starts with +/- and has 3+ digits (100+) = likely ML odds\n      const mlOddsMatch = remainder.match(/^([+-])(\\d+)(?:\\s|$)/);\n\n      if (mlOddsMatch) {\n        const sign = mlOddsMatch[1];\n        const number = mlOddsMatch[2];\n        const numValue = parseInt(number);\n\n        // If number is 100 or higher, it's almost certainly ML odds\n        // If it's a single or double digit number, it's a spread\n        if (numValue >= 100) {\n          pick.pickType = \"moneyline\";\n          pick.odds = sign + number;\n        } else {\n          // It's a spread (like +3 or -7)\n          pick.pickType = \"spread\";\n          pick.line = sign + number;\n          // Check for odds after the spread\n          const afterSpread = remainder.substring(mlOddsMatch[0].length).trim();\n          const oddsAfter = afterSpread.match(/^([+-]\\d{2,4})/);\n          if (oddsAfter) {\n            pick.odds = oddsAfter[1];\n          }\n        }\n      } else {\n        // Doesn't start with +/-, so it's a spread starting with just a number (like \"2.5 -105\")\n        pick.pickType = \"spread\";\n        const spreadMatch = remainder.match(/^(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/);\n        if (spreadMatch) {\n          pick.line = \"+\" + spreadMatch[1]; // Assume positive spread\n          if (spreadMatch[2]) {\n            pick.odds = spreadMatch[2];\n          }\n        }\n      }\n    }\n\n    // Calculate win amount if we have risk and odds\n    if (pick.risk && pick.odds) {\n      pick.win = calculateWin(pick.risk, pick.odds);\n    }\n\n    // Set game context if available\n    if (defaultGame) {\n      pick.game = defaultGame;\n    }\n\n    // Validate\n    if (!pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine if a line should be skipped\n   */\n  function shouldSkipLine(line) {\n    const lower = line.toLowerCase();\n\n    // Skip empty or very short lines\n    if (line.length < 3) return true;\n\n    // Skip common header/context phrases\n    const skipPatterns = [\n      /^tonight['']?s?\\s+game/i,\n      /^today['']?s?\\s+game/i,\n      /^correction/i,\n      /^note:/i,\n      /^fyi/i,\n      /^\\d+k\\s+is\\s+the\\s+unit/i,\n      /^unit/i,\n      /^\\^+/, // Lines starting with ^\n    ];\n\n    return skipPatterns.some((p) => p.test(line));\n  }\n\n  /**\n   * Extract context info from header lines\n   */\n  function updateContextFromLine(line, callback) {\n    const lower = line.toLowerCase();\n    const ctx = {};\n\n    // Detect sport\n    if (lower.includes(\"nba\")) ctx.sport = \"NBA\";\n    else if (lower.includes(\"nfl\")) ctx.sport = \"NFL\";\n    else if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\"))\n      ctx.sport = \"NCAAB\";\n    else if (lower.includes(\"ncaaf\")) ctx.sport = \"NCAAF\";\n    else if (lower.includes(\"mlb\")) ctx.sport = \"MLB\";\n    else if (lower.includes(\"nhl\")) ctx.sport = \"NHL\";\n\n    // Detect game matchup\n    const gameMatch = line.match(\n      /([A-Za-z\\s]+)\\s*(?:vs\\.?|@|\\/)\\s*([A-Za-z\\s]+)/i,\n    );\n    if (gameMatch) {\n      ctx.game = `${gameMatch[1].trim()} @ ${gameMatch[2].trim()}`;\n    }\n\n    callback(ctx);\n  }\n\n  /**\n   * Resolve team alias to full name\n   */\n  function resolveTeamName(name) {\n    const lower = name.toLowerCase().trim();\n    return TEAM_ALIASES[lower] || name;\n  }\n\n  /**\n   * Parse currency string to number\n   */\n  function parseCurrency(text) {\n    if (!text) return 0;\n    const cleaned = text.replace(/[$,]/g, \"\");\n    return parseFloat(cleaned) || 0;\n  }\n\n  /**\n   * Parse date/time string\n   */\n  function parseDateTimeString(text) {\n    // Format: \"Dec 16, 2025 3:53 PM\"\n    const match = text.match(/(\\w+\\s+\\d+,?\\s+\\d{4})\\s+(\\d+:\\d+\\s*[AP]M)/i);\n    if (match) {\n      return {\n        date: match[1].trim(),\n        time: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Parse game string to away/home teams\n   */\n  function parseGameString(text) {\n    const match = text.match(/(.+?)\\s*(?:\\/|vs\\.?|@)\\s*(.+)/i);\n    if (match) {\n      return {\n        away: match[1].trim(),\n        home: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Calculate win amount from risk and odds\n   */\n  function calculateWin(risk, odds) {\n    const oddsNum = parseInt(odds);\n    if (oddsNum > 0) {\n      // Positive odds: win = risk * (odds/100)\n      return risk * (oddsNum / 100);\n    } else {\n      // Negative odds: win = risk / (|odds|/100)\n      return risk / (Math.abs(oddsNum) / 100);\n    }\n  }\n\n  /**\n   * Get today's date in MM/DD/YYYY format\n   */\n  function getTodayDate() {\n    const now = new Date();\n    return `${now.getMonth() + 1}/${now.getDate()}/${now.getFullYear()}`;\n  }\n\n  /**\n   * Convert picks to display format for the dashboard\n   */\n  function picksToDisplayFormat(picks) {\n    return picks.map((pick) => {\n      // Build selection string\n      let selection = \"\";\n      if (pick.pickType === \"spread\") {\n        selection = `${pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"moneyline\") {\n        selection = `${pick.pickTeam} ML`;\n      } else if (pick.pickType === \"total\") {\n        selection = `${pick.pickDirection || pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"team-total\") {\n        selection = `${pick.pickTeam} ${pick.pickDirection} ${pick.line}`;\n      }\n\n      if (pick.odds) {\n        selection += ` (${pick.odds})`;\n      }\n\n      return {\n        ...pick,\n        selection,\n        displaySegment: pick.segment !== \"Full Game\" ? pick.segment : \"\",\n        displayRisk: pick.risk ? `$${pick.risk.toLocaleString()}` : \"\",\n        displayWin: pick.win ? `$${Math.round(pick.win).toLocaleString()}` : \"\",\n      };\n    });\n  }\n\n  /**\n   * Convert picks to CSV format\n   */\n  function picksToCSV(picks) {\n    const headers = [\n      \"Date\",\n      \"Time\",\n      \"Sport\",\n      \"Game\",\n      \"Team\",\n      \"Pick Type\",\n      \"Line\",\n      \"Odds\",\n      \"Segment\",\n      \"Risk\",\n      \"To Win\",\n      \"Status\",\n    ];\n    const rows = picks.map((pick) => [\n      pick.date || \"\",\n      pick.time || \"\",\n      pick.sport || \"\",\n      pick.game || \"\",\n      pick.pickTeam || \"\",\n      pick.pickType || \"\",\n      pick.line || \"\",\n      pick.odds || \"\",\n      pick.segment || \"\",\n      pick.risk || \"\",\n      pick.win ? Math.round(pick.win) : \"\",\n      pick.status || \"pending\",\n    ]);\n\n    return [headers, ...rows]\n      .map((row) => row.map((cell) => `\"${cell}\"`).join(\",\"))\n      .join(\"\\n\");\n  }\n\n  /**\n   * Set the unit multiplier for risk calculations\n   */\n  function setUnitMultiplier(multiplier) {\n    unitMultiplier = multiplier;\n  }\n\n  // Export functions\n  window.PickStandardizer = {\n    standardize: standardizePicks,\n    parseHTML: parseHTMLPicks,\n    parseGameLines: parseSportsbookGameLines,\n    parseText: parseTextPicks,\n    parseBetHistory: parseBetHistory,\n    loadTeamVariants: loadTeamVariants,\n    toDisplayFormat: picksToDisplayFormat,\n    toCSV: picksToCSV,\n    setUnitMultiplier: setUnitMultiplier,\n    resolveTeamName: resolveTeamName,\n\n    // For testing\n    _parseTextLine: parseTextLine,\n    _parseLineAndOdds: parseLineAndOdds,\n    _parseGamePanel: parseGamePanel,\n    _isBetHistoryFormat: isBetHistoryFormat,\n    _parseBetHistoryLeg: parseBetHistoryLeg,\n  };\n\n  console.log(\n    \"\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser\",\n  );\n})();\n\n\n/* === assets/js/features/import-options.js === */\n/**\r\n * Import Options Handler - Upload via API\r\n * Uploads files and pasted content through Azure Functions API\r\n */\r\n\r\n// Use API endpoint instead of direct blob storage\r\nconst API_BASE_URL = window.APP_CONFIG?.API_BASE_URL || '/api';\r\n\r\nlet selectedFiles = [];\r\n\r\n// Security: Allowed file types and max size\r\nconst ALLOWED_EXTENSIONS = ['.pdf', '.jpg', '.jpeg', '.png', '.html', '.htm', '.txt', '.csv'];\r\nconst ALLOWED_MIME_TYPES = ['application/pdf', 'image/jpeg', 'image/png', 'text/html', 'text/plain', 'text/csv'];\r\nconst MAX_FILE_SIZE_MB = 10;\r\nconst MAX_FILE_SIZE = MAX_FILE_SIZE_MB * 1024 * 1024;\r\n\r\nfunction getSelectedSportsbookMeta() {\r\n    const select = document.getElementById('upload-sportsbook-select') || document.getElementById('manual-sportsbook-select');\r\n    if (!select) {\r\n        return { value: 'manual', label: 'Manual Upload' };\r\n    }\r\n\r\n    const value = (select.value || '').trim();\r\n    const label = (select.options[select.selectedIndex]?.textContent || value || 'Manual Upload').trim();\r\n\r\n    return {\r\n        value: value || 'manual',\r\n        label: label || 'Manual Upload'\r\n    };\r\n}\r\n\r\nfunction isFileAllowed(file) {\r\n    const ext = '.' + file.name.split('.').pop().toLowerCase();\r\n    const isExtAllowed = ALLOWED_EXTENSIONS.includes(ext);\r\n    const isMimeAllowed = ALLOWED_MIME_TYPES.some(mime => file.type.startsWith(mime.split('/')[0]) || file.type === mime);\r\n    const isSizeAllowed = file.size <= MAX_FILE_SIZE;\r\n    return { valid: isExtAllowed && isSizeAllowed, ext, size: file.size, isSizeAllowed, isExtAllowed };\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const actionButtons = document.getElementById('action-buttons');\r\n    const importOptions = document.getElementById('import-options');\r\n    const importBtn = document.querySelector('.import-picks-btn');\r\n    const backBtn = document.querySelector('.import-back-btn');\r\n\r\n    // Don't exit early - import options may already be visible\r\n    if (!importOptions) {\r\n        console.warn('Import options element not found');\r\n        return;\r\n    }\r\n\r\n    // Show/hide import options\r\n    function showImportOptions() {\r\n        if (actionButtons) actionButtons.style.display = 'none';\r\n        importOptions.removeAttribute('hidden');\r\n    }\r\n\r\n    function hideImportOptions() {\r\n        importOptions.setAttribute('hidden', '');\r\n        if (actionButtons) actionButtons.style.display = 'flex';\r\n        resetUploadForm();\r\n    }\r\n\r\n    function resetUploadForm() {\r\n        selectedFiles = [];\r\n        const fileInput = document.getElementById('file-upload');\r\n        const pasteArea = document.getElementById('paste-area');\r\n        const fileList = document.getElementById('file-list');\r\n        const uploadBtn = document.getElementById('upload-files-btn');\r\n        const statusDiv = document.getElementById('upload-status');\r\n\r\n        if (fileInput) fileInput.value = '';\r\n        if (pasteArea) pasteArea.value = '';\r\n        if (fileList) {\r\n            fileList.innerHTML = '';\r\n            fileList.style.display = 'none';\r\n        }\r\n        if (uploadBtn) uploadBtn.style.display = 'none';\r\n        if (statusDiv) statusDiv.style.display = 'none';\r\n    }\r\n\r\n    if (importBtn) {\r\n        importBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            showImportOptions();\r\n        });\r\n    }\r\n\r\n    if (backBtn) {\r\n        backBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            hideImportOptions();\r\n        });\r\n    }\r\n\r\n    // File upload handling\r\n    const dropZone = document.getElementById('drop-zone');\r\n    const fileInput = document.getElementById('file-upload');\r\n    const fileList = document.getElementById('file-list');\r\n    const uploadFilesBtn = document.getElementById('upload-files-btn');\r\n\r\n    if (dropZone && fileInput) {\r\n        // Drag and drop\r\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, preventDefaults, false);\r\n        });\r\n\r\n        function preventDefaults(e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n\r\n        ['dragenter', 'dragover'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, () => {\r\n                dropZone.style.borderColor = '#10b981';\r\n                dropZone.style.background = 'rgba(16, 185, 129, 0.05)';\r\n            });\r\n        });\r\n\r\n        ['dragleave', 'drop'].forEach(eventName => {\r\n            dropZone.addEventListener(eventName, () => {\r\n                dropZone.style.borderColor = '';\r\n                dropZone.style.background = '';\r\n            });\r\n        });\r\n\r\n        dropZone.addEventListener('drop', (e) => {\r\n            const dt = e.dataTransfer;\r\n            const files = dt.files;\r\n            handleFiles(files);\r\n        });\r\n\r\n        fileInput.addEventListener('change', function() {\r\n            handleFiles(this.files);\r\n        });\r\n    }\r\n\r\n    function handleFiles(files) {\r\n        const validFiles = [];\r\n        const rejected = [];\r\n\r\n        Array.from(files).forEach(file => {\r\n            const check = isFileAllowed(file);\r\n            if (check.valid) {\r\n                validFiles.push(file);\r\n            } else {\r\n                const reason = !check.isExtAllowed\r\n                    ? `Invalid file type (${check.ext})`\r\n                    : `File too large (${formatFileSize(check.size)} > ${MAX_FILE_SIZE_MB}MB)`;\r\n                rejected.push({ name: file.name, reason });\r\n            }\r\n        });\r\n\r\n        if (rejected.length > 0) {\r\n            const rejectMsg = rejected.map(r => `${r.name}: ${r.reason}`).join('\\n');\r\n            console.warn('Rejected files:', rejectMsg);\r\n            showStatus(`Some files rejected:\\n${rejected.map(r => r.name).join(', ')}`, 'error');\r\n        }\r\n\r\n        selectedFiles = validFiles;\r\n        renderFileList();\r\n    }\r\n\r\n    function renderFileList() {\r\n        if (selectedFiles.length === 0) {\r\n            fileList.style.display = 'none';\r\n            uploadFilesBtn.style.display = 'none';\r\n            return;\r\n        }\r\n\r\n        fileList.style.display = 'block';\r\n        uploadFilesBtn.style.display = 'block';\r\n\r\n        fileList.innerHTML = selectedFiles.map((file, index) => {\r\n            const size = formatFileSize(file.size);\r\n            return `\r\n                <div style=\"display: flex; align-items: center; justify-content: space-between; padding: 0.5rem; background: rgba(16, 185, 129, 0.05); border-radius: 4px; margin-bottom: 0.25rem;\">\r\n                    <span style=\"font-size: 0.75rem; color: #374151; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;\">${escapeHtml(file.name)} (${size})</span>\r\n                    <button onclick=\"window.removeFile(${index})\" style=\"background: none; border: none; color: #ef4444; cursor: pointer; font-size: 1rem; padding: 0 0.5rem;\">\u00D7</button>\r\n                </div>\r\n            `;\r\n        }).join('');\r\n    }\r\n\r\n    // Make removeFile available globally for inline onclick\r\n    window.removeFile = function(index) {\r\n        selectedFiles.splice(index, 1);\r\n        renderFileList();\r\n    };\r\n\r\n    // Upload files button\r\n    if (uploadFilesBtn) {\r\n        uploadFilesBtn.addEventListener('click', async (e) => {\r\n            e.stopPropagation();\r\n            await uploadFiles();\r\n        });\r\n    }\r\n\r\n    async function uploadFiles() {\r\n        if (selectedFiles.length === 0) return;\r\n\r\n        uploadFilesBtn.disabled = true;\r\n        uploadFilesBtn.textContent = 'Uploading...';\r\n\r\n        try {\r\n            // Upload files one by one to the API\r\n            for (const file of selectedFiles) {\r\n                const formData = new FormData();\r\n                const { value: sportsbookKey, label: sportsbookLabel } = getSelectedSportsbookMeta();\r\n                formData.append('file', file);\r\n                formData.append('sportsbook', sportsbookKey);\r\n                formData.append('sportsbookLabel', sportsbookLabel);\r\n\r\n                const response = await fetch(`${API_BASE_URL}/upload`, {\r\n                    method: 'POST',\r\n                    body: formData\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to upload ${file.name}: ${response.statusText}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n                console.log(`Uploaded ${file.name}:`, result);\r\n            }\r\n\r\n            showStatus(`Successfully uploaded ${selectedFiles.length} file(s)!`, 'success');\r\n            selectedFiles = [];\r\n            renderFileList();\r\n            fileInput.value = '';\r\n\r\n            // Process and display picks immediately\r\n            if (window.loadUploadedPicks) {\r\n                setTimeout(() => window.loadUploadedPicks(), 1000);\r\n            } else if (window.loadAndAppendPicks) {\r\n                setTimeout(() => window.loadAndAppendPicks(), 1000);\r\n            }\r\n\r\n            // Also try to load from database if available\r\n            if (window.loadPicksFromDatabase) {\r\n                setTimeout(() => window.loadPicksFromDatabase(), 1500);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Upload error:', error);\r\n            showStatus(`Upload failed: ${error.message}`, 'error');\r\n        } finally {\r\n            uploadFilesBtn.disabled = false;\r\n            uploadFilesBtn.textContent = 'Upload Selected Files';\r\n        }\r\n    }\r\n\r\n    // Paste content upload\r\n    const pasteArea = document.getElementById('paste-area');\r\n    const uploadPasteBtn = document.getElementById('upload-paste-btn');\r\n    const clearBtn = document.querySelector('.paste-clear-btn');\r\n\r\n    if (uploadPasteBtn) {\r\n        uploadPasteBtn.addEventListener('click', async (e) => {\r\n            e.stopPropagation();\r\n            const content = pasteArea.value.trim();\r\n            const selectedBook = getSelectedSportsbookMeta();\r\n\r\n            if (!content) {\r\n                showStatus('Please paste some content first.', 'error');\r\n                return;\r\n            }\r\n\r\n            uploadPasteBtn.disabled = true;\r\n            uploadPasteBtn.textContent = 'Uploading...';\r\n\r\n            try {\r\n                // Detect if content is HTML or text\r\n                const isHTML = content.includes('<html') || content.includes('<!DOCTYPE') || content.includes('<div');\r\n\r\n                // Use LocalPicksManager if available (local dev), otherwise use API\r\n                const saveFn = window.LocalPicksManager?.parseAndAdd || processAndSavePicks;\r\n                const picks = window.LocalPicksManager?.parseAndAdd\r\n                    ? await saveFn(content, selectedBook.label)\r\n                    : await saveFn(content, isHTML, selectedBook);\r\n                \r\n                if (picks.length === 0) {\r\n                    showStatus('No picks could be parsed from the pasted content.', 'error');\r\n                    return;\r\n                }\r\n\r\n                showStatus(`Successfully parsed and saved ${picks.length} pick(s)!`, 'success');\r\n                pasteArea.value = '';\r\n\r\n                // Process and display picks immediately\r\n                if (window.loadUploadedPicks) {\r\n                    setTimeout(() => window.loadUploadedPicks(), 1000);\r\n                } else if (window.loadAndAppendPicks) {\r\n                    setTimeout(() => window.loadAndAppendPicks(), 1000);\r\n                }\r\n\r\n                // Also try to load from database if available\r\n                if (window.loadPicksFromDatabase) {\r\n                    setTimeout(() => window.loadPicksFromDatabase(), 1500);\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Upload error:', error);\r\n                showStatus(`Processing failed: ${error.message}`, 'error');\r\n            } finally {\r\n                uploadPasteBtn.disabled = false;\r\n                uploadPasteBtn.textContent = 'Upload Pasted Content';\r\n            }\r\n        });\r\n    }\r\n\r\n    if (clearBtn) {\r\n        clearBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            if (pasteArea) pasteArea.value = '';\r\n        });\r\n    }\r\n\r\n    function showStatus(message, type) {\r\n        const statusDiv = document.getElementById('upload-status');\r\n        if (!statusDiv) return;\r\n\r\n        statusDiv.textContent = message;\r\n        statusDiv.style.display = 'block';\r\n\r\n        if (type === 'success') {\r\n            statusDiv.style.background = 'rgba(16, 185, 129, 0.1)';\r\n            statusDiv.style.color = '#059669';\r\n            statusDiv.style.border = '1px solid rgba(16, 185, 129, 0.3)';\r\n        } else {\r\n            statusDiv.style.background = 'rgba(239, 68, 68, 0.1)';\r\n            statusDiv.style.color = '#dc2626';\r\n            statusDiv.style.border = '1px solid rgba(239, 68, 68, 0.3)';\r\n        }\r\n\r\n        setTimeout(() => {\r\n            statusDiv.style.display = 'none';\r\n        }, 5000);\r\n    }\r\n\r\n    function formatFileSize(bytes) {\r\n        if (bytes < 1024) return bytes + ' B';\r\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\r\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\r\n    }\r\n\r\n    function escapeHtml(text) {\r\n        const div = document.createElement('div');\r\n        div.textContent = text;\r\n        return div.innerHTML;\r\n    }\r\n\r\n    // Function to process and save picks to database\r\n    async function processAndSavePicks(content, isHTML = false, selectedBookMeta = null) {\r\n        try {\r\n            const bookMeta = selectedBookMeta || getSelectedSportsbookMeta();\r\n            const sportsbookKey = bookMeta?.value || 'manual';\r\n            const sportsbookLabel = bookMeta?.label || 'Manual Upload';\r\n\r\n            // Parse the content to extract picks\r\n            let picks = [];\r\n\r\n            if (window.PickStandardizer) {\r\n                try {\r\n                    picks = window.PickStandardizer.standardize(content);\r\n                    console.log('Used PickStandardizer to parse picks:', picks.length);\r\n                } catch (e) {\r\n                    console.warn('PickStandardizer failed, falling back to basic parser:', e);\r\n                    picks = isHTML ? parseHTMLPicks(content) : parseTextPicks(content);\r\n                }\r\n            } else {\r\n                picks = isHTML ? parseHTMLPicks(content) : parseTextPicks(content);\r\n            }\r\n\r\n            // Attach sportsbook metadata immediately for consistency\r\n            picks = picks.map(pick => ({\r\n                ...pick,\r\n                sportsbook: pick.sportsbook || sportsbookLabel,\r\n                bookKey: pick.bookKey || sportsbookKey\r\n            }));\r\n\r\n            // Helper to derive teams from a game/description string like \"Lakers @ Warriors Over\"\r\n            const deriveTeams = (pick) => {\r\n                const source = (pick.game || pick.description || pick.pickTeam || '').trim();\r\n                if (!source) return null;\r\n                const match = source.match(/(.+?)\\s+(?:vs\\.?|@|at)\\s+(.+?)(?:\\s+(over|under))?$/i);\r\n                if (!match) return null;\r\n                return {\r\n                    awayTeam: match[1].trim(),\r\n                    homeTeam: match[2].trim()\r\n                };\r\n            };\r\n\r\n            // Validate and enrich picks with game data using AutoGameFetcher\r\n            if (picks.length > 0 && window.AutoGameFetcher) {\r\n                try {\r\n                    // Fetch today's games if not already cached\r\n                    await window.AutoGameFetcher.fetchTodaysGames();\r\n                    const todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n\r\n                    picks = picks.filter(pick => {\r\n                        // Derive missing teams from game/description to improve matching\r\n                        const derivedTeams = deriveTeams(pick);\r\n                        if (derivedTeams) {\r\n                            if (!pick.awayTeam) pick.awayTeam = derivedTeams.awayTeam;\r\n                            if (!pick.homeTeam) pick.homeTeam = derivedTeams.homeTeam;\r\n                        }\r\n\r\n                        // Find matching game\r\n                        const game = window.AutoGameFetcher.findGame(\r\n                            (pick.awayTeam || pick.pickTeam || '').replace(/\\bover\\b|\\bunder\\b/i, '').trim(),\r\n                            pick.homeTeam\r\n                        );\r\n\r\n                        if (!game) {\r\n                            console.warn(`Game not found for today: ${pick.game || pick.pickTeam}`);\r\n                            return true; // Keep the pick but warn\r\n                        }\r\n\r\n                        // Check if game has finished\r\n                        if (window.AutoGameFetcher.isGameFinished(game)) {\r\n                            console.warn(`Skipping pick for finished game: ${game.awayTeam} @ ${game.homeTeam}`);\r\n                            return false; // Remove finished games\r\n                        }\r\n\r\n                        // Auto-populate game info\r\n                        pick.game = `${game.awayTeam} @ ${game.homeTeam}`;\r\n                        pick.date = game.date;\r\n                        pick.time = game.time;\r\n                        pick.sport = game.sport;\r\n                        pick.gameStatus = game.status;\r\n                        pick.awayTeam = game.awayTeam;\r\n                        pick.homeTeam = game.homeTeam;\r\n\r\n                        return true;\r\n                    });\r\n\r\n                    console.log(`After validation: ${picks.length} valid picks remaining`);\r\n                } catch (e) {\r\n                    console.warn('AutoGameFetcher validation failed:', e);\r\n                    // Continue with picks even if validation fails\r\n                }\r\n            }\r\n\r\n            if (picks.length > 0) {\r\n                // Save to database via API\r\n                const response = await fetch(`${API_BASE_URL}/save-picks`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        picks: picks,\r\n                        source: 'upload',\r\n                        sportsbook: sportsbookKey,\r\n                        sportsbookLabel: sportsbookLabel\r\n                    })\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    const errorText = await response.text();\r\n                    throw new Error(`Failed to save picks: ${response.statusText} - ${errorText}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n                console.log('Picks saved to database:', result);\r\n            } else {\r\n                console.warn('No valid picks to save after processing');\r\n            }\r\n\r\n            return picks;\r\n        } catch (error) {\r\n            console.error('Error processing picks:', error);\r\n            throw error; // Re-throw to let caller handle\r\n        }\r\n    }\r\n\r\n    // Parse HTML picks (from sportsbook)\r\n    function parseHTMLPicks(html) {\r\n        const picks = [];\r\n        // Basic parsing - can be enhanced based on specific sportsbook format\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(html, 'text/html');\r\n\r\n        // Look for common bet slip elements\r\n        const betElements = doc.querySelectorAll('[class*=\"bet\"], [class*=\"pick\"], [class*=\"wager\"]');\r\n\r\n        betElements.forEach(element => {\r\n            try {\r\n                const text = element.textContent;\r\n                const pick = parsePickFromText(text);\r\n                if (pick) picks.push(pick);\r\n            } catch (e) {\r\n                console.warn('Failed to parse bet element:', e);\r\n            }\r\n        });\r\n\r\n        return picks;\r\n    }\r\n\r\n    // Parse text picks\r\n    function parseTextPicks(text) {\r\n        const picks = [];\r\n        const lines = text.split('\\n');\r\n\r\n        lines.forEach(line => {\r\n            const pick = parsePickFromText(line);\r\n            if (pick) picks.push(pick);\r\n        });\r\n\r\n        return picks;\r\n    }\r\n\r\n    // Parse individual pick from text\r\n    function parsePickFromText(text) {\r\n        // Regex patterns for common pick formats\r\n        // Examples: \"Raiders -2.5 (-110)\", \"Lakers/Suns O 215.5\", \"Cowboys ML +150\"\r\n\r\n        const spreadPattern = /([A-Za-z\\s]+)\\s+([-+]?\\d+\\.?\\d*)\\s+\\(([-+]\\d+)\\)/;\r\n        const totalPattern = /([A-Za-z\\s]+)\\s+(O|U|Over|Under)\\s+(\\d+\\.?\\d*)/i;\r\n        const mlPattern = /([A-Za-z\\s]+)\\s+ML\\s+([-+]\\d+)/i;\r\n\r\n        let match;\r\n        let pick = null;\r\n\r\n        if (match = text.match(spreadPattern)) {\r\n            pick = {\r\n                pickType: 'spread',\r\n                pickTeam: match[1].trim(),\r\n                line: match[2],\r\n                odds: match[3]\r\n            };\r\n        } else if (match = text.match(totalPattern)) {\r\n            pick = {\r\n                pickType: 'total',\r\n                pickTeam: match[2].toUpperCase() === 'O' || match[2].toLowerCase() === 'over' ? 'Over' : 'Under',\r\n                line: match[3]\r\n            };\r\n        } else if (match = text.match(mlPattern)) {\r\n            pick = {\r\n                pickType: 'moneyline',\r\n                pickTeam: match[1].trim(),\r\n                odds: match[2]\r\n            };\r\n        }\r\n\r\n        // Extract teams from text if possible\r\n        if (pick) {\r\n            const vsPattern = /([A-Za-z\\s]+)\\s+(vs?|@|at)\\s+([A-Za-z\\s]+)/i;\r\n            const teamMatch = text.match(vsPattern);\r\n            if (teamMatch) {\r\n                pick.awayTeam = teamMatch[1].trim();\r\n                pick.homeTeam = teamMatch[3].trim();\r\n            }\r\n\r\n            // Add default values\r\n            pick.sport = 'nfl'; // Default, can be enhanced\r\n            pick.gameDate = new Date().toISOString().split('T')[0];\r\n            pick.status = 'pending';\r\n        }\r\n\r\n        return pick;\r\n    }\r\n\r\n    // Make functions available globally for testing\r\n    window.processAndSavePicks = processAndSavePicks;\r\n    window.parseTextPicks = parseTextPicks;\r\n});\r\n\n\n/* === dashboard/js/local-picks-manager.js === */\n/**\n * Local Picks Manager v33.02.0\n * Production version - Real data only, no sample data, auto-cleanup of stale picks\n * Stores picks in localStorage, auto-fetches game data from ESPN\n *\n * @deprecated This module uses localStorage for pick storage. Prefer the\n *   Cosmos DB-backed picks-service.js for new features. This file is still\n *   loaded by dashboard.html and weekly-lineup.html for backward compatibility\n *   and will be removed once all callers migrate to the DB-backed service.\n */\n\n(function () {\n  \"use strict\";\n\n  const STORAGE_KEY = \"gbsv_picks\";\n  const UNIT_MULTIPLIER_KEY = \"gbsv_unit_multiplier\";\n\n  // ========== STORAGE FUNCTIONS ==========\n\n  function getAllPicks() {\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      return data ? JSON.parse(data) : [];\n    } catch (e) {\n      console.error(\"Error reading picks from localStorage:\", e);\n      if (window.ErrorHandler) {\n        window.ErrorHandler.handleStorage(e, \"read\");\n      }\n      return [];\n    }\n  }\n\n  function savePicks(picks) {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(picks));\n      console.log(`\u2705 Saved ${picks.length} picks to localStorage`);\n      return true;\n    } catch (e) {\n      console.error(\"Error saving picks to localStorage:\", e);\n      if (window.ErrorHandler) {\n        window.ErrorHandler.handleStorage(e, \"write\");\n      }\n      return false;\n    }\n  }\n\n  function addPicks(newPicks) {\n    const existing = getAllPicks();\n    const enrichedPicks = newPicks.map((pick, idx) => {\n      // Normalize league/sport values\n      let sport = (pick.sport || pick.league || \"NBA\").toUpperCase();\n\n      // Map league variants to standard values\n      const leagueMap = {\n        NCAAM: \"NCAAB\",\n        NCAB: \"NCAAB\",\n        CBB: \"NCAAB\",\n        \"COLLEGE BASKETBALL\": \"NCAAB\",\n        NCAAF: \"NCAAF\",\n        CFB: \"NCAAF\",\n        \"COLLEGE FOOTBALL\": \"NCAAF\",\n        NFL: \"NFL\",\n        NBA: \"NBA\",\n        NCAAB: \"NCAAB\",\n        MLB: \"MLB\",\n        NHL: \"NHL\",\n      };\n      sport = leagueMap[sport] || sport;\n\n      // Ensure awayTeam and homeTeam are set correctly\n      let awayTeam = pick.awayTeam || \"\";\n      let homeTeam = pick.homeTeam || \"\";\n\n      // If game field exists, try to parse it\n      if (pick.game && !awayTeam && !homeTeam) {\n        const parts = pick.game.split(/\\s*(?:@|vs\\.?|versus)\\s*/i);\n        if (parts.length === 2) {\n          awayTeam = parts[0].trim();\n          homeTeam = parts[1].trim();\n        }\n      }\n\n      // Normalize pick direction for totals\n      let pickDirection = pick.pickDirection || \"\";\n      if (pickDirection) {\n        pickDirection = pickDirection\n          .replace(/^UNDE\\b/i, \"UNDER\")\n          .toUpperCase();\n      }\n\n      // Ensure pickType is normalized\n      let pickType = (pick.pickType || \"spread\").toLowerCase();\n      if (pickType === \"ml\") pickType = \"moneyline\";\n      if (pickType === \"tt\") pickType = \"team-total\";\n      if (pickType === \"ou\") pickType = \"total\";\n\n      return {\n        ...pick,\n        id:\n          pick.id ||\n          `pick_${Date.now()}_${idx}_${Math.random().toString(36).substring(7)}`,\n        createdAt: pick.createdAt || new Date().toISOString(),\n        status: pick.status || \"pending\",\n        sport: sport,\n        league: sport,\n        awayTeam: awayTeam,\n        homeTeam: homeTeam,\n        pickDirection: pickDirection,\n        pickType: pickType,\n      };\n    });\n    const all = [...existing, ...enrichedPicks];\n    savePicks(all);\n    return enrichedPicks;\n  }\n\n  function clearPicks() {\n    localStorage.removeItem(STORAGE_KEY);\n    console.log(\"CLEANUP Cleared all picks from localStorage\");\n    refreshPicksTable();\n  }\n\n  function deletePick(pickId) {\n    const picks = getAllPicks().filter((p) => p.id !== pickId);\n    savePicks(picks);\n    refreshPicksTable();\n  }\n\n  function updatePickStatus(pickId, newStatus) {\n    const picks = getAllPicks().map((p) => {\n      if (p.id === pickId) {\n        return { ...p, status: newStatus, updatedAt: new Date().toISOString() };\n      }\n      return p;\n    });\n    savePicks(picks);\n    refreshPicksTable();\n  }\n\n  function getUnitMultiplier() {\n    return parseInt(localStorage.getItem(UNIT_MULTIPLIER_KEY)) || 1000;\n  }\n\n  function setUnitMultiplier(multiplier) {\n    localStorage.setItem(UNIT_MULTIPLIER_KEY, multiplier.toString());\n    if (window.PickStandardizer) {\n      window.PickStandardizer.setUnitMultiplier(multiplier);\n    }\n  }\n\n  // ========== STATUS LABEL HELPER ==========\n\n  /**\n   * Format status badge label based on status and game time\n   * @param {string} status - The pick status\n   * @param {Object} pick - The pick object with countdown/scheduled info\n   * @returns {string} - Formatted label for the status badge\n   */\n  function formatStatusLabel(status, pick = {}) {\n    const normalizedStatus = (status || \"pending\").toLowerCase();\n\n    // Map status to proper labels\n    const labelMap = {\n      win: \"Won\",\n      won: \"Won\",\n      loss: \"Lost\",\n      lost: \"Lost\",\n      push: \"Push\",\n      \"on-track\": \"On Track\",\n      \"at-risk\": \"At Risk\",\n      live: \"Live\",\n    };\n\n    if (labelMap[normalizedStatus]) {\n      return labelMap[normalizedStatus];\n    }\n\n    // For pending, show countdown or scheduled time if available\n    if (normalizedStatus === \"pending\") {\n      if (pick.countdown) {\n        return pick.countdown;\n      }\n      if (pick.scheduled || pick.gameTime) {\n        return `Starts ${pick.scheduled || pick.gameTime}`;\n      }\n      return \"Pending\";\n    }\n\n    // Default: capitalize first letter\n    return status.charAt(0).toUpperCase() + status.slice(1);\n  }\n\n  /**\n   * Generate tooltip blurb based on status and pick data\n   * @param {string} status - The pick status\n   * @param {Object} pick - The pick object\n   * @returns {string} - Tooltip text\n   */\n  function generateStatusBlurb(status, pick = {}) {\n    const normalizedStatus = (status || \"pending\").toLowerCase();\n    const pickType = (pick.pickType || \"spread\").toLowerCase();\n    const line = pick.line || \"\";\n\n    switch (normalizedStatus) {\n      case \"pending\":\n        if (pick.gameTime) {\n          return `Game starts at ${pick.gameTime}`;\n        }\n        return \"Awaiting game start\";\n\n      case \"on-track\":\n        if (pickType === \"spread\") {\n          return `Covering by 8.5 pts \u2022 ${pick.countdown || \"Live\"}`;\n        } else if (pickType === \"total\") {\n          return `On pace for ${pick.pickDirection || \"Over\"} \u2022 ${pick.countdown || \"Live\"}`;\n        } else if (pickType === \"moneyline\") {\n          return `Leading \u2022 ${pick.countdown || \"Live\"}`;\n        }\n        return `On track to hit \u2022 ${pick.countdown || \"Live\"}`;\n\n      case \"at-risk\":\n        if (pickType === \"spread\") {\n          return `Need 5.5 pts to cover \u2022 ${pick.countdown || \"Live\"}`;\n        } else if (pickType === \"total\") {\n          return `Need 12 more pts \u2022 ${pick.countdown || \"Live\"}`;\n        } else if (pickType === \"moneyline\") {\n          return `Trailing \u2022 ${pick.countdown || \"Live\"}`;\n        }\n        return `At risk \u2022 ${pick.countdown || \"Live\"}`;\n\n      case \"win\":\n      case \"won\":\n        const winAmt = pick.win || 0;\n        return `+$${winAmt.toLocaleString()}`;\n\n      case \"loss\":\n      case \"lost\":\n        const lossAmt = pick.risk || 0;\n        return `-$${lossAmt.toLocaleString()}`;\n\n      case \"push\":\n        return \"$0 \u2022 Refunded\";\n\n      default:\n        return \"\";\n    }\n  }\n\n  // ========== TEAM DATA ==========\n  // Team data is now loaded from assets/data/team-data.json via TeamDataLoader\n  // Fallback to hardcoded data for backward compatibility\n\n  const TEAM_DATA_FALLBACK = {\n    // NBA Teams - logos now loaded via LogoLoader\n    \"san antonio spurs\": { abbr: \"SAS\", league: \"nba\" },\n    spurs: { abbr: \"SAS\", league: \"nba\" },\n    \"new york knicks\": { abbr: \"NYK\", league: \"nba\" },\n    knicks: { abbr: \"NYK\", league: \"nba\" },\n    \"los angeles lakers\": { abbr: \"LAL\", league: \"nba\" },\n    lakers: { abbr: \"LAL\", league: \"nba\" },\n    \"golden state warriors\": { abbr: \"GSW\", league: \"nba\" },\n    warriors: { abbr: \"GSW\", league: \"nba\" },\n    \"boston celtics\": { abbr: \"BOS\", league: \"nba\" },\n    celtics: { abbr: \"BOS\", league: \"nba\" },\n    \"miami heat\": { abbr: \"MIA\", league: \"nba\" },\n    heat: { abbr: \"MIA\", league: \"nba\" },\n    \"dallas mavericks\": { abbr: \"DAL\", league: \"nba\" },\n    mavericks: { abbr: \"DAL\", league: \"nba\" },\n    mavs: { abbr: \"DAL\", league: \"nba\" },\n    \"denver nuggets\": { abbr: \"DEN\", league: \"nba\" },\n    nuggets: { abbr: \"DEN\", league: \"nba\" },\n    \"phoenix suns\": { abbr: \"PHX\", league: \"nba\" },\n    suns: { abbr: \"PHX\", league: \"nba\" },\n    \"milwaukee bucks\": { abbr: \"MIL\", league: \"nba\" },\n    bucks: { abbr: \"MIL\", league: \"nba\" },\n    \"philadelphia 76ers\": { abbr: \"PHI\", league: \"nba\" },\n    \"76ers\": { abbr: \"PHI\", league: \"nba\" },\n    sixers: { abbr: \"PHI\", league: \"nba\" },\n    \"brooklyn nets\": { abbr: \"BKN\", league: \"nba\" },\n    nets: { abbr: \"BKN\", league: \"nba\" },\n    \"chicago bulls\": { abbr: \"CHI\", league: \"nba\" },\n    bulls: { abbr: \"CHI\", league: \"nba\" },\n    \"cleveland cavaliers\": { abbr: \"CLE\", league: \"nba\" },\n    cavaliers: { abbr: \"CLE\", league: \"nba\" },\n    cavs: { abbr: \"CLE\", league: \"nba\" },\n    \"atlanta hawks\": { abbr: \"ATL\", league: \"nba\" },\n    hawks: { abbr: \"ATL\", league: \"nba\" },\n    \"toronto raptors\": { abbr: \"TOR\", league: \"nba\" },\n    raptors: { abbr: \"TOR\", league: \"nba\" },\n    \"orlando magic\": { abbr: \"ORL\", league: \"nba\" },\n    magic: { abbr: \"ORL\", league: \"nba\" },\n    \"indiana pacers\": { abbr: \"IND\", league: \"nba\" },\n    pacers: { abbr: \"IND\", league: \"nba\" },\n    \"detroit pistons\": { abbr: \"DET\", league: \"nba\" },\n    pistons: { abbr: \"DET\", league: \"nba\" },\n    \"charlotte hornets\": { abbr: \"CHA\", league: \"nba\" },\n    hornets: { abbr: \"CHA\", league: \"nba\" },\n    \"washington wizards\": { abbr: \"WAS\", league: \"nba\" },\n    wizards: { abbr: \"WAS\", league: \"nba\" },\n    \"memphis grizzlies\": { abbr: \"MEM\", league: \"nba\" },\n    grizzlies: { abbr: \"MEM\", league: \"nba\" },\n    \"new orleans pelicans\": { abbr: \"NOP\", league: \"nba\" },\n    pelicans: { abbr: \"NOP\", league: \"nba\" },\n    \"houston rockets\": { abbr: \"HOU\", league: \"nba\" },\n    rockets: { abbr: \"HOU\", league: \"nba\" },\n    \"minnesota timberwolves\": { abbr: \"MIN\", league: \"nba\" },\n    timberwolves: { abbr: \"MIN\", league: \"nba\" },\n    wolves: { abbr: \"MIN\", league: \"nba\" },\n    \"oklahoma city thunder\": { abbr: \"OKC\", league: \"nba\" },\n    thunder: { abbr: \"OKC\", league: \"nba\" },\n    \"portland trail blazers\": { abbr: \"POR\", league: \"nba\" },\n    \"trail blazers\": { abbr: \"POR\", league: \"nba\" },\n    blazers: { abbr: \"POR\", league: \"nba\" },\n    \"utah jazz\": { abbr: \"UTA\", league: \"nba\" },\n    jazz: { abbr: \"UTA\", league: \"nba\" },\n    \"sacramento kings\": { abbr: \"SAC\", league: \"nba\" },\n    kings: { abbr: \"SAC\", league: \"nba\" },\n    \"la clippers\": { abbr: \"LAC\", league: \"nba\" },\n    clippers: { abbr: \"LAC\", league: \"nba\" },\n\n    // NCAAB Teams (from today's picks) - Full names and abbreviations\n    butler: {\n      abbr: \"BUT\",\n      fullName: \"Butler Bulldogs\",\n      league: \"ncaam\",\n      logoId: \"2086\",\n    },\n    \"butler bulldogs\": {\n      abbr: \"BUT\",\n      fullName: \"Butler Bulldogs\",\n      league: \"ncaam\",\n      logoId: \"2086\",\n    },\n    connecticut: {\n      abbr: \"CONN\",\n      fullName: \"UConn Huskies\",\n      league: \"ncaam\",\n      logoId: \"41\",\n    },\n    \"u conn\": {\n      abbr: \"CONN\",\n      fullName: \"UConn Huskies\",\n      league: \"ncaam\",\n      logoId: \"41\",\n    },\n    uconn: {\n      abbr: \"CONN\",\n      fullName: \"UConn Huskies\",\n      league: \"ncaam\",\n      logoId: \"41\",\n    },\n    \"uconn huskies\": {\n      abbr: \"CONN\",\n      fullName: \"UConn Huskies\",\n      league: \"ncaam\",\n      logoId: \"41\",\n    },\n    \"abilene christian\": {\n      abbr: \"ACU\",\n      fullName: \"Abilene Christian Wildcats\",\n      league: \"ncaam\",\n      logoId: \"2000\",\n    },\n    \"abilene christian wildcats\": {\n      abbr: \"ACU\",\n      fullName: \"Abilene Christian Wildcats\",\n      league: \"ncaam\",\n      logoId: \"2000\",\n    },\n    // arizona: {\n    //   abbr: \"ARIZ\",\n    //   fullName: \"Arizona Wildcats\",\n    //   league: \"ncaam\",\n    //   logoId: \"12\",\n    // },\n    \"arizona wildcats\": {\n      abbr: \"ARIZ\",\n      fullName: \"Arizona Wildcats\",\n      league: \"ncaam\",\n      logoId: \"12\",\n    },\n    \"montana st\": {\n      abbr: \"MTST\",\n      fullName: \"Montana State Bobcats\",\n      league: \"ncaam\",\n      logoId: \"149\",\n    },\n    \"montana state\": {\n      abbr: \"MTST\",\n      fullName: \"Montana State Bobcats\",\n      league: \"ncaam\",\n      logoId: \"149\",\n    },\n    \"montana state bobcats\": {\n      abbr: \"MTST\",\n      fullName: \"Montana State Bobcats\",\n      league: \"ncaam\",\n      logoId: \"149\",\n    },\n    \"cal poly slo\": {\n      abbr: \"CPSU\",\n      fullName: \"Cal Poly Mustangs\",\n      league: \"ncaam\",\n      logoId: \"13\",\n    },\n    \"cal poly\": {\n      abbr: \"CPSU\",\n      fullName: \"Cal Poly Mustangs\",\n      league: \"ncaam\",\n      logoId: \"13\",\n    },\n    \"cal poly mustangs\": {\n      abbr: \"CPSU\",\n      fullName: \"Cal Poly Mustangs\",\n      league: \"ncaam\",\n      logoId: \"13\",\n    },\n    \"oral roberts\": {\n      abbr: \"ORU\",\n      fullName: \"Oral Roberts Golden Eagles\",\n      league: \"ncaam\",\n      logoId: \"198\",\n    },\n    \"oral roberts golden eagles\": {\n      abbr: \"ORU\",\n      fullName: \"Oral Roberts Golden Eagles\",\n      league: \"ncaam\",\n      logoId: \"198\",\n    },\n    \"missouri st\": {\n      abbr: \"MOST\",\n      fullName: \"Missouri State Bears\",\n      league: \"ncaam\",\n      logoId: \"2623\",\n    },\n    \"missouri state\": {\n      abbr: \"MOST\",\n      fullName: \"Missouri State Bears\",\n      league: \"ncaam\",\n      logoId: \"2623\",\n    },\n    \"missouri state bears\": {\n      abbr: \"MOST\",\n      fullName: \"Missouri State Bears\",\n      league: \"ncaam\",\n      logoId: \"2623\",\n    },\n    marist: {\n      abbr: \"MAR\",\n      fullName: \"Marist Red Foxes\",\n      league: \"ncaam\",\n      logoId: \"2368\",\n    },\n    \"marist red foxes\": {\n      abbr: \"MAR\",\n      fullName: \"Marist Red Foxes\",\n      league: \"ncaam\",\n      logoId: \"2368\",\n    },\n    \"georgia tech\": {\n      abbr: \"GT\",\n      fullName: \"Georgia Tech Yellow Jackets\",\n      league: \"ncaam\",\n      logoId: \"59\",\n    },\n    \"georgia tech yellow jackets\": {\n      abbr: \"GT\",\n      fullName: \"Georgia Tech Yellow Jackets\",\n      league: \"ncaam\",\n      logoId: \"59\",\n    },\n    \"east tenn st\": {\n      abbr: \"ETSU\",\n      fullName: \"East Tennessee State Buccaneers\",\n      league: \"ncaam\",\n      logoId: \"2193\",\n    },\n    \"east tennessee st\": {\n      abbr: \"ETSU\",\n      fullName: \"East Tennessee State Buccaneers\",\n      league: \"ncaam\",\n      logoId: \"2193\",\n    },\n    \"east tennessee state\": {\n      abbr: \"ETSU\",\n      fullName: \"East Tennessee State Buccaneers\",\n      league: \"ncaam\",\n      logoId: \"2193\",\n    },\n    \"east tennessee state buccaneers\": {\n      abbr: \"ETSU\",\n      fullName: \"East Tennessee State Buccaneers\",\n      league: \"ncaam\",\n      logoId: \"2193\",\n    },\n    \"etsu buccaneers\": {\n      abbr: \"ETSU\",\n      fullName: \"East Tennessee State Buccaneers\",\n      league: \"ncaam\",\n      logoId: \"2193\",\n    },\n    \"north carolina\": {\n      abbr: \"UNC\",\n      fullName: \"North Carolina Tar Heels\",\n      league: \"ncaam\",\n      logoId: \"153\",\n    },\n    unc: {\n      abbr: \"UNC\",\n      fullName: \"North Carolina Tar Heels\",\n      league: \"ncaam\",\n      logoId: \"153\",\n    },\n    \"north carolina tar heels\": {\n      abbr: \"UNC\",\n      fullName: \"North Carolina Tar Heels\",\n      league: \"ncaam\",\n      logoId: \"153\",\n    },\n    \"tar heels\": {\n      abbr: \"UNC\",\n      fullName: \"North Carolina Tar Heels\",\n      league: \"ncaam\",\n      logoId: \"153\",\n    },\n\n    // NFL Teams\n    \"buffalo bills\": { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\n    bills: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\n    buffalo: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\n    \"philadelphia eagles\": {\n      abbr: \"PHI\",\n      fullName: \"Philadelphia Eagles\",\n      league: \"nfl\",\n    },\n    eagles: { abbr: \"PHI\", fullName: \"Philadelphia Eagles\", league: \"nfl\" },\n    \"kansas city chiefs\": {\n      abbr: \"KC\",\n      fullName: \"Kansas City Chiefs\",\n      league: \"nfl\",\n    },\n    chiefs: { abbr: \"KC\", fullName: \"Kansas City Chiefs\", league: \"nfl\" },\n    \"kansas city\": {\n      abbr: \"KC\",\n      fullName: \"Kansas City Chiefs\",\n      league: \"nfl\",\n    },\n    \"detroit lions\": { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\n    lions: { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\n    \"baltimore ravens\": {\n      abbr: \"BAL\",\n      fullName: \"Baltimore Ravens\",\n      league: \"nfl\",\n    },\n    ravens: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\n    baltimore: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\n    \"minnesota vikings\": {\n      abbr: \"MIN\",\n      fullName: \"Minnesota Vikings\",\n      league: \"nfl\",\n    },\n    vikings: { abbr: \"MIN\", fullName: \"Minnesota Vikings\", league: \"nfl\" },\n    \"green bay packers\": {\n      abbr: \"GB\",\n      fullName: \"Green Bay Packers\",\n      league: \"nfl\",\n    },\n    packers: { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\n    \"green bay\": { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\n    \"pittsburgh steelers\": {\n      abbr: \"PIT\",\n      fullName: \"Pittsburgh Steelers\",\n      league: \"nfl\",\n    },\n    steelers: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\n    pittsburgh: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\n    \"houston texans\": {\n      abbr: \"HOU\",\n      fullName: \"Houston Texans\",\n      league: \"nfl\",\n    },\n    texans: { abbr: \"HOU\", fullName: \"Houston Texans\", league: \"nfl\" },\n    \"los angeles chargers\": {\n      abbr: \"LAC\",\n      fullName: \"Los Angeles Chargers\",\n      league: \"nfl\",\n    },\n    chargers: { abbr: \"LAC\", fullName: \"Los Angeles Chargers\", league: \"nfl\" },\n    \"la chargers\": {\n      abbr: \"LAC\",\n      fullName: \"Los Angeles Chargers\",\n      league: \"nfl\",\n    },\n    \"denver broncos\": {\n      abbr: \"DEN\",\n      fullName: \"Denver Broncos\",\n      league: \"nfl\",\n    },\n    broncos: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\n    denver: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\n    \"cincinnati bengals\": {\n      abbr: \"CIN\",\n      fullName: \"Cincinnati Bengals\",\n      league: \"nfl\",\n    },\n    bengals: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\n    cincinnati: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\n    \"seattle seahawks\": {\n      abbr: \"SEA\",\n      fullName: \"Seattle Seahawks\",\n      league: \"nfl\",\n    },\n    seahawks: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\n    seattle: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\n    \"tampa bay buccaneers\": {\n      abbr: \"TB\",\n      fullName: \"Tampa Bay Buccaneers\",\n      league: \"nfl\",\n    },\n    buccaneers: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\n    bucs: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\n    \"tampa bay\": {\n      abbr: \"TB\",\n      fullName: \"Tampa Bay Buccaneers\",\n      league: \"nfl\",\n    },\n    \"san francisco 49ers\": {\n      abbr: \"SF\",\n      fullName: \"San Francisco 49ers\",\n      league: \"nfl\",\n    },\n    \"49ers\": { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\n    niners: { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\n    \"san francisco\": {\n      abbr: \"SF\",\n      fullName: \"San Francisco 49ers\",\n      league: \"nfl\",\n    },\n    \"dallas cowboys\": {\n      abbr: \"DAL\",\n      fullName: \"Dallas Cowboys\",\n      league: \"nfl\",\n    },\n    cowboys: { abbr: \"DAL\", fullName: \"Dallas Cowboys\", league: \"nfl\" },\n    \"miami dolphins\": {\n      abbr: \"MIA\",\n      fullName: \"Miami Dolphins\",\n      league: \"nfl\",\n    },\n    dolphins: { abbr: \"MIA\", fullName: \"Miami Dolphins\", league: \"nfl\" },\n    \"los angeles rams\": {\n      abbr: \"LAR\",\n      fullName: \"Los Angeles Rams\",\n      league: \"nfl\",\n    },\n    rams: { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\n    \"la rams\": { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\n    \"arizona cardinals\": {\n      abbr: \"ARI\",\n      fullName: \"Arizona Cardinals\",\n      league: \"nfl\",\n    },\n    cardinals: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\n    arizona: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\n    \"indianapolis colts\": {\n      abbr: \"IND\",\n      fullName: \"Indianapolis Colts\",\n      league: \"nfl\",\n    },\n    colts: { abbr: \"IND\", fullName: \"Indianapolis Colts\", league: \"nfl\" },\n    indianapolis: {\n      abbr: \"IND\",\n      fullName: \"Indianapolis Colts\",\n      league: \"nfl\",\n    },\n    \"tennessee titans\": {\n      abbr: \"TEN\",\n      fullName: \"Tennessee Titans\",\n      league: \"nfl\",\n    },\n    titans: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\n    tennessee: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\n    \"jacksonville jaguars\": {\n      abbr: \"JAX\",\n      fullName: \"Jacksonville Jaguars\",\n      league: \"nfl\",\n    },\n    jaguars: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\n    jags: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\n    jacksonville: {\n      abbr: \"JAX\",\n      fullName: \"Jacksonville Jaguars\",\n      league: \"nfl\",\n    },\n    \"cleveland browns\": {\n      abbr: \"CLE\",\n      fullName: \"Cleveland Browns\",\n      league: \"nfl\",\n    },\n    browns: { abbr: \"CLE\", fullName: \"Cleveland Browns\", league: \"nfl\" },\n    \"new york giants\": {\n      abbr: \"NYG\",\n      fullName: \"New York Giants\",\n      league: \"nfl\",\n    },\n    giants: { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\n    \"ny giants\": { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\n    \"new york jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\n    jets: { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\n    \"ny jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\n    \"new england patriots\": {\n      abbr: \"NE\",\n      fullName: \"New England Patriots\",\n      league: \"nfl\",\n    },\n    patriots: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\n    pats: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\n    \"new england\": {\n      abbr: \"NE\",\n      fullName: \"New England Patriots\",\n      league: \"nfl\",\n    },\n    \"washington commanders\": {\n      abbr: \"WSH\",\n      fullName: \"Washington Commanders\",\n      league: \"nfl\",\n    },\n    commanders: {\n      abbr: \"WSH\",\n      fullName: \"Washington Commanders\",\n      league: \"nfl\",\n    },\n    \"carolina panthers\": {\n      abbr: \"CAR\",\n      fullName: \"Carolina Panthers\",\n      league: \"nfl\",\n    },\n    panthers: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\n    carolina: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\n    \"atlanta falcons\": {\n      abbr: \"ATL\",\n      fullName: \"Atlanta Falcons\",\n      league: \"nfl\",\n    },\n    falcons: { abbr: \"ATL\", fullName: \"Atlanta Falcons\", league: \"nfl\" },\n    \"new orleans saints\": {\n      abbr: \"NO\",\n      fullName: \"New Orleans Saints\",\n      league: \"nfl\",\n    },\n    saints: { abbr: \"NO\", fullName: \"New Orleans Saints\", league: \"nfl\" },\n    \"new orleans\": {\n      abbr: \"NO\",\n      fullName: \"New Orleans Saints\",\n      league: \"nfl\",\n    },\n    \"chicago bears\": { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\n    bears: { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\n    \"las vegas raiders\": {\n      abbr: \"LV\",\n      fullName: \"Las Vegas Raiders\",\n      league: \"nfl\",\n    },\n    raiders: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\n    \"las vegas\": { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\n    vegas: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\n  };\n\n  /**\n   * Get team logo URL using LogoLoader (Azure Blob Storage)\n   * @param {string} teamAbbr - Team abbreviation (e.g., 'LAL', 'BUF')\n   * @param {string} league - League identifier ('nba', 'nfl', 'ncaam', etc.)\n   * @param {string} logoId - Optional ESPN logo ID for NCAA teams\n   * @returns {string} Logo URL\n   */\n  function getTeamLogoUrl(teamAbbr, league, logoId) {\n    if (!window.LogoLoader || !teamAbbr) return \"\";\n\n    // For NCAA teams, we may need to use logoId\n    if ((league === \"ncaam\" || league === \"ncaaf\") && logoId) {\n      // LogoLoader expects teamId, for NCAA it's the numeric ID\n      return window.LogoLoader.getLogoUrl(league, logoId);\n    }\n\n    // For NBA/NFL, use the abbreviation (lowercase)\n    const teamId = teamAbbr.toLowerCase();\n    return window.LogoLoader.getLogoUrl(league, teamId);\n  }\n\n  async function getTeamInfo(teamName) {\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\n\n    // Try to use TeamDataLoader if available\n    if (\n      window.TeamDataLoader &&\n      typeof window.TeamDataLoader.getTeamInfo === \"function\"\n    ) {\n      try {\n        const info = await window.TeamDataLoader.getTeamInfo(teamName);\n        if (info && info.abbr !== \"N/A\") {\n          return info;\n        }\n      } catch (e) {\n        console.warn(\n          \"[LocalPicksManager] TeamDataLoader failed, using fallback:\",\n          e,\n        );\n      }\n    }\n\n    // Fallback to hardcoded data\n    const lower = teamName.toLowerCase().trim();\n    const data = TEAM_DATA_FALLBACK[lower];\n    if (data) {\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\n      const league = data.league || \"nba\"; // Default to NBA if not specified\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\n      return {\n        abbr: data.abbr,\n        fullName: data.fullName || teamName,\n        logo: logo,\n      };\n    }\n    return {\n      abbr: teamName.substring(0, 3).toUpperCase(),\n      fullName: teamName,\n      logo: \"\",\n    };\n  }\n\n  // Synchronous version for backward compatibility (uses fallback)\n  function getTeamInfoSync(teamName) {\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\n    const lower = teamName.toLowerCase().trim();\n    const data = TEAM_DATA_FALLBACK[lower];\n    if (data) {\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\n      const league = data.league || \"nba\"; // Default to NBA if not specified\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\n      return {\n        abbr: data.abbr,\n        fullName: data.fullName || teamName,\n        logo: logo,\n      };\n    }\n    return {\n      abbr: teamName.substring(0, 3).toUpperCase(),\n      fullName: teamName,\n      logo: \"\",\n    };\n  }\n\n  // ========== PARSE AND ADD PICKS ==========\n\n  async function parseAndAddPicks(content, sportsbook = \"\") {\n    if (!window.PickStandardizer) {\n      console.error(\"PickStandardizer not loaded\");\n      return [];\n    }\n\n    // Ensure team variant registry is loaded (362 NCAAM + 30 NBA teams)\n    if (window.PickStandardizer.loadTeamVariants) {\n      await window.PickStandardizer.loadTeamVariants();\n    }\n\n    // Set unit multiplier\n    window.PickStandardizer.setUnitMultiplier(getUnitMultiplier());\n\n    // Parse content\n    const picks = window.PickStandardizer.standardize(content);\n\n    if (picks.length === 0) {\n      console.warn(\"No picks could be parsed from content\");\n      return [];\n    }\n\n    // Add sportsbook and default values to each pick\n    const defaultRisk = getUnitMultiplier(); // 1 unit = $1000 default\n    const picksWithBook = picks.map((pick) => {\n      // Set default risk if not provided\n      const risk = pick.risk || defaultRisk;\n\n      // Calculate win from odds if not provided\n      let win = pick.win;\n      if (!win && pick.odds && risk) {\n        const oddsNum = parseInt(pick.odds);\n        if (oddsNum > 0) {\n          win = risk * (oddsNum / 100);\n        } else if (oddsNum < 0) {\n          win = risk / (Math.abs(oddsNum) / 100);\n        }\n      }\n\n      return {\n        ...pick,\n        sportsbook: sportsbook || pick.sportsbook || \"Manual Upload\",\n        risk: Math.round(risk),\n        win: Math.round(win || risk * 0.91), // Default to -110 odds if no odds\n        gameDate:\n          pick.gameDate ||\n          new Date().toLocaleDateString(\"en-US\", {\n            weekday: \"short\",\n            month: \"short\",\n            day: \"numeric\",\n          }),\n        gameTime: pick.gameTime || \"TBD\",\n      };\n    });\n\n    // Try to enrich picks with game data from ESPN\n    const enrichedPicks = await enrichPicksWithGameData(picksWithBook);\n\n    // Add to storage\n    const added = addPicks(enrichedPicks);\n\n    // Refresh the table\n    refreshPicksTable();\n\n    return added;\n  }\n\n  async function enrichPicksWithGameData(picks) {\n    // Fetch today's games if AutoGameFetcher is available\n    let todaysGames = [];\n    if (window.AutoGameFetcher) {\n      try {\n        await window.AutoGameFetcher.fetchTodaysGames();\n        todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\n        console.log(\n          `\uD83C\uDFC0 Found ${todaysGames.length} games today:`,\n          todaysGames.map((g) => `${g.awayTeam} @ ${g.homeTeam} (${g.time})`),\n        );\n      } catch (e) {\n        console.warn(\"Could not fetch games:\", e);\n      }\n    } else {\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available\");\n    }\n\n    return picks.map((pick) => {\n      const enriched = { ...pick };\n      const teamToFind = pick.pickTeam;\n\n      console.log(`\uD83D\uDD0D Looking for game with team: \"${teamToFind}\"`);\n\n      // Try to find the game\n      if (window.AutoGameFetcher && todaysGames.length > 0) {\n        const game = window.AutoGameFetcher.findGame(teamToFind);\n        if (game) {\n          console.log(\n            `\u2705 Found game: ${game.awayTeam} (${game.awayRecord}) @ ${game.homeTeam} (${game.homeRecord}) at ${game.time}`,\n          );\n          enriched.awayTeam = game.awayTeam;\n          enriched.homeTeam = game.homeTeam;\n          enriched.awayRecord = game.awayRecord || \"\";\n          enriched.homeRecord = game.homeRecord || \"\";\n          enriched.gameTime = game.time;\n          enriched.gameDate = game.date;\n          enriched.sport = game.sport;\n          enriched.gameStatus = game.status;\n          enriched.game = `${game.awayTeam} @ ${game.homeTeam}`;\n        } else {\n          console.warn(\n            `\u274C No game found for \"${teamToFind}\" - available teams:`,\n            todaysGames.flatMap((g) => [g.awayTeam, g.homeTeam]),\n          );\n        }\n      }\n\n      // Set default date/time if not found\n      if (!enriched.gameDate) {\n        enriched.gameDate = new Date().toLocaleDateString(\"en-US\", {\n          month: \"short\",\n          day: \"numeric\",\n        });\n      }\n      if (!enriched.gameTime) {\n        enriched.gameTime = \"TBD\";\n      }\n\n      return enriched;\n    });\n  }\n\n  // ========== REFRESH TABLE ==========\n\n  /**\n   * Format currency with fixed two decimals\n   */\n  function formatCurrencyValue(val) {\n    if (val === undefined || val === null || val === \"\") return \"$0.00\";\n    const num =\n      typeof val === \"number\"\n        ? val\n        : parseFloat(String(val).replace(/[$,]/g, \"\"));\n    if (isNaN(num)) return \"$0.00\";\n    return `$${num.toLocaleString(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n  }\n\n  /**\n   * Format date string into short month/day display\n   */\n  function formatDateValue(date) {\n    if (!date) return \"Today\";\n    if (date.includes(\"/\") || date.includes(\"-\")) {\n      const d = new Date(date);\n      if (!isNaN(d)) {\n        return d.toLocaleDateString(\"en-US\", {\n          weekday: \"short\",\n          month: \"short\",\n          day: \"numeric\",\n        });\n      }\n    }\n    return date;\n  }\n\n  // League logos now served via LogoLoader (Azure Blob + static assets)\n  // LogoLoader automatically handles fallbacks and caching\n  function getLeagueLogo(league) {\n    if (!league) return \"\";\n    const leagueUpper = league.toUpperCase();\n\n    // Use LogoLoader if available\n    if (\n      window.LogoLoader &&\n      typeof window.LogoLoader.getLeagueLogoUrl === \"function\"\n    ) {\n      // Map variations to standard league names\n      const leagueMap = {\n        NCAAB: \"ncaam\",\n        NCAAM: \"ncaam\",\n        \"NCAA MEN'S BASKETBALL\": \"ncaam\",\n        CBB: \"ncaam\",\n        NCAAF: \"ncaaf\",\n        \"COLLEGE FOOTBALL\": \"ncaaf\",\n        CFB: \"ncaaf\",\n        NBA: \"nba\",\n        NFL: \"nfl\",\n        MLB: \"mlb\",\n        NHL: \"nhl\",\n        MLS: \"mls\",\n      };\n      const standardLeague =\n        leagueMap[leagueUpper] || leagueUpper.toLowerCase();\n      return window.LogoLoader.getLeagueLogoUrl(standardLeague);\n    }\n\n    // Legacy fallback (should rarely be used)\n    const LEAGUE_LOGOS_FALLBACK = {\n      NBA: \"assets/nba-logo.png\",\n      NFL: \"assets/nfl-logo.png\",\n      NCAAB: \"assets/ncaam-logo.png\",\n      NCAAM: \"assets/ncaam-logo.png\",\n      NCAAF: \"assets/ncaaf-logo.png\",\n      MLB: \"assets/icons/league-mlb.svg\",\n      NHL: \"assets/icons/league-nhl.svg\",\n    };\n    return LEAGUE_LOGOS_FALLBACK[leagueUpper] || \"\";\n  }\n\n  function renderLeagueCell(sport) {\n    // Convert to uppercase for lookup (LEAGUE_LOGOS keys are uppercase)\n    const sportUpper = (sport || \"\").toUpperCase();\n    // Map normalized values to display names\n    const displayMap = {\n      NCAAAB: \"NCAAM\",\n      NCAAB: \"NCAAM\",\n      NCAAF: \"NCAAF\",\n      NBA: \"NBA\",\n      NFL: \"NFL\",\n      MLB: \"MLB\",\n      NHL: \"NHL\",\n    };\n    const displayText = displayMap[sportUpper] || sportUpper;\n    // Get logo via LogoLoader\n    const logo = getLeagueLogo(sportUpper);\n    return `\n            <div class=\"league-cell\">\n                ${logo ? `<img src=\"${logo}\" class=\"league-logo\" alt=\"${displayText}\" onerror=\"this.style.display='none'\">` : \"\"}\n                <span class=\"league-text\">${displayText}</span>\n            </div>\n        `;\n  }\n\n  function refreshPicksTable() {\n    const picks = getAllPicks();\n    const tbody = document.getElementById(\"picks-tbody\");\n\n    if (!tbody) {\n      // Silent return if table not present (e.g. on pages without the picks table)\n      return;\n    }\n\n    // Clear existing rows\n    tbody.innerHTML = \"\";\n\n    // Update table container class\n    const tableContainer = tbody.closest(\".table-container\");\n    if (tableContainer) {\n      tableContainer.classList.toggle(\"has-picks\", picks.length > 0);\n    }\n\n    if (picks.length === 0) {\n      console.log(\"No picks to display\");\n      return;\n    }\n\n    // Render each pick as a row (using sync version for immediate rendering)\n    picks.forEach((pick, idx) => {\n      const row = createPickRow(pick, idx);\n      tbody.appendChild(row);\n    });\n\n    console.log(`\uD83D\uDCCA Displayed ${picks.length} picks in table`);\n\n    // Trigger recalculations\n    if (\n      typeof window.calculateKPIs === \"function\" &&\n      typeof window.updateKPITiles === \"function\"\n    ) {\n      setTimeout(() => {\n        const kpis = window.calculateKPIs(getAllPicks());\n        window.updateKPITiles(kpis);\n      }, 100);\n    }\n    if (window.ZebraStripes?.applyPicksTableZebraStripes) {\n      setTimeout(() => window.ZebraStripes.applyPicksTableZebraStripes(), 50);\n    }\n\n    // Re-apply filters if they exist\n    if (\n      window.DashboardFilters &&\n      typeof window.DashboardFilters.applyFilters === \"function\"\n    ) {\n      setTimeout(() => window.DashboardFilters.applyFilters(), 50);\n    }\n\n    // Re-apply filter pills if available\n    if (\n      window.DashboardFilterPills &&\n      typeof window.DashboardFilterPills.applyFilters === \"function\"\n    ) {\n      setTimeout(() => window.DashboardFilterPills.applyFilters(), 50);\n    }\n\n    // ========== ACTIVATE LIVE SCORES & BOX SCORES ==========\n    // Fetch today's games and start live score updates\n    setTimeout(async () => {\n      try {\n        // 1. Fetch today's games first (needed for matching)\n        if (window.AutoGameFetcher) {\n          console.log(\n            \"[PICKS-TABLE] Fetching today's games for live scores...\",\n          );\n          await window.AutoGameFetcher.fetchTodaysGames(true); // Force refresh\n          const games = window.AutoGameFetcher.getTodaysGames() || [];\n          console.log(\n            `[PICKS-TABLE] Loaded ${games.length} games for live score matching`,\n          );\n        }\n\n        // 2. Start/restart LiveScoreUpdater\n        if (window.LiveScoreUpdater) {\n          console.log(\"[PICKS-TABLE] Starting live score updates...\");\n          window.LiveScoreUpdater.stopLiveUpdates(); // Stop if running\n          window.LiveScoreUpdater.startLiveUpdates(); // Start fresh\n          // Also trigger an immediate update\n          window.LiveScoreUpdater.updateScores();\n        }\n\n        // 3. Populate team records in box scores\n        if (typeof window.populateTeamRecordsWhenReady === \"function\") {\n          window.populateTeamRecordsWhenReady(tbody, { force: true });\n        }\n\n        console.log(\"[PICKS-TABLE] \u2705 Live scores and box scores activated\");\n      } catch (e) {\n        console.warn(\"[PICKS-TABLE] Error activating live scores:\", e);\n      }\n    }, 200);\n\n    // Attach sportsbook dropdown event handlers\n    attachSportsbookDropdownListeners();\n\n    // Attach risk/win amount edit handlers\n    attachRiskWinEditListeners();\n  }\n\n  // ========== SPORTSBOOK DROPDOWN HANDLER ==========\n\n  function attachSportsbookDropdownListeners() {\n    const dropdowns = document.querySelectorAll(\".sportsbook-dropdown\");\n    dropdowns.forEach((dropdown) => {\n      // Remove any existing listeners to avoid duplicates\n      dropdown.removeEventListener(\"change\", handleSportsbookChange);\n      // Attach new listener\n      dropdown.addEventListener(\"change\", handleSportsbookChange);\n    });\n  }\n\n  function handleSportsbookChange(event) {\n    const pickId = event.target.getAttribute(\"data-pick-id\");\n    const newSportsbook = event.target.value;\n\n    if (!pickId) return;\n\n    // Update the pick's sportsbook\n    const picks = getAllPicks();\n    const pick = picks.find((p) => p.id === pickId);\n\n    if (pick) {\n      pick.sportsbook = newSportsbook;\n      savePicks(picks);\n      console.log(\n        `\u2705 Updated pick ${pickId} sportsbook to: ${newSportsbook || \"None\"}`,\n      );\n    }\n  }\n\n  // ========== RISK/WIN AMOUNT EDIT HANDLERS ==========\n\n  function attachRiskWinEditListeners() {\n    const riskInputs = document.querySelectorAll(\".editable-risk\");\n    const winInputs = document.querySelectorAll(\".editable-win\");\n\n    riskInputs.forEach((input) => {\n      input.removeEventListener(\"change\", handleRiskChange);\n      input.addEventListener(\"change\", handleRiskChange);\n    });\n\n    winInputs.forEach((input) => {\n      input.removeEventListener(\"change\", handleWinChange);\n      input.addEventListener(\"change\", handleWinChange);\n    });\n  }\n\n  function handleRiskChange(event) {\n    const pickId = event.target.getAttribute(\"data-pick-id\");\n    const newRisk = parseFloat(event.target.value) || 0;\n\n    if (!pickId) return;\n\n    const picks = getAllPicks();\n    const pick = picks.find((p) => p.id === pickId);\n\n    if (pick) {\n      pick.risk = Math.round(newRisk);\n      savePicks(picks);\n      console.log(\n        `\u2705 Updated pick ${pickId} risk to: $${pick.risk.toLocaleString()}`,\n      );\n    }\n  }\n\n  function handleWinChange(event) {\n    const pickId = event.target.getAttribute(\"data-pick-id\");\n    const newWin = parseFloat(event.target.value) || 0;\n\n    if (!pickId) return;\n\n    const picks = getAllPicks();\n    const pick = picks.find((p) => p.id === pickId);\n\n    if (pick) {\n      pick.win = Math.round(newWin);\n      savePicks(picks);\n      console.log(\n        `\u2705 Updated pick ${pickId} win to: $${pick.win.toLocaleString()}`,\n      );\n    }\n  }\n\n  // ========== CREATE ROW (FULL TEMPLATE) ==========\n  // Note: Using synchronous version for immediate rendering\n  // Async team data loading happens in background via TeamDataLoader\n\n  function createPickRow(pick, idx) {\n    const row = document.createElement(\"tr\");\n    const pickTeamInfo = getTeamInfoSync(pick.pickTeam);\n    const awayTeam = pick.awayTeam || pick.pickTeam || \"TBD\";\n    const homeTeam = pick.homeTeam || \"TBD\";\n    const awayRecord = pick.awayRecord || \"\";\n    const homeRecord = pick.homeRecord || \"\";\n    const awayInfo = getTeamInfoSync(awayTeam);\n    const homeInfo = getTeamInfoSync(homeTeam);\n\n    const segment = pick.segment || \"Full Game\";\n    const segmentKey =\n      segment.toLowerCase().includes(\"1h\") ||\n      segment.toLowerCase().includes(\"1st\")\n        ? \"1h\"\n        : segment.toLowerCase().includes(\"2h\") ||\n            segment.toLowerCase().includes(\"2nd\")\n          ? \"2h\"\n          : \"full-game\";\n\n    const segmentLabel =\n      {\n        \"1h\": \"1st Half\",\n        \"2h\": \"2nd Half\",\n        \"1q\": \"1st Quarter\",\n        \"2q\": \"2nd Quarter\",\n        \"3q\": \"3rd Quarter\",\n        \"4q\": \"4th Quarter\",\n        \"full-game\": \"Full Game\",\n      }[segmentKey] || \"Full Game\";\n\n    let selection = \"\";\n    if (pick.pickType === \"spread\") {\n      const line = pick.line || \"\";\n      selection =\n        line.startsWith(\"+\") || line.startsWith(\"-\")\n          ? line\n          : line\n            ? `+${line}`\n            : \"\";\n    } else if (pick.pickType === \"moneyline\" || pick.pickType === \"ml\") {\n      selection = \"ML\";\n    } else if (\n      pick.pickType === \"total\" ||\n      pick.pickType === \"team-total\" ||\n      pick.pickType === \"tt\"\n    ) {\n      // Normalize pickDirection - fix \"UNDE\" typo\n      let direction = (pick.pickDirection || \"Over\").toUpperCase();\n      if (direction === \"UNDE\" || direction.startsWith(\"UNDE\")) {\n        direction = \"UNDER\";\n      }\n      selection = `${direction} ${pick.line || \"\"}`.trim();\n    }\n\n    const status = pick.status || \"pending\";\n    const sportsbook = pick.sportsbook || \"\";\n    let sport = (pick.sport || \"NBA\").toLowerCase();\n\n    // Normalize league values to match filter dropdown options\n    const leagueNormMap = {\n      college: \"ncaaf\",\n      cfb: \"ncaaf\",\n      \"college football\": \"ncaaf\",\n      \"ncaa football\": \"ncaaf\",\n      cbb: \"ncaab\",\n      \"college basketball\": \"ncaab\",\n      \"ncaa basketball\": \"ncaab\",\n      ncaam: \"ncaab\",\n    };\n    if (leagueNormMap[sport]) {\n      sport = leagueNormMap[sport];\n    }\n\n    const epochTime =\n      pick.gameDate && pick.gameTime\n        ? new Date(`${pick.gameDate} ${pick.gameTime}`).getTime()\n        : Date.now();\n\n    row.setAttribute(\"data-pick-id\", pick.id || `pick-${idx}`);\n    row.setAttribute(\"data-row-id\", pick.id || `pick-${idx}`); // For LiveScoreUpdater\n    row.setAttribute(\"data-league\", sport);\n    row.setAttribute(\"data-sport\", sport); // For LiveScoreUpdater\n    row.setAttribute(\"data-epoch\", epochTime);\n    row.setAttribute(\"data-book\", sportsbook.toLowerCase());\n    row.setAttribute(\"data-away\", awayTeam.toLowerCase());\n    row.setAttribute(\"data-home\", homeTeam.toLowerCase());\n    row.setAttribute(\"data-away-team\", awayTeam); // For LiveScoreUpdater\n    row.setAttribute(\"data-home-team\", homeTeam); // For LiveScoreUpdater\n    row.setAttribute(\"data-away-abbr\", awayInfo.abbr || \"\"); // For LiveScoreUpdater\n    row.setAttribute(\"data-home-abbr\", homeInfo.abbr || \"\"); // For LiveScoreUpdater\n    row.setAttribute(\"data-pick-type\", pick.pickType || \"spread\");\n    row.setAttribute(\"data-pick-team\", pick.pickTeam || \"\"); // For LiveScoreUpdater\n    row.setAttribute(\"data-pick-text\", selection);\n    row.setAttribute(\"data-line\", pick.line || \"\"); // For LiveScoreUpdater\n    row.setAttribute(\"data-segment\", segmentKey);\n    row.setAttribute(\"data-odds\", pick.odds || \"\");\n    row.setAttribute(\"data-risk\", pick.risk || \"\");\n    row.setAttribute(\"data-win\", pick.win || \"\");\n    row.setAttribute(\"data-status\", status);\n    row.setAttribute(\"data-game-id\", pick.gameId || \"\"); // For LiveScoreUpdater\n    row.classList.add(\"group-start\");\n\n    const isSingleTeamBet = !pick.homeTeam || homeTeam === \"TBD\";\n\n    const awayLogoHtml = awayInfo.logo\n      ? `<img src=\"${awayInfo.logo}\" class=\"team-logo\" alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">`\n      : \"\";\n    const homeLogoHtml = homeInfo.logo\n      ? `<img src=\"${homeInfo.logo}\" class=\"team-logo\" alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">`\n      : \"\";\n    const pickLogoHtml = pickTeamInfo.logo\n      ? `<img src=\"${pickTeamInfo.logo}\" class=\"pick-team-logo\" alt=\"${pickTeamInfo.abbr}\" onerror=\"this.style.display='none'\">`\n      : \"\";\n\n    const matchupHtml = isSingleTeamBet\n      ? `<div class=\"matchup-cell\">\n                    <div class=\"team-line\">\n                        ${awayLogoHtml}\n                        <div class=\"team-name-wrapper\">\n                            <span class=\"team-name-full\">${awayTeam}</span>\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\n                        </div>\n                    </div>\n                </div>`\n      : `<div class=\"matchup-cell\">\n                    <div class=\"team-line\">\n                        ${awayLogoHtml}\n                        <div class=\"team-name-wrapper\">\n                            <span class=\"team-name-full\">${awayTeam}</span>\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\n                        </div>\n                    </div>\n                    <div class=\"vs-divider\">vs</div>\n                    <div class=\"team-line\">\n                        ${homeLogoHtml}\n                        <div class=\"team-name-wrapper\">\n                            <span class=\"team-name-full\">${homeTeam}</span>\n                            <span class=\"team-record\">${homeRecord ? `(${homeRecord})` : \"\"}</span>\n                        </div>\n                    </div>\n                </div>`;\n\n    // Sport-specific box score layout\n    // NBA/NFL: Q1, Q2, Q3, Q4, T (quarters)\n    // NCAAB/NCAAF: 1H, 2H, T (halves)\n    const useQuarters = sport === \"NBA\" || sport === \"NFL\";\n    const boxscoreClass = useQuarters ? \"boxscore-quarters\" : \"boxscore-halves\";\n\n    let awayBoxRow, homeBoxRow, headerCells;\n\n    if (useQuarters) {\n      headerCells = `\n                <div class=\"boxscore-cell header-cell\">Q1</div>\n                <div class=\"boxscore-cell header-cell\">Q2</div>\n                <div class=\"boxscore-cell header-cell\">Q3</div>\n                <div class=\"boxscore-cell header-cell\">Q4</div>\n                <div class=\"boxscore-cell header-cell\">T</div>`;\n\n      awayBoxRow = `\n                <div class=\"boxscore-row\">\n                    <div class=\"boxscore-cell team-cell\">\n                        <div class=\"boxscore-team\">\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\n                        </div>\n                    </div>\n                    <div class=\"boxscore-cell period-cell q1-away\"></div>\n                    <div class=\"boxscore-cell period-cell q2-away\"></div>\n                    <div class=\"boxscore-cell period-cell q3-away\"></div>\n                    <div class=\"boxscore-cell period-cell q4-away\"></div>\n                    <div class=\"boxscore-cell total total-away\"></div>\n                </div>`;\n\n      homeBoxRow = `\n                <div class=\"boxscore-row\">\n                    <div class=\"boxscore-cell team-cell\">\n                        <div class=\"boxscore-team\">\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\n                        </div>\n                    </div>\n                    <div class=\"boxscore-cell period-cell q1-home\"></div>\n                    <div class=\"boxscore-cell period-cell q2-home\"></div>\n                    <div class=\"boxscore-cell period-cell q3-home\"></div>\n                    <div class=\"boxscore-cell period-cell q4-home\"></div>\n                    <div class=\"boxscore-cell total total-home\"></div>\n                </div>`;\n    } else {\n      // College basketball/football - halves\n      headerCells = `\n                <div class=\"boxscore-cell header-cell\">1H</div>\n                <div class=\"boxscore-cell header-cell\">2H</div>\n                <div class=\"boxscore-cell header-cell\">T</div>`;\n\n      awayBoxRow = `\n                <div class=\"boxscore-row\">\n                    <div class=\"boxscore-cell team-cell\">\n                        <div class=\"boxscore-team\">\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\n                        </div>\n                    </div>\n                    <div class=\"boxscore-cell period-cell h1-away\"></div>\n                    <div class=\"boxscore-cell period-cell h2-away\"></div>\n                    <div class=\"boxscore-cell total total-away\"></div>\n                </div>`;\n\n      homeBoxRow = `\n                <div class=\"boxscore-row\">\n                    <div class=\"boxscore-cell team-cell\">\n                        <div class=\"boxscore-team\">\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\n                        </div>\n                    </div>\n                    <div class=\"boxscore-cell period-cell h1-home\"></div>\n                    <div class=\"boxscore-cell period-cell h2-home\"></div>\n                    <div class=\"boxscore-cell total total-home\"></div>\n                </div>`;\n    }\n\n    // Determine appropriate status for boxscore header\n    const pickStatus = pick.status || \"pending\";\n    let statusText = pick.gameTime || \"Pending\";\n    let statusClass = \"countdown\";\n\n    if (\n      pickStatus === \"final\" ||\n      pickStatus === \"win\" ||\n      pickStatus === \"loss\" ||\n      pickStatus === \"push\"\n    ) {\n      statusText = \"Final\";\n      statusClass = \"final\";\n    } else if (\n      pickStatus === \"live\" ||\n      pickStatus === \"on-track\" ||\n      pickStatus === \"at-risk\"\n    ) {\n      statusText = pick.gameTime || \"Live\";\n      statusClass = \"live\";\n    } else if (pickStatus === \"pending\") {\n      statusText = pick.gameTime || \"Pending\";\n      statusClass = \"countdown\";\n    }\n\n    const boxscoreHtml = `\n            <div class=\"boxscore-container\" data-live-ready=\"false\">\n                <div class=\"compact-boxscore\">\n                    <div class=\"boxscore-grid ${boxscoreClass}\">\n                        <div class=\"boxscore-row header\">\n                            <div class=\"boxscore-cell header-cell game-time-cell\">\n                                <span class=\"game-time-status ${statusClass}\">${statusText}</span>\n                            </div>\n                            ${headerCells}\n                        </div>\n                        ${awayBoxRow}\n                        ${isSingleTeamBet ? \"\" : homeBoxRow}\n                    </div>\n                </div>\n            </div>`;\n\n    // Calculate hit/miss and won/lost values - both show dollar amounts\n    const formatWonLost = (amount) => `$${Math.abs(amount).toLocaleString()}`;\n    const hitMissValue =\n      status === \"win\"\n        ? `+${formatWonLost(pick.win || 0)}`\n        : status === \"loss\"\n          ? `-${formatWonLost(pick.risk || 0)}`\n          : status === \"push\"\n            ? \"$0\"\n            : \"\";\n    const wonLostValue = hitMissValue; // Same value for both columns\n\n    row.innerHTML = `\n            <td data-label=\"Date & Time\">\n                <div class=\"cell-date\">${formatDateValue(pick.gameDate)}</div>\n                <div class=\"cell-time\">${pick.gameTime || \"TBD\"}</div>\n                <select class=\"sportsbook-dropdown\" data-pick-id=\"${pick.id}\" aria-label=\"Change sportsbook for this pick\">\n                    <option value=\"\">No Book</option>\n                    <option value=\"hulkwager\" ${sportsbook === \"hulkwager\" ? \"selected\" : \"\"}>Hulk Wager</option>\n                    <option value=\"bombay711\" ${sportsbook === \"bombay711\" ? \"selected\" : \"\"}>Bombay 711</option>\n                    <option value=\"kingofsports\" ${sportsbook === \"kingofsports\" ? \"selected\" : \"\"}>King of Sports</option>\n                    <option value=\"primetimeaction\" ${sportsbook === \"primetimeaction\" ? \"selected\" : \"\"}>Prime Time Action</option>\n                    <option value=\"other\" ${sportsbook === \"other\" ? \"selected\" : \"\"}>Other</option>\n                </select>\n            </td>\n            <td class=\"center\" data-label=\"League\">\n                ${renderLeagueCell(sport)}\n            </td>\n            <td data-label=\"Matchup\">\n                ${matchupHtml}\n            </td>\n            <td class=\"center\" data-label=\"Segment\">\n                <span class=\"game-segment\" data-segment=\"${segmentKey}\">${segmentLabel}</span>\n            </td>\n            <td data-label=\"Pick\">\n                <div class=\"pick-cell\">\n                    <div class=\"pick-team-info\">\n                        ${pickLogoHtml}\n                        <span class=\"pick-team-abbr\">${pickTeamInfo.abbr || pick.pickTeam}</span>\n                    </div>\n                    <div class=\"pick-details\">\n                        <span class=\"pick-line\">${selection || pick.line || \"\"}</span>\n                        <span class=\"pick-odds\">(${pick.odds || \"-110\"})</span>\n                    </div>\n                    ${pick.edge ? `<div class=\"pick-edge\"><span class=\"edge-badge\">+${parseFloat(pick.edge).toFixed(1)}%</span></div>` : \"\"}\n                </div>\n            </td>\n            <td class=\"center\" data-label=\"Risk / Win\">\n                <div class=\"currency-combined currency-stacked editable-amounts\">\n                    <div class=\"currency-risk-row\">\n                        <input type=\"number\"\n                               class=\"editable-risk\"\n                               value=\"${Math.round(pick.risk || 50000)}\"\n                               data-pick-id=\"${pick.id}\"\n                               aria-label=\"Risk amount\"\n                               min=\"0\"\n                               step=\"1000\">\n                        <span class=\"currency-separator\"> /</span>\n                    </div>\n                    <input type=\"number\"\n                           class=\"editable-win\"\n                           value=\"${Math.round(pick.win || 50000)}\"\n                           data-pick-id=\"${pick.id}\"\n                           aria-label=\"Win amount\"\n                           min=\"0\"\n                           step=\"1000\">\n                </div>\n            </td>\n            <td class=\"center\" data-label=\"Box Score\">\n                ${boxscoreHtml}\n            </td>\n            <td class=\"center\" data-label=\"Status\">\n                <span class=\"status-badge\" data-status=\"${status}\" data-blurb=\"${generateStatusBlurb(status, pick)}\">${formatStatusLabel(status, pick)}</span>\n            </td>\n            <td class=\"center\" data-label=\"Hit / Miss\">\n                <span class=\"hit-miss-value\" data-status=\"${status}\">${hitMissValue}</span>\n            </td>\n            <td class=\"center\" data-label=\"$ Won / Lost\">\n                <span class=\"won-lost-value\" data-status=\"${status}\">${wonLostValue}</span>\n                <button class=\"delete-pick-btn\" onclick=\"event.stopPropagation(); window.LocalPicksManager.delete('${pick.id}')\" title=\"Remove pick from dashboard\">\u2715</button>\n            </td>\n        `;\n\n    return row;\n  }\n\n  // ========== RE-ENRICH EXISTING PICKS ==========\n\n  async function reEnrichExistingPicks() {\n    const picks = getAllPicks();\n    if (picks.length === 0) return;\n\n    // Check if any picks are missing records\n    const needsEnrichment = picks.some((p) => !p.awayRecord && !p.homeRecord);\n    if (!needsEnrichment) {\n      console.log(\"\u2705 All picks already have records\");\n      return;\n    }\n\n    console.log(\"\uD83D\uDD04 Re-enriching existing picks with ESPN data...\");\n\n    // Wait for AutoGameFetcher to be ready\n    let attempts = 0;\n    while (!window.AutoGameFetcher && attempts < 10) {\n      await new Promise((r) => setTimeout(r, 200));\n      attempts++;\n    }\n\n    if (!window.AutoGameFetcher) {\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available for re-enrichment\");\n      return;\n    }\n\n    // Fetch today's games\n    try {\n      await window.AutoGameFetcher.fetchTodaysGames();\n      const todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\n\n      if (todaysGames.length === 0) {\n        console.log(\"\uD83D\uDCED No games today to enrich with\");\n        return;\n      }\n\n      console.log(`\uD83C\uDFC0 Found ${todaysGames.length} games for enrichment`);\n\n      let updated = false;\n      const enrichedPicks = picks.map((pick) => {\n        // Skip if already has records\n        if (pick.awayRecord || pick.homeRecord) return pick;\n\n        const teamToFind = pick.pickTeam || pick.awayTeam;\n        if (!teamToFind) return pick;\n\n        const game = window.AutoGameFetcher.findGame(teamToFind);\n        if (game) {\n          console.log(\n            `\uD83D\uDCDD Enriching: ${pick.pickTeam} -> ${game.awayTeam} (${game.awayRecord}) vs ${game.homeTeam} (${game.homeRecord})`,\n          );\n          updated = true;\n          return {\n            ...pick,\n            awayTeam: game.awayTeam,\n            homeTeam: game.homeTeam,\n            awayRecord: game.awayRecord || \"\",\n            homeRecord: game.homeRecord || \"\",\n            gameTime: pick.gameTime || game.time,\n            gameDate: pick.gameDate || game.date,\n            sport: pick.sport || game.sport,\n            gameStatus: game.status,\n          };\n        }\n        return pick;\n      });\n\n      if (updated) {\n        savePicks(enrichedPicks);\n        console.log(\"\u2705 Picks re-enriched with team records\");\n        refreshPicksTable();\n      }\n    } catch (e) {\n      console.error(\"Error re-enriching picks:\", e);\n    }\n  }\n\n  // ========== DEMO PICKS REMOVED (v33.00.0 Production) ==========\n  // Demo picks functionality has been completely removed for production.\n  // Real picks come from weekly-lineup page and model APIs only.\n\n  // ========== CLEANUP SAMPLE DATA ==========\n\n  /**\n   * Clean up stale pending picks older than specified days\n   * Runs once per day to prevent accumulation of old picks\n   */\n  function cleanupStalePicks(daysOld = 7) {\n    const LAST_CLEANUP_KEY = \"gbsv_last_stale_cleanup\";\n    const lastCleanup = localStorage.getItem(LAST_CLEANUP_KEY);\n    const today = new Date().toDateString();\n\n    // Only run once per day\n    if (lastCleanup === today) {\n      return;\n    }\n\n    const picks = getAllPicks();\n    if (picks.length === 0) {\n      localStorage.setItem(LAST_CLEANUP_KEY, today);\n      return;\n    }\n\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n    cutoffDate.setHours(0, 0, 0, 0);\n\n    const freshPicks = picks.filter((pick) => {\n      const status = (pick.status || \"pending\").toLowerCase();\n\n      // Keep all settled picks (won, lost, push) regardless of age\n      if ([\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status)) {\n        return true;\n      }\n\n      // For pending/live picks, check age\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\n      let pickDate = null;\n\n      try {\n        pickDate = dateStr ? new Date(dateStr) : null;\n      } catch {}\n\n      // Keep if we can't determine date (safer to keep)\n      if (!pickDate || isNaN(pickDate.getTime())) {\n        return true;\n      }\n\n      // Remove if older than cutoff\n      return pickDate >= cutoffDate;\n    });\n\n    if (freshPicks.length < picks.length) {\n      const removed = picks.length - freshPicks.length;\n      console.log(\n        `\uD83D\uDDD1\uFE0F [Stale Cleanup] Removed ${removed} old pending picks (>${daysOld}d), kept ${freshPicks.length} picks`,\n      );\n      savePicks(freshPicks);\n    }\n\n    localStorage.setItem(LAST_CLEANUP_KEY, today);\n  }\n\n  function cleanupSampleData() {\n    const CLEANUP_VERSION_KEY = \"gbsv_cleanup_v5\"; // Bump version to re-run cleanup\n\n    // Only run cleanup once per browser (per version)\n    if (localStorage.getItem(CLEANUP_VERSION_KEY)) {\n      return;\n    }\n\n    // Clear the old demo import flag so cleanup runs fresh\n    localStorage.removeItem(\"gbsv_demo_imported_v1\");\n    localStorage.removeItem(\"gbsv_cleanup_v1\");\n\n    const picks = getAllPicks();\n    if (picks.length === 0) {\n      localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\n      return;\n    }\n\n    const sampleSources = new Set([\n      \"demo\",\n      \"sample\",\n      \"mock\",\n      \"placeholder\",\n      \"fake\",\n      \"test\",\n      \"example\",\n    ]);\n\n    // Filter out ONLY explicitly marked demo/sample picks - keep everything else\n    const realPicks = picks.filter((pick) => {\n      // Remove if it has explicit demo/sample markers\n      if (pick.isDemo === true || pick.isSample === true) {\n        return false;\n      }\n      // Remove if source is explicitly marked as demo/fake\n      const source = String(pick.source || \"\").toLowerCase();\n      if (sampleSources.has(source)) {\n        return false;\n      }\n      // Remove Demo Book picks\n      const sportsbook = String(pick.sportsbook || \"\").toLowerCase();\n      if (\n        sportsbook === \"demo book\" ||\n        /(demo|sample|mock|placeholder|fake|test|example)/.test(sportsbook)\n      ) {\n        return false;\n      }\n      // KEEP everything else - don't be aggressive with cleanup\n      return true;\n    });\n\n    if (realPicks.length < picks.length) {\n      const removed = picks.length - realPicks.length;\n      console.log(\n        `[Cleanup] Removed ${removed} demo picks, kept ${realPicks.length} real picks`,\n      );\n      savePicks(realPicks);\n    }\n\n    localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\n  }\n\n  // ========== INITIALIZE ==========\n\n  /**\n   * Check if we're on the dashboard page (not weekly-lineup or other pages)\n   */\n  function isDashboardPage() {\n    // Check for the page-weekly-lineup class on body\n    if (document.body.classList.contains(\"page-weekly-lineup\")) {\n      return false;\n    }\n    // Check the URL path\n    const path = window.location.pathname.toLowerCase();\n    if (path.includes(\"weekly-lineup\") || path.includes(\"odds-market\")) {\n      return false;\n    }\n    // Default to true if on dashboard.html or dashboard-like page\n    return true;\n  }\n\n  function initialize() {\n    console.log(\n      \"\uD83C\uDFE0 LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)\",\n    );\n\n    // Clean up any legacy sample/demo data (runs once)\n    cleanupSampleData();\n\n    // Clean up stale pending picks (runs daily)\n    cleanupStalePicks(7); // Remove pending picks older than 7 days\n\n    // NO DEMO DATA: Production version uses only real picks from weekly-lineup\n    // importTodaysPicks(); -- DISABLED: No sample/placeholder data in production\n\n    // Override global functions\n    window.processAndSavePicks = parseAndAddPicks;\n    window.loadUploadedPicks = refreshPicksTable;\n\n    // Only auto-refresh table on dashboard page (not weekly-lineup)\n    if (isDashboardPage()) {\n      // Load existing picks first (shows immediately)\n      refreshPicksTable();\n\n      // Initialize table sorting\n      if (\n        window.PicksSortManager &&\n        typeof window.PicksSortManager.initSorting === \"function\"\n      ) {\n        setTimeout(() => window.PicksSortManager.initSorting(), 100);\n      }\n\n      // Then re-enrich with ESPN data (async, updates when ready)\n      setTimeout(() => reEnrichExistingPicks(), 500);\n    } else {\n      console.log(\n        \"\uD83C\uDFE0 LocalPicksManager: Skipping auto-refresh (not on dashboard page)\",\n      );\n    }\n  }\n\n  // ========== FILTERING HELPERS (read-only, don't modify storage) ==========\n\n  /**\n   * Get active picks (pending or live status)\n   * These are picks that haven't been settled yet\n   */\n  function getActivePicks() {\n    const picks = getAllPicks();\n    return picks.filter((pick) => {\n      const status = (pick.status || \"pending\").toLowerCase();\n      return (\n        status === \"pending\" ||\n        status === \"live\" ||\n        status === \"on-track\" ||\n        status === \"at-risk\"\n      );\n    });\n  }\n\n  /**\n   * Get settled picks (won, lost, push)\n   */\n  function getSettledPicks() {\n    const picks = getAllPicks();\n    return picks.filter((pick) => {\n      const status = (pick.status || \"pending\").toLowerCase();\n      return (\n        status === \"win\" ||\n        status === \"won\" ||\n        status === \"loss\" ||\n        status === \"lost\" ||\n        status === \"push\"\n      );\n    });\n  }\n\n  /**\n   * Get picks by date range (doesn't delete, just filters)\n   * @param {Date|null} startDate - Start of range (inclusive)\n   * @param {Date|null} endDate - End of range (inclusive)\n   */\n  function getPicksByDateRange(startDate = null, endDate = null) {\n    const picks = getAllPicks();\n    if (!startDate && !endDate) return picks;\n\n    return picks.filter((pick) => {\n      const dateStr = pick.gameDate || pick.createdAt || pick.date || \"\";\n      if (!dateStr) return true; // Include if no date info\n\n      try {\n        const pickDate = new Date(dateStr);\n        if (startDate && pickDate < startDate) return false;\n        if (endDate && pickDate > endDate) return false;\n        return true;\n      } catch {\n        return true;\n      }\n    });\n  }\n\n  /**\n   * Get picks for today only\n   */\n  function getTodaysPicks() {\n    const now = new Date();\n    const startOfDay = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n    );\n    const endOfDay = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n      23,\n      59,\n      59,\n      999,\n    );\n    return getPicksByDateRange(startOfDay, endOfDay);\n  }\n\n  /**\n   * Archive old settled picks (move to separate storage key for analytics)\n   * Only call this manually or on a schedule, not on every page load\n   * @param {number} daysOld - Archive picks older than this many days (default 30)\n   */\n  function archiveOldPicks(daysOld = 30) {\n    const picks = getAllPicks();\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\n    cutoffDate.setHours(0, 0, 0, 0);\n\n    const toArchive = [];\n    const toKeep = [];\n\n    picks.forEach((pick) => {\n      const status = (pick.status || \"pending\").toLowerCase();\n      const isSettled = [\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status);\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\n      let pickDate = null;\n\n      try {\n        pickDate = dateStr ? new Date(dateStr) : null;\n      } catch {}\n\n      // Archive if: settled AND older than cutoff\n      if (isSettled && pickDate && pickDate < cutoffDate) {\n        toArchive.push(pick);\n      } else {\n        toKeep.push(pick);\n      }\n    });\n\n    if (toArchive.length > 0) {\n      // Save archived picks to separate key\n      const existingArchive = JSON.parse(\n        localStorage.getItem(\"gbsv_picks_archive\") || \"[]\",\n      );\n      localStorage.setItem(\n        \"gbsv_picks_archive\",\n        JSON.stringify([...existingArchive, ...toArchive]),\n      );\n      savePicks(toKeep);\n      console.log(\n        `\uD83D\uDCE6 [LocalPicksManager] Archived ${toArchive.length} old settled picks`,\n      );\n    }\n\n    return toArchive.length;\n  }\n\n  // Auto-initialize\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", initialize);\n  } else {\n    initialize();\n  }\n\n  // Export API\n  window.LocalPicksManager = {\n    getAll: getAllPicks,\n    getActive: getActivePicks,\n    getSettled: getSettledPicks,\n    getByDateRange: getPicksByDateRange,\n    getToday: getTodaysPicks,\n    add: addPicks,\n    parseAndAdd: parseAndAddPicks,\n    clear: clearPicks,\n    delete: deletePick,\n    updateStatus: updatePickStatus,\n    refresh: refreshPicksTable,\n    reEnrich: reEnrichExistingPicks,\n    getUnitMultiplier,\n    setUnitMultiplier,\n    archiveOldPicks,\n    cleanupStale: cleanupStalePicks, // Manually trigger stale picks cleanup\n    // Debug helpers\n    debug: () => {\n      const picks = getAllPicks();\n      console.log(\"=== LocalPicksManager Debug ===\");\n      console.log(`Total picks in localStorage: ${picks.length}`);\n      console.log(\"Storage key:\", STORAGE_KEY);\n      console.log(\n        \"Raw localStorage:\",\n        localStorage.getItem(STORAGE_KEY)?.substring(0, 500),\n      );\n      if (picks.length > 0) {\n        console.log(\"Sample pick:\", JSON.stringify(picks[0], null, 2));\n      }\n      const tbody = document.getElementById(\"picks-tbody\");\n      console.log(\"Table element found:\", !!tbody);\n      console.log(\"Table rows:\", tbody?.children?.length || 0);\n      return picks;\n    },\n    forceRefresh: () => {\n      console.log(\"Force refreshing picks table...\");\n      refreshPicksTable();\n      return getAllPicks().length;\n    },\n  };\n\n  console.log(\"\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)\");\n})();\n\n\n/* === dashboard/js/dashboard-init.js === */\n/**\r\n * Dashboard Initialization Script\r\n * Handles dashboard-specific interactions like KPI tile flipping and refresh logic.\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const DashboardInit = {\r\n        init() {\r\n            console.log('Initializing Dashboard UI...');\r\n            this.initKPITiles();\r\n            this.initRefreshButton();\r\n            this.initBackToTop();\r\n        },\r\n\r\n        /**\r\n         * Initialize KPI Tile Flip Interaction\r\n         */\r\n        initKPITiles() {\r\n            const tiles = document.querySelectorAll('.kpi-tile[data-action=\"flip-tile\"]');\r\n            \r\n            tiles.forEach(tile => {\r\n                // Click handler\r\n                tile.addEventListener('click', () => {\r\n                    this.flipTile(tile);\r\n                });\r\n\r\n                // Keyboard handler (Enter/Space)\r\n                tile.addEventListener('keydown', (e) => {\r\n                    if (e.key === 'Enter' || e.key === ' ') {\r\n                        e.preventDefault();\r\n                        this.flipTile(tile);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Flip a KPI tile to show the other side\r\n         */\r\n        flipTile(tile) {\r\n            const layers = tile.querySelectorAll('.kpi-tile-layer');\r\n            if (layers.length < 2) return;\r\n\r\n            layers.forEach(layer => {\r\n                layer.classList.toggle('active');\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Initialize Refresh Button\r\n         */\r\n        initRefreshButton() {\r\n            const refreshBtn = document.querySelector('.refresh-btn');\r\n            if (refreshBtn) {\r\n                refreshBtn.addEventListener('click', () => {\r\n                    this.handleRefresh(refreshBtn);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handle Dashboard Refresh\r\n         */\r\n        handleRefresh(btn) {\r\n            // Add spinning animation\r\n            btn.classList.add('spinning');\r\n            \r\n            // Call data refresh if available\r\n            if (window.ActivePicks && typeof window.ActivePicks.refreshData === 'function') {\r\n                window.ActivePicks.refreshData();\r\n            } else {\r\n                // Fallback reload\r\n                window.location.reload();\r\n            }\r\n\r\n            // Remove class after timeout (if page doesn't reload)\r\n            setTimeout(() => {\r\n                btn.classList.remove('spinning');\r\n            }, 1000);\r\n        },\r\n\r\n        /**\r\n         * Initialize Back to Top Button\r\n         */\r\n        initBackToTop() {\r\n            const backToTopBtn = document.getElementById('back-to-top');\r\n            if (!backToTopBtn) return;\r\n\r\n            window.addEventListener('scroll', () => {\r\n                if (window.scrollY > 300) {\r\n                    backToTopBtn.classList.add('visible');\r\n                } else {\r\n                    backToTopBtn.classList.remove('visible');\r\n                }\r\n            });\r\n\r\n            backToTopBtn.addEventListener('click', () => {\r\n                window.scrollTo({\r\n                    top: 0,\r\n                    behavior: 'smooth'\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => DashboardInit.init());\r\n    } else {\r\n        DashboardInit.init();\r\n    }\r\n\r\n})();\r\n\n\n/* === dashboard/js/dashboard-filter-pills.js === */\n/**\r\n * Dashboard Filter Pills Handler\r\n * Handles filter pill clicks and updates filter chips display\r\n * Similar to weekly-lineup filter logic\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    let activeFilters = {\r\n        leagues: [], // Multi-select for leagues\r\n        segment: '',\r\n        pick: '',\r\n        status: ''\r\n    };\r\n\r\n    // Expose activeFilters for external access (e.g., FilterStatePersistence)\r\n    window.DashboardFilterPills = window.DashboardFilterPills || {};\r\n    Object.defineProperty(window.DashboardFilterPills, 'activeFilters', {\r\n        get: () => activeFilters,\r\n        set: (value) => { activeFilters = value || { leagues: [], segment: '', pick: '', status: '' }; }\r\n    });\r\n\r\n    /**\r\n     * Initialize filter pill handlers\r\n     */\r\n    function initializeFilterPills() {\r\n\r\n        const toolbar = document.getElementById('filter-toolbar');\r\n        if (!toolbar) {\r\n            console.warn('[DashboardFilterPills] Filter toolbar not found');\r\n            return;\r\n        }\r\n\r\n        // League filter pills (multi-select) - ensure they don't trigger dropdowns\r\n        document.querySelectorAll('.ft-pill.ft-league').forEach(pill => {\r\n            pill.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                \r\n                const leagueValue = this.getAttribute('data-league');\r\n\r\n                // Ensure no dropdowns are open\r\n                toolbar.querySelectorAll('.ft-dropdown-menu').forEach(m => m.classList.remove('open'));\r\n                toolbar.querySelectorAll('.ft-dropdown-btn').forEach(b => b.classList.remove('open'));\r\n\r\n                // Toggle active state\r\n                this.classList.toggle('active');\r\n\r\n                // Update active leagues array\r\n                activeFilters.leagues = [];\r\n                document.querySelectorAll('.ft-pill.ft-league.active').forEach(pill => {\r\n                    const value = pill.getAttribute('data-league');\r\n                    if (value && value !== 'all') {\r\n                        activeFilters.leagues.push(value.toLowerCase());\r\n                    }\r\n                });\r\n\r\n                // If \"All\" is clicked and active, clear other selections\r\n                if (leagueValue === 'all' && this.classList.contains('active')) {\r\n                    document.querySelectorAll('.ft-pill.ft-league').forEach(p => {\r\n                        if (p !== this) p.classList.remove('active');\r\n                    });\r\n                    activeFilters.leagues = [];\r\n                } else if (leagueValue !== 'all') {\r\n                    // If a specific league is clicked, remove \"All\"\r\n                    document.querySelector('.ft-pill.ft-league[data-league=\"all\"]')?.classList.remove('active');\r\n                }\r\n\r\n                applyFilters();\r\n            });\r\n        });\r\n\r\n        // Dropdown toggle logic - ONLY for dropdown buttons, not pills\r\n        const dropdowns = toolbar.querySelectorAll('.ft-dropdown');\r\n        dropdowns.forEach(dropdown => {\r\n            const btn = dropdown.querySelector('.ft-dropdown-btn');\r\n            const menu = dropdown.querySelector('.ft-dropdown-menu');\r\n            if (!btn || !menu) return;\r\n            \r\n            // Only attach to dropdown buttons, explicitly exclude pills\r\n            btn.addEventListener('click', (e) => {\r\n                // Prevent if clicking on a pill\r\n                if (e.target.closest('.ft-pill')) {\r\n                    return;\r\n                }\r\n                \r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                \r\n                // Close all other dropdowns\r\n                dropdowns.forEach(d => {\r\n                    if (d !== dropdown) {\r\n                        d.querySelector('.ft-dropdown-menu')?.classList.remove('open');\r\n                        d.querySelector('.ft-dropdown-btn')?.classList.remove('open');\r\n                    }\r\n                });\r\n                // Toggle this dropdown\r\n                menu.classList.toggle('open');\r\n                btn.classList.toggle('open');\r\n            });\r\n        });\r\n\r\n        // Close dropdowns when clicking outside - but not on league pills\r\n        document.addEventListener('click', (e) => {\r\n            // Don't close if clicking on a league pill\r\n            if (e.target.closest('.ft-pill.ft-league')) {\r\n                return;\r\n            }\r\n            \r\n            // Close dropdowns if clicking outside dropdown containers\r\n            if (!e.target.closest('.ft-dropdown')) {\r\n                toolbar.querySelectorAll('.ft-dropdown-menu').forEach(m => m.classList.remove('open'));\r\n                toolbar.querySelectorAll('.ft-dropdown-btn').forEach(b => b.classList.remove('open'));\r\n            }\r\n        });\r\n\r\n        // Segment dropdown items (exclusive selection)\r\n        toolbar.querySelectorAll('#segment-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n            item.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                \r\n                const segmentValue = this.getAttribute('data-v');\r\n\r\n                // Close dropdown\r\n                const menu = this.closest('.ft-dropdown-menu');\r\n                const dropdown = menu?.closest('.ft-dropdown');\r\n                if (menu) menu.classList.remove('open');\r\n                if (dropdown) dropdown.querySelector('.ft-dropdown-btn')?.classList.remove('open');\r\n\r\n                // Exclusive selection - remove active from siblings\r\n                toolbar.querySelectorAll('#segment-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                this.classList.add('active');\r\n\r\n                // Update button text\r\n                const btn = document.getElementById('segment-dropdown-btn');\r\n                const labels = {\r\n                    'all': 'Segment',\r\n                    'full': 'Full Game',\r\n                    '1h': '1st Half',\r\n                    '2h': '2nd Half'\r\n                };\r\n                btn.textContent = `${labels[segmentValue] || 'Segment'} \u25BE`;\r\n\r\n                activeFilters.segment = segmentValue === 'all' ? '' : segmentValue;\r\n                applyFilters();\r\n            });\r\n        });\r\n\r\n        // Pick type dropdown items (exclusive selection)\r\n        toolbar.querySelectorAll('#pick-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n            item.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                \r\n                const pickValue = this.getAttribute('data-v');\r\n\r\n                // Close dropdown\r\n                const menu = this.closest('.ft-dropdown-menu');\r\n                const dropdown = menu?.closest('.ft-dropdown');\r\n                if (menu) menu.classList.remove('open');\r\n                if (dropdown) dropdown.querySelector('.ft-dropdown-btn')?.classList.remove('open');\r\n\r\n                // Exclusive selection\r\n                toolbar.querySelectorAll('#pick-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                this.classList.add('active');\r\n\r\n                // Update button text\r\n                const btn = document.getElementById('pick-dropdown-btn');\r\n                const labels = {\r\n                    'all': 'Pick Type',\r\n                    'spread': 'Spread',\r\n                    'ml': 'Moneyline',\r\n                    'total': 'Total',\r\n                    'tt': 'Team Total'\r\n                };\r\n                btn.textContent = `${labels[pickValue] || 'Pick Type'} \u25BE`;\r\n\r\n                activeFilters.pick = pickValue === 'all' ? '' : pickValue;\r\n                applyFilters();\r\n            });\r\n        });\r\n\r\n        // Status dropdown items (exclusive selection)\r\n        toolbar.querySelectorAll('#status-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n            item.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                e.stopImmediatePropagation();\r\n                \r\n                const statusValue = this.getAttribute('data-v');\r\n\r\n                // Close dropdown\r\n                const menu = this.closest('.ft-dropdown-menu');\r\n                const dropdown = menu?.closest('.ft-dropdown');\r\n                if (menu) menu.classList.remove('open');\r\n                if (dropdown) dropdown.querySelector('.ft-dropdown-btn')?.classList.remove('open');\r\n\r\n                // Exclusive selection\r\n                toolbar.querySelectorAll('#status-dropdown-menu .ft-dropdown-item').forEach(i => i.classList.remove('active'));\r\n                this.classList.add('active');\r\n\r\n                // Update button text\r\n                const btn = document.getElementById('status-dropdown-btn');\r\n                const labels = {\r\n                    'all': 'Status',\r\n                    'pending': 'Pending',\r\n                    'win': 'Won',\r\n                    'loss': 'Lost',\r\n                    'push': 'Push'\r\n                };\r\n                btn.textContent = `${labels[statusValue] || 'Status'} \u25BE`;\r\n\r\n                activeFilters.status = statusValue === 'all' ? '' : statusValue;\r\n                applyFilters();\r\n            });\r\n        });\r\n\r\n        // Clear button\r\n        const clearBtn = document.getElementById('ft-clear');\r\n        if (clearBtn) {\r\n            clearBtn.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                clearAllFilters();\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Normalize segment value for comparison\r\n     * Row values: 'full-game', '1st-half', '2nd-half'\r\n     * Filter values: 'full', '1h', '2h'\r\n     */\r\n    function normalizeSegmentForFilter(rowSegment) {\r\n        const seg = (rowSegment || '').toLowerCase().trim();\r\n        if (seg === 'full-game' || seg === 'full game' || seg === 'full') return 'full';\r\n        if (seg === '1st-half' || seg === '1st half' || seg === '1h' || seg.includes('1st')) return '1h';\r\n        if (seg === '2nd-half' || seg === '2nd half' || seg === '2h' || seg.includes('2nd')) return '2h';\r\n        return seg;\r\n    }\r\n\r\n    /**\r\n     * Normalize pick type for comparison\r\n     * Row values: 'spread', 'total', 'moneyline'\r\n     * Filter values: 'spread', 'ml', 'total', 'tt'\r\n     */\r\n    function normalizePickTypeForFilter(rowPickType) {\r\n        const pt = (rowPickType || '').toLowerCase().trim();\r\n        if (pt === 'moneyline' || pt === 'ml') return 'ml';\r\n        if (pt === 'spread') return 'spread';\r\n        if (pt === 'total' || pt === 'over' || pt === 'under') return 'total';\r\n        if (pt === 'team-total' || pt === 'team total' || pt === 'tt') return 'tt';\r\n        return pt;\r\n    }\r\n\r\n    /**\r\n     * Sync activeFilters with tableState for unified filter management\r\n     */\r\n    function syncFiltersToTableState() {\r\n        if (!window.tableState || !window.tableState.filters) {\r\n            return;\r\n        }\r\n\r\n        // Sync league filters\r\n        if (activeFilters.leagues.length > 0) {\r\n            window.tableState.filters.matchup.selectedLeagues = activeFilters.leagues;\r\n            window.tableState.filters.matchup.league = '';\r\n        } else {\r\n            window.tableState.filters.matchup.selectedLeagues = null;\r\n            window.tableState.filters.matchup.league = '';\r\n        }\r\n\r\n        // Sync segment filter\r\n        if (activeFilters.segment) {\r\n            window.tableState.filters.pick.segment = activeFilters.segment;\r\n            window.tableState.filters.pick.selectedSegments = null;\r\n        } else {\r\n            window.tableState.filters.pick.segment = '';\r\n            window.tableState.filters.pick.selectedSegments = null;\r\n        }\r\n\r\n        // Sync pick type filter (maps to betType)\r\n        if (activeFilters.pick) {\r\n            // Map pick type to betType\r\n            const betTypeMap = {\r\n                'spread': 'spread',\r\n                'ml': 'moneyline',\r\n                'total': 'total',\r\n                'tt': 'team-total'\r\n            };\r\n            window.tableState.filters.pick.betType = betTypeMap[activeFilters.pick] || '';\r\n        } else {\r\n            window.tableState.filters.pick.betType = '';\r\n        }\r\n\r\n        // Sync status filter\r\n        if (activeFilters.status) {\r\n            window.tableState.filters.status = [activeFilters.status];\r\n        } else {\r\n            window.tableState.filters.status = [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply filters to table rows\r\n     */\r\n    function applyFilters() {\r\n        // Sync with tableState first\r\n        syncFiltersToTableState();\r\n\r\n        const table = document.getElementById('picks-table');\r\n        if (!table) {\r\n            console.warn('[DashboardFilterPills] Table #picks-table not found');\r\n            return;\r\n        }\r\n        \r\n        const tbody = table.querySelector('tbody');\r\n        if (!tbody) {\r\n            console.warn('[DashboardFilterPills] Table tbody not found');\r\n            return;\r\n        }\r\n        \r\n        const rows = tbody.querySelectorAll('tr');\r\n        if (rows.length === 0) {\r\n            console.warn('[DashboardFilterPills] No rows found in table');\r\n            return;\r\n        }\r\n        \r\n        let visibleCount = 0;\r\n\r\n        rows.forEach((row, index) => {\r\n            let shouldShow = true;\r\n\r\n            // League filter (multi-select)\r\n            if (activeFilters.leagues.length > 0) {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toLowerCase().trim();\r\n                // Handle league variations\r\n                const leagueMatches = activeFilters.leagues.some(filterLeague => {\r\n                    const fl = filterLeague.toLowerCase().trim();\r\n                    // Direct match\r\n                    if (rowLeague === fl) return true;\r\n                    // Handle college football variations\r\n                    if (fl === 'ncaaf' && (rowLeague === 'college' || rowLeague === 'cfb' || rowLeague.includes('college football') || rowLeague.includes('ncaa football'))) return true;\r\n                    // Handle college basketball variations\r\n                    if (fl === 'ncaab' && (rowLeague === 'ncaam' || rowLeague === 'cbb' || rowLeague.includes('college basketball') || rowLeague.includes('ncaa basketball'))) return true;\r\n                    return false;\r\n                });\r\n                if (!leagueMatches) {\r\n                    shouldShow = false;\r\n                }\r\n            }\r\n\r\n            // Segment filter\r\n            if (activeFilters.segment) {\r\n                const rowSegment = row.getAttribute('data-segment') || '';\r\n                const normalizedRowSegment = normalizeSegmentForFilter(rowSegment);\r\n                const normalizedFilterSegment = activeFilters.segment.toLowerCase().trim();\r\n                if (normalizedRowSegment !== normalizedFilterSegment) {\r\n                    shouldShow = false;\r\n                }\r\n            }\r\n\r\n            // Pick type filter\r\n            if (activeFilters.pick) {\r\n                const rowPickType = row.getAttribute('data-pick-type') || '';\r\n                const normalizedRowPickType = normalizePickTypeForFilter(rowPickType);\r\n                const normalizedFilterPickType = activeFilters.pick.toLowerCase().trim();\r\n                if (normalizedRowPickType !== normalizedFilterPickType) {\r\n                    shouldShow = false;\r\n                }\r\n            }\r\n\r\n            // Status filter\r\n            if (activeFilters.status) {\r\n                const rowStatus = (row.getAttribute('data-status') || '').toLowerCase().trim();\r\n                const filterStatus = activeFilters.status.toLowerCase().trim();\r\n                // Handle status variations\r\n                let statusMatches = false;\r\n                if (rowStatus === filterStatus) {\r\n                    statusMatches = true;\r\n                } else if (filterStatus === 'win' && (rowStatus === 'won' || rowStatus === 'win')) {\r\n                    statusMatches = true;\r\n                } else if (filterStatus === 'loss' && (rowStatus === 'lost' || rowStatus === 'loss')) {\r\n                    statusMatches = true;\r\n                } else if (filterStatus === 'pending' && (rowStatus === 'pending' || rowStatus === 'live' || rowStatus === 'on-track' || rowStatus === 'at-risk')) {\r\n                    statusMatches = true;\r\n                }\r\n                if (!statusMatches) {\r\n                    shouldShow = false;\r\n                }\r\n            }\r\n\r\n            if (shouldShow) {\r\n                row.style.display = '';\r\n                row.classList.remove('filter-hidden');\r\n                visibleCount++;\r\n            } else {\r\n                row.style.display = 'none';\r\n                row.classList.add('filter-hidden');\r\n            }\r\n        });\r\n\r\n        // Update KPIs if function exists\r\n        if (typeof window.updateKPIValues === 'function') {\r\n            window.updateKPIValues();\r\n        } else if (typeof window.recalculateKPIs === 'function') {\r\n            window.recalculateKPIs();\r\n        }\r\n\r\n        // Trigger table renderer update for consistency\r\n        if (window.PicksTableRenderer && typeof window.PicksTableRenderer.updateTable === 'function') {\r\n            window.PicksTableRenderer.updateTable();\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Check if a single row passes all active filters\r\n     * Used by PicksTableRenderer for consistent filtering\r\n     * Syncs with tableState for unified filtering\r\n     * @param {HTMLElement} row - Table row element\r\n     * @returns {boolean} - Whether the row should be visible\r\n     */\r\n    function passesAllFilters(row) {\r\n        if (!row) return true;\r\n\r\n        // Sync filters to tableState first\r\n        syncFiltersToTableState();\r\n\r\n        // Use PicksFilterManager if available for consistency\r\n        if (window.PicksFilterManager && typeof window.PicksFilterManager.passesAllFilters === 'function') {\r\n            return window.PicksFilterManager.passesAllFilters(row);\r\n        }\r\n\r\n        // Fallback to local filter logic\r\n        // League filter (multi-select)\r\n        if (activeFilters.leagues.length > 0) {\r\n            const rowLeague = (row.getAttribute('data-league') || '').toLowerCase().trim();\r\n            const leagueMatches = activeFilters.leagues.some(filterLeague => {\r\n                const fl = filterLeague.toLowerCase().trim();\r\n                if (rowLeague === fl) return true;\r\n                if (fl === 'ncaaf' && (rowLeague === 'college' || rowLeague === 'cfb' || rowLeague.includes('college football') || rowLeague.includes('ncaa football'))) return true;\r\n                if (fl === 'ncaab' && (rowLeague === 'ncaam' || rowLeague === 'cbb' || rowLeague.includes('college basketball') || rowLeague.includes('ncaa basketball'))) return true;\r\n                return false;\r\n            });\r\n            if (!leagueMatches) return false;\r\n        }\r\n\r\n        // Segment filter\r\n        if (activeFilters.segment) {\r\n            const rowSegment = row.getAttribute('data-segment') || '';\r\n            const normalizedRowSegment = normalizeSegmentForFilter(rowSegment);\r\n            const normalizedFilterSegment = activeFilters.segment.toLowerCase().trim();\r\n            if (normalizedRowSegment !== normalizedFilterSegment) return false;\r\n        }\r\n\r\n        // Pick type filter\r\n        if (activeFilters.pick) {\r\n            const rowPickType = row.getAttribute('data-pick-type') || '';\r\n            const normalizedRowPickType = normalizePickTypeForFilter(rowPickType);\r\n            const normalizedFilterPickType = activeFilters.pick.toLowerCase().trim();\r\n            if (normalizedRowPickType !== normalizedFilterPickType) return false;\r\n        }\r\n\r\n        // Status filter\r\n        if (activeFilters.status) {\r\n            const rowStatus = (row.getAttribute('data-status') || '').toLowerCase().trim();\r\n            const filterStatus = activeFilters.status.toLowerCase().trim();\r\n            let statusMatches = false;\r\n            if (rowStatus === filterStatus) {\r\n                statusMatches = true;\r\n            } else if (filterStatus === 'win' && (rowStatus === 'won' || rowStatus === 'win')) {\r\n                statusMatches = true;\r\n            } else if (filterStatus === 'loss' && (rowStatus === 'lost' || rowStatus === 'loss')) {\r\n                statusMatches = true;\r\n            } else if (filterStatus === 'pending' && (rowStatus === 'pending' || rowStatus === 'live' || rowStatus === 'on-track' || rowStatus === 'at-risk')) {\r\n                statusMatches = true;\r\n            }\r\n            if (!statusMatches) return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Clear all filters\r\n     */\r\n    function clearAllFilters() {\r\n        activeFilters = {\r\n            leagues: [],\r\n            segment: '',\r\n            pick: '',\r\n            status: ''\r\n        };\r\n\r\n        // Reset league pills\r\n        document.querySelectorAll('.ft-pill.ft-league').forEach(pill => {\r\n            pill.classList.remove('active');\r\n            if (pill.getAttribute('data-league') === 'all') {\r\n                pill.classList.add('active');\r\n            }\r\n        });\r\n\r\n        // Reset dropdowns\r\n        const toolbar = document.getElementById('filter-toolbar');\r\n        if (toolbar) {\r\n            // Reset segment dropdown\r\n            toolbar.querySelectorAll('#segment-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n                item.classList.remove('active');\r\n                if (item.getAttribute('data-v') === 'all') {\r\n                    item.classList.add('active');\r\n                }\r\n            });\r\n            document.getElementById('segment-dropdown-btn').textContent = 'Segment \u25BE';\r\n\r\n            // Reset pick dropdown\r\n            toolbar.querySelectorAll('#pick-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n                item.classList.remove('active');\r\n                if (item.getAttribute('data-v') === 'all') {\r\n                    item.classList.add('active');\r\n                }\r\n            });\r\n            document.getElementById('pick-dropdown-btn').textContent = 'Pick Type \u25BE';\r\n\r\n            // Reset status dropdown\r\n            toolbar.querySelectorAll('#status-dropdown-menu .ft-dropdown-item').forEach(item => {\r\n                item.classList.remove('active');\r\n                if (item.getAttribute('data-v') === 'all') {\r\n                    item.classList.add('active');\r\n                }\r\n            });\r\n            document.getElementById('status-dropdown-btn').textContent = 'Status \u25BE';\r\n        }\r\n\r\n        applyFilters();\r\n    }\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', initializeFilterPills);\r\n    } else {\r\n        initializeFilterPills();\r\n    }\r\n\r\n    // Export for external access (preserve existing property descriptors)\r\n    Object.assign(window.DashboardFilterPills, {\r\n        applyFilters,\r\n        clearAllFilters,\r\n        passesAllFilters\r\n    });\r\n\r\n})();\r\n\r\n\n\n/* === assets/js/utils/date-toggles.js === */\n/* =========================================================\r\n   DATE TOGGLES FUNCTIONALITY\r\n   Quick date range filtering for dashboard picks\r\n   ========================================================= */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Date range state\r\n    let currentDateRange = 'active'; // Default to show active picks only\r\n    let customStartDate = null;\r\n    let customEndDate = null;\r\n\r\n    /**\r\n     * Initialize the compact date range dropdown selector\r\n     */\r\n    function initializeDateRangeDropdown() {\r\n        const toggle = document.getElementById('date-range-toggle');\r\n        const dropdown = document.getElementById('date-range-dropdown');\r\n        const label = document.getElementById('date-range-label');\r\n        const options = document.querySelectorAll('.date-range-option');\r\n\r\n        if (!toggle || !dropdown || !label) {\r\n            console.log('[DateToggles] Date range dropdown elements not found');\r\n            return;\r\n        }\r\n\r\n        // Toggle dropdown on button click\r\n        toggle.addEventListener('click', function(e) {\r\n            e.stopPropagation();\r\n            const isOpen = !dropdown.hidden;\r\n\r\n            if (isOpen) {\r\n                dropdown.hidden = true;\r\n                toggle.setAttribute('aria-expanded', 'false');\r\n            } else {\r\n                dropdown.hidden = false;\r\n                toggle.setAttribute('aria-expanded', 'true');\r\n            }\r\n        });\r\n\r\n        // Handle option selection\r\n        options.forEach(option => {\r\n            option.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n\r\n                const range = this.dataset.range;\r\n                const optionText = this.textContent;\r\n\r\n                // Special handling for custom range - open calendar card instead\r\n                if (range === 'custom') {\r\n                    const calendarCard = document.getElementById('custom-calendar-card');\r\n                    if (calendarCard) {\r\n                        dropdown.hidden = true;\r\n                        toggle.setAttribute('aria-expanded', 'false');\r\n                        calendarCard.hidden = false;\r\n                        initializeCustomCalendarCard();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // Update active state\r\n                options.forEach(opt => {\r\n                    opt.classList.remove('active');\r\n                    opt.setAttribute('aria-selected', 'false');\r\n                });\r\n                this.classList.add('active');\r\n                this.setAttribute('aria-selected', 'true');\r\n\r\n                // Update button label\r\n                label.textContent = optionText;\r\n\r\n                // Close dropdown\r\n                dropdown.hidden = true;\r\n                toggle.setAttribute('aria-expanded', 'false');\r\n\r\n                // Apply the date filter\r\n                currentDateRange = range;\r\n                applyDateFilter(range);\r\n            });\r\n        });\r\n\r\n        // Close dropdown on outside click\r\n        document.addEventListener('click', function(e) {\r\n            if (!dropdown.hidden && !toggle.contains(e.target) && !dropdown.contains(e.target)) {\r\n                dropdown.hidden = true;\r\n                toggle.setAttribute('aria-expanded', 'false');\r\n            }\r\n        });\r\n\r\n        // Close on Escape key\r\n        document.addEventListener('keydown', function(e) {\r\n            if (e.key === 'Escape') {\r\n                if (!dropdown.hidden) {\r\n                    dropdown.hidden = true;\r\n                    toggle.setAttribute('aria-expanded', 'false');\r\n                    toggle.focus();\r\n                }\r\n                const calendarCard = document.getElementById('custom-calendar-card');\r\n                if (calendarCard && !calendarCard.hidden) {\r\n                    calendarCard.hidden = true;\r\n                    toggle.focus();\r\n                }\r\n            }\r\n        });\r\n\r\n        console.log('[DateToggles] Date range dropdown initialized');\r\n        \r\n        // Initialize calendar card close button\r\n        const calendarCardClose = document.getElementById('calendar-card-close');\r\n        const calendarCard = document.getElementById('custom-calendar-card');\r\n        if (calendarCardClose && calendarCard) {\r\n            calendarCardClose.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                calendarCard.hidden = true;\r\n            });\r\n        }\r\n        \r\n        // Close calendar card when clicking outside\r\n        document.addEventListener('click', function(e) {\r\n            if (calendarCard && !calendarCard.hidden) {\r\n                const isClickInside = calendarCard.contains(e.target) || \r\n                                     document.getElementById('custom-range-trigger')?.contains(e.target);\r\n                if (!isClickInside) {\r\n                    calendarCard.hidden = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Initialize custom calendar card\r\n     */\r\n    function initializeCustomCalendarCard() {\r\n        const calendarCard = document.getElementById('custom-calendar-card');\r\n        if (!calendarCard) return;\r\n        if (calendarCardInitialized) {\r\n            renderCalendarCard();\r\n            return;\r\n        }\r\n        \r\n        const startDisplay = document.getElementById('date-range-start-display');\r\n        const endDisplay = document.getElementById('date-range-end-display');\r\n        const daysContainer = document.getElementById('custom-calendar-days');\r\n        const monthLabel = document.getElementById('custom-calendar-month');\r\n        const prevBtn = calendarCard.querySelector('.calendar-nav.prev');\r\n        const nextBtn = calendarCard.querySelector('.calendar-nav.next');\r\n        const targetButtons = calendarCard.querySelectorAll('.date-target-btn');\r\n        const applyBtn = document.getElementById('calendar-apply-btn');\r\n        const clearBtn = document.getElementById('calendar-clear-btn');\r\n        \r\n        if (!daysContainer || !monthLabel || !prevBtn || !nextBtn || !startDisplay || !endDisplay) {\r\n            console.warn('[DateToggles] Calendar card elements not found');\r\n            return;\r\n        }\r\n        \r\n        // Set active target\r\n        function setActiveTarget(target) {\r\n            calendarActiveTarget = target === 'end' ? 'end' : 'start';\r\n            targetButtons.forEach(btn => {\r\n                const isActive = btn.dataset.target === calendarActiveTarget;\r\n                btn.classList.toggle('active', isActive);\r\n                btn.setAttribute('aria-selected', isActive ? 'true' : 'false');\r\n            });\r\n        }\r\n        \r\n        // Update display from selected dates\r\n        function updateDisplayFromSelected() {\r\n            if (calendarCardStartDate) {\r\n                startDisplay.textContent = formatDisplayDate(calendarCardStartDate);\r\n                startDisplay.classList.remove('is-placeholder');\r\n            } else {\r\n                startDisplay.textContent = '\u2014';\r\n                startDisplay.classList.add('is-placeholder');\r\n            }\r\n            \r\n            if (calendarCardEndDate) {\r\n                endDisplay.textContent = formatDisplayDate(calendarCardEndDate);\r\n                endDisplay.classList.remove('is-placeholder');\r\n            } else {\r\n                endDisplay.textContent = '\u2014';\r\n                endDisplay.classList.add('is-placeholder');\r\n            }\r\n        }\r\n        \r\n        // Render calendar\r\n        function renderCalendarCard() {\r\n            const year = calendarMonthCursor.getFullYear();\r\n            const month = calendarMonthCursor.getMonth();\r\n            \r\n            monthLabel.textContent = calendarMonthCursor.toLocaleDateString('en-US', {\r\n                month: 'long',\r\n                year: 'numeric'\r\n            });\r\n            \r\n            daysContainer.innerHTML = '';\r\n            \r\n            const firstDay = new Date(year, month, 1);\r\n            const startWeekDay = firstDay.getDay();\r\n            const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n            \r\n            const startTime = calendarCardStartDate ? calendarCardStartDate.getTime() : null;\r\n            const endTime = calendarCardEndDate ? calendarCardEndDate.getTime() : null;\r\n            \r\n            // Fill leading blanks\r\n            for (let i = 0; i < startWeekDay; i++) {\r\n                const emptyCell = document.createElement('button');\r\n                emptyCell.className = 'calendar-day empty';\r\n                emptyCell.tabIndex = -1;\r\n                emptyCell.setAttribute('aria-hidden', 'true');\r\n                daysContainer.appendChild(emptyCell);\r\n            }\r\n            \r\n            // Fill actual days\r\n            for (let day = 1; day <= daysInMonth; day++) {\r\n                const dateObj = new Date(year, month, day);\r\n                const iso = formatISODate(dateObj);\r\n                const time = dateObj.getTime();\r\n                \r\n                const btn = document.createElement('button');\r\n                btn.type = 'button';\r\n                btn.className = 'calendar-day';\r\n                btn.textContent = String(day);\r\n                btn.setAttribute('data-date', iso);\r\n                btn.setAttribute('aria-label', formatDisplayDate(dateObj));\r\n                \r\n                if (startTime && time === startTime) {\r\n                    btn.classList.add('selected', 'selected-start');\r\n                }\r\n                if (endTime && time === endTime) {\r\n                    btn.classList.add('selected', 'selected-end');\r\n                }\r\n                if (startTime && endTime && time > startTime && time < endTime) {\r\n                    btn.classList.add('in-range');\r\n                }\r\n                \r\n                btn.addEventListener('click', (e) => {\r\n                    e.stopPropagation();\r\n                    handleDaySelectionCard(dateObj);\r\n                });\r\n                \r\n                daysContainer.appendChild(btn);\r\n            }\r\n            \r\n            updateDisplayFromSelected();\r\n        }\r\n        \r\n        // Handle day selection\r\n        function handleDaySelectionCard(dateObj) {\r\n            const iso = formatISODate(dateObj);\r\n            \r\n            if (calendarActiveTarget === 'start') {\r\n                calendarCardStartDate = dateObj;\r\n                // If start goes after end, clear end\r\n                if (calendarCardEndDate && dateObj.getTime() > calendarCardEndDate.getTime()) {\r\n                    calendarCardEndDate = null;\r\n                }\r\n            } else {\r\n                calendarCardEndDate = dateObj;\r\n                // If end goes before start, clear start so user can re-pick\r\n                if (calendarCardStartDate && dateObj.getTime() < calendarCardStartDate.getTime()) {\r\n                    calendarCardStartDate = null;\r\n                    setActiveTarget('start');\r\n                }\r\n            }\r\n            \r\n            renderCalendarCard();\r\n        }\r\n        \r\n        // Target toggle buttons\r\n        targetButtons.forEach(btn => {\r\n            btn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                const target = btn.dataset.target === 'end' ? 'end' : 'start';\r\n                setActiveTarget(target);\r\n            });\r\n        });\r\n        \r\n        // Month navigation\r\n        prevBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            calendarMonthCursor.setMonth(calendarMonthCursor.getMonth() - 1);\r\n            renderCalendarCard();\r\n        });\r\n        \r\n        nextBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            calendarMonthCursor.setMonth(calendarMonthCursor.getMonth() + 1);\r\n            renderCalendarCard();\r\n        });\r\n        \r\n        // Apply button\r\n        if (applyBtn) {\r\n            applyBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                if (calendarCardStartDate && calendarCardEndDate) {\r\n                    customStartDate = new Date(calendarCardStartDate);\r\n                    customStartDate.setHours(0, 0, 0, 0);\r\n                    customEndDate = new Date(calendarCardEndDate);\r\n                    customEndDate.setHours(23, 59, 59, 999);\r\n                    \r\n                    // Update label\r\n                    const label = document.getElementById('date-range-label');\r\n                    if (label) {\r\n                        label.textContent = `${formatDisplayDate(customStartDate)} - ${formatDisplayDate(customEndDate)}`;\r\n                    }\r\n                    \r\n                    // Update active state\r\n                    const options = document.querySelectorAll('.date-range-option');\r\n                    options.forEach(opt => {\r\n                        opt.classList.remove('active');\r\n                        opt.setAttribute('aria-selected', 'false');\r\n                    });\r\n                    const customOption = document.getElementById('custom-range-trigger');\r\n                    if (customOption) {\r\n                        customOption.classList.add('active');\r\n                        customOption.setAttribute('aria-selected', 'true');\r\n                    }\r\n                    \r\n                    // Close calendar card\r\n                    calendarCard.hidden = true;\r\n                    \r\n                    // Apply filter\r\n                    currentDateRange = 'custom';\r\n                    applyDateFilter('custom');\r\n                }\r\n            });\r\n        }\r\n        \r\n        // Clear button\r\n        if (clearBtn) {\r\n            clearBtn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                calendarCardStartDate = null;\r\n                calendarCardEndDate = null;\r\n                renderCalendarCard();\r\n            });\r\n        }\r\n        \r\n        // Initialize\r\n        setActiveTarget('start');\r\n        calendarMonthCursor = new Date();\r\n        calendarMonthCursor.setDate(1);\r\n        updateDisplayFromSelected();\r\n        renderCalendarCard();\r\n        calendarCardInitialized = true;\r\n    }\r\n\r\n    /**\r\n     * Initialize date toggles on page load\r\n     */\r\n    function initializeDateToggles() {\r\n        // Initialize compact dropdown selector (new style)\r\n        initializeDateRangeDropdown();\r\n\r\n        const dateButtons = document.querySelectorAll('.date-toggle-btn');\r\n        const customRangeSection = document.querySelector('.custom-date-range');\r\n        const applyButton = document.querySelector('.date-apply-btn');\r\n        const clearButton = document.querySelector('.date-clear-btn');\r\n        const startDateInput = document.getElementById('date-range-start');\r\n        const endDateInput = document.getElementById('date-range-end');\r\n\r\n        // Apply default filter on page load (shows active picks only)\r\n        // Use setTimeout to ensure table is rendered first\r\n        setTimeout(() => {\r\n            applyDateFilter(currentDateRange);\r\n            console.log(`[DateToggles] Applied default filter: ${currentDateRange}`);\r\n        }, 500);\r\n\r\n        // Set default active state (for legacy buttons if present)\r\n        const allTimeButton = document.querySelector('.date-toggle-btn[data-range=\"all\"]');\r\n        if (allTimeButton) {\r\n            allTimeButton.classList.add('active');\r\n        }\r\n\r\n        // Add click handlers to date toggle buttons\r\n        dateButtons.forEach(button => {\r\n            button.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                const range = this.getAttribute('data-range');\r\n                handleDateRangeSelection(range, this);\r\n            });\r\n        });\r\n\r\n        // Handle custom range button - toggle popup\r\n        const customButton = document.querySelector('.date-toggle-btn[data-range=\"custom\"]');\r\n        if (customButton) {\r\n            customButton.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                if (customRangeSection) {\r\n                    const isActive = customRangeSection.classList.contains('active');\r\n                    customRangeSection.classList.toggle('active');\r\n                    \r\n                    // If opening, focus on start date\r\n                    if (!isActive && startDateInput) {\r\n                        setTimeout(() => startDateInput.focus(), 100);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Initialize custom metallic calendar (replaces native grey picker)\r\n        initializeCustomCalendar({\r\n            container: customRangeSection,\r\n            startInput: startDateInput,\r\n            endInput: endDateInput\r\n        });\r\n\r\n        // Apply custom date range\r\n        if (applyButton) {\r\n            applyButton.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                const startDate = startDateInput?.value;\r\n                const endDate = endDateInput?.value;\r\n\r\n                if (startDate && endDate) {\r\n                    customStartDate = new Date(startDate);\r\n                    customEndDate = new Date(endDate);\r\n                    \r\n                    // Set end date to end of day\r\n                    customEndDate.setHours(23, 59, 59, 999);\r\n\r\n                    // Mark custom button as active\r\n                    if (customButton) {\r\n                        const allButtons = document.querySelectorAll('.date-toggle-btn');\r\n                        allButtons.forEach(btn => btn.classList.remove('active'));\r\n                        customButton.classList.add('active');\r\n                    }\r\n\r\n                    applyDateFilter('custom');\r\n                    \r\n                    // Hide custom range section after applying\r\n                    if (customRangeSection) {\r\n                        customRangeSection.classList.remove('active');\r\n                    }\r\n                } else {\r\n                    // Highlight missing fields\r\n                    if (!startDate && startDateInput) {\r\n                        startDateInput.style.borderColor = '#FF4757';\r\n                        setTimeout(() => startDateInput.style.borderColor = '', 2000);\r\n                    }\r\n                    if (!endDate && endDateInput) {\r\n                        endDateInput.style.borderColor = '#FF4757';\r\n                        setTimeout(() => endDateInput.style.borderColor = '', 2000);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Clear time filters and return to standard view (show all)\r\n        if (clearButton) {\r\n            clearButton.addEventListener('click', function(e) {\r\n                e.stopPropagation();\r\n                resetDateFilter();\r\n            });\r\n        }\r\n\r\n        // Close custom range popup when clicking outside\r\n        document.addEventListener('click', function(e) {\r\n            if (customRangeSection && customRangeSection.classList.contains('active')) {\r\n                const isClickInside = customRangeSection.contains(e.target) || \r\n                                     customButton?.contains(e.target);\r\n                \r\n                if (!isClickInside) {\r\n                    customRangeSection.classList.remove('active');\r\n                }\r\n            }\r\n        });\r\n\r\n        // Handle escape key to close popup\r\n        document.addEventListener('keydown', function(e) {\r\n            if (e.key === 'Escape' && customRangeSection?.classList.contains('active')) {\r\n                customRangeSection.classList.remove('active');\r\n                customButton?.focus();\r\n            }\r\n        });\r\n    }\r\n\r\n    // Calendar UI state (for custom metallic popup)\r\n    let calendarActiveTarget = 'start'; // 'start' or 'end'\r\n    let calendarMonthCursor = new Date(); // first day of visible month\r\n    calendarMonthCursor.setDate(1);\r\n    \r\n    // Calendar card state\r\n    let calendarCardStartDate = null;\r\n    let calendarCardEndDate = null;\r\n    let calendarCardInitialized = false;\r\n\r\n    function formatISODate(date) {\r\n        const y = date.getFullYear();\r\n        const m = String(date.getMonth() + 1).padStart(2, '0');\r\n        const d = String(date.getDate()).padStart(2, '0');\r\n        return `${y}-${m}-${d}`;\r\n    }\r\n\r\n    function formatDisplayDate(date) {\r\n        return date.toLocaleDateString('en-US', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            year: 'numeric'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize custom metallic calendar UI inside the popup\r\n     */\r\n    function initializeCustomCalendar(config) {\r\n        const container = config.container;\r\n        const startInput = config.startInput;\r\n        const endInput = config.endInput;\r\n\r\n        if (!container || !startInput || !endInput) return;\r\n\r\n        const monthLabel = container.querySelector('#custom-calendar-month');\r\n        const daysContainer = container.querySelector('#custom-calendar-days');\r\n        const prevBtn = container.querySelector('.calendar-nav.prev');\r\n        const nextBtn = container.querySelector('.calendar-nav.next');\r\n        const targetButtons = container.querySelectorAll('.date-target-btn');\r\n        const startDisplay = container.querySelector('#date-range-start-display');\r\n        const endDisplay = container.querySelector('#date-range-end-display');\r\n\r\n        if (!monthLabel || !daysContainer || !prevBtn || !nextBtn || !startDisplay || !endDisplay) {\r\n            return;\r\n        }\r\n\r\n        function setActiveTarget(target) {\r\n            calendarActiveTarget = target === 'end' ? 'end' : 'start';\r\n            targetButtons.forEach(btn => {\r\n                const isActive = btn.dataset.target === calendarActiveTarget;\r\n                btn.classList.toggle('active', isActive);\r\n                btn.setAttribute('aria-selected', isActive ? 'true' : 'false');\r\n            });\r\n        }\r\n\r\n        function updateDisplayFromInputs() {\r\n            if (startInput.value) {\r\n                const d = new Date(startInput.value);\r\n                const isValid = !isNaN(d.getTime());\r\n                startDisplay.textContent = isValid ? formatDisplayDate(d) : '\u2014';\r\n                startDisplay.classList.toggle('is-placeholder', !isValid);\r\n            } else {\r\n                startDisplay.textContent = '\u2014';\r\n                startDisplay.classList.add('is-placeholder');\r\n            }\r\n\r\n            if (endInput.value) {\r\n                const d = new Date(endInput.value);\r\n                const isValid = !isNaN(d.getTime());\r\n                endDisplay.textContent = isValid ? formatDisplayDate(d) : '\u2014';\r\n                endDisplay.classList.toggle('is-placeholder', !isValid);\r\n            } else {\r\n                endDisplay.textContent = '\u2014';\r\n                endDisplay.classList.add('is-placeholder');\r\n            }\r\n        }\r\n\r\n        function renderCalendar() {\r\n            const year = calendarMonthCursor.getFullYear();\r\n            const month = calendarMonthCursor.getMonth();\r\n\r\n            // Header label\r\n            monthLabel.textContent = calendarMonthCursor.toLocaleDateString('en-US', {\r\n                month: 'long',\r\n                year: 'numeric'\r\n            });\r\n\r\n            // Clear days grid\r\n            daysContainer.innerHTML = '';\r\n\r\n            const firstDay = new Date(year, month, 1);\r\n            const startWeekDay = firstDay.getDay(); // 0-6\r\n            const daysInMonth = new Date(year, month + 1, 0).getDate();\r\n\r\n            // Existing selected range for highlighting\r\n            const startVal = startInput.value ? new Date(startInput.value) : null;\r\n            const endVal = endInput.value ? new Date(endInput.value) : null;\r\n\r\n            // Fill leading blanks\r\n            for (let i = 0; i < startWeekDay; i++) {\r\n                const emptyCell = document.createElement('button');\r\n                emptyCell.className = 'calendar-day empty';\r\n                emptyCell.tabIndex = -1;\r\n                emptyCell.setAttribute('aria-hidden', 'true');\r\n                daysContainer.appendChild(emptyCell);\r\n            }\r\n\r\n            // Fill actual days\r\n            for (let day = 1; day <= daysInMonth; day++) {\r\n                const dateObj = new Date(year, month, day);\r\n                const iso = formatISODate(dateObj);\r\n\r\n                const btn = document.createElement('button');\r\n                btn.type = 'button';\r\n                btn.className = 'calendar-day';\r\n                btn.textContent = String(day);\r\n                btn.setAttribute('data-date', iso);\r\n                btn.setAttribute('aria-label', formatDisplayDate(dateObj));\r\n\r\n                const time = dateObj.getTime();\r\n                const startTime = startVal ? startVal.getTime() : null;\r\n                const endTime = endVal ? endVal.getTime() : null;\r\n\r\n                if (startTime && time === startTime) {\r\n                    btn.classList.add('selected', 'selected-start');\r\n                }\r\n                if (endTime && time === endTime) {\r\n                    btn.classList.add('selected', 'selected-end');\r\n                }\r\n                if (startTime && endTime && time > startTime && time < endTime) {\r\n                    btn.classList.add('in-range');\r\n                }\r\n\r\n                btn.addEventListener('click', (e) => {\r\n                    e.stopPropagation();\r\n                    handleDaySelection(dateObj);\r\n                });\r\n\r\n                daysContainer.appendChild(btn);\r\n            }\r\n\r\n            updateDisplayFromInputs();\r\n        }\r\n\r\n        function handleDaySelection(dateObj) {\r\n            const iso = formatISODate(dateObj);\r\n\r\n            const currentStart = startInput.value ? new Date(startInput.value) : null;\r\n            const currentEnd = endInput.value ? new Date(endInput.value) : null;\r\n\r\n            if (calendarActiveTarget === 'start') {\r\n                startInput.value = iso;\r\n\r\n                // If start goes after end, shift end to match start\r\n                if (currentEnd && dateObj.getTime() > currentEnd.getTime()) {\r\n                    endInput.value = iso;\r\n                }\r\n            } else {\r\n                endInput.value = iso;\r\n\r\n                // If end goes before start, shift start to match end\r\n                if (currentStart && dateObj.getTime() < currentStart.getTime()) {\r\n                    startInput.value = iso;\r\n                }\r\n            }\r\n\r\n            renderCalendar();\r\n        }\r\n\r\n        // Target toggle buttons\r\n        targetButtons.forEach(btn => {\r\n            btn.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                const target = btn.dataset.target === 'end' ? 'end' : 'start';\r\n                setActiveTarget(target);\r\n            });\r\n        });\r\n\r\n        // Month navigation\r\n        prevBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            calendarMonthCursor.setMonth(calendarMonthCursor.getMonth() - 1);\r\n            renderCalendar();\r\n        });\r\n\r\n        nextBtn.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            calendarMonthCursor.setMonth(calendarMonthCursor.getMonth() + 1);\r\n            renderCalendar();\r\n        });\r\n\r\n        // Initialize active target and month to today's month\r\n        setActiveTarget('start');\r\n        calendarMonthCursor = new Date();\r\n        calendarMonthCursor.setDate(1);\r\n        // Initialize placeholder states\r\n        updateDisplayFromInputs();\r\n        renderCalendar();\r\n    }\r\n\r\n    /**\r\n     * Handle date range selection\r\n     */\r\n    function handleDateRangeSelection(range, button) {\r\n        // Don't filter if clicking custom (it opens popup instead)\r\n        if (range === 'custom') {\r\n            return;\r\n        }\r\n\r\n        // Update active state\r\n        const allButtons = document.querySelectorAll('.date-toggle-btn');\r\n        allButtons.forEach(btn => btn.classList.remove('active'));\r\n        \r\n        button.classList.add('active');\r\n        currentDateRange = range;\r\n        applyDateFilter(range);\r\n        \r\n        // Close custom popup if open\r\n        const customRangeSection = document.querySelector('.custom-date-range');\r\n        if (customRangeSection) {\r\n            customRangeSection.classList.remove('active');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Apply date filter to table rows\r\n     */\r\n    function applyDateFilter(range) {\r\n        const now = new Date();\r\n        let startDate, endDate;\r\n\r\n        // Handle status-based filters (active/settled) separately\r\n        if (range === 'active' || range === 'settled') {\r\n            // Apply status filter, not date filter\r\n            if (window.tableState && window.tableState.filters) {\r\n                window.tableState.filters.date = { start: null, end: null };\r\n                window.tableState.filters.status = range === 'active' \r\n                    ? ['pending', 'live', 'on-track', 'at-risk']\r\n                    : ['win', 'won', 'loss', 'lost', 'push'];\r\n                if (window.updateTableWithFilters) {\r\n                    window.updateTableWithFilters();\r\n                }\r\n            }\r\n            updateKPIs();\r\n            return;\r\n        }\r\n\r\n        // Clear status filter for date-based filters\r\n        if (window.tableState && window.tableState.filters) {\r\n            window.tableState.filters.status = [];\r\n        }\r\n\r\n        // Calculate date range\r\n        switch(range) {\r\n            case 'today':\r\n                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'tomorrow':\r\n                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'week':\r\n                // Current week (Sunday to Saturday)\r\n                const dayOfWeek = now.getDay();\r\n                startDate = new Date(now);\r\n                startDate.setDate(now.getDate() - dayOfWeek);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(startDate);\r\n                endDate.setDate(startDate.getDate() + 6);\r\n                endDate.setHours(23, 59, 59, 999);\r\n                break;\r\n\r\n            case '7days':\r\n                // Next 7 days (upcoming)\r\n                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 7, 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'month':\r\n                startDate = new Date(now.getFullYear(), now.getMonth(), 1);\r\n                endDate = new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'yesterday':\r\n                startDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 1);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 1, 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'lastWeek':\r\n                // Last week (previous Sunday to Saturday)\r\n                const lastWeekDayOfWeek = now.getDay();\r\n                startDate = new Date(now);\r\n                startDate.setDate(now.getDate() - lastWeekDayOfWeek - 7);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(startDate);\r\n                endDate.setDate(startDate.getDate() + 6);\r\n                endDate.setHours(23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'lastMonth':\r\n                // Previous month (first day to last day)\r\n                startDate = new Date(now.getFullYear(), now.getMonth() - 1, 1);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'last30days':\r\n            case '30days':\r\n                // Last 30 days (including today)\r\n                startDate = new Date(now);\r\n                startDate.setDate(now.getDate() - 30);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'custom':\r\n                startDate = customStartDate;\r\n                endDate = customEndDate;\r\n                break;\r\n\r\n            case 'sinceInception':\r\n                // Since inception - set start date to a very early date (e.g., Jan 1, 2020)\r\n                startDate = new Date(2020, 0, 1);\r\n                startDate.setHours(0, 0, 0, 0);\r\n                endDate = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59, 999);\r\n                break;\r\n\r\n            case 'all':\r\n            default:\r\n                // Clear date filter\r\n                if (window.tableState && window.tableState.filters) {\r\n                    window.tableState.filters.date = { start: null, end: null };\r\n                    if (window.updateTableWithFilters) {\r\n                        window.updateTableWithFilters();\r\n                    }\r\n                }\r\n                updateKPIs();\r\n                return;\r\n        }\r\n\r\n        // Update the filter state in active-picks.js\r\n        if (window.tableState && window.tableState.filters) {\r\n            window.tableState.filters.date.start = startDate;\r\n            window.tableState.filters.date.end = endDate;\r\n            if (window.updateTableWithFilters) {\r\n                window.updateTableWithFilters();\r\n            }\r\n        }\r\n\r\n        // Update KPIs based on filtered data\r\n        updateKPIs();\r\n    }\r\n\r\n    /**\r\n     * Update KPIs based on currently visible rows\r\n     */\r\n    function updateKPIs() {\r\n        // This function would update the KPI tiles based on visible rows\r\n        // Integrate with existing kpi-calculator.js if needed\r\n        \r\n        // Check if there's a global KPI update function\r\n        if (typeof window.updateKPIValues === 'function') {\r\n            window.updateKPIValues();\r\n        } else if (typeof window.recalculateKPIs === 'function') {\r\n            window.recalculateKPIs();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get current date range (for external access)\r\n     */\r\n    function getCurrentDateRange() {\r\n        return {\r\n            range: currentDateRange,\r\n            customStart: customStartDate,\r\n            customEnd: customEndDate\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Reset ALL filters (date, column filters, and sort)\r\n     * Returns to default \"active\" view (not all time)\r\n     */\r\n    function resetDateFilter() {\r\n        // 1. Reset to default filter state (active picks)\r\n        currentDateRange = 'active';\r\n        customStartDate = null;\r\n        customEndDate = null;\r\n\r\n        // Reset date toggle active states\r\n        const allButtons = document.querySelectorAll('.date-toggle-btn');\r\n        allButtons.forEach(btn => btn.classList.remove('active'));\r\n\r\n        const activeButton = document.querySelector('.date-toggle-btn[data-range=\"active\"]');\r\n        if (activeButton) {\r\n            activeButton.classList.add('active');\r\n        }\r\n\r\n        // Update dropdown label\r\n        const label = document.getElementById('date-range-label');\r\n        if (label) {\r\n            label.textContent = 'Active';\r\n        }\r\n\r\n        // Update dropdown option states\r\n        const dropdownOptions = document.querySelectorAll('.date-range-option');\r\n        dropdownOptions.forEach(opt => {\r\n            const isActive = opt.dataset.range === 'active';\r\n            opt.classList.toggle('active', isActive);\r\n            opt.setAttribute('aria-selected', isActive ? 'true' : 'false');\r\n        });\r\n\r\n        // Hide custom range section\r\n        const customRangeSection = document.querySelector('.custom-date-range');\r\n        if (customRangeSection) {\r\n            customRangeSection.classList.remove('active');\r\n        }\r\n\r\n        // 2. Reset column filters and sort via state manager\r\n        if (window.PicksStateManager) {\r\n            window.PicksStateManager.resetAllFilters();\r\n            window.PicksStateManager.resetSort();\r\n        } else if (window.tableState) {\r\n            // Fallback: reset tableState directly\r\n            window.tableState.filters = {\r\n                date: { start: null, end: null },\r\n                league: [],\r\n                team: [],\r\n                betType: [],\r\n                segment: [],\r\n                status: ['pending', 'live', 'on-track', 'at-risk'] // Default to active status filter\r\n            };\r\n            window.tableState.sort = { column: null, direction: 'asc' };\r\n        }\r\n\r\n        // 3. Reset filter UI checkboxes and selects\r\n        document.querySelectorAll('.th-filter-dropdown input[type=\"checkbox\"]').forEach(cb => {\r\n            cb.checked = false;\r\n        });\r\n        document.querySelectorAll('.th-filter-dropdown select').forEach(sel => {\r\n            sel.selectedIndex = 0;\r\n        });\r\n        document.querySelectorAll('.th-filter-dropdown input[type=\"text\"]').forEach(inp => {\r\n            inp.value = '';\r\n        });\r\n\r\n        // 4. Remove filter indicator dots from kebab buttons\r\n        document.querySelectorAll('.th-filter-btn.has-filter').forEach(btn => {\r\n            btn.classList.remove('has-filter');\r\n        });\r\n\r\n        // 5. Reset sort indicators on headers\r\n        if (window.PicksSortManager) {\r\n            window.PicksSortManager.updateSortIndicators();\r\n        }\r\n\r\n        // 6. Update table display\r\n        if (window.updateTableWithFilters) {\r\n            window.updateTableWithFilters();\r\n        } else if (window.PicksTableRenderer) {\r\n            window.PicksTableRenderer.updateTable();\r\n        }\r\n\r\n        // 7. Update KPIs\r\n        updateKPIs();\r\n    }\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', initializeDateToggles);\r\n    } else {\r\n        initializeDateToggles();\r\n    }\r\n\r\n    // Export functions for external access\r\n    window.DateToggles = {\r\n        getCurrentDateRange,\r\n        resetDateFilter,\r\n        applyDateFilter\r\n    };\r\n\r\n})();\r\n\r\n\n\n/* === assets/js/utils/weekly-lineup-sync.js === */\n/**\r\n * Weekly Lineup \u2194 Dashboard Sync Bridge\r\n * Allows Dashboard to pull fresh model picks from Weekly Lineup\r\n * Allows Weekly Lineup to receive outcome updates from Dashboard\r\n * \r\n * Usage:\r\n *   Dashboard: window.WeeklyLineupSync.getLatestPicks() \u2192 pulls from localStorage cache\r\n *   Weekly Lineup: window.WeeklyLineupSync.pushOutcomes(picks) \u2192 pushes results back\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const WEEKLY_LINEUP_KEY = 'gbsv_weekly_lineup_picks';\r\n    const DASHBOARD_KEY = 'gbsv_picks';\r\n\r\n    const WeeklyLineupSync = {\r\n        /**\r\n         * Dashboard calls this to get latest model picks from Weekly Lineup cache\r\n         * @returns {Array} Active picks from Weekly Lineup, or empty array\r\n         */\r\n        getLatestPicks() {\r\n            try {\r\n                // Check if Weekly Lineup page has already loaded picks\r\n                if (window.WeeklyLineup && typeof window.WeeklyLineup.getActivePicks === 'function') {\r\n                    const picks = window.WeeklyLineup.getActivePicks();\r\n                    if (picks && picks.length > 0) {\r\n                        console.log('[SYNC] Got picks from Weekly Lineup (live):', picks.length);\r\n                        return picks;\r\n                    }\r\n                }\r\n\r\n                // Otherwise try to load from localStorage cache\r\n                const data = localStorage.getItem(WEEKLY_LINEUP_KEY);\r\n                if (data) {\r\n                    const parsed = JSON.parse(data);\r\n                    if (parsed.picks && Array.isArray(parsed.picks)) {\r\n                        console.log('[SYNC] Got picks from localStorage cache:', parsed.picks.length);\r\n                        return parsed.picks;\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error getting latest picks:', e.message);\r\n            }\r\n            return [];\r\n        },\r\n\r\n        /**\r\n         * Weekly Lineup calls this to sync outcomes from Dashboard\r\n         * @param {Array} dashboardPicks - Picks with updated status/outcomes\r\n         */\r\n        pushOutcomes(dashboardPicks) {\r\n            try {\r\n                if (!Array.isArray(dashboardPicks)) {\r\n                    console.warn('[SYNC] pushOutcomes expects an array');\r\n                    return;\r\n                }\r\n\r\n                // If Weekly Lineup is loaded, use its sync function\r\n                if (window.WeeklyLineup && typeof window.WeeklyLineup.syncDashboardOutcomes === 'function') {\r\n                    console.log('[SYNC] Pushing outcomes to live Weekly Lineup:', dashboardPicks.length);\r\n                    window.WeeklyLineup.syncDashboardOutcomes(dashboardPicks);\r\n                    return true;\r\n                }\r\n\r\n                // Otherwise store in a temporary sync file (picked up next time Weekly Lineup loads)\r\n                localStorage.setItem('gbsv_pending_outcomes', JSON.stringify({\r\n                    outcomes: dashboardPicks,\r\n                    timestamp: new Date().toISOString()\r\n                }));\r\n                console.log('[SYNC] Stored pending outcomes for Weekly Lineup');\r\n                return true;\r\n            } catch (e) {\r\n                console.error('[SYNC] Error pushing outcomes:', e.message);\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if there are pending outcomes from Dashboard waiting to be synced\r\n         * @returns {Array|null} Pending outcomes or null\r\n         */\r\n        getPendingOutcomes() {\r\n            try {\r\n                const data = localStorage.getItem('gbsv_pending_outcomes');\r\n                if (data) {\r\n                    const parsed = JSON.parse(data);\r\n                    return parsed.outcomes || null;\r\n                }\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error reading pending outcomes:', e.message);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Clear pending outcomes after processing\r\n         */\r\n        clearPendingOutcomes() {\r\n            try {\r\n                localStorage.removeItem('gbsv_pending_outcomes');\r\n                console.log('[SYNC] Cleared pending outcomes');\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error clearing pending outcomes:', e.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if Weekly Lineup page is active\r\n         */\r\n        isWeeklyLineupActive() {\r\n            return !!(window.WeeklyLineup && typeof window.WeeklyLineup.getActivePicks === 'function');\r\n        },\r\n\r\n        /**\r\n         * Manual refresh: Dashboard can call this to pull fresh picks from Weekly Lineup\r\n         * into its table (optional enhancement for power users)\r\n         */\r\n        importWeeklyLineupPicks() {\r\n            try {\r\n                const picks = this.getLatestPicks();\r\n                if (picks.length === 0) {\r\n                    console.warn('[SYNC] No picks available from Weekly Lineup to import');\r\n                    return false;\r\n                }\r\n\r\n                // Push to Dashboard's table if LoadAndAppendPicks is available\r\n                if (window.loadLivePicks && typeof window.loadLivePicks === 'function') {\r\n                    console.log('[SYNC] Importing picks to Dashboard:', picks.length);\r\n                    // This is a manual enhancement - can be triggered by user action\r\n                    return true;\r\n                }\r\n\r\n                console.log('[SYNC] Dashboard table not ready for import');\r\n                return false;\r\n            } catch (e) {\r\n                console.error('[SYNC] Error importing picks:', e.message);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    window.WeeklyLineupSync = WeeklyLineupSync;\r\n\r\n    // On page load: Check for pending outcomes if Weekly Lineup is active\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            if (WeeklyLineupSync.isWeeklyLineupActive()) {\r\n                const pending = WeeklyLineupSync.getPendingOutcomes();\r\n                if (pending && pending.length > 0) {\r\n                    console.log('[SYNC] Processing pending outcomes:', pending.length);\r\n                    WeeklyLineupSync.pushOutcomes(pending);\r\n                    WeeklyLineupSync.clearPendingOutcomes();\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        if (WeeklyLineupSync.isWeeklyLineupActive()) {\r\n            const pending = WeeklyLineupSync.getPendingOutcomes();\r\n            if (pending && pending.length > 0) {\r\n                console.log('[SYNC] Processing pending outcomes:', pending.length);\r\n                WeeklyLineupSync.pushOutcomes(pending);\r\n                WeeklyLineupSync.clearPendingOutcomes();\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log('\u2705 WeeklyLineupSync bridge initialized');\r\n})();\r\n\n\n/* === assets/js/features/sportsbook-connector.js === */\n/**\r\n * Sportsbook API Integration v1.0.0\r\n * Connects to sportsbook APIs to fetch placed bets for tracking\r\n * Supports multiple sportsbooks with modular adapters\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const getApiBase = () => window.APP_CONFIG?.FUNCTIONS_BASE_URL || '';\r\n\r\n    class SportsbookConnector {\r\n        constructor() {\r\n            this.connectedBooks = new Map();\r\n            this.adapters = {};\r\n            this.initialized = false;\r\n        }\r\n\r\n        /**\r\n         * Initialize connector\r\n         */\r\n        init() {\r\n            if (this.initialized) return;\r\n\r\n            // Register built-in adapters\r\n            this._registerAdapters();\r\n\r\n            // Load saved connections\r\n            this._loadConnections();\r\n\r\n            this.initialized = true;\r\n            console.log('\uD83D\uDCDA Sportsbook Connector initialized');\r\n        }\r\n\r\n        /**\r\n         * Register sportsbook adapters\r\n         */\r\n        _registerAdapters() {\r\n            // Each adapter knows how to connect and fetch bets from a specific sportsbook\r\n            this.adapters = {\r\n                'action_network': {\r\n                    name: 'Action Network',\r\n                    logo: '/assets/sportsbooks/actionnetwork.png',\r\n                    authType: 'credentials',\r\n                    fetchBets: (auth) => this._fetchActionNetworkBets(auth),\r\n                    parseBet: (raw) => this._parseActionNetworkBet(raw)\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Load saved sportsbook connections from localStorage\r\n         */\r\n        _loadConnections() {\r\n            const TOKEN_MAX_AGE_MS = 24 * 60 * 60 * 1000; // 24 hours\r\n            try {\r\n                const saved = localStorage.getItem('gbsv_sportsbook_connections');\r\n                if (saved) {\r\n                    const connections = JSON.parse(saved);\r\n                    connections.forEach(conn => {\r\n                        // Reject stale tokens older than TOKEN_MAX_AGE_MS\r\n                        const connectedAt = conn.connectedAt ? new Date(conn.connectedAt).getTime() : 0;\r\n                        if (Date.now() - connectedAt > TOKEN_MAX_AGE_MS) {\r\n                            console.warn(`[SPORTSBOOK] Expired token for ${conn.bookId}, removing`);\r\n                            return; // skip this connection\r\n                        }\r\n                        this.connectedBooks.set(conn.bookId, {\r\n                            ...conn,\r\n                            lastSync: conn.lastSync ? new Date(conn.lastSync) : null\r\n                        });\r\n                    });\r\n                    // Persist cleaned list (without expired entries)\r\n                    this._saveConnections();\r\n                }\r\n            } catch (e) {\r\n                console.error('Failed to load sportsbook connections:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Save connections to localStorage\r\n         */\r\n        _saveConnections() {\r\n            try {\r\n                const connections = Array.from(this.connectedBooks.values());\r\n                localStorage.setItem('gbsv_sportsbook_connections', JSON.stringify(connections));\r\n            } catch (e) {\r\n                console.error('Failed to save sportsbook connections:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get list of available sportsbooks\r\n         */\r\n        getAvailableBooks() {\r\n            return Object.entries(this.adapters).map(([id, adapter]) => ({\r\n                id,\r\n                name: adapter.name,\r\n                logo: adapter.logo,\r\n                authType: adapter.authType,\r\n                connected: this.connectedBooks.has(id)\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * Get connected sportsbooks\r\n         */\r\n        getConnectedBooks() {\r\n            return Array.from(this.connectedBooks.values());\r\n        }\r\n\r\n        /**\r\n         * Connect to a sportsbook\r\n         */\r\n        async connect(bookId, credentials) {\r\n            const adapter = this.adapters[bookId];\r\n            if (!adapter) {\r\n                throw new Error(`Unknown sportsbook: ${bookId}`);\r\n            }\r\n\r\n            // For OAuth, redirect to auth flow\r\n            if (adapter.authType === 'oauth') {\r\n                return this._initiateOAuth(bookId);\r\n            }\r\n\r\n            // For credentials, validate via server\r\n            const response = await fetch(`${getApiBase()}/api/sportsbook/connect`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ bookId, credentials })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const error = await response.json();\r\n                throw new Error(error.message || 'Failed to connect');\r\n            }\r\n\r\n            const result = await response.json();\r\n\r\n            // Store connection (without actual credentials)\r\n            this.connectedBooks.set(bookId, {\r\n                bookId,\r\n                name: adapter.name,\r\n                connectedAt: new Date().toISOString(),\r\n                lastSync: null,\r\n                token: result.token // Encrypted token from server\r\n            });\r\n\r\n            this._saveConnections();\r\n\r\n            window.dispatchEvent(new CustomEvent('sportsbook:connected', {\r\n                detail: { bookId, name: adapter.name }\r\n            }));\r\n\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Disconnect from a sportsbook\r\n         */\r\n        disconnect(bookId) {\r\n            if (this.connectedBooks.has(bookId)) {\r\n                this.connectedBooks.delete(bookId);\r\n                this._saveConnections();\r\n\r\n                window.dispatchEvent(new CustomEvent('sportsbook:disconnected', {\r\n                    detail: { bookId }\r\n                }));\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fetch bets from a connected sportsbook\r\n         */\r\n        async fetchBets(bookId, options = {}) {\r\n            const connection = this.connectedBooks.get(bookId);\r\n            if (!connection) {\r\n                throw new Error(`Not connected to ${bookId}`);\r\n            }\r\n\r\n            const response = await fetch(`${getApiBase()}/api/sportsbook/bets`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    bookId,\r\n                    token: connection.token,\r\n                    dateRange: options.dateRange || 'week',\r\n                    status: options.status || 'all' // open, settled, all\r\n                })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch bets');\r\n            }\r\n\r\n            const data = await response.json();\r\n            const adapter = this.adapters[bookId];\r\n\r\n            // Parse bets using adapter\r\n            const bets = (data.bets || []).map(raw => adapter.parseBet(raw));\r\n\r\n            // Update last sync time\r\n            connection.lastSync = new Date().toISOString();\r\n            this._saveConnections();\r\n\r\n            return bets;\r\n        }\r\n\r\n        /**\r\n         * Fetch bets from all connected sportsbooks\r\n         */\r\n        async fetchAllBets(options = {}) {\r\n            const allBets = [];\r\n\r\n            for (const [bookId, connection] of this.connectedBooks) {\r\n                try {\r\n                    const bets = await this.fetchBets(bookId, options);\r\n                    allBets.push(...bets.map(b => ({ ...b, source: bookId })));\r\n                } catch (error) {\r\n                    console.error(`Failed to fetch from ${bookId}:`, error);\r\n                }\r\n            }\r\n\r\n            // Sort by date\r\n            allBets.sort((a, b) => new Date(b.placedAt) - new Date(a.placedAt));\r\n\r\n            return allBets;\r\n        }\r\n\r\n        /**\r\n         * Sync bets to dashboard\r\n         */\r\n        async syncToDashboard(bets) {\r\n            if (!bets || bets.length === 0) return [];\r\n\r\n            const added = [];\r\n\r\n            for (const bet of bets) {\r\n                // Convert to standard pick format\r\n                const pick = this._convertToPickFormat(bet);\r\n\r\n                // Add to dashboard\r\n                if (window.LocalPicksManager) {\r\n                    try {\r\n                        await window.LocalPicksManager.addPick(pick);\r\n                        added.push(pick);\r\n                    } catch (e) {\r\n                        console.error('Failed to add bet to dashboard:', e);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return added;\r\n        }\r\n\r\n        /**\r\n         * Convert sportsbook bet to standard pick format\r\n         */\r\n        _convertToPickFormat(bet) {\r\n            return {\r\n                id: `${bet.source}-${bet.betId}`,\r\n                source: bet.source,\r\n                league: bet.league,\r\n                gameDate: bet.gameDate,\r\n                gameTime: bet.gameTime,\r\n                awayTeam: bet.awayTeam,\r\n                homeTeam: bet.homeTeam,\r\n                pick: bet.selection,\r\n                odds: bet.odds,\r\n                risk: bet.stake,\r\n                toWin: bet.potentialWin,\r\n                outcome: bet.outcome,\r\n                sportsbook: bet.source,\r\n                placedAt: bet.placedAt,\r\n                settledAt: bet.settledAt\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initiate OAuth flow\r\n         */\r\n        _initiateOAuth(bookId) {\r\n            const returnUrl = encodeURIComponent(window.location.href);\r\n            window.location.href = `${getApiBase()}/api/sportsbook/oauth/${bookId}?redirect=${returnUrl}`;\r\n        }\r\n\r\n        // ===== ADAPTER IMPLEMENTATIONS =====\r\n\r\n        async _fetchActionNetworkBets(auth) {\r\n            // Action Network sync via their API\r\n            return [];\r\n        }\r\n\r\n        _parseActionNetworkBet(raw) {\r\n            return {\r\n                betId: raw.id,\r\n                league: raw.sport?.toUpperCase(),\r\n                awayTeam: raw.away_team,\r\n                homeTeam: raw.home_team,\r\n                selection: raw.pick_label,\r\n                odds: raw.odds,\r\n                stake: raw.risk,\r\n                potentialWin: raw.to_win,\r\n                outcome: raw.result,\r\n                placedAt: raw.created_at,\r\n                settledAt: raw.settled_at,\r\n                gameDate: raw.game_date,\r\n                gameTime: raw.game_time\r\n            };\r\n        }\r\n    }\r\n\r\n    // Create singleton\r\n    window.SportsbookConnector = new SportsbookConnector();\r\n\r\n    // Init on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => window.SportsbookConnector.init());\r\n    } else {\r\n        window.SportsbookConnector.init();\r\n    }\r\n\r\n})();\r\n"],
  "mappings": "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",
  "names": ["teamDataCache", "teamDataPromise", "loadTeamData", "response", "data", "flattened", "league", "error", "getTeamInfo", "teamName", "lower", "leagueData", "preloadTeamData", "err", "STORAGE_KEY", "STORAGE_VERSION", "saveFilterState", "stateToSave", "e", "loadFilterState", "saved", "state", "restoreFilterState", "pill", "value", "segmentBtn", "segmentItem", "i", "labels", "pickBtn", "pickItem", "statusBtn", "statusItem", "clearFilterState", "saveTimeout", "scheduleSave", "initializePersistence", "originalApplyFilters", "originalUpdateFilter", "filterType", "updates", "ManualUploadManager", "eventName", "files", "items", "blob", "self", "dropdownMenu", "file", "textEl", "textPicks", "sportsbook", "originalText", "content", "selectedBookMeta", "addedPicks", "resolve", "reject", "reader", "selectedSportsbook", "init", "attachHandlers", "card", "bookKey", "selectSportsbook", "applySelectedState", "cardElement", "updateNavTriggerState", "trigger", "getSelectedSportsbook", "clearSelection", "zebraTimeout", "DEBOUNCE_DELAY", "isRowVisibleForZebra", "row", "computed", "getDirectChildRows", "tbody", "node", "getParentRowsOnly", "findParlayLegsRow", "parentRow", "rowId", "byId", "nextSibling", "cachedTbody", "lastTbodyCheck", "TBODY_CACHE_TIME", "applyPicksTableZebraStripes", "forceTbody", "now", "zebraClasses", "cls", "parentRows", "applyLegTableStripes", "legsRow", "legRows", "allRows", "tr", "legRow", "legIndex", "legClass", "visibleIndex", "zebraClass", "legsZebraClass", "debouncedApplyZebraStripes", "customDelay", "delay", "applyZebraStripesNow", "_columnIndexCache", "DOMUtils", "columnKey", "table", "cacheForTable", "th", "rowEl", "idx", "el", "oneBased", "fallbackIndex", "div", "num", "formatted", "dateText", "weekday", "match", "month", "day", "year", "date", "status", "type", "subtype", "segment", "tag", "attributes", "children", "element", "key", "child", "button", "dropdown", "btnRect", "dropdownHeight", "viewportHeight", "btnId", "btn", "name", "words", "w", "txt", "func", "wait", "timeout", "args", "later", "limit", "inThrottle", "rect", "options", "defaultOptions", "selector", "isLoading", "text", "rangeStr", "parts", "p", "range", "min", "max", "event", "handler", "update", "elements", "fragment", "StateShapeValidators", "dateFilter", "matchupFilter", "riskFilter", "StateManager", "parlayId", "isExpanded", "index", "isCurrentlyExpanded", "column", "direction", "filters", "count", "DataProcessor", "facets", "dateCell", "dateEl", "fullDate", "timeEl", "timeText", "bookEl", "bookText", "a", "b", "timeA", "timeB", "hours", "minutes", "period", "leagues", "cell", "leaguePatterns", "pattern", "teams", "rowLeague", "matchupCell", "team", "logos", "logo", "part", "cleaned", "statuses", "statusCell", "badge", "values", "amountEl", "columnIndex", "sorted", "ranges", "rangeMin", "rangeMax", "v", "visibleRows", "totalRisk", "totalWin", "wins", "losses", "pushes", "pending", "live", "riskWinCell", "riskEl", "winEl", "risk", "win", "statusText", "normalized", "totalBets", "settledBets", "winRate", "roi", "types", "subtypes", "pickCell", "detected", "betTypeEl", "FilterManager", "weekdayEl", "pickText", "betType", "raw", "betTypeAttr", "segmentCell", "segmentSpan", "time", "book", "normalizedDate", "selected", "normalizedTime", "normalizedBook", "isParlay", "matchupText", "filter", "start", "end", "rowEpoch", "epochNum", "rowDate", "startDate", "endDate", "l", "rowSegment", "normalizedRowSegment", "s", "debouncedApply", "stateKey", "container", "checkboxes", "grouped", "cb", "group", "teamCheckboxes", "selectedTeams", "betTypeSelect", "subtypeSelect", "segmentSelect", "riskContainer", "winContainer", "checked", "allCheckboxes", "segments", "leagueSelect", "rows", "SortManager", "currentMonth", "currentYear", "dateValue", "timeValue", "dataEpoch", "priorities", "aValue", "bValue", "aStr", "bStr", "newDirection", "icon", "activeHeader", "isDesc", "activeIcon", "TableRenderer", "className", "otherClass", "shouldShow", "chips", "label", "chip", "chipEl", "labelSpan", "removeBtn", "clearAllBtn", "indicators", "hasFilter", "indicator", "filterCount", "countEl", "message", "announcer", "zebraDebounceTimer", "resultString", "scorePattern", "picks", "kpis", "leagueStats", "betTypeStats", "segmentStats", "sportsbookStats", "pick", "riskStr", "winStr", "isLoss", "totalGames", "totalDecided", "stats", "topName", "topWinRate", "record", "total", "finishedPicks", "streak", "lastStatus", "tile1", "layers", "valueEl", "subtextEl", "projectedSign", "netSign", "tile2", "roiSign", "tile3", "PICKS_ENDPOINT", "picksCache", "lastFetch", "CACHE_TTL", "apiRequest", "endpoint", "url", "config", "invalidateCache", "getAll", "params", "query", "getActive", "getSettled", "getById", "id", "getByLeague", "getByDate", "getByDateRange", "fromDate", "toDate", "getToday", "today", "create", "body", "updateStatus", "additionalUpdates", "markWon", "pnl", "markLost", "markPush", "remove", "clearAll", "confirm", "getSummary", "summary", "migrateFromLocalStorage", "localData", "localPicks", "result", "checkMigrationNeeded", "teamKey", "gameStr", "awayTeam", "homeTeam", "str", "away", "home", "combined", "upperKey", "root", "force", "recordValue", "runPopulate", "description", "oddsMatch", "teamTotalMatch", "totalMatch", "mlMatch", "spreadMatch", "gameString", "separators", "sep", "teamLookup", "acronym", "ncaaIds", "logoId", "parsedPick", "teamLogo", "teamAbbr", "coverage", "statusClass", "liveArrow", "awayLogo", "awayAbbr", "homeLogo", "homeAbbr", "awayScore", "homeScore", "awayRowClass", "homeRowClass", "q1_away", "q2_away", "q3_away", "q4_away", "q1_home", "q2_home", "q3_home", "q4_home", "numbers", "awayNum", "homeNum", "selection", "pickTeamName", "pickKey", "awayKey", "homeKey", "awayAbbrKey", "homeAbbrKey", "phaseRaw", "phase", "upper", "isFinal", "isHalftime", "isPreGame", "clockMatch", "clock", "periodMatch", "resultText", "matchup", "phaseMatch", "phaseDetails", "firstLabel", "firstScore", "secondScore", "awayAbbrRaw", "homeAbbrRaw", "firstLabelKey", "fallbackAbbr", "scoreboardText", "payload", "parsed", "meta", "pickType", "numericLine", "marketString", "selectionLower", "lineMatch", "ttMatch", "liveInfo", "pickMeta", "side", "lineValue", "isOver", "isUnder", "totalScore", "margin", "coverageState", "ourScore", "oppScore", "diff", "coverMargin", "baseStatus", "normalizedBase", "canonicalBase", "titleCase", "decision", "absValue", "rounded", "source", "periodText", "fromLabel", "valueText", "decisionKey", "coverValue", "diffValue", "scoreboardPhrase", "needText", "lineText", "marginText", "phaseText", "finalContext", "input", "game", "scoreMatch", "actualDiff", "actualTotal", "isPickedAway", "pickTeamLower", "awayLower", "spread", "absMargin", "line", "tooltip", "info", "extraClass", "safeStatus", "safeLabel", "safeTooltip", "safeInfo", "safeMargin", "hasWinOrLoss", "shouldShowInfo", "tooltipAttr", "infoAttr", "marginAttr", "countdown", "payloadInput", "fallbackResult", "badgeContext", "statusOrPayload", "resultMaybe", "n", "fallback", "maybeParseFallback", "derived", "ts", "odds", "riskVal", "oddsText", "oddsNum", "rawPick", "rawType", "rawDirection", "segmentInput", "amount", "sign", "abs", "riskRaw", "winRaw", "matchupLabel", "statusMeta", "isLive", "badgeLabel", "statusBadgeMarkup", "leagueFromPick", "awayTeamName", "homeTeamName", "leagueNormMap", "teamsFromGame", "pickedTeamLogo", "pickedTeamAbbr", "pickedTeamName", "homeLower", "bookName", "riskValue", "winProvided", "derivedWin", "riskDisplay", "winDisplay", "dateMeta", "outcome", "normalizedPickType", "pt", "leagueLogoUrl", "apiUrl", "tableContainer", "loaderPromise", "records", "fileError", "migrationStatus", "migrationResult", "dbPicks", "picksPromise", "recordsPromise", "deleteBtn", "pickIndex", "pickId", "calculatePickStatus", "calculateSpreadStatus", "calculateTotalStatus", "calculateMoneylineStatus", "pickTeam", "timeRemaining", "quarter", "criticalTime", "getCriticalTimeThreshold", "isTeamTotal", "currentTotal", "difference", "expectedPointsRemaining", "estimateRemainingPossessions", "leadMargin", "secondsRemaining", "parseTimeToSeconds", "totalSeconds", "timeStr", "sec", "generateStatusTooltip", "finalScore", "tooltipText", "isAwayPick", "absDiff", "ttSuffix", "ttPrefix", "lead", "syncKPIsWithTable", "updateKPITile", "recentResults", "getRecentResults", "calculateStreak", "tileId", "tileSelectors", "results", "mostRecent", "initializeStatusTooltips", "existingTooltip", "generateDefaultTooltip", "originalUpdateTable", "BADGE_SELECTOR", "tooltipElement", "currentTarget", "hideTimeout", "showDelayTimeout", "hideAnimationTimeout", "createTooltipElement", "getStatusTooltipClass", "calculateTooltipPosition", "target", "tooltipRect", "viewport", "spacing", "arrowSize", "top", "left", "placement", "formatTooltipContent", "escapeHtml", "highlightNumbers", "showTooltip", "formattedContent", "position", "hideTooltip", "getTooltipText", "blurb", "statusInfo", "handleMouseEnter", "titleText", "handleMouseLeave", "handleFocus", "handleBlur", "updateTooltipPosition", "setupEventDelegation", "delegatedMouseEnter", "delegatedMouseLeave", "delegatedFocus", "delegatedBlur", "resizeTimeout", "scrollTimeout", "todayISO", "todayESPN", "STANDINGS_TTL_MS", "SCOREBOARD_INTERVAL_INITIAL_MS", "SCOREBOARD_INTERVAL_MAX_MS", "todaysGamesCache", "teamRecordsCache", "lastStandingsFetch", "scoreboardIntervalMs", "getScoreboardProxyUrl", "apiBase", "functionsBase", "fetchSportsDataIO", "sport", "fetchStandings", "sportPath", "conferences", "conf", "entries", "entry", "winsObj", "lossesObj", "getTeamRecord", "fetchESPN", "parseESPNGames", "competition", "competitors", "t", "statusType", "parseSportsDataIOGames", "games", "gameTime", "sdStatus", "statusDetail", "g", "fetchTodaysGames", "forceRefresh", "disabledLeagues", "isEnabled", "standingsPromises", "allGames", "ncaamData", "ncaamGames", "nbaData", "nbaGames", "nflSportsData", "nflGames", "nflData", "e2", "ncaafSportsData", "ncaafGames", "ncaafData", "findGame", "teamName1", "teamName2", "name1Lower", "name2Lower", "hasGameStarted", "isGameFinished", "getGameStatusMessage", "scheduleScoreboardRefresh", "unitMultiplier", "TEAM_ALIASES", "_variantsLoaded", "loadTeamVariants", "ncaamRes", "nbaRes", "r", "abbr", "canonical", "loc", "nick", "alt", "standardizePicks", "isBetHistoryFormat", "parseBetHistory", "parseSportsbookGameLines", "parseHTMLPicks", "parseTextPicks", "hasMoney", "hasTimestamp", "hasOddsSignals", "cleanedLines", "parseBetHistoryLeg", "defaultSport", "currentGame", "parseFlexibleLine", "html", "doc", "gamePanels", "panel", "gamePicks", "parseGamePanel", "textContent", "gameInfo", "extractGameInfo", "groupPicks", "parseLineGroup", "parseIndividualLine", "getTodayDate", "firstTeamEl", "secondTeamEl", "leagueEl", "detectSportFromLeague", "sportLine", "sportAttr", "detectSportFromAttribute", "groupType", "detectGroupType", "play", "parseLinePlacement", "groupClass", "dataType", "groupText", "lineEl", "priceEl", "price", "teamIndex", "determineTeamIndex", "formatLine", "formatOdds", "determineOverUnder", "ttTeamIdx", "parseLineAndOdds", "defaultIndex", "teamAttr", "parent", "attr", "seenLegs", "ticketId", "parlayLabel", "parlayType", "legs", "rowRisk", "rowWin", "leg", "legIdx", "legPick", "parseParlayLeg", "legKey", "parseHTMLRow", "legEl", "teamEl", "periodEl", "src", "teamLower", "parseDateTimeString", "riskText", "parseCurrency", "winText", "gameEl", "gameText", "parseGameString", "selectionEl", "selText", "lineOnly", "rawLines", "currentSport", "pipePick", "parsePipeDelimitedLine", "contextInfo", "extractContext", "normalizedPicks", "gameMatch", "resolveTeamName", "normalizedSport", "originalLine", "segmentPatterns", "teamKeys", "teamPart", "linePart", "fullMatch", "gameTotalMatch", "foundTeam", "foundTeamPos", "teamRegex", "pos", "capsMatch", "spreadPatterns", "numVal", "mlOdds", "vsMatch", "matchupPart", "segmentPart", "pickPart", "matchupMatch", "segLower", "lineVal", "parseTextLine", "defaultGame", "riskMatch", "standaloneTotal", "calculateWin", "teamMatch", "remainder", "mlOddsMatch", "number", "oddsAfter", "shouldSkipLine", "updateContextFromLine", "callback", "ctx", "picksToDisplayFormat", "picksToCSV", "headers", "setUnitMultiplier", "multiplier", "select", "ext", "isExtAllowed", "isMimeAllowed", "mime", "isSizeAllowed", "actionButtons", "importOptions", "importBtn", "backBtn", "showImportOptions", "hideImportOptions", "resetUploadForm", "fileInput", "pasteArea", "fileList", "uploadBtn", "statusDiv", "dropZone", "uploadFilesBtn", "preventDefaults", "handleFiles", "validFiles", "rejected", "check", "reason", "formatFileSize", "rejectMsg", "showStatus", "renderFileList", "size", "uploadFiles", "formData", "sportsbookKey", "sportsbookLabel", "uploadPasteBtn", "clearBtn", "selectedBook", "isHTML", "saveFn", "processAndSavePicks", "bytes", "bookMeta", "deriveTeams", "todaysGames", "derivedTeams", "errorText", "parsePickFromText", "spreadPattern", "totalPattern", "mlPattern", "vsPattern", "UNIT_MULTIPLIER_KEY", "getAllPicks", "savePicks", "addPicks", "newPicks", "existing", "enrichedPicks", "pickDirection", "all", "clearPicks", "refreshPicksTable", "deletePick", "updatePickStatus", "newStatus", "getUnitMultiplier", "formatStatusLabel", "normalizedStatus", "labelMap", "generateStatusBlurb", "TEAM_DATA_FALLBACK", "getTeamLogoUrl", "teamId", "getTeamInfoSync", "parseAndAddPicks", "defaultRisk", "picksWithBook", "enrichPicksWithGameData", "added", "enriched", "teamToFind", "formatCurrencyValue", "val", "formatDateValue", "d", "getLeagueLogo", "leagueUpper", "standardLeague", "renderLeagueCell", "sportUpper", "displayText", "createPickRow", "attachSportsbookDropdownListeners", "attachRiskWinEditListeners", "handleSportsbookChange", "newSportsbook", "riskInputs", "winInputs", "handleRiskChange", "handleWinChange", "newRisk", "newWin", "pickTeamInfo", "awayRecord", "homeRecord", "awayInfo", "homeInfo", "segmentKey", "segmentLabel", "epochTime", "isSingleTeamBet", "awayLogoHtml", "homeLogoHtml", "pickLogoHtml", "matchupHtml", "useQuarters", "boxscoreClass", "awayBoxRow", "homeBoxRow", "headerCells", "pickStatus", "boxscoreHtml", "formatWonLost", "hitMissValue", "wonLostValue", "reEnrichExistingPicks", "attempts", "updated", "cleanupStalePicks", "daysOld", "LAST_CLEANUP_KEY", "lastCleanup", "cutoffDate", "freshPicks", "dateStr", "pickDate", "removed", "cleanupSampleData", "CLEANUP_VERSION_KEY", "sampleSources", "realPicks", "isDashboardPage", "path", "initialize", "getActivePicks", "getSettledPicks", "getPicksByDateRange", "getTodaysPicks", "startOfDay", "endOfDay", "archiveOldPicks", "toArchive", "toKeep", "isSettled", "existingArchive", "DashboardInit", "tile", "layer", "refreshBtn", "backToTopBtn", "activeFilters", "initializeFilterPills", "toolbar", "leagueValue", "m", "applyFilters", "dropdowns", "menu", "item", "segmentValue", "pickValue", "statusValue", "clearAllFilters", "normalizeSegmentForFilter", "seg", "normalizePickTypeForFilter", "rowPickType", "syncFiltersToTableState", "betTypeMap", "visibleCount", "filterLeague", "fl", "normalizedFilterSegment", "normalizedRowPickType", "normalizedFilterPickType", "rowStatus", "filterStatus", "statusMatches", "passesAllFilters", "currentDateRange", "customStartDate", "customEndDate", "initializeDateRangeDropdown", "toggle", "option", "optionText", "calendarCard", "initializeCustomCalendarCard", "opt", "applyDateFilter", "calendarCardClose", "calendarCardInitialized", "renderCalendarCard", "startDisplay", "endDisplay", "daysContainer", "monthLabel", "prevBtn", "nextBtn", "targetButtons", "applyBtn", "setActiveTarget", "calendarActiveTarget", "isActive", "updateDisplayFromSelected", "calendarCardStartDate", "formatDisplayDate", "calendarCardEndDate", "calendarMonthCursor", "startWeekDay", "daysInMonth", "startTime", "endTime", "emptyCell", "dateObj", "iso", "formatISODate", "handleDaySelectionCard", "customOption", "initializeDateToggles", "dateButtons", "customRangeSection", "applyButton", "clearButton", "startDateInput", "endDateInput", "allTimeButton", "handleDateRangeSelection", "customButton", "initializeCustomCalendar", "resetDateFilter", "y", "startInput", "endInput", "updateDisplayFromInputs", "isValid", "renderCalendar", "startVal", "endVal", "handleDaySelection", "currentStart", "currentEnd", "updateKPIs", "dayOfWeek", "lastWeekDayOfWeek", "getCurrentDateRange", "activeButton", "sel", "inp", "WEEKLY_LINEUP_KEY", "DASHBOARD_KEY", "WeeklyLineupSync", "dashboardPicks", "getApiBase", "SportsbookConnector", "auth", "conn", "connectedAt", "connections", "adapter", "bookId", "credentials", "connection", "bets", "allBets", "bet", "returnUrl"]
}
