(function(){"use strict";try{if(typeof window>"u")return;var f=window.DEBUG===!0||localStorage.getItem("DEBUG")==="true"||window.location.search.indexOf("debug=true")!==-1;if(window.DEBUG=f,!f&&typeof console<"u"){var s=console.log,r=console.warn;console.log=function(){},console.warn=function(){var t=arguments[0];typeof t=="string"&&/^[^\w]*[ðŸš€ðŸ”„âš ï¸ðŸ“¦ðŸ“ðŸŽ¯ðŸ“šðŸ“Šâœ…âŒðŸ”§ðŸ“–ðŸˆðŸ”â°ðŸšª]/.test(t)||r.apply(console,arguments)},window.__restoreConsole=function(){console.log=s,console.warn=r,window.DEBUG=!0}}}catch{}})(),function(){"use strict";function f(){return window.APP_CONFIG?.API_BASE_URL||"/api"}function s(d){if(!d)return"$0.00";const h=parseFloat(String(d).replace(/[$,]/g,""));return isNaN(h)?"$0.00":`$${h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function r(d){if(!d)return"0.00";const h=parseFloat(String(d).replace(/[$,]/g,""));return isNaN(h)?"0.00":h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function t(d){return{pending:"Pending","on-track":"On Track","at-risk":"At Risk",hit:"Hit",miss:"Miss",push:"Push"}[d]||d}function e(d){return{"full-game":"Full Game",fg:"Full Game","1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter"}[(d||"").toLowerCase()]||d||"Full Game"}function n(d){if(!d)return"";const h={raiders:"LV","las vegas raiders":"LV",broncos:"DEN","denver broncos":"DEN",chiefs:"KC","kansas city chiefs":"KC",chargers:"LAC","los angeles chargers":"LAC",cowboys:"DAL","dallas cowboys":"DAL",eagles:"PHI","philadelphia eagles":"PHI",giants:"NYG","new york giants":"NYG",commanders:"WSH","washington commanders":"WSH",packers:"GB","green bay packers":"GB",bears:"CHI","chicago bears":"CHI",lions:"DET","detroit lions":"DET",vikings:"MIN","minnesota vikings":"MIN",falcons:"ATL","atlanta falcons":"ATL",saints:"NO","new orleans saints":"NO",panthers:"CAR","carolina panthers":"CAR",buccaneers:"TB","tampa bay buccaneers":"TB",bills:"BUF","buffalo bills":"BUF",dolphins:"MIA","miami dolphins":"MIA",jets:"NYJ","new york jets":"NYJ",patriots:"NE","new england patriots":"NE",bengals:"CIN","cincinnati bengals":"CIN",browns:"CLE","cleveland browns":"CLE",steelers:"PIT","pittsburgh steelers":"PIT",ravens:"BAL","baltimore ravens":"BAL",colts:"IND","indianapolis colts":"IND",jaguars:"JAX","jacksonville jaguars":"JAX",texans:"HOU","houston texans":"HOU",titans:"TEN","tennessee titans":"TEN",seahawks:"SEA","seattle seahawks":"SEA","49ers":"SF","san francisco 49ers":"SF",rams:"LAR","los angeles rams":"LAR",cardinals:"ARI","arizona cardinals":"ARI",lakers:"LAL","los angeles lakers":"LAL",clippers:"LAC","la clippers":"LAC",warriors:"GSW","golden state warriors":"GSW",suns:"PHX","phoenix suns":"PHX",celtics:"BOS","boston celtics":"BOS",nets:"BKN","brooklyn nets":"BKN",knicks:"NYK","new york knicks":"NYK","76ers":"PHI","philadelphia 76ers":"PHI",heat:"MIA","miami heat":"MIA",magic:"ORL","orlando magic":"ORL",bulls:"CHI","chicago bulls":"CHI",bucks:"MIL","milwaukee bucks":"MIL",cavaliers:"CLE","cleveland cavaliers":"CLE",pistons:"DET","detroit pistons":"DET",pacers:"IND","indiana pacers":"IND",hawks:"ATL","atlanta hawks":"ATL",hornets:"CHA","charlotte hornets":"CHA",wizards:"WAS","washington wizards":"WAS",raptors:"TOR","toronto raptors":"TOR",nuggets:"DEN","denver nuggets":"DEN",jazz:"UTA","utah jazz":"UTA",blazers:"POR","portland trail blazers":"POR",thunder:"OKC","oklahoma city thunder":"OKC",timberwolves:"MIN","minnesota timberwolves":"MIN",pelicans:"NOP","new orleans pelicans":"NOP",grizzlies:"MEM","memphis grizzlies":"MEM",spurs:"SAS","san antonio spurs":"SAS",rockets:"HOU","houston rockets":"HOU",mavericks:"DAL","dallas mavericks":"DAL",kings:"SAC","sacramento kings":"SAC"},p=d.toLowerCase().trim();if(h[p])return h[p];const m=d.trim().split(/\s+/);return m[m.length-1].substring(0,3).toUpperCase()}function o(d){if(!d)return{away:"",home:""};const h=["@"," vs "," vs. "," / "];for(const p of h)if(d.includes(p)){const m=d.split(p);return{away:m[0].trim(),home:m[1]?m[1].trim():""}}return{away:d.trim(),home:""}}function l(d){const h=document.createElement("div");return h.textContent=d,h.innerHTML}function a(d){return d<1024?d+" B":d<1024*1024?(d/1024).toFixed(1)+" KB":(d/(1024*1024)).toFixed(1)+" MB"}function i(d,h=150,p=!1){let m;function L(...A){const b=this,v=function(){m=null,p||d.apply(b,A)},y=p&&!m;clearTimeout(m),m=setTimeout(v,h),y&&d.apply(b,A)}return L.cancel=function(){clearTimeout(m),m=null},L}function c(d,h=100){let p=0,m=null;return function(...A){const b=this,v=Date.now(),y=h-(v-p);y<=0||y>h?(m&&(clearTimeout(m),m=null),p=v,d.apply(b,A)):m||(m=setTimeout(function(){p=Date.now(),m=null,d.apply(b,A)},y))}}function u(d){if(!d)return"TBD";const h=new Date(d);if(isNaN(h.getTime()))return"TBD";const p=(h.getMonth()+1).toString().padStart(2,"0"),m=h.getDate().toString().padStart(2,"0"),L=h.getFullYear();return`${p}/${m}/${L}`}function g(d){if(!d)return"TBD";const h=new Date(d);return isNaN(h.getTime())?"TBD":h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}window.SharedUtils={getApiUrl:f,formatMoney:s,formatMoneyValue:r,getStatusLabel:t,getSegmentLabel:e,getTeamAbbr:n,parseTeamsFromGame:o,escapeHtml:l,formatFileSize:a,formatDate:u,formatTime:g,debounce:i,throttle:c}}(),function(){"use strict";let f=null;function s(){return f||(f=document.createElement("div"),f.id="notification-container",f.style.cssText=`
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
            pointer-events: none;
        `,document.body.appendChild(f),f)}function r(i,c="info",u=5e3){s();const g=document.createElement("div");g.className=`notification notification-${c}`;const d={success:{bg:"rgba(0, 214, 137, 0.95)",icon:"\u2713",border:"#00ffaa"},error:{bg:"rgba(229, 57, 53, 0.95)",icon:"\u2715",border:"#ff5f6d"},warning:{bg:"rgba(251, 140, 0, 0.95)",icon:"\u26A0",border:"#fb8c00"},info:{bg:"rgba(74, 182, 255, 0.95)",icon:"\u2139",border:"#4ab6ff"}},h=d[c]||d.info;return g.style.cssText=`
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 14px 18px;
            background: ${h.bg};
            border: 1px solid ${h.border};
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            color: white;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.4;
            pointer-events: auto;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.3s ease, transform 0.3s ease;
        `,g.innerHTML=`
            <span style="font-size: 1.2rem; line-height: 1;">${h.icon}</span>
            <span style="flex: 1;">${i}</span>
            <button onclick="this.parentElement.remove()" style="
                background: none;
                border: none;
                color: white;
                opacity: 0.7;
                cursor: pointer;
                font-size: 1.2rem;
                padding: 0;
                line-height: 1;
            " onmouseover="this.style.opacity=1" onmouseout="this.style.opacity=0.7">\xD7</button>
        `,f.appendChild(g),requestAnimationFrame(()=>{g.style.opacity="1",g.style.transform="translateX(0)"}),u>0&&setTimeout(()=>{t(g)},u),g}function t(i){i&&(i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout(()=>{i.remove()},300))}function e(i="Loading..."){const c=r(`<span class="loading-spinner"></span> ${i}`,"info",0),u=document.createElement("style");return u.textContent=`
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
            .loading-spinner {
                display: inline-block;
                width: 14px;
                height: 14px;
                border: 2px solid rgba(255,255,255,0.3);
                border-top-color: white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 8px;
                vertical-align: middle;
            }
        `,document.querySelector("style[data-loading-spinner]")||(u.setAttribute("data-loading-spinner","true"),document.head.appendChild(u)),{dismiss:()=>t(c),update:g=>{const d=c.querySelector("span:nth-child(2)");d&&(d.innerHTML=`<span class="loading-spinner"></span> ${g}`)}}}function n(i,c){return r(i,"success",c)}function o(i,c=8e3){return r(i,"error",c)}function l(i,c){return r(i,"warning",c)}function a(i,c){return r(i,"info",c)}window.Notify={show:r,success:n,error:o,warning:l,info:a,loading:e}}();const DataCacheManager=(()=>{const f="gbsv_cache_";function r(i,c,u=3e5){try{const g=f+i,d={data:c,timestamp:Date.now(),ttl:u,version:window.APP_VERSION||"1.0.0"};localStorage.setItem(g,JSON.stringify(d))}catch(g){console.warn("[DataCache] Failed to cache:",i,g)}}function t(i){try{const c=f+i,u=localStorage.getItem(c);if(!u)return null;const g=JSON.parse(u);return Date.now()-g.timestamp>g.ttl||window.APP_VERSION&&g.version!==window.APP_VERSION?(localStorage.removeItem(c),null):g.data}catch(c){return console.warn("[DataCache] Failed to read cache:",i,c),null}}function e(i){try{const c=f+i;localStorage.removeItem(c)}catch(c){console.warn("[DataCache] Failed to remove:",i,c)}}function n(){try{Object.keys(localStorage).forEach(c=>{c.startsWith(f)&&localStorage.removeItem(c)})}catch(i){console.warn("[DataCache] Failed to clear:",i)}}async function o(i,c={},u=i,g=3e5){const d=t(u);if(d)return console.log("[DataCache] Hit:",u),d;console.log("[DataCache] Miss:",u);const h=await fetch(i,c);if(!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);const p=await h.json();return r(u,p,g),p}function l(i){return t(i)!==null}function a(){try{const c=Object.keys(localStorage).filter(g=>g.startsWith(f));let u=0;return c.forEach(g=>{const d=localStorage.getItem(g);d&&(u+=d.length)}),{entries:c.length,sizeBytes:u,sizeKB:(u/1024).toFixed(2)}}catch{return{entries:0,sizeBytes:0,sizeKB:"0"}}}return{set:r,get:t,remove:e,clear:n,fetchWithCache:o,has:l,getStats:a}})();window.DataCacheManager=DataCacheManager;const LazyScriptLoader=(()=>{const f=new Set,s=new Map;function r(o,l={}){if(s.has(o))return s.get(o);if(f.has(o))return Promise.resolve();const a=new Promise((i,c)=>{const u=document.createElement("script");u.src=o,u.async=l.async!==!1,l.defer&&(u.defer=!0),l.type&&(u.type=l.type),l.crossOrigin&&(u.crossOrigin=l.crossOrigin),u.onload=()=>{f.add(o),s.delete(o),i()},u.onerror=()=>{s.delete(o),c(new Error(`Failed to load script: ${o}`))},document.head.appendChild(u)});return s.set(o,a),a}function t(o,l={}){return Promise.all(o.map(a=>r(a,l)))}function e(o,l={}){return new Promise(a=>{const i=()=>{const c=Array.isArray(o)?o:[o];t(c,l).then(a).catch(a)};document.readyState==="complete"?i():window.addEventListener("load",i)})}function n(o,l={}){return new Promise(a=>{const i=()=>{const c=Array.isArray(o)?o:[o];t(c,l).then(a).catch(a)};"requestIdleCallback"in window?requestIdleCallback(i,{timeout:2e3}):setTimeout(i,1e3)})}return{loadScript:r,loadScripts:t,loadAfterInteractive:e,loadWhenIdle:n}})();window.LazyScriptLoader=LazyScriptLoader,window.LogoLoader=(()=>{const f=window.APP_CONFIG&&window.APP_CONFIG.LOGO_BASE_URL||null,s=window.APP_CONFIG&&window.APP_CONFIG.LOGO_FALLBACK_URL||null,r="https://gbsvorchestratorstorage.blob.core.windows.net/team-logos",t=[f,s,r].filter(Boolean),e="https://a.espncdn.com/i/teamlogos",n=new Map;let o=null;async function l(){if(o)return o;for(const d of t)try{return await new Promise((h,p)=>{const m=new Image;m.onload=()=>h(),m.onerror=()=>p(new Error("probe failed"));const L=Date.now();m.src=`${d}/leagues-500-nba.png?probe=${L}`}),o=d,o}catch{}return o=t[0]||r,o}l();function a(){return o||t[0]||r}function i(d,h){const p=`${d}-${h}`;if(n.has(p))return n.get(p);const L={nba:"nba",nfl:"nfl",ncaam:"ncaa",ncaab:"ncaa",ncaaf:"ncaa",ncaf:"ncaa"}[d]||d;let b=`${a()}/${L}-500-${h}.png`;return n.set(p,b),b}function c(d){if(!d)return"";const h=d.toString().toLowerCase();if(h==="ncaab"||h==="ncaam"||h==="ncaa-basketball")return"/assets/icons/league-ncaam.svg";if(h==="ncaaf"||h==="ncaa-football")return"/assets/icons/league-ncaaf.svg";const m={nba:"leagues-500-nba.png",nfl:"leagues-500-nfl.png"}[h]||`leagues-500-${h}.png`,L=a();return L?`${L}/${m}`:`/assets/${h}-logo.png`}function u(d){d.forEach(h=>{const p=i(h.league,h.teamId),m=new Image;m.src=p})}function g(){return{cached:n.size,storageUrl:a(),fallbackUrl:e}}return{getLogoUrl:i,getLeagueLogoUrl:c,preloadLogos:u,getStats:g,AZURE_BLOB_URL:r,ESPN_CDN_URL:e}})(),window.LogoLoader=window.LogoLoader,function(){"use strict";const f=window.APP_CONFIG&&window.APP_CONFIG.LOGO_BASE_URL||null,s=window.APP_CONFIG&&window.APP_CONFIG.LOGO_FALLBACK_URL||null,t=f||s||"https://gbsvorchestratorstorage.blob.core.windows.net/team-logos";function e(i){if(!i)return null;try{const c=new URL(i,window.location.origin);if(!/espncdn\.com$/.test(c.hostname)&&!/\.espncdn\.com$/.test(c.hostname))return null;const u=c.pathname.split("/").filter(Boolean),g=u.indexOf("teamlogos");if(g===-1||u.length<g+3)return null;const d=u[g+1],h=u[g+2],p=u[g+3]||"";if(d==="leagues"){const b=p.replace(".png","");return b?`${t}/leagues-500-${b}.png`:null}const m=d,A=(h==="500"?p:h).replace(".png","");return!m||!A?null:`${t}/${m}-500-${A}.png`}catch{return null}}function n(i){if(!i||!i.src)return;const c=e(i.src);c&&c!==i.src&&(i.src=c)}function o(){document.querySelectorAll('img[src*="espncdn.com/i/teamlogos/"]').forEach(n)}const l=Object.getOwnPropertyDescriptor(HTMLImageElement.prototype,"src");if(l&&l.set){const i=l.set;Object.defineProperty(HTMLImageElement.prototype,"src",{configurable:!0,enumerable:l.enumerable,get:l.get,set(c){const u=e(c)||c;return i.call(this,u)}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o,{once:!0}):o(),new MutationObserver(i=>{i.forEach(c=>{c.addedNodes.forEach(u=>{u.tagName==="IMG"?n(u):u.querySelectorAll&&u.querySelectorAll("img").forEach(n)})})}).observe(document.documentElement||document.body,{childList:!0,subtree:!0}),window.LogoUrlRewriter={convertEspnUrl:e,rewriteExistingImages:o}}(),function(){"use strict";function f(o,l="error",a=5e3){if(window.Notifications&&typeof window.Notifications.show=="function"){window.Notifications.show(o,l,a);return}const i=document.createElement("div");i.className=`error-notification error-notification-${l}`,i.setAttribute("role","alert"),i.setAttribute("aria-live","polite");const c=l==="error"||l==="warning"?"\u26A0\uFE0F":"\u2139\uFE0F";if(i.innerHTML=`
            <span class="error-icon">${c}</span>
            <span class="error-message">${e(o)}</span>
            <button class="error-close" aria-label="Close notification">\xD7</button>
        `,!document.getElementById("error-notification-styles")){const g=document.createElement("style");g.id="error-notification-styles",g.textContent=`
                .error-notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: rgba(220, 53, 69, 0.95);
                    color: white;
                    padding: 12px 16px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    max-width: 400px;
                    animation: slideIn 0.3s ease-out;
                }
                .error-notification-warning {
                    background: rgba(255, 193, 7, 0.95);
                    color: #000;
                }
                .error-notification-info {
                    background: rgba(0, 123, 255, 0.95);
                    color: white;
                }
                .error-notification .error-close {
                    background: none;
                    border: none;
                    color: inherit;
                    font-size: 20px;
                    cursor: pointer;
                    padding: 0;
                    margin-left: auto;
                    opacity: 0.8;
                }
                .error-notification .error-close:hover {
                    opacity: 1;
                }
                @keyframes slideIn {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `,document.head.appendChild(g)}document.body.appendChild(i),i.querySelector(".error-close").addEventListener("click",()=>{i.remove()}),a>0&&setTimeout(()=>{i.style.animation="slideIn 0.3s ease-out reverse",setTimeout(()=>i.remove(),300)},a)}function s(o,l="API request"){let a="An error occurred";o instanceof Response?o.status===404?a=`${l}: Service not found`:o.status===500?a=`${l}: Server error`:o.status===403?a=`${l}: Access denied`:a=`${l}: HTTP ${o.status}`:o instanceof Error?a=`${l}: ${o.message}`:typeof o=="string"&&(a=`${l}: ${o}`),console.error(`[ErrorHandler] ${l}:`,o),f(a,"error")}function r(o,l="access"){const a=`Failed to ${l} local storage. Your data may not be saved.`;console.error(`[ErrorHandler] Storage ${l} error:`,o),f(a,"warning",7e3)}function t(o,l="data"){const a=`Failed to parse ${l}. Please check the format.`;console.error(`[ErrorHandler] Parse error (${l}):`,o),f(a,"error")}function e(o){const l=document.createElement("div");return l.textContent=o,l.innerHTML}function n(){window.addEventListener("error",o=>{console.error("[ErrorHandler] Uncaught error:",o.error),o.error&&o.error.message&&!o.error.message.includes("Script error")&&f("An unexpected error occurred. Please refresh the page.","error",1e4)}),window.addEventListener("unhandledrejection",o=>{console.error("[ErrorHandler] Unhandled promise rejection:",o.reason),s(o.reason,"Async operation")})}window.ErrorHandler={show:f,handleApi:s,handleStorage:r,handleParse:t,escapeHtml:e},n()}(),function(){"use strict";class f{constructor(){this.memoryCache=new Map,this.preloadQueue=[],this.batchSize=10,this.isPreloading=!1,this.localStorageKey="gbsv_logo_cache_v1",this.cacheVersion="1.0",this.maxCacheAge=24*60*60*1e3,this.maxCacheSize=100,this.loadFromLocalStorage(),this.getTeamLogo=this.getTeamLogo.bind(this),this.preloadLogos=this.preloadLogos.bind(this)}loadFromLocalStorage(){try{const t=localStorage.getItem(this.localStorageKey);if(t){const e=JSON.parse(t);if(e.version===this.cacheVersion){const n=Date.now();for(const[o,l]of Object.entries(e.logos||{}))n-l.timestamp<this.maxCacheAge&&this.memoryCache.set(o,l.url)}}}catch(t){console.warn("Failed to load logo cache from localStorage:",t)}}saveToLocalStorage(){try{const t={version:this.cacheVersion,logos:{}},e=Array.from(this.memoryCache.entries());e.length>this.maxCacheSize&&e.splice(this.maxCacheSize);for(const[n,o]of e)t.logos[n]={url:o,timestamp:Date.now()};localStorage.setItem(this.localStorageKey,JSON.stringify(t))}catch(t){console.warn("Failed to save logo cache to localStorage:",t)}}async getTeamLogo(t,e="nfl"){if(!t)return"";const n=`${e}:${t.toLowerCase()}`;if(this.memoryCache.has(n))return this.memoryCache.get(n);if(window.APP_CONFIG&&window.APP_CONFIG.API_BASE_URL)try{const a=await fetch(`${window.APP_CONFIG.API_BASE_URL}/get-logo?team=${encodeURIComponent(t)}&league=${encodeURIComponent(e)}`);if(a.ok){const c=(await a.json()).logoUrl;return this.memoryCache.set(n,c),this.saveToLocalStorage(),c}}catch(a){console.warn(`Failed to fetch logo from API for ${t}:`,a)}const l=this.generateLogoUrl(t,e);return this.memoryCache.set(n,l),this.saveToLocalStorage(),l}generateLogoUrl(t,e){const n=this.normalizeTeamName(t,e);if(window.LogoLoader&&typeof window.LogoLoader.getLogoUrl=="function")return window.LogoLoader.getLogoUrl(e,n);const o=window.APP_CONFIG&&(window.APP_CONFIG.LOGO_BASE_URL||window.APP_CONFIG.LOGO_FALLBACK_URL)||"https://gbsvorchestratorstorage.blob.core.windows.net/team-logos";if(e==="ncaaf"||e==="college"){const l=this.getNCAATeamId(t)||"default";return`${o}/ncaa-500-${l}.png`}return`${o}/${e}-500-${n}.png`}normalizeTeamName(t,e){const n=t.toLowerCase().replace(/[^a-z0-9]/g,"");return{raiders:"lv",lasvegas:"lv",lasvegasraiders:"lv","49ers":"sf",sanfrancisco:"sf",rams:"lar",larams:"lar",chargers:"lac",lachargers:"lac",cardinals:"ari",arizona:"ari",packers:"gb",greenbay:"gb",patriots:"ne",newengland:"ne",saints:"no",neworleans:"no",buccaneers:"tb",tampabay:"tb",commanders:"wsh",washington:"wsh"}[n]||t.toLowerCase().substring(0,3)}getNCAATeamId(t){const e={alabama:"333",georgia:"61",ohiostate:"194",michigan:"130",texas:"251",oklahoma:"201"},n=t.toLowerCase().replace(/[^a-z]/g,"");return e[n]||null}async preloadLogos(t){if(this.isPreloading||!t||t.length===0)return;this.isPreloading=!0;const e=new Set;for(const o of t){const l=o.league||o.sport||"nfl";o.awayTeam&&e.add(`${l}:${o.awayTeam}`),o.homeTeam&&e.add(`${l}:${o.homeTeam}`)}const n=Array.from(e);for(let o=0;o<n.length;o+=this.batchSize){const l=n.slice(o,o+this.batchSize);await Promise.all(l.map(a=>{const[i,c]=a.split(":");return this.getTeamLogo(c,i).catch(u=>(console.warn(`Failed to preload logo for ${c}:`,u),""))})),o+this.batchSize<n.length&&await new Promise(a=>setTimeout(a,100))}this.isPreloading=!1}clearCache(){this.memoryCache.clear();try{localStorage.removeItem(this.localStorageKey)}catch(t){console.warn("Failed to clear localStorage cache:",t)}}getCacheStats(){return{memorySize:this.memoryCache.size,localStorageKey:this.localStorageKey,maxAge:this.maxCacheAge,maxSize:this.maxCacheSize,isPreloading:this.isPreloading}}}const s=new f;if(window.LogoCache=s,window.getCachedTeamLogo=s.getTeamLogo,window.preloadTeamLogos=s.preloadLogos,typeof window.getTeamLogo=="function"){const r=window.getTeamLogo;window.getTeamLogo=function(t,e){return s.getTeamLogo(t,e).catch(()=>r(t,e))}}else window.getTeamLogo=s.getTeamLogo;console.log("Logo cache initialized")}(),function(){"use strict";const f={isLoading:!1,loadingOverlay:null,init(){this.createLoadingOverlay(),this.setupNavLinkHandlers(),this.setupLinkPrefetch(),this.setupHistoryHandler(),window.addEventListener("load",()=>this.hideLoading()),document.addEventListener("DOMContentLoaded",()=>this.hideLoading()),setTimeout(()=>this.hideLoading(),1500)},createLoadingOverlay(){if(!document.getElementById("page-transition-overlay")){const s=document.createElement("div");if(s.id="page-transition-overlay",s.className="page-transition-overlay",s.innerHTML=`
                    <div class="page-transition-content">
                        <div class="page-transition-spinner"></div>
                        <p class="page-transition-text">Loading...</p>
                    </div>
                `,document.body.appendChild(s),!document.getElementById("page-transition-styles")){const r=document.createElement("style");r.id="page-transition-styles",r.textContent=`
                        .page-transition-overlay {
                            position: fixed;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: rgba(3, 11, 22, 0.95);
                            backdrop-filter: blur(2px);
                            z-index: 99998;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            opacity: 0;
                            visibility: hidden;
                            transition: opacity 0.3s ease, visibility 0.3s ease;
                            pointer-events: none;
                        }

                        .page-transition-overlay.visible {
                            opacity: 1;
                            visibility: visible;
                            pointer-events: auto;
                        }

                        .page-transition-content {
                            text-align: center;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            gap: 16px;
                        }

                        .page-transition-spinner {
                            width: 40px;
                            height: 40px;
                            border: 3px solid rgba(0, 214, 137, 0.2);
                            border-top-color: #00d689;
                            border-radius: 50%;
                            animation: pageTransitionSpin 1s linear infinite;
                        }

                        @keyframes pageTransitionSpin {
                            to { transform: rotate(360deg); }
                        }

                        .page-transition-text {
                            color: rgba(214, 232, 236, 0.8);
                            font-family: 'Cormorant Garamond', Georgia, serif;
                            font-size: 0.95rem;
                            letter-spacing: 0.05em;
                            margin: 0;
                        }

                        /* Fade in body content when new page loads */
                        body {
                            animation: pageContentFadeIn 0.4s ease forwards;
                        }

                        @keyframes pageContentFadeIn {
                            from {
                                opacity: 0.95;
                            }
                            to {
                                opacity: 1;
                            }
                        }

                        /* Smooth fade out on page exit */
                        body.page-exiting {
                            animation: pageContentFadeOut 0.3s ease forwards;
                        }

                        @keyframes pageContentFadeOut {
                            from {
                                opacity: 1;
                            }
                            to {
                                opacity: 0.95;
                            }
                        }
                    `,document.head.appendChild(r)}}this.loadingOverlay=document.getElementById("page-transition-overlay")},setupNavLinkHandlers(){document.addEventListener("click",s=>{const r=s.target.closest("a.nav-link");if(r&&!r.hasAttribute("aria-disabled")){const t=r.getAttribute("href");if(t&&!t.startsWith("http")&&!t.startsWith("#")){const e=(location.pathname.split("/").pop()||"index.html").toLowerCase(),n=(t.split("/").pop()||"index.html").toLowerCase();e!==n&&(s.preventDefault(),this.transitionToPage(t))}}},!0)},transitionToPage(s){this.isLoading||(this.isLoading=!0,this.showLoading(),setTimeout(()=>{window.location.href=s},100))},showLoading(){this.loadingOverlay&&this.loadingOverlay.classList.add("visible")},hideLoading(){this.loadingOverlay&&this.loadingOverlay.classList.remove("visible"),this.isLoading=!1},setupLinkPrefetch(){document.querySelectorAll("a.nav-link").forEach(r=>{r.addEventListener("mouseenter",()=>{const t=r.getAttribute("href");if(t&&!document.querySelector(`link[rel="prefetch"][href="${t}"]`)){const e=document.createElement("link");e.rel="prefetch",e.href=t,document.head.appendChild(e)}})})},setupHistoryHandler(){window.addEventListener("pageshow",()=>{this.hideLoading()}),window.addEventListener("pagehide",()=>{this.showLoading()})}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>f.init()):f.init(),window.PageTransitionHandler=f}(),function(){"use strict";const f={},s=n=>String(n||"").toLowerCase(),r=n=>{const o=s(n),l=`${o.toUpperCase()}_API_URL`,a=window.APP_CONFIG?.[l];if(a&&typeof a=="string")return a;const i=window.APP_CONFIG?.API_BASE_FALLBACK||window.APP_CONFIG?.API_BASE_URL||`${window.location.origin}/api`;return i?`${i}/${o}`:f[o]?.api||""},t=n=>{const o=s(n),l=`${o.toUpperCase()}_FUNCTION_URL`,a=window.APP_CONFIG?.[l];return a&&typeof a=="string"?a:f[o]?.func||""},e=async()=>{if(window.ModelEndpointBootstrap?.hydrate)try{await window.ModelEndpointBootstrap.hydrate()}catch(n){console.warn("[MODEL-ENDPOINT-RESOLVER] Registry hydrate failed:",n.message)}};window.ModelEndpointResolver={getApiEndpoint:r,getFunctionEndpoint:t,ensureRegistryHydrated:e}}(),function(){"use strict";const s=["nba","ncaam","nfl","ncaaf","nhl","mlb"],r=async(e,n=6e3)=>{const o=new AbortController,l=setTimeout(()=>o.abort(),n);try{const a=await fetch(e,{signal:o.signal,headers:{Accept:"application/json"}});return clearTimeout(l),a}catch(a){throw clearTimeout(l),a}},t=async()=>{if(!window.APP_CONFIG?.DYNAMIC_REGISTRY_ENABLED){console.log("[MODEL-ENDPOINTS] Dynamic registry disabled - using static config.js endpoints"),console.log("[MODEL-ENDPOINTS] \u2022 To enable dynamic registry, set DYNAMIC_REGISTRY_ENABLED: true in config.js"),console.log("[MODEL-ENDPOINTS] \u2022 Requires Azure Functions deployment with ModelRegistry function"),window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="static",window.APP_CONFIG.MODEL_ENDPOINTS_LAST_UPDATED=new Date().toISOString();return}const e=window.APP_CONFIG?.API_BASE_URL,n=window.APP_CONFIG?.API_BASE_FALLBACK,o=window.APP_CONFIG?.FUNCTIONS_BASE_URL,l=async d=>{if(!d)return null;const h=`${d}/registry`;console.log("[MODEL-ENDPOINTS] Fetching model endpoints from registry:",h);const p=await r(h);if(!p.ok)throw new Error(`Registry request failed: ${p.status}`);const m=(p.headers.get("content-type")||"").toLowerCase();if(!m.includes("application/json"))throw new Error(`Unexpected content-type: ${m}`);return await p.json()};let a=null;const i=[{name:"primary",base:e},{name:"fallback",base:n},{name:"functions",base:o?`${o}/api`:null}].filter(d=>d.base);for(const d of i)try{if(a=await l(d.base),a){console.log(`[MODEL-ENDPOINTS] \u2022 Registry loaded from ${d.name}`);break}}catch(h){console.warn(`[MODEL-ENDPOINTS] ${d.name} registry fetch failed:`,h.message)}if(!a){console.warn("[MODEL-ENDPOINTS] Unable to refresh endpoints from registry (all sources failed)"),console.log("[MODEL-ENDPOINTS] \u2022 Using fallback endpoints from config.js"),console.log("[MODEL-ENDPOINTS] \u2022 Consider setting DYNAMIC_REGISTRY_ENABLED: false if registry not deployed"),window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="static-fallback";return}const c=Object.keys(a||{}),u=[...new Set([...s,...c])];let g=0;u.forEach(d=>{const h=a?.[d];if(h?.endpoint){const p=`${d.toUpperCase()}_API_URL`,m=window.APP_CONFIG[p];window.APP_CONFIG[p]=h.endpoint,g++,m!==h.endpoint&&console.log(`[MODEL-ENDPOINTS] Updated ${d.toUpperCase()} endpoint: ${h.endpoint}`)}}),window.APP_CONFIG.MODEL_ENDPOINTS_LAST_UPDATED=new Date().toISOString(),window.APP_CONFIG.MODEL_ENDPOINTS_COUNT=g,window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="registry",g>0&&console.log(`[MODEL-ENDPOINTS] Hydrated ${g} endpoints from registry`),console.log(`[MODEL-ENDPOINTS] \u2022 Registry hydration complete - ${g} endpoints updated`)};t(),window.ModelEndpointBootstrap={hydrate:t,getKnownLeagues:()=>s}}(),function(){"use strict";async function r(a,i=15e3){const c=new AbortController,u=setTimeout(()=>c.abort(),i);try{const g=await fetch(a,{signal:c.signal});return clearTimeout(u),g}catch(g){throw clearTimeout(u),g.name==="AbortError"?new Error(`Request timed out after ${i}ms`):g}}function t(a,i=0){const c=(a??"").toString().trim(),u=c.toUpperCase(),g={MAX:5,ELITE:5,STRONG:4,GOOD:3,STANDARD:2,LOW:1};if(u in g)return g[u];if(c.includes("%")){const h=parseFloat(c.replace("%",""));if(!Number.isNaN(h))return h>=80?5:h>=65?4:h>=50?3:h>=35?2:1}const d=parseInt(c,10);return!Number.isNaN(d)&&c!==""?Math.max(0,Math.min(5,d)):typeof i=="number"&&i>0?Math.max(0,Math.min(5,Math.ceil(i/1.5))):3}function e(){return window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}function n(){return window.APP_CONFIG?.FUNCTIONS_BASE_URL||window.location.origin}function o(a){const i=window.ModelEndpointResolver?.getApiEndpoint(a);if(i)return i;const c=`${a.toUpperCase()}_API_URL`,u=window.APP_CONFIG?.[c];if(u)return u;const g=window.APP_CONFIG?.API_BASE_FALLBACK;return g?`${g}/${a.toLowerCase()}`:""}function l(a){this.sport=a.sport,this.tag=a.tag||`[${a.sport}-FETCHER]`,this.buildPrimaryUrl=a.buildPrimaryUrl,this.buildFallbackUrl=a.buildFallbackUrl,this.formatPickForTable=a.formatPickForTable,this.timeoutMs=a.timeoutMs||15e3,this.cacheDurationMs=a.cacheDurationMs||6e4,this.onFetchFail=a.onFetchFail||null,this._cache={},this._lastSource=null}l.prototype.fetchPicks=async function(a){a=a||"today",window.ModelEndpointResolver?.ensureRegistryHydrated&&window.ModelEndpointResolver.ensureRegistryHydrated();const i=this._cache[a];if(i&&Date.now()-i.timestamp<this.cacheDurationMs)return i.data;const c=this.buildPrimaryUrl(a);try{let u=await r(c,this.timeoutMs);if(u.ok)this._lastSource="primary";else{const d=this.buildFallbackUrl(a);if(d&&(u=await r(d,this.timeoutMs)),!u.ok&&this.onFetchFail){const h=await this.onFetchFail(a,u);h&&(u=h)}if(!u.ok)throw new Error(`${this.tag} All routes failed (${u.status})`);this._lastSource="fallback"}const g=await u.json();return this._cache[a]={data:g,timestamp:Date.now()},g}catch(u){throw u}},l.prototype.checkHealth=async function(){const a=o(this.sport.toLowerCase());try{const i=await r(`${a}/health`,5e3);return i.ok?{status:"healthy",...await i.json(),containerApp:a}:{status:"error",code:i.status,containerApp:a}}catch(i){return{status:"error",message:i.message,containerApp:a}}},l.prototype.clearCache=function(a){a?delete this._cache[a]:this._cache={}},l.prototype.getCache=function(a){return this._cache[a||"today"]?.data||null},l.prototype.getLastSource=function(){return this._lastSource},window.BaseSportFetcher=l,window.BaseSportFetcher.utils={fetchWithTimeout:r,normalizeFireRating:t,getBaseApiUrl:e,getFunctionsBase:n,getContainerEndpoint:o}}();class NavigationManager{constructor(){this.dropdowns=[],this.navLinks=null,this.isInitialized=!1,this.mobileMenuOpen=!1,this.mobileMenuToggle=null,this.mobileMenuOverlay=null,this.init()}init(){if(this.isInitialized)return;this.setupMobileMenu(),document.querySelectorAll(".nav-dropdown").forEach(r=>{const t=r.querySelector(".nav-dropdown-trigger"),e=r.querySelector(".nav-dropdown-menu");t&&e&&(this.dropdowns.push({dropdown:r,trigger:t,menu:e}),this.setupDropdown(r,t,e))}),this.navLinks=document.querySelectorAll(".nav-link"),this.setupKeyboardNavigation(),this.setupResponsiveBehavior(),this.setupAccessibility(),this.setupNavState(),this.setupTableScrollIndicators(),this.isInitialized=!0}setupMobileMenu(){const s=document.querySelector(".brand-nav"),r=document.querySelector(".nav-links");!s||!r||(document.querySelector(".mobile-menu-toggle")?this.mobileMenuToggle=document.querySelector(".mobile-menu-toggle"):(this.mobileMenuToggle=document.createElement("button"),this.mobileMenuToggle.className="mobile-menu-toggle",this.mobileMenuToggle.setAttribute("aria-label","Toggle navigation menu"),this.mobileMenuToggle.setAttribute("aria-expanded","false"),this.mobileMenuToggle.innerHTML="<span></span>",s.insertBefore(this.mobileMenuToggle,s.firstChild)),document.querySelector(".mobile-menu-overlay")?this.mobileMenuOverlay=document.querySelector(".mobile-menu-overlay"):(this.mobileMenuOverlay=document.createElement("div"),this.mobileMenuOverlay.className="mobile-menu-overlay",document.body.appendChild(this.mobileMenuOverlay)),this.mobileMenuToggle.addEventListener("click",t=>{t.stopPropagation(),this.toggleMobileMenu()}),this.mobileMenuOverlay.addEventListener("click",()=>{this.closeMobileMenu()}),r.querySelectorAll(".nav-link:not(.nav-dropdown-trigger)").forEach(t=>{t.addEventListener("click",()=>{this.closeMobileMenu()})}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.mobileMenuOpen&&this.closeMobileMenu()}))}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen;const s=document.querySelector(".nav-links");this.mobileMenuOpen?(s?.classList.add("mobile-open"),this.mobileMenuToggle?.classList.add("active"),this.mobileMenuOverlay?.classList.add("active"),this.mobileMenuToggle?.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden"):(s?.classList.remove("mobile-open"),this.mobileMenuToggle?.classList.remove("active"),this.mobileMenuOverlay?.classList.remove("active"),this.mobileMenuToggle?.setAttribute("aria-expanded","false"),document.body.style.overflow="")}closeMobileMenu(){this.mobileMenuOpen&&(this.mobileMenuOpen=!1,document.querySelector(".nav-links")?.classList.remove("mobile-open"),this.mobileMenuToggle?.classList.remove("active"),this.mobileMenuOverlay?.classList.remove("active"),this.mobileMenuToggle?.setAttribute("aria-expanded","false"),document.body.style.overflow="")}setupTableScrollIndicators(){document.querySelectorAll(".table-container").forEach(r=>{const t=()=>{const e=r.scrollLeft,n=r.scrollWidth,o=r.clientWidth;e<n-o-5?r.classList.add("scroll-right"):r.classList.remove("scroll-right"),e>5?r.classList.add("scroll-left"):r.classList.remove("scroll-left")};r.addEventListener("scroll",t),window.addEventListener("resize",t),setTimeout(t,100)})}setupDropdown(s,r,t){r.addEventListener("click",e=>{e.stopPropagation(),this.toggleDropdown(s,r,t)}),r.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),e.stopPropagation(),this.toggleDropdown(s,r,t))}),document.addEventListener("click",e=>{s.contains(e.target)||this.closeDropdown(s,r,t)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&s.classList.contains("open")&&(this.closeDropdown(s,r,t),r.focus())}),s.querySelector(".sportsbook-card")&&(this.setupSyncHandlers(t),t.querySelectorAll(".add-book-btn-compact").forEach(n=>{n.addEventListener("click",o=>{o.preventDefault(),this.handleAddSportsbook()})}))}setupSyncHandlers(s){s.querySelectorAll(".sportsbook-fetch-btn-compact, .sportsbook-fetch-compact, .sportsbook-fetch-btn-sleek, .sportsbook-fetch-inline").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const n=t.closest(".sportsbook-card"),o=n.querySelector(".sportsbook-name")?.textContent||"Sportsbook";this.handleSync(n,o)})})}handleSync(s,r){s.classList.add("syncing"),this.showNotification(`Syncing picks from ${r}...`,"info"),setTimeout(()=>{s.classList.remove("syncing");const t=s.querySelector(".sync-time");t&&(t.textContent="Just now"),this.showNotification(`Successfully synced picks from ${r}`,"success")},2e3)}handleAddSportsbook(){this.showNotification("Add Sportsbook feature coming soon","info")}showNotification(s,r="info"){const t=document.createElement("div");t.className=`notification notification-${r}`,t.textContent=s;const l=r==="error"?"linear-gradient(135deg, rgba(20, 20, 30, 0.95), rgba(40, 40, 50, 0.92))":r==="success"?"linear-gradient(135deg, rgba(0, 214, 137, 0.95), rgba(60, 255, 181, 0.92))":"linear-gradient(135deg, rgba(6, 28, 20, 0.95), rgba(16, 58, 40, 0.92))",a=r==="error"?"rgba(214, 40, 40, 0.5)":"rgba(60, 255, 181, 0.7)",i=r==="error"?"#FF6B6B":r==="success"?"#03150e":"#e8f0f2",c=r==="error"?"0 18px 32px rgba(0, 0, 0, 0.5)":"0 18px 32px rgba(60, 255, 181, 0.35)";t.style.cssText=`
            position: fixed;
            top: 24px;
            right: 24px;
            background: ${l};
            color: ${i};
            padding: 14px 22px;
            border-radius: 14px;
            border: 1px solid ${a};
            z-index: 999999;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.4px;
            box-shadow: ${c};
            backdrop-filter: blur(14px);
            text-shadow: ${r==="error"?"none":"0 1px 1px rgba(0, 0, 0, 0.15)"};
            animation: slideIn 0.3s ease-out;
        `,document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease-in forwards",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300)},3e3)}toggleDropdown(s,r,t){const e=!s.classList.contains("open");this.dropdowns.forEach(({dropdown:n,trigger:o,menu:l})=>{n!==s&&n.classList.contains("open")&&this.closeDropdown(n,o,l)}),s.classList.toggle("open",e),r.setAttribute("aria-expanded",e),t&&(e?(t.removeAttribute("hidden"),t.offsetHeight):setTimeout(()=>{s.classList.contains("open")||t.setAttribute("hidden","")},200))}closeDropdown(s,r,t){s.classList.remove("open"),r.setAttribute("aria-expanded","false"),t&&setTimeout(()=>{s.classList.contains("open")||t.setAttribute("hidden","")},200)}closeAllDropdowns(){this.dropdowns.forEach(({dropdown:s,trigger:r,menu:t})=>{this.closeDropdown(s,r,t)})}setupKeyboardNavigation(){this.navLinks.forEach(s=>{s.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),s.click())})})}setupResponsiveBehavior(){let s;window.addEventListener("resize",()=>{clearTimeout(s),s=setTimeout(()=>{this.handleResize()},100)})}handleResize(){window.innerWidth<=768&&this.closeAllDropdowns(),window.innerWidth>767&&this.mobileMenuOpen&&this.closeMobileMenu()}setupAccessibility(){this.dropdowns.forEach(({dropdown:s,trigger:r,menu:t})=>{if(r){r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true");const e=t?.getAttribute("id");e&&r.setAttribute("aria-controls",e)}if(t){t.setAttribute("role","menu");const e=r?.getAttribute("id");e&&t.setAttribute("aria-labelledby",e)}}),this.setupScreenReaderSupport()}setupScreenReaderSupport(){let s=document.getElementById("navigation-live-region");s||(s=document.createElement("div"),s.id="navigation-live-region",s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),s.className="sr-only",document.body.appendChild(s)),this.liveRegion=s}openDropdown(s,r,t){s.classList.contains("open")||this.toggleDropdown(s,r,t)}setupNavState(){try{const s=document.querySelectorAll(".nav-link"),r=(location.pathname.split("/").pop()||"").toLowerCase();s.forEach(t=>{const e=(t.getAttribute("href")||"").toLowerCase();if(t.getAttribute("aria-disabled")==="true"){t.classList.remove("active"),t.removeAttribute("aria-current");return}const o=!!e&&(e===r||r===""&&e==="index.html");t.classList.toggle("active",o),o?t.setAttribute("aria-current","page"):t.removeAttribute("aria-current")})}catch{}}destroy(){this.isInitialized=!1}}const styleSheet=document.createElement("style");styleSheet.textContent=`
    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateX(20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    @keyframes slideOut {
        from {
            opacity: 1;
            transform: translateX(0);
        }
        to {
            opacity: 0;
            transform: translateX(20px);
        }
    }
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }
`,document.head.appendChild(styleSheet);class BackToTopButton{constructor(){this.button=document.getElementById("back-to-top"),this.scrollThreshold=200,this.button&&this.init()}init(){let s=!1;window.addEventListener("scroll",()=>{s||(window.requestAnimationFrame(()=>{this.handleScroll(),s=!1}),s=!0)}),this.button.addEventListener("click",()=>{this.scrollToTop()}),this.handleScroll()}handleScroll(){window.scrollY>this.scrollThreshold?this.button.classList.add("visible"):this.button.classList.remove("visible")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}document.addEventListener("DOMContentLoaded",()=>{window.navigationManager=new NavigationManager,window.backToTopButton=new BackToTopButton}),typeof module<"u"&&module.exports&&(module.exports=NavigationManager),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("form.sportsbook-actions-row, form.sportsbook-credentials-group").forEach(f=>{f.addEventListener("submit",s=>s.preventDefault())})}),function(){"use strict";const r={isMobile:!1,isActive:!1,currentPage:"dashboard",fab:null,fabMenu:null,bottomNav:null,mobileUI:null,init(){if(this.detectMobile(),!this.isMobile){console.log("[Mobile] Desktop detected, skipping mobile UI");return}console.log("[Mobile] Initializing unified mobile experience"),this.isActive=!0,this.currentPage=this.detectPage(),this.setupSafeAreas(),this.respectReducedMotion(),this.createFAB(),this.createBottomNav(),this.createSimplifiedControls(),this.attachEventListeners(),document.body.classList.add("is-mobile"),this.applyMobileLayout()},detectMobile(){this.isMobile=window.innerWidth<=767},detectPage(){return document.body.classList.contains("page-picks-tracker")?"picks-tracker":document.body.classList.contains("page-weekly-lineup")?"weekly-lineup":document.body.classList.contains("page-odds-market")?"odds-market":(document.body.classList.contains("page-active-picks"),"dashboard")},setupSafeAreas(){const t=document.createElement("style");t.textContent=`
                @supports (padding: max(0px)) {
                    body {
                        padding-top: max(8px, env(safe-area-inset-top));
                        padding-left: max(8px, env(safe-area-inset-left));
                        padding-right: max(8px, env(safe-area-inset-right));
                        padding-bottom: max(8px, env(safe-area-inset-bottom));
                    }
                    .brand-nav {
                        padding-top: max(8px, env(safe-area-inset-top)) !important;
                        padding-left: max(8px, env(safe-area-inset-left)) !important;
                        padding-right: max(8px, env(safe-area-inset-right)) !important;
                    }
                    .mobile-bottom-nav {
                        padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
                    }
                    body.page-picks-tracker .main-container {
                        padding-bottom: calc(60px + max(8px, env(safe-area-inset-bottom))) !important;
                    }
                }
            `,document.head.appendChild(t)},respectReducedMotion(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){const e=document.createElement("style");e.textContent=`
                    * {
                        animation: none !important;
                        transition: none !important;
                    }
                `,document.head.appendChild(e),console.log("[Mobile] Respecting reduced motion preference")}},createFAB(){let t="\u2713",e="mobile-fab-fetch";this.currentPage==="picks-tracker"?(t="\u27F3",e="mobile-fab-refresh"):this.currentPage==="weekly-lineup"&&(t="\u2B07",e="mobile-fab-fetch"),this.fab=document.createElement("button"),this.fab.className=`mobile-fab ${e}`,this.fab.setAttribute("aria-label",`Mobile ${faLabel==="\u2713"?"confirm":t} action`),this.fab.innerHTML=t,this.fab.style.cssText=`
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background: linear-gradient(135deg, rgba(0, 214, 137, 0.9), rgba(0, 180, 120, 0.9));
                border: 2px solid rgba(0, 255, 170, 0.3);
                color: white;
                font-size: 28px;
                font-weight: bold;
                cursor: pointer;
                z-index: 9999;
                box-shadow: 0 4px 12px rgba(0, 214, 137, 0.3);
                transition: all 0.2s ease;
                min-height: 56px;
                min-width: 56px;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            `,this.fab.addEventListener("mouseenter",()=>{this.fab.style.transform="scale(1.1)",this.fab.style.boxShadow="0 6px 16px rgba(0, 214, 137, 0.4)"}),this.fab.addEventListener("mouseleave",()=>{this.fab.style.transform="scale(1)",this.fab.style.boxShadow="0 4px 12px rgba(0, 214, 137, 0.3)"}),document.body.appendChild(this.fab)},createBottomNav(){this.bottomNav=document.createElement("nav"),this.bottomNav.className="mobile-bottom-nav",this.bottomNav.setAttribute("aria-label","Mobile navigation"),this.bottomNav.style.cssText=`
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                height: 56px;
                background: rgba(3, 11, 22, 0.95);
                backdrop-filter: blur(12px);
                border-top: 1px solid rgba(0, 214, 137, 0.1);
                display: flex;
                justify-content: space-around;
                z-index: 9998;
                padding-bottom: max(8px, env(safe-area-inset-bottom));
            `,[{href:"index.html",icon:"\u{1F3E0}",label:"Dashboard",isActive:this.currentPage==="dashboard"},{href:"weekly-lineup.html",icon:"\u{1F4CB}",label:"Weekly",isActive:this.currentPage==="weekly-lineup"},{href:"picks-tracker.html",icon:"\u{1F4CA}",label:"Tracker",isActive:this.currentPage==="picks-tracker"},{href:"odds-market.html",icon:"\u{1F4B0}",label:"Odds",isActive:this.currentPage==="odds-market"}].forEach(e=>{const n=document.createElement("a");n.href=e.href,n.className=`mobile-nav-item ${e.isActive?"active":""}`,n.setAttribute("aria-current",e.isActive?"page":"false"),n.style.cssText=`
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    gap: 4px;
                    flex: 1;
                    font-size: 22px;
                    color: ${e.isActive?"rgba(0, 214, 137, 1)":"rgba(200, 210, 220, 0.7)"};
                    text-decoration: none;
                    transition: color 0.2s ease;
                    font-size: 10px;
                    min-width: 44px;
                    min-height: 44px;
                    padding: 6px;
                    ${e.isActive?"border-top: 3px solid rgba(0, 214, 137, 0.8)":"border-top: 3px solid transparent"}
                `,n.innerHTML=`<span style="font-size: 24px;">${e.icon}</span><span>${e.label}</span>`,this.bottomNav.appendChild(n)}),document.body.appendChild(this.bottomNav)},createSimplifiedControls(){if(this.mobileUI=document.createElement("div"),this.mobileUI.className="mobile-simplified-ui",this.mobileUI.style.cssText=`
                display: flex;
                flex-direction: column;
                gap: 8px;
                padding: 12px;
                margin-bottom: 12px;
            `,this.currentPage==="dashboard"){const e=document.createElement("button");e.className="mobile-refresh-btn",e.style.cssText=`
                    min-height: 44px;
                    min-width: 44px;
                    padding: 12px 16px;
                    background: rgba(0, 214, 137, 0.12);
                    border: 1px solid rgba(0, 214, 137, 0.3);
                    color: rgba(0, 214, 137, 1);
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                    font-weight: 700;
                    transition: all 0.2s ease;
                `,e.textContent="\u27F3 Refresh Picks",e.addEventListener("click",()=>{window.loadLivePicks&&(window.loadLivePicks(),e.textContent="\u27F3 Loading...",setTimeout(()=>{e.textContent="\u27F3 Refresh Picks"},2e3))}),this.mobileUI.appendChild(e)}const t=document.querySelector(".dashboard-topline")||document.querySelector("header");t&&t.parentNode.insertBefore(this.mobileUI,t.nextSibling)},attachEventListeners(){window.addEventListener("resize",()=>{const t=this.isMobile;this.detectMobile(),t&&!this.isMobile?(console.log("[Mobile] Switched to desktop, cleaning up mobile UI"),this.cleanup()):!t&&this.isMobile&&(console.log("[Mobile] Switched to mobile, initializing UI"),this.init())}),document.addEventListener("touchstart",t=>{t.touches.length>1&&t.preventDefault()},{passive:!1})},applyMobileLayout(){const t=document.createElement("style");t.textContent=`
                /* Mobile-specific adjustments */
                html, body {
                    -webkit-text-size-adjust: 100%;
                    text-size-adjust: 100%;
                    overflow-x: hidden;
                }

                /* Ensure table doesn't overflow on mobile */
                .table-container {
                    overflow-x: auto;
                    -webkit-overflow-scrolling: touch;
                }

                /* Bottom nav spacing */
                body.is-mobile {
                    padding-bottom: 64px;
                }

                /* Touch-friendly form controls */
                input, select, button, textarea {
                    font-size: 16px; /* Prevents zoom on iOS */
                    min-height: 44px;
                    min-width: 44px;
                }

                /* Fixed navigation adjustment */
                .brand-nav {
                    position: fixed;
                    top: 0 !important;
                    z-index: 9999;
                    width: 100%;
                    margin-top: 0 !important;
                }

                /* Content adjustment for fixed nav */
                body.is-mobile > *:not(.brand-nav):not(.mobile-fab):not(.mobile-bottom-nav) {
                    margin-top: 48px;
                }
            `,document.head.appendChild(t)},cleanup(){this.fab&&this.fab.remove(),this.bottomNav&&this.bottomNav.remove(),this.mobileUI&&this.mobileUI.remove(),document.body.classList.remove("is-mobile"),this.isActive=!1}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>r.init()):r.init(),window.MobileUnified=r}(),function(){"use strict";class f{constructor(){this.connection=null,this.hubName="modelHub",this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=5e3,this.listeners=new Map,this.negotiateUrl=window.APP_CONFIG?.FUNCTIONS_BASE_URL?`${window.APP_CONFIG.FUNCTIONS_BASE_URL}/api/signalr/negotiate`:"/api/signalr/negotiate",this.onConnected=null,this.onDisconnected=null,this.onReconnecting=null,this.onError=null}async connect(){if(!window.APP_CONFIG?.SIGNALR_ENABLED)return console.log("[SignalR] Disabled in config - using polling fallback"),console.log("[SignalR] \u2022 To enable, set SIGNALR_ENABLED: true in config.js"),console.log("[SignalR] \u2022 Requires Azure SignalR Service + Azure Functions deployment"),this._startPollingFallback(),!1;if(typeof signalR>"u")return console.warn("[SignalR] Library not loaded, using polling fallback"),this._startPollingFallback(),!1;if((!this.negotiateUrl||this.negotiateUrl==="/api/signalr/negotiate")&&!window.APP_CONFIG?.FUNCTIONS_BASE_URL)return console.log("[SignalR] No FUNCTIONS_BASE_URL configured - using polling fallback"),this._startPollingFallback(),!1;try{console.log("[SignalR] Attempting to negotiate connection...");const t=await fetch(this.negotiateUrl,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Negotiate failed: ${t.status}`);const e=await t.json();return this.connection=new signalR.HubConnectionBuilder().withUrl(e.url,{accessTokenFactory:()=>e.accessToken}).withAutomaticReconnect({nextRetryDelayInMilliseconds:n=>n.previousRetryCount>=this.maxReconnectAttempts?null:Math.min(1e3*Math.pow(2,n.previousRetryCount),3e4)}).configureLogging(signalR.LogLevel.Information).build(),this._setupEventHandlers(),await this.connection.start(),this.isConnected=!0,this.reconnectAttempts=0,console.log("\u2705 SignalR connected to",this.hubName),this.onConnected&&this.onConnected(),window.dispatchEvent(new CustomEvent("signalr:connected",{detail:{hubName:this.hubName}})),!0}catch(t){return console.error("SignalR connection failed:",t),this.onError&&this.onError(t),this._startPollingFallback(),!1}}_setupEventHandlers(){this.connection&&(this.connection.onclose(t=>{this.isConnected=!1,console.log("SignalR disconnected:",t?.message||"Connection closed"),this.onDisconnected&&this.onDisconnected(t),window.dispatchEvent(new CustomEvent("signalr:disconnected"))}),this.connection.onreconnecting(t=>{this.isConnected=!1,console.log("SignalR reconnecting...",t?.message),this.onReconnecting&&this.onReconnecting(t),window.dispatchEvent(new CustomEvent("signalr:reconnecting"))}),this.connection.onreconnected(t=>{this.isConnected=!0,console.log("\u2705 SignalR reconnected:",t),this.onConnected&&this.onConnected(),window.dispatchEvent(new CustomEvent("signalr:reconnected"))}),this.connection.on("modelStatusUpdate",t=>{this._handleMessage("modelStatusUpdate",t)}),this.connection.on("scoreUpdate",t=>{this._handleMessage("scoreUpdate",t)}),this.connection.on("pickStatusChange",t=>{this._handleMessage("pickStatusChange",t)}),this.connection.on("jobComplete",t=>{this._handleMessage("jobComplete",t)}),this.connection.on("notification",t=>{this._handleMessage("notification",t)}))}_handleMessage(t,e){console.log(`SignalR [${t}]:`,e),(this.listeners.get(t)||[]).forEach(o=>{try{o(e)}catch(l){console.error(`Error in SignalR listener for ${t}:`,l)}}),window.dispatchEvent(new CustomEvent(`signalr:${t}`,{detail:e}))}on(t,e){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(e)}off(t,e){const n=this.listeners.get(t);if(n){const o=n.indexOf(e);o>-1&&n.splice(o,1)}}async send(t,...e){if(!this.isConnected||!this.connection)return console.warn("Cannot send: SignalR not connected"),!1;try{return await this.connection.invoke(t,...e),!0}catch(n){return console.error(`SignalR send failed [${t}]:`,n),!1}}async disconnect(){this.connection&&(await this.connection.stop(),this.isConnected=!1,this.connection=null)}_startPollingFallback(){console.log("Using polling fallback for updates"),window.dispatchEvent(new CustomEvent("signalr:fallback",{detail:{reason:"SignalR unavailable, using polling"}}))}getStatus(){return{isConnected:this.isConnected,hubName:this.hubName,state:this.connection?.state||"Disconnected"}}}const s=new f;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>s.connect(),500)}):setTimeout(()=>s.connect(),500),window.SignalRClient=s}(),function(){"use strict";class f{constructor(){this.user=null,this.isAuthenticated=!1,this.loginEndpoint="/.auth/login/aad",this.logoutEndpoint="/.auth/logout",this.meEndpoint="/.auth/me",this.initialized=!1}async init(){this.initialized||(await this.checkAuthStatus(),this._renderAuthUI(),window.addEventListener("auth:login",()=>this.login()),window.addEventListener("auth:logout",()=>this.logout()),this.initialized=!0,console.log("\u{1F510} Auth Client initialized",this.isAuthenticated?"(logged in)":"(anonymous)"))}async checkAuthStatus(){try{const t=await fetch(this.meEndpoint);if(t.ok){const e=await t.json();e&&e.length>0&&(this.user=this._parseUserFromClaims(e[0]),this.isAuthenticated=!0,window.dispatchEvent(new CustomEvent("auth:authenticated",{detail:this.user})))}}catch(t){console.log("Auth check:",t.message)}}_parseUserFromClaims(t){const e=t.user_claims||[],n=o=>e.find(l=>l.typ===o)?.val;return{id:t.user_id,provider:t.provider_name,name:n("name")||n("http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"),email:n("http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress")||n("emails")||t.user_id,picture:n("picture"),roles:t.user_roles||[],claims:e}}login(t=window.location.href){const e=encodeURIComponent(t);window.location.href=`${this.loginEndpoint}?post_login_redirect_uri=${e}`}logout(t="/"){const e=encodeURIComponent(t);window.location.href=`${this.logoutEndpoint}?post_logout_redirect_uri=${e}`}getUser(){return this.user}hasRole(t){return this.user?.roles?.includes(t)||!1}isAdmin(){return this.hasRole("admin")||this.hasRole("Admin")}_renderAuthUI(){const t=document.getElementById("auth-container")||document.querySelector(".auth-container");if(t)if(this.isAuthenticated&&this.user){const e=window.SharedUtils?.escapeHtml||(l=>String(l??"")),n=this.user.picture?e(this.user.picture):"",o=e(this.user.name||this.user.email);t.innerHTML=`
                    <div class="user-profile">
                        ${n?`<img src="${n}" alt="" class="user-avatar">`:""}
                        <span class="user-name">${o}</span>
                        <button class="btn-logout" id="btn-logout">Sign Out</button>
                    </div>
                `,document.getElementById("btn-logout")?.addEventListener("click",()=>this.logout())}else t.innerHTML=`
                    <button class="btn-login" id="btn-login">Sign In</button>
                `,document.getElementById("btn-login")?.addEventListener("click",()=>this.login())}showLoginPrompt(t="Please sign in to continue"){const e=document.getElementById("auth-modal");e&&e.remove();const n=document.createElement("div");n.id="auth-modal",n.className="auth-modal-overlay";const o=window.SharedUtils?.escapeHtml||(l=>String(l??""));n.innerHTML=`
                <div class="auth-modal">
                    <div class="auth-modal-header">
                        <img src="/assets/Logo%208.5.png" alt="GBSV" class="auth-logo">
                        <h2>Welcome to GBSV</h2>
                    </div>
                    <div class="auth-modal-body">
                        <p>${o(t)}</p>
                    </div>
                    <div class="auth-modal-footer">
                        <button class="btn btn-secondary" id="auth-cancel">Cancel</button>
                        <button class="btn btn-primary" id="auth-login">Sign In</button>
                    </div>
                </div>
            `,document.body.appendChild(n),n.querySelector("#auth-cancel").addEventListener("click",()=>n.remove()),n.querySelector("#auth-login").addEventListener("click",()=>{n.remove(),this.login()}),this._injectAuthStyles()}_injectAuthStyles(){if(document.getElementById("auth-styles"))return;const t=document.createElement("style");t.id="auth-styles",t.textContent=`
                .auth-modal-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 20000;
                }

                .auth-modal {
                    background: linear-gradient(180deg, #0a1628 0%, #030b16 100%);
                    border: 1px solid rgba(255,255,255,0.1);
                    border-radius: 12px;
                    padding: 30px;
                    max-width: 400px;
                    text-align: center;
                    color: #fff;
                }

                .auth-modal-header {
                    margin-bottom: 20px;
                }

                .auth-logo {
                    height: 60px;
                    margin-bottom: 15px;
                }

                .auth-modal h2 {
                    margin: 0;
                    font-size: 24px;
                }

                .auth-modal-body {
                    margin-bottom: 25px;
                    color: rgba(255,255,255,0.7);
                }

                .auth-modal-footer {
                    display: flex;
                    gap: 15px;
                    justify-content: center;
                }

                .auth-modal .btn {
                    padding: 10px 25px;
                    border-radius: 6px;
                    font-size: 14px;
                    cursor: pointer;
                    border: none;
                }

                .auth-modal .btn-primary {
                    background: #3b82f6;
                    color: #fff;
                }

                .auth-modal .btn-secondary {
                    background: rgba(255,255,255,0.1);
                    color: #fff;
                }

                .user-profile {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .user-avatar {
                    width: 32px;
                    height: 32px;
                    border-radius: 50%;
                }

                .user-name {
                    color: #fff;
                    font-size: 14px;
                }

                .btn-logout, .btn-login {
                    padding: 6px 12px;
                    border-radius: 4px;
                    border: 1px solid rgba(255,255,255,0.2);
                    background: transparent;
                    color: #fff;
                    cursor: pointer;
                    font-size: 12px;
                }

                .btn-logout:hover, .btn-login:hover {
                    background: rgba(255,255,255,0.1);
                }
            `,document.head.appendChild(t)}}window.AuthClient=new f,window.APP_CONFIG?.AUTH_ENABLED===!0&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>window.AuthClient.init()):window.AuthClient.init())}(),function(){"use strict";const{normalizeFireRating:f,getFunctionsBase:s,getContainerEndpoint:r}=window.BaseSportFetcher?.utils||{},t=new window.BaseSportFetcher({sport:"NBA",tag:"[NBA-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(e){const n=s(),o=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/model/nba/predictions/latest${o}`},buildFallbackUrl(e){const n=r("nba");if(!n)return"";const o=e&&e!=="today"?`?date=${e}`:"";return`${n}/predictions/latest${o}`},formatPickForTable(e){if(!e)return null;const n=e.home_team||e.home||"Unknown",o=e.away_team||e.away||"Unknown",l=e.matchup||`${o} @ ${n}`;let a=e.pick||e.selection||e.feature_name||e.model_feature||"N/A";a&&typeof a=="string"&&(a=a.replace(/_/g," "));let i="",c="spread";if(a&&typeof a=="string"){const p=a.toUpperCase();p.includes("OVER")||p.includes("O ")?(i="Over",c="total"):p.includes("UNDER")||p.includes("U ")?(i="Under",c="total"):p.includes("HOME")||p.includes("FAVORITE")?(i=n,c="spread"):p.includes("AWAY")||p.includes("UNDERDOG")?(i=o,c="spread"):(i=a,p.includes("ML")&&(c="ml"))}let u="";const g=a?.match(/([+-]?\d+\.?\d*)/);g&&(u=g[1]);const d=parseFloat(e.edge)||parseFloat(e.ev)||0,h=f?f(e.fire_rating??e.confidence,d):Math.max(0,Math.min(5,Math.ceil(d/1.5)));return{sport:"NBA",date:e.date||e.game_date||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:e.time||"TBD",awayTeam:o,homeTeam:n,segment:e.segment||"FG",pickTeam:i,pickType:c,pickDirection:e.pick_direction||(i.toUpperCase()==="OVER"?"OVER":i.toUpperCase()==="UNDER"?"UNDER":""),line:u,odds:e.odds||e.odds_available||e.price||-110,edge:d,fire:h,fireLabel:h===5?"MAX":"",rationale:e.rationale||e.explanation||"",modelStamp:e.model_version||e.modelVersion||"",raw:e}}});window.NBAPicksFetcher={fetchNBAPicks:e=>t.fetchPicks(e),fetchPicks:e=>t.fetchPicks(e),formatPickForTable:t.formatPickForTable,checkHealth:()=>t.checkHealth(),getCache:e=>t.getCache(e),getLastSource:()=>t.getLastSource(),clearCache:e=>t.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:f,getFunctionsBase:s,getContainerEndpoint:r}=window.BaseSportFetcher?.utils||{},t={};async function e(o){const l=`${s()}/api/model/ncaam`,a=`${l}|${o||"today"}`;if(t[a])return!1;t[a]=!0;try{const i=`${l}/trigger-picks`;return!!(await fetch(i,{signal:AbortSignal.timeout(6e4)})).ok}catch{return!1}finally{t[a]=!1}}const n=new window.BaseSportFetcher({sport:"NCAAM",tag:"[NCAAM-FETCHER]",timeoutMs:6e4,buildPrimaryUrl(o){return`${s()}/api/model/ncaam/api/slate${o?`?date=${o}`:""}`},buildFallbackUrl(o){const l=r("ncaam");return l?`${l}/api/slate${o?`?date=${o}`:""}`:""},async onFetchFail(o,l){if(l.status===503&&await e(o)){await new Promise(u=>setTimeout(u,2e3));const i=`${s()}/api/model/ncaam`;return await fetch(`${i}/api/slate${o?`?date=${o}`:""}`,{signal:AbortSignal.timeout(6e4)})}return null},formatPickForTable(o){const l=f?f(o.fire_rating??o.confidence,parseFloat(o.edge)||0):3,a=(o.market||"spread").toLowerCase();let i=o.time_cst||"",c="";if(i.includes(" ")){const L=i.split(" ");c=L[0],i=L.slice(1).join(" ")}const u=o.awayTeam||o.away_team||(o.matchup?o.matchup.split(" @ ")[0]:"")||"",g=o.homeTeam||o.home_team||(o.matchup?o.matchup.split(" @ ")[1]:"")||"",d=o.predictedWinner||o.pick||"";let h="";const p=d.toUpperCase();(p==="OVER"||p==="UNDER")&&(h=p);let m=0;return typeof o.edge=="string"?m=parseFloat(o.edge.replace("+",""))||0:typeof o.edge=="number"&&(m=o.edge),{sport:"NCAAM",date:c||new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"}),time:i,awayTeam:u,homeTeam:g,game:o.matchup||`${u} @ ${g}`,pick:d,pickTeam:d,pickDirection:h,pickType:a,odds:o.pick_odds||"-110",edge:m,confidence:l,fire:l,fireLabel:l===5?"MAX":"",market:a,segment:o.period||"FG",line:o.marketSpread||o.market_line||"",modelPrice:o.predictedMargin||o.model_line||"",modelSpread:o.predictedMargin||o.model_line||"",fire_rating:o.fire_rating||"",rationale:o.rationale||o.reason||o.analysis||o.notes||o.executive_summary||"",modelVersion:o.model_version||o.modelVersion||o.model_tag||o.modelTag||"",modelStamp:o.model_version||o.modelVersion||o.model_tag||o.modelTag||""}}});window.NCAAMPicksFetcher={fetchPicks:o=>n.fetchPicks(o),checkHealth:()=>n.checkHealth(),formatPickForTable:n.formatPickForTable,triggerPicks:e,getCache:o=>n.getCache(o),getLastSource:()=>n.getLastSource(),getEndpoint:()=>r("ncaam"),clearCache:o=>n.clearCache(o)}}(),function(){"use strict";const{normalizeFireRating:f,getContainerEndpoint:s}=window.BaseSportFetcher?.utils||{};function r(e="today"){let n;e==="today"?n=new Date:e==="tomorrow"?(n=new Date,n.setDate(n.getDate()+1)):n=new Date(e);const o=n.getFullYear(),a=n.getMonth()+1>=9?o:o-1,i=new Date(a,8,1),c=Math.floor((n-i)/(24*60*60*1e3)),u=Math.max(1,Math.min(18,Math.floor(c/7)+1));return{season:a,week:u}}const t=new window.BaseSportFetcher({sport:"NFL",tag:"[NFL-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(){return`${window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}/weekly-lineup/nfl`},buildFallbackUrl(e){const n=s("nfl");if(!n)return"";const{season:o,week:l}=r(e);return`${n}/api/v1/predictions/week/${o}/${l}`},formatPickForTable(e){const n=f?f(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3,o=e.away_team||e.awayTeam||"",l=e.home_team||e.homeTeam||"",a=e.pick_display||e.pick||e.recommendation||"",i=(e.market_type||e.market||"").toLowerCase();let c="spread",u="",g="",d="";if(i==="moneyline"||i==="ml")c="ml",u=a.replace(/\s*ML\s*/i,"").trim()||o,d="ML";else if(i==="total"||i==="totals"||i==="over/under"){c="total";const p=a.match(/^(OVER|UNDER|Over|Under)\s+([\d.]+)/i);p?(g=p[1].toUpperCase(),u=g,d=p[2]):(g="OVER",u="OVER",d=a.replace(/[^\d.]/g,""))}else if(i==="team total"||i==="team_total"||i==="tt"){c="tt";const p=a.match(/^(.+?)\s+(OVER|UNDER|Over|Under)\s+([\d.]+)/i);p&&(u=p[1].trim(),g=p[2].toUpperCase(),d=p[3])}else{c="spread";const p=a.match(/^(.+?)\s+([+-][\d.]+)/);p?(u=p[1].trim(),d=p[2]):u=a.trim()}let h=0;return typeof e.edge=="number"?h=e.edge:typeof e.edge=="string"&&(h=parseFloat(e.edge.replace("%",""))/100),{sport:"NFL",league:"NFL",awayTeam:o,homeTeam:l,awayRecord:e.away_record||"",homeRecord:e.home_record||"",pickTeam:u,pickType:c,pickDirection:g,line:d,odds:e.odds||e.market_odds||"-110",edge:h,fire:n,confidence:n,fireLabel:n===5?"MAX":"",time:e.game_time||e.time||"",date:e.game_date||e.date||"",segment:e.period||e.segment||"FG",market:i||"spread",rationale:e.rationale||e.reason||e.analysis||e.notes||e.executive_summary||"",modelStamp:e.model_version||e.modelVersion||e.model_tag||e.modelTag||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||e.modelTag||""}}});window.NFLPicksFetcher={fetchPicks:e=>t.fetchPicks(e),checkHealth:()=>t.checkHealth(),formatPickForTable:t.formatPickForTable,getCache:e=>t.getCache(e),getLastSource:()=>t.getLastSource(),clearCache:e=>t.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:f,getContainerEndpoint:s}=window.BaseSportFetcher?.utils||{};function r(){const e=new Date,n=e.getFullYear(),l=e.getMonth()+1>=8?n:n-1,a=new Date(l,7,24),i=Math.max(1,Math.ceil((e-a)/(7*24*60*60*1e3)));return{season:l,week:Math.min(i,15)}}const t=new window.BaseSportFetcher({sport:"NCAAF",tag:"[NCAAF-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(){return`${window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}/weekly-lineup/ncaaf`},buildFallbackUrl(){const e=s("ncaaf");if(!e)return"";const{season:n,week:o}=r();return`${e}/api/v1/predictions/week/${n}/${o}`},formatPickForTable(e){const n=f?f(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3;return{sport:"NCAAF",game:`${e.away_team||e.awayTeam||""} @ ${e.home_team||e.homeTeam||""}`,pick:e.pick_display||e.pick||e.recommendation||e.bet_recommendation,odds:e.odds||e.market_odds||"",edge:e.edge?`${(e.edge*100).toFixed(1)}%`:e.expected_edge?`${(e.expected_edge*100).toFixed(1)}%`:"",confidence:n,time:e.game_time||e.time||e.kickoff||"",market:e.market_type||e.market||e.bet_type||"",period:e.period||"FG",fire_rating:e.fire_rating||"",fireLabel:n===5?"MAX":"",rationale:e.rationale||e.reason||e.analysis||e.notes||e.executive_summary||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||e.modelTag||""}}});window.NCAAFPicksFetcher={fetchPicks:e=>t.fetchPicks(e),checkHealth:()=>t.checkHealth(),formatPickForTable:t.formatPickForTable,getCurrentSeasonWeek:r,getCache:e=>t.getCache(e),getLastSource:()=>t.getLastSource(),clearCache:e=>t.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:f,getFunctionsBase:s,getContainerEndpoint:r}=window.BaseSportFetcher?.utils||{},t=new window.BaseSportFetcher({sport:"NHL",tag:"[NHL-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(e){const n=s(),o=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/model/nhl/api/slate${o}`},buildFallbackUrl(e){const n=r("nhl");if(!n)return"";const o=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/slate${o}`},formatPickForTable(e){const n=f?f(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3,o=e.away_team||e.awayTeam||e.away||"",l=e.home_team||e.homeTeam||e.home||"",a=(e.market||e.market_type||"puckline").toLowerCase();let i=e.pick||"",c="";const u=i.toUpperCase();(u==="OVER"||u==="UNDER")&&(c=u);let g=0;return typeof e.edge=="string"?g=parseFloat(e.edge.replace("+",""))||0:typeof e.edge=="number"&&(g=e.edge),{sport:"NHL",date:e.date||e.game_date||"",time:e.time||e.game_time||e.time_cst||"",awayTeam:o,homeTeam:l,game:e.matchup||`${o} @ ${l}`,pick:i,pickTeam:i,pickDirection:c,pickType:a,odds:e.pick_odds||e.odds||"-110",edge:g,confidence:n,fire:n,fireLabel:n===5?"MAX":"",market:a,segment:e.period||"FG",line:e.market_line||e.line||"",modelPrice:e.model_line||"",modelSpread:e.model_line||"",rationale:e.rationale||e.reason||e.analysis||"",modelStamp:e.model_version||e.modelVersion||e.model_tag||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||""}}});window.NHLPicksFetcher={fetchPicks:e=>t.fetchPicks(e),checkHealth:()=>t.checkHealth(),formatPickForTable:t.formatPickForTable,getCache:e=>t.getCache(e),getLastSource:()=>t.getLastSource(),clearCache:e=>t.clearCache(e)}}(),function(){"use strict";const f=()=>window.APP_CONFIG?.DEBUG_MODE===!0,s=(...m)=>{f()&&console.log(...m)},r=(...m)=>{f()&&console.warn(...m)},t=(...m)=>{f()?console.error(...m):console.error(m[0])},n={data:null,timestamp:0,date:null,league:null},o=6e4,l=m=>{if(!m||typeof m!="object")return"";const L=(y,w)=>w.split(".").reduce((S,E)=>S&&S[E]!==void 0?S[E]:void 0,y),A=(...y)=>{for(const w of y){const S=L(m,w);if(typeof S=="string"&&S.trim())return S.trim()}return""},b=A("model_tag","modelTag","model_version","modelVersion","version","build","build_version","meta.model_tag","meta.modelTag","meta.model_version","meta.modelVersion","meta.version","meta.build","metadata.model_tag","metadata.modelTag","metadata.model_version","metadata.modelVersion","metadata.version","metadata.build"),v=A("git_sha","gitSha","commit","commit_sha","commitSha","meta.git_sha","meta.gitSha","meta.commit","meta.commit_sha","meta.commitSha","metadata.git_sha","metadata.gitSha","metadata.commit","metadata.commit_sha","metadata.commitSha");return b&&v?`${b} (${v.slice(0,8)})`:b||(v?v.slice(0,12):"")},a=(m,L=0)=>{const A=y=>Math.max(0,Math.min(5,y));if(typeof m=="number"&&Number.isFinite(m)){const y=A(Math.round(m));return{fire:y,fireLabel:y===5?"MAX":""}}const b=(m??"").toString().trim();if(b){const y=parseInt(b,10);if(!Number.isNaN(y)){const E=A(y);return{fire:E,fireLabel:E===5?"MAX":""}}const w=b.toUpperCase(),S={MAX:5,ELITE:5,STRONG:4,GOOD:3,STANDARD:2,LOW:1};if(w in S){const E=S[w];return{fire:E,fireLabel:E===5?"MAX":""}}if(b.includes("%")){const E=parseFloat(b.replace("%",""));if(!Number.isNaN(E))return E>=80?{fire:5,fireLabel:"MAX"}:E>=65?{fire:4,fireLabel:""}:E>=50?{fire:3,fireLabel:""}:E>=35?{fire:2,fireLabel:""}:{fire:1,fireLabel:""}}}const v=A(Math.ceil((parseFloat(L)||0)/1.5));return{fire:v,fireLabel:v===5?"MAX":""}},i=async(m,L={},A=15e3)=>{const b=new AbortController,v=setTimeout(()=>b.abort(),A);try{const y=await fetch(m,{...L,signal:b.signal});return clearTimeout(v),y}catch(y){throw clearTimeout(v),y.name==="AbortError"?new Error(`Request timed out after ${A}ms`):y}},c=(m,L)=>{if(window.DataCacheManager){const A=`picks_${m}_${L}`,b=window.DataCacheManager.get(A);if(b)return s("[UNIFIED-FETCHER] Found valid cache in localStorage"),n.data=b,n.timestamp=Date.now(),n.date=L,n.league=m,!0}return n.data&&n.league===m&&n.date===L&&Date.now()-n.timestamp<o},u=async(m,L,A)=>{try{const b=await A.fetchPicks(L),v=b.success?b.data:b,y=l(v),w=v?.picks||v?.plays||v?.predictions||v?.recommendations||[];return{league:m,picks:w.map(S=>{const E=A.formatPickForTable(S);return y&&!E.modelStamp&&(E.modelStamp=y),E}),error:null}}catch(b){return t(`[UNIFIED-FETCHER] ${m} fetch error:`,b.message),{league:m,picks:[],error:b.message}}},g=async function(m="all",L="today",A={}){const{skipCache:b=!1,onLeagueComplete:v=null}=A;if(!b&&c(m,L))return s("[UNIFIED-FETCHER] Returning cached picks"),n.data;window.ModelEndpointResolver?.ensureRegistryHydrated&&window.ModelEndpointResolver.ensureRegistryHydrated();const y=m.toUpperCase(),w=Date.now();s(`[UNIFIED-FETCHER] Fetching picks for: ${m}, date: ${L} (PARALLEL mode)`);const S=[],E=new Set(window.WEEKLY_LINEUP_DISABLED_LEAGUES||["NFL","NCAAF"]),N=[{name:"NBA",fetcher:window.NBAPicksFetcher,match:y==="NBA"||m==="all"},{name:"NCAAM",fetcher:window.NCAAMPicksFetcher,match:y==="NCAAM"||y==="NCAAB"||m==="all"},{name:"NFL",fetcher:window.NFLPicksFetcher,match:!E.has("NFL")&&(y==="NFL"||m==="all")},{name:"NCAAF",fetcher:window.NCAAFPicksFetcher,match:!E.has("NCAAF")&&(y==="NCAAF"||m==="all")},{name:"NHL",fetcher:window.NHLPicksFetcher,match:y==="NHL"||m==="all"},{name:"MLB",fetcher:window.MLBPicksFetcher,match:y==="MLB"||m==="all"}];for(const{name:C,fetcher:_,match:P}of N)if(P&&_){const x=u(C,L,_).then(I=>(v&&I.picks.length>0&&v(I.league,I.picks),I));S.push(x)}const F=await Promise.allSettled(S);let T=[];const O=[];for(const C of F)if(C.status==="fulfilled"){const{league:_,picks:P,error:x}=C.value;P.length>0&&(T.push(...P),s(`[UNIFIED-FETCHER] ${_}: ${P.length} picks`)),x&&O.push({league:_,error:x})}else t("[UNIFIED-FETCHER] Fetch rejected:",C.reason);const k=Date.now()-w;s(`[UNIFIED-FETCHER] Completed in ${k}ms - ${T.length} total picks from ${S.length} leagues`);const M={picks:T,errors:O,meta:{fetchedAt:new Date().toISOString(),elapsedMs:k,leaguesQueried:S.length}};if(window.DataCacheManager){const C=`picks_${m}_${L}`;window.DataCacheManager.set(C,M,5*60*1e3)}return n.data=M,n.timestamp=Date.now(),n.date=L,n.league=m,M},d=async function(m="all",L="today",A={}){const b=await g(m,L,A);if(b.picks.length===0&&b.errors.length>0){const y=b.errors.map(w=>w.league).join(", ");return window.WeeklyLineup?.showNotification&&window.WeeklyLineup.showNotification(`Unable to load picks. API unavailable for: ${y}`,"error"),window.WeeklyLineup?.showEmptyState&&window.WeeklyLineup.showEmptyState("No picks available. Please try again later."),b}if(b.errors.length>0&&b.picks.length>0){const y=b.errors.map(w=>w.league).join(", ");window.WeeklyLineup?.showNotification&&window.WeeklyLineup.showNotification(`Some leagues unavailable: ${y}`,"warning")}if(window.WeeklyLineup?.populateTable&&b.picks.length>0){const y=b.picks.map(w=>{let S=w.awayTeam||"",E=w.homeTeam||"";if(!S||!E){const T=(w.game||"").split(" @ ");S=S||(T[0]||"").trim(),E=E||(T[1]||"").trim()}let N=0;typeof w.edge=="string"?N=parseFloat(w.edge.replace("%",""))||0:typeof w.edge=="number"&&(N=w.edge);const F=a(w.fire??w.confidence??w.fire_rating??w.fireRating,N);return{date:w.date||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:w.time||"",sport:w.sport||"NBA",awayTeam:S,homeTeam:E,segment:w.segment||w.period||"FG",pickTeam:w.pickTeam||w.pick||"",pickType:(w.pickType||w.market||"spread").toLowerCase(),pickDirection:w.pickDirection||"",line:w.line||"",odds:w.odds||"-110",modelPrice:w.modelPrice||"",modelSpread:w.modelSpread||w.modelPrice||"",edge:N,fire:F.fire,fireLabel:w.fireLabel||F.fireLabel,rationale:w.rationale||w.reason||w.notes||w.explanation||"",modelStamp:w.modelStamp||w.model_version||w.modelVersion||w.modelTag||"",status:"pending"}});y.sort((w,S)=>S.edge-w.edge),window.WeeklyLineup.populateTable(y),s(`[UNIFIED-FETCHER] Populated table with ${y.length} picks`),window.WeeklyLineup.showNotification&&window.WeeklyLineup.showNotification(`Loaded ${y.length} picks`,"success")}else b.picks.length===0&&window.WeeklyLineup?.showEmptyState&&window.WeeklyLineup.showEmptyState("No picks available for the selected date.");return b},h=async function(){const m={};return window.NBAPicksFetcher&&(m.nba=await window.NBAPicksFetcher.checkHealth()),window.NCAAMPicksFetcher&&(m.ncaam=await window.NCAAMPicksFetcher.checkHealth()),window.NFLPicksFetcher&&(m.nfl=await window.NFLPicksFetcher.checkHealth()),window.NCAAFPicksFetcher&&(m.ncaaf=await window.NCAAFPicksFetcher.checkHealth()),window.NHLPicksFetcher&&(m.nhl=await window.NHLPicksFetcher.checkHealth()),window.MLBPicksFetcher&&(m.mlb=await window.MLBPicksFetcher.checkHealth()),m},p=()=>{n.data=null,n.timestamp=0,n.date=null,n.league=null};window.UnifiedPicksFetcher={fetchPicks:g,fetchAndDisplayPicks:d,checkAllHealth:h,clearCache:p,isCacheValid:(m,L)=>c(m,L)},console.log("[UNIFIED-FETCHER] v1.3 loaded - PARALLEL mode | Cache-first | 15s timeout")}();
//# sourceMappingURL=core.min.js.map
