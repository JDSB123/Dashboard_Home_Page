(function(){"use strict";try{if(typeof window>"u")return;var p=window.DEBUG===!0||localStorage.getItem("DEBUG")==="true"||window.location.search.indexOf("debug=true")!==-1;if(window.DEBUG=p,!p&&typeof console<"u"){var A=console.log,F=console.warn;console.log=function(){},console.warn=function(){var u=arguments[0];typeof u=="string"&&/^[^\w]*[ðŸš€ðŸ”„âš ï¸ðŸ“¦ðŸ“ðŸŽ¯ðŸ“šðŸ“Šâœ…âŒðŸ”§ðŸ“–ðŸˆðŸ”â°ðŸšª]/.test(u)||F.apply(console,arguments)},window.__restoreConsole=function(){console.log=A,console.warn=F,window.DEBUG=!0}}}catch{}})(),function(){"use strict";function p(){return window.APP_CONFIG?.API_BASE_URL||"/api"}function A(a){if(!a)return"$0.00";const i=parseFloat(String(a).replace(/[$,]/g,""));return isNaN(i)?"$0.00":`$${i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function F(a){if(!a)return"0.00";const i=parseFloat(String(a).replace(/[$,]/g,""));return isNaN(i)?"0.00":i.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}function u(a){return{pending:"Pending","on-track":"On Track","at-risk":"At Risk",hit:"Hit",miss:"Miss",push:"Push"}[a]||a}function e(a){return{"full-game":"Full Game",fg:"Full Game","1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter"}[(a||"").toLowerCase()]||a||"Full Game"}function n(a){if(!a)return"";const i={raiders:"LV","las vegas raiders":"LV",broncos:"DEN","denver broncos":"DEN",chiefs:"KC","kansas city chiefs":"KC",chargers:"LAC","los angeles chargers":"LAC",cowboys:"DAL","dallas cowboys":"DAL",eagles:"PHI","philadelphia eagles":"PHI",giants:"NYG","new york giants":"NYG",commanders:"WSH","washington commanders":"WSH",packers:"GB","green bay packers":"GB",bears:"CHI","chicago bears":"CHI",lions:"DET","detroit lions":"DET",vikings:"MIN","minnesota vikings":"MIN",falcons:"ATL","atlanta falcons":"ATL",saints:"NO","new orleans saints":"NO",panthers:"CAR","carolina panthers":"CAR",buccaneers:"TB","tampa bay buccaneers":"TB",bills:"BUF","buffalo bills":"BUF",dolphins:"MIA","miami dolphins":"MIA",jets:"NYJ","new york jets":"NYJ",patriots:"NE","new england patriots":"NE",bengals:"CIN","cincinnati bengals":"CIN",browns:"CLE","cleveland browns":"CLE",steelers:"PIT","pittsburgh steelers":"PIT",ravens:"BAL","baltimore ravens":"BAL",colts:"IND","indianapolis colts":"IND",jaguars:"JAX","jacksonville jaguars":"JAX",texans:"HOU","houston texans":"HOU",titans:"TEN","tennessee titans":"TEN",seahawks:"SEA","seattle seahawks":"SEA","49ers":"SF","san francisco 49ers":"SF",rams:"LAR","los angeles rams":"LAR",cardinals:"ARI","arizona cardinals":"ARI",lakers:"LAL","los angeles lakers":"LAL",clippers:"LAC","la clippers":"LAC",warriors:"GSW","golden state warriors":"GSW",suns:"PHX","phoenix suns":"PHX",celtics:"BOS","boston celtics":"BOS",nets:"BKN","brooklyn nets":"BKN",knicks:"NYK","new york knicks":"NYK","76ers":"PHI","philadelphia 76ers":"PHI",heat:"MIA","miami heat":"MIA",magic:"ORL","orlando magic":"ORL",bulls:"CHI","chicago bulls":"CHI",bucks:"MIL","milwaukee bucks":"MIL",cavaliers:"CLE","cleveland cavaliers":"CLE",pistons:"DET","detroit pistons":"DET",pacers:"IND","indiana pacers":"IND",hawks:"ATL","atlanta hawks":"ATL",hornets:"CHA","charlotte hornets":"CHA",wizards:"WAS","washington wizards":"WAS",raptors:"TOR","toronto raptors":"TOR",nuggets:"DEN","denver nuggets":"DEN",jazz:"UTA","utah jazz":"UTA",blazers:"POR","portland trail blazers":"POR",thunder:"OKC","oklahoma city thunder":"OKC",timberwolves:"MIN","minnesota timberwolves":"MIN",pelicans:"NOP","new orleans pelicans":"NOP",grizzlies:"MEM","memphis grizzlies":"MEM",spurs:"SAS","san antonio spurs":"SAS",rockets:"HOU","houston rockets":"HOU",mavericks:"DAL","dallas mavericks":"DAL",kings:"SAC","sacramento kings":"SAC"},m=a.toLowerCase().trim();if(i[m])return i[m];const s=a.trim().split(/\s+/);return s[s.length-1].substring(0,3).toUpperCase()}function t(a){if(!a)return{away:"",home:""};const i=["@"," vs "," vs. "," / "];for(const m of i)if(a.includes(m)){const s=a.split(m);return{away:s[0].trim(),home:s[1]?s[1].trim():""}}return{away:a.trim(),home:""}}function f(a){const i=document.createElement("div");return i.textContent=a,i.innerHTML}function o(a){return a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":(a/(1024*1024)).toFixed(1)+" MB"}function r(a,i=150,m=!1){let s;function E(...T){const w=this,_=function(){s=null,m||a.apply(w,T)},g=m&&!s;clearTimeout(s),s=setTimeout(_,i),g&&a.apply(w,T)}return E.cancel=function(){clearTimeout(s),s=null},E}function c(a,i=100){let m=0,s=null;return function(...T){const w=this,_=Date.now(),g=i-(_-m);g<=0||g>i?(s&&(clearTimeout(s),s=null),m=_,a.apply(w,T)):s||(s=setTimeout(function(){m=Date.now(),s=null,a.apply(w,T)},g))}}function l(a){if(!a)return"TBD";const i=new Date(a);if(isNaN(i.getTime()))return"TBD";const m=(i.getMonth()+1).toString().padStart(2,"0"),s=i.getDate().toString().padStart(2,"0"),E=i.getFullYear();return`${m}/${s}/${E}`}function d(a){if(!a)return"TBD";const i=new Date(a);return isNaN(i.getTime())?"TBD":i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}window.SharedUtils={getApiUrl:p,formatMoney:A,formatMoneyValue:F,getStatusLabel:u,getSegmentLabel:e,getTeamAbbr:n,parseTeamsFromGame:t,escapeHtml:f,formatFileSize:o,formatDate:l,formatTime:d,debounce:r,throttle:c}}();const DataCacheManager=(()=>{const p="gbsv_cache_";function F(r,c,l=3e5){try{const d=p+r,a={data:c,timestamp:Date.now(),ttl:l,version:window.APP_VERSION||"1.0.0"};localStorage.setItem(d,JSON.stringify(a))}catch(d){console.warn("[DataCache] Failed to cache:",r,d)}}function u(r){try{const c=p+r,l=localStorage.getItem(c);if(!l)return null;const d=JSON.parse(l);return Date.now()-d.timestamp>d.ttl||window.APP_VERSION&&d.version!==window.APP_VERSION?(localStorage.removeItem(c),null):d.data}catch(c){return console.warn("[DataCache] Failed to read cache:",r,c),null}}function e(r){try{const c=p+r;localStorage.removeItem(c)}catch(c){console.warn("[DataCache] Failed to remove:",r,c)}}function n(){try{Object.keys(localStorage).forEach(c=>{c.startsWith(p)&&localStorage.removeItem(c)})}catch(r){console.warn("[DataCache] Failed to clear:",r)}}async function t(r,c={},l=r,d=3e5){const a=u(l);if(a)return console.log("[DataCache] Hit:",l),a;console.log("[DataCache] Miss:",l);const i=await fetch(r,c);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);const m=await i.json();return F(l,m,d),m}function f(r){return u(r)!==null}function o(){try{const c=Object.keys(localStorage).filter(d=>d.startsWith(p));let l=0;return c.forEach(d=>{const a=localStorage.getItem(d);a&&(l+=a.length)}),{entries:c.length,sizeBytes:l,sizeKB:(l/1024).toFixed(2)}}catch{return{entries:0,sizeBytes:0,sizeKB:"0"}}}return{set:F,get:u,remove:e,clear:n,fetchWithCache:t,has:f,getStats:o}})();window.DataCacheManager=DataCacheManager,function(){"use strict";const p={},A=n=>String(n||"").toLowerCase(),F=n=>{const t=A(n),f=`${t.toUpperCase()}_API_URL`,o=window.APP_CONFIG?.[f];if(o&&typeof o=="string")return o;const r=window.APP_CONFIG?.API_BASE_FALLBACK||window.APP_CONFIG?.API_BASE_URL||`${window.location.origin}/api`;return r?`${r}/${t}`:p[t]?.api||""},u=n=>{const t=A(n),f=`${t.toUpperCase()}_FUNCTION_URL`,o=window.APP_CONFIG?.[f];return o&&typeof o=="string"?o:p[t]?.func||""},e=async()=>{if(window.ModelEndpointBootstrap?.hydrate)try{await window.ModelEndpointBootstrap.hydrate()}catch(n){console.warn("[MODEL-ENDPOINT-RESOLVER] Registry hydrate failed:",n.message)}};window.ModelEndpointResolver={getApiEndpoint:F,getFunctionEndpoint:u,ensureRegistryHydrated:e}}(),function(){"use strict";const A=["nba","ncaam","nfl","ncaaf","nhl","mlb"],F=async(e,n=6e3)=>{const t=new AbortController,f=setTimeout(()=>t.abort(),n);try{const o=await fetch(e,{signal:t.signal,headers:{Accept:"application/json"}});return clearTimeout(f),o}catch(o){throw clearTimeout(f),o}},u=async()=>{if(!window.APP_CONFIG?.DYNAMIC_REGISTRY_ENABLED){console.log("[MODEL-ENDPOINTS] Dynamic registry disabled - using static config.js endpoints"),console.log("[MODEL-ENDPOINTS] \u2022 To enable dynamic registry, set DYNAMIC_REGISTRY_ENABLED: true in config.js"),console.log("[MODEL-ENDPOINTS] \u2022 Requires Azure Functions deployment with ModelRegistry function"),window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="static",window.APP_CONFIG.MODEL_ENDPOINTS_LAST_UPDATED=new Date().toISOString();return}const e=window.APP_CONFIG?.API_BASE_URL,n=window.APP_CONFIG?.API_BASE_FALLBACK,t=window.APP_CONFIG?.FUNCTIONS_BASE_URL,f=async a=>{if(!a)return null;const i=`${a}/registry`;console.log("[MODEL-ENDPOINTS] Fetching model endpoints from registry:",i);const m=await F(i);if(!m.ok)throw new Error(`Registry request failed: ${m.status}`);const s=(m.headers.get("content-type")||"").toLowerCase();if(!s.includes("application/json"))throw new Error(`Unexpected content-type: ${s}`);return await m.json()};let o=null;const r=[{name:"primary",base:e},{name:"fallback",base:n},{name:"functions",base:t?`${t}/api`:null}].filter(a=>a.base);for(const a of r)try{if(o=await f(a.base),o){console.log(`[MODEL-ENDPOINTS] \u2022 Registry loaded from ${a.name}`);break}}catch(i){console.warn(`[MODEL-ENDPOINTS] ${a.name} registry fetch failed:`,i.message)}if(!o){console.warn("[MODEL-ENDPOINTS] Unable to refresh endpoints from registry (all sources failed)"),console.log("[MODEL-ENDPOINTS] \u2022 Using fallback endpoints from config.js"),console.log("[MODEL-ENDPOINTS] \u2022 Consider setting DYNAMIC_REGISTRY_ENABLED: false if registry not deployed"),window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="static-fallback";return}const c=Object.keys(o||{}),l=[...new Set([...A,...c])];let d=0;l.forEach(a=>{const i=o?.[a];if(i?.endpoint){const m=`${a.toUpperCase()}_API_URL`,s=window.APP_CONFIG[m];window.APP_CONFIG[m]=i.endpoint,d++,s!==i.endpoint&&console.log(`[MODEL-ENDPOINTS] Updated ${a.toUpperCase()} endpoint: ${i.endpoint}`)}}),window.APP_CONFIG.MODEL_ENDPOINTS_LAST_UPDATED=new Date().toISOString(),window.APP_CONFIG.MODEL_ENDPOINTS_COUNT=d,window.APP_CONFIG.MODEL_ENDPOINTS_SOURCE="registry",d>0&&console.log(`[MODEL-ENDPOINTS] Hydrated ${d} endpoints from registry`),console.log(`[MODEL-ENDPOINTS] \u2022 Registry hydration complete - ${d} endpoints updated`)};u(),window.ModelEndpointBootstrap={hydrate:u,getKnownLeagues:()=>A}}(),function(){"use strict";async function F(o,r=15e3){const c=new AbortController,l=setTimeout(()=>c.abort(),r);try{const d=await fetch(o,{signal:c.signal});return clearTimeout(l),d}catch(d){throw clearTimeout(l),d.name==="AbortError"?new Error(`Request timed out after ${r}ms`):d}}function u(o,r=0){const c=(o??"").toString().trim(),l=c.toUpperCase(),d={MAX:5,ELITE:5,STRONG:4,GOOD:3,STANDARD:2,LOW:1};if(l in d)return d[l];if(c.includes("%")){const i=parseFloat(c.replace("%",""));if(!Number.isNaN(i))return i>=80?5:i>=65?4:i>=50?3:i>=35?2:1}const a=parseInt(c,10);return!Number.isNaN(a)&&c!==""?Math.max(0,Math.min(5,a)):typeof r=="number"&&r>0?Math.max(0,Math.min(5,Math.ceil(r/1.5))):3}function e(){return window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}function n(){return window.APP_CONFIG?.FUNCTIONS_BASE_URL||window.location.origin}function t(o){const r=window.ModelEndpointResolver?.getApiEndpoint(o);if(r)return r;const c=`${o.toUpperCase()}_API_URL`,l=window.APP_CONFIG?.[c];if(l)return l;const d=window.APP_CONFIG?.API_BASE_FALLBACK;return d?`${d}/${o.toLowerCase()}`:""}function f(o){this.sport=o.sport,this.tag=o.tag||`[${o.sport}-FETCHER]`,this.buildPrimaryUrl=o.buildPrimaryUrl,this.buildFallbackUrl=o.buildFallbackUrl,this.formatPickForTable=o.formatPickForTable,this.timeoutMs=o.timeoutMs||15e3,this.cacheDurationMs=o.cacheDurationMs||6e4,this.onFetchFail=o.onFetchFail||null,this._cache={},this._lastSource=null}f.prototype.fetchPicks=async function(o){o=o||"today",window.ModelEndpointResolver?.ensureRegistryHydrated&&window.ModelEndpointResolver.ensureRegistryHydrated();const r=this._cache[o];if(r&&Date.now()-r.timestamp<this.cacheDurationMs)return r.data;const c=this.buildPrimaryUrl(o);try{let l=await F(c,this.timeoutMs);if(l.ok)this._lastSource="primary";else{const a=this.buildFallbackUrl(o);if(a&&(l=await F(a,this.timeoutMs)),!l.ok&&this.onFetchFail){const i=await this.onFetchFail(o,l);i&&(l=i)}if(!l.ok)throw new Error(`${this.tag} All routes failed (${l.status})`);this._lastSource="fallback"}const d=await l.json();return this._cache[o]={data:d,timestamp:Date.now()},d}catch(l){throw l}},f.prototype.checkHealth=async function(){const o=t(this.sport.toLowerCase());try{const r=await F(`${o}/health`,5e3);return r.ok?{status:"healthy",...await r.json(),containerApp:o}:{status:"error",code:r.status,containerApp:o}}catch(r){return{status:"error",message:r.message,containerApp:o}}},f.prototype.clearCache=function(o){o?delete this._cache[o]:this._cache={}},f.prototype.getCache=function(o){return this._cache[o||"today"]?.data||null},f.prototype.getLastSource=function(){return this._lastSource},window.BaseSportFetcher=f,window.BaseSportFetcher.utils={fetchWithTimeout:F,normalizeFireRating:u,getBaseApiUrl:e,getFunctionsBase:n,getContainerEndpoint:t}}(),function(){"use strict";const{normalizeFireRating:p,getFunctionsBase:A,getContainerEndpoint:F}=window.BaseSportFetcher?.utils||{},u=new window.BaseSportFetcher({sport:"NBA",tag:"[NBA-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(e){const n=A(),t=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/model/nba/predictions/latest${t}`},buildFallbackUrl(e){const n=F("nba");if(!n)return"";const t=e&&e!=="today"?`?date=${e}`:"";return`${n}/predictions/latest${t}`},formatPickForTable(e){if(!e)return null;const n=e.home_team||e.home||"Unknown",t=e.away_team||e.away||"Unknown",f=e.matchup||`${t} @ ${n}`;let o=e.pick||e.selection||e.feature_name||e.model_feature||"N/A";o&&typeof o=="string"&&(o=o.replace(/_/g," "));let r="",c="spread";if(o&&typeof o=="string"){const m=o.toUpperCase();m.includes("OVER")||m.includes("O ")?(r="Over",c="total"):m.includes("UNDER")||m.includes("U ")?(r="Under",c="total"):m.includes("HOME")||m.includes("FAVORITE")?(r=n,c="spread"):m.includes("AWAY")||m.includes("UNDERDOG")?(r=t,c="spread"):(r=o,m.includes("ML")&&(c="ml"))}let l="";const d=o?.match(/([+-]?\d+\.?\d*)/);d&&(l=d[1]);const a=parseFloat(e.edge)||parseFloat(e.ev)||0,i=p?p(e.fire_rating??e.confidence,a):Math.max(0,Math.min(5,Math.ceil(a/1.5)));return{sport:"NBA",date:e.date||e.game_date||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:e.time||"TBD",awayTeam:t,homeTeam:n,segment:e.segment||"FG",pickTeam:r,pickType:c,pickDirection:e.pick_direction||(r.toUpperCase()==="OVER"?"OVER":r.toUpperCase()==="UNDER"?"UNDER":""),line:l,odds:e.odds||e.odds_available||e.price||-110,edge:a,fire:i,fireLabel:i===5?"MAX":"",rationale:e.rationale||e.explanation||"",modelStamp:e.model_version||e.modelVersion||"",raw:e}}});window.NBAPicksFetcher={fetchNBAPicks:e=>u.fetchPicks(e),fetchPicks:e=>u.fetchPicks(e),formatPickForTable:u.formatPickForTable,checkHealth:()=>u.checkHealth(),getCache:e=>u.getCache(e),getLastSource:()=>u.getLastSource(),clearCache:e=>u.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:p,getFunctionsBase:A,getContainerEndpoint:F}=window.BaseSportFetcher?.utils||{},u={};async function e(t){const f=`${A()}/api/model/ncaam`,o=`${f}|${t||"today"}`;if(u[o])return!1;u[o]=!0;try{const r=`${f}/trigger-picks`;return!!(await fetch(r,{signal:AbortSignal.timeout(6e4)})).ok}catch{return!1}finally{u[o]=!1}}const n=new window.BaseSportFetcher({sport:"NCAAM",tag:"[NCAAM-FETCHER]",timeoutMs:6e4,buildPrimaryUrl(t){return`${A()}/api/model/ncaam/api/slate${t?`?date=${t}`:""}`},buildFallbackUrl(t){const f=F("ncaam");return f?`${f}/api/slate${t?`?date=${t}`:""}`:""},async onFetchFail(t,f){if(f.status===503&&await e(t)){await new Promise(l=>setTimeout(l,2e3));const r=`${A()}/api/model/ncaam`;return await fetch(`${r}/api/slate${t?`?date=${t}`:""}`,{signal:AbortSignal.timeout(6e4)})}return null},formatPickForTable(t){const f=p?p(t.fire_rating??t.confidence,parseFloat(t.edge)||0):3,o=(t.market||"spread").toLowerCase();let r=t.time_cst||"",c="";if(r.includes(" ")){const E=r.split(" ");c=E[0],r=E.slice(1).join(" ")}const l=t.awayTeam||t.away_team||(t.matchup?t.matchup.split(" @ ")[0]:"")||"",d=t.homeTeam||t.home_team||(t.matchup?t.matchup.split(" @ ")[1]:"")||"",a=t.predictedWinner||t.pick||"";let i="";const m=a.toUpperCase();(m==="OVER"||m==="UNDER")&&(i=m);let s=0;return typeof t.edge=="string"?s=parseFloat(t.edge.replace("+",""))||0:typeof t.edge=="number"&&(s=t.edge),{sport:"NCAAM",date:c||new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"}),time:r,awayTeam:l,homeTeam:d,game:t.matchup||`${l} @ ${d}`,pick:a,pickTeam:a,pickDirection:i,pickType:o,odds:t.pick_odds||"-110",edge:s,confidence:f,fire:f,fireLabel:f===5?"MAX":"",market:o,segment:t.period||"FG",line:t.marketSpread||t.market_line||"",modelPrice:t.predictedMargin||t.model_line||"",modelSpread:t.predictedMargin||t.model_line||"",fire_rating:t.fire_rating||"",rationale:t.rationale||t.reason||t.analysis||t.notes||t.executive_summary||"",modelVersion:t.model_version||t.modelVersion||t.model_tag||t.modelTag||"",modelStamp:t.model_version||t.modelVersion||t.model_tag||t.modelTag||""}}});window.NCAAMPicksFetcher={fetchPicks:t=>n.fetchPicks(t),checkHealth:()=>n.checkHealth(),formatPickForTable:n.formatPickForTable,triggerPicks:e,getCache:t=>n.getCache(t),getLastSource:()=>n.getLastSource(),getEndpoint:()=>F("ncaam"),clearCache:t=>n.clearCache(t)}}(),function(){"use strict";const{normalizeFireRating:p,getContainerEndpoint:A}=window.BaseSportFetcher?.utils||{};function F(e="today"){let n;e==="today"?n=new Date:e==="tomorrow"?(n=new Date,n.setDate(n.getDate()+1)):n=new Date(e);const t=n.getFullYear(),o=n.getMonth()+1>=9?t:t-1,r=new Date(o,8,1),c=Math.floor((n-r)/(24*60*60*1e3)),l=Math.max(1,Math.min(18,Math.floor(c/7)+1));return{season:o,week:l}}const u=new window.BaseSportFetcher({sport:"NFL",tag:"[NFL-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(){return`${window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}/weekly-lineup/nfl`},buildFallbackUrl(e){const n=A("nfl");if(!n)return"";const{season:t,week:f}=F(e);return`${n}/api/v1/predictions/week/${t}/${f}`},formatPickForTable(e){const n=p?p(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3,t=e.away_team||e.awayTeam||"",f=e.home_team||e.homeTeam||"",o=e.pick_display||e.pick||e.recommendation||"",r=(e.market_type||e.market||"").toLowerCase();let c="spread",l="",d="",a="";if(r==="moneyline"||r==="ml")c="ml",l=o.replace(/\s*ML\s*/i,"").trim()||t,a="ML";else if(r==="total"||r==="totals"||r==="over/under"){c="total";const m=o.match(/^(OVER|UNDER|Over|Under)\s+([\d.]+)/i);m?(d=m[1].toUpperCase(),l=d,a=m[2]):(d="OVER",l="OVER",a=o.replace(/[^\d.]/g,""))}else if(r==="team total"||r==="team_total"||r==="tt"){c="tt";const m=o.match(/^(.+?)\s+(OVER|UNDER|Over|Under)\s+([\d.]+)/i);m&&(l=m[1].trim(),d=m[2].toUpperCase(),a=m[3])}else{c="spread";const m=o.match(/^(.+?)\s+([+-][\d.]+)/);m?(l=m[1].trim(),a=m[2]):l=o.trim()}let i=0;return typeof e.edge=="number"?i=e.edge:typeof e.edge=="string"&&(i=parseFloat(e.edge.replace("%",""))/100),{sport:"NFL",league:"NFL",awayTeam:t,homeTeam:f,awayRecord:e.away_record||"",homeRecord:e.home_record||"",pickTeam:l,pickType:c,pickDirection:d,line:a,odds:e.odds||e.market_odds||"-110",edge:i,fire:n,confidence:n,fireLabel:n===5?"MAX":"",time:e.game_time||e.time||"",date:e.game_date||e.date||"",segment:e.period||e.segment||"FG",market:r||"spread",rationale:e.rationale||e.reason||e.analysis||e.notes||e.executive_summary||"",modelStamp:e.model_version||e.modelVersion||e.model_tag||e.modelTag||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||e.modelTag||""}}});window.NFLPicksFetcher={fetchPicks:e=>u.fetchPicks(e),checkHealth:()=>u.checkHealth(),formatPickForTable:u.formatPickForTable,getCache:e=>u.getCache(e),getLastSource:()=>u.getLastSource(),clearCache:e=>u.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:p,getContainerEndpoint:A}=window.BaseSportFetcher?.utils||{};function F(){const e=new Date,n=e.getFullYear(),f=e.getMonth()+1>=8?n:n-1,o=new Date(f,7,24),r=Math.max(1,Math.ceil((e-o)/(7*24*60*60*1e3)));return{season:f,week:Math.min(r,15)}}const u=new window.BaseSportFetcher({sport:"NCAAF",tag:"[NCAAF-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(){return`${window.APP_CONFIG?.API_BASE_URL||window.APP_CONFIG?.API_BASE_FALLBACK||`${window.location.origin}/api`}/weekly-lineup/ncaaf`},buildFallbackUrl(){const e=A("ncaaf");if(!e)return"";const{season:n,week:t}=F();return`${e}/api/v1/predictions/week/${n}/${t}`},formatPickForTable(e){const n=p?p(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3;return{sport:"NCAAF",game:`${e.away_team||e.awayTeam||""} @ ${e.home_team||e.homeTeam||""}`,pick:e.pick_display||e.pick||e.recommendation||e.bet_recommendation,odds:e.odds||e.market_odds||"",edge:e.edge?`${(e.edge*100).toFixed(1)}%`:e.expected_edge?`${(e.expected_edge*100).toFixed(1)}%`:"",confidence:n,time:e.game_time||e.time||e.kickoff||"",market:e.market_type||e.market||e.bet_type||"",period:e.period||"FG",fire_rating:e.fire_rating||"",fireLabel:n===5?"MAX":"",rationale:e.rationale||e.reason||e.analysis||e.notes||e.executive_summary||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||e.modelTag||""}}});window.NCAAFPicksFetcher={fetchPicks:e=>u.fetchPicks(e),checkHealth:()=>u.checkHealth(),formatPickForTable:u.formatPickForTable,getCurrentSeasonWeek:F,getCache:e=>u.getCache(e),getLastSource:()=>u.getLastSource(),clearCache:e=>u.clearCache(e)}}(),function(){"use strict";const{normalizeFireRating:p,getFunctionsBase:A,getContainerEndpoint:F}=window.BaseSportFetcher?.utils||{},u=new window.BaseSportFetcher({sport:"NHL",tag:"[NHL-FETCHER]",timeoutMs:15e3,buildPrimaryUrl(e){const n=A(),t=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/model/nhl/api/slate${t}`},buildFallbackUrl(e){const n=F("nhl");if(!n)return"";const t=e&&e!=="today"?`?date=${e}`:"";return`${n}/api/slate${t}`},formatPickForTable(e){const n=p?p(e.fire_rating??e.confidence,parseFloat(e.edge)||0):3,t=e.away_team||e.awayTeam||e.away||"",f=e.home_team||e.homeTeam||e.home||"",o=(e.market||e.market_type||"puckline").toLowerCase();let r=e.pick||"",c="";const l=r.toUpperCase();(l==="OVER"||l==="UNDER")&&(c=l);let d=0;return typeof e.edge=="string"?d=parseFloat(e.edge.replace("+",""))||0:typeof e.edge=="number"&&(d=e.edge),{sport:"NHL",date:e.date||e.game_date||"",time:e.time||e.game_time||e.time_cst||"",awayTeam:t,homeTeam:f,game:e.matchup||`${t} @ ${f}`,pick:r,pickTeam:r,pickDirection:c,pickType:o,odds:e.pick_odds||e.odds||"-110",edge:d,confidence:n,fire:n,fireLabel:n===5?"MAX":"",market:o,segment:e.period||"FG",line:e.market_line||e.line||"",modelPrice:e.model_line||"",modelSpread:e.model_line||"",rationale:e.rationale||e.reason||e.analysis||"",modelStamp:e.model_version||e.modelVersion||e.model_tag||"",modelVersion:e.model_version||e.modelVersion||e.model_tag||""}}});window.NHLPicksFetcher={fetchPicks:e=>u.fetchPicks(e),checkHealth:()=>u.checkHealth(),formatPickForTable:u.formatPickForTable,getCache:e=>u.getCache(e),getLastSource:()=>u.getLastSource(),clearCache:e=>u.clearCache(e)}}(),function(){"use strict";const p=()=>window.APP_CONFIG?.DEBUG_MODE===!0,A=(...s)=>{p()&&console.log(...s)},F=(...s)=>{p()&&console.warn(...s)},u=(...s)=>{p()?console.error(...s):console.error(s[0])},n={data:null,timestamp:0,date:null,league:null},t=6e4,f=s=>{if(!s||typeof s!="object")return"";const E=(g,h)=>h.split(".").reduce((y,N)=>y&&y[N]!==void 0?y[N]:void 0,g),T=(...g)=>{for(const h of g){const y=E(s,h);if(typeof y=="string"&&y.trim())return y.trim()}return""},w=T("model_tag","modelTag","model_version","modelVersion","version","build","build_version","meta.model_tag","meta.modelTag","meta.model_version","meta.modelVersion","meta.version","meta.build","metadata.model_tag","metadata.modelTag","metadata.model_version","metadata.modelVersion","metadata.version","metadata.build"),_=T("git_sha","gitSha","commit","commit_sha","commitSha","meta.git_sha","meta.gitSha","meta.commit","meta.commit_sha","meta.commitSha","metadata.git_sha","metadata.gitSha","metadata.commit","metadata.commit_sha","metadata.commitSha");return w&&_?`${w} (${_.slice(0,8)})`:w||(_?_.slice(0,12):"")},o=(s,E=0)=>{const T=g=>Math.max(0,Math.min(5,g));if(typeof s=="number"&&Number.isFinite(s)){const g=T(Math.round(s));return{fire:g,fireLabel:g===5?"MAX":""}}const w=(s??"").toString().trim();if(w){const g=parseInt(w,10);if(!Number.isNaN(g)){const N=T(g);return{fire:N,fireLabel:N===5?"MAX":""}}const h=w.toUpperCase(),y={MAX:5,ELITE:5,STRONG:4,GOOD:3,STANDARD:2,LOW:1};if(h in y){const N=y[h];return{fire:N,fireLabel:N===5?"MAX":""}}if(w.includes("%")){const N=parseFloat(w.replace("%",""));if(!Number.isNaN(N))return N>=80?{fire:5,fireLabel:"MAX"}:N>=65?{fire:4,fireLabel:""}:N>=50?{fire:3,fireLabel:""}:N>=35?{fire:2,fireLabel:""}:{fire:1,fireLabel:""}}}const _=T(Math.ceil((parseFloat(E)||0)/1.5));return{fire:_,fireLabel:_===5?"MAX":""}},r=async(s,E={},T=15e3)=>{const w=new AbortController,_=setTimeout(()=>w.abort(),T);try{const g=await fetch(s,{...E,signal:w.signal});return clearTimeout(_),g}catch(g){throw clearTimeout(_),g.name==="AbortError"?new Error(`Request timed out after ${T}ms`):g}},c=(s,E)=>{if(window.DataCacheManager){const T=`picks_${s}_${E}`,w=window.DataCacheManager.get(T);if(w)return A("[UNIFIED-FETCHER] Found valid cache in localStorage"),n.data=w,n.timestamp=Date.now(),n.date=E,n.league=s,!0}return n.data&&n.league===s&&n.date===E&&Date.now()-n.timestamp<t},l=async(s,E,T)=>{try{const w=await T.fetchPicks(E),_=w.success?w.data:w,g=f(_),h=_?.picks||_?.plays||_?.predictions||_?.recommendations||[];return{league:s,picks:h.map(y=>{const N=T.formatPickForTable(y);return g&&!N.modelStamp&&(N.modelStamp=g),N}),error:null}}catch(w){return u(`[UNIFIED-FETCHER] ${s} fetch error:`,w.message),{league:s,picks:[],error:w.message}}},d=async function(s="all",E="today",T={}){const{skipCache:w=!1,onLeagueComplete:_=null}=T;if(!w&&c(s,E))return A("[UNIFIED-FETCHER] Returning cached picks"),n.data;window.ModelEndpointResolver?.ensureRegistryHydrated&&window.ModelEndpointResolver.ensureRegistryHydrated();const g=s.toUpperCase(),h=Date.now();A(`[UNIFIED-FETCHER] Fetching picks for: ${s}, date: ${E} (PARALLEL mode)`);const y=[],N=new Set(window.WEEKLY_LINEUP_DISABLED_LEAGUES||["NFL","NCAAF"]),P=[{name:"NBA",fetcher:window.NBAPicksFetcher,match:g==="NBA"||s==="all"},{name:"NCAAM",fetcher:window.NCAAMPicksFetcher,match:g==="NCAAM"||g==="NCAAB"||s==="all"},{name:"NFL",fetcher:window.NFLPicksFetcher,match:!N.has("NFL")&&(g==="NFL"||s==="all")},{name:"NCAAF",fetcher:window.NCAAFPicksFetcher,match:!N.has("NCAAF")&&(g==="NCAAF"||s==="all")},{name:"NHL",fetcher:window.NHLPicksFetcher,match:g==="NHL"||s==="all"},{name:"MLB",fetcher:window.MLBPicksFetcher,match:g==="MLB"||s==="all"}];for(const{name:L,fetcher:S,match:D}of P)if(D&&S){const I=l(L,E,S).then(M=>(_&&M.picks.length>0&&_(M.league,M.picks),M));y.push(I)}const b=await Promise.allSettled(y);let C=[];const U=[];for(const L of b)if(L.status==="fulfilled"){const{league:S,picks:D,error:I}=L.value;D.length>0&&(C.push(...D),A(`[UNIFIED-FETCHER] ${S}: ${D.length} picks`)),I&&U.push({league:S,error:I})}else u("[UNIFIED-FETCHER] Fetch rejected:",L.reason);const R=Date.now()-h;A(`[UNIFIED-FETCHER] Completed in ${R}ms - ${C.length} total picks from ${y.length} leagues`);const O={picks:C,errors:U,meta:{fetchedAt:new Date().toISOString(),elapsedMs:R,leaguesQueried:y.length}};if(window.DataCacheManager){const L=`picks_${s}_${E}`;window.DataCacheManager.set(L,O,5*60*1e3)}return n.data=O,n.timestamp=Date.now(),n.date=E,n.league=s,O},a=async function(s="all",E="today",T={}){const w=await d(s,E,T);if(w.picks.length===0&&w.errors.length>0){const g=w.errors.map(h=>h.league).join(", ");return window.WeeklyLineup?.showNotification&&window.WeeklyLineup.showNotification(`Unable to load picks. API unavailable for: ${g}`,"error"),window.WeeklyLineup?.showEmptyState&&window.WeeklyLineup.showEmptyState("No picks available. Please try again later."),w}if(w.errors.length>0&&w.picks.length>0){const g=w.errors.map(h=>h.league).join(", ");window.WeeklyLineup?.showNotification&&window.WeeklyLineup.showNotification(`Some leagues unavailable: ${g}`,"warning")}if(window.WeeklyLineup?.populateTable&&w.picks.length>0){const g=w.picks.map(h=>{let y=h.awayTeam||"",N=h.homeTeam||"";if(!y||!N){const C=(h.game||"").split(" @ ");y=y||(C[0]||"").trim(),N=N||(C[1]||"").trim()}let P=0;typeof h.edge=="string"?P=parseFloat(h.edge.replace("%",""))||0:typeof h.edge=="number"&&(P=h.edge);const b=o(h.fire??h.confidence??h.fire_rating??h.fireRating,P);return{date:h.date||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),time:h.time||"",sport:h.sport||"NBA",awayTeam:y,homeTeam:N,segment:h.segment||h.period||"FG",pickTeam:h.pickTeam||h.pick||"",pickType:(h.pickType||h.market||"spread").toLowerCase(),pickDirection:h.pickDirection||"",line:h.line||"",odds:h.odds||"-110",modelPrice:h.modelPrice||"",modelSpread:h.modelSpread||h.modelPrice||"",edge:P,fire:b.fire,fireLabel:h.fireLabel||b.fireLabel,rationale:h.rationale||h.reason||h.notes||h.explanation||"",modelStamp:h.modelStamp||h.model_version||h.modelVersion||h.modelTag||"",status:"pending"}});g.sort((h,y)=>y.edge-h.edge),window.WeeklyLineup.populateTable(g),A(`[UNIFIED-FETCHER] Populated table with ${g.length} picks`),window.WeeklyLineup.showNotification&&window.WeeklyLineup.showNotification(`Loaded ${g.length} picks`,"success")}else w.picks.length===0&&window.WeeklyLineup?.showEmptyState&&window.WeeklyLineup.showEmptyState("No picks available for the selected date.");return w},i=async function(){const s={};return window.NBAPicksFetcher&&(s.nba=await window.NBAPicksFetcher.checkHealth()),window.NCAAMPicksFetcher&&(s.ncaam=await window.NCAAMPicksFetcher.checkHealth()),window.NFLPicksFetcher&&(s.nfl=await window.NFLPicksFetcher.checkHealth()),window.NCAAFPicksFetcher&&(s.ncaaf=await window.NCAAFPicksFetcher.checkHealth()),window.NHLPicksFetcher&&(s.nhl=await window.NHLPicksFetcher.checkHealth()),window.MLBPicksFetcher&&(s.mlb=await window.MLBPicksFetcher.checkHealth()),s},m=()=>{n.data=null,n.timestamp=0,n.date=null,n.league=null};window.UnifiedPicksFetcher={fetchPicks:d,fetchAndDisplayPicks:a,checkAllHealth:i,clearCache:m,isCacheValid:(s,E)=>c(s,E)},console.log("[UNIFIED-FETCHER] v1.3 loaded - PARALLEL mode | Cache-first | 15s timeout")}();
//# sourceMappingURL=core.min.js.map
