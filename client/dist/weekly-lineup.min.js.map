{
  "version": 3,
  "sources": ["_tmp_weekly-lineup.js"],
  "sourcesContent": ["/* === assets/js/modules/picks-dom-utils.js === */\n/**\r\n * Picks DOM Utilities Module\r\n * Common DOM manipulation utilities and helper functions\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    // Shared column index cache across all modules\r\n    const _columnIndexCache = new WeakMap();\r\n\r\n    const DOMUtils = {\r\n        /**\r\n         * Get the 1-based column index for a given column key by reading the table header.\r\n         * Shared utility to avoid duplication in filter/sort managers.\r\n         * @param {HTMLElement} row - A table row element\r\n         * @param {string} columnKey - The data-sort or data-filter attribute value\r\n         * @returns {number|null} 1-based column index or null if not found\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            try {\r\n                const table = row?.closest?.('table');\r\n                if (!table) return null;\r\n\r\n                let cacheForTable = _columnIndexCache.get(table);\r\n                if (!cacheForTable) {\r\n                    cacheForTable = new Map();\r\n                    _columnIndexCache.set(table, cacheForTable);\r\n                }\r\n\r\n                if (cacheForTable.has(columnKey)) {\r\n                    return cacheForTable.get(columnKey);\r\n                }\r\n\r\n                const th = table.querySelector(`thead th[data-sort=\"${columnKey}\"]`) ||\r\n                           table.querySelector(`thead th[data-filter=\"${columnKey}\"]`);\r\n                if (!th) {\r\n                    cacheForTable.set(columnKey, null);\r\n                    return null;\r\n                }\r\n\r\n                const rowEl = th.closest('tr');\r\n                const ths = rowEl ? Array.from(rowEl.children).filter(el => el.tagName === 'TH') : [];\r\n                const idx = ths.indexOf(th);\r\n                const oneBased = idx >= 0 ? idx + 1 : null;\r\n                cacheForTable.set(columnKey, oneBased);\r\n                return oneBased;\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get a table cell by column key or fallback index\r\n         * @param {HTMLElement} row - A table row element\r\n         * @param {string} columnKey - The data-sort or data-filter attribute value\r\n         * @param {number} fallbackIndex - Fallback 1-based index if column not found\r\n         * @returns {HTMLElement|null} The table cell or null\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            const idx = this.getColumnIndex(row, columnKey) || fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        /**\r\n         * Clear the column index cache for a specific table or all tables\r\n         * @param {HTMLElement} table - Optional table to clear cache for\r\n         */\r\n        clearColumnIndexCache(table) {\r\n            if (table) {\r\n                _columnIndexCache.delete(table);\r\n            }\r\n            // Note: WeakMap doesn't support clear(), but entries are garbage collected\r\n        },\r\n\r\n        /**\r\n         * Escape HTML to prevent XSS\r\n         */\r\n        escapeHtml(value) {\r\n            if (!value) return '';\r\n            const div = document.createElement('div');\r\n            div.textContent = value;\r\n            return div.innerHTML;\r\n        },\r\n\r\n        /**\r\n         * Format currency value for display\r\n         */\r\n        formatCurrency(value) {\r\n            if (value == null || isNaN(value)) return '-';\r\n\r\n            const num = parseFloat(value);\r\n            const formatted = new Intl.NumberFormat('en-US', {\r\n                style: 'currency',\r\n                currency: 'USD',\r\n                minimumFractionDigits: 0,\r\n                maximumFractionDigits: 0\r\n            }).format(Math.abs(num));\r\n\r\n            return num < 0 ? `(${formatted})` : formatted;\r\n        },\r\n\r\n        /**\r\n         * Format currency for filter chips (abbreviated)\r\n         */\r\n        formatCurrencyForChip(value) {\r\n            if (!value) return '';\r\n            const num = parseFloat(value);\r\n\r\n            if (num >= 1000) {\r\n                return `$${(num / 1000).toFixed(1)}k`;\r\n            }\r\n            return `$${num}`;\r\n        },\r\n\r\n        /**\r\n         * Format date with weekday\r\n         */\r\n        formatDateWithDay(dateText) {\r\n            if (!dateText) return '';\r\n\r\n            // If already has weekday, return as is\r\n            if (/^(mon|tue|wed|thu|fri|sat|sun)\\s+/i.test(dateText)) {\r\n                return dateText;\r\n            }\r\n\r\n            // Add weekday\r\n            const weekday = this.getWeekdayName(dateText);\r\n            return weekday ? `${weekday} ${dateText}` : dateText;\r\n        },\r\n\r\n        /**\r\n         * Get weekday name from date string\r\n         */\r\n        getWeekdayName(dateText) {\r\n            if (!dateText) return '';\r\n\r\n            // Parse MM/DD format\r\n            const match = dateText.match(/(\\d{1,2})\\/(\\d{1,2})/);\r\n            if (!match) return '';\r\n\r\n            const month = parseInt(match[1], 10) - 1;\r\n            const day = parseInt(match[2], 10);\r\n            const year = new Date().getFullYear();\r\n\r\n            const date = new Date(year, month, day);\r\n            const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n            return weekdays[date.getDay()];\r\n        },\r\n\r\n        /**\r\n         * Normalize status to standard values (win, loss, push, void, pending, live)\r\n         */\r\n        normalizeStatus(status) {\r\n            if (!status) return 'pending';\r\n\r\n            const lower = status.toString().toLowerCase().trim();\r\n            const statusMap = {\r\n                'win': 'win',\r\n                'won': 'win',\r\n                'winner': 'win',\r\n                'loss': 'loss',\r\n                'lost': 'loss',\r\n                'lose': 'loss',\r\n                'loser': 'loss',\r\n                'push': 'push',\r\n                'tie': 'push',\r\n                'void': 'void',\r\n                'voided': 'void',\r\n                'cancelled': 'void',\r\n                'pending': 'pending',\r\n                'open': 'pending',\r\n                'live': 'live',\r\n                'active': 'live',\r\n                'in-progress': 'live',\r\n                'in progress': 'live'\r\n            };\r\n\r\n            return statusMap[lower] || 'pending';\r\n        },\r\n\r\n        /**\r\n         * Format badge status text\r\n         */\r\n        formatBadgeStatus(status) {\r\n            if (!status) return '';\r\n\r\n            const normalized = this.normalizeStatus(status);\r\n            return normalized.toUpperCase();\r\n        },\r\n\r\n        /**\r\n         * Format team record value\r\n         */\r\n        formatTeamRecordValue(value) {\r\n            if (!value) return '';\r\n            // Ensure format is W-L\r\n            return value.toString().replace(/[^\\d-]/g, '');\r\n        },\r\n\r\n        /**\r\n         * Format bet type label\r\n         */\r\n        formatBetTypeLabel(type) {\r\n            if (!type) return '';\r\n\r\n            const typeMap = {\r\n                'spread': 'Spread',\r\n                'total': 'Total',\r\n                'moneyline': 'Moneyline',\r\n                'ml': 'Moneyline',\r\n                'parlay': 'Parlay',\r\n                'prop': 'Prop',\r\n                'player': 'Player Prop'\r\n            };\r\n\r\n            return typeMap[type.toLowerCase()] || type;\r\n        },\r\n\r\n        /**\r\n         * Format subtype label\r\n         */\r\n        formatSubtypeLabel(subtype) {\r\n            if (!subtype) return '';\r\n\r\n            const subtypeMap = {\r\n                '1h': '1st Half',\r\n                '2h': '2nd Half',\r\n                '1q': '1st Quarter',\r\n                '2q': '2nd Quarter',\r\n                '3q': '3rd Quarter',\r\n                '4q': '4th Quarter',\r\n                'game': 'Full Game',\r\n                'full': 'Full Game'\r\n            };\r\n\r\n            return subtypeMap[subtype.toLowerCase()] || subtype;\r\n        },\r\n\r\n        /**\r\n         * Format segment label\r\n         */\r\n        formatSegmentLabel(segment) {\r\n            if (!segment) return '';\r\n\r\n            const segmentMap = {\r\n                '1h': '1st Half',\r\n                '2h': '2nd Half',\r\n                'game': 'Full Game',\r\n                'full': 'Full Game',\r\n                'live': 'Live',\r\n                'pregame': 'Pre-Game'\r\n            };\r\n\r\n            return segmentMap[segment.toLowerCase()] || segment;\r\n        },\r\n\r\n        /**\r\n         * Create element with attributes\r\n         */\r\n        createElement(tag, attributes = {}, children = []) {\r\n            const element = document.createElement(tag);\r\n\r\n            // Set attributes\r\n            Object.entries(attributes).forEach(([key, value]) => {\r\n                if (key === 'className') {\r\n                    element.className = value;\r\n                } else if (key === 'innerHTML') {\r\n                    element.innerHTML = value;\r\n                } else if (key === 'textContent') {\r\n                    element.textContent = value;\r\n                } else if (key.startsWith('data-')) {\r\n                    element.setAttribute(key, value);\r\n                } else {\r\n                    element[key] = value;\r\n                }\r\n            });\r\n\r\n            // Add children\r\n            children.forEach(child => {\r\n                if (typeof child === 'string') {\r\n                    element.appendChild(document.createTextNode(child));\r\n                } else if (child instanceof Element) {\r\n                    element.appendChild(child);\r\n                }\r\n            });\r\n\r\n            return element;\r\n        },\r\n\r\n        /**\r\n         * Position dropdown relative to trigger button\r\n         */\r\n        positionDropdown(button, dropdown) {\r\n            if (!button || !dropdown) return;\r\n\r\n            const btnRect = button.getBoundingClientRect();\r\n            const dropdownHeight = dropdown.offsetHeight;\r\n            const viewportHeight = window.innerHeight;\r\n\r\n            // Reset positioning\r\n            dropdown.style.position = 'absolute';\r\n            dropdown.style.left = `${btnRect.left}px`;\r\n\r\n            // Check if dropdown would go off bottom of viewport\r\n            if (btnRect.bottom + dropdownHeight > viewportHeight && btnRect.top > dropdownHeight) {\r\n                // Position above button\r\n                dropdown.style.top = `${btnRect.top - dropdownHeight}px`;\r\n                dropdown.classList.add('dropdown-above');\r\n            } else {\r\n                // Position below button\r\n                dropdown.style.top = `${btnRect.bottom}px`;\r\n                dropdown.classList.remove('dropdown-above');\r\n            }\r\n\r\n            // Check horizontal overflow\r\n            const dropdownRect = dropdown.getBoundingClientRect();\r\n            if (dropdownRect.right > window.innerWidth) {\r\n                dropdown.style.left = `${window.innerWidth - dropdown.offsetWidth - 10}px`;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Close all dropdowns\r\n         */\r\n        closeAllDropdowns() {\r\n            document.querySelectorAll('.filter-dropdown.show').forEach(dropdown => {\r\n                dropdown.classList.remove('show');\r\n\r\n                // Find associated button and update aria\r\n                const btnId = dropdown.getAttribute('aria-labelledby');\r\n                if (btnId) {\r\n                    const btn = document.getElementById(btnId);\r\n                    if (btn) {\r\n                        btn.setAttribute('aria-expanded', 'false');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Extract abbreviation from team name\r\n         */\r\n        extractAbbreviation(name) {\r\n            if (!name) return '';\r\n\r\n            // Remove common suffixes\r\n            const cleaned = name\r\n                .replace(/(fc|united|city|town|athletic|rovers)$/i, '')\r\n                .trim();\r\n\r\n            // Split and get first letters\r\n            const words = cleaned.split(/\\s+/);\r\n\r\n            if (words.length === 1) {\r\n                // Single word - take first 3 letters\r\n                return words[0].substring(0, 3).toUpperCase();\r\n            } else {\r\n                // Multiple words - take first letter of each\r\n                return words\r\n                    .map(w => w.charAt(0))\r\n                    .join('')\r\n                    .substring(0, 3)\r\n                    .toUpperCase();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Format team name for display\r\n         */\r\n        formatTeamName(name) {\r\n            if (!name) return '';\r\n\r\n            // Title case\r\n            return name.replace(/\\w\\S*/g, txt =>\r\n                txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Debounce function for performance\r\n         */\r\n        debounce(func, wait) {\r\n            let timeout;\r\n            return function executedFunction(...args) {\r\n                const later = () => {\r\n                    clearTimeout(timeout);\r\n                    func(...args);\r\n                };\r\n                clearTimeout(timeout);\r\n                timeout = setTimeout(later, wait);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Throttle function for performance\r\n         */\r\n        throttle(func, limit) {\r\n            let inThrottle;\r\n            return function(...args) {\r\n                if (!inThrottle) {\r\n                    func.apply(this, args);\r\n                    inThrottle = true;\r\n                    setTimeout(() => inThrottle = false, limit);\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check if element is visible\r\n         */\r\n        isElementVisible(element) {\r\n            if (!element) return false;\r\n\r\n            const rect = element.getBoundingClientRect();\r\n            return (\r\n                rect.top >= 0 &&\r\n                rect.left >= 0 &&\r\n                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n                rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Scroll element into view smoothly\r\n         */\r\n        scrollIntoViewSmoothly(element, options = {}) {\r\n            if (!element) return;\r\n\r\n            const defaultOptions = {\r\n                behavior: 'smooth',\r\n                block: 'center',\r\n                inline: 'nearest'\r\n            };\r\n\r\n            element.scrollIntoView({ ...defaultOptions, ...options });\r\n        },\r\n\r\n        /**\r\n         * Get text content safely\r\n         */\r\n        getTextContent(element, selector) {\r\n            if (!element) return '';\r\n\r\n            if (selector) {\r\n                const child = element.querySelector(selector);\r\n                return child ? child.textContent.trim() : '';\r\n            }\r\n\r\n            return element.textContent.trim();\r\n        },\r\n\r\n        /**\r\n         * Set loading state on element\r\n         */\r\n        setLoadingState(element, isLoading, text = 'Loading...') {\r\n            if (!element) return;\r\n\r\n            if (isLoading) {\r\n                element.classList.add('loading');\r\n                element.setAttribute('aria-busy', 'true');\r\n\r\n                if (element.tagName === 'BUTTON') {\r\n                    element.disabled = true;\r\n                    element.setAttribute('data-original-text', element.textContent);\r\n                    element.textContent = text;\r\n                }\r\n            } else {\r\n                element.classList.remove('loading');\r\n                element.setAttribute('aria-busy', 'false');\r\n\r\n                if (element.tagName === 'BUTTON') {\r\n                    element.disabled = false;\r\n                    const originalText = element.getAttribute('data-original-text');\r\n                    if (originalText) {\r\n                        element.textContent = originalText;\r\n                        element.removeAttribute('data-original-text');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Parse range string (e.g., \"100-500\")\r\n         */\r\n        parseRange(rangeStr) {\r\n            if (!rangeStr) return { min: null, max: null };\r\n\r\n            const parts = rangeStr.split('-').map(p => parseFloat(p.trim()));\r\n            return {\r\n                min: parts[0] || null,\r\n                max: parts[1] || parts[0] || null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Format range for display\r\n         */\r\n        formatRangeLabel(range) {\r\n            if (!range) return '';\r\n\r\n            if (typeof range === 'string') {\r\n                const { min, max } = this.parseRange(range);\r\n                if (min === max || !max) {\r\n                    return this.formatCurrency(min);\r\n                }\r\n                return `${this.formatCurrency(min)} - ${this.formatCurrency(max)}`;\r\n            }\r\n\r\n            return range.toString();\r\n        },\r\n\r\n        /**\r\n         * Add event listener with cleanup\r\n         */\r\n        addEventListenerWithCleanup(element, event, handler) {\r\n            if (!element) return null;\r\n\r\n            element.addEventListener(event, handler);\r\n\r\n            // Return cleanup function\r\n            return () => element.removeEventListener(event, handler);\r\n        },\r\n\r\n        /**\r\n         * Batch DOM updates for performance\r\n         */\r\n        batchDOMUpdates(updates) {\r\n            requestAnimationFrame(() => {\r\n                updates.forEach(update => update());\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Create document fragment for multiple elements\r\n         */\r\n        createFragment(elements) {\r\n            const fragment = document.createDocumentFragment();\r\n            elements.forEach(el => {\r\n                if (el) fragment.appendChild(el);\r\n            });\r\n            return fragment;\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksDOMUtils = DOMUtils;\r\n\r\n})();\n\n/* === assets/js/modules/picks-state-manager.js === */\n/**\r\n * Picks State Manager Module\r\n * Centralized state management for the active picks table\r\n * Handles filter state, sort state, and state persistence\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    // Initialize the global state object if not already present\r\n    if (typeof window.tableState === 'undefined') {\r\n        window.tableState = {\r\n            filters: {\r\n                date: {\r\n                    start: null,\r\n                    end: null,\r\n                    selectedDates: null,\r\n                    selectedTimes: null,\r\n                    selectedBooks: null\r\n                },\r\n                matchup: {\r\n                    league: '',\r\n                    selectedLeagues: null,\r\n                    selectedTeams: null,\r\n                    ticketType: 'all'\r\n                },\r\n                pick: {\r\n                    betType: '',\r\n                    subtype: '',\r\n                    segment: '',\r\n                    selectedSegments: null\r\n                },\r\n                risk: {\r\n                    min: null,\r\n                    max: null,\r\n                    selectedRiskRanges: [],\r\n                    selectedWinRanges: []\r\n                },\r\n                status: []\r\n            },\r\n            sort: {\r\n                column: null,\r\n                direction: 'asc'\r\n            },\r\n            expandedParlayIds: []\r\n        };\r\n    }\r\n\r\n    // State shape validators\r\n    const StateShapeValidators = {\r\n        /**\r\n         * Creates a new date filter state object with all filter properties\r\n         */\r\n        createDateFilterState() {\r\n            return {\r\n                start: null,\r\n                end: null,\r\n                selectedDates: null,\r\n                selectedTimes: null,\r\n                selectedBooks: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new matchup filter state object\r\n         */\r\n        createMatchupFilterState() {\r\n            return {\r\n                league: '',\r\n                selectedLeagues: null,\r\n                selectedTeams: null,\r\n                ticketType: 'all'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new risk filter state object\r\n         */\r\n        createRiskFilterState() {\r\n            return {\r\n                min: null,\r\n                max: null,\r\n                selectedRiskRanges: [],\r\n                selectedWinRanges: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Creates a new pick filter state object\r\n         */\r\n        createPickFilterState() {\r\n            return {\r\n                betType: '',\r\n                subtype: '',\r\n                segment: '',\r\n                selectedSegments: null\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Ensures date filter state has the correct shape\r\n         */\r\n        ensureDateFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.date || typeof state.filters.date !== 'object') {\r\n                state.filters.date = this.createDateFilterState();\r\n                return;\r\n            }\r\n            const dateFilter = state.filters.date;\r\n            if (!('start' in dateFilter)) dateFilter.start = null;\r\n            if (!('end' in dateFilter)) dateFilter.end = null;\r\n            if (!('selectedDates' in dateFilter)) dateFilter.selectedDates = null;\r\n            if (!('selectedTimes' in dateFilter)) dateFilter.selectedTimes = null;\r\n            if (!('selectedBooks' in dateFilter)) dateFilter.selectedBooks = null;\r\n        },\r\n\r\n        /**\r\n         * Ensures matchup filter state has the correct shape\r\n         */\r\n        ensureMatchupFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.matchup || typeof state.filters.matchup !== 'object') {\r\n                state.filters.matchup = this.createMatchupFilterState();\r\n                return;\r\n            }\r\n            const matchupFilter = state.filters.matchup;\r\n            if (!('ticketType' in matchupFilter)) matchupFilter.ticketType = 'all';\r\n            if (!('selectedTeams' in matchupFilter)) matchupFilter.selectedTeams = null;\r\n            if (!('league' in matchupFilter)) matchupFilter.league = '';\r\n        },\r\n\r\n        /**\r\n         * Ensures risk filter state has the correct shape\r\n         */\r\n        ensureRiskFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.risk || typeof state.filters.risk !== 'object') {\r\n                state.filters.risk = this.createRiskFilterState();\r\n                return;\r\n            }\r\n            const riskFilter = state.filters.risk;\r\n            if (!('min' in riskFilter)) riskFilter.min = null;\r\n            if (!('max' in riskFilter)) riskFilter.max = null;\r\n            if (!Array.isArray(riskFilter.selectedRiskRanges)) riskFilter.selectedRiskRanges = [];\r\n            if (!Array.isArray(riskFilter.selectedWinRanges)) riskFilter.selectedWinRanges = [];\r\n        },\r\n\r\n        /**\r\n         * Ensures pick filter state has the correct shape\r\n         */\r\n        ensurePickFilterShape() {\r\n            const state = window.tableState;\r\n            if (!state.filters.pick) {\r\n                state.filters.pick = this.createPickFilterState();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Ensures all filter states have correct shapes\r\n         */\r\n        ensureAllFilterShapes() {\r\n            this.ensureDateFilterShape();\r\n            this.ensureMatchupFilterShape();\r\n            this.ensureRiskFilterShape();\r\n            this.ensurePickFilterShape();\r\n        }\r\n    };\r\n\r\n    // State management functions\r\n    const StateManager = {\r\n        /**\r\n         * Get the current table state\r\n         */\r\n        getState() {\r\n            return window.tableState;\r\n        },\r\n\r\n        /**\r\n         * Get a specific filter state\r\n         */\r\n        getFilter(filterType) {\r\n            return window.tableState.filters[filterType];\r\n        },\r\n\r\n        /**\r\n         * Update a specific filter\r\n         */\r\n        updateFilter(filterType, updates) {\r\n            if (!window.tableState.filters[filterType]) {\r\n                console.warn(`Filter type ${filterType} does not exist`);\r\n                return;\r\n            }\r\n            Object.assign(window.tableState.filters[filterType], updates);\r\n        },\r\n\r\n        /**\r\n         * Reset a specific filter to its default state\r\n         */\r\n        resetFilter(filterType) {\r\n            switch(filterType) {\r\n                case 'date':\r\n                    window.tableState.filters.date = StateShapeValidators.createDateFilterState();\r\n                    break;\r\n                case 'matchup':\r\n                    window.tableState.filters.matchup = StateShapeValidators.createMatchupFilterState();\r\n                    break;\r\n                case 'pick':\r\n                    window.tableState.filters.pick = StateShapeValidators.createPickFilterState();\r\n                    break;\r\n                case 'risk':\r\n                    window.tableState.filters.risk = StateShapeValidators.createRiskFilterState();\r\n                    break;\r\n                case 'status':\r\n                    window.tableState.filters.status = [];\r\n                    break;\r\n                case 'league':\r\n                    // Reset league-specific filters only\r\n                    window.tableState.filters.matchup.league = '';\r\n                    window.tableState.filters.matchup.selectedLeagues = null;\r\n                    break;\r\n                case 'segment':\r\n                    // Reset segment-specific filters only\r\n                    window.tableState.filters.pick.segment = '';\r\n                    window.tableState.filters.pick.selectedSegments = null;\r\n                    break;\r\n                default:\r\n                    console.warn(`Unknown filter type: ${filterType}`);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset all filters\r\n         */\r\n        resetAllFilters() {\r\n            window.tableState.filters = {\r\n                date: StateShapeValidators.createDateFilterState(),\r\n                matchup: StateShapeValidators.createMatchupFilterState(),\r\n                pick: StateShapeValidators.createPickFilterState(),\r\n                risk: StateShapeValidators.createRiskFilterState(),\r\n                status: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get expanded parlay IDs\r\n         */\r\n        getExpandedParlayIds() {\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n            return window.tableState.expandedParlayIds;\r\n        },\r\n\r\n        /**\r\n         * Set parlay expansion state\r\n         */\r\n        setParlayExpanded(parlayId, isExpanded) {\r\n            if (!parlayId) return;\r\n\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n\r\n            const index = window.tableState.expandedParlayIds.indexOf(parlayId);\r\n\r\n            if (isExpanded && index === -1) {\r\n                window.tableState.expandedParlayIds.push(parlayId);\r\n            } else if (!isExpanded && index !== -1) {\r\n                window.tableState.expandedParlayIds.splice(index, 1);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if parlay is expanded\r\n         */\r\n        isParlayExpanded(parlayId) {\r\n            if (!parlayId || !Array.isArray(window.tableState.expandedParlayIds)) {\r\n                return false;\r\n            }\r\n            return window.tableState.expandedParlayIds.includes(parlayId);\r\n        },\r\n\r\n        /**\r\n         * Toggle parlay expansion state\r\n         */\r\n        toggleParlayExpanded(parlayId) {\r\n            const isCurrentlyExpanded = this.isParlayExpanded(parlayId);\r\n            this.setParlayExpanded(parlayId, !isCurrentlyExpanded);\r\n            return !isCurrentlyExpanded;\r\n        },\r\n\r\n        /**\r\n         * Reset expansion state\r\n         */\r\n        resetExpansionState() {\r\n            window.tableState.expandedParlayIds = [];\r\n        },\r\n\r\n        /**\r\n         * Get sort state\r\n         */\r\n        getSortState() {\r\n            return window.tableState.sort;\r\n        },\r\n\r\n        /**\r\n         * Update sort state\r\n         */\r\n        updateSort(column, direction) {\r\n            window.tableState.sort = {\r\n                column: column,\r\n                direction: direction || 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Reset sort state\r\n         */\r\n        resetSort() {\r\n            window.tableState.sort = {\r\n                column: null,\r\n                direction: 'asc'\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Check if any filters are active\r\n         */\r\n        hasActiveFilters() {\r\n            const filters = window.tableState.filters;\r\n\r\n            // Check date filters\r\n            if (filters.date.selectedDates || filters.date.selectedTimes || filters.date.selectedBooks ||\r\n                filters.date.start || filters.date.end) {\r\n                return true;\r\n            }\r\n\r\n            // Check matchup/league filters\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues ||\r\n                filters.matchup.selectedTeams || filters.matchup.ticketType !== 'all') {\r\n                return true;\r\n            }\r\n\r\n            // Check pick/segment filters\r\n            if (filters.pick.betType || filters.pick.subtype || filters.pick.segment ||\r\n                filters.pick.selectedSegments) {\r\n                return true;\r\n            }\r\n\r\n            // Check risk filters\r\n            if (filters.risk.min !== null || filters.risk.max !== null ||\r\n                filters.risk.selectedRiskRanges.length > 0 ||\r\n                filters.risk.selectedWinRanges.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            // Check status filters\r\n            if (filters.status.length > 0) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Get active filter count\r\n         */\r\n        getActiveFilterCount() {\r\n            let count = 0;\r\n            const filters = window.tableState.filters;\r\n\r\n            if (filters.date.selectedDates) count++;\r\n            if (filters.date.selectedTimes) count++;\r\n            if (filters.date.selectedBooks) count++;\r\n            if (filters.matchup.league || filters.matchup.selectedLeagues) count++;\r\n            if (filters.matchup.selectedTeams) count++;\r\n            if (filters.pick.betType || filters.pick.subtype) count++;\r\n            if (filters.pick.segment || filters.pick.selectedSegments) count++;\r\n            if (filters.risk.selectedRiskRanges.length > 0) count++;\r\n            if (filters.risk.selectedWinRanges.length > 0) count++;\r\n            if (filters.status.length > 0) count++;\r\n\r\n            return count;\r\n        },\r\n\r\n        /**\r\n         * Initialize state\r\n         */\r\n        init() {\r\n            StateShapeValidators.ensureAllFilterShapes();\r\n            if (!Array.isArray(window.tableState.expandedParlayIds)) {\r\n                window.tableState.expandedParlayIds = [];\r\n            }\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksStateManager = {\r\n        ...StateManager,\r\n        validators: StateShapeValidators,\r\n        // Expose the tableState directly for backward compatibility\r\n        state: window.tableState\r\n    };\r\n\r\n    // Initialize on load\r\n    StateManager.init();\r\n\r\n})();\n\n/* === assets/js/modules/picks-table-renderer.js === */\n/**\r\n * Picks Table Renderer Module\r\n * Handles all table rendering, DOM updates, and visual presentation\r\n */\r\n(function() {\r\n    'use strict';\r\n\r\n    const TableRenderer = {\r\n        /**\r\n         * Get parent rows only (excluding parlay-legs rows)\r\n         */\r\n        getParentRowsOnly(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(row =>\r\n                row && row.tagName === 'TR' && !row.classList.contains('parlay-legs')\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Get all direct child rows from tbody\r\n         */\r\n        getDirectChildRows(tbody) {\r\n            if (!tbody) return [];\r\n            return Array.from(tbody.children).filter(node => node && node.tagName === 'TR');\r\n        },\r\n\r\n        /**\r\n         * Check if row is visible for zebra striping\r\n         */\r\n        isRowVisibleForZebra(row) {\r\n            if (!row) return false;\r\n            if (row.style.display === 'none') return false;\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Apply zebra stripes to table\r\n         */\r\n        applyZebraStripes() {\r\n            if (window.ZebraStripes && typeof window.ZebraStripes.applyPicksTableZebraStripes === 'function') {\r\n                window.ZebraStripes.applyPicksTableZebraStripes();\r\n                return;\r\n            }\r\n\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            const visibleRows = this.getParentRowsOnly(tbody)\r\n                .filter(row => this.isRowVisibleForZebra(row));\r\n\r\n            visibleRows.forEach((row, index) => {\r\n                const className = index % 2 === 0 ? 'zebra-even' : 'zebra-odd';\r\n                const otherClass = index % 2 === 0 ? 'zebra-odd' : 'zebra-even';\r\n\r\n                row.classList.remove(otherClass);\r\n                row.classList.add(className);\r\n                row.classList.add('zebra-row');\r\n\r\n                // Apply same class to associated parlay-legs row\r\n                if (window.PicksParlayManager) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        legsRow.classList.remove(otherClass);\r\n                        legsRow.classList.add(className);\r\n                        legsRow.classList.add('zebra-row');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Update table with current filters and sorting\r\n         */\r\n        updateTable() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return;\r\n\r\n            let parentRows = this.getParentRowsOnly(tbody);\r\n\r\n            // Apply sorting if active\r\n            const sortState = window.PicksStateManager ?\r\n                window.PicksStateManager.getSortState() :\r\n                window.tableState.sort;\r\n\r\n            if (sortState.column) {\r\n                parentRows = window.PicksSortManager ?\r\n                    window.PicksSortManager.applySorting(parentRows) :\r\n                    parentRows;\r\n\r\n                // Re-append in sorted order, keeping parlay-legs with parents\r\n                parentRows.forEach(row => {\r\n                    tbody.appendChild(row);\r\n\r\n                    // Delegate parlay leg row management to ParlayManager\r\n                    if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                        window.PicksParlayManager.ensureLegRowPosition(row);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Apply filters to rows\r\n            this.applyFiltersToRows(parentRows);\r\n\r\n            // Ensure parlay visibility is synced with state\r\n            if (window.PicksParlayManager) {\r\n                window.PicksParlayManager.refreshAllParlayVisibility();\r\n            }\r\n\r\n            // Apply zebra stripes\r\n            this.applyZebraStripes();\r\n\r\n            // Render filter chips\r\n            this.renderFilterChips();\r\n        },\r\n\r\n        /**\r\n         * Apply filters to table rows\r\n         */\r\n        applyFiltersToRows(rows) {\r\n            if (!rows) {\r\n                const tbody = document.getElementById('picks-tbody');\r\n                rows = this.getParentRowsOnly(tbody);\r\n            }\r\n\r\n            rows.forEach(row => {\r\n                // Prioritize DashboardFilterPills for dashboard page filters\r\n                // Falls back to PicksFilterManager for other pages\r\n                const shouldShow = window.DashboardFilterPills?.passesAllFilters ?\r\n                    window.DashboardFilterPills.passesAllFilters(row) :\r\n                    (window.PicksFilterManager ?\r\n                        window.PicksFilterManager.passesAllFilters(row) :\r\n                        true);\r\n\r\n                row.style.display = shouldShow ? '' : 'none';\r\n\r\n                // Manage parlay-legs visibility via ParlayManager\r\n                if (window.PicksParlayManager && row.classList.contains('parlay-row')) {\r\n                    const legsRow = window.PicksParlayManager.findParlayLegsRow(row);\r\n                    if (legsRow) {\r\n                        if (!shouldShow) {\r\n                            legsRow.style.display = 'none';\r\n                        } else {\r\n                            // Only show if parent is expanded\r\n                            const parlayId = row.getAttribute('data-row-id');\r\n                            const isExpanded = window.PicksStateManager ?\r\n                                window.PicksStateManager.isParlayExpanded(parlayId) :\r\n                                row.getAttribute('aria-expanded') === 'true';\r\n\r\n                            legsRow.style.display = isExpanded ? 'table-row' : 'none';\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Render filter chips showing active filters\r\n         */\r\n        renderFilterChips() {\r\n            const container = document.querySelector('.filter-chips') ||\r\n                            document.getElementById('filter-chips-container');\r\n            if (!container) return;\r\n\r\n            container.innerHTML = '';\r\n\r\n            const state = window.PicksStateManager ?\r\n                window.PicksStateManager.getState() :\r\n                window.tableState;\r\n\r\n            const filters = state.filters;\r\n            const chips = [];\r\n\r\n            // Date filters\r\n            if (filters.date.selectedDates && filters.date.selectedDates.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'dates',\r\n                    label: `Dates: ${filters.date.selectedDates.length} selected`,\r\n                    value: filters.date.selectedDates\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedTimes && filters.date.selectedTimes.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'times',\r\n                    label: `Times: ${filters.date.selectedTimes.length} selected`,\r\n                    value: filters.date.selectedTimes\r\n                });\r\n            }\r\n\r\n            if (filters.date.selectedBooks && filters.date.selectedBooks.length > 0) {\r\n                chips.push({\r\n                    type: 'date',\r\n                    subtype: 'books',\r\n                    label: `Books: ${filters.date.selectedBooks.length} selected`,\r\n                    value: filters.date.selectedBooks\r\n                });\r\n            }\r\n\r\n            // Matchup filters\r\n            if (filters.matchup.league || filters.matchup.selectedTeams) {\r\n                const label = filters.matchup.selectedTeams ?\r\n                    `Teams: ${filters.matchup.selectedTeams.length} selected` :\r\n                    `League: ${filters.matchup.league}`;\r\n                chips.push({\r\n                    type: 'matchup',\r\n                    label: label,\r\n                    value: filters.matchup\r\n                });\r\n            }\r\n\r\n            // Pick filters\r\n            if (filters.pick.betType || filters.pick.subtype) {\r\n                const parts = [];\r\n                if (filters.pick.betType) parts.push(filters.pick.betType);\r\n                if (filters.pick.subtype) parts.push(filters.pick.subtype);\r\n                chips.push({\r\n                    type: 'pick',\r\n                    label: `Pick: ${parts.join(' - ')}`,\r\n                    value: filters.pick\r\n                });\r\n            }\r\n\r\n            if (filters.pick.segment) {\r\n                chips.push({\r\n                    type: 'segment',\r\n                    label: `Segment: ${filters.pick.segment}`,\r\n                    value: filters.pick.segment\r\n                });\r\n            }\r\n\r\n            // Risk filters\r\n            if (filters.risk.selectedRiskRanges && filters.risk.selectedRiskRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'risk',\r\n                    label: `Risk: ${filters.risk.selectedRiskRanges.length} ranges`,\r\n                    value: filters.risk.selectedRiskRanges\r\n                });\r\n            }\r\n\r\n            if (filters.risk.selectedWinRanges && filters.risk.selectedWinRanges.length > 0) {\r\n                chips.push({\r\n                    type: 'win',\r\n                    label: `Win: ${filters.risk.selectedWinRanges.length} ranges`,\r\n                    value: filters.risk.selectedWinRanges\r\n                });\r\n            }\r\n\r\n            // Status filters\r\n            if (filters.status && filters.status.length > 0) {\r\n                chips.push({\r\n                    type: 'status',\r\n                    label: `Status: ${filters.status.join(', ')}`,\r\n                    value: filters.status\r\n                });\r\n            }\r\n\r\n            // Render chips\r\n            chips.forEach(chip => {\r\n                const chipEl = document.createElement('div');\r\n                chipEl.className = 'filter-chip';\r\n                chipEl.setAttribute('data-filter-type', chip.type);\r\n                if (chip.subtype) {\r\n                    chipEl.setAttribute('data-filter-subtype', chip.subtype);\r\n                }\r\n\r\n                const labelSpan = document.createElement('span');\r\n                labelSpan.className = 'filter-chip-label';\r\n                labelSpan.textContent = chip.label;\r\n\r\n                const removeBtn = document.createElement('button');\r\n                removeBtn.className = 'filter-chip-remove';\r\n                removeBtn.innerHTML = '&times;';\r\n                removeBtn.setAttribute('aria-label', `Remove ${chip.label} filter`);\r\n                removeBtn.onclick = () => this.removeFilterChip(chip.type, chip.subtype);\r\n\r\n                chipEl.appendChild(labelSpan);\r\n                chipEl.appendChild(removeBtn);\r\n                container.appendChild(chipEl);\r\n            });\r\n\r\n            // Add clear all button if there are chips\r\n            if (chips.length > 0) {\r\n                const clearAllBtn = document.createElement('button');\r\n                clearAllBtn.className = 'clear-all-filters';\r\n                clearAllBtn.textContent = 'Clear All';\r\n                clearAllBtn.onclick = () => this.clearAllFilters();\r\n                container.appendChild(clearAllBtn);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Remove a filter chip\r\n         */\r\n        removeFilterChip(type, subtype) {\r\n            if (window.PicksFilterManager) {\r\n                window.PicksFilterManager.clearFilterByChip(type, subtype);\r\n            } else {\r\n                console.warn('PicksFilterManager not loaded');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear all filters\r\n         */\r\n        clearAllFilters() {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetAllFilters();\r\n            }\r\n            this.updateTable();\r\n        },\r\n\r\n        /**\r\n         * Update filter indicators in header\r\n         */\r\n        updateFilterIndicators() {\r\n            const indicators = {\r\n                'date-filter-btn': window.tableState.filters.date.selectedDates ||\r\n                                   window.tableState.filters.date.selectedTimes ||\r\n                                   window.tableState.filters.date.selectedBooks,\r\n                'matchup-filter-btn': window.tableState.filters.matchup.league ||\r\n                                     window.tableState.filters.matchup.selectedTeams,\r\n                'pick-filter-btn': window.tableState.filters.pick.betType ||\r\n                                  window.tableState.filters.pick.subtype,\r\n                'risk-filter-btn': window.tableState.filters.risk.selectedRiskRanges?.length > 0 ||\r\n                                  window.tableState.filters.risk.selectedWinRanges?.length > 0,\r\n                'status-filter-btn': window.tableState.filters.status?.length > 0\r\n            };\r\n\r\n            Object.entries(indicators).forEach(([btnId, hasFilter]) => {\r\n                const btn = document.getElementById(btnId);\r\n                if (!btn) return;\r\n\r\n                const indicator = btn.querySelector('.filter-indicator') ||\r\n                                btn.querySelector('.indicator');\r\n\r\n                if (hasFilter) {\r\n                    btn.classList.add('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'inline-block';\r\n                    }\r\n                } else {\r\n                    btn.classList.remove('has-filter');\r\n                    if (indicator) {\r\n                        indicator.style.display = 'none';\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Update filter count\r\n            const filterCount = window.PicksStateManager ?\r\n                window.PicksStateManager.getActiveFilterCount() : 0;\r\n\r\n            const countEl = document.getElementById('active-filter-count');\r\n            if (countEl) {\r\n                countEl.textContent = filterCount > 0 ? `(${filterCount})` : '';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Announce filter changes for accessibility\r\n         */\r\n        announceFilterChange(message) {\r\n            let announcer = document.getElementById('filter-announcer');\r\n            if (!announcer) {\r\n                announcer = document.createElement('div');\r\n                announcer.id = 'filter-announcer';\r\n                announcer.setAttribute('role', 'status');\r\n                announcer.setAttribute('aria-live', 'polite');\r\n                announcer.setAttribute('aria-atomic', 'true');\r\n                announcer.style.position = 'absolute';\r\n                announcer.style.left = '-10000px';\r\n                announcer.style.width = '1px';\r\n                announcer.style.height = '1px';\r\n                announcer.style.overflow = 'hidden';\r\n                document.body.appendChild(announcer);\r\n            }\r\n            announcer.textContent = message;\r\n        },\r\n\r\n        /**\r\n         * Refresh the table display\r\n         */\r\n        refresh() {\r\n            this.updateTable();\r\n            this.updateFilterIndicators();\r\n        }\r\n    };\r\n\r\n    // Create debounced version of applyZebraStripes for performance\r\n    let zebraDebounceTimer;\r\n    TableRenderer.debouncedZebraStripes = function() {\r\n        clearTimeout(zebraDebounceTimer);\r\n        zebraDebounceTimer = setTimeout(() => {\r\n            TableRenderer.applyZebraStripes();\r\n        }, 50);\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksTableRenderer = TableRenderer;\r\n\r\n})();\n\n/* === assets/js/modules/picks-filter-manager.js === */\n/* ==========================================================================\r\n   PICKS FILTER MANAGER v1.1\r\n   --------------------------------------------------------------------------\r\n   Core filtering logic for the picks table. Exports window.PicksFilterManager.\r\n\r\n   ARCHITECTURE NOTE:\r\n   This is the \"source of truth\" for filter application logic.\r\n   Other modules should use window.PicksFilterManager methods:\r\n   - passesAllFilters(row): Check if a row passes all active filters\r\n   - applyFilter(type): Apply a specific filter type\r\n   - resetFilter(type): Reset a specific filter\r\n   - clearFilterByChip(type, subtype): Clear filter from chip click\r\n\r\n   Related modules:\r\n   - table-filters.js: UI initialization, dropdown handlers\r\n   - picks-state-manager.js: State persistence and updates\r\n   - picks-table-renderer.js: Uses passesAllFilters for row visibility\r\n   ========================================================================== */\r\n(function() {\r\n    'use strict';\r\n\r\n    const FilterManager = {\r\n        /**\r\n         * Get 1-based column index - delegates to shared PicksDOMUtils\r\n         */\r\n        getColumnIndex(row, columnKey) {\r\n            if (window.PicksDOMUtils?.getColumnIndex) {\r\n                return window.PicksDOMUtils.getColumnIndex(row, columnKey);\r\n            }\r\n            // Fallback if PicksDOMUtils not loaded yet\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Get a table cell - delegates to shared PicksDOMUtils\r\n         */\r\n        getCell(row, columnKey, fallbackIndex) {\r\n            if (window.PicksDOMUtils?.getCell) {\r\n                return window.PicksDOMUtils.getCell(row, columnKey, fallbackIndex);\r\n            }\r\n            // Fallback\r\n            const idx = fallbackIndex || null;\r\n            return idx ? row.querySelector(`td:nth-child(${idx})`) : null;\r\n        },\r\n\r\n        // Filter type configurations\r\n        DATE_FILTER_GROUP_MAP: {\r\n            dates: 'selectedDates',\r\n            times: 'selectedTimes',\r\n            books: 'selectedBooks'\r\n        },\r\n\r\n        DATE_FILTER_GROUP_LABELS: {\r\n            dates: 'Dates',\r\n            times: 'Times',\r\n            books: 'Sportsbooks'\r\n        },\r\n\r\n        /**\r\n         * Normalize filter value for comparison\r\n         */\r\n        normalizeFilterValue(value) {\r\n            return (value ?? '').toString().trim().toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Extract date/time parts from a row\r\n         */\r\n        getDateTimeParts(row) {\r\n            const dateCell = row.querySelector('td:first-child');\r\n            if (!dateCell) return { date: '', time: '', book: '' };\r\n\r\n            const dateEl = dateCell.querySelector('.cell-date');\r\n            const timeEl = dateCell.querySelector('.cell-time');\r\n            const bookEl = dateCell.querySelector('.cell-book, .sportsbook-name, .sportsbook-value');\r\n\r\n            let dateText = dateEl ? dateEl.textContent.trim() : '';\r\n            let timeText = timeEl ? timeEl.textContent.trim() : '';\r\n            let bookText = bookEl ? bookEl.textContent.trim() : '';\r\n\r\n            // Extract date with weekday if present\r\n            const weekdayEl = dateCell.querySelector('.cell-weekday');\r\n            if (weekdayEl) {\r\n                const weekday = weekdayEl.textContent.trim();\r\n                if (weekday && !dateText.includes(weekday)) {\r\n                    dateText = `${weekday} ${dateText}`;\r\n                }\r\n            }\r\n\r\n            return {\r\n                date: dateText,\r\n                time: timeText,\r\n                book: bookText\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get matchup value from row\r\n         */\r\n        getMatchupValue(row) {\r\n            const matchupCell = this.getCell(row, 'matchup', 2);\r\n            if (!matchupCell) return '';\r\n\r\n            // Get full text content\r\n            let text = matchupCell.textContent || '';\r\n\r\n            // Try to get team names from logos\r\n            const logos = matchupCell.querySelectorAll('.team-logo');\r\n            if (logos.length > 0) {\r\n                const teams = Array.from(logos).map(logo =>\r\n                    logo.getAttribute('alt') || logo.getAttribute('title') || ''\r\n                ).filter(Boolean);\r\n                if (teams.length > 0) {\r\n                    text = teams.join(' vs ');\r\n                }\r\n            }\r\n\r\n            return text.toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Get pick value from row\r\n         */\r\n        getPickValue(row) {\r\n            const pickCell = this.getCell(row, 'pick', 3);\r\n            if (!pickCell) return '';\r\n\r\n            const pickText = pickCell.textContent || '';\r\n            const betTypeEl = pickCell.querySelector('[data-bet-type]');\r\n            const betType = betTypeEl ? betTypeEl.getAttribute('data-bet-type') : '';\r\n\r\n            return {\r\n                text: pickText.toLowerCase(),\r\n                betType: betType.toLowerCase()\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Get currency value from row\r\n         */\r\n        getCurrencyValue(row, columnIndex) {\r\n            const cell = row.querySelector(`td:nth-child(${columnIndex})`);\r\n            if (!cell) return null;\r\n\r\n            const text = cell.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get risk value from row\r\n         */\r\n        getRiskValue(row) {\r\n            const cell = this.getCell(row, 'risk', 5);\r\n            if (!cell) return null;\r\n            const amountEl = cell.querySelector('.risk-amount');\r\n            if (!amountEl) return null;\r\n            const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get win value from row\r\n         */\r\n        getWinValue(row) {\r\n            const cell = this.getCell(row, 'risk', 5);\r\n            if (!cell) return null;\r\n            const amountEl = cell.querySelector('.win-amount');\r\n            if (!amountEl) return null;\r\n            const text = amountEl.textContent.replace(/[$,]/g, '').trim();\r\n            return text ? parseFloat(text) : null;\r\n        },\r\n\r\n        /**\r\n         * Get status value from row\r\n         */\r\n        getStatusValue(row) {\r\n            const statusCell = this.getCell(row, 'status') || row.querySelector('td:last-child');\r\n            if (!statusCell) return '';\r\n\r\n            const badge = statusCell.querySelector('.status-badge');\r\n            if (badge) {\r\n                // Try multiple attributes for status\r\n                return badge.getAttribute('data-status') ||\r\n                       badge.className.match(/status-(\\w+)/)?.[1] ||\r\n                       badge.textContent.trim().toLowerCase();\r\n            }\r\n\r\n            return statusCell.textContent.trim().toLowerCase();\r\n        },\r\n\r\n        /**\r\n         * Normalize status for comparison\r\n         */\r\n        normalizeStatus(raw) {\r\n            if (window.PicksDOMUtils && window.PicksDOMUtils.normalizeStatus) {\r\n                return window.PicksDOMUtils.normalizeStatus(raw);\r\n            }\r\n\r\n            if (!raw) return '';\r\n            const lower = raw.toString().toLowerCase().trim();\r\n\r\n            const statusMap = {\r\n                'win': 'win',\r\n                'won': 'win',\r\n                'winner': 'win',\r\n                'loss': 'loss',\r\n                'lost': 'loss',\r\n                'lose': 'loss',\r\n                'loser': 'loss',\r\n                'push': 'push',\r\n                'tie': 'push',\r\n                'void': 'void',\r\n                'voided': 'void',\r\n                'cancelled': 'void',\r\n                'pending': 'pending',\r\n                'open': 'pending',\r\n                'live': 'live',\r\n                'in-progress': 'live',\r\n                'in progress': 'live',\r\n                'active': 'live'\r\n            };\r\n\r\n            return statusMap[lower] || lower;\r\n        },\r\n\r\n        /**\r\n         * Detect bet type from row\r\n         */\r\n        detectBetType(row) {\r\n            const pickCell = this.getCell(row, 'pick', 3);\r\n            if (!pickCell) return { type: '', subtype: '' };\r\n\r\n            const pickText = (pickCell.textContent || '').toLowerCase();\r\n            const betTypeAttr = pickCell.querySelector('[data-bet-type]');\r\n\r\n            if (betTypeAttr) {\r\n                const type = betTypeAttr.getAttribute('data-bet-type').toLowerCase();\r\n                const subtype = betTypeAttr.getAttribute('data-bet-subtype') || '';\r\n                return { type, subtype: subtype.toLowerCase() };\r\n            }\r\n\r\n            // Pattern matching for bet types\r\n            if (pickText.includes('spread') || pickText.includes('+') || pickText.includes('-')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'spread', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'spread', subtype: '2h' };\r\n                }\r\n                return { type: 'spread', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('total') || pickText.includes('over') || pickText.includes('under')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'total', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'total', subtype: '2h' };\r\n                }\r\n                return { type: 'total', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('moneyline') || pickText.includes('ml')) {\r\n                if (pickText.includes('1st') || pickText.includes('first')) {\r\n                    return { type: 'moneyline', subtype: '1h' };\r\n                }\r\n                if (pickText.includes('2nd') || pickText.includes('second')) {\r\n                    return { type: 'moneyline', subtype: '2h' };\r\n                }\r\n                return { type: 'moneyline', subtype: 'game' };\r\n            }\r\n\r\n            if (pickText.includes('parlay')) {\r\n                return { type: 'parlay', subtype: '' };\r\n            }\r\n\r\n            if (pickText.includes('prop') || pickText.includes('player')) {\r\n                return { type: 'prop', subtype: '' };\r\n            }\r\n\r\n            return { type: '', subtype: '' };\r\n        },\r\n\r\n        /**\r\n         * Detect game segment from row\r\n         */\r\n        detectSegment(row) {\r\n            const segmentCell = this.getCell(row, 'segment', 4);\r\n            if (!segmentCell) return 'game';\r\n\r\n            const segmentSpan = segmentCell.querySelector('.game-segment');\r\n            if (segmentSpan && segmentSpan.getAttribute('data-segment')) {\r\n                return segmentSpan.getAttribute('data-segment').toLowerCase();\r\n            }\r\n\r\n            const text = segmentCell.textContent.trim().toLowerCase();\r\n            if (text.includes('1st') || text.includes('1h') || text.includes('1q')) return '1h';\r\n            if (text.includes('2nd') || text.includes('2h') || text.includes('2q')) return '2h';\r\n            \r\n            return 'game';\r\n        },\r\n\r\n        /**\r\n         * Check if value matches range list\r\n         */\r\n        valueMatchesRangeList(ranges, value) {\r\n            if (!ranges || ranges.length === 0 || value === null) return false;\r\n\r\n            return ranges.some(range => {\r\n                const [min, max] = range.split('-').map(v => parseFloat(v));\r\n                return value >= min && value <= max;\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Check if row passes date filter\r\n         */\r\n        passesDateFilter(row) {\r\n            const filters = window.tableState.filters.date;\r\n\r\n            // If no date filters active, pass\r\n            if (!filters.selectedDates && !filters.selectedTimes &&\r\n                !filters.selectedBooks && !filters.start && !filters.end) {\r\n                return true;\r\n            }\r\n\r\n            const { date, time, book } = this.getDateTimeParts(row);\r\n\r\n            // Check selected dates\r\n            if (filters.selectedDates && filters.selectedDates.length > 0) {\r\n                const normalizedDate = this.normalizeFilterValue(date);\r\n                const passes = filters.selectedDates.some(selected =>\r\n                    normalizedDate.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            // Check selected times\r\n            if (filters.selectedTimes && filters.selectedTimes.length > 0) {\r\n                const normalizedTime = this.normalizeFilterValue(time);\r\n                const passes = filters.selectedTimes.some(selected =>\r\n                    normalizedTime.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            // Check selected books\r\n            if (filters.selectedBooks && filters.selectedBooks.length > 0) {\r\n                const normalizedBook = this.normalizeFilterValue(book);\r\n                const passes = filters.selectedBooks.some(selected =>\r\n                    normalizedBook.includes(this.normalizeFilterValue(selected))\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes matchup filter\r\n         */\r\n        passesMatchupFilter(row) {\r\n            const filters = window.tableState.filters.matchup;\r\n\r\n            // Check ticket type filter\r\n            if (filters.ticketType && filters.ticketType !== 'all') {\r\n                const isParlay = row.classList.contains('parlay-row');\r\n                if (filters.ticketType === 'single' && isParlay) return false;\r\n                if (filters.ticketType === 'parlay' && !isParlay) return false;\r\n            }\r\n\r\n            // Check league filter\r\n            if (filters.league) {\r\n                const matchupText = this.getMatchupValue(row);\r\n                if (!matchupText.includes(filters.league.toLowerCase())) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check selected teams\r\n            if (filters.selectedTeams && filters.selectedTeams.length > 0) {\r\n                const matchupText = this.getMatchupValue(row);\r\n                const passes = filters.selectedTeams.some(team =>\r\n                    matchupText.includes(team.toLowerCase())\r\n                );\r\n                if (!passes) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes pick filter\r\n         */\r\n        passesPickFilter(row) {\r\n            const filters = window.tableState.filters.pick;\r\n\r\n            if (filters.betType || filters.subtype) {\r\n                const detected = this.detectBetType(row);\r\n\r\n                if (filters.betType && detected.type !== filters.betType.toLowerCase()) {\r\n                    return false;\r\n                }\r\n\r\n                if (filters.subtype && detected.subtype !== filters.subtype.toLowerCase()) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (filters.segment) {\r\n                const segment = this.detectSegment(row);\r\n                if (segment !== filters.segment.toLowerCase()) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes risk filter\r\n         */\r\n        passesRiskFilter(row) {\r\n            const filters = window.tableState.filters.risk;\r\n\r\n            // Check risk ranges\r\n            if (filters.selectedRiskRanges && filters.selectedRiskRanges.length > 0) {\r\n                const risk = this.getRiskValue(row);\r\n                if (!this.valueMatchesRangeList(filters.selectedRiskRanges, risk)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check win ranges\r\n            if (filters.selectedWinRanges && filters.selectedWinRanges.length > 0) {\r\n                const win = this.getWinValue(row);\r\n                if (!this.valueMatchesRangeList(filters.selectedWinRanges, win)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            // Check min/max values (legacy support)\r\n            if (filters.min !== null || filters.max !== null) {\r\n                const risk = this.getRiskValue(row);\r\n                if (filters.min !== null && risk < filters.min) return false;\r\n                if (filters.max !== null && risk > filters.max) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Check if row passes status filter\r\n         */\r\n        passesStatusFilter(row) {\r\n            const filters = window.tableState.filters.status;\r\n\r\n            if (!filters || filters.length === 0) {\r\n                return true;\r\n            }\r\n\r\n            const status = this.normalizeStatus(this.getStatusValue(row));\r\n            return filters.some(filter =>\r\n                this.normalizeStatus(filter) === status\r\n            );\r\n        },\r\n\r\n        /**\r\n         * Check if row passes all filters\r\n         */\r\n        passesAllFilters(row) {\r\n            const filters = window.tableState?.filters;\r\n            if (!filters) return true;\r\n\r\n            // 1. Search Filter\r\n            if (filters.search) {\r\n                const rowText = row.textContent.toLowerCase();\r\n                if (!rowText.includes(filters.search)) return false;\r\n            }\r\n\r\n            // 2. Date Filter\r\n            if (filters.date) {\r\n                const { start, end } = filters.date;\r\n                if (start && end) {\r\n                    const rowEpoch = row.getAttribute('data-epoch');\r\n                    // Only filter by epoch if the row has the data-epoch attribute\r\n                    // Rows without data-epoch should pass through (don't exclude valid data)\r\n                    if (rowEpoch) {\r\n                        const epochNum = parseInt(rowEpoch, 10);\r\n                        if (!isNaN(epochNum)) {\r\n                            const rowDate = new Date(epochNum * 1000);\r\n                            // Set times to ensure inclusive comparison\r\n                            const startDate = new Date(start); startDate.setHours(0,0,0,0);\r\n                            const endDate = new Date(end); endDate.setHours(23,59,59,999);\r\n\r\n                            if (rowDate < startDate || rowDate > endDate) return false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // 3. League Filter\r\n            if (filters.matchup?.league) {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toLowerCase();\r\n                if (rowLeague !== filters.matchup.league.toLowerCase()) return false;\r\n            } else if (filters.matchup?.selectedLeagues?.length > 0) {\r\n                const rowLeague = (row.getAttribute('data-league') || '').toLowerCase();\r\n                const selectedLeagues = filters.matchup.selectedLeagues.map(l => l.toLowerCase());\r\n                if (!selectedLeagues.includes(rowLeague)) return false;\r\n            }\r\n\r\n            // 4. Segment Filter\r\n            if (filters.pick?.segment) {\r\n                const rowSegment = (row.getAttribute('data-segment') || '').toLowerCase();\r\n                let normalizedRowSegment = rowSegment;\r\n                if (rowSegment === 'full game') normalizedRowSegment = 'full';\r\n\r\n                if (normalizedRowSegment !== filters.pick.segment.toLowerCase()) return false;\r\n            } else if (filters.pick?.selectedSegments?.length > 0) {\r\n                const rowSegment = (row.getAttribute('data-segment') || '').toLowerCase();\r\n                let normalizedRowSegment = rowSegment;\r\n                if (rowSegment === 'full game') normalizedRowSegment = 'full';\r\n\r\n                const selectedSegments = filters.pick.selectedSegments.map(s => s.toLowerCase());\r\n                if (!selectedSegments.includes(normalizedRowSegment)) return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Apply filters to table (debounced for performance)\r\n         */\r\n        applyFilters: (function() {\r\n            // Create debounced version of the actual filter application\r\n            let debouncedApply = null;\r\n\r\n            return function() {\r\n                // Lazy-init debounced function (SharedUtils may not be loaded yet)\r\n                if (!debouncedApply && window.SharedUtils?.debounce) {\r\n                    debouncedApply = window.SharedUtils.debounce(function() {\r\n                        if (window.PicksTableRenderer) {\r\n                            window.PicksTableRenderer.updateTable();\r\n                        }\r\n                    }, 150);\r\n                }\r\n\r\n                // Use debounced version if available, otherwise apply immediately\r\n                if (debouncedApply) {\r\n                    debouncedApply();\r\n                } else if (window.PicksTableRenderer) {\r\n                    window.PicksTableRenderer.updateTable();\r\n                } else {\r\n                    console.warn('PicksTableRenderer not loaded');\r\n                }\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * Apply specific filter type\r\n         */\r\n        applyFilter(type, options = {}) {\r\n            // Update state based on filter type\r\n            switch(type) {\r\n                case 'date':\r\n                    this.syncDateFilterStateFromUI();\r\n                    break;\r\n                case 'matchup':\r\n                    this.syncMatchupFilterStateFromUI();\r\n                    break;\r\n                case 'pick':\r\n                    this.syncPickFilterStateFromUI();\r\n                    break;\r\n                case 'risk':\r\n                    this.syncRiskFilterStateFromUI();\r\n                    break;\r\n                case 'status':\r\n                    this.syncStatusFilterStateFromUI();\r\n                    break;\r\n                case 'league':\r\n                    this.syncLeagueFilterStateFromUI();\r\n                    break;\r\n                case 'segment':\r\n                    this.syncSegmentFilterStateFromUI();\r\n                    break;\r\n            }\r\n\r\n            // Apply all filters\r\n            this.applyFilters();\r\n\r\n            // Announce change for accessibility\r\n            if (window.PicksTableRenderer) {\r\n                const count = this.countVisibleRows();\r\n                window.PicksTableRenderer.announceFilterChange(\r\n                    `Filter applied. ${count} rows visible.`\r\n                );\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset specific filter\r\n         */\r\n        resetFilter(type) {\r\n            if (window.PicksStateManager) {\r\n                window.PicksStateManager.resetFilter(type);\r\n            }\r\n\r\n            // Clear UI elements\r\n            this.clearFilterUI(type);\r\n\r\n            // Re-apply filters\r\n            this.applyFilters();\r\n        },\r\n\r\n        /**\r\n         * Clear filter by chip\r\n         */\r\n        clearFilterByChip(type, subtype) {\r\n            if (type === 'date' && subtype) {\r\n                // Clear specific date filter subtype\r\n                const stateKey = this.DATE_FILTER_GROUP_MAP[subtype];\r\n                if (stateKey) {\r\n                    window.tableState.filters.date[stateKey] = null;\r\n                }\r\n            } else {\r\n                // Clear entire filter type\r\n                this.resetFilter(type);\r\n            }\r\n\r\n            this.applyFilters();\r\n        },\r\n\r\n        /**\r\n         * Sync date filter state from UI\r\n         */\r\n        syncDateFilterStateFromUI() {\r\n            const container = document.getElementById('date-filter-options');\r\n            if (!container) return;\r\n\r\n            const checkboxes = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const grouped = { dates: [], times: [], books: [] };\r\n\r\n            checkboxes.forEach(cb => {\r\n                if (cb.id === 'date-select-all') return;\r\n\r\n                const group = cb.getAttribute('data-group');\r\n                const value = cb.value;\r\n\r\n                if (group && value && grouped[group]) {\r\n                    grouped[group].push(value);\r\n                }\r\n            });\r\n\r\n            // Update state\r\n            window.tableState.filters.date.selectedDates = grouped.dates.length > 0 ? grouped.dates : null;\r\n            window.tableState.filters.date.selectedTimes = grouped.times.length > 0 ? grouped.times : null;\r\n            window.tableState.filters.date.selectedBooks = grouped.books.length > 0 ? grouped.books : null;\r\n        },\r\n\r\n        /**\r\n         * Sync matchup filter state from UI\r\n         */\r\n        syncMatchupFilterStateFromUI() {\r\n            const teamCheckboxes = document.querySelectorAll('#teams-list input[type=\"checkbox\"]:not(#teams-select-all)');\r\n            const selectedTeams = Array.from(teamCheckboxes)\r\n                .filter(cb => cb.checked)\r\n                .map(cb => cb.value);\r\n\r\n            window.tableState.filters.matchup.selectedTeams =\r\n                selectedTeams.length > 0 ? selectedTeams : null;\r\n        },\r\n\r\n        /**\r\n         * Sync pick filter state from UI\r\n         */\r\n        syncPickFilterStateFromUI() {\r\n            const betTypeSelect = document.getElementById('bet-type-select');\r\n            const subtypeSelect = document.getElementById('subtype-select');\r\n            const segmentSelect = document.getElementById('segment-select');\r\n\r\n            if (betTypeSelect) {\r\n                window.tableState.filters.pick.betType = betTypeSelect.value;\r\n            }\r\n\r\n            if (subtypeSelect) {\r\n                window.tableState.filters.pick.subtype = subtypeSelect.value;\r\n            }\r\n\r\n            if (segmentSelect) {\r\n                window.tableState.filters.pick.segment = segmentSelect.value;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync risk filter state from UI\r\n         */\r\n        syncRiskFilterStateFromUI() {\r\n            const riskContainer = document.getElementById('risk-ranges');\r\n            const winContainer = document.getElementById('win-ranges');\r\n\r\n            if (riskContainer) {\r\n                const checked = riskContainer.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n                const ranges = Array.from(checked).map(cb => cb.value);\r\n                window.tableState.filters.risk.selectedRiskRanges = ranges;\r\n            }\r\n\r\n            if (winContainer) {\r\n                const checked = winContainer.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n                const ranges = Array.from(checked).map(cb => cb.value);\r\n                window.tableState.filters.risk.selectedWinRanges = ranges;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync status filter state from UI\r\n         */\r\n        syncStatusFilterStateFromUI() {\r\n            const container = document.getElementById('status-filter-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const statuses = Array.from(checked).map(cb => cb.value);\r\n\r\n            window.tableState.filters.status = statuses;\r\n        },\r\n\r\n        /**\r\n         * Sync league filter state from UI\r\n         */\r\n        syncLeagueFilterStateFromUI() {\r\n            const container = document.getElementById('league-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const leagues = Array.from(checked).map(cb => cb.value);\r\n\r\n            // If all are checked, treat as no filter\r\n            const allCheckboxes = container.querySelectorAll('input[type=\"checkbox\"]');\r\n            if (leagues.length === allCheckboxes.length) {\r\n                window.tableState.filters.matchup.league = null;\r\n            } else if (leagues.length === 1) {\r\n                // Single league selected\r\n                window.tableState.filters.matchup.league = leagues[0];\r\n            } else if (leagues.length > 0) {\r\n                // Multiple leagues - store as array\r\n                window.tableState.filters.matchup.selectedLeagues = leagues;\r\n                window.tableState.filters.matchup.league = null;\r\n            } else {\r\n                window.tableState.filters.matchup.league = null;\r\n                window.tableState.filters.matchup.selectedLeagues = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sync segment filter state from UI\r\n         */\r\n        syncSegmentFilterStateFromUI() {\r\n            const container = document.getElementById('segment-options');\r\n            if (!container) return;\r\n\r\n            const checked = container.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n            const segments = Array.from(checked).map(cb => cb.value);\r\n\r\n            // If all are checked, treat as no filter\r\n            const allCheckboxes = container.querySelectorAll('input[type=\"checkbox\"]');\r\n            if (segments.length === allCheckboxes.length) {\r\n                window.tableState.filters.pick.segment = null;\r\n            } else if (segments.length === 1) {\r\n                // Single segment selected\r\n                window.tableState.filters.pick.segment = segments[0];\r\n            } else if (segments.length > 0) {\r\n                // Multiple segments - store as array\r\n                window.tableState.filters.pick.selectedSegments = segments;\r\n                window.tableState.filters.pick.segment = null;\r\n            } else {\r\n                window.tableState.filters.pick.segment = null;\r\n                window.tableState.filters.pick.selectedSegments = null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clear filter UI elements\r\n         */\r\n        clearFilterUI(type) {\r\n            switch(type) {\r\n                case 'date':\r\n                    const dateChecks = document.querySelectorAll('#date-filter-options input[type=\"checkbox\"]');\r\n                    dateChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'matchup':\r\n                    const leagueSelect = document.getElementById('league-select');\r\n                    if (leagueSelect) leagueSelect.value = '';\r\n                    const teamChecks = document.querySelectorAll('#teams-list input[type=\"checkbox\"]');\r\n                    teamChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'pick':\r\n                    const betTypeSelect = document.getElementById('bet-type-select');\r\n                    if (betTypeSelect) betTypeSelect.value = '';\r\n                    const subtypeSelect = document.getElementById('subtype-select');\r\n                    if (subtypeSelect) subtypeSelect.value = '';\r\n                    const segmentSelect = document.getElementById('segment-select');\r\n                    if (segmentSelect) segmentSelect.value = '';\r\n                    break;\r\n                case 'risk':\r\n                    const riskChecks = document.querySelectorAll('#risk-ranges input[type=\"checkbox\"], #win-ranges input[type=\"checkbox\"]');\r\n                    riskChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'status':\r\n                    const statusChecks = document.querySelectorAll('#status-filter-options input[type=\"checkbox\"]');\r\n                    statusChecks.forEach(cb => cb.checked = false);\r\n                    break;\r\n                case 'league':\r\n                    const leagueChecks = document.querySelectorAll('#league-options input[type=\"checkbox\"]');\r\n                    leagueChecks.forEach(cb => cb.checked = true); // Reset to all selected\r\n                    break;\r\n                case 'segment':\r\n                    const segmentChecks = document.querySelectorAll('#segment-options input[type=\"checkbox\"]');\r\n                    segmentChecks.forEach(cb => cb.checked = true); // Reset to all selected\r\n                    break;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Count visible rows after filtering\r\n         */\r\n        countVisibleRows() {\r\n            const tbody = document.getElementById('picks-tbody');\r\n            if (!tbody) return 0;\r\n\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n            return Array.from(rows).filter(row => row.style.display !== 'none').length;\r\n        }\r\n    };\r\n\r\n    // Export to global scope\r\n    window.PicksFilterManager = FilterManager;\r\n\r\n})();\n\n/* === dashboard/js/picks-service.js === */\n/**\r\n * Azure Picks Service - Enterprise-grade pick storage via Azure Cosmos DB\r\n * Replaces localStorage-based LocalPicksManager\r\n *\r\n * @module PicksService\r\n */\r\n\r\nconst PicksService = (function () {\r\n    'use strict';\r\n\r\n    // API Configuration\r\n    const apiBaseFromConfig =\r\n        window.GBSV_CONFIG?.FUNCTIONS_URL ||\r\n        window.APP_CONFIG?.FUNCTIONS_BASE_URL ||\r\n        (window.APP_CONFIG?.API_BASE_URL ? window.APP_CONFIG.API_BASE_URL.replace(/\\/api$/, '') : '') ||\r\n        window.APP_CONFIG?.API_BASE_FALLBACK ||\r\n        window.location.origin;\r\n    const API_BASE = apiBaseFromConfig;\r\n    const PICKS_ENDPOINT = `${API_BASE}/api/picks`;\r\n\r\n    // Cache for performance (optional local caching)\r\n    let picksCache = null;\r\n    let lastFetch = null;\r\n    const CACHE_TTL = 30000; // 30 seconds\r\n\r\n    /**\r\n     * Make authenticated API request\r\n     */\r\n    async function apiRequest(endpoint, options = {}) {\r\n        const url = endpoint.startsWith('http') ? endpoint : `${PICKS_ENDPOINT}${endpoint}`;\r\n\r\n        const config = {\r\n            method: options.method || 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...options.headers\r\n            },\r\n            ...options\r\n        };\r\n\r\n        if (options.body && typeof options.body === 'object') {\r\n            config.body = JSON.stringify(options.body);\r\n        }\r\n\r\n        try {\r\n            const response = await fetch(url, config);\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || `API error: ${response.status}`);\r\n            }\r\n\r\n            return data;\r\n        } catch (error) {\r\n            console.error('[PicksService] API request failed:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Invalidate cache\r\n     */\r\n    function invalidateCache() {\r\n        picksCache = null;\r\n        lastFetch = null;\r\n    }\r\n\r\n    /**\r\n     * Get all picks with optional filtering\r\n     * @param {Object} filters - Query filters (status, league, date, etc.)\r\n     * @returns {Promise<Array>} Array of pick objects\r\n     */\r\n    async function getAll(filters = {}) {\r\n        // Build query string\r\n        const params = new URLSearchParams();\r\n        Object.entries(filters).forEach(([key, value]) => {\r\n            if (value !== undefined && value !== null && value !== '') {\r\n                params.append(key, value);\r\n            }\r\n        });\r\n\r\n        const query = params.toString() ? `?${params}` : '';\r\n\r\n        try {\r\n            const response = await apiRequest(query);\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get active picks (pending, live, on-track, at-risk)\r\n     * @returns {Promise<Array>} Array of active picks\r\n     */\r\n    async function getActive() {\r\n        try {\r\n            const response = await apiRequest('/active');\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get active picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get settled picks (won, lost, push)\r\n     * @returns {Promise<Array>} Array of settled picks\r\n     */\r\n    async function getSettled() {\r\n        try {\r\n            const response = await apiRequest('/settled');\r\n            return response.picks || [];\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to get settled picks:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get a single pick by ID\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<Object|null>} Pick object or null\r\n     */\r\n    async function getById(id) {\r\n        try {\r\n            const response = await apiRequest(`/${id}`);\r\n            return response.pick || null;\r\n        } catch (error) {\r\n            if (error.message.includes('404')) {\r\n                return null;\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get picks by league\r\n     * @param {string} league - League code (NBA, NFL, NCAAB, NCAAF)\r\n     * @returns {Promise<Array>} Array of picks for the league\r\n     */\r\n    async function getByLeague(league) {\r\n        return getAll({ league: league.toUpperCase() });\r\n    }\r\n\r\n    /**\r\n     * Get picks by date\r\n     * @param {string} date - Date in YYYY-MM-DD format\r\n     * @returns {Promise<Array>} Array of picks for the date\r\n     */\r\n    async function getByDate(date) {\r\n        return getAll({ date });\r\n    }\r\n\r\n    /**\r\n     * Get picks within a date range\r\n     * @param {string} fromDate - Start date (YYYY-MM-DD)\r\n     * @param {string} toDate - End date (YYYY-MM-DD)\r\n     * @returns {Promise<Array>} Array of picks in range\r\n     */\r\n    async function getByDateRange(fromDate, toDate) {\r\n        return getAll({ from: fromDate, to: toDate });\r\n    }\r\n\r\n    /**\r\n     * Get today's picks\r\n     * @returns {Promise<Array>} Array of today's picks\r\n     */\r\n    async function getToday() {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        return getByDate(today);\r\n    }\r\n\r\n    /**\r\n     * Create one or more picks\r\n     * @param {Object|Array} picks - Single pick or array of picks\r\n     * @returns {Promise<Object>} Creation result\r\n     */\r\n    async function create(picks) {\r\n        invalidateCache();\r\n\r\n        const body = Array.isArray(picks) ? picks : [picks];\r\n\r\n        try {\r\n            const response = await apiRequest('', {\r\n                method: 'POST',\r\n                body\r\n            });\r\n\r\n            // Dispatch event for UI updates\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'create', count: response.created || body.length }\r\n            }));\r\n\r\n            return response;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to create picks:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update a pick\r\n     * @param {string} id - Pick ID\r\n     * @param {Object} updates - Fields to update\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function update(id, updates) {\r\n        invalidateCache();\r\n\r\n        try {\r\n            const response = await apiRequest(`/${id}`, {\r\n                method: 'PATCH',\r\n                body: updates\r\n            });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'update', id }\r\n            }));\r\n\r\n            return response.pick;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to update pick:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update pick status (convenience method)\r\n     * @param {string} id - Pick ID\r\n     * @param {string} status - New status (pending, live, won, lost, push)\r\n     * @param {Object} additionalUpdates - Optional additional fields\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function updateStatus(id, status, additionalUpdates = {}) {\r\n        return update(id, { status, ...additionalUpdates });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as won\r\n     * @param {string} id - Pick ID\r\n     * @param {number} pnl - P&L amount\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markWon(id, pnl = 0) {\r\n        return update(id, { status: 'won', result: 'WIN', pnl });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as lost\r\n     * @param {string} id - Pick ID\r\n     * @param {number} pnl - P&L amount (negative)\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markLost(id, pnl = 0) {\r\n        return update(id, { status: 'lost', result: 'LOSS', pnl: -Math.abs(pnl) });\r\n    }\r\n\r\n    /**\r\n     * Mark pick as push\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<Object>} Updated pick\r\n     */\r\n    async function markPush(id) {\r\n        return update(id, { status: 'push', result: 'PUSH', pnl: 0 });\r\n    }\r\n\r\n    /**\r\n     * Delete a pick\r\n     * @param {string} id - Pick ID\r\n     * @returns {Promise<boolean>} Success status\r\n     */\r\n    async function remove(id) {\r\n        invalidateCache();\r\n\r\n        try {\r\n            await apiRequest(`/${id}`, { method: 'DELETE' });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'delete', id }\r\n            }));\r\n\r\n            return true;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to delete pick:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear all picks (requires confirmation)\r\n     * @param {boolean} confirm - Must be true to proceed\r\n     * @returns {Promise<Object>} Deletion result\r\n     */\r\n    async function clearAll(confirm = false) {\r\n        if (!confirm) {\r\n            throw new Error('Must pass confirm=true to clear all picks');\r\n        }\r\n\r\n        invalidateCache();\r\n\r\n        try {\r\n            const response = await apiRequest('/clear', {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'x-confirm-clear': 'true'\r\n                }\r\n            });\r\n\r\n            window.dispatchEvent(new CustomEvent('picksUpdated', {\r\n                detail: { action: 'clearAll', deleted: response.deleted }\r\n            }));\r\n\r\n            return response;\r\n        } catch (error) {\r\n            console.error('[PicksService] Failed to clear picks:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Calculate summary statistics for picks\r\n     * @param {Array} picks - Array of picks to analyze (optional, fetches if not provided)\r\n     * @returns {Promise<Object>} Summary stats\r\n     */\r\n    async function getSummary(picks = null) {\r\n        if (!picks) {\r\n            picks = await getAll();\r\n        }\r\n\r\n        const summary = {\r\n            total: picks.length,\r\n            pending: 0,\r\n            live: 0,\r\n            won: 0,\r\n            lost: 0,\r\n            push: 0,\r\n            totalRisk: 0,\r\n            totalPnl: 0,\r\n            byLeague: {}\r\n        };\r\n\r\n        picks.forEach(pick => {\r\n            const status = (pick.status || 'pending').toLowerCase();\r\n            if (status === 'pending') summary.pending++;\r\n            else if (status === 'live' || status === 'on-track' || status === 'at-risk') summary.live++;\r\n            else if (status === 'won' || status === 'win') summary.won++;\r\n            else if (status === 'lost' || status === 'loss') summary.lost++;\r\n            else if (status === 'push') summary.push++;\r\n\r\n            summary.totalRisk += parseFloat(pick.risk) || 0;\r\n            summary.totalPnl += parseFloat(pick.pnl) || 0;\r\n\r\n            const league = pick.league || 'Unknown';\r\n            if (!summary.byLeague[league]) {\r\n                summary.byLeague[league] = { total: 0, won: 0, lost: 0, pnl: 0 };\r\n            }\r\n            summary.byLeague[league].total++;\r\n            if (status === 'won' || status === 'win') summary.byLeague[league].won++;\r\n            if (status === 'lost' || status === 'loss') summary.byLeague[league].lost++;\r\n            summary.byLeague[league].pnl += parseFloat(pick.pnl) || 0;\r\n        });\r\n\r\n        summary.winRate = summary.won + summary.lost > 0\r\n            ? (summary.won / (summary.won + summary.lost) * 100).toFixed(1) + '%'\r\n            : 'N/A';\r\n\r\n        return summary;\r\n    }\r\n\r\n    /**\r\n     * Migrate picks from localStorage to Azure (one-time operation)\r\n     * @returns {Promise<Object>} Migration result\r\n     */\r\n    async function migrateFromLocalStorage() {\r\n        const STORAGE_KEY = 'gbsv_picks';\r\n\r\n        try {\r\n            const localData = localStorage.getItem(STORAGE_KEY);\r\n            if (!localData) {\r\n                return { success: true, migrated: 0, message: 'No local picks to migrate' };\r\n            }\r\n\r\n            const localPicks = JSON.parse(localData);\r\n            if (!Array.isArray(localPicks) || localPicks.length === 0) {\r\n                return { success: true, migrated: 0, message: 'No local picks to migrate' };\r\n            }\r\n\r\n            console.log(`[PicksService] Migrating ${localPicks.length} picks from localStorage to Azure...`);\r\n\r\n            const result = await create(localPicks);\r\n\r\n            if (result.success) {\r\n                // Backup and clear localStorage\r\n                localStorage.setItem(`${STORAGE_KEY}_backup_${Date.now()}`, localData);\r\n                localStorage.removeItem(STORAGE_KEY);\r\n\r\n                console.log(`[PicksService] Migration complete: ${result.created} picks migrated`);\r\n                return {\r\n                    success: true,\r\n                    migrated: result.created,\r\n                    errors: result.errors,\r\n                    message: `Successfully migrated ${result.created} picks to Azure`\r\n                };\r\n            }\r\n\r\n            return { success: false, migrated: 0, error: 'Migration failed' };\r\n        } catch (error) {\r\n            console.error('[PicksService] Migration failed:', error);\r\n            return { success: false, migrated: 0, error: error.message };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if there are picks in localStorage that need migration\r\n     * @returns {Object} Migration status\r\n     */\r\n    function checkMigrationNeeded() {\r\n        const STORAGE_KEY = 'gbsv_picks';\r\n        try {\r\n            const localData = localStorage.getItem(STORAGE_KEY);\r\n            if (!localData) return { needed: false, count: 0 };\r\n\r\n            const localPicks = JSON.parse(localData);\r\n            return {\r\n                needed: Array.isArray(localPicks) && localPicks.length > 0,\r\n                count: Array.isArray(localPicks) ? localPicks.length : 0\r\n            };\r\n        } catch {\r\n            return { needed: false, count: 0 };\r\n        }\r\n    }\r\n\r\n    // Public API\r\n    return {\r\n        // Core CRUD\r\n        getAll,\r\n        getActive,\r\n        getSettled,\r\n        getById,\r\n        create,\r\n        update,\r\n        remove,\r\n        clearAll,\r\n\r\n        // Convenience getters\r\n        getByLeague,\r\n        getByDate,\r\n        getByDateRange,\r\n        getToday,\r\n\r\n        // Status updates\r\n        updateStatus,\r\n        markWon,\r\n        markLost,\r\n        markPush,\r\n\r\n        // Analytics\r\n        getSummary,\r\n\r\n        // Migration\r\n        migrateFromLocalStorage,\r\n        checkMigrationNeeded,\r\n\r\n        // Utilities\r\n        invalidateCache\r\n    };\r\n})();\r\n\r\n// Export for module systems\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = PicksService;\r\n}\r\n\r\n// Make globally available\r\nwindow.PicksService = PicksService;\r\n\n\n/* === dashboard/js/local-picks-manager.js === */\n/**\r\n * Local Picks Manager v33.02.0\r\n * Production version - Real data only, no sample data, auto-cleanup of stale picks\r\n * Stores picks in localStorage, auto-fetches game data from ESPN\r\n *\r\n * @deprecated This module uses localStorage for pick storage. Prefer the\r\n *   Cosmos DB-backed picks-service.js for new features. This file is still\r\n *   loaded by index.html and weekly-lineup.html for backward compatibility\r\n *   and will be removed once all callers migrate to the DB-backed service.\r\n */\r\n\r\n(function () {\r\n  \"use strict\";\r\n\r\n  const STORAGE_KEY = \"gbsv_picks\";\r\n  const UNIT_MULTIPLIER_KEY = \"gbsv_unit_multiplier\";\r\n\r\n  // ========== STORAGE FUNCTIONS ==========\r\n\r\n  function getAllPicks() {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEY);\r\n      return data ? JSON.parse(data) : [];\r\n    } catch (e) {\r\n      console.error(\"Error reading picks from localStorage:\", e);\r\n      if (window.ErrorHandler) {\r\n        window.ErrorHandler.handleStorage(e, \"read\");\r\n      }\r\n      return [];\r\n    }\r\n  }\r\n\r\n  function savePicks(picks) {\r\n    try {\r\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(picks));\r\n      console.log(`\u2705 Saved ${picks.length} picks to localStorage`);\r\n      return true;\r\n    } catch (e) {\r\n      console.error(\"Error saving picks to localStorage:\", e);\r\n      if (window.ErrorHandler) {\r\n        window.ErrorHandler.handleStorage(e, \"write\");\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function addPicks(newPicks) {\r\n    const existing = getAllPicks();\r\n    const enrichedPicks = newPicks.map((pick, idx) => {\r\n      // Normalize league/sport values\r\n      let sport = (pick.sport || pick.league || \"NBA\").toUpperCase();\r\n\r\n      // Map league variants to standard values\r\n      const leagueMap = {\r\n        NCAAM: \"NCAAB\",\r\n        NCAB: \"NCAAB\",\r\n        CBB: \"NCAAB\",\r\n        \"COLLEGE BASKETBALL\": \"NCAAB\",\r\n        NCAAF: \"NCAAF\",\r\n        CFB: \"NCAAF\",\r\n        \"COLLEGE FOOTBALL\": \"NCAAF\",\r\n        NFL: \"NFL\",\r\n        NBA: \"NBA\",\r\n        NCAAB: \"NCAAB\",\r\n        MLB: \"MLB\",\r\n        NHL: \"NHL\",\r\n      };\r\n      sport = leagueMap[sport] || sport;\r\n\r\n      // Ensure awayTeam and homeTeam are set correctly\r\n      let awayTeam = pick.awayTeam || \"\";\r\n      let homeTeam = pick.homeTeam || \"\";\r\n\r\n      // If game field exists, try to parse it\r\n      if (pick.game && !awayTeam && !homeTeam) {\r\n        const parts = pick.game.split(/\\s*(?:@|vs\\.?|versus)\\s*/i);\r\n        if (parts.length === 2) {\r\n          awayTeam = parts[0].trim();\r\n          homeTeam = parts[1].trim();\r\n        }\r\n      }\r\n\r\n      // Normalize pick direction for totals\r\n      let pickDirection = pick.pickDirection || \"\";\r\n      if (pickDirection) {\r\n        pickDirection = pickDirection\r\n          .replace(/^UNDE\\b/i, \"UNDER\")\r\n          .toUpperCase();\r\n      }\r\n\r\n      // Ensure pickType is normalized\r\n      let pickType = (pick.pickType || \"spread\").toLowerCase();\r\n      if (pickType === \"ml\") pickType = \"moneyline\";\r\n      if (pickType === \"tt\") pickType = \"team-total\";\r\n      if (pickType === \"ou\") pickType = \"total\";\r\n\r\n      return {\r\n        ...pick,\r\n        id:\r\n          pick.id ||\r\n          `pick_${Date.now()}_${idx}_${Math.random().toString(36).substring(7)}`,\r\n        createdAt: pick.createdAt || new Date().toISOString(),\r\n        status: pick.status || \"pending\",\r\n        sport: sport,\r\n        league: sport,\r\n        awayTeam: awayTeam,\r\n        homeTeam: homeTeam,\r\n        pickDirection: pickDirection,\r\n        pickType: pickType,\r\n      };\r\n    });\r\n    const all = [...existing, ...enrichedPicks];\r\n    savePicks(all);\r\n    return enrichedPicks;\r\n  }\r\n\r\n  function clearPicks() {\r\n    localStorage.removeItem(STORAGE_KEY);\r\n    console.log(\"CLEANUP Cleared all picks from localStorage\");\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function deletePick(pickId) {\r\n    const picks = getAllPicks().filter((p) => p.id !== pickId);\r\n    savePicks(picks);\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function updatePickStatus(pickId, newStatus) {\r\n    const picks = getAllPicks().map((p) => {\r\n      if (p.id === pickId) {\r\n        return { ...p, status: newStatus, updatedAt: new Date().toISOString() };\r\n      }\r\n      return p;\r\n    });\r\n    savePicks(picks);\r\n    refreshPicksTable();\r\n  }\r\n\r\n  function getUnitMultiplier() {\r\n    return parseInt(localStorage.getItem(UNIT_MULTIPLIER_KEY)) || 1000;\r\n  }\r\n\r\n  function setUnitMultiplier(multiplier) {\r\n    localStorage.setItem(UNIT_MULTIPLIER_KEY, multiplier.toString());\r\n    if (window.PickStandardizer) {\r\n      window.PickStandardizer.setUnitMultiplier(multiplier);\r\n    }\r\n  }\r\n\r\n  // ========== STATUS LABEL HELPER ==========\r\n\r\n  /**\r\n   * Format status badge label based on status and game time\r\n   * @param {string} status - The pick status\r\n   * @param {Object} pick - The pick object with countdown/scheduled info\r\n   * @returns {string} - Formatted label for the status badge\r\n   */\r\n  function formatStatusLabel(status, pick = {}) {\r\n    const normalizedStatus = (status || \"pending\").toLowerCase();\r\n\r\n    // Map status to proper labels\r\n    const labelMap = {\r\n      win: \"Won\",\r\n      won: \"Won\",\r\n      loss: \"Lost\",\r\n      lost: \"Lost\",\r\n      push: \"Push\",\r\n      \"on-track\": \"On Track\",\r\n      \"at-risk\": \"At Risk\",\r\n      live: \"Live\",\r\n    };\r\n\r\n    if (labelMap[normalizedStatus]) {\r\n      return labelMap[normalizedStatus];\r\n    }\r\n\r\n    // For pending, show countdown or scheduled time if available\r\n    if (normalizedStatus === \"pending\") {\r\n      if (pick.countdown) {\r\n        return pick.countdown;\r\n      }\r\n      if (pick.scheduled || pick.gameTime) {\r\n        return `Starts ${pick.scheduled || pick.gameTime}`;\r\n      }\r\n      return \"Pending\";\r\n    }\r\n\r\n    // Default: capitalize first letter\r\n    return status.charAt(0).toUpperCase() + status.slice(1);\r\n  }\r\n\r\n  /**\r\n   * Generate tooltip blurb based on status and pick data\r\n   * @param {string} status - The pick status\r\n   * @param {Object} pick - The pick object\r\n   * @returns {string} - Tooltip text\r\n   */\r\n  function generateStatusBlurb(status, pick = {}) {\r\n    const normalizedStatus = (status || \"pending\").toLowerCase();\r\n    const pickType = (pick.pickType || \"spread\").toLowerCase();\r\n    const line = pick.line || \"\";\r\n\r\n    switch (normalizedStatus) {\r\n      case \"pending\":\r\n        if (pick.gameTime) {\r\n          return `Game starts at ${pick.gameTime}`;\r\n        }\r\n        return \"Awaiting game start\";\r\n\r\n      case \"on-track\":\r\n        if (pickType === \"spread\") {\r\n          return `Covering by 8.5 pts \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"total\") {\r\n          return `On pace for ${pick.pickDirection || \"Over\"} \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"moneyline\") {\r\n          return `Leading \u2022 ${pick.countdown || \"Live\"}`;\r\n        }\r\n        return `On track to hit \u2022 ${pick.countdown || \"Live\"}`;\r\n\r\n      case \"at-risk\":\r\n        if (pickType === \"spread\") {\r\n          return `Need 5.5 pts to cover \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"total\") {\r\n          return `Need 12 more pts \u2022 ${pick.countdown || \"Live\"}`;\r\n        } else if (pickType === \"moneyline\") {\r\n          return `Trailing \u2022 ${pick.countdown || \"Live\"}`;\r\n        }\r\n        return `At risk \u2022 ${pick.countdown || \"Live\"}`;\r\n\r\n      case \"win\":\r\n      case \"won\":\r\n        const winAmt = pick.win || 0;\r\n        return `+$${winAmt.toLocaleString()}`;\r\n\r\n      case \"loss\":\r\n      case \"lost\":\r\n        const lossAmt = pick.risk || 0;\r\n        return `-$${lossAmt.toLocaleString()}`;\r\n\r\n      case \"push\":\r\n        return \"$0 \u2022 Refunded\";\r\n\r\n      default:\r\n        return \"\";\r\n    }\r\n  }\r\n\r\n  // ========== TEAM DATA ==========\r\n  // Team data is now loaded from assets/data/team-data.json via TeamDataLoader\r\n  // Fallback to hardcoded data for backward compatibility\r\n\r\n  const TEAM_DATA_FALLBACK = {\r\n    // NBA Teams - logos now loaded via LogoLoader\r\n    \"san antonio spurs\": { abbr: \"SAS\", league: \"nba\" },\r\n    spurs: { abbr: \"SAS\", league: \"nba\" },\r\n    \"new york knicks\": { abbr: \"NYK\", league: \"nba\" },\r\n    knicks: { abbr: \"NYK\", league: \"nba\" },\r\n    \"los angeles lakers\": { abbr: \"LAL\", league: \"nba\" },\r\n    lakers: { abbr: \"LAL\", league: \"nba\" },\r\n    \"golden state warriors\": { abbr: \"GSW\", league: \"nba\" },\r\n    warriors: { abbr: \"GSW\", league: \"nba\" },\r\n    \"boston celtics\": { abbr: \"BOS\", league: \"nba\" },\r\n    celtics: { abbr: \"BOS\", league: \"nba\" },\r\n    \"miami heat\": { abbr: \"MIA\", league: \"nba\" },\r\n    heat: { abbr: \"MIA\", league: \"nba\" },\r\n    \"dallas mavericks\": { abbr: \"DAL\", league: \"nba\" },\r\n    mavericks: { abbr: \"DAL\", league: \"nba\" },\r\n    mavs: { abbr: \"DAL\", league: \"nba\" },\r\n    \"denver nuggets\": { abbr: \"DEN\", league: \"nba\" },\r\n    nuggets: { abbr: \"DEN\", league: \"nba\" },\r\n    \"phoenix suns\": { abbr: \"PHX\", league: \"nba\" },\r\n    suns: { abbr: \"PHX\", league: \"nba\" },\r\n    \"milwaukee bucks\": { abbr: \"MIL\", league: \"nba\" },\r\n    bucks: { abbr: \"MIL\", league: \"nba\" },\r\n    \"philadelphia 76ers\": { abbr: \"PHI\", league: \"nba\" },\r\n    \"76ers\": { abbr: \"PHI\", league: \"nba\" },\r\n    sixers: { abbr: \"PHI\", league: \"nba\" },\r\n    \"brooklyn nets\": { abbr: \"BKN\", league: \"nba\" },\r\n    nets: { abbr: \"BKN\", league: \"nba\" },\r\n    \"chicago bulls\": { abbr: \"CHI\", league: \"nba\" },\r\n    bulls: { abbr: \"CHI\", league: \"nba\" },\r\n    \"cleveland cavaliers\": { abbr: \"CLE\", league: \"nba\" },\r\n    cavaliers: { abbr: \"CLE\", league: \"nba\" },\r\n    cavs: { abbr: \"CLE\", league: \"nba\" },\r\n    \"atlanta hawks\": { abbr: \"ATL\", league: \"nba\" },\r\n    hawks: { abbr: \"ATL\", league: \"nba\" },\r\n    \"toronto raptors\": { abbr: \"TOR\", league: \"nba\" },\r\n    raptors: { abbr: \"TOR\", league: \"nba\" },\r\n    \"orlando magic\": { abbr: \"ORL\", league: \"nba\" },\r\n    magic: { abbr: \"ORL\", league: \"nba\" },\r\n    \"indiana pacers\": { abbr: \"IND\", league: \"nba\" },\r\n    pacers: { abbr: \"IND\", league: \"nba\" },\r\n    \"detroit pistons\": { abbr: \"DET\", league: \"nba\" },\r\n    pistons: { abbr: \"DET\", league: \"nba\" },\r\n    \"charlotte hornets\": { abbr: \"CHA\", league: \"nba\" },\r\n    hornets: { abbr: \"CHA\", league: \"nba\" },\r\n    \"washington wizards\": { abbr: \"WAS\", league: \"nba\" },\r\n    wizards: { abbr: \"WAS\", league: \"nba\" },\r\n    \"memphis grizzlies\": { abbr: \"MEM\", league: \"nba\" },\r\n    grizzlies: { abbr: \"MEM\", league: \"nba\" },\r\n    \"new orleans pelicans\": { abbr: \"NOP\", league: \"nba\" },\r\n    pelicans: { abbr: \"NOP\", league: \"nba\" },\r\n    \"houston rockets\": { abbr: \"HOU\", league: \"nba\" },\r\n    rockets: { abbr: \"HOU\", league: \"nba\" },\r\n    \"minnesota timberwolves\": { abbr: \"MIN\", league: \"nba\" },\r\n    timberwolves: { abbr: \"MIN\", league: \"nba\" },\r\n    wolves: { abbr: \"MIN\", league: \"nba\" },\r\n    \"oklahoma city thunder\": { abbr: \"OKC\", league: \"nba\" },\r\n    thunder: { abbr: \"OKC\", league: \"nba\" },\r\n    \"portland trail blazers\": { abbr: \"POR\", league: \"nba\" },\r\n    \"trail blazers\": { abbr: \"POR\", league: \"nba\" },\r\n    blazers: { abbr: \"POR\", league: \"nba\" },\r\n    \"utah jazz\": { abbr: \"UTA\", league: \"nba\" },\r\n    jazz: { abbr: \"UTA\", league: \"nba\" },\r\n    \"sacramento kings\": { abbr: \"SAC\", league: \"nba\" },\r\n    kings: { abbr: \"SAC\", league: \"nba\" },\r\n    \"la clippers\": { abbr: \"LAC\", league: \"nba\" },\r\n    clippers: { abbr: \"LAC\", league: \"nba\" },\r\n\r\n    // NCAAB Teams (from today's picks) - Full names and abbreviations\r\n    butler: {\r\n      abbr: \"BUT\",\r\n      fullName: \"Butler Bulldogs\",\r\n      league: \"ncaam\",\r\n      logoId: \"2086\",\r\n    },\r\n    \"butler bulldogs\": {\r\n      abbr: \"BUT\",\r\n      fullName: \"Butler Bulldogs\",\r\n      league: \"ncaam\",\r\n      logoId: \"2086\",\r\n    },\r\n    connecticut: {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"u conn\": {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    uconn: {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"uconn huskies\": {\r\n      abbr: \"CONN\",\r\n      fullName: \"UConn Huskies\",\r\n      league: \"ncaam\",\r\n      logoId: \"41\",\r\n    },\r\n    \"abilene christian\": {\r\n      abbr: \"ACU\",\r\n      fullName: \"Abilene Christian Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"2000\",\r\n    },\r\n    \"abilene christian wildcats\": {\r\n      abbr: \"ACU\",\r\n      fullName: \"Abilene Christian Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"2000\",\r\n    },\r\n    arizona: {\r\n      abbr: \"ARIZ\",\r\n      fullName: \"Arizona Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"12\",\r\n    },\r\n    \"arizona wildcats\": {\r\n      abbr: \"ARIZ\",\r\n      fullName: \"Arizona Wildcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"12\",\r\n    },\r\n    \"montana st\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"montana state\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"montana state bobcats\": {\r\n      abbr: \"MTST\",\r\n      fullName: \"Montana State Bobcats\",\r\n      league: \"ncaam\",\r\n      logoId: \"149\",\r\n    },\r\n    \"cal poly slo\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"cal poly\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"cal poly mustangs\": {\r\n      abbr: \"CPSU\",\r\n      fullName: \"Cal Poly Mustangs\",\r\n      league: \"ncaam\",\r\n      logoId: \"13\",\r\n    },\r\n    \"oral roberts\": {\r\n      abbr: \"ORU\",\r\n      fullName: \"Oral Roberts Golden Eagles\",\r\n      league: \"ncaam\",\r\n      logoId: \"198\",\r\n    },\r\n    \"oral roberts golden eagles\": {\r\n      abbr: \"ORU\",\r\n      fullName: \"Oral Roberts Golden Eagles\",\r\n      league: \"ncaam\",\r\n      logoId: \"198\",\r\n    },\r\n    \"missouri st\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    \"missouri state\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    \"missouri state bears\": {\r\n      abbr: \"MOST\",\r\n      fullName: \"Missouri State Bears\",\r\n      league: \"ncaam\",\r\n      logoId: \"2623\",\r\n    },\r\n    marist: {\r\n      abbr: \"MAR\",\r\n      fullName: \"Marist Red Foxes\",\r\n      league: \"ncaam\",\r\n      logoId: \"2368\",\r\n    },\r\n    \"marist red foxes\": {\r\n      abbr: \"MAR\",\r\n      fullName: \"Marist Red Foxes\",\r\n      league: \"ncaam\",\r\n      logoId: \"2368\",\r\n    },\r\n    \"georgia tech\": {\r\n      abbr: \"GT\",\r\n      fullName: \"Georgia Tech Yellow Jackets\",\r\n      league: \"ncaam\",\r\n      logoId: \"59\",\r\n    },\r\n    \"georgia tech yellow jackets\": {\r\n      abbr: \"GT\",\r\n      fullName: \"Georgia Tech Yellow Jackets\",\r\n      league: \"ncaam\",\r\n      logoId: \"59\",\r\n    },\r\n    \"east tenn st\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee st\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee state\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"east tennessee state buccaneers\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"etsu buccaneers\": {\r\n      abbr: \"ETSU\",\r\n      fullName: \"East Tennessee State Buccaneers\",\r\n      league: \"ncaam\",\r\n      logoId: \"2193\",\r\n    },\r\n    \"north carolina\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    unc: {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    \"north carolina tar heels\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n    \"tar heels\": {\r\n      abbr: \"UNC\",\r\n      fullName: \"North Carolina Tar Heels\",\r\n      league: \"ncaam\",\r\n      logoId: \"153\",\r\n    },\r\n\r\n    // NFL Teams\r\n    \"buffalo bills\": { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    bills: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    buffalo: { abbr: \"BUF\", fullName: \"Buffalo Bills\", league: \"nfl\" },\r\n    \"philadelphia eagles\": {\r\n      abbr: \"PHI\",\r\n      fullName: \"Philadelphia Eagles\",\r\n      league: \"nfl\",\r\n    },\r\n    eagles: { abbr: \"PHI\", fullName: \"Philadelphia Eagles\", league: \"nfl\" },\r\n    \"kansas city chiefs\": {\r\n      abbr: \"KC\",\r\n      fullName: \"Kansas City Chiefs\",\r\n      league: \"nfl\",\r\n    },\r\n    chiefs: { abbr: \"KC\", fullName: \"Kansas City Chiefs\", league: \"nfl\" },\r\n    \"kansas city\": {\r\n      abbr: \"KC\",\r\n      fullName: \"Kansas City Chiefs\",\r\n      league: \"nfl\",\r\n    },\r\n    \"detroit lions\": { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\r\n    lions: { abbr: \"DET\", fullName: \"Detroit Lions\", league: \"nfl\" },\r\n    \"baltimore ravens\": {\r\n      abbr: \"BAL\",\r\n      fullName: \"Baltimore Ravens\",\r\n      league: \"nfl\",\r\n    },\r\n    ravens: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\r\n    baltimore: { abbr: \"BAL\", fullName: \"Baltimore Ravens\", league: \"nfl\" },\r\n    \"minnesota vikings\": {\r\n      abbr: \"MIN\",\r\n      fullName: \"Minnesota Vikings\",\r\n      league: \"nfl\",\r\n    },\r\n    vikings: { abbr: \"MIN\", fullName: \"Minnesota Vikings\", league: \"nfl\" },\r\n    \"green bay packers\": {\r\n      abbr: \"GB\",\r\n      fullName: \"Green Bay Packers\",\r\n      league: \"nfl\",\r\n    },\r\n    packers: { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\r\n    \"green bay\": { abbr: \"GB\", fullName: \"Green Bay Packers\", league: \"nfl\" },\r\n    \"pittsburgh steelers\": {\r\n      abbr: \"PIT\",\r\n      fullName: \"Pittsburgh Steelers\",\r\n      league: \"nfl\",\r\n    },\r\n    steelers: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\r\n    pittsburgh: { abbr: \"PIT\", fullName: \"Pittsburgh Steelers\", league: \"nfl\" },\r\n    \"houston texans\": {\r\n      abbr: \"HOU\",\r\n      fullName: \"Houston Texans\",\r\n      league: \"nfl\",\r\n    },\r\n    texans: { abbr: \"HOU\", fullName: \"Houston Texans\", league: \"nfl\" },\r\n    \"los angeles chargers\": {\r\n      abbr: \"LAC\",\r\n      fullName: \"Los Angeles Chargers\",\r\n      league: \"nfl\",\r\n    },\r\n    chargers: { abbr: \"LAC\", fullName: \"Los Angeles Chargers\", league: \"nfl\" },\r\n    \"la chargers\": {\r\n      abbr: \"LAC\",\r\n      fullName: \"Los Angeles Chargers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"denver broncos\": {\r\n      abbr: \"DEN\",\r\n      fullName: \"Denver Broncos\",\r\n      league: \"nfl\",\r\n    },\r\n    broncos: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\r\n    denver: { abbr: \"DEN\", fullName: \"Denver Broncos\", league: \"nfl\" },\r\n    \"cincinnati bengals\": {\r\n      abbr: \"CIN\",\r\n      fullName: \"Cincinnati Bengals\",\r\n      league: \"nfl\",\r\n    },\r\n    bengals: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\r\n    cincinnati: { abbr: \"CIN\", fullName: \"Cincinnati Bengals\", league: \"nfl\" },\r\n    \"seattle seahawks\": {\r\n      abbr: \"SEA\",\r\n      fullName: \"Seattle Seahawks\",\r\n      league: \"nfl\",\r\n    },\r\n    seahawks: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\r\n    seattle: { abbr: \"SEA\", fullName: \"Seattle Seahawks\", league: \"nfl\" },\r\n    \"tampa bay buccaneers\": {\r\n      abbr: \"TB\",\r\n      fullName: \"Tampa Bay Buccaneers\",\r\n      league: \"nfl\",\r\n    },\r\n    buccaneers: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\r\n    bucs: { abbr: \"TB\", fullName: \"Tampa Bay Buccaneers\", league: \"nfl\" },\r\n    \"tampa bay\": {\r\n      abbr: \"TB\",\r\n      fullName: \"Tampa Bay Buccaneers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"san francisco 49ers\": {\r\n      abbr: \"SF\",\r\n      fullName: \"San Francisco 49ers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"49ers\": { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\r\n    niners: { abbr: \"SF\", fullName: \"San Francisco 49ers\", league: \"nfl\" },\r\n    \"san francisco\": {\r\n      abbr: \"SF\",\r\n      fullName: \"San Francisco 49ers\",\r\n      league: \"nfl\",\r\n    },\r\n    \"dallas cowboys\": {\r\n      abbr: \"DAL\",\r\n      fullName: \"Dallas Cowboys\",\r\n      league: \"nfl\",\r\n    },\r\n    cowboys: { abbr: \"DAL\", fullName: \"Dallas Cowboys\", league: \"nfl\" },\r\n    \"miami dolphins\": {\r\n      abbr: \"MIA\",\r\n      fullName: \"Miami Dolphins\",\r\n      league: \"nfl\",\r\n    },\r\n    dolphins: { abbr: \"MIA\", fullName: \"Miami Dolphins\", league: \"nfl\" },\r\n    \"los angeles rams\": {\r\n      abbr: \"LAR\",\r\n      fullName: \"Los Angeles Rams\",\r\n      league: \"nfl\",\r\n    },\r\n    rams: { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\r\n    \"la rams\": { abbr: \"LAR\", fullName: \"Los Angeles Rams\", league: \"nfl\" },\r\n    \"arizona cardinals\": {\r\n      abbr: \"ARI\",\r\n      fullName: \"Arizona Cardinals\",\r\n      league: \"nfl\",\r\n    },\r\n    cardinals: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\r\n    arizona: { abbr: \"ARI\", fullName: \"Arizona Cardinals\", league: \"nfl\" },\r\n    \"indianapolis colts\": {\r\n      abbr: \"IND\",\r\n      fullName: \"Indianapolis Colts\",\r\n      league: \"nfl\",\r\n    },\r\n    colts: { abbr: \"IND\", fullName: \"Indianapolis Colts\", league: \"nfl\" },\r\n    indianapolis: {\r\n      abbr: \"IND\",\r\n      fullName: \"Indianapolis Colts\",\r\n      league: \"nfl\",\r\n    },\r\n    \"tennessee titans\": {\r\n      abbr: \"TEN\",\r\n      fullName: \"Tennessee Titans\",\r\n      league: \"nfl\",\r\n    },\r\n    titans: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\r\n    tennessee: { abbr: \"TEN\", fullName: \"Tennessee Titans\", league: \"nfl\" },\r\n    \"jacksonville jaguars\": {\r\n      abbr: \"JAX\",\r\n      fullName: \"Jacksonville Jaguars\",\r\n      league: \"nfl\",\r\n    },\r\n    jaguars: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\r\n    jags: { abbr: \"JAX\", fullName: \"Jacksonville Jaguars\", league: \"nfl\" },\r\n    jacksonville: {\r\n      abbr: \"JAX\",\r\n      fullName: \"Jacksonville Jaguars\",\r\n      league: \"nfl\",\r\n    },\r\n    \"cleveland browns\": {\r\n      abbr: \"CLE\",\r\n      fullName: \"Cleveland Browns\",\r\n      league: \"nfl\",\r\n    },\r\n    browns: { abbr: \"CLE\", fullName: \"Cleveland Browns\", league: \"nfl\" },\r\n    \"new york giants\": {\r\n      abbr: \"NYG\",\r\n      fullName: \"New York Giants\",\r\n      league: \"nfl\",\r\n    },\r\n    giants: { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\r\n    \"ny giants\": { abbr: \"NYG\", fullName: \"New York Giants\", league: \"nfl\" },\r\n    \"new york jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    jets: { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    \"ny jets\": { abbr: \"NYJ\", fullName: \"New York Jets\", league: \"nfl\" },\r\n    \"new england patriots\": {\r\n      abbr: \"NE\",\r\n      fullName: \"New England Patriots\",\r\n      league: \"nfl\",\r\n    },\r\n    patriots: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\r\n    pats: { abbr: \"NE\", fullName: \"New England Patriots\", league: \"nfl\" },\r\n    \"new england\": {\r\n      abbr: \"NE\",\r\n      fullName: \"New England Patriots\",\r\n      league: \"nfl\",\r\n    },\r\n    \"washington commanders\": {\r\n      abbr: \"WSH\",\r\n      fullName: \"Washington Commanders\",\r\n      league: \"nfl\",\r\n    },\r\n    commanders: {\r\n      abbr: \"WSH\",\r\n      fullName: \"Washington Commanders\",\r\n      league: \"nfl\",\r\n    },\r\n    \"carolina panthers\": {\r\n      abbr: \"CAR\",\r\n      fullName: \"Carolina Panthers\",\r\n      league: \"nfl\",\r\n    },\r\n    panthers: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\r\n    carolina: { abbr: \"CAR\", fullName: \"Carolina Panthers\", league: \"nfl\" },\r\n    \"atlanta falcons\": {\r\n      abbr: \"ATL\",\r\n      fullName: \"Atlanta Falcons\",\r\n      league: \"nfl\",\r\n    },\r\n    falcons: { abbr: \"ATL\", fullName: \"Atlanta Falcons\", league: \"nfl\" },\r\n    \"new orleans saints\": {\r\n      abbr: \"NO\",\r\n      fullName: \"New Orleans Saints\",\r\n      league: \"nfl\",\r\n    },\r\n    saints: { abbr: \"NO\", fullName: \"New Orleans Saints\", league: \"nfl\" },\r\n    \"new orleans\": {\r\n      abbr: \"NO\",\r\n      fullName: \"New Orleans Saints\",\r\n      league: \"nfl\",\r\n    },\r\n    \"chicago bears\": { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\r\n    bears: { abbr: \"CHI\", fullName: \"Chicago Bears\", league: \"nfl\" },\r\n    \"las vegas raiders\": {\r\n      abbr: \"LV\",\r\n      fullName: \"Las Vegas Raiders\",\r\n      league: \"nfl\",\r\n    },\r\n    raiders: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n    \"las vegas\": { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n    vegas: { abbr: \"LV\", fullName: \"Las Vegas Raiders\", league: \"nfl\" },\r\n  };\r\n\r\n  /**\r\n   * Get team logo URL using LogoLoader (Azure Blob Storage)\r\n   * @param {string} teamAbbr - Team abbreviation (e.g., 'LAL', 'BUF')\r\n   * @param {string} league - League identifier ('nba', 'nfl', 'ncaam', etc.)\r\n   * @param {string} logoId - Optional ESPN logo ID for NCAA teams\r\n   * @returns {string} Logo URL\r\n   */\r\n  function getTeamLogoUrl(teamAbbr, league, logoId) {\r\n    if (!window.LogoLoader || !teamAbbr) return \"\";\r\n\r\n    // For NCAA teams, we may need to use logoId\r\n    if ((league === \"ncaam\" || league === \"ncaaf\") && logoId) {\r\n      // LogoLoader expects teamId, for NCAA it's the numeric ID\r\n      return window.LogoLoader.getLogoUrl(league, logoId);\r\n    }\r\n\r\n    // For NBA/NFL, use the abbreviation (lowercase)\r\n    const teamId = teamAbbr.toLowerCase();\r\n    return window.LogoLoader.getLogoUrl(league, teamId);\r\n  }\r\n\r\n  async function getTeamInfo(teamName) {\r\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\r\n\r\n    // Try to use TeamDataLoader if available\r\n    if (\r\n      window.TeamDataLoader &&\r\n      typeof window.TeamDataLoader.getTeamInfo === \"function\"\r\n    ) {\r\n      try {\r\n        const info = await window.TeamDataLoader.getTeamInfo(teamName);\r\n        if (info && info.abbr !== \"N/A\") {\r\n          return info;\r\n        }\r\n      } catch (e) {\r\n        console.warn(\r\n          \"[LocalPicksManager] TeamDataLoader failed, using fallback:\",\r\n          e,\r\n        );\r\n      }\r\n    }\r\n\r\n    // Fallback to hardcoded data\r\n    const lower = teamName.toLowerCase().trim();\r\n    const data = TEAM_DATA_FALLBACK[lower];\r\n    if (data) {\r\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\r\n      const league = data.league || \"nba\"; // Default to NBA if not specified\r\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\r\n      return {\r\n        abbr: data.abbr,\r\n        fullName: data.fullName || teamName,\r\n        logo: logo,\r\n      };\r\n    }\r\n    return {\r\n      abbr: teamName.substring(0, 3).toUpperCase(),\r\n      fullName: teamName,\r\n      logo: \"\",\r\n    };\r\n  }\r\n\r\n  // Synchronous version for backward compatibility (uses fallback)\r\n  function getTeamInfoSync(teamName) {\r\n    if (!teamName) return { abbr: \"N/A\", fullName: \"\", logo: \"\" };\r\n    const lower = teamName.toLowerCase().trim();\r\n    const data = TEAM_DATA_FALLBACK[lower];\r\n    if (data) {\r\n      // Use LogoLoader to get logo URL instead of hardcoded ESPN URL\r\n      const league = data.league || \"nba\"; // Default to NBA if not specified\r\n      const logo = getTeamLogoUrl(data.abbr, league, data.logoId);\r\n      return {\r\n        abbr: data.abbr,\r\n        fullName: data.fullName || teamName,\r\n        logo: logo,\r\n      };\r\n    }\r\n    return {\r\n      abbr: teamName.substring(0, 3).toUpperCase(),\r\n      fullName: teamName,\r\n      logo: \"\",\r\n    };\r\n  }\r\n\r\n  // ========== PARSE AND ADD PICKS ==========\r\n\r\n  async function parseAndAddPicks(content, sportsbook = \"\") {\r\n    if (!window.PickStandardizer) {\r\n      console.error(\"PickStandardizer not loaded\");\r\n      return [];\r\n    }\r\n\r\n    // Ensure team variant registry is loaded (362 NCAAM + 30 NBA teams)\r\n    if (window.PickStandardizer.loadTeamVariants) {\r\n      await window.PickStandardizer.loadTeamVariants();\r\n    }\r\n\r\n    // Set unit multiplier\r\n    window.PickStandardizer.setUnitMultiplier(getUnitMultiplier());\r\n\r\n    // Parse content\r\n    const picks = window.PickStandardizer.standardize(content);\r\n\r\n    if (picks.length === 0) {\r\n      console.warn(\"No picks could be parsed from content\");\r\n      return [];\r\n    }\r\n\r\n    // Add sportsbook and default values to each pick\r\n    const defaultRisk = getUnitMultiplier(); // 1 unit = $1000 default\r\n    const picksWithBook = picks.map((pick) => {\r\n      // Set default risk if not provided\r\n      const risk = pick.risk || defaultRisk;\r\n\r\n      // Calculate win from odds if not provided\r\n      let win = pick.win;\r\n      if (!win && pick.odds && risk) {\r\n        const oddsNum = parseInt(pick.odds);\r\n        if (oddsNum > 0) {\r\n          win = risk * (oddsNum / 100);\r\n        } else if (oddsNum < 0) {\r\n          win = risk / (Math.abs(oddsNum) / 100);\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...pick,\r\n        sportsbook: sportsbook || pick.sportsbook || \"Manual Upload\",\r\n        risk: Math.round(risk),\r\n        win: Math.round(win || risk * 0.91), // Default to -110 odds if no odds\r\n        gameDate:\r\n          pick.gameDate ||\r\n          new Date().toLocaleDateString(\"en-US\", {\r\n            weekday: \"short\",\r\n            month: \"short\",\r\n            day: \"numeric\",\r\n          }),\r\n        gameTime: pick.gameTime || \"TBD\",\r\n      };\r\n    });\r\n\r\n    // Try to enrich picks with game data from ESPN\r\n    const enrichedPicks = await enrichPicksWithGameData(picksWithBook);\r\n\r\n    // Add to storage\r\n    const added = addPicks(enrichedPicks);\r\n\r\n    // Refresh the table\r\n    refreshPicksTable();\r\n\r\n    return added;\r\n  }\r\n\r\n  async function enrichPicksWithGameData(picks) {\r\n    // Fetch today's games if AutoGameFetcher is available\r\n    let todaysGames = [];\r\n    if (window.AutoGameFetcher) {\r\n      try {\r\n        await window.AutoGameFetcher.fetchTodaysGames();\r\n        todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n        console.log(\r\n          `\uD83C\uDFC0 Found ${todaysGames.length} games today:`,\r\n          todaysGames.map((g) => `${g.awayTeam} @ ${g.homeTeam} (${g.time})`),\r\n        );\r\n      } catch (e) {\r\n        console.warn(\"Could not fetch games:\", e);\r\n      }\r\n    } else {\r\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available\");\r\n    }\r\n\r\n    return picks.map((pick) => {\r\n      const enriched = { ...pick };\r\n      const teamToFind = pick.pickTeam;\r\n\r\n      console.log(`\uD83D\uDD0D Looking for game with team: \"${teamToFind}\"`);\r\n\r\n      // Try to find the game\r\n      if (window.AutoGameFetcher && todaysGames.length > 0) {\r\n        const game = window.AutoGameFetcher.findGame(teamToFind);\r\n        if (game) {\r\n          console.log(\r\n            `\u2705 Found game: ${game.awayTeam} (${game.awayRecord}) @ ${game.homeTeam} (${game.homeRecord}) at ${game.time}`,\r\n          );\r\n          enriched.awayTeam = game.awayTeam;\r\n          enriched.homeTeam = game.homeTeam;\r\n          enriched.awayRecord = game.awayRecord || \"\";\r\n          enriched.homeRecord = game.homeRecord || \"\";\r\n          enriched.gameTime = game.time;\r\n          enriched.gameDate = game.date;\r\n          enriched.sport = game.sport;\r\n          enriched.gameStatus = game.status;\r\n          enriched.game = `${game.awayTeam} @ ${game.homeTeam}`;\r\n        } else {\r\n          console.warn(\r\n            `\u274C No game found for \"${teamToFind}\" - available teams:`,\r\n            todaysGames.flatMap((g) => [g.awayTeam, g.homeTeam]),\r\n          );\r\n        }\r\n      }\r\n\r\n      // Set default date/time if not found\r\n      if (!enriched.gameDate) {\r\n        enriched.gameDate = new Date().toLocaleDateString(\"en-US\", {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        });\r\n      }\r\n      if (!enriched.gameTime) {\r\n        enriched.gameTime = \"TBD\";\r\n      }\r\n\r\n      return enriched;\r\n    });\r\n  }\r\n\r\n  // ========== REFRESH TABLE ==========\r\n\r\n  /**\r\n   * Format currency with fixed two decimals\r\n   */\r\n  function formatCurrencyValue(val) {\r\n    if (val === undefined || val === null || val === \"\") return \"$0.00\";\r\n    const num =\r\n      typeof val === \"number\"\r\n        ? val\r\n        : parseFloat(String(val).replace(/[$,]/g, \"\"));\r\n    if (isNaN(num)) return \"$0.00\";\r\n    return `$${num.toLocaleString(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n  }\r\n\r\n  /**\r\n   * Format date string into short month/day display\r\n   */\r\n  function formatDateValue(date) {\r\n    if (!date) return \"Today\";\r\n    if (date.includes(\"/\") || date.includes(\"-\")) {\r\n      const d = new Date(date);\r\n      if (!isNaN(d)) {\r\n        return d.toLocaleDateString(\"en-US\", {\r\n          weekday: \"short\",\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        });\r\n      }\r\n    }\r\n    return date;\r\n  }\r\n\r\n  // League logos now served via LogoLoader (Azure Blob + static assets)\r\n  // LogoLoader automatically handles fallbacks and caching\r\n  function getLeagueLogo(league) {\r\n    if (!league) return \"\";\r\n    const leagueUpper = league.toUpperCase();\r\n\r\n    // Use LogoLoader if available\r\n    if (\r\n      window.LogoLoader &&\r\n      typeof window.LogoLoader.getLeagueLogoUrl === \"function\"\r\n    ) {\r\n      // Map variations to standard league names\r\n      const leagueMap = {\r\n        NCAAB: \"ncaam\",\r\n        NCAAM: \"ncaam\",\r\n        \"NCAA MEN'S BASKETBALL\": \"ncaam\",\r\n        CBB: \"ncaam\",\r\n        NCAAF: \"ncaaf\",\r\n        \"COLLEGE FOOTBALL\": \"ncaaf\",\r\n        CFB: \"ncaaf\",\r\n        NBA: \"nba\",\r\n        NFL: \"nfl\",\r\n        MLB: \"mlb\",\r\n        NHL: \"nhl\",\r\n        MLS: \"mls\",\r\n      };\r\n      const standardLeague =\r\n        leagueMap[leagueUpper] || leagueUpper.toLowerCase();\r\n      return window.LogoLoader.getLeagueLogoUrl(standardLeague);\r\n    }\r\n\r\n    // Legacy fallback (should rarely be used)\r\n    const LEAGUE_LOGOS_FALLBACK = {\r\n      NBA: \"/assets/nba-logo.png\",\r\n      NFL: \"/assets/nfl-logo.png\",\r\n      NCAAB: \"/assets/ncaam-logo.png\",\r\n      NCAAM: \"/assets/ncaam-logo.png\",\r\n      NCAAF: \"/assets/ncaaf-logo.png\",\r\n      MLB: \"/assets/mlb-logo.png\",\r\n      NHL: \"/assets/nhl-logo.png\",\r\n    };\r\n    return LEAGUE_LOGOS_FALLBACK[leagueUpper] || \"\";\r\n  }\r\n\r\n  function renderLeagueCell(sport) {\r\n    // Convert to uppercase for lookup (LEAGUE_LOGOS keys are uppercase)\r\n    const sportUpper = (sport || \"\").toUpperCase();\r\n    // Map normalized values to display names\r\n    const displayMap = {\r\n      NCAAAB: \"NCAAM\",\r\n      NCAAB: \"NCAAM\",\r\n      NCAAF: \"NCAAF\",\r\n      NBA: \"NBA\",\r\n      NFL: \"NFL\",\r\n      MLB: \"MLB\",\r\n      NHL: \"NHL\",\r\n    };\r\n    const displayText = displayMap[sportUpper] || sportUpper;\r\n    // Get logo via LogoLoader\r\n    const logo = getLeagueLogo(sportUpper);\r\n    return `\r\n            <div class=\"league-cell\">\r\n                ${logo ? `<img src=\"${logo}\" class=\"league-logo\" alt=\"${displayText}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                <span class=\"league-text\">${displayText}</span>\r\n            </div>\r\n        `;\r\n  }\r\n\r\n  function refreshPicksTable() {\r\n    const picks = getAllPicks();\r\n    const tbody = document.getElementById(\"picks-tbody\");\r\n\r\n    if (!tbody) {\r\n      // Silent return if table not present (e.g. on pages without the picks table)\r\n      return;\r\n    }\r\n\r\n    // Clear existing rows\r\n    tbody.innerHTML = \"\";\r\n\r\n    // Update table container class\r\n    const tableContainer = tbody.closest(\".table-container\");\r\n    if (tableContainer) {\r\n      tableContainer.classList.toggle(\"has-picks\", picks.length > 0);\r\n    }\r\n\r\n    if (picks.length === 0) {\r\n      console.log(\"No picks to display\");\r\n      return;\r\n    }\r\n\r\n    // Render each pick as a row (using sync version for immediate rendering)\r\n    picks.forEach((pick, idx) => {\r\n      const row = createPickRow(pick, idx);\r\n      tbody.appendChild(row);\r\n    });\r\n\r\n    console.log(`\uD83D\uDCCA Displayed ${picks.length} picks in table`);\r\n\r\n    // Trigger recalculations\r\n    if (\r\n      typeof window.calculateKPIs === \"function\" &&\r\n      typeof window.updateKPITiles === \"function\"\r\n    ) {\r\n      setTimeout(() => {\r\n        const kpis = window.calculateKPIs(getAllPicks());\r\n        window.updateKPITiles(kpis);\r\n      }, 100);\r\n    }\r\n    if (window.ZebraStripes?.applyPicksTableZebraStripes) {\r\n      setTimeout(() => window.ZebraStripes.applyPicksTableZebraStripes(), 50);\r\n    }\r\n\r\n    // Re-apply filters if they exist\r\n    if (\r\n      window.DashboardFilters &&\r\n      typeof window.DashboardFilters.applyFilters === \"function\"\r\n    ) {\r\n      setTimeout(() => window.DashboardFilters.applyFilters(), 50);\r\n    }\r\n\r\n    // Re-apply filter pills if available\r\n    if (\r\n      window.DashboardFilterPills &&\r\n      typeof window.DashboardFilterPills.applyFilters === \"function\"\r\n    ) {\r\n      setTimeout(() => window.DashboardFilterPills.applyFilters(), 50);\r\n    }\r\n\r\n    // ========== ACTIVATE LIVE SCORES & BOX SCORES ==========\r\n    // Fetch today's games and start live score updates\r\n    setTimeout(async () => {\r\n      try {\r\n        // 1. Fetch today's games first (needed for matching)\r\n        if (window.AutoGameFetcher) {\r\n          console.log(\r\n            \"[PICKS-TABLE] Fetching today's games for live scores...\",\r\n          );\r\n          await window.AutoGameFetcher.fetchTodaysGames(true); // Force refresh\r\n          const games = window.AutoGameFetcher.getTodaysGames() || [];\r\n          console.log(\r\n            `[PICKS-TABLE] Loaded ${games.length} games for live score matching`,\r\n          );\r\n        }\r\n\r\n        // 2. Start/restart LiveScoreUpdater\r\n        if (window.LiveScoreUpdater) {\r\n          console.log(\"[PICKS-TABLE] Starting live score updates...\");\r\n          window.LiveScoreUpdater.stopLiveUpdates(); // Stop if running\r\n          window.LiveScoreUpdater.startLiveUpdates(); // Start fresh\r\n          // Also trigger an immediate update\r\n          window.LiveScoreUpdater.updateScores();\r\n        }\r\n\r\n        // 3. Populate team records in box scores\r\n        if (typeof window.populateTeamRecordsWhenReady === \"function\") {\r\n          window.populateTeamRecordsWhenReady(tbody, { force: true });\r\n        }\r\n\r\n        console.log(\"[PICKS-TABLE] \u2705 Live scores and box scores activated\");\r\n      } catch (e) {\r\n        console.warn(\"[PICKS-TABLE] Error activating live scores:\", e);\r\n      }\r\n    }, 200);\r\n\r\n    // Attach sportsbook dropdown event handlers\r\n    attachSportsbookDropdownListeners();\r\n\r\n    // Attach risk/win amount edit handlers\r\n    attachRiskWinEditListeners();\r\n  }\r\n\r\n  // ========== SPORTSBOOK DROPDOWN HANDLER ==========\r\n\r\n  function attachSportsbookDropdownListeners() {\r\n    const dropdowns = document.querySelectorAll(\".sportsbook-dropdown\");\r\n    dropdowns.forEach((dropdown) => {\r\n      // Remove any existing listeners to avoid duplicates\r\n      dropdown.removeEventListener(\"change\", handleSportsbookChange);\r\n      // Attach new listener\r\n      dropdown.addEventListener(\"change\", handleSportsbookChange);\r\n    });\r\n  }\r\n\r\n  function handleSportsbookChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newSportsbook = event.target.value;\r\n\r\n    if (!pickId) return;\r\n\r\n    // Update the pick's sportsbook\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.sportsbook = newSportsbook;\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} sportsbook to: ${newSportsbook || \"None\"}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== RISK/WIN AMOUNT EDIT HANDLERS ==========\r\n\r\n  function attachRiskWinEditListeners() {\r\n    const riskInputs = document.querySelectorAll(\".editable-risk\");\r\n    const winInputs = document.querySelectorAll(\".editable-win\");\r\n\r\n    riskInputs.forEach((input) => {\r\n      input.removeEventListener(\"change\", handleRiskChange);\r\n      input.addEventListener(\"change\", handleRiskChange);\r\n    });\r\n\r\n    winInputs.forEach((input) => {\r\n      input.removeEventListener(\"change\", handleWinChange);\r\n      input.addEventListener(\"change\", handleWinChange);\r\n    });\r\n  }\r\n\r\n  function handleRiskChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newRisk = parseFloat(event.target.value) || 0;\r\n\r\n    if (!pickId) return;\r\n\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.risk = Math.round(newRisk);\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} risk to: $${pick.risk.toLocaleString()}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  function handleWinChange(event) {\r\n    const pickId = event.target.getAttribute(\"data-pick-id\");\r\n    const newWin = parseFloat(event.target.value) || 0;\r\n\r\n    if (!pickId) return;\r\n\r\n    const picks = getAllPicks();\r\n    const pick = picks.find((p) => p.id === pickId);\r\n\r\n    if (pick) {\r\n      pick.win = Math.round(newWin);\r\n      savePicks(picks);\r\n      console.log(\r\n        `\u2705 Updated pick ${pickId} win to: $${pick.win.toLocaleString()}`,\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== CREATE ROW (FULL TEMPLATE) ==========\r\n  // Note: Using synchronous version for immediate rendering\r\n  // Async team data loading happens in background via TeamDataLoader\r\n\r\n  function createPickRow(pick, idx) {\r\n    const row = document.createElement(\"tr\");\r\n    const pickTeamInfo = getTeamInfoSync(pick.pickTeam);\r\n    const awayTeam = pick.awayTeam || pick.pickTeam || \"TBD\";\r\n    const homeTeam = pick.homeTeam || \"TBD\";\r\n    const awayRecord = pick.awayRecord || \"\";\r\n    const homeRecord = pick.homeRecord || \"\";\r\n    const awayInfo = getTeamInfoSync(awayTeam);\r\n    const homeInfo = getTeamInfoSync(homeTeam);\r\n\r\n    const segment = pick.segment || \"Full Game\";\r\n    const segmentKey =\r\n      segment.toLowerCase().includes(\"1h\") ||\r\n      segment.toLowerCase().includes(\"1st\")\r\n        ? \"1h\"\r\n        : segment.toLowerCase().includes(\"2h\") ||\r\n            segment.toLowerCase().includes(\"2nd\")\r\n          ? \"2h\"\r\n          : \"full-game\";\r\n\r\n    const segmentLabel =\r\n      {\r\n        \"1h\": \"1st Half\",\r\n        \"2h\": \"2nd Half\",\r\n        \"1q\": \"1st Quarter\",\r\n        \"2q\": \"2nd Quarter\",\r\n        \"3q\": \"3rd Quarter\",\r\n        \"4q\": \"4th Quarter\",\r\n        \"full-game\": \"Full Game\",\r\n      }[segmentKey] || \"Full Game\";\r\n\r\n    let selection = \"\";\r\n    if (pick.pickType === \"spread\") {\r\n      const line = pick.line || \"\";\r\n      selection =\r\n        line.startsWith(\"+\") || line.startsWith(\"-\")\r\n          ? line\r\n          : line\r\n            ? `+${line}`\r\n            : \"\";\r\n    } else if (pick.pickType === \"moneyline\" || pick.pickType === \"ml\") {\r\n      selection = \"ML\";\r\n    } else if (\r\n      pick.pickType === \"total\" ||\r\n      pick.pickType === \"team-total\" ||\r\n      pick.pickType === \"tt\"\r\n    ) {\r\n      // Normalize pickDirection - fix \"UNDE\" typo\r\n      let direction = (pick.pickDirection || \"Over\").toUpperCase();\r\n      if (direction === \"UNDE\" || direction.startsWith(\"UNDE\")) {\r\n        direction = \"UNDER\";\r\n      }\r\n      selection = `${direction} ${pick.line || \"\"}`.trim();\r\n    }\r\n\r\n    const status = pick.status || \"pending\";\r\n    const sportsbook = pick.sportsbook || \"\";\r\n    let sport = (pick.sport || \"NBA\").toLowerCase();\r\n\r\n    // Normalize league values to match filter dropdown options\r\n    const leagueNormMap = {\r\n      college: \"ncaaf\",\r\n      cfb: \"ncaaf\",\r\n      \"college football\": \"ncaaf\",\r\n      \"ncaa football\": \"ncaaf\",\r\n      cbb: \"ncaab\",\r\n      \"college basketball\": \"ncaab\",\r\n      \"ncaa basketball\": \"ncaab\",\r\n      ncaam: \"ncaab\",\r\n    };\r\n    if (leagueNormMap[sport]) {\r\n      sport = leagueNormMap[sport];\r\n    }\r\n\r\n    const epochTime =\r\n      pick.gameDate && pick.gameTime\r\n        ? new Date(`${pick.gameDate} ${pick.gameTime}`).getTime()\r\n        : Date.now();\r\n\r\n    row.setAttribute(\"data-pick-id\", pick.id || `pick-${idx}`);\r\n    row.setAttribute(\"data-row-id\", pick.id || `pick-${idx}`); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-league\", sport);\r\n    row.setAttribute(\"data-sport\", sport); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-epoch\", epochTime);\r\n    row.setAttribute(\"data-book\", sportsbook.toLowerCase());\r\n    row.setAttribute(\"data-away\", awayTeam.toLowerCase());\r\n    row.setAttribute(\"data-home\", homeTeam.toLowerCase());\r\n    row.setAttribute(\"data-away-team\", awayTeam); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-home-team\", homeTeam); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-away-abbr\", awayInfo.abbr || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-home-abbr\", homeInfo.abbr || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-pick-type\", pick.pickType || \"spread\");\r\n    row.setAttribute(\"data-pick-team\", pick.pickTeam || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-pick-text\", selection);\r\n    row.setAttribute(\"data-line\", pick.line || \"\"); // For LiveScoreUpdater\r\n    row.setAttribute(\"data-segment\", segmentKey);\r\n    row.setAttribute(\"data-odds\", pick.odds || \"\");\r\n    row.setAttribute(\"data-risk\", pick.risk || \"\");\r\n    row.setAttribute(\"data-win\", pick.win || \"\");\r\n    row.setAttribute(\"data-status\", status);\r\n    row.setAttribute(\"data-game-id\", pick.gameId || \"\"); // For LiveScoreUpdater\r\n    row.classList.add(\"group-start\");\r\n\r\n    const isSingleTeamBet = !pick.homeTeam || homeTeam === \"TBD\";\r\n\r\n    const awayLogoHtml = awayInfo.logo\r\n      ? `<img src=\"${awayInfo.logo}\" class=\"team-logo\" alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n    const homeLogoHtml = homeInfo.logo\r\n      ? `<img src=\"${homeInfo.logo}\" class=\"team-logo\" alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n    const pickLogoHtml = pickTeamInfo.logo\r\n      ? `<img src=\"${pickTeamInfo.logo}\" class=\"pick-team-logo\" alt=\"${pickTeamInfo.abbr}\" onerror=\"this.style.display='none'\">`\r\n      : \"\";\r\n\r\n    const matchupHtml = isSingleTeamBet\r\n      ? `<div class=\"matchup-cell\">\r\n                    <div class=\"team-line\">\r\n                        ${awayLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${awayTeam}</span>\r\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>`\r\n      : `<div class=\"matchup-cell\">\r\n                    <div class=\"team-line\">\r\n                        ${awayLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${awayTeam}</span>\r\n                            <span class=\"team-record\">${awayRecord ? `(${awayRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"vs-divider\">vs</div>\r\n                    <div class=\"team-line\">\r\n                        ${homeLogoHtml}\r\n                        <div class=\"team-name-wrapper\">\r\n                            <span class=\"team-name-full\">${homeTeam}</span>\r\n                            <span class=\"team-record\">${homeRecord ? `(${homeRecord})` : \"\"}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>`;\r\n\r\n    // Sport-specific box score layout\r\n    // NBA/NFL: Q1, Q2, Q3, Q4, T (quarters)\r\n    // NCAAB/NCAAF: 1H, 2H, T (halves)\r\n    const useQuarters = sport === \"NBA\" || sport === \"NFL\";\r\n    const boxscoreClass = useQuarters ? \"boxscore-quarters\" : \"boxscore-halves\";\r\n\r\n    let awayBoxRow, homeBoxRow, headerCells;\r\n\r\n    if (useQuarters) {\r\n      headerCells = `\r\n                <div class=\"boxscore-cell header-cell\">Q1</div>\r\n                <div class=\"boxscore-cell header-cell\">Q2</div>\r\n                <div class=\"boxscore-cell header-cell\">Q3</div>\r\n                <div class=\"boxscore-cell header-cell\">Q4</div>\r\n                <div class=\"boxscore-cell header-cell\">T</div>`;\r\n\r\n      awayBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell q1-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q2-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q3-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell q4-away\"></div>\r\n                    <div class=\"boxscore-cell total total-away\"></div>\r\n                </div>`;\r\n\r\n      homeBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell q1-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q2-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q3-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell q4-home\"></div>\r\n                    <div class=\"boxscore-cell total total-home\"></div>\r\n                </div>`;\r\n    } else {\r\n      // College basketball/football - halves\r\n      headerCells = `\r\n                <div class=\"boxscore-cell header-cell\">1H</div>\r\n                <div class=\"boxscore-cell header-cell\">2H</div>\r\n                <div class=\"boxscore-cell header-cell\">T</div>`;\r\n\r\n      awayBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${awayInfo.logo ? `<img src=\"${awayInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${awayInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${awayInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell h1-away\"></div>\r\n                    <div class=\"boxscore-cell period-cell h2-away\"></div>\r\n                    <div class=\"boxscore-cell total total-away\"></div>\r\n                </div>`;\r\n\r\n      homeBoxRow = `\r\n                <div class=\"boxscore-row\">\r\n                    <div class=\"boxscore-cell team-cell\">\r\n                        <div class=\"boxscore-team\">\r\n                            ${homeInfo.logo ? `<img src=\"${homeInfo.logo}\" class=\"boxscore-team-logo\"  alt=\"${homeInfo.abbr}\" onerror=\"this.style.display='none'\">` : \"\"}\r\n                            <span class=\"boxscore-team-abbr\">${homeInfo.abbr}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"boxscore-cell period-cell h1-home\"></div>\r\n                    <div class=\"boxscore-cell period-cell h2-home\"></div>\r\n                    <div class=\"boxscore-cell total total-home\"></div>\r\n                </div>`;\r\n    }\r\n\r\n    // Determine appropriate status for boxscore header\r\n    const pickStatus = pick.status || \"pending\";\r\n    let statusText = pick.gameTime || \"Pending\";\r\n    let statusClass = \"countdown\";\r\n\r\n    if (\r\n      pickStatus === \"final\" ||\r\n      pickStatus === \"win\" ||\r\n      pickStatus === \"loss\" ||\r\n      pickStatus === \"push\"\r\n    ) {\r\n      statusText = \"Final\";\r\n      statusClass = \"final\";\r\n    } else if (\r\n      pickStatus === \"live\" ||\r\n      pickStatus === \"on-track\" ||\r\n      pickStatus === \"at-risk\"\r\n    ) {\r\n      statusText = pick.gameTime || \"Live\";\r\n      statusClass = \"live\";\r\n    } else if (pickStatus === \"pending\") {\r\n      statusText = pick.gameTime || \"Pending\";\r\n      statusClass = \"countdown\";\r\n    }\r\n\r\n    const boxscoreHtml = `\r\n            <div class=\"boxscore-container\" data-live-ready=\"false\">\r\n                <div class=\"compact-boxscore\">\r\n                    <div class=\"boxscore-grid ${boxscoreClass}\">\r\n                        <div class=\"boxscore-row header\">\r\n                            <div class=\"boxscore-cell header-cell game-time-cell\">\r\n                                <span class=\"game-time-status ${statusClass}\">${statusText}</span>\r\n                            </div>\r\n                            ${headerCells}\r\n                        </div>\r\n                        ${awayBoxRow}\r\n                        ${isSingleTeamBet ? \"\" : homeBoxRow}\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n\r\n    // Calculate hit/miss and won/lost values - both show dollar amounts\r\n    const formatWonLost = (amount) => `$${Math.abs(amount).toLocaleString()}`;\r\n    const hitMissValue =\r\n      status === \"win\"\r\n        ? `+${formatWonLost(pick.win || 0)}`\r\n        : status === \"loss\"\r\n          ? `-${formatWonLost(pick.risk || 0)}`\r\n          : status === \"push\"\r\n            ? \"$0\"\r\n            : \"\";\r\n    const wonLostValue = hitMissValue; // Same value for both columns\r\n\r\n    row.innerHTML = `\r\n            <td data-label=\"Date & Time\">\r\n                <div class=\"cell-date\">${formatDateValue(pick.gameDate)}</div>\r\n                <div class=\"cell-time\">${pick.gameTime || \"TBD\"}</div>\r\n                <select class=\"sportsbook-dropdown\" data-pick-id=\"${pick.id}\" aria-label=\"Change sportsbook for this pick\">\r\n                    <option value=\"\">No Book</option>\r\n                    <option value=\"hulkwager\" ${sportsbook === \"hulkwager\" ? \"selected\" : \"\"}>Hulk Wager</option>\r\n                    <option value=\"bombay711\" ${sportsbook === \"bombay711\" ? \"selected\" : \"\"}>Bombay 711</option>\r\n                    <option value=\"kingofsports\" ${sportsbook === \"kingofsports\" ? \"selected\" : \"\"}>King of Sports</option>\r\n                    <option value=\"primetimeaction\" ${sportsbook === \"primetimeaction\" ? \"selected\" : \"\"}>Prime Time Action</option>\r\n                    <option value=\"other\" ${sportsbook === \"other\" ? \"selected\" : \"\"}>Other</option>\r\n                </select>\r\n            </td>\r\n            <td class=\"center\" data-label=\"League\">\r\n                ${renderLeagueCell(sport)}\r\n            </td>\r\n            <td data-label=\"Matchup\">\r\n                ${matchupHtml}\r\n            </td>\r\n            <td class=\"center\" data-label=\"Segment\">\r\n                <span class=\"game-segment\" data-segment=\"${segmentKey}\">${segmentLabel}</span>\r\n            </td>\r\n            <td data-label=\"Pick\">\r\n                <div class=\"pick-cell\">\r\n                    <div class=\"pick-team-info\">\r\n                        ${pickLogoHtml}\r\n                        <span class=\"pick-team-abbr\">${pickTeamInfo.abbr || pick.pickTeam}</span>\r\n                    </div>\r\n                    <div class=\"pick-details\">\r\n                        <span class=\"pick-line\">${selection || pick.line || \"\"}</span>\r\n                        <span class=\"pick-odds\">(${pick.odds || \"-110\"})</span>\r\n                    </div>\r\n                    ${pick.edge ? `<div class=\"pick-edge\"><span class=\"edge-badge\">+${parseFloat(pick.edge).toFixed(1)}%</span></div>` : \"\"}\r\n                </div>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Risk / Win\">\r\n                <div class=\"currency-combined currency-stacked editable-amounts\">\r\n                    <div class=\"currency-risk-row\">\r\n                        <input type=\"number\"\r\n                               class=\"editable-risk\"\r\n                               value=\"${Math.round(pick.risk || 50000)}\"\r\n                               data-pick-id=\"${pick.id}\"\r\n                               aria-label=\"Risk amount\"\r\n                               min=\"0\"\r\n                               step=\"1000\">\r\n                        <span class=\"currency-separator\"> /</span>\r\n                    </div>\r\n                    <input type=\"number\"\r\n                           class=\"editable-win\"\r\n                           value=\"${Math.round(pick.win || 50000)}\"\r\n                           data-pick-id=\"${pick.id}\"\r\n                           aria-label=\"Win amount\"\r\n                           min=\"0\"\r\n                           step=\"1000\">\r\n                </div>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Box Score\">\r\n                ${boxscoreHtml}\r\n            </td>\r\n            <td class=\"center\" data-label=\"Status\">\r\n                <span class=\"status-badge\" data-status=\"${status}\" data-blurb=\"${generateStatusBlurb(status, pick)}\">${formatStatusLabel(status, pick)}</span>\r\n            </td>\r\n            <td class=\"center\" data-label=\"Hit / Miss\">\r\n                <span class=\"hit-miss-value\" data-status=\"${status}\">${hitMissValue}</span>\r\n            </td>\r\n            <td class=\"center\" data-label=\"$ Won / Lost\">\r\n                <span class=\"won-lost-value\" data-status=\"${status}\">${wonLostValue}</span>\r\n                <button class=\"delete-pick-btn\" onclick=\"event.stopPropagation(); window.LocalPicksManager.delete('${pick.id}')\" title=\"Remove pick from dashboard\">\u2715</button>\r\n            </td>\r\n        `;\r\n\r\n    return row;\r\n  }\r\n\r\n  // ========== RE-ENRICH EXISTING PICKS ==========\r\n\r\n  async function reEnrichExistingPicks() {\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) return;\r\n\r\n    // Check if any picks are missing records\r\n    const needsEnrichment = picks.some((p) => !p.awayRecord && !p.homeRecord);\r\n    if (!needsEnrichment) {\r\n      console.log(\"\u2705 All picks already have records\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"\uD83D\uDD04 Re-enriching existing picks with ESPN data...\");\r\n\r\n    // Wait for AutoGameFetcher to be ready\r\n    let attempts = 0;\r\n    while (!window.AutoGameFetcher && attempts < 10) {\r\n      await new Promise((r) => setTimeout(r, 200));\r\n      attempts++;\r\n    }\r\n\r\n    if (!window.AutoGameFetcher) {\r\n      console.warn(\"\u26A0\uFE0F AutoGameFetcher not available for re-enrichment\");\r\n      return;\r\n    }\r\n\r\n    // Fetch today's games\r\n    try {\r\n      await window.AutoGameFetcher.fetchTodaysGames();\r\n      const todaysGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n\r\n      if (todaysGames.length === 0) {\r\n        console.log(\"\uD83D\uDCED No games today to enrich with\");\r\n        return;\r\n      }\r\n\r\n      console.log(`\uD83C\uDFC0 Found ${todaysGames.length} games for enrichment`);\r\n\r\n      let updated = false;\r\n      const enrichedPicks = picks.map((pick) => {\r\n        // Skip if already has records\r\n        if (pick.awayRecord || pick.homeRecord) return pick;\r\n\r\n        const teamToFind = pick.pickTeam || pick.awayTeam;\r\n        if (!teamToFind) return pick;\r\n\r\n        const game = window.AutoGameFetcher.findGame(teamToFind);\r\n        if (game) {\r\n          console.log(\r\n            `\uD83D\uDCDD Enriching: ${pick.pickTeam} -> ${game.awayTeam} (${game.awayRecord}) vs ${game.homeTeam} (${game.homeRecord})`,\r\n          );\r\n          updated = true;\r\n          return {\r\n            ...pick,\r\n            awayTeam: game.awayTeam,\r\n            homeTeam: game.homeTeam,\r\n            awayRecord: game.awayRecord || \"\",\r\n            homeRecord: game.homeRecord || \"\",\r\n            gameTime: pick.gameTime || game.time,\r\n            gameDate: pick.gameDate || game.date,\r\n            sport: pick.sport || game.sport,\r\n            gameStatus: game.status,\r\n          };\r\n        }\r\n        return pick;\r\n      });\r\n\r\n      if (updated) {\r\n        savePicks(enrichedPicks);\r\n        console.log(\"\u2705 Picks re-enriched with team records\");\r\n        refreshPicksTable();\r\n      }\r\n    } catch (e) {\r\n      console.error(\"Error re-enriching picks:\", e);\r\n    }\r\n  }\r\n\r\n  // ========== DEMO PICKS REMOVED (v33.00.0 Production) ==========\r\n  // Demo picks functionality has been completely removed for production.\r\n  // Real picks come from weekly-lineup page and model APIs only.\r\n\r\n  // ========== CLEANUP SAMPLE DATA ==========\r\n\r\n  /**\r\n   * Clean up stale pending picks older than specified days\r\n   * Runs once per day to prevent accumulation of old picks\r\n   */\r\n  function cleanupStalePicks(daysOld = 7) {\r\n    const LAST_CLEANUP_KEY = \"gbsv_last_stale_cleanup\";\r\n    const lastCleanup = localStorage.getItem(LAST_CLEANUP_KEY);\r\n    const today = new Date().toDateString();\r\n\r\n    // Only run once per day\r\n    if (lastCleanup === today) {\r\n      return;\r\n    }\r\n\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) {\r\n      localStorage.setItem(LAST_CLEANUP_KEY, today);\r\n      return;\r\n    }\r\n\r\n    const cutoffDate = new Date();\r\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\r\n    cutoffDate.setHours(0, 0, 0, 0);\r\n\r\n    const freshPicks = picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n\r\n      // Keep all settled picks (won, lost, push) regardless of age\r\n      if ([\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status)) {\r\n        return true;\r\n      }\r\n\r\n      // For pending/live picks, check age\r\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\r\n      let pickDate = null;\r\n\r\n      try {\r\n        pickDate = dateStr ? new Date(dateStr) : null;\r\n      } catch {}\r\n\r\n      // Keep if we can't determine date (safer to keep)\r\n      if (!pickDate || isNaN(pickDate.getTime())) {\r\n        return true;\r\n      }\r\n\r\n      // Remove if older than cutoff\r\n      return pickDate >= cutoffDate;\r\n    });\r\n\r\n    if (freshPicks.length < picks.length) {\r\n      const removed = picks.length - freshPicks.length;\r\n      console.log(\r\n        `\uD83D\uDDD1\uFE0F [Stale Cleanup] Removed ${removed} old pending picks (>${daysOld}d), kept ${freshPicks.length} picks`,\r\n      );\r\n      savePicks(freshPicks);\r\n    }\r\n\r\n    localStorage.setItem(LAST_CLEANUP_KEY, today);\r\n  }\r\n\r\n  function cleanupSampleData() {\r\n    const CLEANUP_VERSION_KEY = \"gbsv_cleanup_v5\"; // Bump version to re-run cleanup\r\n\r\n    // Only run cleanup once per browser (per version)\r\n    if (localStorage.getItem(CLEANUP_VERSION_KEY)) {\r\n      return;\r\n    }\r\n\r\n    // Clear the old demo import flag so cleanup runs fresh\r\n    localStorage.removeItem(\"gbsv_demo_imported_v1\");\r\n    localStorage.removeItem(\"gbsv_cleanup_v1\");\r\n\r\n    const picks = getAllPicks();\r\n    if (picks.length === 0) {\r\n      localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\r\n      return;\r\n    }\r\n\r\n    const sampleSources = new Set([\r\n      \"demo\",\r\n      \"sample\",\r\n      \"mock\",\r\n      \"placeholder\",\r\n      \"fake\",\r\n      \"test\",\r\n      \"example\",\r\n    ]);\r\n\r\n    // Filter out ONLY explicitly marked demo/sample picks - keep everything else\r\n    const realPicks = picks.filter((pick) => {\r\n      // Remove if it has explicit demo/sample markers\r\n      if (pick.isDemo === true || pick.isSample === true) {\r\n        return false;\r\n      }\r\n      // Remove if source is explicitly marked as demo/fake\r\n      const source = String(pick.source || \"\").toLowerCase();\r\n      if (sampleSources.has(source)) {\r\n        return false;\r\n      }\r\n      // Remove Demo Book picks\r\n      const sportsbook = String(pick.sportsbook || \"\").toLowerCase();\r\n      if (\r\n        sportsbook === \"demo book\" ||\r\n        /(demo|sample|mock|placeholder|fake|test|example)/.test(sportsbook)\r\n      ) {\r\n        return false;\r\n      }\r\n      // KEEP everything else - don't be aggressive with cleanup\r\n      return true;\r\n    });\r\n\r\n    if (realPicks.length < picks.length) {\r\n      const removed = picks.length - realPicks.length;\r\n      console.log(\r\n        `[Cleanup] Removed ${removed} demo picks, kept ${realPicks.length} real picks`,\r\n      );\r\n      savePicks(realPicks);\r\n    }\r\n\r\n    localStorage.setItem(CLEANUP_VERSION_KEY, \"done\");\r\n  }\r\n\r\n  // ========== INITIALIZE ==========\r\n\r\n  /**\r\n   * Check if we're on the dashboard page (not weekly-lineup or other pages)\r\n   */\r\n  function isDashboardPage() {\r\n    // Check for the page-weekly-lineup class on body\r\n    if (document.body.classList.contains(\"page-weekly-lineup\")) {\r\n      return false;\r\n    }\r\n    // Check the URL path\r\n    const path = window.location.pathname.toLowerCase();\r\n    if (path.includes(\"weekly-lineup\") || path.includes(\"odds-market\")) {\r\n      return false;\r\n    }\r\n    // Default to true if on index.html or dashboard-like page\r\n    return true;\r\n  }\r\n\r\n  function initialize() {\r\n    console.log(\r\n      \"\uD83C\uDFE0 LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)\",\r\n    );\r\n\r\n    // Clean up any legacy sample/demo data (runs once)\r\n    cleanupSampleData();\r\n\r\n    // Clean up stale pending picks (runs daily)\r\n    cleanupStalePicks(7); // Remove pending picks older than 7 days\r\n\r\n    // NO DEMO DATA: Production version uses only real picks from weekly-lineup\r\n    // importTodaysPicks(); -- DISABLED: No sample/placeholder data in production\r\n\r\n    // Override global functions\r\n    window.processAndSavePicks = parseAndAddPicks;\r\n    window.loadUploadedPicks = refreshPicksTable;\r\n\r\n    // Only auto-refresh table on dashboard page (not weekly-lineup)\r\n    if (isDashboardPage()) {\r\n      // Load existing picks first (shows immediately)\r\n      refreshPicksTable();\r\n\r\n      // Initialize table sorting\r\n      if (\r\n        window.PicksSortManager &&\r\n        typeof window.PicksSortManager.initSorting === \"function\"\r\n      ) {\r\n        setTimeout(() => window.PicksSortManager.initSorting(), 100);\r\n      }\r\n\r\n      // Then re-enrich with ESPN data (async, updates when ready)\r\n      setTimeout(() => reEnrichExistingPicks(), 500);\r\n    } else {\r\n      console.log(\r\n        \"\uD83C\uDFE0 LocalPicksManager: Skipping auto-refresh (not on dashboard page)\",\r\n      );\r\n    }\r\n  }\r\n\r\n  // ========== FILTERING HELPERS (read-only, don't modify storage) ==========\r\n\r\n  /**\r\n   * Get active picks (pending or live status)\r\n   * These are picks that haven't been settled yet\r\n   */\r\n  function getActivePicks() {\r\n    const picks = getAllPicks();\r\n    return picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      return (\r\n        status === \"pending\" ||\r\n        status === \"live\" ||\r\n        status === \"on-track\" ||\r\n        status === \"at-risk\"\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get settled picks (won, lost, push)\r\n   */\r\n  function getSettledPicks() {\r\n    const picks = getAllPicks();\r\n    return picks.filter((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      return (\r\n        status === \"win\" ||\r\n        status === \"won\" ||\r\n        status === \"loss\" ||\r\n        status === \"lost\" ||\r\n        status === \"push\"\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get picks by date range (doesn't delete, just filters)\r\n   * @param {Date|null} startDate - Start of range (inclusive)\r\n   * @param {Date|null} endDate - End of range (inclusive)\r\n   */\r\n  function getPicksByDateRange(startDate = null, endDate = null) {\r\n    const picks = getAllPicks();\r\n    if (!startDate && !endDate) return picks;\r\n\r\n    return picks.filter((pick) => {\r\n      const dateStr = pick.gameDate || pick.createdAt || pick.date || \"\";\r\n      if (!dateStr) return true; // Include if no date info\r\n\r\n      try {\r\n        const pickDate = new Date(dateStr);\r\n        if (startDate && pickDate < startDate) return false;\r\n        if (endDate && pickDate > endDate) return false;\r\n        return true;\r\n      } catch {\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get picks for today only\r\n   */\r\n  function getTodaysPicks() {\r\n    const now = new Date();\r\n    const startOfDay = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n    );\r\n    const endOfDay = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n      23,\r\n      59,\r\n      59,\r\n      999,\r\n    );\r\n    return getPicksByDateRange(startOfDay, endOfDay);\r\n  }\r\n\r\n  /**\r\n   * Archive old settled picks (move to separate storage key for analytics)\r\n   * Only call this manually or on a schedule, not on every page load\r\n   * @param {number} daysOld - Archive picks older than this many days (default 30)\r\n   */\r\n  function archiveOldPicks(daysOld = 30) {\r\n    const picks = getAllPicks();\r\n    const cutoffDate = new Date();\r\n    cutoffDate.setDate(cutoffDate.getDate() - daysOld);\r\n    cutoffDate.setHours(0, 0, 0, 0);\r\n\r\n    const toArchive = [];\r\n    const toKeep = [];\r\n\r\n    picks.forEach((pick) => {\r\n      const status = (pick.status || \"pending\").toLowerCase();\r\n      const isSettled = [\"win\", \"won\", \"loss\", \"lost\", \"push\"].includes(status);\r\n      const dateStr = pick.gameDate || pick.createdAt || \"\";\r\n      let pickDate = null;\r\n\r\n      try {\r\n        pickDate = dateStr ? new Date(dateStr) : null;\r\n      } catch {}\r\n\r\n      // Archive if: settled AND older than cutoff\r\n      if (isSettled && pickDate && pickDate < cutoffDate) {\r\n        toArchive.push(pick);\r\n      } else {\r\n        toKeep.push(pick);\r\n      }\r\n    });\r\n\r\n    if (toArchive.length > 0) {\r\n      // Save archived picks to separate key\r\n      const existingArchive = JSON.parse(\r\n        localStorage.getItem(\"gbsv_picks_archive\") || \"[]\",\r\n      );\r\n      localStorage.setItem(\r\n        \"gbsv_picks_archive\",\r\n        JSON.stringify([...existingArchive, ...toArchive]),\r\n      );\r\n      savePicks(toKeep);\r\n      console.log(\r\n        `\uD83D\uDCE6 [LocalPicksManager] Archived ${toArchive.length} old settled picks`,\r\n      );\r\n    }\r\n\r\n    return toArchive.length;\r\n  }\r\n\r\n  // Auto-initialize\r\n  if (document.readyState === \"loading\") {\r\n    document.addEventListener(\"DOMContentLoaded\", initialize);\r\n  } else {\r\n    initialize();\r\n  }\r\n\r\n  // Export API\r\n  window.LocalPicksManager = {\r\n    getAll: getAllPicks,\r\n    getActive: getActivePicks,\r\n    getSettled: getSettledPicks,\r\n    getByDateRange: getPicksByDateRange,\r\n    getToday: getTodaysPicks,\r\n    add: addPicks,\r\n    parseAndAdd: parseAndAddPicks,\r\n    clear: clearPicks,\r\n    delete: deletePick,\r\n    updateStatus: updatePickStatus,\r\n    refresh: refreshPicksTable,\r\n    reEnrich: reEnrichExistingPicks,\r\n    getUnitMultiplier,\r\n    setUnitMultiplier,\r\n    archiveOldPicks,\r\n    cleanupStale: cleanupStalePicks, // Manually trigger stale picks cleanup\r\n    // Debug helpers\r\n    debug: () => {\r\n      const picks = getAllPicks();\r\n      console.log(\"=== LocalPicksManager Debug ===\");\r\n      console.log(`Total picks in localStorage: ${picks.length}`);\r\n      console.log(\"Storage key:\", STORAGE_KEY);\r\n      console.log(\r\n        \"Raw localStorage:\",\r\n        localStorage.getItem(STORAGE_KEY)?.substring(0, 500),\r\n      );\r\n      if (picks.length > 0) {\r\n        console.log(\"Sample pick:\", JSON.stringify(picks[0], null, 2));\r\n      }\r\n      const tbody = document.getElementById(\"picks-tbody\");\r\n      console.log(\"Table element found:\", !!tbody);\r\n      console.log(\"Table rows:\", tbody?.children?.length || 0);\r\n      return picks;\r\n    },\r\n    forceRefresh: () => {\r\n      console.log(\"Force refreshing picks table...\");\r\n      refreshPicksTable();\r\n      return getAllPicks().length;\r\n    },\r\n  };\r\n\r\n  console.log(\"\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)\");\r\n})();\r\n\n\n/* === assets/js/utils/weekly-lineup-sync.js === */\n/**\r\n * Weekly Lineup \u2194 Dashboard Sync Bridge\r\n * Allows Dashboard to pull fresh model picks from Weekly Lineup\r\n * Allows Weekly Lineup to receive outcome updates from Dashboard\r\n * \r\n * Usage:\r\n *   Dashboard: window.WeeklyLineupSync.getLatestPicks() \u2192 pulls from localStorage cache\r\n *   Weekly Lineup: window.WeeklyLineupSync.pushOutcomes(picks) \u2192 pushes results back\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const WEEKLY_LINEUP_KEY = 'gbsv_weekly_lineup_picks';\r\n    const DASHBOARD_KEY = 'gbsv_picks';\r\n\r\n    const WeeklyLineupSync = {\r\n        /**\r\n         * Dashboard calls this to get latest model picks from Weekly Lineup cache\r\n         * @returns {Array} Active picks from Weekly Lineup, or empty array\r\n         */\r\n        getLatestPicks() {\r\n            try {\r\n                // Check if Weekly Lineup page has already loaded picks\r\n                if (window.WeeklyLineup && typeof window.WeeklyLineup.getActivePicks === 'function') {\r\n                    const picks = window.WeeklyLineup.getActivePicks();\r\n                    if (picks && picks.length > 0) {\r\n                        console.log('[SYNC] Got picks from Weekly Lineup (live):', picks.length);\r\n                        return picks;\r\n                    }\r\n                }\r\n\r\n                // Otherwise try to load from localStorage cache\r\n                const data = localStorage.getItem(WEEKLY_LINEUP_KEY);\r\n                if (data) {\r\n                    const parsed = JSON.parse(data);\r\n                    if (parsed.picks && Array.isArray(parsed.picks)) {\r\n                        console.log('[SYNC] Got picks from localStorage cache:', parsed.picks.length);\r\n                        return parsed.picks;\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error getting latest picks:', e.message);\r\n            }\r\n            return [];\r\n        },\r\n\r\n        /**\r\n         * Weekly Lineup calls this to sync outcomes from Dashboard\r\n         * @param {Array} dashboardPicks - Picks with updated status/outcomes\r\n         */\r\n        pushOutcomes(dashboardPicks) {\r\n            try {\r\n                if (!Array.isArray(dashboardPicks)) {\r\n                    console.warn('[SYNC] pushOutcomes expects an array');\r\n                    return;\r\n                }\r\n\r\n                // If Weekly Lineup is loaded, use its sync function\r\n                if (window.WeeklyLineup && typeof window.WeeklyLineup.syncDashboardOutcomes === 'function') {\r\n                    console.log('[SYNC] Pushing outcomes to live Weekly Lineup:', dashboardPicks.length);\r\n                    window.WeeklyLineup.syncDashboardOutcomes(dashboardPicks);\r\n                    return true;\r\n                }\r\n\r\n                // Otherwise store in a temporary sync file (picked up next time Weekly Lineup loads)\r\n                localStorage.setItem('gbsv_pending_outcomes', JSON.stringify({\r\n                    outcomes: dashboardPicks,\r\n                    timestamp: new Date().toISOString()\r\n                }));\r\n                console.log('[SYNC] Stored pending outcomes for Weekly Lineup');\r\n                return true;\r\n            } catch (e) {\r\n                console.error('[SYNC] Error pushing outcomes:', e.message);\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if there are pending outcomes from Dashboard waiting to be synced\r\n         * @returns {Array|null} Pending outcomes or null\r\n         */\r\n        getPendingOutcomes() {\r\n            try {\r\n                const data = localStorage.getItem('gbsv_pending_outcomes');\r\n                if (data) {\r\n                    const parsed = JSON.parse(data);\r\n                    return parsed.outcomes || null;\r\n                }\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error reading pending outcomes:', e.message);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Clear pending outcomes after processing\r\n         */\r\n        clearPendingOutcomes() {\r\n            try {\r\n                localStorage.removeItem('gbsv_pending_outcomes');\r\n                console.log('[SYNC] Cleared pending outcomes');\r\n            } catch (e) {\r\n                console.warn('[SYNC] Error clearing pending outcomes:', e.message);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if Weekly Lineup page is active\r\n         */\r\n        isWeeklyLineupActive() {\r\n            return !!(window.WeeklyLineup && typeof window.WeeklyLineup.getActivePicks === 'function');\r\n        },\r\n\r\n        /**\r\n         * Manual refresh: Dashboard can call this to pull fresh picks from Weekly Lineup\r\n         * into its table (optional enhancement for power users)\r\n         */\r\n        importWeeklyLineupPicks() {\r\n            try {\r\n                const picks = this.getLatestPicks();\r\n                if (picks.length === 0) {\r\n                    console.warn('[SYNC] No picks available from Weekly Lineup to import');\r\n                    return false;\r\n                }\r\n\r\n                // Push to Dashboard's table if LoadAndAppendPicks is available\r\n                if (window.loadLivePicks && typeof window.loadLivePicks === 'function') {\r\n                    console.log('[SYNC] Importing picks to Dashboard:', picks.length);\r\n                    // This is a manual enhancement - can be triggered by user action\r\n                    return true;\r\n                }\r\n\r\n                console.log('[SYNC] Dashboard table not ready for import');\r\n                return false;\r\n            } catch (e) {\r\n                console.error('[SYNC] Error importing picks:', e.message);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\n    window.WeeklyLineupSync = WeeklyLineupSync;\r\n\r\n    // On page load: Check for pending outcomes if Weekly Lineup is active\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            if (WeeklyLineupSync.isWeeklyLineupActive()) {\r\n                const pending = WeeklyLineupSync.getPendingOutcomes();\r\n                if (pending && pending.length > 0) {\r\n                    console.log('[SYNC] Processing pending outcomes:', pending.length);\r\n                    WeeklyLineupSync.pushOutcomes(pending);\r\n                    WeeklyLineupSync.clearPendingOutcomes();\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        if (WeeklyLineupSync.isWeeklyLineupActive()) {\r\n            const pending = WeeklyLineupSync.getPendingOutcomes();\r\n            if (pending && pending.length > 0) {\r\n                console.log('[SYNC] Processing pending outcomes:', pending.length);\r\n                WeeklyLineupSync.pushOutcomes(pending);\r\n                WeeklyLineupSync.clearPendingOutcomes();\r\n            }\r\n        }\r\n    }\r\n\r\n    console.log('\u2705 WeeklyLineupSync bridge initialized');\r\n})();\r\n\n\n/* === assets/js/features/live-scores.js === */\n/**\r\n * Live Score Updates v2.1\r\n * Real-time score updates for active games without page refresh\r\n * v2.1: SportsDataIO as primary source for NFL/NCAAF box scores\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    class LiveScoreUpdater {\r\n        constructor() {\r\n            this.updateInterval = null;\r\n            this.lastUpdate = Date.now();\r\n            this.updateFrequency = 30000; // 30 seconds default\r\n            this.isUpdating = false;\r\n            this.activeGames = new Map();\r\n            this.apiEndpoint = window.APP_CONFIG ? window.APP_CONFIG.API_BASE_URL : '/api';\r\n\r\n            // Bind methods\r\n            this.startLiveUpdates = this.startLiveUpdates.bind(this);\r\n            this.stopLiveUpdates = this.stopLiveUpdates.bind(this);\r\n            this.updateScores = this.updateScores.bind(this);\r\n        }\r\n\r\n        /**\r\n         * Start live score updates\r\n         */\r\n        startLiveUpdates() {\r\n            if (this.updateInterval) {\r\n                return; // Already running\r\n            }\r\n\r\n            console.log('Starting live score updates');\r\n\r\n            // Initial update\r\n            this.updateScores();\r\n\r\n            // Set up interval\r\n            this.updateInterval = setInterval(() => {\r\n                this.updateScores();\r\n            }, this.updateFrequency);\r\n        }\r\n\r\n        /**\r\n         * Stop live score updates\r\n         */\r\n        stopLiveUpdates() {\r\n            if (this.updateInterval) {\r\n                clearInterval(this.updateInterval);\r\n                this.updateInterval = null;\r\n                console.log('Stopped live score updates');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update scores for all active games\r\n         */\r\n        async updateScores() {\r\n            if (this.isUpdating) {\r\n                return; // Prevent overlapping updates\r\n            }\r\n\r\n            this.isUpdating = true;\r\n\r\n            try {\r\n                // Get all picks from the table\r\n                const picks = this.getActivePicksFromDOM();\r\n\r\n                if (picks.length === 0) {\r\n                    this.isUpdating = false;\r\n                    return;\r\n                }\r\n\r\n                // Group picks by sport\r\n                const picksBySport = this.groupPicksBySport(picks);\r\n\r\n                // Fetch updates for each sport\r\n                for (const [sport, sportPicks] of Object.entries(picksBySport)) {\r\n                    await this.updateSportScores(sport, sportPicks);\r\n                }\r\n\r\n                // Update KPI metrics\r\n                this.updateKPIMetrics();\r\n\r\n                this.lastUpdate = Date.now();\r\n            } catch (error) {\r\n                console.error('Error updating scores:', error);\r\n            } finally {\r\n                this.isUpdating = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get active picks from DOM\r\n         */\r\n        getActivePicksFromDOM() {\r\n            const picks = [];\r\n            const tbody = document.getElementById('picks-tbody');\r\n\r\n            if (!tbody) {\r\n                return picks;\r\n            }\r\n\r\n            // Also check for tracker picks (same structure)\r\n            if (picks.length === 0 && tbody.children.length === 0) {\r\n                // No picks found, return empty\r\n                return picks;\r\n            }\r\n\r\n            const rows = tbody.querySelectorAll('tr:not(.parlay-legs)');\r\n\r\n            rows.forEach(row => {\r\n                // Skip hidden rows\r\n                if (row.style.display === 'none') {\r\n                    return;\r\n                }\r\n\r\n                const status = row.querySelector('.status-badge')?.textContent || '';\r\n\r\n                // Only update pending and live games\r\n                if (status === 'Pending' || status === 'On Track' || status === 'At Risk') {\r\n                    const pick = this.extractPickFromRow(row);\r\n                    if (pick) {\r\n                        picks.push(pick);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return picks;\r\n        }\r\n\r\n        /**\r\n         * Extract pick data from table row\r\n         */\r\n        extractPickFromRow(row) {\r\n            try {\r\n                const pick = {\r\n                    rowId: row.getAttribute('data-row-id') || row.id,\r\n                    gameId: row.getAttribute('data-game-id'),\r\n                    sport: row.getAttribute('data-sport') || 'nfl',\r\n\r\n                    // Teams\r\n                    awayTeam: row.getAttribute('data-away-team'),\r\n                    homeTeam: row.getAttribute('data-home-team'),\r\n                    awayAbbr: row.getAttribute('data-away-abbr'),\r\n                    homeAbbr: row.getAttribute('data-home-abbr'),\r\n\r\n                    // Pick details\r\n                    pickType: row.getAttribute('data-pick-type'),\r\n                    pickTeam: row.getAttribute('data-pick-team'),\r\n                    line: row.getAttribute('data-line'),\r\n\r\n                    // Current scores (from box score if available)\r\n                    currentAwayScore: null,\r\n                    currentHomeScore: null\r\n                };\r\n\r\n                // Try to get current scores from box score (check both selectors)\r\n                const boxScore = row.querySelector('.boxscore-container, .compact-boxscore');\r\n                if (boxScore) {\r\n                    // Try multiple selector patterns for totals\r\n                    const awayTotal = boxScore.querySelector('.total-away, .boxscore-row:nth-child(2) .boxscore-cell.total');\r\n                    const homeTotal = boxScore.querySelector('.total-home, .boxscore-row:nth-child(3) .boxscore-cell.total');\r\n\r\n                    if (awayTotal) {\r\n                        pick.currentAwayScore = parseInt(awayTotal.textContent) || 0;\r\n                    }\r\n                    if (homeTotal) {\r\n                        pick.currentHomeScore = parseInt(homeTotal.textContent) || 0;\r\n                    }\r\n                }\r\n\r\n                return pick;\r\n            } catch (error) {\r\n                console.warn('Failed to extract pick from row:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Group picks by sport\r\n         */\r\n        groupPicksBySport(picks) {\r\n            const grouped = {};\r\n\r\n            for (const pick of picks) {\r\n                const sport = pick.sport || 'nfl';\r\n                if (!grouped[sport]) {\r\n                    grouped[sport] = [];\r\n                }\r\n                grouped[sport].push(pick);\r\n            }\r\n\r\n            return grouped;\r\n        }\r\n\r\n        /**\r\n         * Get sport-specific API URL from config\r\n         */\r\n        getSportApiUrl(sport) {\r\n            const sportUpper = sport.toUpperCase();\r\n            const configKey = `${sportUpper}_API_URL`;\r\n\r\n            // Try to get from ModelEndpointResolver first\r\n            if (window.ModelEndpointResolver?.getApiEndpoint) {\r\n                const resolvedEndpoint = window.ModelEndpointResolver.getApiEndpoint(sport);\r\n                if (resolvedEndpoint) {\r\n                    return resolvedEndpoint;\r\n                }\r\n            }\r\n\r\n            // Fall back to APP_CONFIG\r\n            if (window.APP_CONFIG && window.APP_CONFIG[configKey]) {\r\n                return window.APP_CONFIG[configKey];\r\n            }\r\n\r\n            const base = window.APP_CONFIG?.API_BASE_FALLBACK || window.APP_CONFIG?.API_BASE_URL || `${window.location.origin}/api`;\r\n            return base ? `${base}/${sport.toLowerCase()}` : null;\r\n        }\r\n\r\n        /**\r\n         * Update scores for a specific sport\r\n         * NFL/NCAAF: SportsDataIO (primary) -> ESPN (fallback)\r\n         * NBA/NCAAM: ESPN via AutoGameFetcher (primary) -> Direct ESPN (fallback)\r\n         */\r\n        async updateSportScores(sport, picks) {\r\n            const sportUpper = sport.toUpperCase();\r\n\r\n            try {\r\n                // NFL and NCAAF: Use SportsDataIO as primary source (more accurate for football)\r\n                if (sportUpper === 'NFL' || sportUpper === 'NCAAF') {\r\n                    const success = await this.fetchSportsDataIOScores(sport, picks);\r\n                    if (success) return;\r\n\r\n                    // Fallback to ESPN for NFL/NCAAF\r\n                    console.log(`[LIVE-SCORES] SportsDataIO failed for ${sport}, falling back to ESPN`);\r\n                }\r\n\r\n                // NBA and NCAAM: Use AutoGameFetcher's cached ESPN data (primary)\r\n                if (window.AutoGameFetcher) {\r\n                    const allGames = window.AutoGameFetcher.getTodaysGames() || [];\r\n                    const sportGames = allGames.filter(g => g.sport?.toUpperCase() === sportUpper);\r\n\r\n                    if (sportGames.length > 0) {\r\n                        console.log(`[LIVE-SCORES] Using ESPN data for ${sport} (${sportGames.length} games)`);\r\n\r\n                        // Update each pick with matching game data\r\n                        for (const pick of picks) {\r\n                            const game = this.findMatchingGame(pick, sportGames);\r\n                            if (game) {\r\n                                // Convert ESPN format to our expected format\r\n                                const normalizedGame = {\r\n                                    gameId: game.gameId,\r\n                                    awayTeam: game.awayTeam,\r\n                                    homeTeam: game.homeTeam,\r\n                                    awayScore: game.awayScore || 0,\r\n                                    homeScore: game.homeScore || 0,\r\n                                    isLive: game.status && !game.status.toLowerCase().includes('scheduled') && !game.status.toLowerCase().includes('final'),\r\n                                    isFinal: game.status?.toLowerCase().includes('final'),\r\n                                    gameStatus: {\r\n                                        clock: game.statusDetail || game.status,\r\n                                        period: this.extractPeriod(game.status)\r\n                                    }\r\n                                };\r\n                                this.updatePickWithGameData(pick, normalizedGame);\r\n                            }\r\n                        }\r\n                        return; // Success - no need for fallback\r\n                    }\r\n                }\r\n\r\n                // Fallback: Try direct ESPN fetch if AutoGameFetcher not available\r\n                await this.fetchESPNScores(sport, picks);\r\n            } catch (error) {\r\n                console.warn(`[LIVE-SCORES] Failed to update ${sport} scores:`, error.message);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the scoreboard proxy URL (Azure Functions)\r\n         */\r\n        getScoreboardProxyUrl() {\r\n            const functionsBase = window.APP_CONFIG?.FUNCTIONS_BASE_URL;\r\n            if (functionsBase) {\r\n                return `${functionsBase}/api/scoreboard`;\r\n            }\r\n            return '/api/scoreboard';\r\n        }\r\n\r\n        /**\r\n         * Fetch scores from SportsDataIO via proxy (primary for NFL/NCAAF)\r\n         * Returns true if successful, false if should fallback to ESPN\r\n         */\r\n        async fetchSportsDataIOScores(sport, picks) {\r\n            // SportsDataIO uses lowercase sport paths, cfb for college football\r\n            const sportPath = sport.toLowerCase() === 'ncaaf' ? 'cfb' : sport.toLowerCase();\r\n\r\n            // Use proxy to avoid CORS issues\r\n            const now = new Date();\r\n            const today = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\r\n            const proxyBase = this.getScoreboardProxyUrl();\r\n            const url = `${proxyBase}/${sportPath}?date=${today}`;\r\n\r\n            try {\r\n                const controller = new AbortController();\r\n                const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n\r\n                console.log(`[LIVE-SCORES] Fetching ${sport} via proxy: ${url}`);\r\n\r\n                const response = await fetch(url, {\r\n                    signal: controller.signal\r\n                });\r\n                clearTimeout(timeoutId);\r\n\r\n                if (!response.ok) {\r\n                    console.warn(`[LIVE-SCORES] Scoreboard proxy ${sport} returned ${response.status}`);\r\n                    return false;\r\n                }\r\n\r\n                const games = await response.json();\r\n                if (!Array.isArray(games) || games.length === 0) {\r\n                    console.log(`[LIVE-SCORES] No SportsDataIO games for ${sport} today`);\r\n                    return false;\r\n                }\r\n\r\n                console.log(`[LIVE-SCORES] SportsDataIO returned ${games.length} ${sport} games`);\r\n\r\n                for (const pick of picks) {\r\n                    for (const sdGame of games) {\r\n                        // SportsDataIO uses AwayTeam/HomeTeam or AwayTeamName/HomeTeamName\r\n                        const awayTeam = sdGame.AwayTeam || sdGame.AwayTeamName || '';\r\n                        const homeTeam = sdGame.HomeTeam || sdGame.HomeTeamName || '';\r\n\r\n                        if (this.teamMatches(pick.awayTeam, awayTeam) &&\r\n                            this.teamMatches(pick.homeTeam, homeTeam)) {\r\n\r\n                            // Determine game status from SportsDataIO Status field\r\n                            const status = (sdGame.Status || '').toLowerCase();\r\n                            const isScheduled = status === 'scheduled' || status === 'pregame';\r\n                            const isFinal = status === 'final' || status === 'f' || status === 'f/ot';\r\n                            const isLive = !isScheduled && !isFinal && status !== 'postponed' && status !== 'canceled';\r\n\r\n                            // Build quarter/period scoring if available\r\n                            const scoring = {};\r\n                            if (sdGame.Quarters && Array.isArray(sdGame.Quarters)) {\r\n                                sdGame.Quarters.forEach((q, idx) => {\r\n                                    const periodKey = `q${idx + 1}`;\r\n                                    scoring[periodKey] = {\r\n                                        away: q.AwayScore || 0,\r\n                                        home: q.HomeScore || 0\r\n                                    };\r\n                                });\r\n                            }\r\n\r\n                            const game = {\r\n                                gameId: sdGame.GameID || sdGame.ScoreID,\r\n                                awayTeam: awayTeam,\r\n                                homeTeam: homeTeam,\r\n                                awayScore: sdGame.AwayScore || 0,\r\n                                homeScore: sdGame.HomeScore || 0,\r\n                                isLive: isLive,\r\n                                isFinal: isFinal,\r\n                                scoring: scoring,\r\n                                gameStatus: {\r\n                                    clock: sdGame.TimeRemaining || sdGame.Quarter || status,\r\n                                    period: sdGame.Quarter || 1\r\n                                }\r\n                            };\r\n\r\n                            this.updatePickWithGameData(pick, game);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return true; // Successfully processed\r\n            } catch (error) {\r\n                if (error.name === 'AbortError') {\r\n                    console.warn(`[LIVE-SCORES] SportsDataIO ${sport} request timed out`);\r\n                } else {\r\n                    console.warn(`[LIVE-SCORES] SportsDataIO ${sport} error:`, error.message);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Extract period number from ESPN status string\r\n         */\r\n        extractPeriod(status) {\r\n            if (!status) return 1;\r\n            const match = status.match(/(\\d+)(st|nd|rd|th)/i);\r\n            return match ? parseInt(match[1]) : 1;\r\n        }\r\n\r\n        /**\r\n         * Fallback: Fetch directly from ESPN API\r\n         */\r\n        async fetchESPNScores(sport, picks) {\r\n            const sportPath = sport.toLowerCase() === 'ncaam' ? 'mens-college-basketball' :\r\n                             sport.toLowerCase() === 'ncaaf' ? 'college-football' :\r\n                             sport.toLowerCase();\r\n\r\n            const sportCategory = sport.toLowerCase() === 'nba' || sport.toLowerCase() === 'ncaam' ? 'basketball' : 'football';\r\n            const today = new Date().toISOString().split('T')[0].replace(/-/g, '');\r\n\r\n            const url = `https://site.api.espn.com/apis/site/v2/sports/${sportCategory}/${sportPath}/scoreboard?dates=${today}`;\r\n\r\n            try {\r\n                const controller = new AbortController();\r\n                const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n\r\n                const response = await fetch(url, { signal: controller.signal });\r\n                clearTimeout(timeoutId);\r\n\r\n                if (!response.ok) return;\r\n\r\n                const data = await response.json();\r\n                const events = data.events || [];\r\n\r\n                for (const pick of picks) {\r\n                    for (const event of events) {\r\n                        const competition = event.competitions?.[0];\r\n                        if (!competition) continue;\r\n\r\n                        const competitors = competition.competitors || [];\r\n                        const homeTeam = competitors.find(t => t.homeAway === 'home');\r\n                        const awayTeam = competitors.find(t => t.homeAway === 'away');\r\n\r\n                        if (!homeTeam || !awayTeam) continue;\r\n\r\n                        // Check if this event matches the pick\r\n                        if (this.teamMatches(pick.awayTeam, awayTeam.team.displayName) &&\r\n                            this.teamMatches(pick.homeTeam, homeTeam.team.displayName)) {\r\n\r\n                            const status = competition.status?.type || {};\r\n                            const game = {\r\n                                gameId: event.id,\r\n                                awayTeam: awayTeam.team.displayName,\r\n                                homeTeam: homeTeam.team.displayName,\r\n                                awayScore: parseInt(awayTeam.score) || 0,\r\n                                homeScore: parseInt(homeTeam.score) || 0,\r\n                                isLive: status.state === 'in',\r\n                                isFinal: status.completed === true,\r\n                                gameStatus: {\r\n                                    clock: status.detail || status.description,\r\n                                    period: status.period || 1\r\n                                }\r\n                            };\r\n\r\n                            this.updatePickWithGameData(pick, game);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                if (error.name !== 'AbortError') {\r\n                    console.warn(`[LIVE-SCORES] ESPN fallback failed for ${sport}:`, error.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Find matching game for a pick\r\n         */\r\n        findMatchingGame(pick, games) {\r\n            for (const game of games) {\r\n                // Match by game ID if available\r\n                if (pick.gameId && game.gameId === pick.gameId) {\r\n                    return game;\r\n                }\r\n\r\n                // Match by team abbreviations\r\n                const awayMatch = this.teamMatches(pick.awayAbbr, game.awayAbbr) ||\r\n                                  this.teamMatches(pick.awayTeam, game.awayTeam);\r\n                const homeMatch = this.teamMatches(pick.homeAbbr, game.homeAbbr) ||\r\n                                  this.teamMatches(pick.homeTeam, game.homeTeam);\r\n\r\n                if (awayMatch && homeMatch) {\r\n                    return game;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        /**\r\n         * Check if team names match\r\n         */\r\n        teamMatches(team1, team2) {\r\n            if (!team1 || !team2) return false;\r\n\r\n            const normalize = (str) => str.toLowerCase().replace(/[^a-z0-9]/g, '');\r\n            return normalize(team1) === normalize(team2);\r\n        }\r\n\r\n        /**\r\n         * Update pick with live game data\r\n         */\r\n        updatePickWithGameData(pick, game) {\r\n            const row = document.querySelector(`tr[data-row-id=\"${pick.rowId}\"]`);\r\n            if (!row) return;\r\n\r\n            // Update box score if present (check both selectors)\r\n            const boxScore = row.querySelector('.boxscore-container, .compact-boxscore');\r\n            if (boxScore) {\r\n                this.updateBoxScore(boxScore, game);\r\n            }\r\n\r\n            // Update status\r\n            const newStatus = this.calculatePickStatus(pick, game);\r\n            this.updatePickStatus(row, newStatus);\r\n\r\n            // Store game in active games map\r\n            this.activeGames.set(pick.rowId, game);\r\n        }\r\n\r\n        /**\r\n         * Update box score display\r\n         */\r\n        updateBoxScore(boxScore, game) {\r\n            // Update quarter scores\r\n            if (game.scoring) {\r\n                for (const [period, scores] of Object.entries(game.scoring)) {\r\n                    const awayCell = boxScore.querySelector(`.${period.toLowerCase()}-away`);\r\n                    const homeCell = boxScore.querySelector(`.${period.toLowerCase()}-home`);\r\n\r\n                    if (awayCell && scores.away !== undefined) {\r\n                        awayCell.textContent = scores.away;\r\n                    }\r\n                    if (homeCell && scores.home !== undefined) {\r\n                        homeCell.textContent = scores.home;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update total scores\r\n            const awayTotal = boxScore.querySelector('.total-away');\r\n            const homeTotal = boxScore.querySelector('.total-home');\r\n\r\n            if (awayTotal && game.awayScore !== undefined) {\r\n                awayTotal.textContent = game.awayScore;\r\n            }\r\n            if (homeTotal && game.homeScore !== undefined) {\r\n                homeTotal.textContent = game.homeScore;\r\n            }\r\n\r\n            // Update game status\r\n            const gameStatus = boxScore.querySelector('.game-time-status');\r\n            if (gameStatus) {\r\n                if (game.isLive) {\r\n                    gameStatus.textContent = game.gameStatus?.clock || 'Live';\r\n                    gameStatus.className = 'game-time-status live';\r\n                } else if (game.isFinal) {\r\n                    gameStatus.textContent = 'Final';\r\n                    gameStatus.className = 'game-time-status final';\r\n                } else {\r\n                    // Keep existing status for pending/loading states\r\n                    // The skeleton should remain visible with current status\r\n                    gameStatus.className = 'game-time-status countdown';\r\n                }\r\n            }\r\n\r\n            if (boxScore && boxScore.getAttribute('data-live-ready') !== 'true') {\r\n                boxScore.setAttribute('data-live-ready', 'true');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Calculate pick status based on game data\r\n         */\r\n        calculatePickStatus(pick, game) {\r\n            if (game.isFinal) {\r\n                return this.calculateFinalStatus(pick, game);\r\n            } else if (game.isLive) {\r\n                return this.calculateLiveStatus(pick, game);\r\n            }\r\n\r\n            return 'pending';\r\n        }\r\n\r\n        /**\r\n         * Calculate final status for completed game\r\n         */\r\n        calculateFinalStatus(pick, game) {\r\n            const awayScore = game.awayScore || 0;\r\n            const homeScore = game.homeScore || 0;\r\n\r\n            if (pick.pickType === 'spread') {\r\n                const spread = parseFloat(pick.line) || 0;\r\n                const isAwayPick = this.teamMatches(pick.pickTeam, pick.awayTeam);\r\n                const actualSpread = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n\r\n                if (actualSpread + spread > 0) {\r\n                    return 'win';\r\n                } else if (actualSpread + spread < 0) {\r\n                    return 'loss';\r\n                } else {\r\n                    return 'push';\r\n                }\r\n            } else if (pick.pickType === 'moneyline') {\r\n                const isAwayPick = this.teamMatches(pick.pickTeam, pick.awayTeam);\r\n                const pickScore = isAwayPick ? awayScore : homeScore;\r\n                const oppScore = isAwayPick ? homeScore : awayScore;\r\n\r\n                if (pickScore > oppScore) {\r\n                    return 'win';\r\n                } else if (pickScore < oppScore) {\r\n                    return 'loss';\r\n                } else {\r\n                    return 'push';\r\n                }\r\n            } else if (pick.pickType === 'total' || pick.pickType.includes('ou')) {\r\n                const total = parseFloat(pick.line) || 0;\r\n                const actualTotal = awayScore + homeScore;\r\n                const isOver = pick.pickType.includes('over') || pick.pickTeam?.toLowerCase().includes('over');\r\n\r\n                if (isOver) {\r\n                    return actualTotal > total ? 'win' : (actualTotal < total ? 'loss' : 'push');\r\n                } else {\r\n                    return actualTotal < total ? 'win' : (actualTotal > total ? 'loss' : 'push');\r\n                }\r\n            }\r\n\r\n            return 'pending';\r\n        }\r\n\r\n        /**\r\n         * Calculate live status for in-progress game\r\n         */\r\n        calculateLiveStatus(pick, game) {\r\n            const awayScore = game.awayScore || 0;\r\n            const homeScore = game.homeScore || 0;\r\n\r\n            if (pick.pickType === 'spread') {\r\n                const spread = parseFloat(pick.line) || 0;\r\n                const isAwayPick = this.teamMatches(pick.pickTeam, pick.awayTeam);\r\n                const actualSpread = isAwayPick ? (awayScore - homeScore) : (homeScore - awayScore);\r\n\r\n                return (actualSpread + spread > 0) ? 'on-track' : 'at-risk';\r\n            } else if (pick.pickType === 'moneyline') {\r\n                const isAwayPick = this.teamMatches(pick.pickTeam, pick.awayTeam);\r\n                const pickScore = isAwayPick ? awayScore : homeScore;\r\n                const oppScore = isAwayPick ? homeScore : awayScore;\r\n\r\n                return pickScore >= oppScore ? 'on-track' : 'at-risk';\r\n            } else if (pick.pickType === 'total' || pick.pickType.includes('ou')) {\r\n                const total = parseFloat(pick.line) || 0;\r\n                const actualTotal = awayScore + homeScore;\r\n                const isOver = pick.pickType.includes('over') || pick.pickTeam?.toLowerCase().includes('over');\r\n\r\n                // Estimate pace based on game progress\r\n                const period = game.gameStatus?.period || 1;\r\n                const projectedTotal = actualTotal * (4 / period);\r\n\r\n                if (isOver) {\r\n                    return projectedTotal > total ? 'on-track' : 'at-risk';\r\n                } else {\r\n                    return projectedTotal < total ? 'on-track' : 'at-risk';\r\n                }\r\n            }\r\n\r\n            return 'pending';\r\n        }\r\n\r\n        /**\r\n         * Update pick status badge\r\n         */\r\n        updatePickStatus(row, newStatus) {\r\n            const statusBadge = row.querySelector('.status-badge');\r\n            if (!statusBadge) return;\r\n\r\n            const currentStatus = statusBadge.getAttribute('data-status');\r\n            if (currentStatus === newStatus) return; // No change\r\n\r\n            // Update badge\r\n            statusBadge.setAttribute('data-status', newStatus);\r\n            statusBadge.className = `status-badge status-${newStatus}`;\r\n            statusBadge.textContent = this.getStatusLabel(newStatus);\r\n\r\n            // Add animation for status change\r\n            statusBadge.style.animation = 'pulse 0.5s ease';\r\n            setTimeout(() => {\r\n                statusBadge.style.animation = '';\r\n            }, 500);\r\n\r\n            // Persist FINAL statuses to localStorage (win/loss/push)\r\n            // This ensures the archive system can read correct outcomes\r\n            if (['win', 'loss', 'push'].includes(newStatus)) {\r\n                this.persistStatusToStorage(row, newStatus);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Persist final status to localStorage for archive tracking\r\n         */\r\n        persistStatusToStorage(row, status) {\r\n            try {\r\n                const pickId = row.getAttribute('data-pick-id') || row.getAttribute('data-row-id');\r\n                if (!pickId) return;\r\n\r\n                const STORAGE_KEY = 'gbsv_picks';\r\n                const picks = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');\r\n\r\n                let updated = false;\r\n                const updatedPicks = picks.map(p => {\r\n                    // Match by ID or by row-id pattern\r\n                    if (p.id === pickId || p.id?.includes(pickId) || pickId?.includes(p.id)) {\r\n                        if (p.status !== status) {\r\n                            updated = true;\r\n                            return { ...p, status: status, finalizedAt: new Date().toISOString() };\r\n                        }\r\n                    }\r\n                    return p;\r\n                });\r\n\r\n                if (updated) {\r\n                    localStorage.setItem(STORAGE_KEY, JSON.stringify(updatedPicks));\r\n                    console.log(`[LIVE-SCORES] Persisted status '${status}' for pick ${pickId}`);\r\n                }\r\n            } catch (e) {\r\n                console.error('[LIVE-SCORES] Error persisting status:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get status label\r\n         */\r\n        getStatusLabel(status) {\r\n            const labels = {\r\n                'pending': 'Pending',\r\n                'on-track': 'On Track',\r\n                'at-risk': 'At Risk',\r\n                'win': 'Win',\r\n                'loss': 'Loss',\r\n                'push': 'Push'\r\n            };\r\n\r\n            return labels[status] || status;\r\n        }\r\n\r\n        /**\r\n         * Get sport-specific API URL from config (kept for compatibility)\r\n         * Note: Now primarily using ESPN via AutoGameFetcher\r\n         */\r\n\r\n        /**\r\n         * Update KPI metrics\r\n         */\r\n        updateKPIMetrics() {\r\n            // Trigger KPI recalculation if the function exists\r\n            if (typeof window.recalculateKPIs === 'function') {\r\n                window.recalculateKPIs();\r\n            }\r\n\r\n            // Or manually update KPI tiles\r\n            const tiles = document.querySelectorAll('.kpi-tile');\r\n            tiles.forEach(tile => {\r\n                // Trigger tile update logic\r\n                const event = new CustomEvent('update-kpi');\r\n                tile.dispatchEvent(event);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Set update frequency\r\n         */\r\n        setUpdateFrequency(seconds) {\r\n            this.updateFrequency = seconds * 1000;\r\n\r\n            // Restart updates if running\r\n            if (this.updateInterval) {\r\n                this.stopLiveUpdates();\r\n                this.startLiveUpdates();\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create singleton instance\r\n    const liveUpdater = new LiveScoreUpdater();\r\n\r\n    // Export to global scope\r\n    window.LiveScoreUpdater = liveUpdater;\r\n\r\n    // Auto-start on page load if enabled\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n        // Check if live updates are enabled in config\r\n        const liveUpdatesEnabled = window.APP_CONFIG?.LIVE_UPDATES !== false;\r\n\r\n        if (liveUpdatesEnabled) {\r\n            // Start updates after a short delay to let the page fully load\r\n            setTimeout(() => {\r\n                liveUpdater.startLiveUpdates();\r\n            }, 2000);\r\n        }\r\n    });\r\n\r\n    // Stop updates when page is hidden\r\n    document.addEventListener('visibilitychange', () => {\r\n        if (document.hidden) {\r\n            liveUpdater.stopLiveUpdates();\r\n        } else {\r\n            liveUpdater.startLiveUpdates();\r\n        }\r\n    });\r\n\r\n    console.log('[LIVE-SCORES] v2.1 loaded - NFL/NCAAF: SportsDataIO (primary) | NBA/NCAAM: ESPN');\r\n})();\n\n/* === assets/js/features/auto-game-fetcher.js === */\n/**\r\n * Auto Game Fetcher v2.4\r\n * Automatically fetches today's games and validates pick games\r\n * Prevents betting on finished/invalid games\r\n * v2.0: Fetches standings for team records (W-L)\r\n * v2.1: SportsDataIO as primary source for NFL/NCAAF (more accurate)\r\n * v2.2: Use Azure Functions proxy for SportsDataIO (avoids CORS)\r\n * v2.3: Fixed corrupted file structure\r\n * v2.4: Version bump to bypass cache\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Use local time instead of UTC to match CST game schedules\r\n    const today = new Date();\r\n    const todayISO = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\r\n    const todayESPN = todayISO.replace(/-/g, '');\r\n    const STANDINGS_TTL_MS = 6 * 60 * 60 * 1000; // cache standings for 6 hours\r\n    const SCOREBOARD_INTERVAL_INITIAL_MS = 180000; // 3 minutes\r\n    const SCOREBOARD_INTERVAL_MAX_MS = 600000; // 10 minutes\r\n\r\n    let todaysGamesCache = null;\r\n    let teamRecordsCache = {};\r\n    let lastFetch = null;\r\n    const lastStandingsFetch = {\r\n        NBA: 0,\r\n        NFL: 0,\r\n        NCAAM: 0,\r\n        NCAAF: 0\r\n    };\r\n    let scoreboardIntervalMs = SCOREBOARD_INTERVAL_INITIAL_MS;\r\n\r\n    /**\r\n     * Get scoreboard proxy URL from config\r\n     */\r\n    function getScoreboardProxyUrl() {\r\n        // Primary: API base (Front Door)\r\n        const apiBase = window.APP_CONFIG?.API_BASE_URL;\r\n        if (apiBase) {\r\n            const trimmed = apiBase.replace(/\\/+$/, '');\r\n            return `${trimmed}/scoreboard`;\r\n        }\r\n\r\n        // Secondary: Functions base (Front Door or direct)\r\n        const functionsBase = window.APP_CONFIG?.FUNCTIONS_BASE_URL;\r\n        if (functionsBase) {\r\n            const trimmed = functionsBase.replace(/\\/+$/, '');\r\n            return `${trimmed}/scoreboard`;\r\n        }\r\n\r\n        // Fallback: relative path\r\n        return '/api/scoreboard';\r\n    }\r\n\r\n    /**\r\n     * Fetch from SportsDataIO via Azure Functions proxy (avoids CORS)\r\n     */\r\n    async function fetchSportsDataIO(sport) {\r\n        const proxyBase = getScoreboardProxyUrl();\r\n        const url = `${proxyBase}/${sport}?date=${todayISO}`;\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} via proxy: ${url}`);\r\n\r\n        const response = await fetch(url);\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`Scoreboard proxy ${sport} error: ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n\r\n    /**\r\n     * Fetch standings from ESPN to get team records\r\n     */\r\n    async function fetchStandings(sport) {\r\n        const now = Date.now();\r\n        if (lastStandingsFetch[sport] && now - lastStandingsFetch[sport] < STANDINGS_TTL_MS) {\r\n            return;\r\n        }\r\n\r\n        const sportPath = sport === 'NBA' ? 'nba' :\r\n                         sport === 'NFL' ? 'nfl' :\r\n                         sport === 'NCAAM' ? 'mens-college-basketball' :\r\n                         sport === 'NCAAF' ? 'college-football' : null;\r\n\r\n        if (!sportPath) return;\r\n\r\n        const sportCategory = sport === 'NBA' || sport === 'NCAAM' ? 'basketball' : 'football';\r\n        const url = `https://site.api.espn.com/apis/v2/sports/${sportCategory}/${sportPath}/standings`;\r\n\r\n        try {\r\n            console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} standings...`);\r\n            const response = await fetch(url);\r\n            if (!response.ok) return;\r\n\r\n            const data = await response.json();\r\n\r\n            // Parse standings - structure: children[].standings.entries[]\r\n            const conferences = data.children || [];\r\n            for (const conf of conferences) {\r\n                const entries = conf.standings?.entries || [];\r\n                for (const entry of entries) {\r\n                    const teamName = entry.team?.displayName;\r\n                    if (!teamName) continue;\r\n\r\n                    const stats = entry.stats || [];\r\n                    const winsObj = stats.find(s => s.name === 'wins');\r\n                    const lossesObj = stats.find(s => s.name === 'losses');\r\n\r\n                    const wins = winsObj?.displayValue || winsObj?.value || '0';\r\n                    const losses = lossesObj?.displayValue || lossesObj?.value || '0';\r\n\r\n                    teamRecordsCache[teamName.toLowerCase()] = `${wins}-${losses}`;\r\n                }\r\n            }\r\n            lastStandingsFetch[sport] = now;\r\n            console.log(`[AUTO-GAME-FETCHER] Loaded ${Object.keys(teamRecordsCache).length} team records for ${sport}`);\r\n        } catch (e) {\r\n            console.warn(`[AUTO-GAME-FETCHER] Could not fetch ${sport} standings:`, e.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get team record from cache\r\n     */\r\n    function getTeamRecord(teamName) {\r\n        if (!teamName) return '';\r\n        const lower = teamName.toLowerCase();\r\n        return teamRecordsCache[lower] || '';\r\n    }\r\n\r\n    /**\r\n     * Fetch from ESPN API\r\n     */\r\n    async function fetchESPN(sport) {\r\n        const sportPath = sport === 'NCAAM' ? 'mens-college-basketball' :\r\n                         sport === 'NBA' ? 'nba' :\r\n                         sport === 'NCAAF' ? 'college-football' :\r\n                         sport === 'NFL' ? 'nfl' : null;\r\n\r\n        if (!sportPath) throw new Error('Unknown sport');\r\n\r\n        // Determine sport category for URL\r\n        const sportCategory = sport === 'NBA' || sport === 'NCAAM' ? 'basketball' : 'football';\r\n\r\n        // ESPN scoreboard expects YYYYMMDD format (no dashes)\r\n        const dateStr = todayESPN;\r\n        const url = `https://site.api.espn.com/apis/site/v2/sports/${sportCategory}/${sportPath}/scoreboard?dates=${dateStr}`;\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Fetching ${sport} from: ${url}`);\r\n\r\n        const response = await fetch(url);\r\n        if (!response.ok) {\r\n            throw new Error(`ESPN ${sport} API error: ${response.status}`);\r\n        }\r\n\r\n        return await response.json();\r\n    }\r\n\r\n    /**\r\n     * Parse ESPN games\r\n     */\r\n    function parseESPNGames(data, sport) {\r\n        if (!data || !data.events || data.events.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return data.events\r\n            .map(event => {\r\n                const competition = event.competitions?.[0];\r\n                const competitors = competition?.competitors || [];\r\n\r\n                const homeTeam = competitors.find(t => t.homeAway === 'home');\r\n                const awayTeam = competitors.find(t => t.homeAway === 'away');\r\n\r\n                // Skip malformed entries instead of throwing\r\n                if (!competition || !homeTeam || !awayTeam) {\r\n                    return null;\r\n                }\r\n\r\n                const status = competition.status || event.status || {};\r\n                const statusType = status.type || {};\r\n\r\n                const awayTeamName = awayTeam.team.displayName;\r\n                const homeTeamName = homeTeam.team.displayName;\r\n\r\n                return {\r\n                    sport,\r\n                    date: todayISO,\r\n                    time: new Date(event.date).toLocaleTimeString('en-US', {\r\n                        hour: 'numeric',\r\n                        minute: '2-digit',\r\n                        hour12: true\r\n                    }),\r\n                    awayTeam: awayTeamName,\r\n                    homeTeam: homeTeamName,\r\n                    awayRecord: getTeamRecord(awayTeamName),\r\n                    homeRecord: getTeamRecord(homeTeamName),\r\n                    awayScore: parseInt(awayTeam.score, 10) || 0,\r\n                    homeScore: parseInt(homeTeam.score, 10) || 0,\r\n                    status: statusType.description || statusType.name || 'Scheduled',\r\n                    statusDetail: statusType.detail || '',\r\n                    gameId: event.id,\r\n                    channel: competition.broadcasts?.[0]?.names?.[0] || 'TBD'\r\n                };\r\n            })\r\n            .filter(Boolean);\r\n    }\r\n\r\n    /**\r\n     * Parse SportsDataIO games into standard format\r\n     */\r\n    function parseSportsDataIOGames(games, sport) {\r\n        if (!Array.isArray(games) || games.length === 0) {\r\n            return [];\r\n        }\r\n\r\n        return games.map(game => {\r\n            const awayTeamName = game.AwayTeam || game.AwayTeamName || '';\r\n            const homeTeamName = game.HomeTeam || game.HomeTeamName || '';\r\n\r\n            // Parse game time\r\n            let gameTime = 'TBD';\r\n            if (game.DateTime) {\r\n                try {\r\n                    gameTime = new Date(game.DateTime).toLocaleTimeString('en-US', {\r\n                        hour: 'numeric',\r\n                        minute: '2-digit',\r\n                        hour12: true\r\n                    });\r\n                } catch (e) {\r\n                    gameTime = 'TBD';\r\n                }\r\n            }\r\n\r\n            // Determine status from SportsDataIO Status field\r\n            const sdStatus = (game.Status || '').toLowerCase();\r\n            let status = 'Scheduled';\r\n            let statusDetail = '';\r\n\r\n            if (sdStatus === 'final' || sdStatus === 'f' || sdStatus === 'f/ot') {\r\n                status = 'Final';\r\n                statusDetail = sdStatus === 'f/ot' ? 'Final/OT' : 'Final';\r\n            } else if (sdStatus === 'inprogress' || sdStatus === 'in progress') {\r\n                status = 'In Progress';\r\n                statusDetail = game.TimeRemaining ? `Q${game.Quarter} ${game.TimeRemaining}` : `Q${game.Quarter || 1}`;\r\n            } else if (sdStatus === 'halftime') {\r\n                status = 'Halftime';\r\n                statusDetail = 'Halftime';\r\n            } else if (sdStatus === 'postponed') {\r\n                status = 'Postponed';\r\n            } else if (sdStatus === 'canceled') {\r\n                status = 'Canceled';\r\n            }\r\n\r\n            return {\r\n                sport,\r\n                date: todayISO,\r\n                time: gameTime,\r\n                awayTeam: awayTeamName,\r\n                homeTeam: homeTeamName,\r\n                awayRecord: getTeamRecord(awayTeamName),\r\n                homeRecord: getTeamRecord(homeTeamName),\r\n                awayScore: game.AwayScore || 0,\r\n                homeScore: game.HomeScore || 0,\r\n                status: status,\r\n                statusDetail: statusDetail,\r\n                gameId: String(game.GameID || game.ScoreID || ''),\r\n                channel: game.Channel || 'TBD',\r\n                source: 'sportsdata.io'\r\n            };\r\n        }).filter(g => g.awayTeam && g.homeTeam);\r\n    }\r\n\r\n    /**\r\n     * Fetch all today's games\r\n     */\r\n    async function fetchTodaysGames(forceRefresh = false) {\r\n        // Use cache if fresh (within 60 seconds)\r\n        if (!forceRefresh && todaysGamesCache && lastFetch && (Date.now() - lastFetch < 60000)) {\r\n            return todaysGamesCache;\r\n        }\r\n\r\n        // Feature flags for disabled leagues\r\n        const disabledLeagues = new Set(window.APP_CONFIG?.WEEKLY_LINEUP_DISABLED_LEAGUES || window.WEEKLY_LINEUP_DISABLED_LEAGUES || ['NFL', 'NCAAF']);\r\n        const isEnabled = (league) => !disabledLeagues.has(league);\r\n\r\n        // FIRST: Fetch standings (cached) to get team records\r\n        console.log('[AUTO-GAME-FETCHER] Fetching team standings for records (cached)...');\r\n\r\n        const standingsPromises = [];\r\n        if (isEnabled('NBA')) standingsPromises.push(fetchStandings('NBA'));\r\n        if (isEnabled('NFL')) standingsPromises.push(fetchStandings('NFL'));\r\n        if (isEnabled('NCAAM')) standingsPromises.push(fetchStandings('NCAAM'));\r\n        if (isEnabled('NCAAF')) standingsPromises.push(fetchStandings('NCAAF'));\r\n\r\n        await Promise.all(standingsPromises);\r\n\r\n        const allGames = [];\r\n\r\n        // NCAAM via ESPN\r\n        try {\r\n            if (isEnabled('NCAAM')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NCAAM games...');\r\n                const ncaamData = await fetchESPN('NCAAM');\r\n                const ncaamGames = parseESPNGames(ncaamData, 'NCAAM');\r\n                allGames.push(...ncaamGames);\r\n                console.log(`[AUTO-GAME-FETCHER] Found ${ncaamGames.length} NCAAM games`);\r\n            }\r\n        } catch (e) {\r\n            console.error('[AUTO-GAME-FETCHER] Error fetching NCAAM:', e.message);\r\n        }\r\n\r\n        // NBA via ESPN\r\n        try {\r\n            if (isEnabled('NBA')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NBA games...');\r\n                const nbaData = await fetchESPN('NBA');\r\n                const nbaGames = parseESPNGames(nbaData, 'NBA');\r\n                allGames.push(...nbaGames);\r\n                console.log(`[AUTO-GAME-FETCHER] Found ${nbaGames.length} NBA games`);\r\n            }\r\n        } catch (e) {\r\n            console.error('[AUTO-GAME-FETCHER] Error fetching NBA:', e.message);\r\n        }\r\n\r\n        // NFL: SportsDataIO primary, ESPN fallback\r\n        try {\r\n            if (isEnabled('NFL')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NFL games from SportsDataIO...');\r\n                const nflSportsData = await fetchSportsDataIO('nfl');\r\n                const nflGames = parseSportsDataIOGames(nflSportsData, 'NFL');\r\n                if (nflGames.length > 0) {\r\n                    allGames.push(...nflGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${nflGames.length} NFL games (SportsDataIO)`);\r\n                } else {\r\n                    throw new Error('No games from SportsDataIO');\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (isEnabled('NFL')) {\r\n                console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NFL failed (${e.message}), trying ESPN...`);\r\n                try {\r\n                    const nflData = await fetchESPN('NFL');\r\n                    const nflGames = parseESPNGames(nflData, 'NFL');\r\n                    allGames.push(...nflGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${nflGames.length} NFL games (ESPN fallback)`);\r\n                } catch (e2) {\r\n                    console.error('[AUTO-GAME-FETCHER] Error fetching NFL from both sources:', e2.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        // NCAAF: SportsDataIO primary, ESPN fallback\r\n        try {\r\n            if (isEnabled('NCAAF')) {\r\n                console.log('[AUTO-GAME-FETCHER] Fetching NCAAF games from SportsDataIO...');\r\n                const ncaafSportsData = await fetchSportsDataIO('cfb');\r\n                const ncaafGames = parseSportsDataIOGames(ncaafSportsData, 'NCAAF');\r\n                if (ncaafGames.length > 0) {\r\n                    allGames.push(...ncaafGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${ncaafGames.length} NCAAF games (SportsDataIO)`);\r\n                } else {\r\n                    throw new Error('No games from SportsDataIO');\r\n                }\r\n            }\r\n        } catch (e) {\r\n            if (isEnabled('NCAAF')) {\r\n                console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NCAAF failed (${e.message}), trying ESPN...`);\r\n                try {\r\n                    const ncaafData = await fetchESPN('NCAAF');\r\n                    const ncaafGames = parseESPNGames(ncaafData, 'NCAAF');\r\n                    allGames.push(...ncaafGames);\r\n                    console.log(`[AUTO-GAME-FETCHER] Found ${ncaafGames.length} NCAAF games (ESPN fallback)`);\r\n                } catch (e2) {\r\n                    console.error('[AUTO-GAME-FETCHER] Error fetching NCAAF from both sources:', e2.message);\r\n                }\r\n            }\r\n        }\r\n\r\n        todaysGamesCache = allGames;\r\n        lastFetch = Date.now();\r\n\r\n        console.log(`[AUTO-GAME-FETCHER] Total games today: ${allGames.length}`);\r\n        return allGames;\r\n    }\r\n\r\n    /**\r\n     * Find game by team names\r\n     */\r\n    function findGame(teamName1, teamName2) {\r\n        if (!todaysGamesCache) return null;\r\n\r\n        const name1Lower = teamName1.toLowerCase();\r\n        const name2Lower = teamName2 ? teamName2.toLowerCase() : null;\r\n\r\n        return todaysGamesCache.find(game => {\r\n            const awayLower = game.awayTeam.toLowerCase();\r\n            const homeLower = game.homeTeam.toLowerCase();\r\n\r\n            // Check if both teams match\r\n            if (name2Lower) {\r\n                return (awayLower.includes(name1Lower) && homeLower.includes(name2Lower)) ||\r\n                       (awayLower.includes(name2Lower) && homeLower.includes(name1Lower));\r\n            }\r\n\r\n            // Check if single team matches\r\n            return awayLower.includes(name1Lower) || homeLower.includes(name1Lower);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Check if game has started\r\n     */\r\n    function hasGameStarted(game) {\r\n        if (!game) return false;\r\n        const status = (game.status || '').toLowerCase();\r\n        return !status.includes('scheduled') && !status.includes('pre');\r\n    }\r\n\r\n    /**\r\n     * Check if game is finished\r\n     */\r\n    function isGameFinished(game) {\r\n        if (!game) return false;\r\n        const status = (game.status || '').toLowerCase();\r\n        return status.includes('final') || status.includes('completed');\r\n    }\r\n\r\n    /**\r\n     * Get game status message\r\n     */\r\n    function getGameStatusMessage(game) {\r\n        if (!game) return 'Game not found for today';\r\n        if (isGameFinished(game)) return `Game finished: ${game.awayTeam} ${game.awayScore}, ${game.homeTeam} ${game.homeScore}`;\r\n        if (hasGameStarted(game)) return `In progress: ${game.awayTeam} ${game.awayScore}, ${game.homeTeam} ${game.homeScore}`;\r\n        return `Scheduled for ${game.time}`;\r\n    }\r\n\r\n    /**\r\n     * Schedule scoreboard refresh with exponential backoff\r\n     */\r\n    async function scheduleScoreboardRefresh() {\r\n        try {\r\n            await fetchTodaysGames(true);\r\n            scoreboardIntervalMs = SCOREBOARD_INTERVAL_INITIAL_MS;\r\n        } catch (err) {\r\n            console.error('[AUTO-GAME-FETCHER] Refresh failed:', err.message || err);\r\n            scoreboardIntervalMs = Math.min(scoreboardIntervalMs * 2, SCOREBOARD_INTERVAL_MAX_MS);\r\n        } finally {\r\n            setTimeout(scheduleScoreboardRefresh, scoreboardIntervalMs);\r\n        }\r\n    }\r\n\r\n    // Auto-fetch on load, then refresh with backoff\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            fetchTodaysGames().catch(console.error).finally(() => scheduleScoreboardRefresh());\r\n        });\r\n    } else {\r\n        fetchTodaysGames().catch(console.error).finally(() => scheduleScoreboardRefresh());\r\n    }\r\n\r\n    // Export\r\n    window.AutoGameFetcher = {\r\n        fetchTodaysGames,\r\n        findGame,\r\n        hasGameStarted,\r\n        isGameFinished,\r\n        getGameStatusMessage,\r\n        getTodaysGames: () => todaysGamesCache,\r\n        getTeamRecord,\r\n        getRecordsCache: () => teamRecordsCache\r\n    };\r\n\r\n    console.log('\u2705 AutoGameFetcher v2.4 loaded - NFL/NCAAF: SportsDataIO via proxy | NBA/NCAAM: ESPN');\r\n\r\n})();\r\n\n\n/* === assets/js/features/pick-standardizer.js === */\n/**\n * Pick Standardizer v3.0\n * Parses picks from multiple formats:\n * - Sportsbook game lines HTML (div-based panels)\n * - Sportsbook HTML tables (legacy bet slip format)\n * - Text shorthand (e.g., \"Spurs 2.5 -105 $50\")\n * - Screenshot OCR text\n */\n\n(function () {\n  \"use strict\";\n\n  // Default unit multiplier (e.g., $50 = $50,000 when unit is 1000)\n  let unitMultiplier = 1000; // $1 = $1,000\n\n  // Team name mappings (abbreviations to full names)\n  const TEAM_ALIASES = {\n    // NBA - Full names and nicknames\n    spurs: \"San Antonio Spurs\",\n    \"san antonio\": \"San Antonio Spurs\",\n    sas: \"San Antonio Spurs\",\n    knicks: \"New York Knicks\",\n    \"new york\": \"New York Knicks\",\n    nyk: \"New York Knicks\",\n    lakers: \"Los Angeles Lakers\",\n    \"la lakers\": \"Los Angeles Lakers\",\n    lal: \"Los Angeles Lakers\",\n    clippers: \"Los Angeles Clippers\",\n    \"la clippers\": \"Los Angeles Clippers\",\n    lac: \"Los Angeles Clippers\",\n    warriors: \"Golden State Warriors\",\n    \"golden state\": \"Golden State Warriors\",\n    gsw: \"Golden State Warriors\",\n    gs: \"Golden State Warriors\",\n    celtics: \"Boston Celtics\",\n    boston: \"Boston Celtics\",\n    bos: \"Boston Celtics\",\n    heat: \"Miami Heat\",\n    miami: \"Miami Heat\",\n    mia: \"Miami Heat\",\n    bulls: \"Chicago Bulls\",\n    chicago: \"Chicago Bulls\",\n    chi: \"Chicago Bulls\",\n    cavs: \"Cleveland Cavaliers\",\n    cavaliers: \"Cleveland Cavaliers\",\n    cleveland: \"Cleveland Cavaliers\",\n    cle: \"Cleveland Cavaliers\",\n    mavs: \"Dallas Mavericks\",\n    mavericks: \"Dallas Mavericks\",\n    dallas: \"Dallas Mavericks\",\n    dal: \"Dallas Mavericks\",\n    nuggets: \"Denver Nuggets\",\n    denver: \"Denver Nuggets\",\n    den: \"Denver Nuggets\",\n    pistons: \"Detroit Pistons\",\n    detroit: \"Detroit Pistons\",\n    det: \"Detroit Pistons\",\n    rockets: \"Houston Rockets\",\n    houston: \"Houston Rockets\",\n    hou: \"Houston Rockets\",\n    pacers: \"Indiana Pacers\",\n    indiana: \"Indiana Pacers\",\n    ind: \"Indiana Pacers\",\n    grizzlies: \"Memphis Grizzlies\",\n    memphis: \"Memphis Grizzlies\",\n    mem: \"Memphis Grizzlies\",\n    bucks: \"Milwaukee Bucks\",\n    milwaukee: \"Milwaukee Bucks\",\n    mil: \"Milwaukee Bucks\",\n    wolves: \"Minnesota Timberwolves\",\n    timberwolves: \"Minnesota Timberwolves\",\n    minnesota: \"Minnesota Timberwolves\",\n    min: \"Minnesota Timberwolves\",\n    pelicans: \"New Orleans Pelicans\",\n    \"new orleans\": \"New Orleans Pelicans\",\n    nop: \"New Orleans Pelicans\",\n    no: \"New Orleans Pelicans\",\n    nets: \"Brooklyn Nets\",\n    brooklyn: \"Brooklyn Nets\",\n    bkn: \"Brooklyn Nets\",\n    bk: \"Brooklyn Nets\",\n    thunder: \"Oklahoma City Thunder\",\n    okc: \"Oklahoma City Thunder\",\n    magic: \"Orlando Magic\",\n    orlando: \"Orlando Magic\",\n    orl: \"Orlando Magic\",\n    \"76ers\": \"Philadelphia 76ers\",\n    sixers: \"Philadelphia 76ers\",\n    philly: \"Philadelphia 76ers\",\n    philadelphia: \"Philadelphia 76ers\",\n    phi: \"Philadelphia 76ers\",\n    suns: \"Phoenix Suns\",\n    phoenix: \"Phoenix Suns\",\n    phx: \"Phoenix Suns\",\n    blazers: \"Portland Trail Blazers\",\n    portland: \"Portland Trail Blazers\",\n    por: \"Portland Trail Blazers\",\n    kings: \"Sacramento Kings\",\n    sacramento: \"Sacramento Kings\",\n    sac: \"Sacramento Kings\",\n    raptors: \"Toronto Raptors\",\n    toronto: \"Toronto Raptors\",\n    tor: \"Toronto Raptors\",\n    jazz: \"Utah Jazz\",\n    utah: \"Utah Jazz\",\n    uta: \"Utah Jazz\",\n    wizards: \"Washington Wizards\",\n    washington: \"Washington Wizards\",\n    was: \"Washington Wizards\",\n    wsh: \"Washington Wizards\",\n    hawks: \"Atlanta Hawks\",\n    atlanta: \"Atlanta Hawks\",\n    atl: \"Atlanta Hawks\",\n    hornets: \"Charlotte Hornets\",\n    charlotte: \"Charlotte Hornets\",\n    cha: \"Charlotte Hornets\",\n\n    // NFL\n    chiefs: \"Kansas City Chiefs\",\n    \"kansas city\": \"Kansas City Chiefs\",\n    kc: \"Kansas City Chiefs\",\n    eagles: \"Philadelphia Eagles\",\n    cowboys: \"Dallas Cowboys\",\n    niners: \"San Francisco 49ers\",\n    \"49ers\": \"San Francisco 49ers\",\n    bills: \"Buffalo Bills\",\n    buffalo: \"Buffalo Bills\",\n    ravens: \"Baltimore Ravens\",\n    baltimore: \"Baltimore Ravens\",\n    bengals: \"Cincinnati Bengals\",\n    cincinnati: \"Cincinnati Bengals\",\n    browns: \"Cleveland Browns\",\n    steelers: \"Pittsburgh Steelers\",\n    pittsburgh: \"Pittsburgh Steelers\",\n    colts: \"Indianapolis Colts\",\n    texans: \"Houston Texans\",\n    jaguars: \"Jacksonville Jaguars\",\n    jags: \"Jacksonville Jaguars\",\n    jacksonville: \"Jacksonville Jaguars\",\n    titans: \"Tennessee Titans\",\n    tennessee: \"Tennessee Titans\",\n    broncos: \"Denver Broncos\",\n    chargers: \"Los Angeles Chargers\",\n    \"la chargers\": \"Los Angeles Chargers\",\n    raiders: \"Las Vegas Raiders\",\n    vegas: \"Las Vegas Raiders\",\n    seahawks: \"Seattle Seahawks\",\n    seattle: \"Seattle Seahawks\",\n    cardinals: \"Arizona Cardinals\",\n    arizona: \"Arizona Cardinals\",\n    rams: \"Los Angeles Rams\",\n    \"la rams\": \"Los Angeles Rams\",\n    packers: \"Green Bay Packers\",\n    \"green bay\": \"Green Bay Packers\",\n    bears: \"Chicago Bears\",\n    lions: \"Detroit Lions\",\n    vikings: \"Minnesota Vikings\",\n    saints: \"New Orleans Saints\",\n    falcons: \"Atlanta Falcons\",\n    panthers: \"Carolina Panthers\",\n    carolina: \"Carolina Panthers\",\n    bucs: \"Tampa Bay Buccaneers\",\n    buccaneers: \"Tampa Bay Buccaneers\",\n    tampa: \"Tampa Bay Buccaneers\",\n    \"tampa bay\": \"Tampa Bay Buccaneers\",\n    commanders: \"Washington Commanders\",\n    giants: \"New York Giants\",\n    \"ny giants\": \"New York Giants\",\n    jets: \"New York Jets\",\n    \"ny jets\": \"New York Jets\",\n    patriots: \"New England Patriots\",\n    pats: \"New England Patriots\",\n    \"new england\": \"New England Patriots\",\n    dolphins: \"Miami Dolphins\",\n\n    // College - Power conferences & common\n    army: \"Army Black Knights\",\n    navy: \"Navy Midshipmen\",\n    alabama: \"Alabama Crimson Tide\",\n    bama: \"Alabama Crimson Tide\",\n    georgia: \"Georgia Bulldogs\",\n    \"ohio state\": \"Ohio State Buckeyes\",\n    \"ohio st\": \"Ohio State Buckeyes\",\n    osu: \"Ohio State Buckeyes\",\n    michigan: \"Michigan Wolverines\",\n    \"michigan state\": \"Michigan State Spartans\",\n    \"michigan st\": \"Michigan State Spartans\",\n    msu: \"Michigan State Spartans\",\n    texas: \"Texas Longhorns\",\n    \"notre dame\": \"Notre Dame Fighting Irish\",\n    duke: \"Duke Blue Devils\",\n    unc: \"North Carolina Tar Heels\",\n    \"north carolina\": \"North Carolina Tar Heels\",\n    kentucky: \"Kentucky Wildcats\",\n    kansas: \"Kansas Jayhawks\",\n    gonzaga: \"Gonzaga Bulldogs\",\n    auburn: \"Auburn Tigers\",\n    tennessee: \"Tennessee Volunteers\",\n    purdue: \"Purdue Boilermakers\",\n    uconn: \"UConn Huskies\",\n    \"iowa state\": \"Iowa State Cyclones\",\n    \"iowa st\": \"Iowa State Cyclones\",\n    houston: \"Houston Cougars\",\n    baylor: \"Baylor Bears\",\n    arizona: \"Arizona Wildcats\",\n    ucla: \"UCLA Bruins\",\n    florida: \"Florida Gators\",\n    lsu: \"LSU Tigers\",\n    arkansas: \"Arkansas Razorbacks\",\n    oregon: \"Oregon Ducks\",\n    wisconsin: \"Wisconsin Badgers\",\n    illinois: \"Illinois Fighting Illini\",\n    iowa: \"Iowa Hawkeyes\",\n\n    // NCAAM - Mid-majors & smaller conferences (Horizon, MAAC, C-USA, etc.)\n    siena: \"Siena Saints\",\n    \"st peters\": \"Saint Peter's Peacocks\",\n    \"saint peters\": \"Saint Peter's Peacocks\",\n    \"st peter's\": \"Saint Peter's Peacocks\",\n    \"saint peter's\": \"Saint Peter's Peacocks\",\n    iona: \"Iona Gaels\",\n    merrimack: \"Merrimack Warriors\",\n    \"robert morris\": \"Robert Morris Colonials\",\n    \"rob morris\": \"Robert Morris Colonials\",\n    \"wright state\": \"Wright State Raiders\",\n    \"wright st\": \"Wright State Raiders\",\n    \"cleveland state\": \"Cleveland State Vikings\",\n    \"cleveland st\": \"Cleveland State Vikings\",\n    ipfw: \"Purdue Fort Wayne Mastodons\",\n    \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\",\n    \"n kentucky\": \"Northern Kentucky Norse\",\n    \"northern kentucky\": \"Northern Kentucky Norse\",\n    nku: \"Northern Kentucky Norse\",\n    youngstown: \"Youngstown State Penguins\",\n    \"youngstown state\": \"Youngstown State Penguins\",\n    \"youngstown st\": \"Youngstown State Penguins\",\n    \"wisc green bay\": \"Green Bay Phoenix\",\n    \"green bay\": \"Green Bay Phoenix\",\n    \"wisconsin green bay\": \"Green Bay Phoenix\",\n    \"detroit mercy\": \"Detroit Mercy Titans\",\n    detroit: \"Detroit Mercy Titans\",\n    rice: \"Rice Owls\",\n    utsa: \"UTSA Roadrunners\",\n    tulane: \"Tulane Green Wave\",\n    uab: \"UAB Blazers\",\n    \"louisiana tech\": \"Louisiana Tech Bulldogs\",\n    \"la tech\": \"Louisiana Tech Bulldogs\",\n    \"wisc milwaukee\": \"Milwaukee Panthers\",\n    milwaukee: \"Milwaukee Panthers\",\n    \"wisconsin milwaukee\": \"Milwaukee Panthers\",\n    uwm: \"Milwaukee Panthers\",\n    oakland: \"Oakland Golden Grizzlies\",\n    marist: \"Marist Red Foxes\",\n    \"sacred heart\": \"Sacred Heart Pioneers\",\n    fairfield: \"Fairfield Stags\",\n    quinnipiac: \"Quinnipiac Bobcats\",\n    rider: \"Rider Broncs\",\n    niagara: \"Niagara Purple Eagles\",\n    manhattan: \"Manhattan Jaspers\",\n    canisius: \"Canisius Golden Griffins\",\n    \"mount st marys\": \"Mount St. Mary's Mountaineers\",\n    wagner: \"Wagner Seahawks\",\n    \"youngstown state\": \"Youngstown State Penguins\",\n    \"purdue fort wayne\": \"Purdue Fort Wayne Mastodons\",\n    marshall: \"Marshall Thundering Herd\",\n    wku: \"Western Kentucky Hilltoppers\",\n    \"western kentucky\": \"Western Kentucky Hilltoppers\",\n    fiu: \"FIU Panthers\",\n    \"middle tennessee\": \"Middle Tennessee Blue Raiders\",\n    mtsu: \"Middle Tennessee Blue Raiders\",\n    \"old dominion\": \"Old Dominion Monarchs\",\n    odu: \"Old Dominion Monarchs\",\n    charlotte: \"Charlotte 49ers\",\n    \"east carolina\": \"East Carolina Pirates\",\n    ecu: \"East Carolina Pirates\",\n    \"north texas\": \"North Texas Mean Green\",\n    utep: \"UTEP Miners\",\n    \"sam houston\": \"Sam Houston Bearkats\",\n    \"jacksonville st\": \"Jacksonville State Gamecocks\",\n    \"new mexico st\": \"New Mexico State Aggies\",\n    liberty: \"Liberty Flames\",\n    \"kennesaw state\": \"Kennesaw State Owls\",\n  };\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // TEAM VARIANT REGISTRY \u2014 loaded from JSON (362 NCAAM + 30 NBA teams)\n  // Builds a lookup: lowercase name/location/abbreviation \u2192 canonical name\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  let _variantsLoaded = false;\n\n  async function loadTeamVariants() {\n    if (_variantsLoaded) return;\n    try {\n      const [ncaamRes, nbaRes] = await Promise.all([\n        fetch(\"assets/data/team-variants/ncaam_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n        fetch(\"assets/data/team-variants/nba_team_variants.json\")\n          .then((r) => (r.ok ? r.json() : null))\n          .catch(() => null),\n      ]);\n\n      if (ncaamRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(ncaamRes)) {\n          const canonical = team.name;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          const nick = (team.nickname || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 2 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          if (nick && nick.length > 5 && !TEAM_ALIASES[nick])\n            TEAM_ALIASES[nick] = canonical;\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NCAAM team variants into standardizer`);\n      }\n\n      if (nbaRes) {\n        let count = 0;\n        for (const [abbr, team] of Object.entries(nbaRes)) {\n          const canonical = team.name || team.fullName;\n          const loc = (team.location || \"\").toLowerCase().trim();\n          if (loc && !TEAM_ALIASES[loc]) TEAM_ALIASES[loc] = canonical;\n          if (abbr && !TEAM_ALIASES[abbr.toLowerCase()])\n            TEAM_ALIASES[abbr.toLowerCase()] = canonical;\n          for (const alt of team.abbreviations || []) {\n            const a = alt.toLowerCase().trim();\n            if (a.length > 1 && !TEAM_ALIASES[a]) TEAM_ALIASES[a] = canonical;\n          }\n          count++;\n        }\n        console.log(`\u2705 Loaded ${count} NBA team variants into standardizer`);\n      }\n\n      _variantsLoaded = true;\n    } catch (e) {\n      console.warn(\"[PickStandardizer] Could not load team variants:\", e);\n    }\n  }\n\n  // Kick off loading immediately\n  loadTeamVariants();\n\n  /**\n   * Main entry point - detects format and parses accordingly\n   */\n  function standardizePicks(input, options = {}) {\n    if (options.unitMultiplier) {\n      unitMultiplier = options.unitMultiplier;\n    }\n\n    // Detect bet-history format (timestamps + picks + dollar amounts)\n    if (typeof input === \"string\" && isBetHistoryFormat(input)) {\n      console.log(\"\uD83D\uDCCB Detected bet-history paste format\");\n      return parseBetHistory(input);\n    }\n\n    // Detect if input is HTML\n    if (typeof input === \"string\" && input.includes(\"<\")) {\n      // Check for sportsbook game lines format (div-based panels)\n      if (\n        input.includes('data-panel=\"line\"') ||\n        input.includes(\"data-sport-line\")\n      ) {\n        return parseSportsbookGameLines(input);\n      }\n      // Legacy bet slip table format\n      if (input.includes(\"<table\") || input.includes(\"<tr\")) {\n        return parseHTMLPicks(input);\n      }\n      // Generic HTML with classes (may contain picks)\n      if (input.includes(\"class=\")) {\n        return parseSportsbookGameLines(input);\n      }\n    }\n\n    // Otherwise treat as text\n    return parseTextPicks(input);\n  }\n\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n  // Bet history support (minimal)\n  // The UI references these helpers; keep them defined to avoid runtime\n  // ReferenceErrors even when bet-history parsing isn't used.\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n  function isBetHistoryFormat(text) {\n    if (typeof text !== \"string\") return false;\n    const hasMoney = /\\$[\\d,]+/.test(text);\n    const hasTimestamp =\n      /\\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\b\\s+\\d{1,2},?\\s*\\d{4}/i.test(\n        text,\n      );\n    const hasOddsSignals = /\\bML\\b/i.test(text) || /[+-]\\d{3,4}/.test(text);\n    return hasMoney && (hasTimestamp || hasOddsSignals);\n  }\n\n  function parseBetHistory(text) {\n    if (typeof text !== \"string\") return [];\n\n    // Strip common bet-history timestamp prefixes and $risk/$win lines,\n    // then fall back to the existing flexible text parser.\n    const cleanedLines = text\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter(Boolean)\n      .map((line) =>\n        line\n          .replace(\n            /^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\s+\\d{1,2},?\\s*\\d{4}\\s+\\d{1,2}:\\d{2}\\s*(?:am|pm)?\\s*/i,\n            \"\",\n          )\n          .trim(),\n      )\n      .filter((line) => !/^\\$[\\d,]+/.test(line));\n\n    return parseTextPicks(cleanedLines.join(\"\\n\"));\n  }\n\n  function parseBetHistoryLeg(line, defaultSport = \"NBA\", currentGame = null) {\n    if (typeof line !== \"string\") return null;\n    return parseFlexibleLine(line, defaultSport, currentGame);\n  }\n\n  /**\n   * Parse sportsbook game lines HTML (div-based panels)\n   * Handles structure like: div[data-panel=\"line\"] with nested teams, dates, and betting lines\n   */\n  function parseSportsbookGameLines(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all game panels - try multiple selectors\n    let gamePanels = doc.querySelectorAll('[data-panel=\"line\"]');\n\n    if (gamePanels.length === 0) {\n      gamePanels = doc.querySelectorAll(\n        \".line-panel, .game-panel, [data-sport-line]\",\n      );\n    }\n\n    if (gamePanels.length === 0) {\n      // Try alternate selector for different HTML structures\n      gamePanels = doc.querySelectorAll(\".lines-row, .game-row, .event-row\");\n    }\n\n    console.log(`\uD83D\uDD0D Found ${gamePanels.length} game panels to parse`);\n\n    gamePanels.forEach((panel, idx) => {\n      try {\n        const gamePicks = parseGamePanel(panel);\n        console.log(`  Panel ${idx + 1}: ${gamePicks.length} picks found`);\n        picks.push(...gamePicks);\n      } catch (e) {\n        console.warn(\"Failed to parse game panel:\", e);\n      }\n    });\n\n    // If no picks found from HTML structure, try extracting text and parsing as text\n    if (picks.length === 0) {\n      console.log(\"\uD83D\uDCDD No HTML picks found, falling back to text parsing...\");\n      const textContent =\n        doc.body?.textContent || html.replace(/<[^>]*>/g, \" \");\n      const textPicks = parseTextPicks(textContent);\n      picks.push(...textPicks);\n    }\n\n    console.log(`\uD83D\uDCCA Total parsed: ${picks.length} betting lines`);\n    return picks;\n  }\n\n  /**\n   * Parse a single game panel into multiple betting line picks\n   */\n  function parseGamePanel(panel) {\n    const picks = [];\n\n    // Extract game metadata\n    const gameInfo = extractGameInfo(panel);\n\n    if (!gameInfo.firstTeam && !gameInfo.secondTeam) {\n      // No teams found, skip this panel\n      return picks;\n    }\n\n    // Find all betting line groups\n    const lineGroups = panel.querySelectorAll(\n      \".group, .line-group, [data-group-line]\",\n    );\n\n    lineGroups.forEach((group) => {\n      try {\n        const groupPicks = parseLineGroup(group, gameInfo);\n        picks.push(...groupPicks);\n      } catch (e) {\n        console.warn(\"Failed to parse line group:\", e);\n      }\n    });\n\n    // If no line groups found, try parsing individual lines\n    if (picks.length === 0) {\n      const individualLines = panel.querySelectorAll(\n        '.line-play, .bet-line, [data-field=\"line\"]',\n      );\n      individualLines.forEach((line) => {\n        const pick = parseIndividualLine(line, gameInfo);\n        if (pick) picks.push(pick);\n      });\n    }\n\n    return picks;\n  }\n\n  /**\n   * Extract game information from a panel (teams, date, time, sport)\n   */\n  function extractGameInfo(panel) {\n    const info = {\n      firstTeam: \"\",\n      secondTeam: \"\",\n      date: getTodayDate(),\n      time: \"\",\n      sport: \"NBA\", // Default\n      league: \"\",\n    };\n\n    // Extract team names\n    const firstTeamEl = panel.querySelector(\n      '[data-field=\"first-team\"], .first-team, .away-team, .team-1',\n    );\n    const secondTeamEl = panel.querySelector(\n      '[data-field=\"second-team\"], .second-team, .home-team, .team-2',\n    );\n\n    if (firstTeamEl) info.firstTeam = firstTeamEl.textContent.trim();\n    if (secondTeamEl) info.secondTeam = secondTeamEl.textContent.trim();\n\n    // Extract date and time\n    const dateEl = panel.querySelector(\n      '[data-field=\"min-date\"], .game-date, .date',\n    );\n    const timeEl = panel.querySelector(\n      '[data-field=\"min-time\"], .game-time, .time',\n    );\n\n    if (dateEl) info.date = dateEl.textContent.trim();\n    if (timeEl) info.time = timeEl.textContent.trim();\n\n    // Extract sport/league\n    const leagueEl = panel.querySelector(\n      '[data-field=\"league-name\"], .league, .sport-name',\n    );\n    if (leagueEl) {\n      info.league = leagueEl.textContent.trim();\n      info.sport = detectSportFromLeague(info.league);\n    }\n\n    // Try to detect sport from panel attributes\n    const sportLine = panel.querySelector(\"[data-sport-line]\");\n    if (sportLine) {\n      const sportAttr = sportLine.getAttribute(\"data-sport-line\");\n      if (sportAttr) {\n        info.sport = detectSportFromAttribute(sportAttr);\n      }\n    }\n\n    // Build game string\n    if (info.firstTeam && info.secondTeam) {\n      info.game = `${info.firstTeam} @ ${info.secondTeam}`;\n      info.awayTeam = info.firstTeam;\n      info.homeTeam = info.secondTeam;\n    }\n\n    return info;\n  }\n\n  /**\n   * Parse a betting line group (spread, moneyline, total, etc.)\n   */\n  function parseLineGroup(group, gameInfo) {\n    const picks = [];\n\n    // Determine the bet type from the group\n    const groupType = detectGroupType(group);\n\n    // Find all line plays within this group\n    const linePlays = group.querySelectorAll(\n      \".line-play, .bet-option, [data-type]\",\n    );\n\n    linePlays.forEach((play, index) => {\n      const pick = parseLinePlacement(play, gameInfo, groupType, index);\n      if (pick) picks.push(pick);\n    });\n\n    return picks;\n  }\n\n  /**\n   * Detect the type of betting group (spread, ML, total, team total)\n   */\n  function detectGroupType(group) {\n    const groupClass = group.className || \"\";\n    const dataType = group.getAttribute(\"data-type\") || \"\";\n    const groupText = group.textContent.toLowerCase();\n\n    // Check data-type attribute\n    if (dataType.includes(\"spread\") || dataType.includes(\"ps\")) return \"spread\";\n    if (dataType.includes(\"ml\") || dataType.includes(\"money\"))\n      return \"moneyline\";\n    if (dataType.includes(\"total\") || dataType.includes(\"ou\")) {\n      if (dataType.includes(\"team\") || dataType.includes(\"tt\"))\n        return \"team-total\";\n      return \"total\";\n    }\n\n    // Check class names\n    if (groupClass.includes(\"spread\")) return \"spread\";\n    if (groupClass.includes(\"money\") || groupClass.includes(\"ml\"))\n      return \"moneyline\";\n    if (groupClass.includes(\"team-total\") || groupClass.includes(\"tt\"))\n      return \"team-total\";\n    if (groupClass.includes(\"total\") || groupClass.includes(\"ou\"))\n      return \"total\";\n\n    // Check group position/content\n    if (groupClass.includes(\"group-1\") || groupClass.includes(\"group-0\"))\n      return \"spread\";\n    if (groupClass.includes(\"group-2\")) return \"moneyline\";\n    if (groupClass.includes(\"group-3\")) return \"total\";\n    if (groupClass.includes(\"group-4\") || groupClass.includes(\"group-5\"))\n      return \"team-total\";\n\n    // Infer from text content\n    if (groupText.includes(\"spread\")) return \"spread\";\n    if (groupText.includes(\"money\")) return \"moneyline\";\n    if (groupText.includes(\"over\") || groupText.includes(\"under\"))\n      return \"total\";\n\n    return \"spread\"; // Default\n  }\n\n  /**\n   * Parse an individual line placement into a pick object\n   */\n  function parseLinePlacement(play, gameInfo, betType, index) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    // Extract line value\n    const lineEl = play.querySelector(\n      '[data-field=\"line\"], .line, .spread-value, .total-value',\n    );\n    const priceEl = play.querySelector(\n      '[data-field=\"price\"], .price, .odds, .juice',\n    );\n\n    let line = lineEl ? lineEl.textContent.trim() : \"\";\n    let price = priceEl ? priceEl.textContent.trim() : \"-110\";\n\n    // Normalize line (convert fractions to decimals)\n    line = line.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Determine which team this line is for\n    const teamIndex = determineTeamIndex(play, index);\n\n    switch (betType) {\n      case \"spread\":\n        pick.pickType = \"spread\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = formatLine(line);\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"moneyline\":\n        pick.pickType = \"moneyline\";\n        pick.pickTeam =\n          teamIndex === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.odds = formatOdds(line || price); // ML often shows odds in the line field\n        break;\n\n      case \"total\":\n        pick.pickType = \"total\";\n        pick.pickDirection = teamIndex === 0 ? \"Over\" : \"Under\";\n        pick.pickTeam = pick.pickDirection;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n\n      case \"team-total\":\n        pick.pickType = \"team-total\";\n        pick.pickDirection = determineOverUnder(play, index);\n        // Team totals alternate: Team1 Over, Team1 Under, Team2 Over, Team2 Under\n        const ttTeamIdx = Math.floor(index / 2);\n        pick.pickTeam =\n          ttTeamIdx === 0 ? gameInfo.firstTeam : gameInfo.secondTeam;\n        pick.line = line.replace(/[ou]/gi, \"\").trim();\n        pick.odds = formatOdds(price);\n        break;\n    }\n\n    // Validate pick has required fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    // Skip if no meaningful line/odds\n    if (!pick.line && !pick.odds && pick.pickType !== \"moneyline\") {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse an individual line element (fallback when no groups found)\n   */\n  function parseIndividualLine(lineEl, gameInfo) {\n    const pick = {\n      sport: gameInfo.sport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: gameInfo.date,\n      time: gameInfo.time,\n      game: gameInfo.game,\n      awayTeam: gameInfo.awayTeam,\n      homeTeam: gameInfo.homeTeam,\n    };\n\n    const lineText = lineEl.textContent.trim();\n\n    // Try to parse the line text\n    if (!lineText) return null;\n\n    // Determine bet type and parse accordingly\n    parseLineAndOdds(pick, lineText);\n\n    if (!pick.pickType) return null;\n\n    // Default to first team if we can't determine\n    if (!pick.pickTeam) {\n      pick.pickTeam = gameInfo.firstTeam || \"Unknown\";\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine team index (0 = first/away, 1 = second/home)\n   */\n  function determineTeamIndex(play, defaultIndex) {\n    // Check for data attributes\n    const teamAttr =\n      play.getAttribute(\"data-team\") || play.getAttribute(\"data-index\");\n    if (teamAttr) {\n      return parseInt(teamAttr) || 0;\n    }\n\n    // Check parent for position info\n    const parent = play.parentElement;\n    if (parent) {\n      const siblings = Array.from(parent.children);\n      const position = siblings.indexOf(play);\n      if (position !== -1) {\n        return position % 2; // Alternates between 0 and 1\n      }\n    }\n\n    return defaultIndex % 2;\n  }\n\n  /**\n   * Determine over/under for team totals\n   */\n  function determineOverUnder(play, index) {\n    const text = play.textContent.toLowerCase();\n    if (text.includes(\"over\") || text.includes(\"o \")) return \"Over\";\n    if (text.includes(\"under\") || text.includes(\"u \")) return \"Under\";\n\n    // Alternates: even = Over, odd = Under\n    return index % 2 === 0 ? \"Over\" : \"Under\";\n  }\n\n  /**\n   * Format line value (ensure proper +/- prefix)\n   */\n  function formatLine(line) {\n    if (!line) return \"\";\n    line = line.trim();\n\n    // If it's a total number without prefix (e.g., \"220\"), return as-is\n    if (/^\\d+\\.?\\d*$/.test(line)) return line;\n\n    // Ensure +/- prefix for spreads\n    if (/^[+-]/.test(line)) return line;\n    if (/^\\d/.test(line)) return \"+\" + line;\n\n    return line;\n  }\n\n  /**\n   * Format odds value (ensure proper format)\n   */\n  function formatOdds(odds) {\n    if (!odds) return \"-110\";\n    odds = odds.trim();\n\n    // Remove any currency symbols\n    odds = odds.replace(/[$\u20AC\u00A3]/g, \"\");\n\n    // If just a number, assume negative\n    if (/^\\d+$/.test(odds)) {\n      const num = parseInt(odds);\n      return num >= 100 ? `-${num}` : `+${num}`;\n    }\n\n    // Already has +/-\n    if (/^[+-]\\d+/.test(odds)) return odds;\n\n    return \"-110\"; // Default\n  }\n\n  /**\n   * Detect sport from league name\n   */\n  function detectSportFromLeague(league) {\n    const lower = league.toLowerCase();\n    if (lower.includes(\"nba\") || lower.includes(\"basketball\")) return \"NBA\";\n    if (lower.includes(\"nfl\") || lower.includes(\"football\")) return \"NFL\";\n    if (\n      lower.includes(\"ncaab\") ||\n      lower.includes(\"ncaam\") ||\n      lower.includes(\"college basketball\")\n    )\n      return \"NCAAB\";\n    if (lower.includes(\"ncaaf\") || lower.includes(\"college football\"))\n      return \"NCAAF\";\n    if (lower.includes(\"mlb\") || lower.includes(\"baseball\")) return \"MLB\";\n    if (lower.includes(\"nhl\") || lower.includes(\"hockey\")) return \"NHL\";\n    if (\n      lower.includes(\"soccer\") ||\n      lower.includes(\"mls\") ||\n      lower.includes(\"premier\")\n    )\n      return \"Soccer\";\n    return \"NBA\"; // Default\n  }\n\n  /**\n   * Detect sport from data attribute\n   */\n  function detectSportFromAttribute(attr) {\n    const lower = attr.toLowerCase();\n    if (lower.includes(\"nba\")) return \"NBA\";\n    if (lower.includes(\"nfl\")) return \"NFL\";\n    if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\")) return \"NCAAB\";\n    if (lower.includes(\"ncaaf\")) return \"NCAAF\";\n    if (lower.includes(\"mlb\")) return \"MLB\";\n    if (lower.includes(\"nhl\")) return \"NHL\";\n    return \"NBA\";\n  }\n\n  /**\n   * Parse HTML from sportsbook bet slip tables\n   * Enhanced to handle parlays, round robins, and multi-leg bets\n   */\n  function parseHTMLPicks(html) {\n    const picks = [];\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Find all bet rows\n    const rows = doc.querySelectorAll(\"tr[data-ticket], tr.odd, tr.even\");\n\n    // Track seen tickets to avoid duplicates in round robins\n    const seenLegs = new Set();\n\n    rows.forEach((row) => {\n      try {\n        const ticketId = row.getAttribute(\"data-ticket\") || \"\";\n\n        // Check if this is a parlay/round robin row\n        const parlayLabel = row.querySelector(\".type-magic\");\n        const isParlayRow = parlayLabel !== null;\n\n        if (isParlayRow) {\n          // Parse parlay row - extract all legs\n          const parlayType = parlayLabel.textContent.trim();\n          const legs = row.querySelectorAll(\".wager-simple\");\n\n          // Get the row's total risk/win (shared among all 2-leg combos in round robin)\n          const rowRisk =\n            parseFloat(\n              row.querySelector(\"[data-risk]\")?.getAttribute(\"data-risk\"),\n            ) || 0;\n          const rowWin =\n            parseFloat(\n              row.querySelector(\"[data-win]\")?.getAttribute(\"data-win\"),\n            ) || 0;\n\n          legs.forEach((leg, legIdx) => {\n            const legPick = parseParlayLeg(leg, ticketId, parlayType, legIdx);\n            if (legPick) {\n              // Create unique key for this leg to avoid duplicates\n              const legKey = `${ticketId}_${legPick.pickTeam}_${legPick.line || \"ML\"}_${legPick.segment}`;\n\n              if (!seenLegs.has(legKey)) {\n                seenLegs.add(legKey);\n                // Distribute risk/win proportionally across legs\n                legPick.risk = Math.round(rowRisk / legs.length);\n                legPick.win = Math.round(rowWin / legs.length);\n                legPick.parlayId = ticketId;\n                legPick.parlayType = parlayType;\n                legPick.isParlay = true;\n                picks.push(legPick);\n              }\n            }\n          });\n        } else {\n          // Single bet row\n          const pick = parseHTMLRow(row);\n          if (pick) {\n            pick.isParlay = false;\n            picks.push(pick);\n          }\n        }\n      } catch (e) {\n        console.warn(\"Failed to parse HTML row:\", e);\n      }\n    });\n\n    return picks;\n  }\n\n  /**\n   * Parse a single leg from a parlay/round robin wager\n   */\n  function parseParlayLeg(legEl, ticketId, parlayType, legIndex) {\n    const pick = {\n      sport: \"NCAAB\", // Default for college games\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get team name\n    const teamEl = legEl.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n      // Check if it contains a \"/\" indicating a total bet on a game\n      if (pick.pickTeam.includes(\"/\")) {\n        const parts = pick.pickTeam.split(\"/\").map((s) => s.trim());\n        pick.awayTeam = parts[0];\n        pick.homeTeam = parts[1];\n      }\n    }\n\n    // Get line/odds\n    const lineEl = legEl.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = legEl.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      }\n    }\n\n    // Detect sport from icon or team name\n    const icon = legEl.querySelector(\"img.team-logo\");\n    if (icon) {\n      const src = icon.getAttribute(\"src\") || \"\";\n      if (\n        src.includes(\"NBA\") ||\n        src.includes(\"Spurs\") ||\n        src.includes(\"Knicks\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Check pick team name to infer sport\n    if (pick.pickTeam) {\n      const teamLower = pick.pickTeam.toLowerCase();\n      if (\n        teamLower.includes(\"spurs\") ||\n        teamLower.includes(\"knicks\") ||\n        teamLower.includes(\"lakers\") ||\n        teamLower.includes(\"celtics\")\n      ) {\n        pick.sport = \"NBA\";\n      }\n    }\n\n    // Get date from nearest sibling with date\n    const dateCell = legEl.closest(\"tr\")?.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Validate\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse a single HTML table row from sportsbook\n   */\n  function parseHTMLRow(row) {\n    const pick = {\n      sport: \"NBA\",\n      segment: \"Full Game\",\n      status: \"pending\",\n    };\n\n    // Get accepted date/time\n    const dateCell = row.querySelector(\"td span\");\n    if (dateCell) {\n      const dateText = dateCell.textContent.trim();\n      const parsed = parseDateTimeString(dateText);\n      if (parsed) {\n        pick.date = parsed.date;\n        pick.time = parsed.time;\n      }\n    }\n\n    // Get team name\n    const teamEl = row.querySelector(\".choosen\");\n    if (teamEl) {\n      pick.pickTeam = teamEl.textContent.trim();\n    }\n\n    // Get line/odds - handle both spread and moneyline\n    const lineEl = row.querySelector(\".line-selected\");\n    if (lineEl) {\n      const lineText = lineEl.textContent.trim();\n      parseLineAndOdds(pick, lineText);\n    }\n\n    // Get period/segment\n    const periodEl = row.querySelector(\".period-description-s\");\n    if (periodEl) {\n      const periodText = periodEl.textContent.trim().toLowerCase();\n      if (periodText.includes(\"1st half\") || periodText.includes(\"1h\")) {\n        pick.segment = \"1st Half\";\n      } else if (periodText.includes(\"2nd half\") || periodText.includes(\"2h\")) {\n        pick.segment = \"2nd Half\";\n      } else if (\n        periodText.includes(\"1st quarter\") ||\n        periodText.includes(\"q1\") ||\n        periodText.includes(\"1q\")\n      ) {\n        pick.segment = \"1st Quarter\";\n      }\n    }\n\n    // Get risk amount\n    const riskEl = row.querySelector(\"[data-risk]\");\n    if (riskEl) {\n      pick.risk = parseFloat(riskEl.getAttribute(\"data-risk\")) || 0;\n    } else {\n      const riskText = row.querySelector(\".risk-col span\");\n      if (riskText) {\n        pick.risk = parseCurrency(riskText.textContent);\n      }\n    }\n\n    // Get win amount\n    const winEl = row.querySelector(\"[data-win]\");\n    if (winEl) {\n      pick.win = parseFloat(winEl.getAttribute(\"data-win\")) || 0;\n    } else {\n      const winText = row.querySelector(\".win-col span\");\n      if (winText) {\n        pick.win = parseCurrency(winText.textContent);\n      }\n    }\n\n    // Get game info from hidden details\n    const gameEl = row.querySelector(\".d-r\");\n    if (gameEl) {\n      const gameText = gameEl.textContent;\n      if (\n        gameText.includes(\"/\") ||\n        gameText.includes(\" vs \") ||\n        gameText.includes(\" @ \")\n      ) {\n        pick.game = gameText.trim();\n        const teams = parseGameString(gameText);\n        if (teams) {\n          pick.awayTeam = teams.away;\n          pick.homeTeam = teams.home;\n        }\n      }\n    }\n\n    // Detect sport from selection info\n    const selectionEl = row.querySelector(\n      \".selection-S .d-r, .selection-M .d-r\",\n    );\n    if (selectionEl) {\n      const selText = selectionEl.textContent.toLowerCase();\n      if (selText.includes(\"nba\")) pick.sport = \"NBA\";\n      else if (selText.includes(\"nfl\")) pick.sport = \"NFL\";\n      else if (selText.includes(\"ncaab\") || selText.includes(\"ncaam\"))\n        pick.sport = \"NCAAB\";\n      else if (selText.includes(\"ncaaf\")) pick.sport = \"NCAAF\";\n      else if (selText.includes(\"mlb\")) pick.sport = \"MLB\";\n      else if (selText.includes(\"nhl\")) pick.sport = \"NHL\";\n    }\n\n    // Validate minimum fields\n    if (!pick.pickTeam || !pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Parse line and odds from text like \"+1\u00BD -115\" or \"ML +115\"\n   */\n  function parseLineAndOdds(pick, text) {\n    // Convert fractions to decimals\n    text = text.replace(/\u00BD/g, \".5\").replace(/\u00BC/g, \".25\").replace(/\u00BE/g, \".75\");\n\n    // Check for moneyline first\n    if (/\\bML\\b/i.test(text)) {\n      pick.pickType = \"moneyline\";\n      // Extract odds after ML\n      const oddsMatch = text.match(/ML\\s*([+-]\\d+)/i);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Check for total (over/under)\n    if (/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i.test(text)) {\n      const match = text.match(/\\b(over|under|o|u)\\s*(\\d+\\.?\\d*)/i);\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(match[1]) ? \"Over\" : \"Under\";\n      pick.line = match[2];\n      // Extract odds\n      const oddsMatch = text.match(/([+-]\\d{2,4})(?:\\s|$)/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n      return;\n    }\n\n    // Otherwise it's a spread\n    // Pattern: \"+2.5 -110\" or \"-3 +105\"\n    const spreadMatch = text.match(/([+-]?\\d+\\.?\\d*)\\s+([+-]\\d{2,4})/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.line =\n        spreadMatch[1].startsWith(\"+\") || spreadMatch[1].startsWith(\"-\")\n          ? spreadMatch[1]\n          : \"+\" + spreadMatch[1];\n      pick.odds = spreadMatch[2];\n      return;\n    }\n\n    // Just a line without odds\n    const lineOnly = text.match(/([+-]?\\d+\\.?\\d*)/);\n    if (lineOnly) {\n      pick.pickType = \"spread\";\n      pick.line =\n        lineOnly[1].startsWith(\"+\") || lineOnly[1].startsWith(\"-\")\n          ? lineOnly[1]\n          : \"+\" + lineOnly[1];\n    }\n  }\n\n  /**\n   * Parse text-based picks - SMART INTUITIVE PARSER\n   * Handles any reasonable format:\n   *   \"POR +7\"\n   *   \"bills fg -3; bills over 44.5\"\n   *   \"bills ml 1h; bills -2.5 1h\"\n   *   \"bills o10 tto 1h\"\n   *   \"BOS @ POR under 117.5\"\n   *   \"1H POR +3.5\"\n   *   \"under 220\"\n   */\n  function parseTextPicks(text) {\n    const picks = [];\n\n    // Split on newlines, semicolons, and periods (but not decimal points)\n    const rawLines = text\n      .replace(/;/g, \"\\n\")\n      .replace(/\\.\\s+/g, \"\\n\") // Period followed by space = new line\n      .split(\"\\n\")\n      .map((l) => l.trim())\n      .filter((l) => l.length > 0);\n\n    let currentSport = \"NBA\";\n    let currentGame = null;\n\n    for (const line of rawLines) {\n      // ===== PIPE-DELIMITED FORMAT =====\n      // Format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n      // Example: \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n      if (line.includes(\"|\")) {\n        const pipePick = parsePipeDelimitedLine(line);\n        if (pipePick) {\n          // Ensure sport is uppercase\n          if (pipePick.sport) pipePick.sport = pipePick.sport.toUpperCase();\n          picks.push(pipePick);\n          continue;\n        }\n      }\n\n      // Check for sport/game context\n      const contextInfo = extractContext(line);\n      if (contextInfo.sport) currentSport = contextInfo.sport.toUpperCase();\n      if (contextInfo.game) currentGame = contextInfo.game;\n\n      // Skip if it's just a context line (no bet info)\n      if (contextInfo.isContextOnly) continue;\n\n      const pick = parseFlexibleLine(line, currentSport, currentGame);\n      if (pick) {\n        picks.push(pick);\n      }\n    }\n\n    // Normalize all picks for consistency\n    const normalizedPicks = picks.map((pick) => ({\n      ...pick,\n      sport: (pick.sport || \"NBA\").toUpperCase(),\n      league: (pick.league || pick.sport || \"NBA\").toUpperCase(),\n      pickDirection: pick.pickDirection\n        ? pick.pickDirection.replace(/^UNDE\\b/i, \"UNDER\").toUpperCase()\n        : \"\",\n      pickType: (pick.pickType || \"spread\").toLowerCase(),\n    }));\n\n    console.log(`\uD83D\uDCCA Parsed ${normalizedPicks.length} picks from text input`);\n    return normalizedPicks;\n  }\n\n  /**\n   * Extract context (sport, game) from a line\n   */\n  function extractContext(line) {\n    const lower = line.toLowerCase();\n    const result = { sport: null, game: null, isContextOnly: false };\n\n    // Detect sport - ALWAYS uppercase\n    if (/\\bnfl\\b/i.test(lower)) result.sport = \"NFL\";\n    else if (/\\bnba\\b/i.test(lower)) result.sport = \"NBA\";\n    else if (/\\bncaab\\b|\\bncaam\\b|\\bcbb\\b/i.test(lower)) result.sport = \"NCAAB\";\n    else if (/\\bncaaf\\b|\\bcfb\\b/i.test(lower)) result.sport = \"NCAAF\";\n    else if (/\\bmlb\\b/i.test(lower)) result.sport = \"MLB\";\n    else if (/\\bnhl\\b/i.test(lower)) result.sport = \"NHL\";\n\n    // Detect game matchup (eagles at bills, bos @ por, etc.)\n    const gameMatch = line.match(\n      /\\b([A-Za-z]+)\\s*(?:at|@|vs\\.?|versus)\\s*([A-Za-z]+)\\b/i,\n    );\n    if (gameMatch) {\n      result.game = {\n        away: resolveTeamName(gameMatch[1]),\n        home: resolveTeamName(gameMatch[2]),\n      };\n    }\n\n    // Check if this line is ONLY context (no numbers = no bet)\n    if (!line.match(/\\d/) && (result.sport || result.game)) {\n      result.isContextOnly = true;\n    }\n\n    return result;\n  }\n\n  /**\n   * Smart flexible parser - handles any format intuitively\n   */\n  function parseFlexibleLine(line, defaultSport, currentGame) {\n    // Normalize default sport to uppercase\n    const normalizedSport = (defaultSport || \"NBA\").toUpperCase();\n    const pick = {\n      sport: normalizedSport,\n      league: normalizedSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n    };\n\n    // Apply game context if available\n    if (currentGame) {\n      pick.awayTeam = currentGame.away;\n      pick.homeTeam = currentGame.home;\n      pick.game = `${currentGame.away} @ ${currentGame.home}`;\n    }\n\n    // Normalize: remove extra spaces, handle slashes as spaces\n    let normalized = line\n      .replace(/\\s*\\/\\s*/g, \" \")\n      .replace(/\\s+/g, \" \")\n      .trim();\n    const originalLine = normalized;\n\n    // ===== STEP 1: Extract segment (1H, 2H, FG, 1st half, etc.) =====\n    const segmentPatterns = [\n      { pattern: /\\b(1st\\s*half|first\\s*half|1h)\\b/i, segment: \"1st Half\" },\n      { pattern: /\\b(2nd\\s*half|second\\s*half|2h)\\b/i, segment: \"2nd Half\" },\n      {\n        pattern: /\\b(1st\\s*quarter|first\\s*quarter|1q)\\b/i,\n        segment: \"1st Quarter\",\n      },\n      { pattern: /\\b(full\\s*game|fg)\\b/i, segment: \"Full Game\" },\n    ];\n\n    for (const { pattern, segment } of segmentPatterns) {\n      if (pattern.test(normalized)) {\n        pick.segment = segment;\n        normalized = normalized.replace(pattern, \" \").trim();\n        break;\n      }\n    }\n\n    // ===== STEP 2: Check for MONEYLINE (ml) =====\n    if (/\\bml\\b/i.test(normalized)) {\n      pick.pickType = \"moneyline\";\n      normalized = normalized.replace(/\\bml\\b/gi, \" \").trim();\n\n      // Find the team\n      const teamKeys = Object.keys(TEAM_ALIASES);\n      for (const teamKey of teamKeys) {\n        const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n        if (teamRegex.test(normalized)) {\n          pick.pickTeam = resolveTeamName(teamKey);\n          break;\n        }\n      }\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      if (pick.pickTeam) {\n        console.log(\n          `\u2705 Parsed ML: \"${originalLine}\" -> ${pick.pickTeam} ML (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 3: Check for TEAM TOTAL (tto/ttu or \"team o/u\") =====\n    const teamTotalMatch =\n      normalized.match(/\\b([A-Za-z]+)\\s*(?:tto|ttu|o|u)\\s*([\\d.]+)/i) ||\n      normalized.match(/\\b([A-Za-z]+)\\s+(?:over|under)\\s*([\\d.]+)/i);\n    if (teamTotalMatch) {\n      const teamPart = teamTotalMatch[1].toLowerCase();\n      const linePart = teamTotalMatch[2];\n      const fullMatch = teamTotalMatch[0].toLowerCase();\n\n      // Check if it's actually a team (not \"over\" or \"under\")\n      if (\n        teamPart !== \"over\" &&\n        teamPart !== \"under\" &&\n        teamPart !== \"o\" &&\n        teamPart !== \"u\"\n      ) {\n        pick.pickType = \"team-total\";\n        pick.pickTeam = resolveTeamName(teamPart);\n        pick.line = linePart;\n\n        // Determine over/under\n        if (/tto|over|\\bo\\d/i.test(fullMatch)) {\n          pick.pickDirection = \"Over\";\n        } else {\n          pick.pickDirection = \"Under\";\n        }\n\n        console.log(\n          `\u2705 Parsed team total: \"${originalLine}\" -> ${pick.pickTeam} ${pick.pickDirection} ${pick.line} (${pick.segment})`,\n        );\n        return pick;\n      }\n    }\n\n    // ===== STEP 4: Detect GAME TOTAL (over/under without team prefix) =====\n    const gameTotalMatch = normalized.match(/\\b(over|under|o|u)\\s*([\\d.]+)/i);\n    if (gameTotalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(gameTotalMatch[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = gameTotalMatch[2];\n\n      // Extract odds if present\n      const oddsMatch = normalized.match(/([+-]\\d{3,4})/);\n      if (oddsMatch) pick.odds = oddsMatch[1];\n\n      console.log(\n        `\u2705 Parsed game total: \"${originalLine}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Remove remaining keywords\n    normalized = normalized\n      .replace(/\\b(spread|total|moneyline)\\b/gi, \" \")\n      .trim();\n\n    // ===== STEP 5: Find team and spread =====\n    const teamKeys = Object.keys(TEAM_ALIASES);\n    let foundTeam = null;\n    let foundTeamPos = -1;\n\n    for (const teamKey of teamKeys) {\n      const teamRegex = new RegExp(`\\\\b${teamKey}\\\\b`, \"i\");\n      const match = normalized.match(teamRegex);\n      if (match) {\n        const pos = match.index;\n        if (foundTeamPos === -1 || pos < foundTeamPos) {\n          foundTeam = teamKey;\n          foundTeamPos = pos;\n        }\n      }\n    }\n\n    if (!foundTeam) {\n      // Try to find any capitalized word that might be a team\n      const capsMatch = normalized.match(/\\b([A-Z]{2,4})\\b/);\n      if (capsMatch) {\n        foundTeam = capsMatch[1].toLowerCase();\n      }\n    }\n\n    if (!foundTeam) {\n      console.log(`\u26A0\uFE0F No team found in: \"${originalLine}\"`);\n      return null;\n    }\n\n    pick.pickTeam = resolveTeamName(foundTeam);\n\n    // ===== STEP 4: Find the line (spread) =====\n    // Look for +/- number patterns\n    const spreadPatterns = [\n      /([+-]?\\d+\\.?\\d*)\\s*([+-]\\d{3,4})?/, // \"+7.0 -110\" or \"+7\" or \"7.0\"\n    ];\n\n    // Find all numbers in the line\n    const numbers = normalized.match(/[+-]?\\d+\\.?\\d*/g) || [];\n\n    for (const num of numbers) {\n      const numVal = parseFloat(num);\n\n      // Skip if it looks like odds (100+ with sign)\n      if (\n        Math.abs(numVal) >= 100 &&\n        (num.startsWith(\"+\") || num.startsWith(\"-\"))\n      ) {\n        // This is likely odds, not a spread\n        pick.odds = num;\n        continue;\n      }\n\n      // This is likely a spread\n      if (!pick.line) {\n        pick.pickType = \"spread\";\n        pick.line =\n          num.startsWith(\"+\") || num.startsWith(\"-\") ? num : `+${num}`;\n      }\n    }\n\n    // If no spread found but we have a team, might be ML\n    if (!pick.line && pick.pickTeam) {\n      // Check if there's just odds (moneyline)\n      const mlOdds = normalized.match(/([+-]\\d{3,4})/);\n      if (mlOdds) {\n        pick.pickType = \"moneyline\";\n        pick.odds = mlOdds[1];\n      } else {\n        // Just a team name with no line - invalid\n        console.log(`\u26A0\uFE0F No line/odds found for team in: \"${originalLine}\"`);\n        return null;\n      }\n    }\n\n    // ===== STEP 5: Try to find game context (opponent) =====\n    const vsMatch = normalized.match(/([A-Za-z]+)\\s*[@vs]+\\s*([A-Za-z]+)/i);\n    if (vsMatch) {\n      pick.awayTeam = resolveTeamName(vsMatch[1]);\n      pick.homeTeam = resolveTeamName(vsMatch[2]);\n      pick.game = `${pick.awayTeam} @ ${pick.homeTeam}`;\n    }\n\n    console.log(\n      `\u2705 Parsed: \"${originalLine}\" -> ${pick.pickTeam} ${pick.line || pick.odds} (${pick.segment})`,\n    );\n    return pick;\n  }\n\n  /**\n   * Parse pipe-delimited format: \"Team1 vs Team2 | Full Game | Pick Line (Odds)\"\n   * Examples:\n   *   \"Memphis vs FAU | Full Game | FAU -2 (-110)\"\n   *   \"Siena vs Mount St Marys | Full Game | Siena -3 (-110)\"\n   *   \"UAB vs East Carolina | Full Game | UAB -7.5 (-110)\"\n   *   \"IPFW vs Robert Morris | Full Game | IPFW +4 (-110)\"\n   *   \"Northern Kentucky vs Wisc Green Bay | Full Game | N Kentucky -4 (-110)\"\n   */\n  function parsePipeDelimitedLine(line) {\n    const parts = line.split(\"|\").map((p) => p.trim());\n\n    if (parts.length < 3) return null;\n\n    const [matchupPart, segmentPart, pickPart] = parts;\n\n    // Parse matchup (Team1 vs Team2)\n    const matchupMatch = matchupPart.match(\n      /^(.+?)\\s*(?:vs\\.?|@|versus)\\s*(.+)$/i,\n    );\n    if (!matchupMatch) return null;\n\n    const awayTeam = matchupMatch[1].trim();\n    const homeTeam = matchupMatch[2].trim();\n\n    // Parse segment\n    let segment = \"Full Game\";\n    const segLower = segmentPart.toLowerCase();\n    if (segLower.includes(\"1st half\") || segLower.includes(\"1h\")) {\n      segment = \"1st Half\";\n    } else if (segLower.includes(\"2nd half\") || segLower.includes(\"2h\")) {\n      segment = \"2nd Half\";\n    } else if (segLower.includes(\"1st quarter\") || segLower.includes(\"1q\")) {\n      segment = \"1st Quarter\";\n    }\n\n    // Parse pick part: \"FAU -2 (-110)\" or \"Over 150 (-110)\" or \"FAU ML (-110)\"\n    const pick = {\n      sport: \"NCAAB\", // Default for college basketball\n      segment: segment,\n      status: \"pending\",\n      date: getTodayDate(),\n      gameDate: new Date().toLocaleDateString(\"en-US\", {\n        weekday: \"short\",\n        month: \"short\",\n        day: \"numeric\",\n      }),\n      gameTime: \"TBD\",\n      awayTeam: awayTeam,\n      homeTeam: homeTeam,\n      game: `${awayTeam} @ ${homeTeam}`,\n    };\n\n    // Extract odds (in parentheses at end)\n    const oddsMatch = pickPart.match(/\\(([+-]?\\d+)\\)\\s*$/);\n    if (oddsMatch) {\n      pick.odds =\n        oddsMatch[1].startsWith(\"+\") || oddsMatch[1].startsWith(\"-\")\n          ? oddsMatch[1]\n          : `-${oddsMatch[1]}`;\n    }\n\n    // Remove odds from pick part for further parsing\n    let pickText = pickPart.replace(/\\s*\\([+-]?\\d+\\)\\s*$/, \"\").trim();\n\n    // Check for game total (Over/Under)\n    const totalMatch = pickText.match(/^(over|under|o|u)\\s+(\\d+\\.?\\d*)/i);\n    if (totalMatch) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /^(over|o)$/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n      pick.pickTeam = pick.pickDirection;\n      pick.line = totalMatch[2];\n      console.log(\n        `\u2705 Parsed pipe format (total): \"${line}\" -> ${pick.pickDirection} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Check for moneyline (Team ML)\n    const mlMatch = pickText.match(/^(.+?)\\s+ml$/i);\n    if (mlMatch) {\n      pick.pickType = \"moneyline\";\n      pick.pickTeam = mlMatch[1].trim();\n      console.log(\n        `\u2705 Parsed pipe format (ML): \"${line}\" -> ${pick.pickTeam} ML`,\n      );\n      return pick;\n    }\n\n    // Default: Spread (Team +/- Line)\n    const spreadMatch = pickText.match(/^(.+?)\\s+([+-]?\\d+\\.?\\d*)$/);\n    if (spreadMatch) {\n      pick.pickType = \"spread\";\n      pick.pickTeam = spreadMatch[1].trim();\n      const lineVal = spreadMatch[2];\n      pick.line =\n        lineVal.startsWith(\"+\") || lineVal.startsWith(\"-\")\n          ? lineVal\n          : `+${lineVal}`;\n      console.log(\n        `\u2705 Parsed pipe format (spread): \"${line}\" -> ${pick.pickTeam} ${pick.line}`,\n      );\n      return pick;\n    }\n\n    // Couldn't parse the pick part\n    console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: \"${pickPart}\"`);\n    return null;\n  }\n\n  /**\n   * Parse a single line of text picks (legacy function - kept for fallback)\n   */\n  function parseTextLine(line, defaultSport, defaultGame) {\n    const pick = {\n      sport: defaultSport,\n      segment: \"Full Game\",\n      status: \"pending\",\n      date: getTodayDate(),\n    };\n\n    // Check for segment markers first\n    if (/\\b1h\\b/i.test(line)) {\n      pick.segment = \"1st Half\";\n      line = line.replace(/\\b1h\\b/i, \"\").trim();\n    } else if (/\\b2h\\b/i.test(line)) {\n      pick.segment = \"2nd Half\";\n      line = line.replace(/\\b2h\\b/i, \"\").trim();\n    } else if (/\\b1q\\b/i.test(line)) {\n      pick.segment = \"1st Quarter\";\n      line = line.replace(/\\b1q\\b/i, \"\").trim();\n    }\n\n    // Extract risk amount (at end: $50, $100, etc.)\n    const riskMatch = line.match(/\\$(\\d+(?:\\.\\d+)?)\\s*$/);\n    if (riskMatch) {\n      pick.risk = parseFloat(riskMatch[1]) * unitMultiplier;\n      line = line.replace(/\\$\\d+(?:\\.\\d+)?\\s*$/, \"\").trim();\n    }\n\n    // Now parse the bet itself\n    // Pattern 1: \"Team SPREAD ODDS\" (e.g., \"Spurs 2.5 -105\")\n    // Pattern 2: \"Team ODDS\" (e.g., \"Spurs +118\" = ML)\n    // Pattern 3: \"Team ML ODDS\" (e.g., \"Spurs ML +118\")\n    // Pattern 4: \"Over/Under LINE ODDS\" (e.g., \"Over 220 -110\")\n\n    // FIRST: Check if line starts with Over/Under (game total without team context)\n    // This must be checked BEFORE team extraction to avoid \"Over\" being captured as a team\n    const standaloneTotal = line.match(\n      /^(over|under|o|u)\\s+(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n    );\n    if (standaloneTotal) {\n      pick.pickType = \"total\";\n      pick.pickDirection = /over|o/i.test(standaloneTotal[1])\n        ? \"Over\"\n        : \"Under\";\n      pick.pickTeam = pick.pickDirection; // Set pickTeam to direction for display\n      pick.line = standaloneTotal[2];\n      if (standaloneTotal[3]) {\n        pick.odds = standaloneTotal[3];\n      }\n\n      // Calculate win and return early\n      if (pick.risk && pick.odds) {\n        pick.win = calculateWin(pick.risk, pick.odds);\n      }\n      if (defaultGame) {\n        pick.game = defaultGame;\n      }\n      return pick;\n    }\n\n    // Find the team name (at the start)\n    const teamMatch = line.match(\n      /^([A-Za-z][A-Za-z\\s]*?)(?=\\s+[\\d+-]|\\s+ML|\\s+over|\\s+under|\\s*$)/i,\n    );\n\n    if (!teamMatch) {\n      return null;\n    }\n\n    const teamName = teamMatch[1].trim();\n    pick.pickTeam = resolveTeamName(teamName);\n\n    // Remove team name from line\n    let remainder = line.substring(teamMatch[0].length).trim();\n\n    // Check for explicit ML\n    if (/^ML\\s*/i.test(remainder)) {\n      pick.pickType = \"moneyline\";\n      remainder = remainder.replace(/^ML\\s*/i, \"\").trim();\n\n      // Get odds\n      const oddsMatch = remainder.match(/^([+-]\\d{2,4})/);\n      if (oddsMatch) {\n        pick.odds = oddsMatch[1];\n      }\n    }\n    // Check for team total (e.g., \"Spurs over 110 -115\")\n    else if (/^(over|under|o|u)\\s*/i.test(remainder)) {\n      pick.pickType = \"team-total\";\n      const totalMatch = remainder.match(\n        /^(over|under|o|u)\\s*(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/i,\n      );\n      if (totalMatch) {\n        pick.pickDirection = /over|o/i.test(totalMatch[1]) ? \"Over\" : \"Under\";\n        pick.line = totalMatch[2];\n        if (totalMatch[3]) {\n          pick.odds = totalMatch[3];\n        }\n      }\n    }\n    // Check for spread with odds: \"2.5 -105\" or moneyline odds only: \"+118\"\n    else if (/^\\d/.test(remainder) || /^[+-]\\d/.test(remainder)) {\n      // Determine if it's:\n      // - Spread with odds: \"2.5 -105\" or \"+3.5 -110\"\n      // - Spread only: \"2.5\" or \"+3\"\n      // - Moneyline (odds only): \"+118\" or \"-150\"\n\n      // Key insight: ML odds are typically 100+ (3+ digits after the sign)\n      // Spreads are typically under 100 and often have decimals\n\n      // Pattern: Check if it starts with +/- and has 3+ digits (100+) = likely ML odds\n      const mlOddsMatch = remainder.match(/^([+-])(\\d+)(?:\\s|$)/);\n\n      if (mlOddsMatch) {\n        const sign = mlOddsMatch[1];\n        const number = mlOddsMatch[2];\n        const numValue = parseInt(number);\n\n        // If number is 100 or higher, it's almost certainly ML odds\n        // If it's a single or double digit number, it's a spread\n        if (numValue >= 100) {\n          pick.pickType = \"moneyline\";\n          pick.odds = sign + number;\n        } else {\n          // It's a spread (like +3 or -7)\n          pick.pickType = \"spread\";\n          pick.line = sign + number;\n          // Check for odds after the spread\n          const afterSpread = remainder.substring(mlOddsMatch[0].length).trim();\n          const oddsAfter = afterSpread.match(/^([+-]\\d{2,4})/);\n          if (oddsAfter) {\n            pick.odds = oddsAfter[1];\n          }\n        }\n      } else {\n        // Doesn't start with +/-, so it's a spread starting with just a number (like \"2.5 -105\")\n        pick.pickType = \"spread\";\n        const spreadMatch = remainder.match(/^(\\d+\\.?\\d*)\\s*([+-]\\d{2,4})?/);\n        if (spreadMatch) {\n          pick.line = \"+\" + spreadMatch[1]; // Assume positive spread\n          if (spreadMatch[2]) {\n            pick.odds = spreadMatch[2];\n          }\n        }\n      }\n    }\n\n    // Calculate win amount if we have risk and odds\n    if (pick.risk && pick.odds) {\n      pick.win = calculateWin(pick.risk, pick.odds);\n    }\n\n    // Set game context if available\n    if (defaultGame) {\n      pick.game = defaultGame;\n    }\n\n    // Validate\n    if (!pick.pickType) {\n      return null;\n    }\n\n    return pick;\n  }\n\n  /**\n   * Determine if a line should be skipped\n   */\n  function shouldSkipLine(line) {\n    const lower = line.toLowerCase();\n\n    // Skip empty or very short lines\n    if (line.length < 3) return true;\n\n    // Skip common header/context phrases\n    const skipPatterns = [\n      /^tonight['']?s?\\s+game/i,\n      /^today['']?s?\\s+game/i,\n      /^correction/i,\n      /^note:/i,\n      /^fyi/i,\n      /^\\d+k\\s+is\\s+the\\s+unit/i,\n      /^unit/i,\n      /^\\^+/, // Lines starting with ^\n    ];\n\n    return skipPatterns.some((p) => p.test(line));\n  }\n\n  /**\n   * Extract context info from header lines\n   */\n  function updateContextFromLine(line, callback) {\n    const lower = line.toLowerCase();\n    const ctx = {};\n\n    // Detect sport\n    if (lower.includes(\"nba\")) ctx.sport = \"NBA\";\n    else if (lower.includes(\"nfl\")) ctx.sport = \"NFL\";\n    else if (lower.includes(\"ncaab\") || lower.includes(\"ncaam\"))\n      ctx.sport = \"NCAAB\";\n    else if (lower.includes(\"ncaaf\")) ctx.sport = \"NCAAF\";\n    else if (lower.includes(\"mlb\")) ctx.sport = \"MLB\";\n    else if (lower.includes(\"nhl\")) ctx.sport = \"NHL\";\n\n    // Detect game matchup\n    const gameMatch = line.match(\n      /([A-Za-z\\s]+)\\s*(?:vs\\.?|@|\\/)\\s*([A-Za-z\\s]+)/i,\n    );\n    if (gameMatch) {\n      ctx.game = `${gameMatch[1].trim()} @ ${gameMatch[2].trim()}`;\n    }\n\n    callback(ctx);\n  }\n\n  /**\n   * Resolve team alias to full name\n   */\n  function resolveTeamName(name) {\n    const lower = name.toLowerCase().trim();\n    return TEAM_ALIASES[lower] || name;\n  }\n\n  /**\n   * Parse currency string to number\n   */\n  function parseCurrency(text) {\n    if (!text) return 0;\n    const cleaned = text.replace(/[$,]/g, \"\");\n    return parseFloat(cleaned) || 0;\n  }\n\n  /**\n   * Parse date/time string\n   */\n  function parseDateTimeString(text) {\n    // Format: \"Dec 16, 2025 3:53 PM\"\n    const match = text.match(/(\\w+\\s+\\d+,?\\s+\\d{4})\\s+(\\d+:\\d+\\s*[AP]M)/i);\n    if (match) {\n      return {\n        date: match[1].trim(),\n        time: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Parse game string to away/home teams\n   */\n  function parseGameString(text) {\n    const match = text.match(/(.+?)\\s*(?:\\/|vs\\.?|@)\\s*(.+)/i);\n    if (match) {\n      return {\n        away: match[1].trim(),\n        home: match[2].trim(),\n      };\n    }\n    return null;\n  }\n\n  /**\n   * Calculate win amount from risk and odds\n   */\n  function calculateWin(risk, odds) {\n    const oddsNum = parseInt(odds);\n    if (oddsNum > 0) {\n      // Positive odds: win = risk * (odds/100)\n      return risk * (oddsNum / 100);\n    } else {\n      // Negative odds: win = risk / (|odds|/100)\n      return risk / (Math.abs(oddsNum) / 100);\n    }\n  }\n\n  /**\n   * Get today's date in MM/DD/YYYY format\n   */\n  function getTodayDate() {\n    const now = new Date();\n    return `${now.getMonth() + 1}/${now.getDate()}/${now.getFullYear()}`;\n  }\n\n  /**\n   * Convert picks to display format for the dashboard\n   */\n  function picksToDisplayFormat(picks) {\n    return picks.map((pick) => {\n      // Build selection string\n      let selection = \"\";\n      if (pick.pickType === \"spread\") {\n        selection = `${pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"moneyline\") {\n        selection = `${pick.pickTeam} ML`;\n      } else if (pick.pickType === \"total\") {\n        selection = `${pick.pickDirection || pick.pickTeam} ${pick.line}`;\n      } else if (pick.pickType === \"team-total\") {\n        selection = `${pick.pickTeam} ${pick.pickDirection} ${pick.line}`;\n      }\n\n      if (pick.odds) {\n        selection += ` (${pick.odds})`;\n      }\n\n      return {\n        ...pick,\n        selection,\n        displaySegment: pick.segment !== \"Full Game\" ? pick.segment : \"\",\n        displayRisk: pick.risk ? `$${pick.risk.toLocaleString()}` : \"\",\n        displayWin: pick.win ? `$${Math.round(pick.win).toLocaleString()}` : \"\",\n      };\n    });\n  }\n\n  /**\n   * Convert picks to CSV format\n   */\n  function picksToCSV(picks) {\n    const headers = [\n      \"Date\",\n      \"Time\",\n      \"Sport\",\n      \"Game\",\n      \"Team\",\n      \"Pick Type\",\n      \"Line\",\n      \"Odds\",\n      \"Segment\",\n      \"Risk\",\n      \"To Win\",\n      \"Status\",\n    ];\n    const rows = picks.map((pick) => [\n      pick.date || \"\",\n      pick.time || \"\",\n      pick.sport || \"\",\n      pick.game || \"\",\n      pick.pickTeam || \"\",\n      pick.pickType || \"\",\n      pick.line || \"\",\n      pick.odds || \"\",\n      pick.segment || \"\",\n      pick.risk || \"\",\n      pick.win ? Math.round(pick.win) : \"\",\n      pick.status || \"pending\",\n    ]);\n\n    return [headers, ...rows]\n      .map((row) => row.map((cell) => `\"${cell}\"`).join(\",\"))\n      .join(\"\\n\");\n  }\n\n  /**\n   * Set the unit multiplier for risk calculations\n   */\n  function setUnitMultiplier(multiplier) {\n    unitMultiplier = multiplier;\n  }\n\n  // Export functions\n  window.PickStandardizer = {\n    standardize: standardizePicks,\n    parseHTML: parseHTMLPicks,\n    parseGameLines: parseSportsbookGameLines,\n    parseText: parseTextPicks,\n    parseBetHistory: parseBetHistory,\n    loadTeamVariants: loadTeamVariants,\n    toDisplayFormat: picksToDisplayFormat,\n    toCSV: picksToCSV,\n    setUnitMultiplier: setUnitMultiplier,\n    resolveTeamName: resolveTeamName,\n\n    // For testing\n    _parseTextLine: parseTextLine,\n    _parseLineAndOdds: parseLineAndOdds,\n    _parseGamePanel: parseGamePanel,\n    _isBetHistoryFormat: isBetHistoryFormat,\n    _parseBetHistoryLeg: parseBetHistoryLeg,\n  };\n\n  console.log(\n    \"\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser\",\n  );\n})();\n\n\n/* === assets/js/features/weekly-lineup-controller.js === */\n/**\n * Weekly Lineup Controller\n * - Fetches model picks via UnifiedPicksFetcher\n * - Renders picks into weekly-lineup table\n * - Auto-saves fetched picks into Cosmos (locked=false)\n * - Track button toggles locked/unlocked (Dashboard shows locked picks)\n */\n\n(function () {\n  \"use strict\";\n\n  const WEEKLY_LINEUP_KEY = \"gbsv_weekly_lineup_picks\";\n\n  const state = {\n    activePicks: [],\n    lastFetchedAt: null,\n    isFetching: false,\n  };\n\n  const el = {\n    tbody: () => document.getElementById(\"picks-tbody\"),\n    lastRefreshed: () =>\n      document.querySelector(\"#ft-last-refreshed .sync-time\"),\n  };\n\n  const nowIso = () => new Date().toISOString();\n\n  const formatMmDd = (isoDate) => {\n    if (!isoDate) return \"\";\n    const d = new Date(isoDate);\n    if (Number.isNaN(d.getTime())) return String(isoDate);\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(d.getDate()).padStart(2, \"0\");\n    return `${mm}/${dd}`;\n  };\n\n  const safeText = (value) => (value ?? \"\").toString();\n\n  const slug = (value) =>\n    safeText(value)\n      .trim()\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/^-+|-+$/g, \"\")\n      .slice(0, 40);\n\n  const normalizeSport = (sport) => {\n    const upper = safeText(sport).toUpperCase();\n    if (upper === \"NCAAM\") return \"NCAAB\";\n    if (upper === \"NCAAB\") return \"NCAAB\";\n    return upper || \"NBA\";\n  };\n\n  // Deterministic ID to avoid duplicates across refreshes\n  const computePickId = (pick) => {\n    const sport = normalizeSport(pick.sport || pick.league);\n    const date = (pick.gameDate || pick.date || \"\").toString().slice(0, 10);\n    const away = slug(pick.awayTeam);\n    const home = slug(pick.homeTeam);\n    const pickType = slug(pick.pickType);\n    const segment = slug(pick.segment);\n    const direction = slug(\n      pick.pickDirection || pick.pickTeam || pick.pick || \"\",\n    );\n    const line = slug(pick.line);\n\n    const base = `${sport}-${date}-${away}-at-${home}-${pickType}-${segment}-${direction}-${line}`;\n    return base.length <= 255 ? base : base.slice(0, 255);\n  };\n\n  const showToast = (message, type = \"info\") => {\n    if (window.showNotification) {\n      window.showNotification(message, type);\n      return;\n    }\n\n    // Fallback toast (minimal)\n    try {\n      const node = document.createElement(\"div\");\n      node.textContent = message;\n      node.style.cssText =\n        \"position:fixed;top:20px;right:20px;z-index:99999;padding:10px 14px;border-radius:10px;\" +\n        \"background:rgba(6,28,20,0.95);color:#e8f0f2;border:1px solid rgba(60,255,181,0.35);\";\n      document.body.appendChild(node);\n      setTimeout(() => node.remove(), 2500);\n    } catch (e) {}\n  };\n\n  const setLastRefreshed = (iso) => {\n    const target = el.lastRefreshed();\n    if (!target) return;\n\n    const d = new Date(iso);\n    if (Number.isNaN(d.getTime())) {\n      target.textContent = \"-\";\n      return;\n    }\n\n    target.textContent = d.toLocaleTimeString([], {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getLeagueLogo = (sport) => {\n    const s = normalizeSport(sport);\n    if (s === \"NBA\") return { src: \"assets/nba-logo.png\", alt: \"NBA\" };\n    if (s === \"NCAAB\") return { src: \"assets/ncaam-logo.png\", alt: \"NCAAM\" };\n    if (s === \"NFL\") return { src: \"assets/nfl-logo.png\", alt: \"NFL\" };\n    if (s === \"NCAAF\") return { src: \"assets/ncaaf-logo.png\", alt: \"NCAAF\" };\n    return { src: \"\", alt: s };\n  };\n\n  const fireEmoji = (fire) => {\n    const n = Math.max(0, Math.min(5, parseInt(fire, 10) || 0));\n    if (n <= 0) return \"\";\n    return \"\uD83D\uDD25\".repeat(n);\n  };\n\n  const formatPickLabel = (pick) => {\n    const type = safeText(pick.pickType || \"\").toLowerCase();\n    const line = safeText(pick.line);\n\n    if (type === \"total\") {\n      const dir = safeText(pick.pickDirection).toUpperCase();\n      const label = dir.includes(\"UNDER\")\n        ? \"Under\"\n        : dir.includes(\"OVER\")\n          ? \"Over\"\n          : dir;\n      return `${label} ${line}`.trim();\n    }\n\n    if (type === \"moneyline\" || type === \"ml\") {\n      return `${safeText(pick.pickTeam)} ML`.trim();\n    }\n\n    return `${safeText(pick.pickTeam)} ${line}`.trim();\n  };\n\n  const renderEmptyState = (message) => {\n    const tbody = el.tbody();\n    if (!tbody) return;\n\n    tbody.innerHTML = `\n      <tr class=\"empty-state-row\">\n        <td colspan=\"9\" class=\"empty-state-cell\">\n          <div class=\"empty-state\">\n            <span class=\"empty-icon\">\uD83D\uDCCA</span>\n            <span class=\"empty-message\">${safeText(message || \"No picks\")}</span>\n          </div>\n        </td>\n      </tr>\n    `;\n  };\n\n  const renderRows = (picks) => {\n    const tbody = el.tbody();\n    if (!tbody) return;\n\n    if (!Array.isArray(picks) || picks.length === 0) {\n      renderEmptyState(\"No picks fetched yet. Click Fetch to load picks.\");\n      return;\n    }\n\n    tbody.innerHTML = \"\";\n\n    for (const pick of picks) {\n      const sport = normalizeSport(pick.sport || pick.league);\n      const leagueLogo = getLeagueLogo(sport);\n      const edge =\n        typeof pick.edge === \"number\"\n          ? pick.edge\n          : parseFloat(String(pick.edge || \"\").replace(\"%\", \"\")) || 0;\n      const isLocked = pick.locked === true;\n\n      const tr = document.createElement(\"tr\");\n      tr.className = \"pick-row\";\n      tr.setAttribute(\"data-row-id\", pick.id);\n      tr.setAttribute(\"data-pick-id\", pick.id);\n      tr.setAttribute(\"data-league\", sport);\n\n      const date = pick.gameDate || pick.date;\n      const dateText = formatMmDd(date);\n\n      const odds = safeText(pick.odds || \"-110\");\n      const segment = safeText(pick.segment || \"FG\");\n      const pickLabel = formatPickLabel(pick);\n\n      tr.innerHTML = `\n        <td class=\"col-datetime\">\n          <div class=\"datetime-cell\">\n            <div class=\"cell-date\">${safeText(dateText)}</div>\n            <div class=\"cell-time\">${safeText(pick.time || pick.gameTime || \"\")}</div>\n            <div class=\"cell-book\">${safeText(pick.sportsbook || pick.book || pick.source || \"Model\")}</div>\n          </div>\n        </td>\n        <td class=\"center col-league\">\n          <div class=\"league-cell\">\n            ${leagueLogo.src ? `<img src=\"${leagueLogo.src}\" class=\"league-logo\" alt=\"${leagueLogo.alt}\" loading=\"lazy\" />` : safeText(leagueLogo.alt)}\n          </div>\n        </td>\n        <td class=\"col-matchup\">\n          <div class=\"matchup-cell matchup-inline\">\n            <span class=\"team-line\"><span class=\"team-name-full\">${safeText(pick.awayTeam)}</span></span>\n            <span class=\"vs-divider\">@</span>\n            <span class=\"team-line\"><span class=\"team-name-full\">${safeText(pick.homeTeam)}</span></span>\n          </div>\n        </td>\n        <td class=\"center col-segment\">\n          <span class=\"segment-pill\" data-segment=\"${slug(segment)}\">${safeText(segment)}</span>\n        </td>\n        <td class=\"col-pick\">\n          <div class=\"pick-inline\">\n            <span class=\"pick-team\">${safeText(pickLabel)}</span>\n            <span class=\"pick-odds\">(${safeText(odds)})</span>\n          </div>\n        </td>\n        <td class=\"center col-edge\">\n          <span class=\"edge-badge\">${edge ? `${edge.toFixed(1)}%` : \"-\"}</span>\n        </td>\n        <td class=\"center col-fire\">\n          <span class=\"fire-cell\" title=\"Fire rating\">${fireEmoji(pick.fire)}</span>\n        </td>\n        <td class=\"center col-track\">\n          <button\n            class=\"tracker-btn\"\n            type=\"button\"\n            data-pick-id=\"${pick.id}\"\n            aria-pressed=\"${isLocked ? \"true\" : \"false\"}\"\n            title=\"${isLocked ? \"Locked in (on Dashboard)\" : \"Not locked\"}\"\n          >${isLocked ? \"\uD83D\uDD12\" : \"\uFF0B\"}</button>\n        </td>\n      `;\n\n      tbody.appendChild(tr);\n    }\n\n    if (window.Accessibility?.init) {\n      window.Accessibility.init();\n    }\n  };\n\n  const persistWeeklyLineupCache = (picks) => {\n    try {\n      localStorage.setItem(\n        WEEKLY_LINEUP_KEY,\n        JSON.stringify({ picks, fetchedAt: nowIso() }),\n      );\n    } catch (e) {}\n  };\n\n  const toCosmosPick = (pick) => {\n    const sport = normalizeSport(pick.sport || pick.league);\n    const gameDate = (pick.gameDate || pick.date || nowIso())\n      .toString()\n      .slice(0, 10);\n\n    const normalized = {\n      id: pick.id || computePickId(pick),\n      sport,\n      league: sport,\n      awayTeam: safeText(pick.awayTeam),\n      homeTeam: safeText(pick.homeTeam),\n      pickType: safeText(pick.pickType || \"spread\").toLowerCase(),\n      pickDirection: safeText(pick.pickDirection || \"\"),\n      pickTeam: safeText(pick.pickTeam || \"\"),\n      line: safeText(pick.line || \"\"),\n      odds: safeText(pick.odds || \"\"),\n      edge:\n        typeof pick.edge === \"number\"\n          ? pick.edge\n          : parseFloat(String(pick.edge || \"\").replace(\"%\", \"\")) || 0,\n      segment: safeText(pick.segment || \"FG\"),\n      sportsbook: safeText(pick.sportsbook || pick.book || \"Model\"),\n      gameDate,\n      gameTime: safeText(pick.time || pick.gameTime || \"\"),\n      status: safeText(pick.status || \"pending\").toLowerCase(),\n      locked: pick.locked === true,\n      lockedAt: pick.locked === true ? pick.lockedAt || nowIso() : null,\n      source: \"weekly-lineup\",\n      model: safeText(pick.modelStamp || pick.model || \"\"),\n      confidence: pick.fire ?? pick.confidence ?? null,\n      notes: safeText(pick.rationale || pick.notes || \"\"),\n    };\n\n    return normalized;\n  };\n\n  const saveFetchedPicksToCosmos = async (picks) => {\n    if (!window.PicksService?.create) {\n      showToast(\"PicksService not available (Cosmos sync disabled)\", \"warning\");\n      return;\n    }\n\n    if (!Array.isArray(picks) || picks.length === 0) {\n      return;\n    }\n\n    // Auto-save fetched picks as unlocked\n    const payload = picks.map((p) => {\n      const cosmosPick = toCosmosPick({ ...p, locked: false, lockedAt: null });\n      // Ensure deterministic ID\n      cosmosPick.id = cosmosPick.id || computePickId(cosmosPick);\n      return cosmosPick;\n    });\n\n    try {\n      await window.PicksService.create(payload);\n      showToast(\n        `Saved ${payload.length} picks to Dashboard (unlocked)`,\n        \"success\",\n      );\n    } catch (e) {\n      showToast(`Failed to save picks: ${e.message || e}`, \"error\");\n    }\n  };\n\n  const toggleLock = async (pickId, locked) => {\n    const pick = state.activePicks.find((p) => p.id === pickId);\n    if (!pick) return;\n\n    if (!window.PicksService?.update) {\n      showToast(\"PicksService not available (cannot lock/unlock)\", \"error\");\n      return;\n    }\n\n    try {\n      const patch = locked\n        ? { locked: true, lockedAt: nowIso() }\n        : { locked: false, lockedAt: null };\n\n      await window.PicksService.update(pickId, patch);\n\n      pick.locked = locked;\n      pick.lockedAt = patch.lockedAt;\n\n      renderRows(state.activePicks);\n      persistWeeklyLineupCache(state.activePicks);\n\n      showToast(\n        locked\n          ? \"Locked in \u2014 now on Dashboard\"\n          : \"Unlocked \u2014 removed from Dashboard\",\n        \"success\",\n      );\n    } catch (e) {\n      showToast(`Lock update failed: ${e.message || e}`, \"error\");\n    }\n  };\n\n  const attachTrackHandlers = () => {\n    const tbody = el.tbody();\n    if (!tbody) return;\n\n    tbody.addEventListener(\"click\", (evt) => {\n      const btn = evt.target.closest(\".tracker-btn\");\n      if (!btn) return;\n\n      evt.preventDefault();\n      evt.stopPropagation();\n\n      const pickId = btn.getAttribute(\"data-pick-id\");\n      if (!pickId) return;\n\n      const isPressed = btn.getAttribute(\"aria-pressed\") === \"true\";\n      toggleLock(pickId, !isPressed);\n    });\n  };\n\n  const getDateParamForFetchers = () => {\n    // Keep it simple: fetchers default to 'today'\n    return \"today\";\n  };\n\n  const fetchAndRender = async (league) => {\n    if (state.isFetching) return;\n\n    if (!window.UnifiedPicksFetcher?.fetchPicks) {\n      showToast(\"Model fetchers not loaded\", \"error\");\n      return;\n    }\n\n    state.isFetching = true;\n\n    try {\n      const date = getDateParamForFetchers();\n      const result = await window.UnifiedPicksFetcher.fetchPicks(league, date, {\n        skipCache: true,\n      });\n\n      const picks = Array.isArray(result?.picks) ? result.picks : [];\n      const enriched = picks.map((p) => {\n        const withId = { ...p };\n        withId.sport = normalizeSport(withId.sport || withId.league);\n        withId.gameDate = (withId.gameDate || withId.date || nowIso())\n          .toString()\n          .slice(0, 10);\n        withId.id = withId.id || computePickId(withId);\n        withId.locked = withId.locked === true;\n        return withId;\n      });\n\n      // Show newest first by edge\n      enriched.sort((a, b) => (b.edge || 0) - (a.edge || 0));\n\n      state.activePicks = enriched;\n      state.lastFetchedAt = nowIso();\n\n      renderRows(enriched);\n      setLastRefreshed(state.lastFetchedAt);\n      persistWeeklyLineupCache(enriched);\n\n      await saveFetchedPicksToCosmos(enriched);\n\n      if (result?.errors?.length) {\n        const leaguesFailed = result.errors.map((e) => e.league).join(\", \");\n        showToast(`Some leagues unavailable: ${leaguesFailed}`, \"warning\");\n      }\n    } catch (e) {\n      showToast(`Fetch failed: ${e.message || e}`, \"error\");\n      renderEmptyState(\"Unable to fetch picks. Please try again.\");\n    } finally {\n      state.isFetching = false;\n    }\n  };\n\n  const attachFetchHandlers = () => {\n    const root = document.querySelector(\".filter-toolbar\");\n    if (!root) return;\n\n    root.addEventListener(\"click\", (evt) => {\n      const btn = evt.target.closest(\"button[data-fetch]\");\n      if (!btn) return;\n\n      evt.preventDefault();\n\n      const code = safeText(btn.getAttribute(\"data-fetch\")).toLowerCase();\n      if (!code) return;\n\n      if (code === \"all\") {\n        fetchAndRender(\"all\");\n        return;\n      }\n\n      if (code === \"ncaab\" || code === \"ncaam\") {\n        fetchAndRender(\"ncaam\");\n        return;\n      }\n\n      fetchAndRender(code);\n    });\n  };\n\n  const bootstrapFromCache = () => {\n    try {\n      const raw = localStorage.getItem(WEEKLY_LINEUP_KEY);\n      if (!raw) return;\n      const parsed = JSON.parse(raw);\n      if (!Array.isArray(parsed?.picks)) return;\n\n      state.activePicks = parsed.picks;\n      state.lastFetchedAt = parsed.fetchedAt || null;\n\n      renderRows(state.activePicks);\n      if (state.lastFetchedAt) setLastRefreshed(state.lastFetchedAt);\n    } catch (e) {}\n  };\n\n  // Public API expected by WeeklyLineupSync\n  window.WeeklyLineup = {\n    getActivePicks() {\n      return state.activePicks || [];\n    },\n    populateTable(picks) {\n      // Compatibility for other callers\n      state.activePicks = Array.isArray(picks) ? picks : [];\n      renderRows(state.activePicks);\n      persistWeeklyLineupCache(state.activePicks);\n    },\n    showNotification(message, type) {\n      showToast(message, type);\n    },\n    showEmptyState(message) {\n      renderEmptyState(message);\n    },\n  };\n\n  const init = () => {\n    bootstrapFromCache();\n    attachFetchHandlers();\n    attachTrackHandlers();\n\n    // Initialize last refreshed label\n    if (state.lastFetchedAt) {\n      setLastRefreshed(state.lastFetchedAt);\n    }\n  };\n\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", init);\n  } else {\n    init();\n  }\n})();\n\n\n/* === assets/js/features/blob-storage-archiver.js === */\n/**\r\n * Blob Storage Archiver v1.0.0\r\n * Archives weekly lineup picks to Azure Blob Storage\r\n * \r\n * Archives are triggered:\r\n * 1. When all picks in a slate expire (games completed)\r\n * 2. When a refresh replaces existing picks\r\n * 3. Manual archive via UI button\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const ARCHIVE_ENDPOINT = window.APP_CONFIG?.FUNCTIONS_BASE_URL \r\n        ? `${window.APP_CONFIG.FUNCTIONS_BASE_URL}/api/archive-picks`\r\n        : '/api/archive-picks';\r\n\r\n    class BlobStorageArchiver {\r\n        constructor() {\r\n            this.pendingArchives = [];\r\n            this.isArchiving = false;\r\n            this.archiveContainerName = 'weekly-lineup-archives';\r\n        }\r\n\r\n        /**\r\n         * Archive picks to Azure Blob Storage\r\n         * @param {Array} picks - Array of pick objects to archive\r\n         * @param {Object} metadata - Additional metadata (source, timestamp, etc.)\r\n         */\r\n        async archivePicks(picks, metadata = {}) {\r\n            if (!picks || picks.length === 0) {\r\n                console.log('No picks to archive');\r\n                return { success: false, reason: 'No picks provided' };\r\n            }\r\n\r\n            const archivePayload = {\r\n                id: this._generateArchiveId(),\r\n                timestamp: new Date().toISOString(),\r\n                source: metadata.source || 'weekly-lineup',\r\n                triggerReason: metadata.triggerReason || 'manual',\r\n                picksCount: picks.length,\r\n                picks: picks,\r\n                metadata: {\r\n                    userAgent: navigator.userAgent,\r\n                    archiveVersion: '1.0.0',\r\n                    ...metadata\r\n                }\r\n            };\r\n\r\n            try {\r\n                this.isArchiving = true;\r\n                \r\n                // Show archiving indicator\r\n                this._showArchiveProgress('Archiving picks to cloud storage...');\r\n\r\n                const response = await fetch(ARCHIVE_ENDPOINT, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(archivePayload)\r\n                });\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Archive failed: ${response.status} ${response.statusText}`);\r\n                }\r\n\r\n                const result = await response.json();\r\n\r\n                console.log('\u2705 Picks archived successfully:', result);\r\n                this._showArchiveProgress('Archived successfully!', 'success');\r\n\r\n                // Emit event for other components\r\n                window.dispatchEvent(new CustomEvent('picks:archived', {\r\n                    detail: { archiveId: archivePayload.id, count: picks.length }\r\n                }));\r\n\r\n                return { success: true, archiveId: archivePayload.id, blobUrl: result.blobUrl };\r\n\r\n            } catch (error) {\r\n                console.error('Archive failed:', error);\r\n                this._showArchiveProgress('Archive failed - saving locally', 'error');\r\n                \r\n                // Fall back to local storage archive\r\n                this._archiveLocally(archivePayload);\r\n                \r\n                return { success: false, error: error.message, localFallback: true };\r\n            } finally {\r\n                this.isArchiving = false;\r\n                setTimeout(() => this._hideArchiveProgress(), 3000);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Archive when weekly lineup is refreshed\r\n         * Called before new picks replace old ones\r\n         */\r\n        async archiveOnRefresh(currentPicks, sport = 'all') {\r\n            if (!currentPicks || currentPicks.length === 0) {\r\n                return;\r\n            }\r\n\r\n            return this.archivePicks(currentPicks, {\r\n                triggerReason: 'refresh',\r\n                sport: sport,\r\n                replacedAt: new Date().toISOString()\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Archive when all games in a slate are complete\r\n         */\r\n        async archiveCompletedSlate(picks) {\r\n            if (!picks || picks.length === 0) {\r\n                return;\r\n            }\r\n\r\n            // Calculate stats before archiving\r\n            const stats = this._calculateSlateStats(picks);\r\n\r\n            return this.archivePicks(picks, {\r\n                triggerReason: 'slate-complete',\r\n                stats: stats,\r\n                completedAt: new Date().toISOString()\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Calculate stats for a completed slate\r\n         */\r\n        _calculateSlateStats(picks) {\r\n            let wins = 0, losses = 0, pushes = 0, pending = 0;\r\n\r\n            picks.forEach(pick => {\r\n                const outcome = (pick.outcome || pick.result || '').toUpperCase();\r\n                if (outcome === 'W' || outcome === 'WIN') wins++;\r\n                else if (outcome === 'L' || outcome === 'LOSS') losses++;\r\n                else if (outcome === 'P' || outcome === 'PUSH') pushes++;\r\n                else pending++;\r\n            });\r\n\r\n            const decided = wins + losses;\r\n            const winRate = decided > 0 ? ((wins / decided) * 100).toFixed(1) : 0;\r\n\r\n            return {\r\n                total: picks.length,\r\n                wins, losses, pushes, pending,\r\n                winRate: parseFloat(winRate),\r\n                record: `${wins}-${losses}${pushes > 0 ? '-' + pushes : ''}`\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Get archived picks from blob storage\r\n         * @param {Object} filters - Optional filters (date range, sport, etc.)\r\n         */\r\n        async getArchivedPicks(filters = {}) {\r\n            const queryParams = new URLSearchParams(filters).toString();\r\n            const url = `${ARCHIVE_ENDPOINT}?${queryParams}`;\r\n\r\n            try {\r\n                const response = await fetch(url);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch archives: ${response.status}`);\r\n                }\r\n\r\n                return await response.json();\r\n            } catch (error) {\r\n                console.error('Failed to fetch archived picks:', error);\r\n                \r\n                // Fall back to local archives\r\n                return this._getLocalArchives(filters);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fall back to local storage if blob storage fails\r\n         */\r\n        _archiveLocally(archivePayload) {\r\n            const localKey = 'gbsv_blob_archive_fallback';\r\n            \r\n            try {\r\n                const existing = JSON.parse(localStorage.getItem(localKey) || '[]');\r\n                existing.push(archivePayload);\r\n                \r\n                // Keep last 50 archives locally\r\n                if (existing.length > 50) {\r\n                    existing.shift();\r\n                }\r\n                \r\n                localStorage.setItem(localKey, JSON.stringify(existing));\r\n                console.log('Archived to localStorage as fallback');\r\n            } catch (e) {\r\n                console.error('Local archive also failed:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get local fallback archives\r\n         */\r\n        _getLocalArchives(filters) {\r\n            const localKey = 'gbsv_blob_archive_fallback';\r\n            \r\n            try {\r\n                const archives = JSON.parse(localStorage.getItem(localKey) || '[]');\r\n                \r\n                // Apply filters if provided\r\n                if (filters.sport) {\r\n                    return archives.filter(a => a.metadata?.sport === filters.sport);\r\n                }\r\n                \r\n                return archives;\r\n            } catch (e) {\r\n                return [];\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Sync local fallback archives to blob storage\r\n         * Call this when connection is restored\r\n         */\r\n        async syncLocalArchives() {\r\n            const localKey = 'gbsv_blob_archive_fallback';\r\n            \r\n            try {\r\n                const localArchives = JSON.parse(localStorage.getItem(localKey) || '[]');\r\n                \r\n                if (localArchives.length === 0) {\r\n                    return { synced: 0 };\r\n                }\r\n\r\n                let synced = 0;\r\n                const failed = [];\r\n\r\n                for (const archive of localArchives) {\r\n                    try {\r\n                        const response = await fetch(ARCHIVE_ENDPOINT, {\r\n                            method: 'POST',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify({\r\n                                ...archive,\r\n                                metadata: { ...archive.metadata, syncedFromLocal: true }\r\n                            })\r\n                        });\r\n\r\n                        if (response.ok) {\r\n                            synced++;\r\n                        } else {\r\n                            failed.push(archive);\r\n                        }\r\n                    } catch (e) {\r\n                        failed.push(archive);\r\n                    }\r\n                }\r\n\r\n                // Keep only failed ones in local storage\r\n                localStorage.setItem(localKey, JSON.stringify(failed));\r\n\r\n                console.log(`Synced ${synced} archives, ${failed.length} failed`);\r\n                return { synced, failed: failed.length };\r\n\r\n            } catch (e) {\r\n                console.error('Sync failed:', e);\r\n                return { synced: 0, error: e.message };\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Generate unique archive ID\r\n         */\r\n        _generateArchiveId() {\r\n            const date = new Date().toISOString().split('T')[0].replace(/-/g, '');\r\n            const rand = Math.random().toString(36).substring(2, 8);\r\n            return `archive-${date}-${rand}`;\r\n        }\r\n\r\n        /**\r\n         * Show archive progress indicator\r\n         */\r\n        _showArchiveProgress(message, type = 'info') {\r\n            // Create or update progress indicator\r\n            let indicator = document.getElementById('archive-progress-indicator');\r\n            \r\n            if (!indicator) {\r\n                indicator = document.createElement('div');\r\n                indicator.id = 'archive-progress-indicator';\r\n                indicator.style.cssText = `\r\n                    position: fixed;\r\n                    bottom: 20px;\r\n                    right: 20px;\r\n                    padding: 12px 20px;\r\n                    border-radius: 8px;\r\n                    font-size: 14px;\r\n                    z-index: 10000;\r\n                    transition: all 0.3s ease;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    gap: 10px;\r\n                `;\r\n                document.body.appendChild(indicator);\r\n            }\r\n\r\n            // Set color based on type\r\n            const colors = {\r\n                info: { bg: '#1a365d', border: '#3182ce', text: '#90cdf4' },\r\n                success: { bg: '#1c4532', border: '#38a169', text: '#9ae6b4' },\r\n                error: { bg: '#742a2a', border: '#e53e3e', text: '#feb2b2' }\r\n            };\r\n            const c = colors[type] || colors.info;\r\n            \r\n            indicator.style.backgroundColor = c.bg;\r\n            indicator.style.border = `1px solid ${c.border}`;\r\n            indicator.style.color = c.text;\r\n            \r\n            const icon = type === 'success' ? '\u2713' : type === 'error' ? '\u2717' : '\u21BB';\r\n            indicator.innerHTML = `<span>${icon}</span> ${message}`;\r\n            indicator.style.display = 'flex';\r\n        }\r\n\r\n        /**\r\n         * Hide archive progress indicator\r\n         */\r\n        _hideArchiveProgress() {\r\n            const indicator = document.getElementById('archive-progress-indicator');\r\n            if (indicator) {\r\n                indicator.style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create singleton instance\r\n    window.BlobStorageArchiver = new BlobStorageArchiver();\r\n\r\n})();\r\n\n\n/* === assets/js/features/history-manager.js === */\n/**\r\n * History Toggle Enhancement v1.0.0\r\n * Fetches archived picks from Azure Blob Storage\r\n * Enhances the existing localStorage-based history view\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const getApiBase = () => window.APP_CONFIG?.FUNCTIONS_BASE_URL || '';\r\n\r\n    class HistoryManager {\r\n        constructor() {\r\n            this.cache = new Map();\r\n            this.currentWeek = null;\r\n            this.initialized = false;\r\n        }\r\n\r\n        /**\r\n         * Initialize history manager\r\n         */\r\n        init() {\r\n            if (this.initialized) return;\r\n\r\n            // Hook into existing view toggle\r\n            this._enhanceViewToggle();\r\n\r\n            this.initialized = true;\r\n            console.log('\uD83D\uDCDA History Manager initialized');\r\n        }\r\n\r\n        /**\r\n         * Enhance the existing view toggle to use blob storage\r\n         */\r\n        _enhanceViewToggle() {\r\n            const historyBtn = document.querySelector('[data-view=\"history\"]');\r\n            if (!historyBtn) return;\r\n\r\n            // Replace click handler\r\n            historyBtn.addEventListener('click', async (e) => {\r\n                // Let original handler update button state\r\n                // Then enhance with blob data\r\n                setTimeout(() => this.loadHistoryFromBlob(), 100);\r\n            }, { capture: true });\r\n        }\r\n\r\n        /**\r\n         * Fetch archived picks from Azure Blob Storage\r\n         */\r\n        async loadHistoryFromBlob() {\r\n            const tbody = document.querySelector('.weekly-lineup-table tbody');\r\n            if (!tbody) return;\r\n\r\n            // Show loading state\r\n            tbody.innerHTML = `\r\n                <tr class=\"loading-row\">\r\n                    <td colspan=\"9\" style=\"text-align:center; padding:40px;\">\r\n                        <div class=\"loading-spinner\"></div>\r\n                        <div style=\"margin-top:10px; color:#888;\">Loading archived picks...</div>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n\r\n            try {\r\n                const weeks = await this.fetchAvailableWeeks();\r\n\r\n                if (!weeks || weeks.length === 0) {\r\n                    // Fall back to localStorage\r\n                    console.log('\uD83D\uDCDA No blob archives found, using localStorage');\r\n                    return;\r\n                }\r\n\r\n                // Render week selector\r\n                this._renderWeekSelector(weeks);\r\n\r\n                // Load most recent week by default\r\n                await this.loadWeek(weeks[0]);\r\n\r\n            } catch (error) {\r\n                console.error('History load error:', error);\r\n                // Fall back to localStorage on error\r\n                tbody.innerHTML = `\r\n                    <tr class=\"error-row\">\r\n                        <td colspan=\"9\" style=\"text-align:center; padding:40px; color:#ef4444;\">\r\n                            Failed to load history from cloud. Showing local history...\r\n                        </td>\r\n                    </tr>\r\n                `;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fetch list of available weeks from blob storage\r\n         */\r\n        async fetchAvailableWeeks() {\r\n            const response = await fetch(`${getApiBase()}/api/archive-picks/list`);\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`Failed to fetch weeks: ${response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            return data.weeks || [];\r\n        }\r\n\r\n        /**\r\n         * Load a specific week's picks\r\n         */\r\n        async loadWeek(weekId) {\r\n            this.currentWeek = weekId;\r\n\r\n            // Check cache first\r\n            if (this.cache.has(weekId)) {\r\n                this._renderPicks(this.cache.get(weekId));\r\n                return;\r\n            }\r\n\r\n            const tbody = document.querySelector('.weekly-lineup-table tbody');\r\n            tbody.innerHTML = `\r\n                <tr class=\"loading-row\">\r\n                    <td colspan=\"9\" style=\"text-align:center; padding:20px;\">\r\n                        Loading ${weekId}...\r\n                    </td>\r\n                </tr>\r\n            `;\r\n\r\n            try {\r\n                const response = await fetch(`${getApiBase()}/api/archive-picks/${weekId}`);\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch week: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this.cache.set(weekId, data);\r\n                this._renderPicks(data);\r\n\r\n            } catch (error) {\r\n                console.error(`Failed to load week ${weekId}:`, error);\r\n                tbody.innerHTML = `\r\n                    <tr class=\"error-row\">\r\n                        <td colspan=\"9\" style=\"text-align:center; padding:20px; color:#ef4444;\">\r\n                            Failed to load ${weekId}\r\n                        </td>\r\n                    </tr>\r\n                `;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Render week selector dropdown\r\n         */\r\n        _renderWeekSelector(weeks) {\r\n            let statsBar = document.querySelector('.history-stats-bar');\r\n\r\n            if (!statsBar) {\r\n                statsBar = document.createElement('div');\r\n                statsBar.className = 'history-stats-bar';\r\n                const tableWrapper = document.querySelector('.weekly-lineup-table-wrapper');\r\n                if (tableWrapper) {\r\n                    tableWrapper.insertBefore(statsBar, tableWrapper.firstChild);\r\n                }\r\n            }\r\n\r\n            const esc = window.SharedUtils?.escapeHtml || ((s) => String(s ?? ''));\r\n            statsBar.innerHTML = `\r\n                <div class=\"history-controls\">\r\n                    <label>Week:</label>\r\n                    <select id=\"history-week-select\" class=\"history-week-select\">\r\n                        ${weeks.map(w => `<option value=\"${esc(w)}\">${esc(this._formatWeekLabel(w))}</option>`).join('')}\r\n                    </select>\r\n                    <span class=\"history-source-badge\">\u2601\uFE0F Cloud Archive</span>\r\n                </div>\r\n                <div class=\"history-stats\" id=\"history-stats\"></div>\r\n            `;\r\n\r\n            // Attach week change handler\r\n            const select = statsBar.querySelector('#history-week-select');\r\n            select.addEventListener('change', (e) => {\r\n                this.loadWeek(e.target.value);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Format week ID to readable label\r\n         */\r\n        _formatWeekLabel(weekId) {\r\n            // Convert \"2026-week-02\" to \"Week 2, 2026\"\r\n            const match = weekId.match(/(\\d{4})-week-(\\d+)/);\r\n            if (match) {\r\n                return `Week ${parseInt(match[2])}, ${match[1]}`;\r\n            }\r\n            return weekId;\r\n        }\r\n\r\n        /**\r\n         * Render picks in the table\r\n         */\r\n        _renderPicks(data) {\r\n            const picks = data.picks || [];\r\n            const tbody = document.querySelector('.weekly-lineup-table tbody');\r\n            const statsDiv = document.getElementById('history-stats');\r\n\r\n            if (!tbody) return;\r\n\r\n            if (picks.length === 0) {\r\n                tbody.innerHTML = `\r\n                    <tr class=\"empty-row\">\r\n                        <td colspan=\"9\" style=\"text-align:center; padding:40px; color:#888;\">\r\n                            No picks archived for this week\r\n                        </td>\r\n                    </tr>\r\n                `;\r\n                return;\r\n            }\r\n\r\n            // Calculate stats\r\n            const wins = picks.filter(p => p.outcome === 'win').length;\r\n            const losses = picks.filter(p => p.outcome === 'loss').length;\r\n            const pushes = picks.filter(p => p.outcome === 'push').length;\r\n            const pending = picks.filter(p => !p.outcome || p.outcome === 'pending').length;\r\n            const winRate = wins + losses > 0 ? ((wins / (wins + losses)) * 100).toFixed(1) : 'N/A';\r\n\r\n            if (statsDiv) {\r\n                statsDiv.innerHTML = `\r\n                    <span class=\"stat-item win\">${wins}W</span>\r\n                    <span class=\"stat-item loss\">${losses}L</span>\r\n                    <span class=\"stat-item push\">${pushes}P</span>\r\n                    ${pending > 0 ? `<span class=\"stat-item pending\">${pending} Pending</span>` : ''}\r\n                    <span class=\"stat-item rate\">${winRate}%</span>\r\n                `;\r\n            }\r\n\r\n            // Render table rows\r\n            tbody.innerHTML = picks.map(pick => this._renderPickRow(pick)).join('');\r\n        }\r\n\r\n        /**\r\n         * Render a single pick row\r\n         */\r\n        _renderPickRow(pick) {\r\n            const esc = window.SharedUtils?.escapeHtml || ((s) => String(s ?? ''));\r\n            const outcomeClass = pick.outcome ? `outcome-${esc(pick.outcome)}` : '';\r\n            const outcomeIcon = this._getOutcomeIcon(pick.outcome);\r\n\r\n            return `\r\n                <tr class=\"archived-pick-row ${outcomeClass}\">\r\n                    <td class=\"col-datetime\">${this._formatDateTime(pick.gameDate, pick.gameTime)}</td>\r\n                    <td class=\"col-league center\">${this._getLeagueLogo(pick.league)}</td>\r\n                    <td class=\"col-matchup\">${this._formatMatchup(pick)}</td>\r\n                    <td class=\"col-segment center\">${esc(pick.segment || 'Full')}</td>\r\n                    <td class=\"col-pick\">${esc(pick.pick || '')}</td>\r\n                    <td class=\"col-market center\">${esc(pick.odds || '')}</td>\r\n                    <td class=\"col-edge center\">${pick.edge ? esc(pick.edge) + '%' : ''}</td>\r\n                    <td class=\"col-fire center\">${esc(pick.confidence || '')}</td>\r\n                    <td class=\"col-track center\">${outcomeIcon}</td>\r\n                </tr>\r\n            `;\r\n        }\r\n\r\n        /**\r\n         * Get outcome icon\r\n         */\r\n        _getOutcomeIcon(outcome) {\r\n            switch (outcome) {\r\n                case 'win': return '<span class=\"outcome-badge win\">\u2713 WIN</span>';\r\n                case 'loss': return '<span class=\"outcome-badge loss\">\u2717 LOSS</span>';\r\n                case 'push': return '<span class=\"outcome-badge push\">= PUSH</span>';\r\n                default: return '<span class=\"outcome-badge pending\">\u23F3</span>';\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Format date/time\r\n         */\r\n        _formatDateTime(date, time) {\r\n            if (!date) return '';\r\n            return `<div class=\"datetime-cell\">\r\n                <span class=\"date\">${date}</span>\r\n                ${time ? `<span class=\"time\">${time}</span>` : ''}\r\n            </div>`;\r\n        }\r\n\r\n        /**\r\n         * Get league logo HTML\r\n         */\r\n        _getLeagueLogo(league) {\r\n            const logos = {\r\n                'NBA': 'https://gbsvorchestratorstorage.blob.core.windows.net/team-logos/leagues-500-nba.png',\r\n                'NFL': 'https://gbsvorchestratorstorage.blob.core.windows.net/team-logos/leagues-500-nfl.png',\r\n                'NCAAB': '/assets/icons/league-ncaam.svg',\r\n                'NCAAM': '/assets/icons/league-ncaam.svg',\r\n                'NCAAF': '/assets/icons/league-ncaaf.svg'\r\n            };\r\n            const esc = window.SharedUtils?.escapeHtml || ((s) => String(s ?? ''));\r\n            const src = logos[league?.toUpperCase()] || '';\r\n            return src ? `<img src=\"${src}\" alt=\"${esc(league)}\" class=\"league-logo-sm\" style=\"height:24px;\">` : esc(league || '');\r\n        }\r\n\r\n        /**\r\n         * Format matchup display\r\n         */\r\n        _formatMatchup(pick) {\r\n            const esc = window.SharedUtils?.escapeHtml || ((s) => String(s ?? ''));\r\n            const away = pick.awayTeam || pick.team1 || '';\r\n            const home = pick.homeTeam || pick.team2 || '';\r\n\r\n            if (!away && !home) return esc(pick.matchup || '');\r\n\r\n            return `<div class=\"matchup-cell\">\r\n                <span class=\"team-away\">${esc(away)}</span>\r\n                <span class=\"vs\">@</span>\r\n                <span class=\"team-home\">${esc(home)}</span>\r\n            </div>`;\r\n        }\r\n    }\r\n\r\n    // Create singleton and init on DOM ready\r\n    window.HistoryManager = new HistoryManager();\r\n\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => window.HistoryManager.init());\r\n    } else {\r\n        window.HistoryManager.init();\r\n    }\r\n\r\n})();\r\n\n\n/* === assets/js/features/pdf-parser.js === */\n/**\r\n * PDF Parser for Pick Uploads v1.0.0\r\n * Extracts text from PDF files using pdf.js\r\n * Parses extracted text using the existing PickParser\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // pdf.js library URL (Mozilla's official CDN)\r\n    const PDFJS_CDN = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js';\r\n    const PDFJS_WORKER_CDN = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';\r\n\r\n    let pdfjsLoaded = false;\r\n\r\n    class PDFParser {\r\n        constructor() {\r\n            this.isProcessing = false;\r\n        }\r\n\r\n        /**\r\n         * Ensure pdf.js library is loaded\r\n         */\r\n        async ensureLibraryLoaded() {\r\n            if (pdfjsLoaded && window.pdfjsLib) {\r\n                return true;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const script = document.createElement('script');\r\n                script.src = PDFJS_CDN;\r\n                script.onload = () => {\r\n                    // Configure worker\r\n                    window.pdfjsLib.GlobalWorkerOptions.workerSrc = PDFJS_WORKER_CDN;\r\n                    pdfjsLoaded = true;\r\n                    console.log('pdf.js library loaded');\r\n                    resolve(true);\r\n                };\r\n                script.onerror = () => {\r\n                    reject(new Error('Failed to load pdf.js library'));\r\n                };\r\n                document.head.appendChild(script);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Extract text from a PDF file\r\n         * @param {File} file - PDF file object\r\n         * @returns {Promise<string>} - Extracted text\r\n         */\r\n        async extractText(file) {\r\n            if (!file || file.type !== 'application/pdf') {\r\n                throw new Error('Invalid PDF file');\r\n            }\r\n\r\n            await this.ensureLibraryLoaded();\r\n\r\n            this.isProcessing = true;\r\n\r\n            try {\r\n                // Read file as ArrayBuffer\r\n                const arrayBuffer = await this._readFileAsArrayBuffer(file);\r\n\r\n                // Load PDF document\r\n                const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;\r\n                \r\n                console.log(`PDF loaded: ${pdf.numPages} pages`);\r\n\r\n                // Extract text from all pages\r\n                let fullText = '';\r\n                \r\n                for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\r\n                    const page = await pdf.getPage(pageNum);\r\n                    const textContent = await page.getTextContent();\r\n                    \r\n                    // Concatenate text items\r\n                    const pageText = textContent.items\r\n                        .map(item => item.str)\r\n                        .join(' ');\r\n                    \r\n                    fullText += pageText + '\\n\\n';\r\n                }\r\n\r\n                return fullText.trim();\r\n\r\n            } finally {\r\n                this.isProcessing = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Extract and parse picks from PDF\r\n         * @param {File} file - PDF file object\r\n         * @returns {Promise<Array>} - Parsed picks\r\n         */\r\n        async extractAndParsePicks(file) {\r\n            const text = await this.extractText(file);\r\n\r\n            if (!text) {\r\n                return { picks: [], rawText: '', error: 'No text extracted from PDF' };\r\n            }\r\n\r\n            console.log('Extracted PDF text:', text.substring(0, 500) + '...');\r\n\r\n            // Use existing PickParser if available\r\n            if (window.PickParser) {\r\n                const picks = window.PickParser.parseText(text);\r\n                return { picks, rawText: text };\r\n            }\r\n\r\n            // Basic parsing fallback\r\n            return { picks: this._basicParsing(text), rawText: text };\r\n        }\r\n\r\n        /**\r\n         * Basic pick parsing fallback if PickParser not available\r\n         */\r\n        _basicParsing(text) {\r\n            const picks = [];\r\n            const lines = text.split('\\n').filter(l => l.trim());\r\n\r\n            // Look for common patterns in sportsbook bet slips\r\n            // Pattern: Team Name +/-Spread or Over/Under\r\n            const spreadPattern = /([A-Za-z\\s]+)\\s+([+-]?\\d+\\.?\\d*)/g;\r\n            const ouPattern = /(over|under)\\s+(\\d+\\.?\\d*)/gi;\r\n            const mlPattern = /([A-Za-z\\s]+)\\s+(ML|moneyline)\\s*([+-]\\d+)?/gi;\r\n\r\n            lines.forEach(line => {\r\n                let match;\r\n                \r\n                // Check for spread picks\r\n                while ((match = spreadPattern.exec(line)) !== null) {\r\n                    const team = match[1].trim();\r\n                    const spread = parseFloat(match[2]);\r\n                    \r\n                    if (team.length > 2 && !isNaN(spread)) {\r\n                        picks.push({\r\n                            team,\r\n                            market: 'spread',\r\n                            line: spread,\r\n                            rawLine: line\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // Check for O/U picks\r\n                while ((match = ouPattern.exec(line)) !== null) {\r\n                    picks.push({\r\n                        market: match[1].toLowerCase(),\r\n                        line: parseFloat(match[2]),\r\n                        rawLine: line\r\n                    });\r\n                }\r\n            });\r\n\r\n            return picks;\r\n        }\r\n\r\n        /**\r\n         * Read file as ArrayBuffer\r\n         */\r\n        _readFileAsArrayBuffer(file) {\r\n            return new Promise((resolve, reject) => {\r\n                const reader = new FileReader();\r\n                reader.onload = () => resolve(reader.result);\r\n                reader.onerror = () => reject(reader.error);\r\n                reader.readAsArrayBuffer(file);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Check if file is a PDF\r\n         */\r\n        isPDF(file) {\r\n            return file && (\r\n                file.type === 'application/pdf' ||\r\n                file.name.toLowerCase().endsWith('.pdf')\r\n            );\r\n        }\r\n    }\r\n\r\n    // Create singleton instance\r\n    window.PDFParser = new PDFParser();\r\n\r\n})();\r\n\n\n/* === assets/js/features/image-ocr-parser.js === */\n/**\r\n * Image OCR Parser v1.0.0\r\n * Extracts text from images using Azure Computer Vision or Tesseract.js fallback\r\n * \r\n * Supports: PNG, JPG, JPEG, GIF, BMP, WEBP\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Azure Computer Vision endpoint (configure in APP_CONFIG)\r\n    const getAzureEndpoint = () => {\r\n        const base = window.APP_CONFIG?.AZURE_VISION_ENDPOINT || \r\n                     window.APP_CONFIG?.FUNCTIONS_BASE_URL;\r\n        return base ? `${base}/api/ocr` : '/api/ocr';\r\n    };\r\n\r\n    // Tesseract.js CDN for fallback\r\n    const TESSERACT_CDN = 'https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js';\r\n\r\n    let tesseractLoaded = false;\r\n\r\n    class ImageOCRParser {\r\n        constructor() {\r\n            this.isProcessing = false;\r\n            this.useAzure = true; // Prefer Azure, fallback to Tesseract\r\n        }\r\n\r\n        /**\r\n         * Extract text from an image file\r\n         * @param {File} file - Image file object\r\n         * @returns {Promise<Object>} - { text, confidence, method }\r\n         */\r\n        async extractText(file) {\r\n            if (!this.isImage(file)) {\r\n                throw new Error('Invalid image file');\r\n            }\r\n\r\n            this.isProcessing = true;\r\n\r\n            try {\r\n                // Try Azure Computer Vision first\r\n                if (this.useAzure) {\r\n                    try {\r\n                        return await this._extractWithAzure(file);\r\n                    } catch (azureError) {\r\n                        console.warn('Azure OCR failed, falling back to Tesseract:', azureError);\r\n                    }\r\n                }\r\n\r\n                // Fallback to Tesseract.js (client-side)\r\n                return await this._extractWithTesseract(file);\r\n\r\n            } finally {\r\n                this.isProcessing = false;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Extract text using Azure Computer Vision\r\n         */\r\n        async _extractWithAzure(file) {\r\n            const formData = new FormData();\r\n            formData.append('image', file);\r\n\r\n            const response = await fetch(getAzureEndpoint(), {\r\n                method: 'POST',\r\n                body: formData\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`Azure OCR failed: ${response.status}`);\r\n            }\r\n\r\n            const result = await response.json();\r\n\r\n            return {\r\n                text: result.text || '',\r\n                confidence: result.confidence || 0,\r\n                method: 'azure',\r\n                regions: result.regions || []\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Extract text using Tesseract.js (client-side OCR)\r\n         */\r\n        async _extractWithTesseract(file) {\r\n            await this._ensureTesseractLoaded();\r\n\r\n            // Show progress indicator\r\n            this._showProgress('Analyzing image...');\r\n\r\n            try {\r\n                const imageUrl = URL.createObjectURL(file);\r\n\r\n                const result = await Tesseract.recognize(imageUrl, 'eng', {\r\n                    logger: (m) => {\r\n                        if (m.status === 'recognizing text') {\r\n                            const pct = Math.round(m.progress * 100);\r\n                            this._showProgress(`Extracting text... ${pct}%`);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                URL.revokeObjectURL(imageUrl);\r\n\r\n                return {\r\n                    text: result.data.text || '',\r\n                    confidence: result.data.confidence || 0,\r\n                    method: 'tesseract',\r\n                    words: result.data.words || []\r\n                };\r\n\r\n            } finally {\r\n                this._hideProgress();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Ensure Tesseract.js is loaded\r\n         */\r\n        async _ensureTesseractLoaded() {\r\n            if (tesseractLoaded && window.Tesseract) {\r\n                return true;\r\n            }\r\n\r\n            return new Promise((resolve, reject) => {\r\n                const script = document.createElement('script');\r\n                script.src = TESSERACT_CDN;\r\n                script.onload = () => {\r\n                    tesseractLoaded = true;\r\n                    console.log('Tesseract.js loaded');\r\n                    resolve(true);\r\n                };\r\n                script.onerror = () => {\r\n                    reject(new Error('Failed to load Tesseract.js'));\r\n                };\r\n                document.head.appendChild(script);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Extract and parse picks from image\r\n         * @param {File} file - Image file object\r\n         * @returns {Promise<Object>} - { picks, rawText, method }\r\n         */\r\n        async extractAndParsePicks(file) {\r\n            const result = await this.extractText(file);\r\n\r\n            if (!result.text) {\r\n                return { \r\n                    picks: [], \r\n                    rawText: '', \r\n                    error: 'No text extracted from image',\r\n                    method: result.method \r\n                };\r\n            }\r\n\r\n            console.log(`OCR extracted (${result.method}):`, result.text.substring(0, 300) + '...');\r\n\r\n            // Use existing PickParser if available\r\n            if (window.PickParser) {\r\n                const picks = window.PickParser.parseText(result.text);\r\n                return { \r\n                    picks, \r\n                    rawText: result.text, \r\n                    confidence: result.confidence,\r\n                    method: result.method \r\n                };\r\n            }\r\n\r\n            return { \r\n                picks: [], \r\n                rawText: result.text,\r\n                confidence: result.confidence,\r\n                method: result.method \r\n            };\r\n        }\r\n\r\n        /**\r\n         * Check if file is an image\r\n         */\r\n        isImage(file) {\r\n            if (!file) return false;\r\n            \r\n            const imageTypes = [\r\n                'image/png', \r\n                'image/jpeg', \r\n                'image/jpg', \r\n                'image/gif', \r\n                'image/bmp', \r\n                'image/webp'\r\n            ];\r\n            \r\n            return imageTypes.includes(file.type) || \r\n                   /\\.(png|jpe?g|gif|bmp|webp)$/i.test(file.name);\r\n        }\r\n\r\n        /**\r\n         * Show OCR progress indicator\r\n         */\r\n        _showProgress(message) {\r\n            let indicator = document.getElementById('ocr-progress-indicator');\r\n            \r\n            if (!indicator) {\r\n                indicator = document.createElement('div');\r\n                indicator.id = 'ocr-progress-indicator';\r\n                indicator.style.cssText = `\r\n                    position: fixed;\r\n                    top: 50%;\r\n                    left: 50%;\r\n                    transform: translate(-50%, -50%);\r\n                    background: rgba(0, 0, 0, 0.85);\r\n                    color: #fff;\r\n                    padding: 24px 40px;\r\n                    border-radius: 12px;\r\n                    font-size: 16px;\r\n                    z-index: 10001;\r\n                    text-align: center;\r\n                    box-shadow: 0 4px 20px rgba(0,0,0,0.5);\r\n                `;\r\n                document.body.appendChild(indicator);\r\n            }\r\n\r\n            indicator.innerHTML = `\r\n                <div style=\"margin-bottom: 10px;\">\uD83D\uDCF7 Image OCR</div>\r\n                <div>${message}</div>\r\n            `;\r\n            indicator.style.display = 'block';\r\n        }\r\n\r\n        /**\r\n         * Hide OCR progress indicator\r\n         */\r\n        _hideProgress() {\r\n            const indicator = document.getElementById('ocr-progress-indicator');\r\n            if (indicator) {\r\n                indicator.style.display = 'none';\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create singleton instance\r\n    window.ImageOCRParser = new ImageOCRParser();\r\n\r\n})();\r\n\n\n/* === assets/js/features/basketball-api-client.js === */\n/**\r\n * Basketball API Client v1.0.0\r\n * Secondary data source for NBA and NCAAM\r\n * Uses API key from Azure Key Vault via Azure Functions proxy\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    // Proxy through Azure Functions to keep API key server-side\r\n    const getProxyEndpoint = () => {\r\n        const base = window.APP_CONFIG?.FUNCTIONS_BASE_URL || '';\r\n        return `${base}/api/basketball-api`;\r\n    };\r\n\r\n    class BasketballAPIClient {\r\n        constructor() {\r\n            this.baseUrl = getProxyEndpoint();\r\n            this.cache = new Map();\r\n            this.cacheExpiry = 5 * 60 * 1000; // 5 minutes\r\n        }\r\n\r\n        /**\r\n         * Get NBA games for a specific date\r\n         * @param {string} date - Date in YYYY-MM-DD format\r\n         */\r\n        async getNBAGames(date) {\r\n            const cacheKey = `nba-games-${date}`;\r\n            \r\n            if (this._isCacheValid(cacheKey)) {\r\n                return this.cache.get(cacheKey).data;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/nba/games?date=${date}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch NBA games: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this._setCache(cacheKey, data);\r\n                return data;\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - NBA games error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get NCAAM games for a specific date\r\n         * @param {string} date - Date in YYYY-MM-DD format\r\n         */\r\n        async getNCAMGames(date) {\r\n            const cacheKey = `ncaam-games-${date}`;\r\n            \r\n            if (this._isCacheValid(cacheKey)) {\r\n                return this.cache.get(cacheKey).data;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/ncaam/games?date=${date}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch NCAAM games: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this._setCache(cacheKey, data);\r\n                return data;\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - NCAAM games error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get live scores for a specific game\r\n         * @param {string} gameId - Game ID\r\n         * @param {string} league - 'nba' or 'ncaam'\r\n         */\r\n        async getLiveScore(gameId, league = 'nba') {\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/${league}/game/${gameId}/live`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch live score: ${response.status}`);\r\n                }\r\n\r\n                return await response.json();\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - Live score error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get team standings\r\n         * @param {string} league - 'nba' or 'ncaam'\r\n         * @param {string} season - Season year (e.g., '2025')\r\n         */\r\n        async getStandings(league = 'nba', season = '2025') {\r\n            const cacheKey = `${league}-standings-${season}`;\r\n            \r\n            if (this._isCacheValid(cacheKey)) {\r\n                return this.cache.get(cacheKey).data;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/${league}/standings?season=${season}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch standings: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this._setCache(cacheKey, data);\r\n                return data;\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - Standings error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get team statistics\r\n         * @param {string} teamId - Team ID\r\n         * @param {string} league - 'nba' or 'ncaam'\r\n         */\r\n        async getTeamStats(teamId, league = 'nba') {\r\n            const cacheKey = `${league}-team-${teamId}`;\r\n            \r\n            if (this._isCacheValid(cacheKey)) {\r\n                return this.cache.get(cacheKey).data;\r\n            }\r\n\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/${league}/team/${teamId}/stats`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch team stats: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this._setCache(cacheKey, data);\r\n                return data;\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - Team stats error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get odds for upcoming games\r\n         * @param {string} league - 'nba' or 'ncaam'\r\n         */\r\n        async getOdds(league = 'nba') {\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/${league}/odds`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch odds: ${response.status}`);\r\n                }\r\n\r\n                return await response.json();\r\n\r\n            } catch (error) {\r\n                console.error('Basketball API - Odds error:', error);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Check if cache entry is valid\r\n         */\r\n        _isCacheValid(key) {\r\n            const entry = this.cache.get(key);\r\n            if (!entry) return false;\r\n            return Date.now() - entry.timestamp < this.cacheExpiry;\r\n        }\r\n\r\n        /**\r\n         * Set cache entry\r\n         */\r\n        _setCache(key, data) {\r\n            this.cache.set(key, {\r\n                data,\r\n                timestamp: Date.now()\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Clear all cached data\r\n         */\r\n        clearCache() {\r\n            this.cache.clear();\r\n        }\r\n\r\n        /**\r\n         * Test API connectivity\r\n         */\r\n        async testConnection() {\r\n            try {\r\n                const response = await fetch(`${this.baseUrl}/health`);\r\n                return response.ok;\r\n            } catch (error) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Create singleton instance\r\n    window.BasketballAPIClient = new BasketballAPIClient();\r\n\r\n})();\r\n\n\n/* === assets/js/features/sportsbook-connector.js === */\n/**\r\n * Sportsbook API Integration v1.0.0\r\n * Connects to sportsbook APIs to fetch placed bets for tracking\r\n * Supports multiple sportsbooks with modular adapters\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const getApiBase = () => window.APP_CONFIG?.FUNCTIONS_BASE_URL || '';\r\n\r\n    class SportsbookConnector {\r\n        constructor() {\r\n            this.connectedBooks = new Map();\r\n            this.adapters = {};\r\n            this.initialized = false;\r\n        }\r\n\r\n        /**\r\n         * Initialize connector\r\n         */\r\n        init() {\r\n            if (this.initialized) return;\r\n\r\n            // Register built-in adapters\r\n            this._registerAdapters();\r\n\r\n            // Load saved connections\r\n            this._loadConnections();\r\n\r\n            this.initialized = true;\r\n            console.log('\uD83D\uDCDA Sportsbook Connector initialized');\r\n        }\r\n\r\n        /**\r\n         * Register sportsbook adapters\r\n         */\r\n        _registerAdapters() {\r\n            // Each adapter knows how to connect and fetch bets from a specific sportsbook\r\n            this.adapters = {\r\n                'action_network': {\r\n                    name: 'Action Network',\r\n                    logo: '/assets/sportsbooks/actionnetwork.png',\r\n                    authType: 'credentials',\r\n                    fetchBets: (auth) => this._fetchActionNetworkBets(auth),\r\n                    parseBet: (raw) => this._parseActionNetworkBet(raw)\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Load saved sportsbook connections from localStorage\r\n         */\r\n        _loadConnections() {\r\n            const TOKEN_MAX_AGE_MS = 24 * 60 * 60 * 1000; // 24 hours\r\n            try {\r\n                const saved = localStorage.getItem('gbsv_sportsbook_connections');\r\n                if (saved) {\r\n                    const connections = JSON.parse(saved);\r\n                    connections.forEach(conn => {\r\n                        // Reject stale tokens older than TOKEN_MAX_AGE_MS\r\n                        const connectedAt = conn.connectedAt ? new Date(conn.connectedAt).getTime() : 0;\r\n                        if (Date.now() - connectedAt > TOKEN_MAX_AGE_MS) {\r\n                            console.warn(`[SPORTSBOOK] Expired token for ${conn.bookId}, removing`);\r\n                            return; // skip this connection\r\n                        }\r\n                        this.connectedBooks.set(conn.bookId, {\r\n                            ...conn,\r\n                            lastSync: conn.lastSync ? new Date(conn.lastSync) : null\r\n                        });\r\n                    });\r\n                    // Persist cleaned list (without expired entries)\r\n                    this._saveConnections();\r\n                }\r\n            } catch (e) {\r\n                console.error('Failed to load sportsbook connections:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Save connections to localStorage\r\n         */\r\n        _saveConnections() {\r\n            try {\r\n                const connections = Array.from(this.connectedBooks.values());\r\n                localStorage.setItem('gbsv_sportsbook_connections', JSON.stringify(connections));\r\n            } catch (e) {\r\n                console.error('Failed to save sportsbook connections:', e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get list of available sportsbooks\r\n         */\r\n        getAvailableBooks() {\r\n            return Object.entries(this.adapters).map(([id, adapter]) => ({\r\n                id,\r\n                name: adapter.name,\r\n                logo: adapter.logo,\r\n                authType: adapter.authType,\r\n                connected: this.connectedBooks.has(id)\r\n            }));\r\n        }\r\n\r\n        /**\r\n         * Get connected sportsbooks\r\n         */\r\n        getConnectedBooks() {\r\n            return Array.from(this.connectedBooks.values());\r\n        }\r\n\r\n        /**\r\n         * Connect to a sportsbook\r\n         */\r\n        async connect(bookId, credentials) {\r\n            const adapter = this.adapters[bookId];\r\n            if (!adapter) {\r\n                throw new Error(`Unknown sportsbook: ${bookId}`);\r\n            }\r\n\r\n            // For OAuth, redirect to auth flow\r\n            if (adapter.authType === 'oauth') {\r\n                return this._initiateOAuth(bookId);\r\n            }\r\n\r\n            // For credentials, validate via server\r\n            const response = await fetch(`${getApiBase()}/api/sportsbook/connect`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ bookId, credentials })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const error = await response.json();\r\n                throw new Error(error.message || 'Failed to connect');\r\n            }\r\n\r\n            const result = await response.json();\r\n\r\n            // Store connection (without actual credentials)\r\n            this.connectedBooks.set(bookId, {\r\n                bookId,\r\n                name: adapter.name,\r\n                connectedAt: new Date().toISOString(),\r\n                lastSync: null,\r\n                token: result.token // Encrypted token from server\r\n            });\r\n\r\n            this._saveConnections();\r\n\r\n            window.dispatchEvent(new CustomEvent('sportsbook:connected', {\r\n                detail: { bookId, name: adapter.name }\r\n            }));\r\n\r\n            return result;\r\n        }\r\n\r\n        /**\r\n         * Disconnect from a sportsbook\r\n         */\r\n        disconnect(bookId) {\r\n            if (this.connectedBooks.has(bookId)) {\r\n                this.connectedBooks.delete(bookId);\r\n                this._saveConnections();\r\n\r\n                window.dispatchEvent(new CustomEvent('sportsbook:disconnected', {\r\n                    detail: { bookId }\r\n                }));\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Fetch bets from a connected sportsbook\r\n         */\r\n        async fetchBets(bookId, options = {}) {\r\n            const connection = this.connectedBooks.get(bookId);\r\n            if (!connection) {\r\n                throw new Error(`Not connected to ${bookId}`);\r\n            }\r\n\r\n            const response = await fetch(`${getApiBase()}/api/sportsbook/bets`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    bookId,\r\n                    token: connection.token,\r\n                    dateRange: options.dateRange || 'week',\r\n                    status: options.status || 'all' // open, settled, all\r\n                })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch bets');\r\n            }\r\n\r\n            const data = await response.json();\r\n            const adapter = this.adapters[bookId];\r\n\r\n            // Parse bets using adapter\r\n            const bets = (data.bets || []).map(raw => adapter.parseBet(raw));\r\n\r\n            // Update last sync time\r\n            connection.lastSync = new Date().toISOString();\r\n            this._saveConnections();\r\n\r\n            return bets;\r\n        }\r\n\r\n        /**\r\n         * Fetch bets from all connected sportsbooks\r\n         */\r\n        async fetchAllBets(options = {}) {\r\n            const allBets = [];\r\n\r\n            for (const [bookId, connection] of this.connectedBooks) {\r\n                try {\r\n                    const bets = await this.fetchBets(bookId, options);\r\n                    allBets.push(...bets.map(b => ({ ...b, source: bookId })));\r\n                } catch (error) {\r\n                    console.error(`Failed to fetch from ${bookId}:`, error);\r\n                }\r\n            }\r\n\r\n            // Sort by date\r\n            allBets.sort((a, b) => new Date(b.placedAt) - new Date(a.placedAt));\r\n\r\n            return allBets;\r\n        }\r\n\r\n        /**\r\n         * Sync bets to dashboard\r\n         */\r\n        async syncToDashboard(bets) {\r\n            if (!bets || bets.length === 0) return [];\r\n\r\n            const added = [];\r\n\r\n            for (const bet of bets) {\r\n                // Convert to standard pick format\r\n                const pick = this._convertToPickFormat(bet);\r\n\r\n                // Add to dashboard\r\n                if (window.LocalPicksManager) {\r\n                    try {\r\n                        await window.LocalPicksManager.addPick(pick);\r\n                        added.push(pick);\r\n                    } catch (e) {\r\n                        console.error('Failed to add bet to dashboard:', e);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return added;\r\n        }\r\n\r\n        /**\r\n         * Convert sportsbook bet to standard pick format\r\n         */\r\n        _convertToPickFormat(bet) {\r\n            return {\r\n                id: `${bet.source}-${bet.betId}`,\r\n                source: bet.source,\r\n                league: bet.league,\r\n                gameDate: bet.gameDate,\r\n                gameTime: bet.gameTime,\r\n                awayTeam: bet.awayTeam,\r\n                homeTeam: bet.homeTeam,\r\n                pick: bet.selection,\r\n                odds: bet.odds,\r\n                risk: bet.stake,\r\n                toWin: bet.potentialWin,\r\n                outcome: bet.outcome,\r\n                sportsbook: bet.source,\r\n                placedAt: bet.placedAt,\r\n                settledAt: bet.settledAt\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Initiate OAuth flow\r\n         */\r\n        _initiateOAuth(bookId) {\r\n            const returnUrl = encodeURIComponent(window.location.href);\r\n            window.location.href = `${getApiBase()}/api/sportsbook/oauth/${bookId}?redirect=${returnUrl}`;\r\n        }\r\n\r\n        // ===== ADAPTER IMPLEMENTATIONS =====\r\n\r\n        async _fetchActionNetworkBets(auth) {\r\n            // Action Network sync via their API\r\n            return [];\r\n        }\r\n\r\n        _parseActionNetworkBet(raw) {\r\n            return {\r\n                betId: raw.id,\r\n                league: raw.sport?.toUpperCase(),\r\n                awayTeam: raw.away_team,\r\n                homeTeam: raw.home_team,\r\n                selection: raw.pick_label,\r\n                odds: raw.odds,\r\n                stake: raw.risk,\r\n                potentialWin: raw.to_win,\r\n                outcome: raw.result,\r\n                placedAt: raw.created_at,\r\n                settledAt: raw.settled_at,\r\n                gameDate: raw.game_date,\r\n                gameTime: raw.game_time\r\n            };\r\n        }\r\n    }\r\n\r\n    // Create singleton\r\n    window.SportsbookConnector = new SportsbookConnector();\r\n\r\n    // Init on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => window.SportsbookConnector.init());\r\n    } else {\r\n        window.SportsbookConnector.init();\r\n    }\r\n\r\n})();\r\n\n\n/* === assets/js/mobile/mobile-enhancements.js === */\n(function(){\r\n  'use strict';\r\n  \r\n  function setupWeeklyLineupFab(){\r\n    const fab = document.getElementById('mobile-fetch-fab');\r\n    const menu = document.getElementById('mobile-fetch-menu');\r\n    if(!fab || !menu) {\r\n      console.log('Mobile FAB not found (expected on desktop)');\r\n      return;\r\n    }\r\n\r\n    const closeMenu = () => {\r\n      menu.setAttribute('hidden','');\r\n      fab.setAttribute('aria-expanded','false');\r\n    };\r\n    const openMenu = () => {\r\n      menu.removeAttribute('hidden');\r\n      fab.setAttribute('aria-expanded','true');\r\n    };\r\n\r\n    fab.addEventListener('click',(e)=>{\r\n      e.stopPropagation();\r\n      if(menu.hasAttribute('hidden')) openMenu(); else closeMenu();\r\n    });\r\n\r\n    document.addEventListener('click',(e)=>{\r\n      if(!menu.hasAttribute('hidden')){\r\n        const within = menu.contains(e.target) || fab.contains(e.target);\r\n        if(!within) closeMenu();\r\n      }\r\n    });\r\n\r\n    document.addEventListener('keydown',(e)=>{\r\n      if(e.key === 'Escape') closeMenu();\r\n    });\r\n\r\n    menu.querySelectorAll('.fab-item').forEach(btn=>{\r\n      btn.addEventListener('click', ()=>{\r\n        const code = (btn.getAttribute('data-fetch')||'').toLowerCase();\r\n        let target;\r\n        if(code === 'all') {\r\n          target = document.querySelector('.ft-fetch-all, [data-fetch=\"all\"]');\r\n        } else {\r\n          target = document.querySelector(`.ft-fetch-league-btn[data-fetch=\"${code}\"], button[data-fetch=\"${code}\"]`);\r\n        }\r\n        if(target){\r\n          console.log('Triggering fetch for:', code);\r\n          target.click();\r\n        } else {\r\n          console.warn('Fetch control not found for:', code);\r\n        }\r\n        closeMenu();\r\n      });\r\n    });\r\n  }\r\n\r\n  document.addEventListener('DOMContentLoaded', function(){\r\n    const body = document.body;\r\n    if(body && body.classList.contains('page-weekly-lineup')){\r\n      setupWeeklyLineupFab();\r\n    }\r\n  });\r\n})();\r\n\n\n/* === assets/js/weekly-lineup-mobile.js === */\n/**\r\n * Weekly Lineup Mobile Experience\r\n * Complete mobile handling for weekly-lineup page\r\n */\r\n\r\n(function() {\r\n    'use strict';\r\n\r\n    const WeeklyLineupMobile = {\r\n        isMobile: false,\r\n        \r\n        init() {\r\n            this.isMobile = window.innerWidth <= 767;\r\n            if (!this.isMobile) return;\r\n            \r\n            console.log('[Weekly Mobile] Initializing mobile experience');\r\n            \r\n            // Only run on weekly-lineup page\r\n            if (!document.body.classList.contains('page-weekly-lineup')) return;\r\n            \r\n            this.setupMobileUI();\r\n            this.setupInteractions();\r\n            this.optimizePerformance();\r\n        },\r\n\r\n        setupMobileUI() {\r\n            // Add mobile class for CSS targeting\r\n            document.body.classList.add('is-mobile');\r\n            \r\n            // Create floating action button\r\n            this.createFAB();\r\n            \r\n            // Create bottom navigation\r\n            this.createBottomNav();\r\n            \r\n            // Add data labels to table cells for card view\r\n            this.addDataLabels();\r\n            \r\n            // Add status data attributes to rows\r\n            this.addStatusAttributes();\r\n        },\r\n\r\n        createFAB() {\r\n            const fab = document.createElement('button');\r\n            fab.className = 'mobile-fab';\r\n            fab.innerHTML = '\u21BB';\r\n            fab.setAttribute('aria-label', 'Refresh picks');\r\n            \r\n            fab.addEventListener('click', () => {\r\n                fab.classList.add('rotating');\r\n                this.refreshData(() => {\r\n                    fab.classList.remove('rotating');\r\n                });\r\n            });\r\n            \r\n            document.body.appendChild(fab);\r\n        },\r\n\r\n        createBottomNav() {\r\n            const nav = document.createElement('nav');\r\n            nav.className = 'mobile-bottom-nav';\r\n            nav.innerHTML = `\r\n                <a href=\"index.html\" class=\"mobile-nav-item\">\r\n                    <span>\uD83D\uDCCA</span>\r\n                    <span>Dashboard</span>\r\n                </a>\r\n                <a href=\"weekly-lineup.html\" class=\"mobile-nav-item active\">\r\n                    <span>\uD83D\uDCCB</span>\r\n                    <span>Lineup</span>\r\n                </a>\r\n                <a href=\"odds-market.html\" class=\"mobile-nav-item\">\r\n                    <span>\uD83D\uDCB0</span>\r\n                    <span>Odds</span>\r\n                </a>\r\n                <div class=\"mobile-nav-item\" data-action=\"filter\">\r\n                    <span>\u2699</span>\r\n                    <span>Filter</span>\r\n                </div>\r\n            `;\r\n            \r\n            document.body.appendChild(nav);\r\n            \r\n            // Handle filter click\r\n            nav.querySelector('[data-action=\"filter\"]').addEventListener('click', () => {\r\n                this.toggleFilterPanel();\r\n            });\r\n        },\r\n\r\n        addDataLabels() {\r\n            const rows = document.querySelectorAll('.weekly-lineup-table tbody tr');\r\n            rows.forEach(row => {\r\n                const cells = row.querySelectorAll('td');\r\n                const labels = ['Status', 'League', 'Teams', 'Time', 'Pick', 'Odds', 'Book', 'Amount', 'Payout', 'Result'];\r\n                \r\n                cells.forEach((cell, index) => {\r\n                    if (labels[index]) {\r\n                        cell.setAttribute('data-label', labels[index]);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        addStatusAttributes() {\r\n            const rows = document.querySelectorAll('.weekly-lineup-table tbody tr');\r\n            rows.forEach(row => {\r\n                // Try to determine status from status cell or class\r\n                const statusCell = row.querySelector('td:nth-child(10)');\r\n                if (statusCell) {\r\n                    const statusText = statusCell.textContent.toLowerCase().trim();\r\n                    if (statusText.includes('won')) {\r\n                        row.setAttribute('data-status', 'won');\r\n                    } else if (statusText.includes('lost')) {\r\n                        row.setAttribute('data-status', 'lost');\r\n                    } else if (statusText.includes('live') || statusText.includes('on track')) {\r\n                        row.setAttribute('data-status', 'live');\r\n                    } else if (statusText.includes('pending')) {\r\n                        row.setAttribute('data-status', 'pending');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        setupInteractions() {\r\n            // Add swipe to reveal actions on cards\r\n            const rows = document.querySelectorAll('.weekly-lineup-table tbody tr');\r\n            rows.forEach(row => {\r\n                let startX = 0;\r\n                let currentX = 0;\r\n                let isDragging = false;\r\n                \r\n                row.addEventListener('touchstart', (e) => {\r\n                    startX = e.touches[0].clientX;\r\n                    isDragging = true;\r\n                }, { passive: true });\r\n                \r\n                row.addEventListener('touchmove', (e) => {\r\n                    if (!isDragging) return;\r\n                    currentX = e.touches[0].clientX;\r\n                    const diff = currentX - startX;\r\n                    \r\n                    if (Math.abs(diff) > 10) {\r\n                        e.preventDefault();\r\n                        row.style.transform = `translateX(${diff}px)`;\r\n                    }\r\n                }, { passive: false });\r\n                \r\n                row.addEventListener('touchend', () => {\r\n                    isDragging = false;\r\n                    const diff = currentX - startX;\r\n                    \r\n                    if (Math.abs(diff) > 100) {\r\n                        // Swipe action threshold\r\n                        row.style.transform = '';\r\n                        // Could trigger an action here\r\n                    } else {\r\n                        row.style.transform = '';\r\n                    }\r\n                });\r\n            });\r\n            \r\n            // Pull to refresh\r\n            this.setupPullToRefresh();\r\n        },\r\n\r\n        setupPullToRefresh() {\r\n            let startY = 0;\r\n            let pullDistance = 0;\r\n            const threshold = 100;\r\n            \r\n            document.addEventListener('touchstart', (e) => {\r\n                if (window.scrollY === 0) {\r\n                    startY = e.touches[0].clientY;\r\n                }\r\n            }, { passive: true });\r\n            \r\n            document.addEventListener('touchmove', (e) => {\r\n                if (startY > 0) {\r\n                    pullDistance = e.touches[0].clientY - startY;\r\n                    if (pullDistance > 0 && window.scrollY === 0) {\r\n                        e.preventDefault();\r\n                        document.body.style.transform = `translateY(${Math.min(pullDistance / 2, 80)}px)`;\r\n                    }\r\n                }\r\n            }, { passive: false });\r\n            \r\n            document.addEventListener('touchend', () => {\r\n                if (pullDistance > threshold) {\r\n                    this.refreshData();\r\n                }\r\n                document.body.style.transform = '';\r\n                startY = 0;\r\n                pullDistance = 0;\r\n            });\r\n        },\r\n\r\n        toggleFilterPanel() {\r\n            // Create filter panel if it doesn't exist\r\n            let panel = document.querySelector('.mobile-filter-panel');\r\n            if (!panel) {\r\n                panel = document.createElement('div');\r\n                panel.className = 'mobile-filter-panel';\r\n                panel.innerHTML = `\r\n                    <div class=\"filter-header\">\r\n                        <h3>Filters</h3>\r\n                        <button class=\"close-btn\">\u2715</button>\r\n                    </div>\r\n                    <div class=\"filter-options\">\r\n                        <button class=\"filter-btn active\" data-filter=\"all\">All</button>\r\n                        <button class=\"filter-btn\" data-filter=\"pending\">Pending</button>\r\n                        <button class=\"filter-btn\" data-filter=\"live\">Live</button>\r\n                        <button class=\"filter-btn\" data-filter=\"won\">Won</button>\r\n                        <button class=\"filter-btn\" data-filter=\"lost\">Lost</button>\r\n                    </div>\r\n                `;\r\n                document.body.appendChild(panel);\r\n                \r\n                // Setup filter buttons\r\n                panel.querySelectorAll('.filter-btn').forEach(btn => {\r\n                    btn.addEventListener('click', (e) => {\r\n                        panel.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));\r\n                        e.target.classList.add('active');\r\n                        this.applyFilter(e.target.dataset.filter);\r\n                    });\r\n                });\r\n                \r\n                // Close button\r\n                panel.querySelector('.close-btn').addEventListener('click', () => {\r\n                    panel.classList.remove('active');\r\n                });\r\n            }\r\n            \r\n            panel.classList.toggle('active');\r\n        },\r\n\r\n        applyFilter(filter) {\r\n            const rows = document.querySelectorAll('.weekly-lineup-table tbody tr');\r\n            rows.forEach(row => {\r\n                if (filter === 'all') {\r\n                    row.style.display = '';\r\n                } else {\r\n                    const status = row.getAttribute('data-status');\r\n                    row.style.display = status === filter ? '' : 'none';\r\n                }\r\n            });\r\n        },\r\n\r\n        refreshData(callback) {\r\n            console.log('[Weekly Mobile] Refreshing data...');\r\n            \r\n            // Try to use existing refresh mechanisms\r\n            if (window.ActivePicks?.refreshData) {\r\n                window.ActivePicks.refreshData();\r\n            } else if (window.location.reload) {\r\n                window.location.reload();\r\n            }\r\n            \r\n            // Simulate completion\r\n            setTimeout(() => {\r\n                if (callback) callback();\r\n            }, 2000);\r\n        },\r\n\r\n        optimizePerformance() {\r\n            // Use passive event listeners where possible\r\n            const passiveSupported = this.checkPassiveSupport();\r\n            const passiveOptions = passiveSupported ? { passive: true } : false;\r\n            \r\n            // Throttle scroll events\r\n            let scrollTimeout;\r\n            window.addEventListener('scroll', () => {\r\n                if (scrollTimeout) return;\r\n                scrollTimeout = setTimeout(() => {\r\n                    scrollTimeout = null;\r\n                    // Handle scroll\r\n                }, 100);\r\n            }, passiveOptions);\r\n            \r\n            // Add will-change to animated elements\r\n            document.querySelectorAll('.weekly-lineup-table tbody tr').forEach(row => {\r\n                row.style.willChange = 'transform';\r\n            });\r\n            \r\n            // Intersection observer for lazy loading\r\n            if ('IntersectionObserver' in window) {\r\n                const observer = new IntersectionObserver((entries) => {\r\n                    entries.forEach(entry => {\r\n                        if (entry.isIntersecting) {\r\n                            entry.target.classList.add('visible');\r\n                        }\r\n                    });\r\n                }, { rootMargin: '50px' });\r\n                \r\n                document.querySelectorAll('.weekly-lineup-table tbody tr').forEach(row => {\r\n                    observer.observe(row);\r\n                });\r\n            }\r\n        },\r\n\r\n        checkPassiveSupport() {\r\n            let supportsPassive = false;\r\n            try {\r\n                const opts = Object.defineProperty({}, 'passive', {\r\n                    get: function() {\r\n                        supportsPassive = true;\r\n                    }\r\n                });\r\n                window.addEventListener('testPassive', null, opts);\r\n                window.removeEventListener('testPassive', null, opts);\r\n            } catch (e) {}\r\n            return supportsPassive;\r\n        }\r\n    };\r\n\r\n    // Initialize on DOM ready\r\n    if (document.readyState === 'loading') {\r\n        document.addEventListener('DOMContentLoaded', () => WeeklyLineupMobile.init());\r\n    } else {\r\n        WeeklyLineupMobile.init();\r\n    }\r\n\r\n    // Reinitialize on resize\r\n    let resizeTimer;\r\n    window.addEventListener('resize', () => {\r\n        clearTimeout(resizeTimer);\r\n        resizeTimer = setTimeout(() => {\r\n            const wasMobile = WeeklyLineupMobile.isMobile;\r\n            const isMobile = window.innerWidth <= 767;\r\n            \r\n            if (wasMobile !== isMobile) {\r\n                if (isMobile) {\r\n                    WeeklyLineupMobile.init();\r\n                } else {\r\n                    // Clean up mobile UI\r\n                    document.body.classList.remove('is-mobile');\r\n                    document.querySelector('.mobile-fab')?.remove();\r\n                    document.querySelector('.mobile-bottom-nav')?.remove();\r\n                }\r\n            }\r\n        }, 250);\r\n    });\r\n\r\n    // Export for debugging\r\n    window.WeeklyLineupMobile = WeeklyLineupMobile;\r\n\r\n})();"],
  "mappings": "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",
  "names": ["_columnIndexCache", "DOMUtils", "row", "columnKey", "table", "cacheForTable", "th", "rowEl", "idx", "el", "oneBased", "fallbackIndex", "value", "div", "num", "formatted", "dateText", "weekday", "match", "month", "day", "year", "date", "status", "lower", "type", "subtype", "segment", "tag", "attributes", "children", "element", "key", "child", "button", "dropdown", "btnRect", "dropdownHeight", "viewportHeight", "btnId", "btn", "name", "words", "w", "txt", "func", "wait", "timeout", "args", "later", "limit", "inThrottle", "rect", "options", "defaultOptions", "selector", "isLoading", "text", "originalText", "rangeStr", "parts", "p", "range", "min", "max", "event", "handler", "updates", "update", "elements", "fragment", "StateShapeValidators", "state", "dateFilter", "matchupFilter", "riskFilter", "StateManager", "filterType", "parlayId", "isExpanded", "index", "isCurrentlyExpanded", "column", "direction", "filters", "count", "TableRenderer", "tbody", "node", "className", "otherClass", "legsRow", "parentRows", "rows", "shouldShow", "container", "chips", "label", "chip", "chipEl", "labelSpan", "removeBtn", "clearAllBtn", "indicators", "hasFilter", "indicator", "filterCount", "countEl", "message", "announcer", "zebraDebounceTimer", "FilterManager", "dateCell", "dateEl", "timeEl", "bookEl", "timeText", "bookText", "weekdayEl", "matchupCell", "logos", "teams", "logo", "pickCell", "pickText", "betTypeEl", "betType", "columnIndex", "cell", "amountEl", "statusCell", "badge", "raw", "betTypeAttr", "segmentCell", "segmentSpan", "ranges", "v", "time", "book", "normalizedDate", "selected", "normalizedTime", "normalizedBook", "isParlay", "matchupText", "team", "detected", "risk", "win", "filter", "start", "end", "rowEpoch", "epochNum", "rowDate", "startDate", "endDate", "rowLeague", "l", "rowSegment", "normalizedRowSegment", "s", "debouncedApply", "stateKey", "checkboxes", "grouped", "cb", "group", "teamCheckboxes", "selectedTeams", "betTypeSelect", "subtypeSelect", "segmentSelect", "riskContainer", "winContainer", "checked", "statuses", "leagues", "allCheckboxes", "segments", "leagueSelect", "PICKS_ENDPOINT", "picksCache", "lastFetch", "CACHE_TTL", "apiRequest", "endpoint", "url", "config", "response", "data", "error", "invalidateCache", "getAll", "params", "query", "getActive", "getSettled", "getById", "id", "getByLeague", "league", "getByDate", "getByDateRange", "fromDate", "toDate", "getToday", "today", "create", "picks", "body", "updateStatus", "additionalUpdates", "markWon", "pnl", "markLost", "markPush", "remove", "clearAll", "confirm", "getSummary", "summary", "pick", "migrateFromLocalStorage", "STORAGE_KEY", "localData", "localPicks", "result", "checkMigrationNeeded", "UNIT_MULTIPLIER_KEY", "getAllPicks", "e", "savePicks", "addPicks", "newPicks", "existing", "enrichedPicks", "sport", "awayTeam", "homeTeam", "pickDirection", "pickType", "all", "clearPicks", "refreshPicksTable", "deletePick", "pickId", "updatePickStatus", "newStatus", "getUnitMultiplier", "setUnitMultiplier", "multiplier", "formatStatusLabel", "normalizedStatus", "labelMap", "generateStatusBlurb", "line", "TEAM_DATA_FALLBACK", "getTeamLogoUrl", "teamAbbr", "logoId", "teamId", "getTeamInfo", "teamName", "info", "getTeamInfoSync", "parseAndAddPicks", "content", "sportsbook", "defaultRisk", "picksWithBook", "oddsNum", "enrichPicksWithGameData", "added", "todaysGames", "g", "enriched", "teamToFind", "game", "formatCurrencyValue", "val", "formatDateValue", "d", "getLeagueLogo", "leagueUpper", "standardLeague", "renderLeagueCell", "sportUpper", "displayText", "tableContainer", "createPickRow", "kpis", "games", "attachSportsbookDropdownListeners", "attachRiskWinEditListeners", "handleSportsbookChange", "newSportsbook", "riskInputs", "winInputs", "input", "handleRiskChange", "handleWinChange", "newRisk", "newWin", "pickTeamInfo", "awayRecord", "homeRecord", "awayInfo", "homeInfo", "segmentKey", "segmentLabel", "selection", "leagueNormMap", "epochTime", "isSingleTeamBet", "awayLogoHtml", "homeLogoHtml", "pickLogoHtml", "matchupHtml", "useQuarters", "boxscoreClass", "awayBoxRow", "homeBoxRow", "headerCells", "pickStatus", "statusText", "statusClass", "boxscoreHtml", "formatWonLost", "amount", "hitMissValue", "wonLostValue", "reEnrichExistingPicks", "attempts", "r", "updated", "cleanupStalePicks", "daysOld", "LAST_CLEANUP_KEY", "lastCleanup", "cutoffDate", "freshPicks", "dateStr", "pickDate", "removed", "cleanupSampleData", "CLEANUP_VERSION_KEY", "sampleSources", "realPicks", "source", "isDashboardPage", "path", "initialize", "getActivePicks", "getSettledPicks", "getPicksByDateRange", "getTodaysPicks", "now", "startOfDay", "endOfDay", "archiveOldPicks", "toArchive", "toKeep", "isSettled", "existingArchive", "WEEKLY_LINEUP_KEY", "DASHBOARD_KEY", "WeeklyLineupSync", "parsed", "dashboardPicks", "pending", "LiveScoreUpdater", "picksBySport", "sportPicks", "boxScore", "awayTotal", "homeTotal", "configKey", "resolvedEndpoint", "base", "sportGames", "normalizedGame", "functionsBase", "sportPath", "controller", "timeoutId", "sdGame", "isScheduled", "isFinal", "isLive", "scoring", "q", "periodKey", "sportCategory", "events", "competition", "competitors", "t", "awayMatch", "homeMatch", "team1", "team2", "normalize", "str", "period", "scores", "awayCell", "homeCell", "gameStatus", "awayScore", "homeScore", "spread", "actualSpread", "isAwayPick", "pickScore", "oppScore", "total", "actualTotal", "isOver", "projectedTotal", "statusBadge", "updatedPicks", "tile", "seconds", "liveUpdater", "todayISO", "todayESPN", "STANDINGS_TTL_MS", "SCOREBOARD_INTERVAL_INITIAL_MS", "SCOREBOARD_INTERVAL_MAX_MS", "todaysGamesCache", "teamRecordsCache", "lastStandingsFetch", "scoreboardIntervalMs", "getScoreboardProxyUrl", "apiBase", "fetchSportsDataIO", "fetchStandings", "conferences", "conf", "entries", "entry", "stats", "winsObj", "lossesObj", "wins", "losses", "getTeamRecord", "fetchESPN", "parseESPNGames", "statusType", "awayTeamName", "homeTeamName", "parseSportsDataIOGames", "gameTime", "sdStatus", "statusDetail", "fetchTodaysGames", "forceRefresh", "disabledLeagues", "isEnabled", "standingsPromises", "allGames", "ncaamData", "ncaamGames", "nbaData", "nbaGames", "nflSportsData", "nflGames", "nflData", "e2", "ncaafSportsData", "ncaafGames", "ncaafData", "findGame", "teamName1", "teamName2", "name1Lower", "name2Lower", "awayLower", "homeLower", "hasGameStarted", "isGameFinished", "getGameStatusMessage", "scheduleScoreboardRefresh", "err", "unitMultiplier", "TEAM_ALIASES", "_variantsLoaded", "loadTeamVariants", "ncaamRes", "nbaRes", "abbr", "canonical", "loc", "nick", "alt", "a", "standardizePicks", "isBetHistoryFormat", "parseBetHistory", "parseSportsbookGameLines", "parseHTMLPicks", "parseTextPicks", "hasMoney", "hasTimestamp", "hasOddsSignals", "cleanedLines", "parseBetHistoryLeg", "defaultSport", "currentGame", "parseFlexibleLine", "html", "doc", "gamePanels", "panel", "gamePicks", "parseGamePanel", "textContent", "textPicks", "gameInfo", "extractGameInfo", "groupPicks", "parseLineGroup", "parseIndividualLine", "getTodayDate", "firstTeamEl", "secondTeamEl", "leagueEl", "detectSportFromLeague", "sportLine", "sportAttr", "detectSportFromAttribute", "groupType", "detectGroupType", "play", "parseLinePlacement", "groupClass", "dataType", "groupText", "lineEl", "priceEl", "price", "teamIndex", "determineTeamIndex", "formatLine", "formatOdds", "determineOverUnder", "ttTeamIdx", "lineText", "parseLineAndOdds", "defaultIndex", "teamAttr", "parent", "position", "odds", "attr", "seenLegs", "ticketId", "parlayLabel", "parlayType", "legs", "rowRisk", "rowWin", "leg", "legIdx", "legPick", "parseParlayLeg", "legKey", "parseHTMLRow", "legEl", "legIndex", "teamEl", "periodEl", "periodText", "icon", "src", "teamLower", "parseDateTimeString", "riskEl", "riskText", "parseCurrency", "winEl", "winText", "gameEl", "gameText", "parseGameString", "selectionEl", "selText", "oddsMatch", "spreadMatch", "lineOnly", "rawLines", "currentSport", "pipePick", "parsePipeDelimitedLine", "contextInfo", "extractContext", "normalizedPicks", "gameMatch", "resolveTeamName", "normalizedSport", "normalized", "originalLine", "segmentPatterns", "pattern", "teamKeys", "teamKey", "teamTotalMatch", "teamPart", "linePart", "fullMatch", "gameTotalMatch", "foundTeam", "foundTeamPos", "teamRegex", "pos", "capsMatch", "spreadPatterns", "numbers", "numVal", "mlOdds", "vsMatch", "matchupPart", "segmentPart", "pickPart", "matchupMatch", "segLower", "totalMatch", "mlMatch", "lineVal", "parseTextLine", "defaultGame", "riskMatch", "standaloneTotal", "calculateWin", "teamMatch", "remainder", "mlOddsMatch", "sign", "number", "oddsAfter", "shouldSkipLine", "updateContextFromLine", "callback", "ctx", "cleaned", "picksToDisplayFormat", "picksToCSV", "headers", "nowIso", "formatMmDd", "isoDate", "mm", "dd", "safeText", "slug", "normalizeSport", "upper", "computePickId", "away", "home", "showToast", "setLastRefreshed", "iso", "target", "fireEmoji", "fire", "n", "formatPickLabel", "dir", "renderEmptyState", "renderRows", "leagueLogo", "edge", "isLocked", "tr", "pickLabel", "persistWeeklyLineupCache", "toCosmosPick", "gameDate", "saveFetchedPicksToCosmos", "payload", "cosmosPick", "toggleLock", "locked", "patch", "attachTrackHandlers", "evt", "isPressed", "getDateParamForFetchers", "fetchAndRender", "withId", "b", "leaguesFailed", "attachFetchHandlers", "root", "code", "bootstrapFromCache", "init", "ARCHIVE_ENDPOINT", "BlobStorageArchiver", "metadata", "archivePayload", "currentPicks", "pushes", "outcome", "decided", "winRate", "queryParams", "localKey", "archives", "localArchives", "synced", "failed", "archive", "rand", "colors", "c", "getApiBase", "HistoryManager", "historyBtn", "weeks", "weekId", "statsBar", "tableWrapper", "esc", "statsDiv", "outcomeClass", "outcomeIcon", "PDFJS_CDN", "PDFJS_WORKER_CDN", "pdfjsLoaded", "PDFParser", "resolve", "reject", "script", "file", "arrayBuffer", "pdf", "fullText", "pageNum", "pageText", "item", "lines", "spreadPattern", "ouPattern", "mlPattern", "reader", "getAzureEndpoint", "TESSERACT_CDN", "tesseractLoaded", "ImageOCRParser", "azureError", "formData", "imageUrl", "m", "pct", "getProxyEndpoint", "BasketballAPIClient", "cacheKey", "gameId", "season", "SportsbookConnector", "auth", "saved", "conn", "connectedAt", "connections", "adapter", "bookId", "credentials", "connection", "bets", "allBets", "bet", "returnUrl", "setupWeeklyLineupFab", "fab", "menu", "closeMenu", "openMenu", "WeeklyLineupMobile", "nav", "cells", "labels", "startX", "currentX", "isDragging", "diff", "startY", "pullDistance", "threshold", "passiveOptions", "scrollTimeout", "observer", "supportsPassive", "opts", "resizeTimer", "wasMobile", "isMobile"]
}
