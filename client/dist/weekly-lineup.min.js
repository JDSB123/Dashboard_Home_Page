(function(){"use strict";const N=new WeakMap,m={getColumnIndex(a,e){try{const t=a?.closest?.("table");if(!t)return null;let s=N.get(t);if(s||(s=new Map,N.set(t,s)),s.has(e))return s.get(e);const o=t.querySelector(`thead th[data-sort="${e}"]`)||t.querySelector(`thead th[data-filter="${e}"]`);if(!o)return s.set(e,null),null;const i=o.closest("tr"),A=(i?Array.from(i.children).filter(B=>B.tagName==="TH"):[]).indexOf(o),F=A>=0?A+1:null;return s.set(e,F),F}catch{return null}},getCell(a,e,t){const s=this.getColumnIndex(a,e)||t||null;return s?a.querySelector(`td:nth-child(${s})`):null},clearColumnIndexCache(a){a&&N.delete(a)},escapeHtml(a){if(!a)return"";const e=document.createElement("div");return e.textContent=a,e.innerHTML},formatCurrency(a){if(a==null||isNaN(a))return"-";const e=parseFloat(a),t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.abs(e));return e<0?`(${t})`:t},formatCurrencyForChip(a){if(!a)return"";const e=parseFloat(a);return e>=1e3?`$${(e/1e3).toFixed(1)}k`:`$${e}`},formatDateWithDay(a){if(!a)return"";if(/^(mon|tue|wed|thu|fri|sat|sun)\s+/i.test(a))return a;const e=this.getWeekdayName(a);return e?`${e} ${a}`:a},getWeekdayName(a){if(!a)return"";const e=a.match(/(\d{1,2})\/(\d{1,2})/);if(!e)return"";const t=parseInt(e[1],10)-1,s=parseInt(e[2],10),o=new Date().getFullYear(),i=new Date(o,t,s);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][i.getDay()]},normalizeStatus(a){if(!a)return"pending";const e=a.toString().toLowerCase().trim();return{win:"win",won:"win",winner:"win",loss:"loss",lost:"loss",lose:"loss",loser:"loss",push:"push",tie:"push",void:"void",voided:"void",cancelled:"void",pending:"pending",open:"pending",live:"live",active:"live","in-progress":"live","in progress":"live"}[e]||"pending"},formatBadgeStatus(a){return a?this.normalizeStatus(a).toUpperCase():""},formatTeamRecordValue(a){return a?a.toString().replace(/[^\d-]/g,""):""},formatBetTypeLabel(a){return a?{spread:"Spread",total:"Total",moneyline:"Moneyline",ml:"Moneyline",parlay:"Parlay",prop:"Prop",player:"Player Prop"}[a.toLowerCase()]||a:""},formatSubtypeLabel(a){return a?{"1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter",game:"Full Game",full:"Full Game"}[a.toLowerCase()]||a:""},formatSegmentLabel(a){return a?{"1h":"1st Half","2h":"2nd Half",game:"Full Game",full:"Full Game",live:"Live",pregame:"Pre-Game"}[a.toLowerCase()]||a:""},createElement(a,e={},t=[]){const s=document.createElement(a);return Object.entries(e).forEach(([o,i])=>{o==="className"?s.className=i:o==="innerHTML"?s.innerHTML=i:o==="textContent"?s.textContent=i:o.startsWith("data-")?s.setAttribute(o,i):s[o]=i}),t.forEach(o=>{typeof o=="string"?s.appendChild(document.createTextNode(o)):o instanceof Element&&s.appendChild(o)}),s},positionDropdown(a,e){if(!a||!e)return;const t=a.getBoundingClientRect(),s=e.offsetHeight,o=window.innerHeight;e.style.position="absolute",e.style.left=`${t.left}px`,t.bottom+s>o&&t.top>s?(e.style.top=`${t.top-s}px`,e.classList.add("dropdown-above")):(e.style.top=`${t.bottom}px`,e.classList.remove("dropdown-above")),e.getBoundingClientRect().right>window.innerWidth&&(e.style.left=`${window.innerWidth-e.offsetWidth-10}px`)},closeAllDropdowns(){document.querySelectorAll(".filter-dropdown.show").forEach(a=>{a.classList.remove("show");const e=a.getAttribute("aria-labelledby");if(e){const t=document.getElementById(e);t&&t.setAttribute("aria-expanded","false")}})},extractAbbreviation(a){if(!a)return"";const t=a.replace(/(fc|united|city|town|athletic|rovers)$/i,"").trim().split(/\s+/);return t.length===1?t[0].substring(0,3).toUpperCase():t.map(s=>s.charAt(0)).join("").substring(0,3).toUpperCase()},formatTeamName(a){return a?a.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""},debounce(a,e){let t;return function(...o){const i=()=>{clearTimeout(t),a(...o)};clearTimeout(t),t=setTimeout(i,e)}},throttle(a,e){let t;return function(...s){t||(a.apply(this,s),t=!0,setTimeout(()=>t=!1,e))}},isElementVisible(a){if(!a)return!1;const e=a.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},scrollIntoViewSmoothly(a,e={}){if(!a)return;const t={behavior:"smooth",block:"center",inline:"nearest"};a.scrollIntoView({...t,...e})},getTextContent(a,e){if(!a)return"";if(e){const t=a.querySelector(e);return t?t.textContent.trim():""}return a.textContent.trim()},setLoadingState(a,e,t="Loading..."){if(a){if(e)a.classList.add("loading"),a.setAttribute("aria-busy","true"),a.tagName==="BUTTON"&&(a.disabled=!0,a.setAttribute("data-original-text",a.textContent),a.textContent=t);else if(a.classList.remove("loading"),a.setAttribute("aria-busy","false"),a.tagName==="BUTTON"){a.disabled=!1;const s=a.getAttribute("data-original-text");s&&(a.textContent=s,a.removeAttribute("data-original-text"))}}},parseRange(a){if(!a)return{min:null,max:null};const e=a.split("-").map(t=>parseFloat(t.trim()));return{min:e[0]||null,max:e[1]||e[0]||null}},formatRangeLabel(a){if(!a)return"";if(typeof a=="string"){const{min:e,max:t}=this.parseRange(a);return e===t||!t?this.formatCurrency(e):`${this.formatCurrency(e)} - ${this.formatCurrency(t)}`}return a.toString()},addEventListenerWithCleanup(a,e,t){return a?(a.addEventListener(e,t),()=>a.removeEventListener(e,t)):null},batchDOMUpdates(a){requestAnimationFrame(()=>{a.forEach(e=>e())})},createFragment(a){const e=document.createDocumentFragment();return a.forEach(t=>{t&&e.appendChild(t)}),e}};window.PicksDOMUtils=m})(),function(){"use strict";typeof window.tableState>"u"&&(window.tableState={filters:{date:{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null},matchup:{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"},pick:{betType:"",subtype:"",segment:"",selectedSegments:null},risk:{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]},status:[]},sort:{column:null,direction:"asc"},expandedParlayIds:[]});const N={createDateFilterState(){return{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null}},createMatchupFilterState(){return{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"}},createRiskFilterState(){return{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]}},createPickFilterState(){return{betType:"",subtype:"",segment:"",selectedSegments:null}},ensureDateFilterShape(){const a=window.tableState;if(!a.filters.date||typeof a.filters.date!="object"){a.filters.date=this.createDateFilterState();return}const e=a.filters.date;"start"in e||(e.start=null),"end"in e||(e.end=null),"selectedDates"in e||(e.selectedDates=null),"selectedTimes"in e||(e.selectedTimes=null),"selectedBooks"in e||(e.selectedBooks=null)},ensureMatchupFilterShape(){const a=window.tableState;if(!a.filters.matchup||typeof a.filters.matchup!="object"){a.filters.matchup=this.createMatchupFilterState();return}const e=a.filters.matchup;"ticketType"in e||(e.ticketType="all"),"selectedTeams"in e||(e.selectedTeams=null),"league"in e||(e.league="")},ensureRiskFilterShape(){const a=window.tableState;if(!a.filters.risk||typeof a.filters.risk!="object"){a.filters.risk=this.createRiskFilterState();return}const e=a.filters.risk;"min"in e||(e.min=null),"max"in e||(e.max=null),Array.isArray(e.selectedRiskRanges)||(e.selectedRiskRanges=[]),Array.isArray(e.selectedWinRanges)||(e.selectedWinRanges=[])},ensurePickFilterShape(){const a=window.tableState;a.filters.pick||(a.filters.pick=this.createPickFilterState())},ensureAllFilterShapes(){this.ensureDateFilterShape(),this.ensureMatchupFilterShape(),this.ensureRiskFilterShape(),this.ensurePickFilterShape()}},m={getState(){return window.tableState},getFilter(a){return window.tableState.filters[a]},updateFilter(a,e){if(!window.tableState.filters[a]){console.warn(`Filter type ${a} does not exist`);return}Object.assign(window.tableState.filters[a],e)},resetFilter(a){switch(a){case"date":window.tableState.filters.date=N.createDateFilterState();break;case"matchup":window.tableState.filters.matchup=N.createMatchupFilterState();break;case"pick":window.tableState.filters.pick=N.createPickFilterState();break;case"risk":window.tableState.filters.risk=N.createRiskFilterState();break;case"status":window.tableState.filters.status=[];break;case"league":window.tableState.filters.matchup.league="",window.tableState.filters.matchup.selectedLeagues=null;break;case"segment":window.tableState.filters.pick.segment="",window.tableState.filters.pick.selectedSegments=null;break;default:console.warn(`Unknown filter type: ${a}`)}},resetAllFilters(){window.tableState.filters={date:N.createDateFilterState(),matchup:N.createMatchupFilterState(),pick:N.createPickFilterState(),risk:N.createRiskFilterState(),status:[]}},getExpandedParlayIds(){return Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]),window.tableState.expandedParlayIds},setParlayExpanded(a,e){if(!a)return;Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]);const t=window.tableState.expandedParlayIds.indexOf(a);e&&t===-1?window.tableState.expandedParlayIds.push(a):!e&&t!==-1&&window.tableState.expandedParlayIds.splice(t,1)},isParlayExpanded(a){return!a||!Array.isArray(window.tableState.expandedParlayIds)?!1:window.tableState.expandedParlayIds.includes(a)},toggleParlayExpanded(a){const e=this.isParlayExpanded(a);return this.setParlayExpanded(a,!e),!e},resetExpansionState(){window.tableState.expandedParlayIds=[]},getSortState(){return window.tableState.sort},updateSort(a,e){window.tableState.sort={column:a,direction:e||"asc"}},resetSort(){window.tableState.sort={column:null,direction:"asc"}},hasActiveFilters(){const a=window.tableState.filters;return!!(a.date.selectedDates||a.date.selectedTimes||a.date.selectedBooks||a.date.start||a.date.end||a.matchup.league||a.matchup.selectedLeagues||a.matchup.selectedTeams||a.matchup.ticketType!=="all"||a.pick.betType||a.pick.subtype||a.pick.segment||a.pick.selectedSegments||a.risk.min!==null||a.risk.max!==null||a.risk.selectedRiskRanges.length>0||a.risk.selectedWinRanges.length>0||a.status.length>0)},getActiveFilterCount(){let a=0;const e=window.tableState.filters;return e.date.selectedDates&&a++,e.date.selectedTimes&&a++,e.date.selectedBooks&&a++,(e.matchup.league||e.matchup.selectedLeagues)&&a++,e.matchup.selectedTeams&&a++,(e.pick.betType||e.pick.subtype)&&a++,(e.pick.segment||e.pick.selectedSegments)&&a++,e.risk.selectedRiskRanges.length>0&&a++,e.risk.selectedWinRanges.length>0&&a++,e.status.length>0&&a++,a},init(){N.ensureAllFilterShapes(),Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[])}};window.PicksStateManager={...m,validators:N,state:window.tableState},m.init()}(),function(){"use strict";const N={getParentRowsOnly(a){return a?Array.from(a.children).filter(e=>e&&e.tagName==="TR"&&!e.classList.contains("parlay-legs")):[]},getDirectChildRows(a){return a?Array.from(a.children).filter(e=>e&&e.tagName==="TR"):[]},isRowVisibleForZebra(a){return!(!a||a.style.display==="none")},applyZebraStripes(){if(window.ZebraStripes&&typeof window.ZebraStripes.applyPicksTableZebraStripes=="function"){window.ZebraStripes.applyPicksTableZebraStripes();return}const a=document.getElementById("picks-tbody");if(!a)return;this.getParentRowsOnly(a).filter(t=>this.isRowVisibleForZebra(t)).forEach((t,s)=>{const o=s%2===0?"zebra-even":"zebra-odd",i=s%2===0?"zebra-odd":"zebra-even";if(t.classList.remove(i),t.classList.add(o),t.classList.add("zebra-row"),window.PicksParlayManager){const b=window.PicksParlayManager.findParlayLegsRow(t);b&&(b.classList.remove(i),b.classList.add(o),b.classList.add("zebra-row"))}})},updateTable(){const a=document.getElementById("picks-tbody");if(!a)return;let e=this.getParentRowsOnly(a);(window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort).column&&(e=window.PicksSortManager?window.PicksSortManager.applySorting(e):e,e.forEach(s=>{a.appendChild(s),window.PicksParlayManager&&s.classList.contains("parlay-row")&&window.PicksParlayManager.ensureLegRowPosition(s)})),this.applyFiltersToRows(e),window.PicksParlayManager&&window.PicksParlayManager.refreshAllParlayVisibility(),this.applyZebraStripes(),this.renderFilterChips()},applyFiltersToRows(a){if(!a){const e=document.getElementById("picks-tbody");a=this.getParentRowsOnly(e)}a.forEach(e=>{const t=window.DashboardFilterPills?.passesAllFilters?window.DashboardFilterPills.passesAllFilters(e):window.PicksFilterManager?window.PicksFilterManager.passesAllFilters(e):!0;if(e.style.display=t?"":"none",window.PicksParlayManager&&e.classList.contains("parlay-row")){const s=window.PicksParlayManager.findParlayLegsRow(e);if(s)if(!t)s.style.display="none";else{const o=e.getAttribute("data-row-id"),i=window.PicksStateManager?window.PicksStateManager.isParlayExpanded(o):e.getAttribute("aria-expanded")==="true";s.style.display=i?"table-row":"none"}}})},renderFilterChips(){const a=document.querySelector(".filter-chips")||document.getElementById("filter-chips-container");if(!a)return;a.innerHTML="";const t=(window.PicksStateManager?window.PicksStateManager.getState():window.tableState).filters,s=[];if(t.date.selectedDates&&t.date.selectedDates.length>0&&s.push({type:"date",subtype:"dates",label:`Dates: ${t.date.selectedDates.length} selected`,value:t.date.selectedDates}),t.date.selectedTimes&&t.date.selectedTimes.length>0&&s.push({type:"date",subtype:"times",label:`Times: ${t.date.selectedTimes.length} selected`,value:t.date.selectedTimes}),t.date.selectedBooks&&t.date.selectedBooks.length>0&&s.push({type:"date",subtype:"books",label:`Books: ${t.date.selectedBooks.length} selected`,value:t.date.selectedBooks}),t.matchup.league||t.matchup.selectedTeams){const o=t.matchup.selectedTeams?`Teams: ${t.matchup.selectedTeams.length} selected`:`League: ${t.matchup.league}`;s.push({type:"matchup",label:o,value:t.matchup})}if(t.pick.betType||t.pick.subtype){const o=[];t.pick.betType&&o.push(t.pick.betType),t.pick.subtype&&o.push(t.pick.subtype),s.push({type:"pick",label:`Pick: ${o.join(" - ")}`,value:t.pick})}if(t.pick.segment&&s.push({type:"segment",label:`Segment: ${t.pick.segment}`,value:t.pick.segment}),t.risk.selectedRiskRanges&&t.risk.selectedRiskRanges.length>0&&s.push({type:"risk",label:`Risk: ${t.risk.selectedRiskRanges.length} ranges`,value:t.risk.selectedRiskRanges}),t.risk.selectedWinRanges&&t.risk.selectedWinRanges.length>0&&s.push({type:"win",label:`Win: ${t.risk.selectedWinRanges.length} ranges`,value:t.risk.selectedWinRanges}),t.status&&t.status.length>0&&s.push({type:"status",label:`Status: ${t.status.join(", ")}`,value:t.status}),s.forEach(o=>{const i=document.createElement("div");i.className="filter-chip",i.setAttribute("data-filter-type",o.type),o.subtype&&i.setAttribute("data-filter-subtype",o.subtype);const b=document.createElement("span");b.className="filter-chip-label",b.textContent=o.label;const A=document.createElement("button");A.className="filter-chip-remove",A.innerHTML="&times;",A.setAttribute("aria-label",`Remove ${o.label} filter`),A.onclick=()=>this.removeFilterChip(o.type,o.subtype),i.appendChild(b),i.appendChild(A),a.appendChild(i)}),s.length>0){const o=document.createElement("button");o.className="clear-all-filters",o.textContent="Clear All",o.onclick=()=>this.clearAllFilters(),a.appendChild(o)}},removeFilterChip(a,e){window.PicksFilterManager?window.PicksFilterManager.clearFilterByChip(a,e):console.warn("PicksFilterManager not loaded")},clearAllFilters(){window.PicksStateManager&&window.PicksStateManager.resetAllFilters(),this.updateTable()},updateFilterIndicators(){const a={"date-filter-btn":window.tableState.filters.date.selectedDates||window.tableState.filters.date.selectedTimes||window.tableState.filters.date.selectedBooks,"matchup-filter-btn":window.tableState.filters.matchup.league||window.tableState.filters.matchup.selectedTeams,"pick-filter-btn":window.tableState.filters.pick.betType||window.tableState.filters.pick.subtype,"risk-filter-btn":window.tableState.filters.risk.selectedRiskRanges?.length>0||window.tableState.filters.risk.selectedWinRanges?.length>0,"status-filter-btn":window.tableState.filters.status?.length>0};Object.entries(a).forEach(([s,o])=>{const i=document.getElementById(s);if(!i)return;const b=i.querySelector(".filter-indicator")||i.querySelector(".indicator");o?(i.classList.add("has-filter"),b&&(b.style.display="inline-block")):(i.classList.remove("has-filter"),b&&(b.style.display="none"))});const e=window.PicksStateManager?window.PicksStateManager.getActiveFilterCount():0,t=document.getElementById("active-filter-count");t&&(t.textContent=e>0?`(${e})`:"")},announceFilterChange(a){let e=document.getElementById("filter-announcer");e||(e=document.createElement("div"),e.id="filter-announcer",e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.style.width="1px",e.style.height="1px",e.style.overflow="hidden",document.body.appendChild(e)),e.textContent=a},refresh(){this.updateTable(),this.updateFilterIndicators()}};let m;N.debouncedZebraStripes=function(){clearTimeout(m),m=setTimeout(()=>{N.applyZebraStripes()},50)},window.PicksTableRenderer=N}(),function(){"use strict";const N={getColumnIndex(m,a){return window.PicksDOMUtils?.getColumnIndex?window.PicksDOMUtils.getColumnIndex(m,a):null},getCell(m,a,e){if(window.PicksDOMUtils?.getCell)return window.PicksDOMUtils.getCell(m,a,e);const t=e||null;return t?m.querySelector(`td:nth-child(${t})`):null},DATE_FILTER_GROUP_MAP:{dates:"selectedDates",times:"selectedTimes",books:"selectedBooks"},DATE_FILTER_GROUP_LABELS:{dates:"Dates",times:"Times",books:"Sportsbooks"},normalizeFilterValue(m){return(m??"").toString().trim().toLowerCase()},getDateTimeParts(m){const a=m.querySelector("td:first-child");if(!a)return{date:"",time:"",book:""};const e=a.querySelector(".cell-date"),t=a.querySelector(".cell-time"),s=a.querySelector(".cell-book, .sportsbook-name, .sportsbook-value");let o=e?e.textContent.trim():"",i=t?t.textContent.trim():"",b=s?s.textContent.trim():"";const A=a.querySelector(".cell-weekday");if(A){const F=A.textContent.trim();F&&!o.includes(F)&&(o=`${F} ${o}`)}return{date:o,time:i,book:b}},getMatchupValue(m){const a=this.getCell(m,"matchup",2);if(!a)return"";let e=a.textContent||"";const t=a.querySelectorAll(".team-logo");if(t.length>0){const s=Array.from(t).map(o=>o.getAttribute("alt")||o.getAttribute("title")||"").filter(Boolean);s.length>0&&(e=s.join(" vs "))}return e.toLowerCase()},getPickValue(m){const a=this.getCell(m,"pick",3);if(!a)return"";const e=a.textContent||"",t=a.querySelector("[data-bet-type]"),s=t?t.getAttribute("data-bet-type"):"";return{text:e.toLowerCase(),betType:s.toLowerCase()}},getCurrencyValue(m,a){const e=m.querySelector(`td:nth-child(${a})`);if(!e)return null;const t=e.textContent.replace(/[$,]/g,"").trim();return t?parseFloat(t):null},getRiskValue(m){const a=this.getCell(m,"risk",5);if(!a)return null;const e=a.querySelector(".risk-amount");if(!e)return null;const t=e.textContent.replace(/[$,]/g,"").trim();return t?parseFloat(t):null},getWinValue(m){const a=this.getCell(m,"risk",5);if(!a)return null;const e=a.querySelector(".win-amount");if(!e)return null;const t=e.textContent.replace(/[$,]/g,"").trim();return t?parseFloat(t):null},getStatusValue(m){const a=this.getCell(m,"status")||m.querySelector("td:last-child");if(!a)return"";const e=a.querySelector(".status-badge");return e?e.getAttribute("data-status")||e.className.match(/status-(\w+)/)?.[1]||e.textContent.trim().toLowerCase():a.textContent.trim().toLowerCase()},normalizeStatus(m){if(window.PicksDOMUtils&&window.PicksDOMUtils.normalizeStatus)return window.PicksDOMUtils.normalizeStatus(m);if(!m)return"";const a=m.toString().toLowerCase().trim();return{win:"win",won:"win",winner:"win",loss:"loss",lost:"loss",lose:"loss",loser:"loss",push:"push",tie:"push",void:"void",voided:"void",cancelled:"void",pending:"pending",open:"pending",live:"live","in-progress":"live","in progress":"live",active:"live"}[a]||a},detectBetType(m){const a=this.getCell(m,"pick",3);if(!a)return{type:"",subtype:""};const e=(a.textContent||"").toLowerCase(),t=a.querySelector("[data-bet-type]");if(t){const s=t.getAttribute("data-bet-type").toLowerCase(),o=t.getAttribute("data-bet-subtype")||"";return{type:s,subtype:o.toLowerCase()}}return e.includes("spread")||e.includes("+")||e.includes("-")?e.includes("1st")||e.includes("first")?{type:"spread",subtype:"1h"}:e.includes("2nd")||e.includes("second")?{type:"spread",subtype:"2h"}:{type:"spread",subtype:"game"}:e.includes("total")||e.includes("over")||e.includes("under")?e.includes("1st")||e.includes("first")?{type:"total",subtype:"1h"}:e.includes("2nd")||e.includes("second")?{type:"total",subtype:"2h"}:{type:"total",subtype:"game"}:e.includes("moneyline")||e.includes("ml")?e.includes("1st")||e.includes("first")?{type:"moneyline",subtype:"1h"}:e.includes("2nd")||e.includes("second")?{type:"moneyline",subtype:"2h"}:{type:"moneyline",subtype:"game"}:e.includes("parlay")?{type:"parlay",subtype:""}:e.includes("prop")||e.includes("player")?{type:"prop",subtype:""}:{type:"",subtype:""}},detectSegment(m){const a=this.getCell(m,"segment",4);if(!a)return"game";const e=a.querySelector(".game-segment");if(e&&e.getAttribute("data-segment"))return e.getAttribute("data-segment").toLowerCase();const t=a.textContent.trim().toLowerCase();return t.includes("1st")||t.includes("1h")||t.includes("1q")?"1h":t.includes("2nd")||t.includes("2h")||t.includes("2q")?"2h":"game"},valueMatchesRangeList(m,a){return!m||m.length===0||a===null?!1:m.some(e=>{const[t,s]=e.split("-").map(o=>parseFloat(o));return a>=t&&a<=s})},passesDateFilter(m){const a=window.tableState.filters.date;if(!a.selectedDates&&!a.selectedTimes&&!a.selectedBooks&&!a.start&&!a.end)return!0;const{date:e,time:t,book:s}=this.getDateTimeParts(m);if(a.selectedDates&&a.selectedDates.length>0){const o=this.normalizeFilterValue(e);if(!a.selectedDates.some(b=>o.includes(this.normalizeFilterValue(b))))return!1}if(a.selectedTimes&&a.selectedTimes.length>0){const o=this.normalizeFilterValue(t);if(!a.selectedTimes.some(b=>o.includes(this.normalizeFilterValue(b))))return!1}if(a.selectedBooks&&a.selectedBooks.length>0){const o=this.normalizeFilterValue(s);if(!a.selectedBooks.some(b=>o.includes(this.normalizeFilterValue(b))))return!1}return!0},passesMatchupFilter(m){const a=window.tableState.filters.matchup;if(a.ticketType&&a.ticketType!=="all"){const e=m.classList.contains("parlay-row");if(a.ticketType==="single"&&e||a.ticketType==="parlay"&&!e)return!1}if(a.league&&!this.getMatchupValue(m).includes(a.league.toLowerCase()))return!1;if(a.selectedTeams&&a.selectedTeams.length>0){const e=this.getMatchupValue(m);if(!a.selectedTeams.some(s=>e.includes(s.toLowerCase())))return!1}return!0},passesPickFilter(m){const a=window.tableState.filters.pick;if(a.betType||a.subtype){const e=this.detectBetType(m);if(a.betType&&e.type!==a.betType.toLowerCase()||a.subtype&&e.subtype!==a.subtype.toLowerCase())return!1}return!(a.segment&&this.detectSegment(m)!==a.segment.toLowerCase())},passesRiskFilter(m){const a=window.tableState.filters.risk;if(a.selectedRiskRanges&&a.selectedRiskRanges.length>0){const e=this.getRiskValue(m);if(!this.valueMatchesRangeList(a.selectedRiskRanges,e))return!1}if(a.selectedWinRanges&&a.selectedWinRanges.length>0){const e=this.getWinValue(m);if(!this.valueMatchesRangeList(a.selectedWinRanges,e))return!1}if(a.min!==null||a.max!==null){const e=this.getRiskValue(m);if(a.min!==null&&e<a.min||a.max!==null&&e>a.max)return!1}return!0},passesStatusFilter(m){const a=window.tableState.filters.status;if(!a||a.length===0)return!0;const e=this.normalizeStatus(this.getStatusValue(m));return a.some(t=>this.normalizeStatus(t)===e)},passesAllFilters(m){const a=window.tableState?.filters;if(!a)return!0;if(a.search&&!m.textContent.toLowerCase().includes(a.search))return!1;if(a.date){const{start:e,end:t}=a.date;if(e&&t){const s=m.getAttribute("data-epoch");if(s){const o=parseInt(s,10);if(!isNaN(o)){const i=new Date(o*1e3),b=new Date(e);b.setHours(0,0,0,0);const A=new Date(t);if(A.setHours(23,59,59,999),i<b||i>A)return!1}}}}if(a.matchup?.league){if((m.getAttribute("data-league")||"").toLowerCase()!==a.matchup.league.toLowerCase())return!1}else if(a.matchup?.selectedLeagues?.length>0){const e=(m.getAttribute("data-league")||"").toLowerCase();if(!a.matchup.selectedLeagues.map(s=>s.toLowerCase()).includes(e))return!1}if(a.pick?.segment){const e=(m.getAttribute("data-segment")||"").toLowerCase();let t=e;if(e==="full game"&&(t="full"),t!==a.pick.segment.toLowerCase())return!1}else if(a.pick?.selectedSegments?.length>0){const e=(m.getAttribute("data-segment")||"").toLowerCase();let t=e;if(e==="full game"&&(t="full"),!a.pick.selectedSegments.map(o=>o.toLowerCase()).includes(t))return!1}return!0},applyFilters:function(){let m=null;return function(){!m&&window.SharedUtils?.debounce&&(m=window.SharedUtils.debounce(function(){window.PicksTableRenderer&&window.PicksTableRenderer.updateTable()},150)),m?m():window.PicksTableRenderer?window.PicksTableRenderer.updateTable():console.warn("PicksTableRenderer not loaded")}}(),applyFilter(m,a={}){switch(m){case"date":this.syncDateFilterStateFromUI();break;case"matchup":this.syncMatchupFilterStateFromUI();break;case"pick":this.syncPickFilterStateFromUI();break;case"risk":this.syncRiskFilterStateFromUI();break;case"status":this.syncStatusFilterStateFromUI();break;case"league":this.syncLeagueFilterStateFromUI();break;case"segment":this.syncSegmentFilterStateFromUI();break}if(this.applyFilters(),window.PicksTableRenderer){const e=this.countVisibleRows();window.PicksTableRenderer.announceFilterChange(`Filter applied. ${e} rows visible.`)}},resetFilter(m){window.PicksStateManager&&window.PicksStateManager.resetFilter(m),this.clearFilterUI(m),this.applyFilters()},clearFilterByChip(m,a){if(m==="date"&&a){const e=this.DATE_FILTER_GROUP_MAP[a];e&&(window.tableState.filters.date[e]=null)}else this.resetFilter(m);this.applyFilters()},syncDateFilterStateFromUI(){const m=document.getElementById("date-filter-options");if(!m)return;const a=m.querySelectorAll('input[type="checkbox"]:checked'),e={dates:[],times:[],books:[]};a.forEach(t=>{if(t.id==="date-select-all")return;const s=t.getAttribute("data-group"),o=t.value;s&&o&&e[s]&&e[s].push(o)}),window.tableState.filters.date.selectedDates=e.dates.length>0?e.dates:null,window.tableState.filters.date.selectedTimes=e.times.length>0?e.times:null,window.tableState.filters.date.selectedBooks=e.books.length>0?e.books:null},syncMatchupFilterStateFromUI(){const m=document.querySelectorAll('#teams-list input[type="checkbox"]:not(#teams-select-all)'),a=Array.from(m).filter(e=>e.checked).map(e=>e.value);window.tableState.filters.matchup.selectedTeams=a.length>0?a:null},syncPickFilterStateFromUI(){const m=document.getElementById("bet-type-select"),a=document.getElementById("subtype-select"),e=document.getElementById("segment-select");m&&(window.tableState.filters.pick.betType=m.value),a&&(window.tableState.filters.pick.subtype=a.value),e&&(window.tableState.filters.pick.segment=e.value)},syncRiskFilterStateFromUI(){const m=document.getElementById("risk-ranges"),a=document.getElementById("win-ranges");if(m){const e=m.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(e).map(s=>s.value);window.tableState.filters.risk.selectedRiskRanges=t}if(a){const e=a.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(e).map(s=>s.value);window.tableState.filters.risk.selectedWinRanges=t}},syncStatusFilterStateFromUI(){const m=document.getElementById("status-filter-options");if(!m)return;const a=m.querySelectorAll('input[type="checkbox"]:checked'),e=Array.from(a).map(t=>t.value);window.tableState.filters.status=e},syncLeagueFilterStateFromUI(){const m=document.getElementById("league-options");if(!m)return;const a=m.querySelectorAll('input[type="checkbox"]:checked'),e=Array.from(a).map(s=>s.value),t=m.querySelectorAll('input[type="checkbox"]');e.length===t.length?window.tableState.filters.matchup.league=null:e.length===1?window.tableState.filters.matchup.league=e[0]:e.length>0?(window.tableState.filters.matchup.selectedLeagues=e,window.tableState.filters.matchup.league=null):(window.tableState.filters.matchup.league=null,window.tableState.filters.matchup.selectedLeagues=null)},syncSegmentFilterStateFromUI(){const m=document.getElementById("segment-options");if(!m)return;const a=m.querySelectorAll('input[type="checkbox"]:checked'),e=Array.from(a).map(s=>s.value),t=m.querySelectorAll('input[type="checkbox"]');e.length===t.length?window.tableState.filters.pick.segment=null:e.length===1?window.tableState.filters.pick.segment=e[0]:e.length>0?(window.tableState.filters.pick.selectedSegments=e,window.tableState.filters.pick.segment=null):(window.tableState.filters.pick.segment=null,window.tableState.filters.pick.selectedSegments=null)},clearFilterUI(m){switch(m){case"date":document.querySelectorAll('#date-filter-options input[type="checkbox"]').forEach(E=>E.checked=!1);break;case"matchup":const e=document.getElementById("league-select");e&&(e.value=""),document.querySelectorAll('#teams-list input[type="checkbox"]').forEach(E=>E.checked=!1);break;case"pick":const s=document.getElementById("bet-type-select");s&&(s.value="");const o=document.getElementById("subtype-select");o&&(o.value="");const i=document.getElementById("segment-select");i&&(i.value="");break;case"risk":document.querySelectorAll('#risk-ranges input[type="checkbox"], #win-ranges input[type="checkbox"]').forEach(E=>E.checked=!1);break;case"status":document.querySelectorAll('#status-filter-options input[type="checkbox"]').forEach(E=>E.checked=!1);break;case"league":document.querySelectorAll('#league-options input[type="checkbox"]').forEach(E=>E.checked=!0);break;case"segment":document.querySelectorAll('#segment-options input[type="checkbox"]').forEach(E=>E.checked=!0);break}},countVisibleRows(){const m=document.getElementById("picks-tbody");if(!m)return 0;const a=m.querySelectorAll("tr:not(.parlay-legs)");return Array.from(a).filter(e=>e.style.display!=="none").length}};window.PicksFilterManager=N}();const PicksService=function(){"use strict";const a=`${window.GBSV_CONFIG?.FUNCTIONS_URL||window.APP_CONFIG?.FUNCTIONS_BASE_URL||(window.APP_CONFIG?.API_BASE_URL?window.APP_CONFIG.API_BASE_URL.replace(/\/api$/,""):"")||window.APP_CONFIG?.API_BASE_FALLBACK||window.location.origin}/picks`;let e=null,t=null;const s=3e4;async function o(f,p={}){const w=f.startsWith("http")?f:`${a}${f}`,T={method:p.method||"GET",headers:{"Content-Type":"application/json",...p.headers},...p};p.body&&typeof p.body=="object"&&(T.body=JSON.stringify(p.body));try{const x=await fetch(w,T),M=await x.json();if(!x.ok)throw new Error(M.error||`API error: ${x.status}`);return M}catch(x){throw console.error("[PicksService] API request failed:",x),x}}function i(){e=null,t=null}async function b(f={}){const p=new URLSearchParams;Object.entries(f).forEach(([T,x])=>{x!=null&&x!==""&&p.append(T,x)});const w=p.toString()?`?${p}`:"";try{return(await o(w)).picks||[]}catch(T){return console.error("[PicksService] Failed to get picks:",T),[]}}async function A(){try{return(await o("/active")).picks||[]}catch(f){return console.error("[PicksService] Failed to get active picks:",f),[]}}async function F(){try{return(await o("/settled")).picks||[]}catch(f){return console.error("[PicksService] Failed to get settled picks:",f),[]}}async function B(f){try{return(await o(`/${f}`)).pick||null}catch(p){if(p.message.includes("404"))return null;throw p}}async function E(f){return b({league:f.toUpperCase()})}async function U(f){return b({date:f})}async function _(f,p){return b({from:f,to:p})}async function R(){const f=new Date().toISOString().split("T")[0];return U(f)}async function G(f){i();const p=Array.isArray(f)?f:[f];try{const w=await o("",{method:"POST",body:p});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"create",count:w.created||p.length}})),w}catch(w){throw console.error("[PicksService] Failed to create picks:",w),w}}async function z(f,p){i();try{const w=await o(`/${f}`,{method:"PATCH",body:p});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"update",id:f}})),w.pick}catch(w){throw console.error("[PicksService] Failed to update pick:",w),w}}async function O(f,p,w={}){return z(f,{status:p,...w})}async function K(f,p=0){return z(f,{status:"won",result:"WIN",pnl:p})}async function H(f,p=0){return z(f,{status:"lost",result:"LOSS",pnl:-Math.abs(p)})}async function Z(f){return z(f,{status:"push",result:"PUSH",pnl:0})}async function W(f){i();try{return await o(`/${f}`,{method:"DELETE"}),window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"delete",id:f}})),!0}catch(p){throw console.error("[PicksService] Failed to delete pick:",p),p}}async function ee(f=!1){if(!f)throw new Error("Must pass confirm=true to clear all picks");i();try{const p=await o("/clear",{method:"DELETE",headers:{"x-confirm-clear":"true"}});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"clearAll",deleted:p.deleted}})),p}catch(p){throw console.error("[PicksService] Failed to clear picks:",p),p}}async function C(f=null){f||(f=await b());const p={total:f.length,pending:0,live:0,won:0,lost:0,push:0,totalRisk:0,totalPnl:0,byLeague:{}};return f.forEach(w=>{const T=(w.status||"pending").toLowerCase();T==="pending"?p.pending++:T==="live"||T==="on-track"||T==="at-risk"?p.live++:T==="won"||T==="win"?p.won++:T==="lost"||T==="loss"?p.lost++:T==="push"&&p.push++,p.totalRisk+=parseFloat(w.risk)||0,p.totalPnl+=parseFloat(w.pnl)||0;const x=w.league||"Unknown";p.byLeague[x]||(p.byLeague[x]={total:0,won:0,lost:0,pnl:0}),p.byLeague[x].total++,(T==="won"||T==="win")&&p.byLeague[x].won++,(T==="lost"||T==="loss")&&p.byLeague[x].lost++,p.byLeague[x].pnl+=parseFloat(w.pnl)||0}),p.winRate=p.won+p.lost>0?(p.won/(p.won+p.lost)*100).toFixed(1)+"%":"N/A",p}async function I(){const f="gbsv_picks";try{const p=localStorage.getItem(f);if(!p)return{success:!0,migrated:0,message:"No local picks to migrate"};const w=JSON.parse(p);if(!Array.isArray(w)||w.length===0)return{success:!0,migrated:0,message:"No local picks to migrate"};console.log(`[PicksService] Migrating ${w.length} picks from localStorage to Azure...`);const T=await G(w);return T.success?(localStorage.setItem(`${f}_backup_${Date.now()}`,p),localStorage.removeItem(f),console.log(`[PicksService] Migration complete: ${T.created} picks migrated`),{success:!0,migrated:T.created,errors:T.errors,message:`Successfully migrated ${T.created} picks to Azure`}):{success:!1,migrated:0,error:"Migration failed"}}catch(p){return console.error("[PicksService] Migration failed:",p),{success:!1,migrated:0,error:p.message}}}function g(){const f="gbsv_picks";try{const p=localStorage.getItem(f);if(!p)return{needed:!1,count:0};const w=JSON.parse(p);return{needed:Array.isArray(w)&&w.length>0,count:Array.isArray(w)?w.length:0}}catch{return{needed:!1,count:0}}}return{getAll:b,getActive:A,getSettled:F,getById:B,create:G,update:z,remove:W,clearAll:ee,getByLeague:E,getByDate:U,getByDateRange:_,getToday:R,updateStatus:O,markWon:K,markLost:H,markPush:Z,getSummary:C,migrateFromLocalStorage:I,checkMigrationNeeded:g,invalidateCache:i}}();typeof module<"u"&&module.exports&&(module.exports=PicksService),window.PicksService=PicksService,function(){"use strict";const N="gbsv_picks",m="gbsv_unit_multiplier";function a(){try{const u=localStorage.getItem(N);return u?JSON.parse(u):[]}catch(u){return console.error("Error reading picks from localStorage:",u),window.ErrorHandler&&window.ErrorHandler.handleStorage(u,"read"),[]}}function e(u){try{return localStorage.setItem(N,JSON.stringify(u)),console.log(`\u2705 Saved ${u.length} picks to localStorage`),!0}catch(h){return console.error("Error saving picks to localStorage:",h),window.ErrorHandler&&window.ErrorHandler.handleStorage(h,"write"),!1}}function t(u){const h=a(),r=u.map((l,d)=>{let c=(l.sport||l.league||"NBA").toUpperCase();c={NCAAM:"NCAAB",NCAB:"NCAAB",CBB:"NCAAB","COLLEGE BASKETBALL":"NCAAB",NCAAF:"NCAAF",CFB:"NCAAF","COLLEGE FOOTBALL":"NCAAF",NFL:"NFL",NBA:"NBA",NCAAB:"NCAAB",MLB:"MLB",NHL:"NHL"}[c]||c;let y=l.awayTeam||"",v=l.homeTeam||"";if(l.game&&!y&&!v){const S=l.game.split(/\s*(?:@|vs\.?|versus)\s*/i);S.length===2&&(y=S[0].trim(),v=S[1].trim())}let L=l.pickDirection||"";L&&(L=L.replace(/^UNDE\b/i,"UNDER").toUpperCase());let P=(l.pickType||"spread").toLowerCase();return P==="ml"&&(P="moneyline"),P==="tt"&&(P="team-total"),P==="ou"&&(P="total"),{...l,id:l.id||`pick_${Date.now()}_${d}_${Math.random().toString(36).substring(7)}`,createdAt:l.createdAt||new Date().toISOString(),status:l.status||"pending",sport:c,league:c,awayTeam:y,homeTeam:v,pickDirection:L,pickType:P}}),n=[...h,...r];return e(n),r}function s(){localStorage.removeItem(N),console.log("CLEANUP Cleared all picks from localStorage"),W()}function o(u){const h=a().filter(r=>r.id!==u);e(h),W()}function i(u,h){const r=a().map(n=>n.id===u?{...n,status:h,updatedAt:new Date().toISOString()}:n);e(r),W()}function b(){return parseInt(localStorage.getItem(m))||1e3}function A(u){localStorage.setItem(m,u.toString()),window.PickStandardizer&&window.PickStandardizer.setUnitMultiplier(u)}function F(u,h={}){const r=(u||"pending").toLowerCase(),n={win:"Won",won:"Won",loss:"Lost",lost:"Lost",push:"Push","on-track":"On Track","at-risk":"At Risk",live:"Live"};return n[r]?n[r]:r==="pending"?h.countdown?h.countdown:h.scheduled||h.gameTime?`Starts ${h.scheduled||h.gameTime}`:"Pending":u.charAt(0).toUpperCase()+u.slice(1)}function B(u,h={}){const r=(u||"pending").toLowerCase(),n=(h.pickType||"spread").toLowerCase(),l=h.line||"";switch(r){case"pending":return h.gameTime?`Game starts at ${h.gameTime}`:"Awaiting game start";case"on-track":return n==="spread"?`Covering by 8.5 pts \u2022 ${h.countdown||"Live"}`:n==="total"?`On pace for ${h.pickDirection||"Over"} \u2022 ${h.countdown||"Live"}`:n==="moneyline"?`Leading \u2022 ${h.countdown||"Live"}`:`On track to hit \u2022 ${h.countdown||"Live"}`;case"at-risk":return n==="spread"?`Need 5.5 pts to cover \u2022 ${h.countdown||"Live"}`:n==="total"?`Need 12 more pts \u2022 ${h.countdown||"Live"}`:n==="moneyline"?`Trailing \u2022 ${h.countdown||"Live"}`:`At risk \u2022 ${h.countdown||"Live"}`;case"win":case"won":return`+$${(h.win||0).toLocaleString()}`;case"loss":case"lost":return`-$${(h.risk||0).toLocaleString()}`;case"push":return"$0 \u2022 Refunded";default:return""}}const E={"san antonio spurs":{abbr:"SAS",league:"nba"},spurs:{abbr:"SAS",league:"nba"},"new york knicks":{abbr:"NYK",league:"nba"},knicks:{abbr:"NYK",league:"nba"},"los angeles lakers":{abbr:"LAL",league:"nba"},lakers:{abbr:"LAL",league:"nba"},"golden state warriors":{abbr:"GSW",league:"nba"},warriors:{abbr:"GSW",league:"nba"},"boston celtics":{abbr:"BOS",league:"nba"},celtics:{abbr:"BOS",league:"nba"},"miami heat":{abbr:"MIA",league:"nba"},heat:{abbr:"MIA",league:"nba"},"dallas mavericks":{abbr:"DAL",league:"nba"},mavericks:{abbr:"DAL",league:"nba"},mavs:{abbr:"DAL",league:"nba"},"denver nuggets":{abbr:"DEN",league:"nba"},nuggets:{abbr:"DEN",league:"nba"},"phoenix suns":{abbr:"PHX",league:"nba"},suns:{abbr:"PHX",league:"nba"},"milwaukee bucks":{abbr:"MIL",league:"nba"},bucks:{abbr:"MIL",league:"nba"},"philadelphia 76ers":{abbr:"PHI",league:"nba"},"76ers":{abbr:"PHI",league:"nba"},sixers:{abbr:"PHI",league:"nba"},"brooklyn nets":{abbr:"BKN",league:"nba"},nets:{abbr:"BKN",league:"nba"},"chicago bulls":{abbr:"CHI",league:"nba"},bulls:{abbr:"CHI",league:"nba"},"cleveland cavaliers":{abbr:"CLE",league:"nba"},cavaliers:{abbr:"CLE",league:"nba"},cavs:{abbr:"CLE",league:"nba"},"atlanta hawks":{abbr:"ATL",league:"nba"},hawks:{abbr:"ATL",league:"nba"},"toronto raptors":{abbr:"TOR",league:"nba"},raptors:{abbr:"TOR",league:"nba"},"orlando magic":{abbr:"ORL",league:"nba"},magic:{abbr:"ORL",league:"nba"},"indiana pacers":{abbr:"IND",league:"nba"},pacers:{abbr:"IND",league:"nba"},"detroit pistons":{abbr:"DET",league:"nba"},pistons:{abbr:"DET",league:"nba"},"charlotte hornets":{abbr:"CHA",league:"nba"},hornets:{abbr:"CHA",league:"nba"},"washington wizards":{abbr:"WAS",league:"nba"},wizards:{abbr:"WAS",league:"nba"},"memphis grizzlies":{abbr:"MEM",league:"nba"},grizzlies:{abbr:"MEM",league:"nba"},"new orleans pelicans":{abbr:"NOP",league:"nba"},pelicans:{abbr:"NOP",league:"nba"},"houston rockets":{abbr:"HOU",league:"nba"},rockets:{abbr:"HOU",league:"nba"},"minnesota timberwolves":{abbr:"MIN",league:"nba"},timberwolves:{abbr:"MIN",league:"nba"},wolves:{abbr:"MIN",league:"nba"},"oklahoma city thunder":{abbr:"OKC",league:"nba"},thunder:{abbr:"OKC",league:"nba"},"portland trail blazers":{abbr:"POR",league:"nba"},"trail blazers":{abbr:"POR",league:"nba"},blazers:{abbr:"POR",league:"nba"},"utah jazz":{abbr:"UTA",league:"nba"},jazz:{abbr:"UTA",league:"nba"},"sacramento kings":{abbr:"SAC",league:"nba"},kings:{abbr:"SAC",league:"nba"},"la clippers":{abbr:"LAC",league:"nba"},clippers:{abbr:"LAC",league:"nba"},butler:{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},"butler bulldogs":{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},connecticut:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"u conn":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},uconn:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"uconn huskies":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"abilene christian":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},"abilene christian wildcats":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},"arizona wildcats":{abbr:"ARIZ",fullName:"Arizona Wildcats",league:"ncaam",logoId:"12"},"montana st":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state bobcats":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"cal poly slo":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly mustangs":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"oral roberts":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"oral roberts golden eagles":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"missouri st":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state bears":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},marist:{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"marist red foxes":{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"georgia tech":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"georgia tech yellow jackets":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"east tenn st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"etsu buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"north carolina":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},unc:{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"north carolina tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"buffalo bills":{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},bills:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},buffalo:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},"philadelphia eagles":{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},eagles:{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},"kansas city chiefs":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},chiefs:{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"kansas city":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"detroit lions":{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},lions:{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},"baltimore ravens":{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},ravens:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},baltimore:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},"minnesota vikings":{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},vikings:{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},"green bay packers":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},packers:{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"green bay":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"pittsburgh steelers":{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},steelers:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},pittsburgh:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},"houston texans":{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},texans:{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},"los angeles chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},chargers:{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"la chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"denver broncos":{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},broncos:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},denver:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},"cincinnati bengals":{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},bengals:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},cincinnati:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},"seattle seahawks":{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seahawks:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seattle:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},"tampa bay buccaneers":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},buccaneers:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},bucs:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"tampa bay":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"san francisco 49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},niners:{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"san francisco":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"dallas cowboys":{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},cowboys:{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},"miami dolphins":{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},dolphins:{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},"los angeles rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},rams:{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"la rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"arizona cardinals":{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},cardinals:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},arizona:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},"indianapolis colts":{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},colts:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},indianapolis:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},"tennessee titans":{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},titans:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},tennessee:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},"jacksonville jaguars":{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jaguars:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jags:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jacksonville:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},"cleveland browns":{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},browns:{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},"new york giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},giants:{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"ny giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"new york jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},jets:{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"ny jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"new england patriots":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},patriots:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},pats:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"new england":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"washington commanders":{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},commanders:{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},"carolina panthers":{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},panthers:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},carolina:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},"atlanta falcons":{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},falcons:{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},"new orleans saints":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},saints:{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"new orleans":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"chicago bears":{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},bears:{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},"las vegas raiders":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},raiders:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},"las vegas":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},vegas:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"}};function U(u,h,r){if(!window.LogoLoader||!u)return"";if((h==="ncaam"||h==="ncaaf")&&r)return window.LogoLoader.getLogoUrl(h,r);const n=u.toLowerCase();return window.LogoLoader.getLogoUrl(h,n)}async function _(u){if(!u)return{abbr:"N/A",fullName:"",logo:""};if(window.TeamDataLoader&&typeof window.TeamDataLoader.getTeamInfo=="function")try{const n=await window.TeamDataLoader.getTeamInfo(u);if(n&&n.abbr!=="N/A")return n}catch(n){console.warn("[LocalPicksManager] TeamDataLoader failed, using fallback:",n)}const h=u.toLowerCase().trim(),r=E[h];if(r){const n=r.league||"nba",l=U(r.abbr,n,r.logoId);return{abbr:r.abbr,fullName:r.fullName||u,logo:l}}return{abbr:u.substring(0,3).toUpperCase(),fullName:u,logo:""}}function R(u){if(!u)return{abbr:"N/A",fullName:"",logo:""};const h=u.toLowerCase().trim(),r=E[h];if(r){const n=r.league||"nba",l=U(r.abbr,n,r.logoId);return{abbr:r.abbr,fullName:r.fullName||u,logo:l}}return{abbr:u.substring(0,3).toUpperCase(),fullName:u,logo:""}}async function G(u,h=""){if(!window.PickStandardizer)return console.error("PickStandardizer not loaded"),[];window.PickStandardizer.loadTeamVariants&&await window.PickStandardizer.loadTeamVariants(),window.PickStandardizer.setUnitMultiplier(b());const r=window.PickStandardizer.standardize(u);if(r.length===0)return console.warn("No picks could be parsed from content"),[];const n=b(),l=r.map(k=>{const y=k.risk||n;let v=k.win;if(!v&&k.odds&&y){const L=parseInt(k.odds);L>0?v=y*(L/100):L<0&&(v=y/(Math.abs(L)/100))}return{...k,sportsbook:h||k.sportsbook||"Manual Upload",risk:Math.round(y),win:Math.round(v||y*.91),gameDate:k.gameDate||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:k.gameTime||"TBD"}}),d=await z(l),c=t(d);return W(),c}async function z(u){let h=[];if(window.AutoGameFetcher)try{await window.AutoGameFetcher.fetchTodaysGames(),h=window.AutoGameFetcher.getTodaysGames()||[],console.log(`\u{1F3C0} Found ${h.length} games today:`,h.map(r=>`${r.awayTeam} @ ${r.homeTeam} (${r.time})`))}catch(r){console.warn("Could not fetch games:",r)}else console.warn("\u26A0\uFE0F AutoGameFetcher not available");return u.map(r=>{const n={...r},l=r.pickTeam;if(console.log(`\u{1F50D} Looking for game with team: "${l}"`),window.AutoGameFetcher&&h.length>0){const d=window.AutoGameFetcher.findGame(l);d?(console.log(`\u2705 Found game: ${d.awayTeam} (${d.awayRecord}) @ ${d.homeTeam} (${d.homeRecord}) at ${d.time}`),n.awayTeam=d.awayTeam,n.homeTeam=d.homeTeam,n.awayRecord=d.awayRecord||"",n.homeRecord=d.homeRecord||"",n.gameTime=d.time,n.gameDate=d.date,n.sport=d.sport,n.gameStatus=d.status,n.game=`${d.awayTeam} @ ${d.homeTeam}`):console.warn(`\u274C No game found for "${l}" - available teams:`,h.flatMap(c=>[c.awayTeam,c.homeTeam]))}return n.gameDate||(n.gameDate=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})),n.gameTime||(n.gameTime="TBD"),n})}function O(u){if(u==null||u==="")return"$0.00";const h=typeof u=="number"?u:parseFloat(String(u).replace(/[$,]/g,""));return isNaN(h)?"$0.00":`$${h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function K(u){if(!u)return"Today";if(u.includes("/")||u.includes("-")){const h=new Date(u);if(!isNaN(h))return h.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}return u}function H(u){if(!u)return"";const h=u.toUpperCase();if(window.LogoLoader&&typeof window.LogoLoader.getLeagueLogoUrl=="function"){const l={NCAAB:"ncaam",NCAAM:"ncaam","NCAA MEN'S BASKETBALL":"ncaam",CBB:"ncaam",NCAAF:"ncaaf","COLLEGE FOOTBALL":"ncaaf",CFB:"ncaaf",NBA:"nba",NFL:"nfl",MLB:"mlb",NHL:"nhl",MLS:"mls"}[h]||h.toLowerCase();return window.LogoLoader.getLeagueLogoUrl(l)}return{NBA:"/assets/nba-logo.png",NFL:"/assets/nfl-logo.png",NCAAB:"/assets/ncaam-logo.png",NCAAM:"/assets/ncaam-logo.png",NCAAF:"/assets/ncaaf-logo.png",MLB:"/assets/mlb-logo.png",NHL:"/assets/nhl-logo.png"}[h]||""}function Z(u){const h=(u||"").toUpperCase(),n={NCAAAB:"NCAAM",NCAAB:"NCAAM",NCAAF:"NCAAF",NBA:"NBA",NFL:"NFL",MLB:"MLB",NHL:"NHL"}[h]||h,l=H(h);return`
            <div class="league-cell">
                ${l?`<img src="${l}" class="league-logo" alt="${n}" onerror="this.style.display='none'">`:""}
                <span class="league-text">${n}</span>
            </div>
        `}function W(){const u=a(),h=document.getElementById("picks-tbody");if(!h)return;h.innerHTML="";const r=h.closest(".table-container");if(r&&r.classList.toggle("has-picks",u.length>0),u.length===0){console.log("No picks to display");return}u.forEach((n,l)=>{const d=p(n,l);h.appendChild(d)}),console.log(`\u{1F4CA} Displayed ${u.length} picks in table`),typeof window.calculateKPIs=="function"&&typeof window.updateKPITiles=="function"&&setTimeout(()=>{const n=window.calculateKPIs(a());window.updateKPITiles(n)},100),window.ZebraStripes?.applyPicksTableZebraStripes&&setTimeout(()=>window.ZebraStripes.applyPicksTableZebraStripes(),50),window.DashboardFilters&&typeof window.DashboardFilters.applyFilters=="function"&&setTimeout(()=>window.DashboardFilters.applyFilters(),50),window.DashboardFilterPills&&typeof window.DashboardFilterPills.applyFilters=="function"&&setTimeout(()=>window.DashboardFilterPills.applyFilters(),50),setTimeout(async()=>{try{if(window.AutoGameFetcher){console.log("[PICKS-TABLE] Fetching today's games for live scores..."),await window.AutoGameFetcher.fetchTodaysGames(!0);const n=window.AutoGameFetcher.getTodaysGames()||[];console.log(`[PICKS-TABLE] Loaded ${n.length} games for live score matching`)}window.LiveScoreUpdater&&(console.log("[PICKS-TABLE] Starting live score updates..."),window.LiveScoreUpdater.stopLiveUpdates(),window.LiveScoreUpdater.startLiveUpdates(),window.LiveScoreUpdater.updateScores()),typeof window.populateTeamRecordsWhenReady=="function"&&window.populateTeamRecordsWhenReady(h,{force:!0}),console.log("[PICKS-TABLE] \u2705 Live scores and box scores activated")}catch(n){console.warn("[PICKS-TABLE] Error activating live scores:",n)}},200),ee(),I()}function ee(){document.querySelectorAll(".sportsbook-dropdown").forEach(h=>{h.removeEventListener("change",C),h.addEventListener("change",C)})}function C(u){const h=u.target.getAttribute("data-pick-id"),r=u.target.value;if(!h)return;const n=a(),l=n.find(d=>d.id===h);l&&(l.sportsbook=r,e(n),console.log(`\u2705 Updated pick ${h} sportsbook to: ${r||"None"}`))}function I(){const u=document.querySelectorAll(".editable-risk"),h=document.querySelectorAll(".editable-win");u.forEach(r=>{r.removeEventListener("change",g),r.addEventListener("change",g)}),h.forEach(r=>{r.removeEventListener("change",f),r.addEventListener("change",f)})}function g(u){const h=u.target.getAttribute("data-pick-id"),r=parseFloat(u.target.value)||0;if(!h)return;const n=a(),l=n.find(d=>d.id===h);l&&(l.risk=Math.round(r),e(n),console.log(`\u2705 Updated pick ${h} risk to: $${l.risk.toLocaleString()}`))}function f(u){const h=u.target.getAttribute("data-pick-id"),r=parseFloat(u.target.value)||0;if(!h)return;const n=a(),l=n.find(d=>d.id===h);l&&(l.win=Math.round(r),e(n),console.log(`\u2705 Updated pick ${h} win to: $${l.win.toLocaleString()}`))}function p(u,h){const r=document.createElement("tr"),n=R(u.pickTeam),l=u.awayTeam||u.pickTeam||"TBD",d=u.homeTeam||"TBD",c=u.awayRecord||"",k=u.homeRecord||"",y=R(l),v=R(d),L=u.segment||"Full Game",P=L.toLowerCase().includes("1h")||L.toLowerCase().includes("1st")?"1h":L.toLowerCase().includes("2h")||L.toLowerCase().includes("2nd")?"2h":"full-game",S={"1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter","full-game":"Full Game"}[P]||"Full Game";let D="";if(u.pickType==="spread"){const se=u.line||"";D=se.startsWith("+")||se.startsWith("-")?se:se?`+${se}`:""}else if(u.pickType==="moneyline"||u.pickType==="ml")D="ML";else if(u.pickType==="total"||u.pickType==="team-total"||u.pickType==="tt"){let se=(u.pickDirection||"Over").toUpperCase();(se==="UNDE"||se.startsWith("UNDE"))&&(se="UNDER"),D=`${se} ${u.line||""}`.trim()}const j=u.status||"pending",X=u.sportsbook||"";let V=(u.sport||"NBA").toLowerCase();const ae={college:"ncaaf",cfb:"ncaaf","college football":"ncaaf","ncaa football":"ncaaf",cbb:"ncaab","college basketball":"ncaab","ncaa basketball":"ncaab",ncaam:"ncaab"};ae[V]&&(V=ae[V]);const $=u.gameDate&&u.gameTime?new Date(`${u.gameDate} ${u.gameTime}`).getTime():Date.now();r.setAttribute("data-pick-id",u.id||`pick-${h}`),r.setAttribute("data-row-id",u.id||`pick-${h}`),r.setAttribute("data-league",V),r.setAttribute("data-sport",V),r.setAttribute("data-epoch",$),r.setAttribute("data-book",X.toLowerCase()),r.setAttribute("data-away",l.toLowerCase()),r.setAttribute("data-home",d.toLowerCase()),r.setAttribute("data-away-team",l),r.setAttribute("data-home-team",d),r.setAttribute("data-away-abbr",y.abbr||""),r.setAttribute("data-home-abbr",v.abbr||""),r.setAttribute("data-pick-type",u.pickType||"spread"),r.setAttribute("data-pick-team",u.pickTeam||""),r.setAttribute("data-pick-text",D),r.setAttribute("data-line",u.line||""),r.setAttribute("data-segment",P),r.setAttribute("data-odds",u.odds||""),r.setAttribute("data-risk",u.risk||""),r.setAttribute("data-win",u.win||""),r.setAttribute("data-status",j),r.setAttribute("data-game-id",u.gameId||""),r.classList.add("group-start");const Y=!u.homeTeam||d==="TBD",re=y.logo?`<img src="${y.logo}" class="team-logo" alt="${y.abbr}" onerror="this.style.display='none'">`:"",le=v.logo?`<img src="${v.logo}" class="team-logo" alt="${v.abbr}" onerror="this.style.display='none'">`:"",be=n.logo?`<img src="${n.logo}" class="pick-team-logo" alt="${n.abbr}" onerror="this.style.display='none'">`:"",we=Y?`<div class="matchup-cell">
                    <div class="team-line">
                        ${re}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${l}</span>
                            <span class="team-record">${c?`(${c})`:""}</span>
                        </div>
                    </div>
                </div>`:`<div class="matchup-cell">
                    <div class="team-line">
                        ${re}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${l}</span>
                            <span class="team-record">${c?`(${c})`:""}</span>
                        </div>
                    </div>
                    <div class="vs-divider">vs</div>
                    <div class="team-line">
                        ${le}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${d}</span>
                            <span class="team-record">${k?`(${k})`:""}</span>
                        </div>
                    </div>
                </div>`,pe=V==="NBA"||V==="NFL",ye=pe?"boxscore-quarters":"boxscore-halves";let ue,me,ge;pe?(ge=`
                <div class="boxscore-cell header-cell">Q1</div>
                <div class="boxscore-cell header-cell">Q2</div>
                <div class="boxscore-cell header-cell">Q3</div>
                <div class="boxscore-cell header-cell">Q4</div>
                <div class="boxscore-cell header-cell">T</div>`,ue=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${y.logo?`<img src="${y.logo}" class="boxscore-team-logo"  alt="${y.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${y.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-away"></div>
                    <div class="boxscore-cell period-cell q2-away"></div>
                    <div class="boxscore-cell period-cell q3-away"></div>
                    <div class="boxscore-cell period-cell q4-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${v.logo?`<img src="${v.logo}" class="boxscore-team-logo"  alt="${v.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${v.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-home"></div>
                    <div class="boxscore-cell period-cell q2-home"></div>
                    <div class="boxscore-cell period-cell q3-home"></div>
                    <div class="boxscore-cell period-cell q4-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`):(ge=`
                <div class="boxscore-cell header-cell">1H</div>
                <div class="boxscore-cell header-cell">2H</div>
                <div class="boxscore-cell header-cell">T</div>`,ue=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${y.logo?`<img src="${y.logo}" class="boxscore-team-logo"  alt="${y.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${y.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-away"></div>
                    <div class="boxscore-cell period-cell h2-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${v.logo?`<img src="${v.logo}" class="boxscore-team-logo"  alt="${v.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${v.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-home"></div>
                    <div class="boxscore-cell period-cell h2-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`);const ie=u.status||"pending";let ce=u.gameTime||"Pending",de="countdown";ie==="final"||ie==="win"||ie==="loss"||ie==="push"?(ce="Final",de="final"):ie==="live"||ie==="on-track"||ie==="at-risk"?(ce=u.gameTime||"Live",de="live"):ie==="pending"&&(ce=u.gameTime||"Pending",de="countdown");const ke=`
            <div class="boxscore-container" data-live-ready="false">
                <div class="compact-boxscore">
                    <div class="boxscore-grid ${ye}">
                        <div class="boxscore-row header">
                            <div class="boxscore-cell header-cell game-time-cell">
                                <span class="game-time-status ${de}">${ce}</span>
                            </div>
                            ${ge}
                        </div>
                        ${ue}
                        ${Y?"":me}
                    </div>
                </div>
            </div>`,fe=se=>`$${Math.abs(se).toLocaleString()}`,he=j==="win"?`+${fe(u.win||0)}`:j==="loss"?`-${fe(u.risk||0)}`:j==="push"?"$0":"",Se=he;return r.innerHTML=`
            <td data-label="Date & Time">
                <div class="cell-date">${K(u.gameDate)}</div>
                <div class="cell-time">${u.gameTime||"TBD"}</div>
                <select class="sportsbook-dropdown" data-pick-id="${u.id}" aria-label="Change sportsbook for this pick">
                    <option value="">No Book</option>
                    <option value="hulkwager" ${X==="hulkwager"?"selected":""}>Hulk Wager</option>
                    <option value="bombay711" ${X==="bombay711"?"selected":""}>Bombay 711</option>
                    <option value="kingofsports" ${X==="kingofsports"?"selected":""}>King of Sports</option>
                    <option value="primetimeaction" ${X==="primetimeaction"?"selected":""}>Prime Time Action</option>
                    <option value="other" ${X==="other"?"selected":""}>Other</option>
                </select>
            </td>
            <td class="center" data-label="League">
                ${Z(V)}
            </td>
            <td data-label="Matchup">
                ${we}
            </td>
            <td class="center" data-label="Segment">
                <span class="game-segment" data-segment="${P}">${S}</span>
            </td>
            <td data-label="Pick">
                <div class="pick-cell">
                    <div class="pick-team-info">
                        ${be}
                        <span class="pick-team-abbr">${n.abbr||u.pickTeam}</span>
                    </div>
                    <div class="pick-details">
                        <span class="pick-line">${D||u.line||""}</span>
                        <span class="pick-odds">(${u.odds||"-110"})</span>
                    </div>
                    ${u.edge?`<div class="pick-edge"><span class="edge-badge">+${parseFloat(u.edge).toFixed(1)}%</span></div>`:""}
                </div>
            </td>
            <td class="center" data-label="Risk / Win">
                <div class="currency-combined currency-stacked editable-amounts">
                    <div class="currency-risk-row">
                        <input type="number"
                               class="editable-risk"
                               value="${Math.round(u.risk||5e4)}"
                               data-pick-id="${u.id}"
                               aria-label="Risk amount"
                               min="0"
                               step="1000">
                        <span class="currency-separator"> /</span>
                    </div>
                    <input type="number"
                           class="editable-win"
                           value="${Math.round(u.win||5e4)}"
                           data-pick-id="${u.id}"
                           aria-label="Win amount"
                           min="0"
                           step="1000">
                </div>
            </td>
            <td class="center" data-label="Box Score">
                ${ke}
            </td>
            <td class="center" data-label="Status">
                <span class="status-badge" data-status="${j}" data-blurb="${B(j,u)}">${F(j,u)}</span>
            </td>
            <td class="center" data-label="Hit / Miss">
                <span class="hit-miss-value" data-status="${j}">${he}</span>
            </td>
            <td class="center" data-label="$ Won / Lost">
                <span class="won-lost-value" data-status="${j}">${Se}</span>
                <button class="delete-pick-btn" onclick="event.stopPropagation(); window.LocalPicksManager.delete('${u.id}')" title="Remove pick from dashboard">\u2715</button>
            </td>
        `,r}async function w(){const u=a();if(u.length===0)return;if(!u.some(n=>!n.awayRecord&&!n.homeRecord)){console.log("\u2705 All picks already have records");return}console.log("\u{1F504} Re-enriching existing picks with ESPN data...");let r=0;for(;!window.AutoGameFetcher&&r<10;)await new Promise(n=>setTimeout(n,200)),r++;if(!window.AutoGameFetcher){console.warn("\u26A0\uFE0F AutoGameFetcher not available for re-enrichment");return}try{await window.AutoGameFetcher.fetchTodaysGames();const n=window.AutoGameFetcher.getTodaysGames()||[];if(n.length===0){console.log("\u{1F4ED} No games today to enrich with");return}console.log(`\u{1F3C0} Found ${n.length} games for enrichment`);let l=!1;const d=u.map(c=>{if(c.awayRecord||c.homeRecord)return c;const k=c.pickTeam||c.awayTeam;if(!k)return c;const y=window.AutoGameFetcher.findGame(k);return y?(console.log(`\u{1F4DD} Enriching: ${c.pickTeam} -> ${y.awayTeam} (${y.awayRecord}) vs ${y.homeTeam} (${y.homeRecord})`),l=!0,{...c,awayTeam:y.awayTeam,homeTeam:y.homeTeam,awayRecord:y.awayRecord||"",homeRecord:y.homeRecord||"",gameTime:c.gameTime||y.time,gameDate:c.gameDate||y.date,sport:c.sport||y.sport,gameStatus:y.status}):c});l&&(e(d),console.log("\u2705 Picks re-enriched with team records"),W())}catch(n){console.error("Error re-enriching picks:",n)}}function T(u=7){const h="gbsv_last_stale_cleanup",r=localStorage.getItem(h),n=new Date().toDateString();if(r===n)return;const l=a();if(l.length===0){localStorage.setItem(h,n);return}const d=new Date;d.setDate(d.getDate()-u),d.setHours(0,0,0,0);const c=l.filter(k=>{const y=(k.status||"pending").toLowerCase();if(["win","won","loss","lost","push"].includes(y))return!0;const v=k.gameDate||k.createdAt||"";let L=null;try{L=v?new Date(v):null}catch{}return!L||isNaN(L.getTime())?!0:L>=d});if(c.length<l.length){const k=l.length-c.length;console.log(`\u{1F5D1}\uFE0F [Stale Cleanup] Removed ${k} old pending picks (>${u}d), kept ${c.length} picks`),e(c)}localStorage.setItem(h,n)}function x(){const u="gbsv_cleanup_v5";if(localStorage.getItem(u))return;localStorage.removeItem("gbsv_demo_imported_v1"),localStorage.removeItem("gbsv_cleanup_v1");const h=a();if(h.length===0){localStorage.setItem(u,"done");return}const r=new Set(["demo","sample","mock","placeholder","fake","test","example"]),n=h.filter(l=>{if(l.isDemo===!0||l.isSample===!0)return!1;const d=String(l.source||"").toLowerCase();if(r.has(d))return!1;const c=String(l.sportsbook||"").toLowerCase();return!(c==="demo book"||/(demo|sample|mock|placeholder|fake|test|example)/.test(c))});if(n.length<h.length){const l=h.length-n.length;console.log(`[Cleanup] Removed ${l} demo picks, kept ${n.length} real picks`),e(n)}localStorage.setItem(u,"done")}function M(){if(document.body.classList.contains("page-weekly-lineup"))return!1;const u=window.location.pathname.toLowerCase();return!(u.includes("weekly-lineup")||u.includes("odds-market"))}function q(){console.log("\u{1F3E0} LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)"),x(),T(7),window.processAndSavePicks=G,window.loadUploadedPicks=W,M()?(W(),window.PicksSortManager&&typeof window.PicksSortManager.initSorting=="function"&&setTimeout(()=>window.PicksSortManager.initSorting(),100),setTimeout(()=>w(),500)):console.log("\u{1F3E0} LocalPicksManager: Skipping auto-refresh (not on dashboard page)")}function Q(){return a().filter(h=>{const r=(h.status||"pending").toLowerCase();return r==="pending"||r==="live"||r==="on-track"||r==="at-risk"})}function J(){return a().filter(h=>{const r=(h.status||"pending").toLowerCase();return r==="win"||r==="won"||r==="loss"||r==="lost"||r==="push"})}function ne(u=null,h=null){const r=a();return!u&&!h?r:r.filter(n=>{const l=n.gameDate||n.createdAt||n.date||"";if(!l)return!0;try{const d=new Date(l);return!(u&&d<u||h&&d>h)}catch{return!0}})}function te(){const u=new Date,h=new Date(u.getFullYear(),u.getMonth(),u.getDate()),r=new Date(u.getFullYear(),u.getMonth(),u.getDate(),23,59,59,999);return ne(h,r)}function oe(u=30){const h=a(),r=new Date;r.setDate(r.getDate()-u),r.setHours(0,0,0,0);const n=[],l=[];if(h.forEach(d=>{const c=(d.status||"pending").toLowerCase(),k=["win","won","loss","lost","push"].includes(c),y=d.gameDate||d.createdAt||"";let v=null;try{v=y?new Date(y):null}catch{}k&&v&&v<r?n.push(d):l.push(d)}),n.length>0){const d=JSON.parse(localStorage.getItem("gbsv_picks_archive")||"[]");localStorage.setItem("gbsv_picks_archive",JSON.stringify([...d,...n])),e(l),console.log(`\u{1F4E6} [LocalPicksManager] Archived ${n.length} old settled picks`)}return n.length}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",q):q(),window.LocalPicksManager={getAll:a,getActive:Q,getSettled:J,getByDateRange:ne,getToday:te,add:t,parseAndAdd:G,clear:s,delete:o,updateStatus:i,refresh:W,reEnrich:w,getUnitMultiplier:b,setUnitMultiplier:A,archiveOldPicks:oe,cleanupStale:T,debug:()=>{const u=a();console.log("=== LocalPicksManager Debug ==="),console.log(`Total picks in localStorage: ${u.length}`),console.log("Storage key:",N),console.log("Raw localStorage:",localStorage.getItem(N)?.substring(0,500)),u.length>0&&console.log("Sample pick:",JSON.stringify(u[0],null,2));const h=document.getElementById("picks-tbody");return console.log("Table element found:",!!h),console.log("Table rows:",h?.children?.length||0),u},forceRefresh:()=>(console.log("Force refreshing picks table..."),W(),a().length)},console.log("\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)")}(),function(){"use strict";const N="gbsv_weekly_lineup_picks",m="gbsv_picks",a={getLatestPicks(){try{if(window.WeeklyLineup&&typeof window.WeeklyLineup.getActivePicks=="function"){const t=window.WeeklyLineup.getActivePicks();if(t&&t.length>0)return console.log("[SYNC] Got picks from Weekly Lineup (live):",t.length),t}const e=localStorage.getItem(N);if(e){const t=JSON.parse(e);if(t.picks&&Array.isArray(t.picks))return console.log("[SYNC] Got picks from localStorage cache:",t.picks.length),t.picks}}catch(e){console.warn("[SYNC] Error getting latest picks:",e.message)}return[]},pushOutcomes(e){try{if(!Array.isArray(e)){console.warn("[SYNC] pushOutcomes expects an array");return}return window.WeeklyLineup&&typeof window.WeeklyLineup.syncDashboardOutcomes=="function"?(console.log("[SYNC] Pushing outcomes to live Weekly Lineup:",e.length),window.WeeklyLineup.syncDashboardOutcomes(e),!0):(localStorage.setItem("gbsv_pending_outcomes",JSON.stringify({outcomes:e,timestamp:new Date().toISOString()})),console.log("[SYNC] Stored pending outcomes for Weekly Lineup"),!0)}catch(t){return console.error("[SYNC] Error pushing outcomes:",t.message),!1}},getPendingOutcomes(){try{const e=localStorage.getItem("gbsv_pending_outcomes");if(e)return JSON.parse(e).outcomes||null}catch(e){console.warn("[SYNC] Error reading pending outcomes:",e.message)}return null},clearPendingOutcomes(){try{localStorage.removeItem("gbsv_pending_outcomes"),console.log("[SYNC] Cleared pending outcomes")}catch(e){console.warn("[SYNC] Error clearing pending outcomes:",e.message)}},isWeeklyLineupActive(){return!!(window.WeeklyLineup&&typeof window.WeeklyLineup.getActivePicks=="function")},importWeeklyLineupPicks(){try{const e=this.getLatestPicks();return e.length===0?(console.warn("[SYNC] No picks available from Weekly Lineup to import"),!1):window.loadLivePicks&&typeof window.loadLivePicks=="function"?(console.log("[SYNC] Importing picks to Dashboard:",e.length),!0):(console.log("[SYNC] Dashboard table not ready for import"),!1)}catch(e){return console.error("[SYNC] Error importing picks:",e.message),!1}}};if(window.WeeklyLineupSync=a,document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{if(a.isWeeklyLineupActive()){const e=a.getPendingOutcomes();e&&e.length>0&&(console.log("[SYNC] Processing pending outcomes:",e.length),a.pushOutcomes(e),a.clearPendingOutcomes())}});else if(a.isWeeklyLineupActive()){const e=a.getPendingOutcomes();e&&e.length>0&&(console.log("[SYNC] Processing pending outcomes:",e.length),a.pushOutcomes(e),a.clearPendingOutcomes())}console.log("\u2705 WeeklyLineupSync bridge initialized")}(),function(){"use strict";class N{constructor(){this.updateInterval=null,this.lastUpdate=Date.now(),this.updateFrequency=3e4,this.isUpdating=!1,this.activeGames=new Map,this.apiEndpoint=window.APP_CONFIG?window.APP_CONFIG.API_BASE_URL:"/api",this.startLiveUpdates=this.startLiveUpdates.bind(this),this.stopLiveUpdates=this.stopLiveUpdates.bind(this),this.updateScores=this.updateScores.bind(this)}startLiveUpdates(){this.updateInterval||(console.log("Starting live score updates"),this.updateScores(),this.updateInterval=setInterval(()=>{this.updateScores()},this.updateFrequency))}stopLiveUpdates(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null,console.log("Stopped live score updates"))}async updateScores(){if(!this.isUpdating){this.isUpdating=!0;try{const e=this.getActivePicksFromDOM();if(e.length===0){this.isUpdating=!1;return}const t=this.groupPicksBySport(e);for(const[s,o]of Object.entries(t))await this.updateSportScores(s,o);this.updateKPIMetrics(),this.lastUpdate=Date.now()}catch(e){console.error("Error updating scores:",e)}finally{this.isUpdating=!1}}}getActivePicksFromDOM(){const e=[],t=document.getElementById("picks-tbody");return!t||e.length===0&&t.children.length===0||t.querySelectorAll("tr:not(.parlay-legs)").forEach(o=>{if(o.style.display==="none")return;const i=o.querySelector(".status-badge")?.textContent||"";if(i==="Pending"||i==="On Track"||i==="At Risk"){const b=this.extractPickFromRow(o);b&&e.push(b)}}),e}extractPickFromRow(e){try{const t={rowId:e.getAttribute("data-row-id")||e.id,gameId:e.getAttribute("data-game-id"),sport:e.getAttribute("data-sport")||"nfl",awayTeam:e.getAttribute("data-away-team"),homeTeam:e.getAttribute("data-home-team"),awayAbbr:e.getAttribute("data-away-abbr"),homeAbbr:e.getAttribute("data-home-abbr"),pickType:e.getAttribute("data-pick-type"),pickTeam:e.getAttribute("data-pick-team"),line:e.getAttribute("data-line"),currentAwayScore:null,currentHomeScore:null},s=e.querySelector(".boxscore-container, .compact-boxscore");if(s){const o=s.querySelector(".total-away, .boxscore-row:nth-child(2) .boxscore-cell.total"),i=s.querySelector(".total-home, .boxscore-row:nth-child(3) .boxscore-cell.total");o&&(t.currentAwayScore=parseInt(o.textContent)||0),i&&(t.currentHomeScore=parseInt(i.textContent)||0)}return t}catch(t){return console.warn("Failed to extract pick from row:",t),null}}groupPicksBySport(e){const t={};for(const s of e){const o=s.sport||"nfl";t[o]||(t[o]=[]),t[o].push(s)}return t}getSportApiUrl(e){const s=`${e.toUpperCase()}_API_URL`;if(window.ModelEndpointResolver?.getApiEndpoint){const i=window.ModelEndpointResolver.getApiEndpoint(e);if(i)return i}if(window.APP_CONFIG&&window.APP_CONFIG[s])return window.APP_CONFIG[s];const o=window.APP_CONFIG?.API_BASE_FALLBACK||window.APP_CONFIG?.API_BASE_URL||`${window.location.origin}/api`;return o?`${o}/${e.toLowerCase()}`:null}async updateSportScores(e,t){const s=e.toUpperCase();try{if(s==="NFL"||s==="NCAAF"){if(await this.fetchSportsDataIOScores(e,t))return;console.log(`[LIVE-SCORES] SportsDataIO failed for ${e}, falling back to ESPN`)}if(window.AutoGameFetcher){const i=(window.AutoGameFetcher.getTodaysGames()||[]).filter(b=>b.sport?.toUpperCase()===s);if(i.length>0){console.log(`[LIVE-SCORES] Using ESPN data for ${e} (${i.length} games)`);for(const b of t){const A=this.findMatchingGame(b,i);if(A){const F={gameId:A.gameId,awayTeam:A.awayTeam,homeTeam:A.homeTeam,awayScore:A.awayScore||0,homeScore:A.homeScore||0,isLive:A.status&&!A.status.toLowerCase().includes("scheduled")&&!A.status.toLowerCase().includes("final"),isFinal:A.status?.toLowerCase().includes("final"),gameStatus:{clock:A.statusDetail||A.status,period:this.extractPeriod(A.status)}};this.updatePickWithGameData(b,F)}}return}}await this.fetchESPNScores(e,t)}catch(o){console.warn(`[LIVE-SCORES] Failed to update ${e} scores:`,o.message)}}getScoreboardProxyUrl(){const e=window.APP_CONFIG?.FUNCTIONS_BASE_URL;return e?`${e}/api/scoreboard`:"/api/scoreboard"}async fetchSportsDataIOScores(e,t){const s=e.toLowerCase()==="ncaaf"?"cfb":e.toLowerCase(),o=new Date,i=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`,A=`${this.getScoreboardProxyUrl()}/${s}?date=${i}`;try{const F=new AbortController,B=setTimeout(()=>F.abort(),1e4);console.log(`[LIVE-SCORES] Fetching ${e} via proxy: ${A}`);const E=await fetch(A,{signal:F.signal});if(clearTimeout(B),!E.ok)return console.warn(`[LIVE-SCORES] Scoreboard proxy ${e} returned ${E.status}`),!1;const U=await E.json();if(!Array.isArray(U)||U.length===0)return console.log(`[LIVE-SCORES] No SportsDataIO games for ${e} today`),!1;console.log(`[LIVE-SCORES] SportsDataIO returned ${U.length} ${e} games`);for(const _ of t)for(const R of U){const G=R.AwayTeam||R.AwayTeamName||"",z=R.HomeTeam||R.HomeTeamName||"";if(this.teamMatches(_.awayTeam,G)&&this.teamMatches(_.homeTeam,z)){const O=(R.Status||"").toLowerCase(),K=O==="scheduled"||O==="pregame",H=O==="final"||O==="f"||O==="f/ot",Z=!K&&!H&&O!=="postponed"&&O!=="canceled",W={};R.Quarters&&Array.isArray(R.Quarters)&&R.Quarters.forEach((C,I)=>{const g=`q${I+1}`;W[g]={away:C.AwayScore||0,home:C.HomeScore||0}});const ee={gameId:R.GameID||R.ScoreID,awayTeam:G,homeTeam:z,awayScore:R.AwayScore||0,homeScore:R.HomeScore||0,isLive:Z,isFinal:H,scoring:W,gameStatus:{clock:R.TimeRemaining||R.Quarter||O,period:R.Quarter||1}};this.updatePickWithGameData(_,ee);break}}return!0}catch(F){return F.name==="AbortError"?console.warn(`[LIVE-SCORES] SportsDataIO ${e} request timed out`):console.warn(`[LIVE-SCORES] SportsDataIO ${e} error:`,F.message),!1}}extractPeriod(e){if(!e)return 1;const t=e.match(/(\d+)(st|nd|rd|th)/i);return t?parseInt(t[1]):1}async fetchESPNScores(e,t){const s=e.toLowerCase()==="ncaam"?"mens-college-basketball":e.toLowerCase()==="ncaaf"?"college-football":e.toLowerCase(),o=e.toLowerCase()==="nba"||e.toLowerCase()==="ncaam"?"basketball":"football",i=new Date().toISOString().split("T")[0].replace(/-/g,""),b=`https://site.api.espn.com/apis/site/v2/sports/${o}/${s}/scoreboard?dates=${i}`;try{const A=new AbortController,F=setTimeout(()=>A.abort(),1e4),B=await fetch(b,{signal:A.signal});if(clearTimeout(F),!B.ok)return;const U=(await B.json()).events||[];for(const _ of t)for(const R of U){const G=R.competitions?.[0];if(!G)continue;const z=G.competitors||[],O=z.find(H=>H.homeAway==="home"),K=z.find(H=>H.homeAway==="away");if(!(!O||!K)&&this.teamMatches(_.awayTeam,K.team.displayName)&&this.teamMatches(_.homeTeam,O.team.displayName)){const H=G.status?.type||{},Z={gameId:R.id,awayTeam:K.team.displayName,homeTeam:O.team.displayName,awayScore:parseInt(K.score)||0,homeScore:parseInt(O.score)||0,isLive:H.state==="in",isFinal:H.completed===!0,gameStatus:{clock:H.detail||H.description,period:H.period||1}};this.updatePickWithGameData(_,Z);break}}}catch(A){A.name!=="AbortError"&&console.warn(`[LIVE-SCORES] ESPN fallback failed for ${e}:`,A.message)}}findMatchingGame(e,t){for(const s of t){if(e.gameId&&s.gameId===e.gameId)return s;const o=this.teamMatches(e.awayAbbr,s.awayAbbr)||this.teamMatches(e.awayTeam,s.awayTeam),i=this.teamMatches(e.homeAbbr,s.homeAbbr)||this.teamMatches(e.homeTeam,s.homeTeam);if(o&&i)return s}return null}teamMatches(e,t){if(!e||!t)return!1;const s=o=>o.toLowerCase().replace(/[^a-z0-9]/g,"");return s(e)===s(t)}updatePickWithGameData(e,t){const s=document.querySelector(`tr[data-row-id="${e.rowId}"]`);if(!s)return;const o=s.querySelector(".boxscore-container, .compact-boxscore");o&&this.updateBoxScore(o,t);const i=this.calculatePickStatus(e,t);this.updatePickStatus(s,i),this.activeGames.set(e.rowId,t)}updateBoxScore(e,t){if(t.scoring)for(const[b,A]of Object.entries(t.scoring)){const F=e.querySelector(`.${b.toLowerCase()}-away`),B=e.querySelector(`.${b.toLowerCase()}-home`);F&&A.away!==void 0&&(F.textContent=A.away),B&&A.home!==void 0&&(B.textContent=A.home)}const s=e.querySelector(".total-away"),o=e.querySelector(".total-home");s&&t.awayScore!==void 0&&(s.textContent=t.awayScore),o&&t.homeScore!==void 0&&(o.textContent=t.homeScore);const i=e.querySelector(".game-time-status");i&&(t.isLive?(i.textContent=t.gameStatus?.clock||"Live",i.className="game-time-status live"):t.isFinal?(i.textContent="Final",i.className="game-time-status final"):i.className="game-time-status countdown"),e&&e.getAttribute("data-live-ready")!=="true"&&e.setAttribute("data-live-ready","true")}calculatePickStatus(e,t){return t.isFinal?this.calculateFinalStatus(e,t):t.isLive?this.calculateLiveStatus(e,t):"pending"}calculateFinalStatus(e,t){const s=t.awayScore||0,o=t.homeScore||0;if(e.pickType==="spread"){const i=parseFloat(e.line)||0,A=this.teamMatches(e.pickTeam,e.awayTeam)?s-o:o-s;return A+i>0?"win":A+i<0?"loss":"push"}else if(e.pickType==="moneyline"){const i=this.teamMatches(e.pickTeam,e.awayTeam),b=i?s:o,A=i?o:s;return b>A?"win":b<A?"loss":"push"}else if(e.pickType==="total"||e.pickType.includes("ou")){const i=parseFloat(e.line)||0,b=s+o;return e.pickType.includes("over")||e.pickTeam?.toLowerCase().includes("over")?b>i?"win":b<i?"loss":"push":b<i?"win":b>i?"loss":"push"}return"pending"}calculateLiveStatus(e,t){const s=t.awayScore||0,o=t.homeScore||0;if(e.pickType==="spread"){const i=parseFloat(e.line)||0;return(this.teamMatches(e.pickTeam,e.awayTeam)?s-o:o-s)+i>0?"on-track":"at-risk"}else if(e.pickType==="moneyline"){const i=this.teamMatches(e.pickTeam,e.awayTeam);return(i?s:o)>=(i?o:s)?"on-track":"at-risk"}else if(e.pickType==="total"||e.pickType.includes("ou")){const i=parseFloat(e.line)||0,b=s+o,A=e.pickType.includes("over")||e.pickTeam?.toLowerCase().includes("over"),F=t.gameStatus?.period||1,B=b*(4/F);return A?B>i?"on-track":"at-risk":B<i?"on-track":"at-risk"}return"pending"}updatePickStatus(e,t){const s=e.querySelector(".status-badge");!s||s.getAttribute("data-status")===t||(s.setAttribute("data-status",t),s.className=`status-badge status-${t}`,s.textContent=this.getStatusLabel(t),s.style.animation="pulse 0.5s ease",setTimeout(()=>{s.style.animation=""},500),["win","loss","push"].includes(t)&&this.persistStatusToStorage(e,t))}persistStatusToStorage(e,t){try{const s=e.getAttribute("data-pick-id")||e.getAttribute("data-row-id");if(!s)return;const o="gbsv_picks",i=JSON.parse(localStorage.getItem(o)||"[]");let b=!1;const A=i.map(F=>(F.id===s||F.id?.includes(s)||s?.includes(F.id))&&F.status!==t?(b=!0,{...F,status:t,finalizedAt:new Date().toISOString()}):F);b&&(localStorage.setItem(o,JSON.stringify(A)),console.log(`[LIVE-SCORES] Persisted status '${t}' for pick ${s}`))}catch(s){console.error("[LIVE-SCORES] Error persisting status:",s)}}getStatusLabel(e){return{pending:"Pending","on-track":"On Track","at-risk":"At Risk",win:"Win",loss:"Loss",push:"Push"}[e]||e}updateKPIMetrics(){typeof window.recalculateKPIs=="function"&&window.recalculateKPIs(),document.querySelectorAll(".kpi-tile").forEach(t=>{const s=new CustomEvent("update-kpi");t.dispatchEvent(s)})}setUpdateFrequency(e){this.updateFrequency=e*1e3,this.updateInterval&&(this.stopLiveUpdates(),this.startLiveUpdates())}}const m=new N;window.LiveScoreUpdater=m,document.addEventListener("DOMContentLoaded",()=>{window.APP_CONFIG?.LIVE_UPDATES!==!1&&setTimeout(()=>{m.startLiveUpdates()},2e3)}),document.addEventListener("visibilitychange",()=>{document.hidden?m.stopLiveUpdates():m.startLiveUpdates()}),console.log("[LIVE-SCORES] v2.1 loaded - NFL/NCAAF: SportsDataIO (primary) | NBA/NCAAM: ESPN")}(),function(){"use strict";const N=new Date,m=`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`,a=m.replace(/-/g,""),e=6*60*60*1e3,t=18e4,s=6e5;let o=null,i={},b=null;const A={NBA:0,NFL:0,NCAAM:0,NCAAF:0};let F=t;function B(){const C=window.APP_CONFIG?.API_BASE_URL;if(C)return`${C.replace(/\/+$/,"")}/scoreboard`;const I=window.APP_CONFIG?.FUNCTIONS_BASE_URL;return I?`${I.replace(/\/+$/,"")}/scoreboard`:"/api/scoreboard"}async function E(C){const g=`${B()}/${C}?date=${m}`;console.log(`[AUTO-GAME-FETCHER] Fetching ${C} via proxy: ${g}`);const f=await fetch(g);if(!f.ok)throw new Error(`Scoreboard proxy ${C} error: ${f.status}`);return await f.json()}async function U(C){const I=Date.now();if(A[C]&&I-A[C]<e)return;const g=C==="NBA"?"nba":C==="NFL"?"nfl":C==="NCAAM"?"mens-college-basketball":C==="NCAAF"?"college-football":null;if(!g)return;const p=`https://site.api.espn.com/apis/v2/sports/${C==="NBA"||C==="NCAAM"?"basketball":"football"}/${g}/standings`;try{console.log(`[AUTO-GAME-FETCHER] Fetching ${C} standings...`);const w=await fetch(p);if(!w.ok)return;const x=(await w.json()).children||[];for(const M of x){const q=M.standings?.entries||[];for(const Q of q){const J=Q.team?.displayName;if(!J)continue;const ne=Q.stats||[],te=ne.find(r=>r.name==="wins"),oe=ne.find(r=>r.name==="losses"),u=te?.displayValue||te?.value||"0",h=oe?.displayValue||oe?.value||"0";i[J.toLowerCase()]=`${u}-${h}`}}A[C]=I,console.log(`[AUTO-GAME-FETCHER] Loaded ${Object.keys(i).length} team records for ${C}`)}catch(w){console.warn(`[AUTO-GAME-FETCHER] Could not fetch ${C} standings:`,w.message)}}function _(C){if(!C)return"";const I=C.toLowerCase();return i[I]||""}async function R(C){const I=C==="NCAAM"?"mens-college-basketball":C==="NBA"?"nba":C==="NCAAF"?"college-football":C==="NFL"?"nfl":null;if(!I)throw new Error("Unknown sport");const p=`https://site.api.espn.com/apis/site/v2/sports/${C==="NBA"||C==="NCAAM"?"basketball":"football"}/${I}/scoreboard?dates=${a}`;console.log(`[AUTO-GAME-FETCHER] Fetching ${C} from: ${p}`);const w=await fetch(p);if(!w.ok)throw new Error(`ESPN ${C} API error: ${w.status}`);return await w.json()}function G(C,I){return!C||!C.events||C.events.length===0?[]:C.events.map(g=>{const f=g.competitions?.[0],p=f?.competitors||[],w=p.find(J=>J.homeAway==="home"),T=p.find(J=>J.homeAway==="away");if(!f||!w||!T)return null;const M=(f.status||g.status||{}).type||{},q=T.team.displayName,Q=w.team.displayName;return{sport:I,date:m,time:new Date(g.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),awayTeam:q,homeTeam:Q,awayRecord:_(q),homeRecord:_(Q),awayScore:parseInt(T.score,10)||0,homeScore:parseInt(w.score,10)||0,status:M.description||M.name||"Scheduled",statusDetail:M.detail||"",gameId:g.id,channel:f.broadcasts?.[0]?.names?.[0]||"TBD"}}).filter(Boolean)}function z(C,I){return!Array.isArray(C)||C.length===0?[]:C.map(g=>{const f=g.AwayTeam||g.AwayTeamName||"",p=g.HomeTeam||g.HomeTeamName||"";let w="TBD";if(g.DateTime)try{w=new Date(g.DateTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{w="TBD"}const T=(g.Status||"").toLowerCase();let x="Scheduled",M="";return T==="final"||T==="f"||T==="f/ot"?(x="Final",M=T==="f/ot"?"Final/OT":"Final"):T==="inprogress"||T==="in progress"?(x="In Progress",M=g.TimeRemaining?`Q${g.Quarter} ${g.TimeRemaining}`:`Q${g.Quarter||1}`):T==="halftime"?(x="Halftime",M="Halftime"):T==="postponed"?x="Postponed":T==="canceled"&&(x="Canceled"),{sport:I,date:m,time:w,awayTeam:f,homeTeam:p,awayRecord:_(f),homeRecord:_(p),awayScore:g.AwayScore||0,homeScore:g.HomeScore||0,status:x,statusDetail:M,gameId:String(g.GameID||g.ScoreID||""),channel:g.Channel||"TBD",source:"sportsdata.io"}}).filter(g=>g.awayTeam&&g.homeTeam)}async function O(C=!1){if(!C&&o&&b&&Date.now()-b<6e4)return o;const I=new Set(window.APP_CONFIG?.WEEKLY_LINEUP_DISABLED_LEAGUES||window.WEEKLY_LINEUP_DISABLED_LEAGUES||["NFL","NCAAF"]),g=w=>!I.has(w);console.log("[AUTO-GAME-FETCHER] Fetching team standings for records (cached)...");const f=[];g("NBA")&&f.push(U("NBA")),g("NFL")&&f.push(U("NFL")),g("NCAAM")&&f.push(U("NCAAM")),g("NCAAF")&&f.push(U("NCAAF")),await Promise.all(f);const p=[];try{if(g("NCAAM")){console.log("[AUTO-GAME-FETCHER] Fetching NCAAM games...");const w=await R("NCAAM"),T=G(w,"NCAAM");p.push(...T),console.log(`[AUTO-GAME-FETCHER] Found ${T.length} NCAAM games`)}}catch(w){console.error("[AUTO-GAME-FETCHER] Error fetching NCAAM:",w.message)}try{if(g("NBA")){console.log("[AUTO-GAME-FETCHER] Fetching NBA games...");const w=await R("NBA"),T=G(w,"NBA");p.push(...T),console.log(`[AUTO-GAME-FETCHER] Found ${T.length} NBA games`)}}catch(w){console.error("[AUTO-GAME-FETCHER] Error fetching NBA:",w.message)}try{if(g("NFL")){console.log("[AUTO-GAME-FETCHER] Fetching NFL games from SportsDataIO...");const w=await E("nfl"),T=z(w,"NFL");if(T.length>0)p.push(...T),console.log(`[AUTO-GAME-FETCHER] Found ${T.length} NFL games (SportsDataIO)`);else throw new Error("No games from SportsDataIO")}}catch(w){if(g("NFL")){console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NFL failed (${w.message}), trying ESPN...`);try{const T=await R("NFL"),x=G(T,"NFL");p.push(...x),console.log(`[AUTO-GAME-FETCHER] Found ${x.length} NFL games (ESPN fallback)`)}catch(T){console.error("[AUTO-GAME-FETCHER] Error fetching NFL from both sources:",T.message)}}}try{if(g("NCAAF")){console.log("[AUTO-GAME-FETCHER] Fetching NCAAF games from SportsDataIO...");const w=await E("cfb"),T=z(w,"NCAAF");if(T.length>0)p.push(...T),console.log(`[AUTO-GAME-FETCHER] Found ${T.length} NCAAF games (SportsDataIO)`);else throw new Error("No games from SportsDataIO")}}catch(w){if(g("NCAAF")){console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NCAAF failed (${w.message}), trying ESPN...`);try{const T=await R("NCAAF"),x=G(T,"NCAAF");p.push(...x),console.log(`[AUTO-GAME-FETCHER] Found ${x.length} NCAAF games (ESPN fallback)`)}catch(T){console.error("[AUTO-GAME-FETCHER] Error fetching NCAAF from both sources:",T.message)}}}return o=p,b=Date.now(),console.log(`[AUTO-GAME-FETCHER] Total games today: ${p.length}`),p}function K(C,I){if(!o)return null;const g=C.toLowerCase(),f=I?I.toLowerCase():null;return o.find(p=>{const w=p.awayTeam.toLowerCase(),T=p.homeTeam.toLowerCase();return f?w.includes(g)&&T.includes(f)||w.includes(f)&&T.includes(g):w.includes(g)||T.includes(g)})}function H(C){if(!C)return!1;const I=(C.status||"").toLowerCase();return!I.includes("scheduled")&&!I.includes("pre")}function Z(C){if(!C)return!1;const I=(C.status||"").toLowerCase();return I.includes("final")||I.includes("completed")}function W(C){return C?Z(C)?`Game finished: ${C.awayTeam} ${C.awayScore}, ${C.homeTeam} ${C.homeScore}`:H(C)?`In progress: ${C.awayTeam} ${C.awayScore}, ${C.homeTeam} ${C.homeScore}`:`Scheduled for ${C.time}`:"Game not found for today"}async function ee(){try{await O(!0),F=t}catch(C){console.error("[AUTO-GAME-FETCHER] Refresh failed:",C.message||C),F=Math.min(F*2,s)}finally{setTimeout(ee,F)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{O().catch(console.error).finally(()=>ee())}):O().catch(console.error).finally(()=>ee()),window.AutoGameFetcher={fetchTodaysGames:O,findGame:K,hasGameStarted:H,isGameFinished:Z,getGameStatusMessage:W,getTodaysGames:()=>o,getTeamRecord:_,getRecordsCache:()=>i},console.log("\u2705 AutoGameFetcher v2.4 loaded - NFL/NCAAF: SportsDataIO via proxy | NBA/NCAAM: ESPN")}(),function(){"use strict";let N=1e3;const m={spurs:"San Antonio Spurs","san antonio":"San Antonio Spurs",sas:"San Antonio Spurs",knicks:"New York Knicks","new york":"New York Knicks",nyk:"New York Knicks",lakers:"Los Angeles Lakers","la lakers":"Los Angeles Lakers",lal:"Los Angeles Lakers",clippers:"Los Angeles Clippers","la clippers":"Los Angeles Clippers",lac:"Los Angeles Clippers",warriors:"Golden State Warriors","golden state":"Golden State Warriors",gsw:"Golden State Warriors",gs:"Golden State Warriors",celtics:"Boston Celtics",boston:"Boston Celtics",bos:"Boston Celtics",heat:"Miami Heat",miami:"Miami Heat",mia:"Miami Heat",bulls:"Chicago Bulls",chicago:"Chicago Bulls",chi:"Chicago Bulls",cavs:"Cleveland Cavaliers",cavaliers:"Cleveland Cavaliers",cleveland:"Cleveland Cavaliers",cle:"Cleveland Cavaliers",mavs:"Dallas Mavericks",mavericks:"Dallas Mavericks",dallas:"Dallas Mavericks",dal:"Dallas Mavericks",nuggets:"Denver Nuggets",denver:"Denver Nuggets",den:"Denver Nuggets",pistons:"Detroit Pistons",detroit:"Detroit Pistons",det:"Detroit Pistons",rockets:"Houston Rockets",houston:"Houston Rockets",hou:"Houston Rockets",pacers:"Indiana Pacers",indiana:"Indiana Pacers",ind:"Indiana Pacers",grizzlies:"Memphis Grizzlies",memphis:"Memphis Grizzlies",mem:"Memphis Grizzlies",bucks:"Milwaukee Bucks",milwaukee:"Milwaukee Bucks",mil:"Milwaukee Bucks",wolves:"Minnesota Timberwolves",timberwolves:"Minnesota Timberwolves",minnesota:"Minnesota Timberwolves",min:"Minnesota Timberwolves",pelicans:"New Orleans Pelicans","new orleans":"New Orleans Pelicans",nop:"New Orleans Pelicans",no:"New Orleans Pelicans",nets:"Brooklyn Nets",brooklyn:"Brooklyn Nets",bkn:"Brooklyn Nets",bk:"Brooklyn Nets",thunder:"Oklahoma City Thunder",okc:"Oklahoma City Thunder",magic:"Orlando Magic",orlando:"Orlando Magic",orl:"Orlando Magic","76ers":"Philadelphia 76ers",sixers:"Philadelphia 76ers",philly:"Philadelphia 76ers",philadelphia:"Philadelphia 76ers",phi:"Philadelphia 76ers",suns:"Phoenix Suns",phoenix:"Phoenix Suns",phx:"Phoenix Suns",blazers:"Portland Trail Blazers",portland:"Portland Trail Blazers",por:"Portland Trail Blazers",kings:"Sacramento Kings",sacramento:"Sacramento Kings",sac:"Sacramento Kings",raptors:"Toronto Raptors",toronto:"Toronto Raptors",tor:"Toronto Raptors",jazz:"Utah Jazz",utah:"Utah Jazz",uta:"Utah Jazz",wizards:"Washington Wizards",washington:"Washington Wizards",was:"Washington Wizards",wsh:"Washington Wizards",hawks:"Atlanta Hawks",atlanta:"Atlanta Hawks",atl:"Atlanta Hawks",hornets:"Charlotte Hornets",charlotte:"Charlotte Hornets",cha:"Charlotte Hornets",chiefs:"Kansas City Chiefs","kansas city":"Kansas City Chiefs",kc:"Kansas City Chiefs",eagles:"Philadelphia Eagles",cowboys:"Dallas Cowboys",niners:"San Francisco 49ers","49ers":"San Francisco 49ers",bills:"Buffalo Bills",buffalo:"Buffalo Bills",ravens:"Baltimore Ravens",baltimore:"Baltimore Ravens",bengals:"Cincinnati Bengals",cincinnati:"Cincinnati Bengals",browns:"Cleveland Browns",steelers:"Pittsburgh Steelers",pittsburgh:"Pittsburgh Steelers",colts:"Indianapolis Colts",texans:"Houston Texans",jaguars:"Jacksonville Jaguars",jags:"Jacksonville Jaguars",jacksonville:"Jacksonville Jaguars",titans:"Tennessee Titans",tennessee:"Tennessee Titans",broncos:"Denver Broncos",chargers:"Los Angeles Chargers","la chargers":"Los Angeles Chargers",raiders:"Las Vegas Raiders",vegas:"Las Vegas Raiders",seahawks:"Seattle Seahawks",seattle:"Seattle Seahawks",cardinals:"Arizona Cardinals",arizona:"Arizona Cardinals",rams:"Los Angeles Rams","la rams":"Los Angeles Rams",packers:"Green Bay Packers","green bay":"Green Bay Packers",bears:"Chicago Bears",lions:"Detroit Lions",vikings:"Minnesota Vikings",saints:"New Orleans Saints",falcons:"Atlanta Falcons",panthers:"Carolina Panthers",carolina:"Carolina Panthers",bucs:"Tampa Bay Buccaneers",buccaneers:"Tampa Bay Buccaneers",tampa:"Tampa Bay Buccaneers","tampa bay":"Tampa Bay Buccaneers",commanders:"Washington Commanders",giants:"New York Giants","ny giants":"New York Giants",jets:"New York Jets","ny jets":"New York Jets",patriots:"New England Patriots",pats:"New England Patriots","new england":"New England Patriots",dolphins:"Miami Dolphins",army:"Army Black Knights",navy:"Navy Midshipmen",alabama:"Alabama Crimson Tide",bama:"Alabama Crimson Tide",georgia:"Georgia Bulldogs","ohio state":"Ohio State Buckeyes","ohio st":"Ohio State Buckeyes",osu:"Ohio State Buckeyes",michigan:"Michigan Wolverines","michigan state":"Michigan State Spartans","michigan st":"Michigan State Spartans",msu:"Michigan State Spartans",texas:"Texas Longhorns","notre dame":"Notre Dame Fighting Irish",duke:"Duke Blue Devils",unc:"North Carolina Tar Heels","north carolina":"North Carolina Tar Heels",kentucky:"Kentucky Wildcats",kansas:"Kansas Jayhawks",gonzaga:"Gonzaga Bulldogs",auburn:"Auburn Tigers",purdue:"Purdue Boilermakers",uconn:"UConn Huskies","iowa state":"Iowa State Cyclones","iowa st":"Iowa State Cyclones",baylor:"Baylor Bears",ucla:"UCLA Bruins",florida:"Florida Gators",lsu:"LSU Tigers",arkansas:"Arkansas Razorbacks",oregon:"Oregon Ducks",wisconsin:"Wisconsin Badgers",illinois:"Illinois Fighting Illini",iowa:"Iowa Hawkeyes",siena:"Siena Saints","st peters":"Saint Peter's Peacocks","saint peters":"Saint Peter's Peacocks","st peter's":"Saint Peter's Peacocks","saint peter's":"Saint Peter's Peacocks",iona:"Iona Gaels",merrimack:"Merrimack Warriors","robert morris":"Robert Morris Colonials","rob morris":"Robert Morris Colonials","wright state":"Wright State Raiders","wright st":"Wright State Raiders","cleveland state":"Cleveland State Vikings","cleveland st":"Cleveland State Vikings",ipfw:"Purdue Fort Wayne Mastodons","purdue fort wayne":"Purdue Fort Wayne Mastodons","n kentucky":"Northern Kentucky Norse","northern kentucky":"Northern Kentucky Norse",nku:"Northern Kentucky Norse",youngstown:"Youngstown State Penguins","youngstown state":"Youngstown State Penguins","youngstown st":"Youngstown State Penguins","wisc green bay":"Green Bay Phoenix","wisconsin green bay":"Green Bay Phoenix","detroit mercy":"Detroit Mercy Titans",rice:"Rice Owls",utsa:"UTSA Roadrunners",tulane:"Tulane Green Wave",uab:"UAB Blazers","louisiana tech":"Louisiana Tech Bulldogs","la tech":"Louisiana Tech Bulldogs","wisc milwaukee":"Milwaukee Panthers","wisconsin milwaukee":"Milwaukee Panthers",uwm:"Milwaukee Panthers",oakland:"Oakland Golden Grizzlies",marist:"Marist Red Foxes","sacred heart":"Sacred Heart Pioneers",fairfield:"Fairfield Stags",quinnipiac:"Quinnipiac Bobcats",rider:"Rider Broncs",niagara:"Niagara Purple Eagles",manhattan:"Manhattan Jaspers",canisius:"Canisius Golden Griffins","mount st marys":"Mount St. Mary's Mountaineers",wagner:"Wagner Seahawks",marshall:"Marshall Thundering Herd",wku:"Western Kentucky Hilltoppers","western kentucky":"Western Kentucky Hilltoppers",fiu:"FIU Panthers","middle tennessee":"Middle Tennessee Blue Raiders",mtsu:"Middle Tennessee Blue Raiders","old dominion":"Old Dominion Monarchs",odu:"Old Dominion Monarchs","east carolina":"East Carolina Pirates",ecu:"East Carolina Pirates","north texas":"North Texas Mean Green",utep:"UTEP Miners","sam houston":"Sam Houston Bearkats","jacksonville st":"Jacksonville State Gamecocks","new mexico st":"New Mexico State Aggies",liberty:"Liberty Flames","kennesaw state":"Kennesaw State Owls"};let a=!1;async function e(){if(!a)try{const[r,n]=await Promise.all([fetch("assets/data/team-variants/ncaam_team_variants.json").then(l=>l.ok?l.json():null).catch(()=>null),fetch("assets/data/team-variants/nba_team_variants.json").then(l=>l.ok?l.json():null).catch(()=>null)]);if(r){let l=0;for(const[d,c]of Object.entries(r)){const k=c.name,y=(c.location||"").toLowerCase().trim(),v=(c.nickname||"").toLowerCase().trim();y&&!m[y]&&(m[y]=k),d&&!m[d.toLowerCase()]&&(m[d.toLowerCase()]=k);for(const L of c.abbreviations||[]){const P=L.toLowerCase().trim();P.length>2&&!m[P]&&(m[P]=k)}v&&v.length>5&&!m[v]&&(m[v]=k),l++}console.log(`\u2705 Loaded ${l} NCAAM team variants into standardizer`)}if(n){let l=0;for(const[d,c]of Object.entries(n)){const k=c.name||c.fullName,y=(c.location||"").toLowerCase().trim();y&&!m[y]&&(m[y]=k),d&&!m[d.toLowerCase()]&&(m[d.toLowerCase()]=k);for(const v of c.abbreviations||[]){const L=v.toLowerCase().trim();L.length>1&&!m[L]&&(m[L]=k)}l++}console.log(`\u2705 Loaded ${l} NBA team variants into standardizer`)}a=!0}catch(r){console.warn("[PickStandardizer] Could not load team variants:",r)}}e();function t(r,n={}){if(n.unitMultiplier&&(N=n.unitMultiplier),typeof r=="string"&&s(r))return console.log("\u{1F4CB} Detected bet-history paste format"),o(r);if(typeof r=="string"&&r.includes("<")){if(r.includes('data-panel="line"')||r.includes("data-sport-line"))return b(r);if(r.includes("<table")||r.includes("<tr"))return Z(r);if(r.includes("class="))return b(r)}return I(r)}function s(r){if(typeof r!="string")return!1;const n=/\$[\d,]+/.test(r),l=/\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b\s+\d{1,2},?\s*\d{4}/i.test(r),d=/\bML\b/i.test(r)||/[+-]\d{3,4}/.test(r);return n&&(l||d)}function o(r){if(typeof r!="string")return[];const n=r.split(`
`).map(l=>l.trim()).filter(Boolean).map(l=>l.replace(/^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{1,2},?\s*\d{4}\s+\d{1,2}:\d{2}\s*(?:am|pm)?\s*/i,"").trim()).filter(l=>!/^\$[\d,]+/.test(l));return I(n.join(`
`))}function i(r,n="NBA",l=null){return typeof r!="string"?null:f(r,n,l)}function b(r){const n=[],d=new DOMParser().parseFromString(r,"text/html");let c=d.querySelectorAll('[data-panel="line"]');if(c.length===0&&(c=d.querySelectorAll(".line-panel, .game-panel, [data-sport-line]")),c.length===0&&(c=d.querySelectorAll(".lines-row, .game-row, .event-row")),console.log(`\u{1F50D} Found ${c.length} game panels to parse`),c.forEach((k,y)=>{try{const v=A(k);console.log(`  Panel ${y+1}: ${v.length} picks found`),n.push(...v)}catch(v){console.warn("Failed to parse game panel:",v)}}),n.length===0){console.log("\u{1F4DD} No HTML picks found, falling back to text parsing...");const k=d.body?.textContent||r.replace(/<[^>]*>/g," "),y=I(k);n.push(...y)}return console.log(`\u{1F4CA} Total parsed: ${n.length} betting lines`),n}function A(r){const n=[],l=F(r);return!l.firstTeam&&!l.secondTeam||(r.querySelectorAll(".group, .line-group, [data-group-line]").forEach(c=>{try{const k=B(c,l);n.push(...k)}catch(k){console.warn("Failed to parse line group:",k)}}),n.length===0&&r.querySelectorAll('.line-play, .bet-line, [data-field="line"]').forEach(k=>{const y=_(k,l);y&&n.push(y)})),n}function F(r){const n={firstTeam:"",secondTeam:"",date:te(),time:"",sport:"NBA",league:""},l=r.querySelector('[data-field="first-team"], .first-team, .away-team, .team-1'),d=r.querySelector('[data-field="second-team"], .second-team, .home-team, .team-2');l&&(n.firstTeam=l.textContent.trim()),d&&(n.secondTeam=d.textContent.trim());const c=r.querySelector('[data-field="min-date"], .game-date, .date'),k=r.querySelector('[data-field="min-time"], .game-time, .time');c&&(n.date=c.textContent.trim()),k&&(n.time=k.textContent.trim());const y=r.querySelector('[data-field="league-name"], .league, .sport-name');y&&(n.league=y.textContent.trim(),n.sport=K(n.league));const v=r.querySelector("[data-sport-line]");if(v){const L=v.getAttribute("data-sport-line");L&&(n.sport=H(L))}return n.firstTeam&&n.secondTeam&&(n.game=`${n.firstTeam} @ ${n.secondTeam}`,n.awayTeam=n.firstTeam,n.homeTeam=n.secondTeam),n}function B(r,n){const l=[],d=E(r);return r.querySelectorAll(".line-play, .bet-option, [data-type]").forEach((k,y)=>{const v=U(k,n,d,y);v&&l.push(v)}),l}function E(r){const n=r.className||"",l=r.getAttribute("data-type")||"",d=r.textContent.toLowerCase();return l.includes("spread")||l.includes("ps")?"spread":l.includes("ml")||l.includes("money")?"moneyline":l.includes("total")||l.includes("ou")?l.includes("team")||l.includes("tt")?"team-total":"total":n.includes("spread")?"spread":n.includes("money")||n.includes("ml")?"moneyline":n.includes("team-total")||n.includes("tt")?"team-total":n.includes("total")||n.includes("ou")?"total":n.includes("group-1")||n.includes("group-0")?"spread":n.includes("group-2")?"moneyline":n.includes("group-3")?"total":n.includes("group-4")||n.includes("group-5")?"team-total":d.includes("spread")?"spread":d.includes("money")?"moneyline":d.includes("over")||d.includes("under")?"total":"spread"}function U(r,n,l,d){const c={sport:n.sport,segment:"Full Game",status:"pending",date:n.date,time:n.time,game:n.game,awayTeam:n.awayTeam,homeTeam:n.homeTeam},k=r.querySelector('[data-field="line"], .line, .spread-value, .total-value'),y=r.querySelector('[data-field="price"], .price, .odds, .juice');let v=k?k.textContent.trim():"",L=y?y.textContent.trim():"-110";v=v.replace(//g,".5").replace(//g,".25").replace(//g,".75");const P=R(r,d);switch(l){case"spread":c.pickType="spread",c.pickTeam=P===0?n.firstTeam:n.secondTeam,c.line=z(v),c.odds=O(L);break;case"moneyline":c.pickType="moneyline",c.pickTeam=P===0?n.firstTeam:n.secondTeam,c.odds=O(v||L);break;case"total":c.pickType="total",c.pickDirection=P===0?"Over":"Under",c.pickTeam=c.pickDirection,c.line=v.replace(/[ou]/gi,"").trim(),c.odds=O(L);break;case"team-total":c.pickType="team-total",c.pickDirection=G(r,d);const S=Math.floor(d/2);c.pickTeam=S===0?n.firstTeam:n.secondTeam,c.line=v.replace(/[ou]/gi,"").trim(),c.odds=O(L);break}return!c.pickTeam||!c.pickType||!c.line&&!c.odds&&c.pickType!=="moneyline"?null:c}function _(r,n){const l={sport:n.sport,segment:"Full Game",status:"pending",date:n.date,time:n.time,game:n.game,awayTeam:n.awayTeam,homeTeam:n.homeTeam},d=r.textContent.trim();return!d||(C(l,d),!l.pickType)?null:(l.pickTeam||(l.pickTeam=n.firstTeam||"Unknown"),l)}function R(r,n){const l=r.getAttribute("data-team")||r.getAttribute("data-index");if(l)return parseInt(l)||0;const d=r.parentElement;if(d){const k=Array.from(d.children).indexOf(r);if(k!==-1)return k%2}return n%2}function G(r,n){const l=r.textContent.toLowerCase();return l.includes("over")||l.includes("o ")?"Over":l.includes("under")||l.includes("u ")?"Under":n%2===0?"Over":"Under"}function z(r){return r?(r=r.trim(),/^\d+\.?\d*$/.test(r)||/^[+-]/.test(r)?r:/^\d/.test(r)?"+"+r:r):""}function O(r){if(!r)return"-110";if(r=r.trim(),r=r.replace(/[$]/g,""),/^\d+$/.test(r)){const n=parseInt(r);return n>=100?`-${n}`:`+${n}`}return/^[+-]\d+/.test(r)?r:"-110"}function K(r){const n=r.toLowerCase();return n.includes("nba")||n.includes("basketball")?"NBA":n.includes("nfl")||n.includes("football")?"NFL":n.includes("ncaab")||n.includes("ncaam")||n.includes("college basketball")?"NCAAB":n.includes("ncaaf")||n.includes("college football")?"NCAAF":n.includes("mlb")||n.includes("baseball")?"MLB":n.includes("nhl")||n.includes("hockey")?"NHL":n.includes("soccer")||n.includes("mls")||n.includes("premier")?"Soccer":"NBA"}function H(r){const n=r.toLowerCase();return n.includes("nba")?"NBA":n.includes("nfl")?"NFL":n.includes("ncaab")||n.includes("ncaam")?"NCAAB":n.includes("ncaaf")?"NCAAF":n.includes("mlb")?"MLB":n.includes("nhl")?"NHL":"NBA"}function Z(r){const n=[],c=new DOMParser().parseFromString(r,"text/html").querySelectorAll("tr[data-ticket], tr.odd, tr.even"),k=new Set;return c.forEach(y=>{try{const v=y.getAttribute("data-ticket")||"",L=y.querySelector(".type-magic");if(L!==null){const S=L.textContent.trim(),D=y.querySelectorAll(".wager-simple"),j=parseFloat(y.querySelector("[data-risk]")?.getAttribute("data-risk"))||0,X=parseFloat(y.querySelector("[data-win]")?.getAttribute("data-win"))||0;D.forEach((V,ae)=>{const $=W(V,v,S,ae);if($){const Y=`${v}_${$.pickTeam}_${$.line||"ML"}_${$.segment}`;k.has(Y)||(k.add(Y),$.risk=Math.round(j/D.length),$.win=Math.round(X/D.length),$.parlayId=v,$.parlayType=S,$.isParlay=!0,n.push($))}})}else{const S=ee(y);S&&(S.isParlay=!1,n.push(S))}}catch(v){console.warn("Failed to parse HTML row:",v)}}),n}function W(r,n,l,d){const c={sport:"NCAAB",segment:"Full Game",status:"pending"},k=r.querySelector(".choosen");if(k&&(c.pickTeam=k.textContent.trim(),c.pickTeam.includes("/"))){const S=c.pickTeam.split("/").map(D=>D.trim());c.awayTeam=S[0],c.homeTeam=S[1]}const y=r.querySelector(".line-selected");if(y){const S=y.textContent.trim();C(c,S)}const v=r.querySelector(".period-description-s");if(v){const S=v.textContent.trim().toLowerCase();S.includes("1st half")||S.includes("1h")?c.segment="1st Half":(S.includes("2nd half")||S.includes("2h"))&&(c.segment="2nd Half")}const L=r.querySelector("img.team-logo");if(L){const S=L.getAttribute("src")||"";(S.includes("NBA")||S.includes("Spurs")||S.includes("Knicks"))&&(c.sport="NBA")}if(c.pickTeam){const S=c.pickTeam.toLowerCase();(S.includes("spurs")||S.includes("knicks")||S.includes("lakers")||S.includes("celtics"))&&(c.sport="NBA")}const P=r.closest("tr")?.querySelector("td span");if(P){const S=P.textContent.trim(),D=Q(S);D&&(c.date=D.date,c.time=D.time)}return!c.pickTeam||!c.pickType?null:c}function ee(r){const n={sport:"NBA",segment:"Full Game",status:"pending"},l=r.querySelector("td span");if(l){const S=l.textContent.trim(),D=Q(S);D&&(n.date=D.date,n.time=D.time)}const d=r.querySelector(".choosen");d&&(n.pickTeam=d.textContent.trim());const c=r.querySelector(".line-selected");if(c){const S=c.textContent.trim();C(n,S)}const k=r.querySelector(".period-description-s");if(k){const S=k.textContent.trim().toLowerCase();S.includes("1st half")||S.includes("1h")?n.segment="1st Half":S.includes("2nd half")||S.includes("2h")?n.segment="2nd Half":(S.includes("1st quarter")||S.includes("q1")||S.includes("1q"))&&(n.segment="1st Quarter")}const y=r.querySelector("[data-risk]");if(y)n.risk=parseFloat(y.getAttribute("data-risk"))||0;else{const S=r.querySelector(".risk-col span");S&&(n.risk=q(S.textContent))}const v=r.querySelector("[data-win]");if(v)n.win=parseFloat(v.getAttribute("data-win"))||0;else{const S=r.querySelector(".win-col span");S&&(n.win=q(S.textContent))}const L=r.querySelector(".d-r");if(L){const S=L.textContent;if(S.includes("/")||S.includes(" vs ")||S.includes(" @ ")){n.game=S.trim();const D=J(S);D&&(n.awayTeam=D.away,n.homeTeam=D.home)}}const P=r.querySelector(".selection-S .d-r, .selection-M .d-r");if(P){const S=P.textContent.toLowerCase();S.includes("nba")?n.sport="NBA":S.includes("nfl")?n.sport="NFL":S.includes("ncaab")||S.includes("ncaam")?n.sport="NCAAB":S.includes("ncaaf")?n.sport="NCAAF":S.includes("mlb")?n.sport="MLB":S.includes("nhl")&&(n.sport="NHL")}return!n.pickTeam||!n.pickType?null:n}function C(r,n){if(n=n.replace(//g,".5").replace(//g,".25").replace(//g,".75"),/\bML\b/i.test(n)){r.pickType="moneyline";const c=n.match(/ML\s*([+-]\d+)/i);c&&(r.odds=c[1]);return}if(/\b(over|under|o|u)\s*(\d+\.?\d*)/i.test(n)){const c=n.match(/\b(over|under|o|u)\s*(\d+\.?\d*)/i);r.pickType="total",r.pickDirection=/over|o/i.test(c[1])?"Over":"Under",r.line=c[2];const k=n.match(/([+-]\d{2,4})(?:\s|$)/);k&&(r.odds=k[1]);return}const l=n.match(/([+-]?\d+\.?\d*)\s+([+-]\d{2,4})/);if(l){r.pickType="spread",r.line=l[1].startsWith("+")||l[1].startsWith("-")?l[1]:"+"+l[1],r.odds=l[2];return}const d=n.match(/([+-]?\d+\.?\d*)/);d&&(r.pickType="spread",r.line=d[1].startsWith("+")||d[1].startsWith("-")?d[1]:"+"+d[1])}function I(r){const n=[],l=r.replace(/;/g,`
`).replace(/\.\s+/g,`
`).split(`
`).map(y=>y.trim()).filter(y=>y.length>0);let d="NBA",c=null;for(const y of l){if(y.includes("|")){const P=p(y);if(P){P.sport&&(P.sport=P.sport.toUpperCase()),n.push(P);continue}}const v=g(y);if(v.sport&&(d=v.sport.toUpperCase()),v.game&&(c=v.game),v.isContextOnly)continue;const L=f(y,d,c);L&&n.push(L)}const k=n.map(y=>({...y,sport:(y.sport||"NBA").toUpperCase(),league:(y.league||y.sport||"NBA").toUpperCase(),pickDirection:y.pickDirection?y.pickDirection.replace(/^UNDE\b/i,"UNDER").toUpperCase():"",pickType:(y.pickType||"spread").toLowerCase()}));return console.log(`\u{1F4CA} Parsed ${k.length} picks from text input`),k}function g(r){const n=r.toLowerCase(),l={sport:null,game:null,isContextOnly:!1};/\bnfl\b/i.test(n)?l.sport="NFL":/\bnba\b/i.test(n)?l.sport="NBA":/\bncaab\b|\bncaam\b|\bcbb\b/i.test(n)?l.sport="NCAAB":/\bncaaf\b|\bcfb\b/i.test(n)?l.sport="NCAAF":/\bmlb\b/i.test(n)?l.sport="MLB":/\bnhl\b/i.test(n)&&(l.sport="NHL");const d=r.match(/\b([A-Za-z]+)\s*(?:at|@|vs\.?|versus)\s*([A-Za-z]+)\b/i);return d&&(l.game={away:M(d[1]),home:M(d[2])}),!r.match(/\d/)&&(l.sport||l.game)&&(l.isContextOnly=!0),l}function f(r,n,l){const d=(n||"NBA").toUpperCase(),c={sport:d,league:d,segment:"Full Game",status:"pending",date:te(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD"};l&&(c.awayTeam=l.away,c.homeTeam=l.home,c.game=`${l.away} @ ${l.home}`);let k=r.replace(/\s*\/\s*/g," ").replace(/\s+/g," ").trim();const y=k,v=[{pattern:/\b(1st\s*half|first\s*half|1h)\b/i,segment:"1st Half"},{pattern:/\b(2nd\s*half|second\s*half|2h)\b/i,segment:"2nd Half"},{pattern:/\b(1st\s*quarter|first\s*quarter|1q)\b/i,segment:"1st Quarter"},{pattern:/\b(full\s*game|fg)\b/i,segment:"Full Game"}];for(const{pattern:$,segment:Y}of v)if($.test(k)){c.segment=Y,k=k.replace($," ").trim();break}if(/\bml\b/i.test(k)){c.pickType="moneyline",k=k.replace(/\bml\b/gi," ").trim();const $=Object.keys(m);for(const re of $)if(new RegExp(`\\b${re}\\b`,"i").test(k)){c.pickTeam=M(re);break}const Y=k.match(/([+-]\d{3,4})/);if(Y&&(c.odds=Y[1]),c.pickTeam)return console.log(`\u2705 Parsed ML: "${y}" -> ${c.pickTeam} ML (${c.segment})`),c}const L=k.match(/\b([A-Za-z]+)\s*(?:tto|ttu|o|u)\s*([\d.]+)/i)||k.match(/\b([A-Za-z]+)\s+(?:over|under)\s*([\d.]+)/i);if(L){const $=L[1].toLowerCase(),Y=L[2],re=L[0].toLowerCase();if($!=="over"&&$!=="under"&&$!=="o"&&$!=="u")return c.pickType="team-total",c.pickTeam=M($),c.line=Y,/tto|over|\bo\d/i.test(re)?c.pickDirection="Over":c.pickDirection="Under",console.log(`\u2705 Parsed team total: "${y}" -> ${c.pickTeam} ${c.pickDirection} ${c.line} (${c.segment})`),c}const P=k.match(/\b(over|under|o|u)\s*([\d.]+)/i);if(P){c.pickType="total",c.pickDirection=/^(over|o)$/i.test(P[1])?"Over":"Under",c.pickTeam=c.pickDirection,c.line=P[2];const $=k.match(/([+-]\d{3,4})/);return $&&(c.odds=$[1]),console.log(`\u2705 Parsed game total: "${y}" -> ${c.pickDirection} ${c.line}`),c}k=k.replace(/\b(spread|total|moneyline)\b/gi," ").trim();const S=Object.keys(m);let D=null,j=-1;for(const $ of S){const Y=new RegExp(`\\b${$}\\b`,"i"),re=k.match(Y);if(re){const le=re.index;(j===-1||le<j)&&(D=$,j=le)}}if(!D){const $=k.match(/\b([A-Z]{2,4})\b/);$&&(D=$[1].toLowerCase())}if(!D)return console.log(`\u26A0\uFE0F No team found in: "${y}"`),null;c.pickTeam=M(D);const X=[/([+-]?\d+\.?\d*)\s*([+-]\d{3,4})?/],V=k.match(/[+-]?\d+\.?\d*/g)||[];for(const $ of V){const Y=parseFloat($);if(Math.abs(Y)>=100&&($.startsWith("+")||$.startsWith("-"))){c.odds=$;continue}c.line||(c.pickType="spread",c.line=$.startsWith("+")||$.startsWith("-")?$:`+${$}`)}if(!c.line&&c.pickTeam){const $=k.match(/([+-]\d{3,4})/);if($)c.pickType="moneyline",c.odds=$[1];else return console.log(`\u26A0\uFE0F No line/odds found for team in: "${y}"`),null}const ae=k.match(/([A-Za-z]+)\s*[@vs]+\s*([A-Za-z]+)/i);return ae&&(c.awayTeam=M(ae[1]),c.homeTeam=M(ae[2]),c.game=`${c.awayTeam} @ ${c.homeTeam}`),console.log(`\u2705 Parsed: "${y}" -> ${c.pickTeam} ${c.line||c.odds} (${c.segment})`),c}function p(r){const n=r.split("|").map($=>$.trim());if(n.length<3)return null;const[l,d,c]=n,k=l.match(/^(.+?)\s*(?:vs\.?|@|versus)\s*(.+)$/i);if(!k)return null;const y=k[1].trim(),v=k[2].trim();let L="Full Game";const P=d.toLowerCase();P.includes("1st half")||P.includes("1h")?L="1st Half":P.includes("2nd half")||P.includes("2h")?L="2nd Half":(P.includes("1st quarter")||P.includes("1q"))&&(L="1st Quarter");const S={sport:"NCAAB",segment:L,status:"pending",date:te(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD",awayTeam:y,homeTeam:v,game:`${y} @ ${v}`},D=c.match(/\(([+-]?\d+)\)\s*$/);D&&(S.odds=D[1].startsWith("+")||D[1].startsWith("-")?D[1]:`-${D[1]}`);let j=c.replace(/\s*\([+-]?\d+\)\s*$/,"").trim();const X=j.match(/^(over|under|o|u)\s+(\d+\.?\d*)/i);if(X)return S.pickType="total",S.pickDirection=/^(over|o)$/i.test(X[1])?"Over":"Under",S.pickTeam=S.pickDirection,S.line=X[2],console.log(`\u2705 Parsed pipe format (total): "${r}" -> ${S.pickDirection} ${S.line}`),S;const V=j.match(/^(.+?)\s+ml$/i);if(V)return S.pickType="moneyline",S.pickTeam=V[1].trim(),console.log(`\u2705 Parsed pipe format (ML): "${r}" -> ${S.pickTeam} ML`),S;const ae=j.match(/^(.+?)\s+([+-]?\d+\.?\d*)$/);if(ae){S.pickType="spread",S.pickTeam=ae[1].trim();const $=ae[2];return S.line=$.startsWith("+")||$.startsWith("-")?$:`+${$}`,console.log(`\u2705 Parsed pipe format (spread): "${r}" -> ${S.pickTeam} ${S.line}`),S}return console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: "${c}"`),null}function w(r,n,l){const d={sport:n,segment:"Full Game",status:"pending",date:te()};/\b1h\b/i.test(r)?(d.segment="1st Half",r=r.replace(/\b1h\b/i,"").trim()):/\b2h\b/i.test(r)?(d.segment="2nd Half",r=r.replace(/\b2h\b/i,"").trim()):/\b1q\b/i.test(r)&&(d.segment="1st Quarter",r=r.replace(/\b1q\b/i,"").trim());const c=r.match(/\$(\d+(?:\.\d+)?)\s*$/);c&&(d.risk=parseFloat(c[1])*N,r=r.replace(/\$\d+(?:\.\d+)?\s*$/,"").trim());const k=r.match(/^(over|under|o|u)\s+(\d+\.?\d*)\s*([+-]\d{2,4})?/i);if(k)return d.pickType="total",d.pickDirection=/over|o/i.test(k[1])?"Over":"Under",d.pickTeam=d.pickDirection,d.line=k[2],k[3]&&(d.odds=k[3]),d.risk&&d.odds&&(d.win=ne(d.risk,d.odds)),l&&(d.game=l),d;const y=r.match(/^([A-Za-z][A-Za-z\s]*?)(?=\s+[\d+-]|\s+ML|\s+over|\s+under|\s*$)/i);if(!y)return null;const v=y[1].trim();d.pickTeam=M(v);let L=r.substring(y[0].length).trim();if(/^ML\s*/i.test(L)){d.pickType="moneyline",L=L.replace(/^ML\s*/i,"").trim();const P=L.match(/^([+-]\d{2,4})/);P&&(d.odds=P[1])}else if(/^(over|under|o|u)\s*/i.test(L)){d.pickType="team-total";const P=L.match(/^(over|under|o|u)\s*(\d+\.?\d*)\s*([+-]\d{2,4})?/i);P&&(d.pickDirection=/over|o/i.test(P[1])?"Over":"Under",d.line=P[2],P[3]&&(d.odds=P[3]))}else if(/^\d/.test(L)||/^[+-]\d/.test(L)){const P=L.match(/^([+-])(\d+)(?:\s|$)/);if(P){const S=P[1],D=P[2];if(parseInt(D)>=100)d.pickType="moneyline",d.odds=S+D;else{d.pickType="spread",d.line=S+D;const V=L.substring(P[0].length).trim().match(/^([+-]\d{2,4})/);V&&(d.odds=V[1])}}else{d.pickType="spread";const S=L.match(/^(\d+\.?\d*)\s*([+-]\d{2,4})?/);S&&(d.line="+"+S[1],S[2]&&(d.odds=S[2]))}}return d.risk&&d.odds&&(d.win=ne(d.risk,d.odds)),l&&(d.game=l),d.pickType?d:null}function T(r){const n=r.toLowerCase();return r.length<3?!0:[/^tonight['']?s?\s+game/i,/^today['']?s?\s+game/i,/^correction/i,/^note:/i,/^fyi/i,/^\d+k\s+is\s+the\s+unit/i,/^unit/i,/^\^+/].some(d=>d.test(r))}function x(r,n){const l=r.toLowerCase(),d={};l.includes("nba")?d.sport="NBA":l.includes("nfl")?d.sport="NFL":l.includes("ncaab")||l.includes("ncaam")?d.sport="NCAAB":l.includes("ncaaf")?d.sport="NCAAF":l.includes("mlb")?d.sport="MLB":l.includes("nhl")&&(d.sport="NHL");const c=r.match(/([A-Za-z\s]+)\s*(?:vs\.?|@|\/)\s*([A-Za-z\s]+)/i);c&&(d.game=`${c[1].trim()} @ ${c[2].trim()}`),n(d)}function M(r){const n=r.toLowerCase().trim();return m[n]||r}function q(r){if(!r)return 0;const n=r.replace(/[$,]/g,"");return parseFloat(n)||0}function Q(r){const n=r.match(/(\w+\s+\d+,?\s+\d{4})\s+(\d+:\d+\s*[AP]M)/i);return n?{date:n[1].trim(),time:n[2].trim()}:null}function J(r){const n=r.match(/(.+?)\s*(?:\/|vs\.?|@)\s*(.+)/i);return n?{away:n[1].trim(),home:n[2].trim()}:null}function ne(r,n){const l=parseInt(n);return l>0?r*(l/100):r/(Math.abs(l)/100)}function te(){const r=new Date;return`${r.getMonth()+1}/${r.getDate()}/${r.getFullYear()}`}function oe(r){return r.map(n=>{let l="";return n.pickType==="spread"?l=`${n.pickTeam} ${n.line}`:n.pickType==="moneyline"?l=`${n.pickTeam} ML`:n.pickType==="total"?l=`${n.pickDirection||n.pickTeam} ${n.line}`:n.pickType==="team-total"&&(l=`${n.pickTeam} ${n.pickDirection} ${n.line}`),n.odds&&(l+=` (${n.odds})`),{...n,selection:l,displaySegment:n.segment!=="Full Game"?n.segment:"",displayRisk:n.risk?`$${n.risk.toLocaleString()}`:"",displayWin:n.win?`$${Math.round(n.win).toLocaleString()}`:""}})}function u(r){const n=["Date","Time","Sport","Game","Team","Pick Type","Line","Odds","Segment","Risk","To Win","Status"],l=r.map(d=>[d.date||"",d.time||"",d.sport||"",d.game||"",d.pickTeam||"",d.pickType||"",d.line||"",d.odds||"",d.segment||"",d.risk||"",d.win?Math.round(d.win):"",d.status||"pending"]);return[n,...l].map(d=>d.map(c=>`"${c}"`).join(",")).join(`
`)}function h(r){N=r}window.PickStandardizer={standardize:t,parseHTML:Z,parseGameLines:b,parseText:I,parseBetHistory:o,loadTeamVariants:e,toDisplayFormat:oe,toCSV:u,setUnitMultiplier:h,resolveTeamName:M,_parseTextLine:w,_parseLineAndOdds:C,_parseGamePanel:A,_isBetHistoryFormat:s,_parseBetHistoryLeg:i},console.log("\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser")}(),function(){"use strict";const N="gbsv_weekly_lineup_picks",m={activePicks:[],lastFetchedAt:null,isFetching:!1},a={tbody:()=>document.getElementById("picks-tbody"),lastRefreshed:()=>document.querySelector("#ft-last-refreshed .sync-time")},e=()=>new Date().toISOString(),t=g=>{if(!g)return"";const f=new Date(g);if(Number.isNaN(f.getTime()))return String(g);const p=String(f.getMonth()+1).padStart(2,"0"),w=String(f.getDate()).padStart(2,"0");return`${p}/${w}`},s=g=>(g??"").toString(),o=g=>s(g).trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,40),i=g=>{const f=s(g).toUpperCase();return f==="NCAAM"||f==="NCAAB"?"NCAAB":f||"NBA"},b=g=>{const f=i(g.sport||g.league),p=(g.gameDate||g.date||"").toString().slice(0,10),w=o(g.awayTeam),T=o(g.homeTeam),x=o(g.pickType),M=o(g.segment),q=o(g.pickDirection||g.pickTeam||g.pick||""),Q=o(g.line),J=`${f}-${p}-${w}-at-${T}-${x}-${M}-${q}-${Q}`;return J.length<=255?J:J.slice(0,255)},A=(g,f="info")=>{if(window.showNotification){window.showNotification(g,f);return}try{const p=document.createElement("div");p.textContent=g,p.style.cssText="position:fixed;top:20px;right:20px;z-index:99999;padding:10px 14px;border-radius:10px;background:rgba(6,28,20,0.95);color:#e8f0f2;border:1px solid rgba(60,255,181,0.35);",document.body.appendChild(p),setTimeout(()=>p.remove(),2500)}catch{}},F=g=>{const f=a.lastRefreshed();if(!f)return;const p=new Date(g);if(Number.isNaN(p.getTime())){f.textContent="-";return}f.textContent=p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},B=g=>{const f=i(g);return f==="NBA"?{src:"assets/nba-logo.png",alt:"NBA"}:f==="NCAAB"?{src:"assets/ncaam-logo.png",alt:"NCAAM"}:f==="NFL"?{src:"assets/nfl-logo.png",alt:"NFL"}:f==="NCAAF"?{src:"assets/ncaaf-logo.png",alt:"NCAAF"}:{src:"",alt:f}},E=g=>{const f=Math.max(0,Math.min(5,parseInt(g,10)||0));return f<=0?"":"\u{1F525}".repeat(f)},U=g=>{const f=s(g.pickType||"").toLowerCase(),p=s(g.line);if(f==="total"){const w=s(g.pickDirection).toUpperCase();return`${w.includes("UNDER")?"Under":w.includes("OVER")?"Over":w} ${p}`.trim()}return f==="moneyline"||f==="ml"?`${s(g.pickTeam)} ML`.trim():`${s(g.pickTeam)} ${p}`.trim()},_=g=>{const f=a.tbody();f&&(f.innerHTML=`
      <tr class="empty-state-row">
        <td colspan="9" class="empty-state-cell">
          <div class="empty-state">
            <span class="empty-icon">\u{1F4CA}</span>
            <span class="empty-message">${s(g||"No picks")}</span>
          </div>
        </td>
      </tr>
    `)},R=g=>{const f=a.tbody();if(f){if(!Array.isArray(g)||g.length===0){_("No picks fetched yet. Click Fetch to load picks.");return}f.innerHTML="";for(const p of g){const w=i(p.sport||p.league),T=B(w),x=typeof p.edge=="number"?p.edge:parseFloat(String(p.edge||"").replace("%",""))||0,M=p.locked===!0,q=document.createElement("tr");q.className="pick-row",q.setAttribute("data-row-id",p.id),q.setAttribute("data-pick-id",p.id),q.setAttribute("data-league",w);const Q=p.gameDate||p.date,J=t(Q),ne=s(p.odds||"-110"),te=s(p.segment||"FG"),oe=U(p);q.innerHTML=`
        <td class="col-datetime">
          <div class="datetime-cell">
            <div class="cell-date">${s(J)}</div>
            <div class="cell-time">${s(p.time||p.gameTime||"")}</div>
            <div class="cell-book">${s(p.sportsbook||p.book||p.source||"Model")}</div>
          </div>
        </td>
        <td class="center col-league">
          <div class="league-cell">
            ${T.src?`<img src="${T.src}" class="league-logo" alt="${T.alt}" loading="lazy" />`:s(T.alt)}
          </div>
        </td>
        <td class="col-matchup">
          <div class="matchup-cell matchup-inline">
            <span class="team-line"><span class="team-name-full">${s(p.awayTeam)}</span></span>
            <span class="vs-divider">@</span>
            <span class="team-line"><span class="team-name-full">${s(p.homeTeam)}</span></span>
          </div>
        </td>
        <td class="center col-segment">
          <span class="segment-pill" data-segment="${o(te)}">${s(te)}</span>
        </td>
        <td class="col-pick">
          <div class="pick-inline">
            <span class="pick-team">${s(oe)}</span>
            <span class="pick-odds">(${s(ne)})</span>
          </div>
        </td>
        <td class="center col-edge">
          <span class="edge-badge">${x?`${x.toFixed(1)}%`:"-"}</span>
        </td>
        <td class="center col-fire">
          <span class="fire-cell" title="Fire rating">${E(p.fire)}</span>
        </td>
        <td class="center col-track">
          <button
            class="tracker-btn"
            type="button"
            data-pick-id="${p.id}"
            aria-pressed="${M?"true":"false"}"
            title="${M?"Locked in (on Dashboard)":"Not locked"}"
          >${M?"\u{1F512}":"\uFF0B"}</button>
        </td>
      `,f.appendChild(q)}window.Accessibility?.init&&window.Accessibility.init()}},G=g=>{try{localStorage.setItem(N,JSON.stringify({picks:g,fetchedAt:e()}))}catch{}},z=g=>{const f=i(g.sport||g.league),p=(g.gameDate||g.date||e()).toString().slice(0,10);return{id:g.id||b(g),sport:f,league:f,awayTeam:s(g.awayTeam),homeTeam:s(g.homeTeam),pickType:s(g.pickType||"spread").toLowerCase(),pickDirection:s(g.pickDirection||""),pickTeam:s(g.pickTeam||""),line:s(g.line||""),odds:s(g.odds||""),edge:typeof g.edge=="number"?g.edge:parseFloat(String(g.edge||"").replace("%",""))||0,segment:s(g.segment||"FG"),sportsbook:s(g.sportsbook||g.book||"Model"),gameDate:p,gameTime:s(g.time||g.gameTime||""),status:s(g.status||"pending").toLowerCase(),locked:g.locked===!0,lockedAt:g.locked===!0?g.lockedAt||e():null,source:"weekly-lineup",model:s(g.modelStamp||g.model||""),confidence:g.fire??g.confidence??null,notes:s(g.rationale||g.notes||"")}},O=async g=>{if(!window.PicksService?.create){A("PicksService not available (Cosmos sync disabled)","warning");return}if(!Array.isArray(g)||g.length===0)return;const f=g.map(p=>{const w=z({...p,locked:!1,lockedAt:null});return w.id=w.id||b(w),w});try{await window.PicksService.create(f),A(`Saved ${f.length} picks to Dashboard (unlocked)`,"success")}catch(p){A(`Failed to save picks: ${p.message||p}`,"error")}},K=async(g,f)=>{const p=m.activePicks.find(w=>w.id===g);if(p){if(!window.PicksService?.update){A("PicksService not available (cannot lock/unlock)","error");return}try{const w=f?{locked:!0,lockedAt:e()}:{locked:!1,lockedAt:null};await window.PicksService.update(g,w),p.locked=f,p.lockedAt=w.lockedAt,R(m.activePicks),G(m.activePicks),A(f?"Locked in \u2014 now on Dashboard":"Unlocked \u2014 removed from Dashboard","success")}catch(w){A(`Lock update failed: ${w.message||w}`,"error")}}},H=()=>{const g=a.tbody();g&&g.addEventListener("click",f=>{const p=f.target.closest(".tracker-btn");if(!p)return;f.preventDefault(),f.stopPropagation();const w=p.getAttribute("data-pick-id");if(!w)return;const T=p.getAttribute("aria-pressed")==="true";K(w,!T)})},Z=()=>"today",W=async g=>{if(!m.isFetching){if(!window.UnifiedPicksFetcher?.fetchPicks){A("Model fetchers not loaded","error");return}m.isFetching=!0;try{const f=Z(),p=await window.UnifiedPicksFetcher.fetchPicks(g,f,{skipCache:!0}),T=(Array.isArray(p?.picks)?p.picks:[]).map(x=>{const M={...x};return M.sport=i(M.sport||M.league),M.gameDate=(M.gameDate||M.date||e()).toString().slice(0,10),M.id=M.id||b(M),M.locked=M.locked===!0,M});if(T.sort((x,M)=>(M.edge||0)-(x.edge||0)),m.activePicks=T,m.lastFetchedAt=e(),R(T),F(m.lastFetchedAt),G(T),await O(T),p?.errors?.length){const x=p.errors.map(M=>M.league).join(", ");A(`Some leagues unavailable: ${x}`,"warning")}}catch(f){A(`Fetch failed: ${f.message||f}`,"error"),_("Unable to fetch picks. Please try again.")}finally{m.isFetching=!1}}},ee=()=>{const g=document.querySelector(".filter-toolbar");g&&g.addEventListener("click",f=>{const p=f.target.closest("button[data-fetch]");if(!p)return;f.preventDefault();const w=s(p.getAttribute("data-fetch")).toLowerCase();if(w){if(w==="all"){W("all");return}if(w==="ncaab"||w==="ncaam"){W("ncaam");return}W(w)}})},C=()=>{try{const g=localStorage.getItem(N);if(!g)return;const f=JSON.parse(g);if(!Array.isArray(f?.picks))return;m.activePicks=f.picks,m.lastFetchedAt=f.fetchedAt||null,R(m.activePicks),m.lastFetchedAt&&F(m.lastFetchedAt)}catch{}};window.WeeklyLineup={getActivePicks(){return m.activePicks||[]},populateTable(g){m.activePicks=Array.isArray(g)?g:[],R(m.activePicks),G(m.activePicks)},showNotification(g,f){A(g,f)},showEmptyState(g){_(g)}};const I=()=>{C(),ee(),H(),m.lastFetchedAt&&F(m.lastFetchedAt)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I()}(),function(){"use strict";const N=window.APP_CONFIG?.FUNCTIONS_BASE_URL?`${window.APP_CONFIG.FUNCTIONS_BASE_URL}/api/archive-picks`:"/api/archive-picks";class m{constructor(){this.pendingArchives=[],this.isArchiving=!1,this.archiveContainerName="weekly-lineup-archives"}async archivePicks(e,t={}){if(!e||e.length===0)return console.log("No picks to archive"),{success:!1,reason:"No picks provided"};const s={id:this._generateArchiveId(),timestamp:new Date().toISOString(),source:t.source||"weekly-lineup",triggerReason:t.triggerReason||"manual",picksCount:e.length,picks:e,metadata:{userAgent:navigator.userAgent,archiveVersion:"1.0.0",...t}};try{this.isArchiving=!0,this._showArchiveProgress("Archiving picks to cloud storage...");const o=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Archive failed: ${o.status} ${o.statusText}`);const i=await o.json();return console.log("\u2705 Picks archived successfully:",i),this._showArchiveProgress("Archived successfully!","success"),window.dispatchEvent(new CustomEvent("picks:archived",{detail:{archiveId:s.id,count:e.length}})),{success:!0,archiveId:s.id,blobUrl:i.blobUrl}}catch(o){return console.error("Archive failed:",o),this._showArchiveProgress("Archive failed - saving locally","error"),this._archiveLocally(s),{success:!1,error:o.message,localFallback:!0}}finally{this.isArchiving=!1,setTimeout(()=>this._hideArchiveProgress(),3e3)}}async archiveOnRefresh(e,t="all"){if(!(!e||e.length===0))return this.archivePicks(e,{triggerReason:"refresh",sport:t,replacedAt:new Date().toISOString()})}async archiveCompletedSlate(e){if(!e||e.length===0)return;const t=this._calculateSlateStats(e);return this.archivePicks(e,{triggerReason:"slate-complete",stats:t,completedAt:new Date().toISOString()})}_calculateSlateStats(e){let t=0,s=0,o=0,i=0;e.forEach(F=>{const B=(F.outcome||F.result||"").toUpperCase();B==="W"||B==="WIN"?t++:B==="L"||B==="LOSS"?s++:B==="P"||B==="PUSH"?o++:i++});const b=t+s,A=b>0?(t/b*100).toFixed(1):0;return{total:e.length,wins:t,losses:s,pushes:o,pending:i,winRate:parseFloat(A),record:`${t}-${s}${o>0?"-"+o:""}`}}async getArchivedPicks(e={}){const t=new URLSearchParams(e).toString(),s=`${N}?${t}`;try{const o=await fetch(s);if(!o.ok)throw new Error(`Failed to fetch archives: ${o.status}`);return await o.json()}catch(o){return console.error("Failed to fetch archived picks:",o),this._getLocalArchives(e)}}_archiveLocally(e){const t="gbsv_blob_archive_fallback";try{const s=JSON.parse(localStorage.getItem(t)||"[]");s.push(e),s.length>50&&s.shift(),localStorage.setItem(t,JSON.stringify(s)),console.log("Archived to localStorage as fallback")}catch(s){console.error("Local archive also failed:",s)}}_getLocalArchives(e){const t="gbsv_blob_archive_fallback";try{const s=JSON.parse(localStorage.getItem(t)||"[]");return e.sport?s.filter(o=>o.metadata?.sport===e.sport):s}catch{return[]}}async syncLocalArchives(){const e="gbsv_blob_archive_fallback";try{const t=JSON.parse(localStorage.getItem(e)||"[]");if(t.length===0)return{synced:0};let s=0;const o=[];for(const i of t)try{(await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,metadata:{...i.metadata,syncedFromLocal:!0}})})).ok?s++:o.push(i)}catch{o.push(i)}return localStorage.setItem(e,JSON.stringify(o)),console.log(`Synced ${s} archives, ${o.length} failed`),{synced:s,failed:o.length}}catch(t){return console.error("Sync failed:",t),{synced:0,error:t.message}}}_generateArchiveId(){const e=new Date().toISOString().split("T")[0].replace(/-/g,""),t=Math.random().toString(36).substring(2,8);return`archive-${e}-${t}`}_showArchiveProgress(e,t="info"){let s=document.getElementById("archive-progress-indicator");s||(s=document.createElement("div"),s.id="archive-progress-indicator",s.style.cssText=`
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-size: 14px;
                    z-index: 10000;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                `,document.body.appendChild(s));const o={info:{bg:"#1a365d",border:"#3182ce",text:"#90cdf4"},success:{bg:"#1c4532",border:"#38a169",text:"#9ae6b4"},error:{bg:"#742a2a",border:"#e53e3e",text:"#feb2b2"}},i=o[t]||o.info;s.style.backgroundColor=i.bg,s.style.border=`1px solid ${i.border}`,s.style.color=i.text;const b=t==="success"?"\u2713":t==="error"?"\u2717":"\u21BB";s.innerHTML=`<span>${b}</span> ${e}`,s.style.display="flex"}_hideArchiveProgress(){const e=document.getElementById("archive-progress-indicator");e&&(e.style.display="none")}}window.BlobStorageArchiver=new m}(),function(){"use strict";const N=()=>window.APP_CONFIG?.FUNCTIONS_BASE_URL||"";class m{constructor(){this.cache=new Map,this.currentWeek=null,this.initialized=!1}init(){this.initialized||(this._enhanceViewToggle(),this.initialized=!0,console.log("\u{1F4DA} History Manager initialized"))}_enhanceViewToggle(){const e=document.querySelector('[data-view="history"]');e&&e.addEventListener("click",async t=>{setTimeout(()=>this.loadHistoryFromBlob(),100)},{capture:!0})}async loadHistoryFromBlob(){const e=document.querySelector(".weekly-lineup-table tbody");if(e){e.innerHTML=`
                <tr class="loading-row">
                    <td colspan="9" style="text-align:center; padding:40px;">
                        <div class="loading-spinner"></div>
                        <div style="margin-top:10px; color:#888;">Loading archived picks...</div>
                    </td>
                </tr>
            `;try{const t=await this.fetchAvailableWeeks();if(!t||t.length===0){console.log("\u{1F4DA} No blob archives found, using localStorage");return}this._renderWeekSelector(t),await this.loadWeek(t[0])}catch(t){console.error("History load error:",t),e.innerHTML=`
                    <tr class="error-row">
                        <td colspan="9" style="text-align:center; padding:40px; color:#ef4444;">
                            Failed to load history from cloud. Showing local history...
                        </td>
                    </tr>
                `}}}async fetchAvailableWeeks(){const e=await fetch(`${N()}/api/archive-picks/list`);if(!e.ok)throw new Error(`Failed to fetch weeks: ${e.status}`);return(await e.json()).weeks||[]}async loadWeek(e){if(this.currentWeek=e,this.cache.has(e)){this._renderPicks(this.cache.get(e));return}const t=document.querySelector(".weekly-lineup-table tbody");t.innerHTML=`
                <tr class="loading-row">
                    <td colspan="9" style="text-align:center; padding:20px;">
                        Loading ${e}...
                    </td>
                </tr>
            `;try{const s=await fetch(`${N()}/api/archive-picks/${e}`);if(!s.ok)throw new Error(`Failed to fetch week: ${s.status}`);const o=await s.json();this.cache.set(e,o),this._renderPicks(o)}catch(s){console.error(`Failed to load week ${e}:`,s),t.innerHTML=`
                    <tr class="error-row">
                        <td colspan="9" style="text-align:center; padding:20px; color:#ef4444;">
                            Failed to load ${e}
                        </td>
                    </tr>
                `}}_renderWeekSelector(e){let t=document.querySelector(".history-stats-bar");if(!t){t=document.createElement("div"),t.className="history-stats-bar";const i=document.querySelector(".weekly-lineup-table-wrapper");i&&i.insertBefore(t,i.firstChild)}const s=window.SharedUtils?.escapeHtml||(i=>String(i??""));t.innerHTML=`
                <div class="history-controls">
                    <label>Week:</label>
                    <select id="history-week-select" class="history-week-select">
                        ${e.map(i=>`<option value="${s(i)}">${s(this._formatWeekLabel(i))}</option>`).join("")}
                    </select>
                    <span class="history-source-badge">\u2601\uFE0F Cloud Archive</span>
                </div>
                <div class="history-stats" id="history-stats"></div>
            `,t.querySelector("#history-week-select").addEventListener("change",i=>{this.loadWeek(i.target.value)})}_formatWeekLabel(e){const t=e.match(/(\d{4})-week-(\d+)/);return t?`Week ${parseInt(t[2])}, ${t[1]}`:e}_renderPicks(e){const t=e.picks||[],s=document.querySelector(".weekly-lineup-table tbody"),o=document.getElementById("history-stats");if(!s)return;if(t.length===0){s.innerHTML=`
                    <tr class="empty-row">
                        <td colspan="9" style="text-align:center; padding:40px; color:#888;">
                            No picks archived for this week
                        </td>
                    </tr>
                `;return}const i=t.filter(E=>E.outcome==="win").length,b=t.filter(E=>E.outcome==="loss").length,A=t.filter(E=>E.outcome==="push").length,F=t.filter(E=>!E.outcome||E.outcome==="pending").length,B=i+b>0?(i/(i+b)*100).toFixed(1):"N/A";o&&(o.innerHTML=`
                    <span class="stat-item win">${i}W</span>
                    <span class="stat-item loss">${b}L</span>
                    <span class="stat-item push">${A}P</span>
                    ${F>0?`<span class="stat-item pending">${F} Pending</span>`:""}
                    <span class="stat-item rate">${B}%</span>
                `),s.innerHTML=t.map(E=>this._renderPickRow(E)).join("")}_renderPickRow(e){const t=window.SharedUtils?.escapeHtml||(i=>String(i??"")),s=e.outcome?`outcome-${t(e.outcome)}`:"",o=this._getOutcomeIcon(e.outcome);return`
                <tr class="archived-pick-row ${s}">
                    <td class="col-datetime">${this._formatDateTime(e.gameDate,e.gameTime)}</td>
                    <td class="col-league center">${this._getLeagueLogo(e.league)}</td>
                    <td class="col-matchup">${this._formatMatchup(e)}</td>
                    <td class="col-segment center">${t(e.segment||"Full")}</td>
                    <td class="col-pick">${t(e.pick||"")}</td>
                    <td class="col-market center">${t(e.odds||"")}</td>
                    <td class="col-edge center">${e.edge?t(e.edge)+"%":""}</td>
                    <td class="col-fire center">${t(e.confidence||"")}</td>
                    <td class="col-track center">${o}</td>
                </tr>
            `}_getOutcomeIcon(e){switch(e){case"win":return'<span class="outcome-badge win">\u2713 WIN</span>';case"loss":return'<span class="outcome-badge loss">\u2717 LOSS</span>';case"push":return'<span class="outcome-badge push">= PUSH</span>';default:return'<span class="outcome-badge pending">\u23F3</span>'}}_formatDateTime(e,t){return e?`<div class="datetime-cell">
                <span class="date">${e}</span>
                ${t?`<span class="time">${t}</span>`:""}
            </div>`:""}_getLeagueLogo(e){const t={NBA:"https://gbsvorchestratorstorage.blob.core.windows.net/team-logos/leagues-500-nba.png",NFL:"https://gbsvorchestratorstorage.blob.core.windows.net/team-logos/leagues-500-nfl.png",NCAAB:"/assets/icons/league-ncaam.svg",NCAAM:"/assets/icons/league-ncaam.svg",NCAAF:"/assets/icons/league-ncaaf.svg"},s=window.SharedUtils?.escapeHtml||(i=>String(i??"")),o=t[e?.toUpperCase()]||"";return o?`<img src="${o}" alt="${s(e)}" class="league-logo-sm" style="height:24px;">`:s(e||"")}_formatMatchup(e){const t=window.SharedUtils?.escapeHtml||(i=>String(i??"")),s=e.awayTeam||e.team1||"",o=e.homeTeam||e.team2||"";return!s&&!o?t(e.matchup||""):`<div class="matchup-cell">
                <span class="team-away">${t(s)}</span>
                <span class="vs">@</span>
                <span class="team-home">${t(o)}</span>
            </div>`}}window.HistoryManager=new m,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>window.HistoryManager.init()):window.HistoryManager.init()}(),function(){"use strict";const N="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",m="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";let a=!1;class e{constructor(){this.isProcessing=!1}async ensureLibraryLoaded(){return a&&window.pdfjsLib?!0:new Promise((s,o)=>{const i=document.createElement("script");i.src=N,i.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc=m,a=!0,console.log("pdf.js library loaded"),s(!0)},i.onerror=()=>{o(new Error("Failed to load pdf.js library"))},document.head.appendChild(i)})}async extractText(s){if(!s||s.type!=="application/pdf")throw new Error("Invalid PDF file");await this.ensureLibraryLoaded(),this.isProcessing=!0;try{const o=await this._readFileAsArrayBuffer(s),i=await window.pdfjsLib.getDocument({data:o}).promise;console.log(`PDF loaded: ${i.numPages} pages`);let b="";for(let A=1;A<=i.numPages;A++){const E=(await(await i.getPage(A)).getTextContent()).items.map(U=>U.str).join(" ");b+=E+`

`}return b.trim()}finally{this.isProcessing=!1}}async extractAndParsePicks(s){const o=await this.extractText(s);return o?(console.log("Extracted PDF text:",o.substring(0,500)+"..."),window.PickParser?{picks:window.PickParser.parseText(o),rawText:o}:{picks:this._basicParsing(o),rawText:o}):{picks:[],rawText:"",error:"No text extracted from PDF"}}_basicParsing(s){const o=[],i=s.split(`
`).filter(B=>B.trim()),b=/([A-Za-z\s]+)\s+([+-]?\d+\.?\d*)/g,A=/(over|under)\s+(\d+\.?\d*)/gi,F=/([A-Za-z\s]+)\s+(ML|moneyline)\s*([+-]\d+)?/gi;return i.forEach(B=>{let E;for(;(E=b.exec(B))!==null;){const U=E[1].trim(),_=parseFloat(E[2]);U.length>2&&!isNaN(_)&&o.push({team:U,market:"spread",line:_,rawLine:B})}for(;(E=A.exec(B))!==null;)o.push({market:E[1].toLowerCase(),line:parseFloat(E[2]),rawLine:B})}),o}_readFileAsArrayBuffer(s){return new Promise((o,i)=>{const b=new FileReader;b.onload=()=>o(b.result),b.onerror=()=>i(b.error),b.readAsArrayBuffer(s)})}isPDF(s){return s&&(s.type==="application/pdf"||s.name.toLowerCase().endsWith(".pdf"))}}window.PDFParser=new e}(),function(){"use strict";const N=()=>{const t=window.APP_CONFIG?.AZURE_VISION_ENDPOINT||window.APP_CONFIG?.FUNCTIONS_BASE_URL;return t?`${t}/api/ocr`:"/api/ocr"},m="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js";let a=!1;class e{constructor(){this.isProcessing=!1,this.useAzure=!0}async extractText(s){if(!this.isImage(s))throw new Error("Invalid image file");this.isProcessing=!0;try{if(this.useAzure)try{return await this._extractWithAzure(s)}catch(o){console.warn("Azure OCR failed, falling back to Tesseract:",o)}return await this._extractWithTesseract(s)}finally{this.isProcessing=!1}}async _extractWithAzure(s){const o=new FormData;o.append("image",s);const i=await fetch(N(),{method:"POST",body:o});if(!i.ok)throw new Error(`Azure OCR failed: ${i.status}`);const b=await i.json();return{text:b.text||"",confidence:b.confidence||0,method:"azure",regions:b.regions||[]}}async _extractWithTesseract(s){await this._ensureTesseractLoaded(),this._showProgress("Analyzing image...");try{const o=URL.createObjectURL(s),i=await Tesseract.recognize(o,"eng",{logger:b=>{if(b.status==="recognizing text"){const A=Math.round(b.progress*100);this._showProgress(`Extracting text... ${A}%`)}}});return URL.revokeObjectURL(o),{text:i.data.text||"",confidence:i.data.confidence||0,method:"tesseract",words:i.data.words||[]}}finally{this._hideProgress()}}async _ensureTesseractLoaded(){return a&&window.Tesseract?!0:new Promise((s,o)=>{const i=document.createElement("script");i.src=m,i.onload=()=>{a=!0,console.log("Tesseract.js loaded"),s(!0)},i.onerror=()=>{o(new Error("Failed to load Tesseract.js"))},document.head.appendChild(i)})}async extractAndParsePicks(s){const o=await this.extractText(s);return o.text?(console.log(`OCR extracted (${o.method}):`,o.text.substring(0,300)+"..."),window.PickParser?{picks:window.PickParser.parseText(o.text),rawText:o.text,confidence:o.confidence,method:o.method}:{picks:[],rawText:o.text,confidence:o.confidence,method:o.method}):{picks:[],rawText:"",error:"No text extracted from image",method:o.method}}isImage(s){return s?["image/png","image/jpeg","image/jpg","image/gif","image/bmp","image/webp"].includes(s.type)||/\.(png|jpe?g|gif|bmp|webp)$/i.test(s.name):!1}_showProgress(s){let o=document.getElementById("ocr-progress-indicator");o||(o=document.createElement("div"),o.id="ocr-progress-indicator",o.style.cssText=`
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.85);
                    color: #fff;
                    padding: 24px 40px;
                    border-radius: 12px;
                    font-size: 16px;
                    z-index: 10001;
                    text-align: center;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
                `,document.body.appendChild(o)),o.innerHTML=`
                <div style="margin-bottom: 10px;">\u{1F4F7} Image OCR</div>
                <div>${s}</div>
            `,o.style.display="block"}_hideProgress(){const s=document.getElementById("ocr-progress-indicator");s&&(s.style.display="none")}}window.ImageOCRParser=new e}(),function(){"use strict";const N=()=>`${window.APP_CONFIG?.FUNCTIONS_BASE_URL||""}/api/basketball-api`;class m{constructor(){this.baseUrl=N(),this.cache=new Map,this.cacheExpiry=5*60*1e3}async getNBAGames(e){const t=`nba-games-${e}`;if(this._isCacheValid(t))return this.cache.get(t).data;try{const s=await fetch(`${this.baseUrl}/nba/games?date=${e}`);if(!s.ok)throw new Error(`Failed to fetch NBA games: ${s.status}`);const o=await s.json();return this._setCache(t,o),o}catch(s){return console.error("Basketball API - NBA games error:",s),null}}async getNCAMGames(e){const t=`ncaam-games-${e}`;if(this._isCacheValid(t))return this.cache.get(t).data;try{const s=await fetch(`${this.baseUrl}/ncaam/games?date=${e}`);if(!s.ok)throw new Error(`Failed to fetch NCAAM games: ${s.status}`);const o=await s.json();return this._setCache(t,o),o}catch(s){return console.error("Basketball API - NCAAM games error:",s),null}}async getLiveScore(e,t="nba"){try{const s=await fetch(`${this.baseUrl}/${t}/game/${e}/live`);if(!s.ok)throw new Error(`Failed to fetch live score: ${s.status}`);return await s.json()}catch(s){return console.error("Basketball API - Live score error:",s),null}}async getStandings(e="nba",t="2025"){const s=`${e}-standings-${t}`;if(this._isCacheValid(s))return this.cache.get(s).data;try{const o=await fetch(`${this.baseUrl}/${e}/standings?season=${t}`);if(!o.ok)throw new Error(`Failed to fetch standings: ${o.status}`);const i=await o.json();return this._setCache(s,i),i}catch(o){return console.error("Basketball API - Standings error:",o),null}}async getTeamStats(e,t="nba"){const s=`${t}-team-${e}`;if(this._isCacheValid(s))return this.cache.get(s).data;try{const o=await fetch(`${this.baseUrl}/${t}/team/${e}/stats`);if(!o.ok)throw new Error(`Failed to fetch team stats: ${o.status}`);const i=await o.json();return this._setCache(s,i),i}catch(o){return console.error("Basketball API - Team stats error:",o),null}}async getOdds(e="nba"){try{const t=await fetch(`${this.baseUrl}/${e}/odds`);if(!t.ok)throw new Error(`Failed to fetch odds: ${t.status}`);return await t.json()}catch(t){return console.error("Basketball API - Odds error:",t),null}}_isCacheValid(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp<this.cacheExpiry:!1}_setCache(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}clearCache(){this.cache.clear()}async testConnection(){try{return(await fetch(`${this.baseUrl}/health`)).ok}catch{return!1}}}window.BasketballAPIClient=new m}(),function(){"use strict";const N=()=>window.APP_CONFIG?.FUNCTIONS_BASE_URL||"";class m{constructor(){this.connectedBooks=new Map,this.adapters={},this.initialized=!1}init(){this.initialized||(this._registerAdapters(),this._loadConnections(),this.initialized=!0,console.log("\u{1F4DA} Sportsbook Connector initialized"))}_registerAdapters(){this.adapters={action_network:{name:"Action Network",logo:"/assets/sportsbooks/actionnetwork.png",authType:"credentials",fetchBets:e=>this._fetchActionNetworkBets(e),parseBet:e=>this._parseActionNetworkBet(e)}}}_loadConnections(){try{const t=localStorage.getItem("gbsv_sportsbook_connections");t&&(JSON.parse(t).forEach(o=>{const i=o.connectedAt?new Date(o.connectedAt).getTime():0;if(Date.now()-i>864e5){console.warn(`[SPORTSBOOK] Expired token for ${o.bookId}, removing`);return}this.connectedBooks.set(o.bookId,{...o,lastSync:o.lastSync?new Date(o.lastSync):null})}),this._saveConnections())}catch(t){console.error("Failed to load sportsbook connections:",t)}}_saveConnections(){try{const e=Array.from(this.connectedBooks.values());localStorage.setItem("gbsv_sportsbook_connections",JSON.stringify(e))}catch(e){console.error("Failed to save sportsbook connections:",e)}}getAvailableBooks(){return Object.entries(this.adapters).map(([e,t])=>({id:e,name:t.name,logo:t.logo,authType:t.authType,connected:this.connectedBooks.has(e)}))}getConnectedBooks(){return Array.from(this.connectedBooks.values())}async connect(e,t){const s=this.adapters[e];if(!s)throw new Error(`Unknown sportsbook: ${e}`);if(s.authType==="oauth")return this._initiateOAuth(e);const o=await fetch(`${N()}/api/sportsbook/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:e,credentials:t})});if(!o.ok){const b=await o.json();throw new Error(b.message||"Failed to connect")}const i=await o.json();return this.connectedBooks.set(e,{bookId:e,name:s.name,connectedAt:new Date().toISOString(),lastSync:null,token:i.token}),this._saveConnections(),window.dispatchEvent(new CustomEvent("sportsbook:connected",{detail:{bookId:e,name:s.name}})),i}disconnect(e){this.connectedBooks.has(e)&&(this.connectedBooks.delete(e),this._saveConnections(),window.dispatchEvent(new CustomEvent("sportsbook:disconnected",{detail:{bookId:e}})))}async fetchBets(e,t={}){const s=this.connectedBooks.get(e);if(!s)throw new Error(`Not connected to ${e}`);const o=await fetch(`${N()}/api/sportsbook/bets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:e,token:s.token,dateRange:t.dateRange||"week",status:t.status||"all"})});if(!o.ok)throw new Error("Failed to fetch bets");const i=await o.json(),b=this.adapters[e],A=(i.bets||[]).map(F=>b.parseBet(F));return s.lastSync=new Date().toISOString(),this._saveConnections(),A}async fetchAllBets(e={}){const t=[];for(const[s,o]of this.connectedBooks)try{const i=await this.fetchBets(s,e);t.push(...i.map(b=>({...b,source:s})))}catch(i){console.error(`Failed to fetch from ${s}:`,i)}return t.sort((s,o)=>new Date(o.placedAt)-new Date(s.placedAt)),t}async syncToDashboard(e){if(!e||e.length===0)return[];const t=[];for(const s of e){const o=this._convertToPickFormat(s);if(window.LocalPicksManager)try{await window.LocalPicksManager.addPick(o),t.push(o)}catch(i){console.error("Failed to add bet to dashboard:",i)}}return t}_convertToPickFormat(e){return{id:`${e.source}-${e.betId}`,source:e.source,league:e.league,gameDate:e.gameDate,gameTime:e.gameTime,awayTeam:e.awayTeam,homeTeam:e.homeTeam,pick:e.selection,odds:e.odds,risk:e.stake,toWin:e.potentialWin,outcome:e.outcome,sportsbook:e.source,placedAt:e.placedAt,settledAt:e.settledAt}}_initiateOAuth(e){const t=encodeURIComponent(window.location.href);window.location.href=`${N()}/api/sportsbook/oauth/${e}?redirect=${t}`}async _fetchActionNetworkBets(e){return[]}_parseActionNetworkBet(e){return{betId:e.id,league:e.sport?.toUpperCase(),awayTeam:e.away_team,homeTeam:e.home_team,selection:e.pick_label,odds:e.odds,stake:e.risk,potentialWin:e.to_win,outcome:e.result,placedAt:e.created_at,settledAt:e.settled_at,gameDate:e.game_date,gameTime:e.game_time}}}window.SportsbookConnector=new m,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>window.SportsbookConnector.init()):window.SportsbookConnector.init()}();
//# sourceMappingURL=weekly-lineup.min.js.map
