(function(){"use strict";let h=1e3;const l={spurs:"San Antonio Spurs","san antonio":"San Antonio Spurs",sas:"San Antonio Spurs",knicks:"New York Knicks","new york":"New York Knicks",nyk:"New York Knicks",lakers:"Los Angeles Lakers","la lakers":"Los Angeles Lakers",lal:"Los Angeles Lakers",clippers:"Los Angeles Clippers","la clippers":"Los Angeles Clippers",lac:"Los Angeles Clippers",warriors:"Golden State Warriors","golden state":"Golden State Warriors",gsw:"Golden State Warriors",gs:"Golden State Warriors",celtics:"Boston Celtics",boston:"Boston Celtics",bos:"Boston Celtics",heat:"Miami Heat",miami:"Miami Heat",mia:"Miami Heat",bulls:"Chicago Bulls",chicago:"Chicago Bulls",chi:"Chicago Bulls",cavs:"Cleveland Cavaliers",cavaliers:"Cleveland Cavaliers",cleveland:"Cleveland Cavaliers",cle:"Cleveland Cavaliers",mavs:"Dallas Mavericks",mavericks:"Dallas Mavericks",dallas:"Dallas Mavericks",dal:"Dallas Mavericks",nuggets:"Denver Nuggets",denver:"Denver Nuggets",den:"Denver Nuggets",pistons:"Detroit Pistons",detroit:"Detroit Pistons",det:"Detroit Pistons",rockets:"Houston Rockets",houston:"Houston Rockets",hou:"Houston Rockets",pacers:"Indiana Pacers",indiana:"Indiana Pacers",ind:"Indiana Pacers",grizzlies:"Memphis Grizzlies",memphis:"Memphis Grizzlies",mem:"Memphis Grizzlies",bucks:"Milwaukee Bucks",milwaukee:"Milwaukee Bucks",mil:"Milwaukee Bucks",wolves:"Minnesota Timberwolves",timberwolves:"Minnesota Timberwolves",minnesota:"Minnesota Timberwolves",min:"Minnesota Timberwolves",pelicans:"New Orleans Pelicans","new orleans":"New Orleans Pelicans",nop:"New Orleans Pelicans",no:"New Orleans Pelicans",nets:"Brooklyn Nets",brooklyn:"Brooklyn Nets",bkn:"Brooklyn Nets",bk:"Brooklyn Nets",thunder:"Oklahoma City Thunder",okc:"Oklahoma City Thunder",magic:"Orlando Magic",orlando:"Orlando Magic",orl:"Orlando Magic","76ers":"Philadelphia 76ers",sixers:"Philadelphia 76ers",philly:"Philadelphia 76ers",philadelphia:"Philadelphia 76ers",phi:"Philadelphia 76ers",suns:"Phoenix Suns",phoenix:"Phoenix Suns",phx:"Phoenix Suns",blazers:"Portland Trail Blazers",portland:"Portland Trail Blazers",por:"Portland Trail Blazers",kings:"Sacramento Kings",sacramento:"Sacramento Kings",sac:"Sacramento Kings",raptors:"Toronto Raptors",toronto:"Toronto Raptors",tor:"Toronto Raptors",jazz:"Utah Jazz",utah:"Utah Jazz",uta:"Utah Jazz",wizards:"Washington Wizards",washington:"Washington Wizards",was:"Washington Wizards",wsh:"Washington Wizards",hawks:"Atlanta Hawks",atlanta:"Atlanta Hawks",atl:"Atlanta Hawks",hornets:"Charlotte Hornets",charlotte:"Charlotte Hornets",cha:"Charlotte Hornets",chiefs:"Kansas City Chiefs","kansas city":"Kansas City Chiefs",kc:"Kansas City Chiefs",eagles:"Philadelphia Eagles",cowboys:"Dallas Cowboys",niners:"San Francisco 49ers","49ers":"San Francisco 49ers",bills:"Buffalo Bills",buffalo:"Buffalo Bills",ravens:"Baltimore Ravens",baltimore:"Baltimore Ravens",bengals:"Cincinnati Bengals",cincinnati:"Cincinnati Bengals",browns:"Cleveland Browns",steelers:"Pittsburgh Steelers",pittsburgh:"Pittsburgh Steelers",colts:"Indianapolis Colts",texans:"Houston Texans",jaguars:"Jacksonville Jaguars",jags:"Jacksonville Jaguars",jacksonville:"Jacksonville Jaguars",titans:"Tennessee Titans",tennessee:"Tennessee Titans",broncos:"Denver Broncos",chargers:"Los Angeles Chargers","la chargers":"Los Angeles Chargers",raiders:"Las Vegas Raiders",vegas:"Las Vegas Raiders",seahawks:"Seattle Seahawks",seattle:"Seattle Seahawks",cardinals:"Arizona Cardinals",arizona:"Arizona Cardinals",rams:"Los Angeles Rams","la rams":"Los Angeles Rams",packers:"Green Bay Packers","green bay":"Green Bay Packers",bears:"Chicago Bears",lions:"Detroit Lions",vikings:"Minnesota Vikings",saints:"New Orleans Saints",falcons:"Atlanta Falcons",panthers:"Carolina Panthers",carolina:"Carolina Panthers",bucs:"Tampa Bay Buccaneers",buccaneers:"Tampa Bay Buccaneers",tampa:"Tampa Bay Buccaneers","tampa bay":"Tampa Bay Buccaneers",commanders:"Washington Commanders",giants:"New York Giants","ny giants":"New York Giants",jets:"New York Jets","ny jets":"New York Jets",patriots:"New England Patriots",pats:"New England Patriots","new england":"New England Patriots",dolphins:"Miami Dolphins",army:"Army Black Knights",navy:"Navy Midshipmen",alabama:"Alabama Crimson Tide",bama:"Alabama Crimson Tide",georgia:"Georgia Bulldogs","ohio state":"Ohio State Buckeyes","ohio st":"Ohio State Buckeyes",osu:"Ohio State Buckeyes",michigan:"Michigan Wolverines","michigan state":"Michigan State Spartans","michigan st":"Michigan State Spartans",msu:"Michigan State Spartans",texas:"Texas Longhorns","notre dame":"Notre Dame Fighting Irish",duke:"Duke Blue Devils",unc:"North Carolina Tar Heels","north carolina":"North Carolina Tar Heels",kentucky:"Kentucky Wildcats",kansas:"Kansas Jayhawks",gonzaga:"Gonzaga Bulldogs",auburn:"Auburn Tigers",tennessee:"Tennessee Volunteers",purdue:"Purdue Boilermakers",uconn:"UConn Huskies","iowa state":"Iowa State Cyclones","iowa st":"Iowa State Cyclones",houston:"Houston Cougars",baylor:"Baylor Bears",arizona:"Arizona Wildcats",ucla:"UCLA Bruins",florida:"Florida Gators",lsu:"LSU Tigers",arkansas:"Arkansas Razorbacks",oregon:"Oregon Ducks",wisconsin:"Wisconsin Badgers",illinois:"Illinois Fighting Illini",iowa:"Iowa Hawkeyes",siena:"Siena Saints","st peters":"Saint Peter's Peacocks","saint peters":"Saint Peter's Peacocks","st peter's":"Saint Peter's Peacocks","saint peter's":"Saint Peter's Peacocks",iona:"Iona Gaels",merrimack:"Merrimack Warriors","robert morris":"Robert Morris Colonials","rob morris":"Robert Morris Colonials","wright state":"Wright State Raiders","wright st":"Wright State Raiders","cleveland state":"Cleveland State Vikings","cleveland st":"Cleveland State Vikings",ipfw:"Purdue Fort Wayne Mastodons","purdue fort wayne":"Purdue Fort Wayne Mastodons","n kentucky":"Northern Kentucky Norse","northern kentucky":"Northern Kentucky Norse",nku:"Northern Kentucky Norse",youngstown:"Youngstown State Penguins","youngstown state":"Youngstown State Penguins","youngstown st":"Youngstown State Penguins","wisc green bay":"Green Bay Phoenix","green bay":"Green Bay Phoenix","wisconsin green bay":"Green Bay Phoenix","detroit mercy":"Detroit Mercy Titans",detroit:"Detroit Mercy Titans",rice:"Rice Owls",utsa:"UTSA Roadrunners",tulane:"Tulane Green Wave",uab:"UAB Blazers","louisiana tech":"Louisiana Tech Bulldogs","la tech":"Louisiana Tech Bulldogs","wisc milwaukee":"Milwaukee Panthers",milwaukee:"Milwaukee Panthers","wisconsin milwaukee":"Milwaukee Panthers",uwm:"Milwaukee Panthers",oakland:"Oakland Golden Grizzlies",marist:"Marist Red Foxes","sacred heart":"Sacred Heart Pioneers",fairfield:"Fairfield Stags",quinnipiac:"Quinnipiac Bobcats",rider:"Rider Broncs",niagara:"Niagara Purple Eagles",manhattan:"Manhattan Jaspers",canisius:"Canisius Golden Griffins","mount st marys":"Mount St. Mary's Mountaineers",wagner:"Wagner Seahawks","youngstown state":"Youngstown State Penguins","purdue fort wayne":"Purdue Fort Wayne Mastodons",marshall:"Marshall Thundering Herd",wku:"Western Kentucky Hilltoppers","western kentucky":"Western Kentucky Hilltoppers",fiu:"FIU Panthers","middle tennessee":"Middle Tennessee Blue Raiders",mtsu:"Middle Tennessee Blue Raiders","old dominion":"Old Dominion Monarchs",odu:"Old Dominion Monarchs",charlotte:"Charlotte 49ers","east carolina":"East Carolina Pirates",ecu:"East Carolina Pirates","north texas":"North Texas Mean Green",utep:"UTEP Miners","sam houston":"Sam Houston Bearkats","jacksonville st":"Jacksonville State Gamecocks","new mexico st":"New Mexico State Aggies",liberty:"Liberty Flames","kennesaw state":"Kennesaw State Owls"};let a=!1;async function s(){if(!a)try{const[t,e]=await Promise.all([fetch("assets/data/team-variants/ncaam_team_variants.json").then(n=>n.ok?n.json():null).catch(()=>null),fetch("assets/data/team-variants/nba_team_variants.json").then(n=>n.ok?n.json():null).catch(()=>null)]);if(t){let n=0;for(const[r,o]of Object.entries(t)){const g=o.name,u=(o.location||"").toLowerCase().trim(),w=(o.nickname||"").toLowerCase().trim();u&&!l[u]&&(l[u]=g),r&&!l[r.toLowerCase()]&&(l[r.toLowerCase()]=g);for(const S of o.abbreviations||[]){const A=S.toLowerCase().trim();A.length>2&&!l[A]&&(l[A]=g)}w&&w.length>5&&!l[w]&&(l[w]=g),n++}console.log(`\u2705 Loaded ${n} NCAAM team variants into standardizer`)}if(e){let n=0;for(const[r,o]of Object.entries(e)){const g=o.name||o.fullName,u=(o.location||"").toLowerCase().trim();u&&!l[u]&&(l[u]=g),r&&!l[r.toLowerCase()]&&(l[r.toLowerCase()]=g);for(const w of o.abbreviations||[]){const S=w.toLowerCase().trim();S.length>1&&!l[S]&&(l[S]=g)}n++}console.log(`\u2705 Loaded ${n} NBA team variants into standardizer`)}a=!0}catch(t){console.warn("[PickStandardizer] Could not load team variants:",t)}}s();function c(t,e={}){if(e.unitMultiplier&&(h=e.unitMultiplier),typeof t=="string"&&p(t))return console.log("\u{1F4CB} Detected bet-history paste format"),y(t);if(typeof t=="string"&&t.includes("<")){if(t.includes('data-panel="line"')||t.includes("data-sport-line"))return P(t);if(t.includes("<table")||t.includes("<tr"))return te(t);if(t.includes("class="))return P(t)}return T(t)}function p(t){if(typeof t!="string")return!1;const e=/\$[\d,]+/.test(t),n=/\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b\s+\d{1,2},?\s*\d{4}/i.test(t),r=/\bML\b/i.test(t)||/[+-]\d{3,4}/.test(t);return e&&(n||r)}function y(t){if(typeof t!="string")return[];const e=t.split(`
`).map(n=>n.trim()).filter(Boolean).map(n=>n.replace(/^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{1,2},?\s*\d{4}\s+\d{1,2}:\d{2}\s*(?:am|pm)?\s*/i,"").trim()).filter(n=>!/^\$[\d,]+/.test(n));return T(e.join(`
`))}function v(t,e="NBA",n=null){return typeof t!="string"?null:b(t,e,n)}function P(t){const e=[],r=new DOMParser().parseFromString(t,"text/html");let o=r.querySelectorAll('[data-panel="line"]');if(o.length===0&&(o=r.querySelectorAll(".line-panel, .game-panel, [data-sport-line]")),o.length===0&&(o=r.querySelectorAll(".lines-row, .game-row, .event-row")),console.log(`\u{1F50D} Found ${o.length} game panels to parse`),o.forEach((g,u)=>{try{const w=E(g);console.log(`  Panel ${u+1}: ${w.length} picks found`),e.push(...w)}catch(w){console.warn("Failed to parse game panel:",w)}}),e.length===0){console.log("\u{1F4DD} No HTML picks found, falling back to text parsing...");const g=r.body?.textContent||t.replace(/<[^>]*>/g," "),u=T(g);e.push(...u)}return console.log(`\u{1F4CA} Total parsed: ${e.length} betting lines`),e}function E(t){const e=[],n=G(t);return!n.firstTeam&&!n.secondTeam||(t.querySelectorAll(".group, .line-group, [data-group-line]").forEach(o=>{try{const g=W(o,n);e.push(...g)}catch(g){console.warn("Failed to parse line group:",g)}}),e.length===0&&t.querySelectorAll('.line-play, .bet-line, [data-field="line"]').forEach(g=>{const u=Y(g,n);u&&e.push(u)})),e}function G(t){const e={firstTeam:"",secondTeam:"",date:re(),time:"",sport:"NBA",league:""},n=t.querySelector('[data-field="first-team"], .first-team, .away-team, .team-1'),r=t.querySelector('[data-field="second-team"], .second-team, .home-team, .team-2');n&&(e.firstTeam=n.textContent.trim()),r&&(e.secondTeam=r.textContent.trim());const o=t.querySelector('[data-field="min-date"], .game-date, .date'),g=t.querySelector('[data-field="min-time"], .game-time, .time');o&&(e.date=o.textContent.trim()),g&&(e.time=g.textContent.trim());const u=t.querySelector('[data-field="league-name"], .league, .sport-name');u&&(e.league=u.textContent.trim(),e.sport=oe(e.league));const w=t.querySelector("[data-sport-line]");if(w){const S=w.getAttribute("data-sport-line");S&&(e.sport=ae(S))}return e.firstTeam&&e.secondTeam&&(e.game=`${e.firstTeam} @ ${e.secondTeam}`,e.awayTeam=e.firstTeam,e.homeTeam=e.secondTeam),e}function W(t,e){const n=[],r=q(t);return t.querySelectorAll(".line-play, .bet-option, [data-type]").forEach((g,u)=>{const w=D(g,e,r,u);w&&n.push(w)}),n}function q(t){const e=t.className||"",n=t.getAttribute("data-type")||"",r=t.textContent.toLowerCase();return n.includes("spread")||n.includes("ps")?"spread":n.includes("ml")||n.includes("money")?"moneyline":n.includes("total")||n.includes("ou")?n.includes("team")||n.includes("tt")?"team-total":"total":e.includes("spread")?"spread":e.includes("money")||e.includes("ml")?"moneyline":e.includes("team-total")||e.includes("tt")?"team-total":e.includes("total")||e.includes("ou")?"total":e.includes("group-1")||e.includes("group-0")?"spread":e.includes("group-2")?"moneyline":e.includes("group-3")?"total":e.includes("group-4")||e.includes("group-5")?"team-total":r.includes("spread")?"spread":r.includes("money")?"moneyline":r.includes("over")||r.includes("under")?"total":"spread"}function D(t,e,n,r){const o={sport:e.sport,segment:"Full Game",status:"pending",date:e.date,time:e.time,game:e.game,awayTeam:e.awayTeam,homeTeam:e.homeTeam},g=t.querySelector('[data-field="line"], .line, .spread-value, .total-value'),u=t.querySelector('[data-field="price"], .price, .odds, .juice');let w=g?g.textContent.trim():"",S=u?u.textContent.trim():"-110";w=w.replace(/½/g,".5").replace(/¼/g,".25").replace(/¾/g,".75");const A=_(t,r);switch(n){case"spread":o.pickType="spread",o.pickTeam=A===0?e.firstTeam:e.secondTeam,o.line=U(w),o.odds=Q(S);break;case"moneyline":o.pickType="moneyline",o.pickTeam=A===0?e.firstTeam:e.secondTeam,o.odds=Q(w||S);break;case"total":o.pickType="total",o.pickDirection=A===0?"Over":"Under",o.pickTeam=o.pickDirection,o.line=w.replace(/[ou]/gi,"").trim(),o.odds=Q(S);break;case"team-total":o.pickType="team-total",o.pickDirection=Z(t,r);const f=Math.floor(r/2);o.pickTeam=f===0?e.firstTeam:e.secondTeam,o.line=w.replace(/[ou]/gi,"").trim(),o.odds=Q(S);break}return!o.pickTeam||!o.pickType||!o.line&&!o.odds&&o.pickType!=="moneyline"?null:o}function Y(t,e){const n={sport:e.sport,segment:"Full Game",status:"pending",date:e.date,time:e.time,game:e.game,awayTeam:e.awayTeam,homeTeam:e.homeTeam},r=t.textContent.trim();return!r||(X(n,r),!n.pickType)?null:(n.pickTeam||(n.pickTeam=e.firstTeam||"Unknown"),n)}function _(t,e){const n=t.getAttribute("data-team")||t.getAttribute("data-index");if(n)return parseInt(n)||0;const r=t.parentElement;if(r){const g=Array.from(r.children).indexOf(t);if(g!==-1)return g%2}return e%2}function Z(t,e){const n=t.textContent.toLowerCase();return n.includes("over")||n.includes("o ")?"Over":n.includes("under")||n.includes("u ")?"Under":e%2===0?"Over":"Under"}function U(t){return t?(t=t.trim(),/^\d+\.?\d*$/.test(t)||/^[+-]/.test(t)?t:/^\d/.test(t)?"+"+t:t):""}function Q(t){if(!t)return"-110";if(t=t.trim(),t=t.replace(/[$€£]/g,""),/^\d+$/.test(t)){const e=parseInt(t);return e>=100?`-${e}`:`+${e}`}return/^[+-]\d+/.test(t)?t:"-110"}function oe(t){const e=t.toLowerCase();return e.includes("nba")||e.includes("basketball")?"NBA":e.includes("nfl")||e.includes("football")?"NFL":e.includes("ncaab")||e.includes("ncaam")||e.includes("college basketball")?"NCAAB":e.includes("ncaaf")||e.includes("college football")?"NCAAF":e.includes("mlb")||e.includes("baseball")?"MLB":e.includes("nhl")||e.includes("hockey")?"NHL":e.includes("soccer")||e.includes("mls")||e.includes("premier")?"Soccer":"NBA"}function ae(t){const e=t.toLowerCase();return e.includes("nba")?"NBA":e.includes("nfl")?"NFL":e.includes("ncaab")||e.includes("ncaam")?"NCAAB":e.includes("ncaaf")?"NCAAF":e.includes("mlb")?"MLB":e.includes("nhl")?"NHL":"NBA"}function te(t){const e=[],o=new DOMParser().parseFromString(t,"text/html").querySelectorAll("tr[data-ticket], tr.odd, tr.even"),g=new Set;return o.forEach(u=>{try{const w=u.getAttribute("data-ticket")||"",S=u.querySelector(".type-magic");if(S!==null){const f=S.textContent.trim(),B=u.querySelectorAll(".wager-simple"),I=parseFloat(u.querySelector("[data-risk]")?.getAttribute("data-risk"))||0,K=parseFloat(u.querySelector("[data-win]")?.getAttribute("data-win"))||0;B.forEach((O,V)=>{const N=z(O,w,f,V);if(N){const H=`${w}_${N.pickTeam}_${N.line||"ML"}_${N.segment}`;g.has(H)||(g.add(H),N.risk=Math.round(I/B.length),N.win=Math.round(K/B.length),N.parlayId=w,N.parlayType=f,N.isParlay=!0,e.push(N))}})}else{const f=se(u);f&&(f.isParlay=!1,e.push(f))}}catch(w){console.warn("Failed to parse HTML row:",w)}}),e}function z(t,e,n,r){const o={sport:"NCAAB",segment:"Full Game",status:"pending"},g=t.querySelector(".choosen");if(g&&(o.pickTeam=g.textContent.trim(),o.pickTeam.includes("/"))){const f=o.pickTeam.split("/").map(B=>B.trim());o.awayTeam=f[0],o.homeTeam=f[1]}const u=t.querySelector(".line-selected");if(u){const f=u.textContent.trim();X(o,f)}const w=t.querySelector(".period-description-s");if(w){const f=w.textContent.trim().toLowerCase();f.includes("1st half")||f.includes("1h")?o.segment="1st Half":(f.includes("2nd half")||f.includes("2h"))&&(o.segment="2nd Half")}const S=t.querySelector("img.team-logo");if(S){const f=S.getAttribute("src")||"";(f.includes("NBA")||f.includes("Spurs")||f.includes("Knicks"))&&(o.sport="NBA")}if(o.pickTeam){const f=o.pickTeam.toLowerCase();(f.includes("spurs")||f.includes("knicks")||f.includes("lakers")||f.includes("celtics"))&&(o.sport="NBA")}const A=t.closest("tr")?.querySelector("td span");if(A){const f=A.textContent.trim(),B=M(f);B&&(o.date=B.date,o.time=B.time)}return!o.pickTeam||!o.pickType?null:o}function se(t){const e={sport:"NBA",segment:"Full Game",status:"pending"},n=t.querySelector("td span");if(n){const f=n.textContent.trim(),B=M(f);B&&(e.date=B.date,e.time=B.time)}const r=t.querySelector(".choosen");r&&(e.pickTeam=r.textContent.trim());const o=t.querySelector(".line-selected");if(o){const f=o.textContent.trim();X(e,f)}const g=t.querySelector(".period-description-s");if(g){const f=g.textContent.trim().toLowerCase();f.includes("1st half")||f.includes("1h")?e.segment="1st Half":f.includes("2nd half")||f.includes("2h")?e.segment="2nd Half":(f.includes("1st quarter")||f.includes("q1")||f.includes("1q"))&&(e.segment="1st Quarter")}const u=t.querySelector("[data-risk]");if(u)e.risk=parseFloat(u.getAttribute("data-risk"))||0;else{const f=t.querySelector(".risk-col span");f&&(e.risk=x(f.textContent))}const w=t.querySelector("[data-win]");if(w)e.win=parseFloat(w.getAttribute("data-win"))||0;else{const f=t.querySelector(".win-col span");f&&(e.win=x(f.textContent))}const S=t.querySelector(".d-r");if(S){const f=S.textContent;if(f.includes("/")||f.includes(" vs ")||f.includes(" @ ")){e.game=f.trim();const B=j(f);B&&(e.awayTeam=B.away,e.homeTeam=B.home)}}const A=t.querySelector(".selection-S .d-r, .selection-M .d-r");if(A){const f=A.textContent.toLowerCase();f.includes("nba")?e.sport="NBA":f.includes("nfl")?e.sport="NFL":f.includes("ncaab")||f.includes("ncaam")?e.sport="NCAAB":f.includes("ncaaf")?e.sport="NCAAF":f.includes("mlb")?e.sport="MLB":f.includes("nhl")&&(e.sport="NHL")}return!e.pickTeam||!e.pickType?null:e}function X(t,e){if(e=e.replace(/½/g,".5").replace(/¼/g,".25").replace(/¾/g,".75"),/\bML\b/i.test(e)){t.pickType="moneyline";const o=e.match(/ML\s*([+-]\d+)/i);o&&(t.odds=o[1]);return}if(/\b(over|under|o|u)\s*(\d+\.?\d*)/i.test(e)){const o=e.match(/\b(over|under|o|u)\s*(\d+\.?\d*)/i);t.pickType="total",t.pickDirection=/over|o/i.test(o[1])?"Over":"Under",t.line=o[2];const g=e.match(/([+-]\d{2,4})(?:\s|$)/);g&&(t.odds=g[1]);return}const n=e.match(/([+-]?\d+\.?\d*)\s+([+-]\d{2,4})/);if(n){t.pickType="spread",t.line=n[1].startsWith("+")||n[1].startsWith("-")?n[1]:"+"+n[1],t.odds=n[2];return}const r=e.match(/([+-]?\d+\.?\d*)/);r&&(t.pickType="spread",t.line=r[1].startsWith("+")||r[1].startsWith("-")?r[1]:"+"+r[1])}function T(t){const e=[],n=t.replace(/;/g,`
`).replace(/\.\s+/g,`
`).split(`
`).map(u=>u.trim()).filter(u=>u.length>0);let r="NBA",o=null;for(const u of n){if(u.includes("|")){const A=m(u);if(A){A.sport&&(A.sport=A.sport.toUpperCase()),e.push(A);continue}}const w=C(u);if(w.sport&&(r=w.sport.toUpperCase()),w.game&&(o=w.game),w.isContextOnly)continue;const S=b(u,r,o);S&&e.push(S)}const g=e.map(u=>({...u,sport:(u.sport||"NBA").toUpperCase(),league:(u.league||u.sport||"NBA").toUpperCase(),pickDirection:u.pickDirection?u.pickDirection.replace(/^UNDE\b/i,"UNDER").toUpperCase():"",pickType:(u.pickType||"spread").toLowerCase()}));return console.log(`\u{1F4CA} Parsed ${g.length} picks from text input`),g}function C(t){const e=t.toLowerCase(),n={sport:null,game:null,isContextOnly:!1};/\bnfl\b/i.test(e)?n.sport="NFL":/\bnba\b/i.test(e)?n.sport="NBA":/\bncaab\b|\bncaam\b|\bcbb\b/i.test(e)?n.sport="NCAAB":/\bncaaf\b|\bcfb\b/i.test(e)?n.sport="NCAAF":/\bmlb\b/i.test(e)?n.sport="MLB":/\bnhl\b/i.test(e)&&(n.sport="NHL");const r=t.match(/\b([A-Za-z]+)\s*(?:at|@|vs\.?|versus)\s*([A-Za-z]+)\b/i);return r&&(n.game={away:F(r[1]),home:F(r[2])}),!t.match(/\d/)&&(n.sport||n.game)&&(n.isContextOnly=!0),n}function b(t,e,n){const r=(e||"NBA").toUpperCase(),o={sport:r,league:r,segment:"Full Game",status:"pending",date:re(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD"};n&&(o.awayTeam=n.away,o.homeTeam=n.home,o.game=`${n.away} @ ${n.home}`);let g=t.replace(/\s*\/\s*/g," ").replace(/\s+/g," ").trim();const u=g,w=[{pattern:/\b(1st\s*half|first\s*half|1h)\b/i,segment:"1st Half"},{pattern:/\b(2nd\s*half|second\s*half|2h)\b/i,segment:"2nd Half"},{pattern:/\b(1st\s*quarter|first\s*quarter|1q)\b/i,segment:"1st Quarter"},{pattern:/\b(full\s*game|fg)\b/i,segment:"Full Game"}];for(const{pattern:N,segment:H}of w)if(N.test(g)){o.segment=H,g=g.replace(N," ").trim();break}if(/\bml\b/i.test(g)){o.pickType="moneyline",g=g.replace(/\bml\b/gi," ").trim();const N=Object.keys(l);for(const ee of N)if(new RegExp(`\\b${ee}\\b`,"i").test(g)){o.pickTeam=F(ee);break}const H=g.match(/([+-]\d{3,4})/);if(H&&(o.odds=H[1]),o.pickTeam)return console.log(`\u2705 Parsed ML: "${u}" -> ${o.pickTeam} ML (${o.segment})`),o}const S=g.match(/\b([A-Za-z]+)\s*(?:tto|ttu|o|u)\s*([\d.]+)/i)||g.match(/\b([A-Za-z]+)\s+(?:over|under)\s*([\d.]+)/i);if(S){const N=S[1].toLowerCase(),H=S[2],ee=S[0].toLowerCase();if(N!=="over"&&N!=="under"&&N!=="o"&&N!=="u")return o.pickType="team-total",o.pickTeam=F(N),o.line=H,/tto|over|\bo\d/i.test(ee)?o.pickDirection="Over":o.pickDirection="Under",console.log(`\u2705 Parsed team total: "${u}" -> ${o.pickTeam} ${o.pickDirection} ${o.line} (${o.segment})`),o}const A=g.match(/\b(over|under|o|u)\s*([\d.]+)/i);if(A){o.pickType="total",o.pickDirection=/^(over|o)$/i.test(A[1])?"Over":"Under",o.pickTeam=o.pickDirection,o.line=A[2];const N=g.match(/([+-]\d{3,4})/);return N&&(o.odds=N[1]),console.log(`\u2705 Parsed game total: "${u}" -> ${o.pickDirection} ${o.line}`),o}g=g.replace(/\b(spread|total|moneyline)\b/gi," ").trim();const f=Object.keys(l);let B=null,I=-1;for(const N of f){const H=new RegExp(`\\b${N}\\b`,"i"),ee=g.match(H);if(ee){const ie=ee.index;(I===-1||ie<I)&&(B=N,I=ie)}}if(!B){const N=g.match(/\b([A-Z]{2,4})\b/);N&&(B=N[1].toLowerCase())}if(!B)return console.log(`\u26A0\uFE0F No team found in: "${u}"`),null;o.pickTeam=F(B);const K=[/([+-]?\d+\.?\d*)\s*([+-]\d{3,4})?/],O=g.match(/[+-]?\d+\.?\d*/g)||[];for(const N of O){const H=parseFloat(N);if(Math.abs(H)>=100&&(N.startsWith("+")||N.startsWith("-"))){o.odds=N;continue}o.line||(o.pickType="spread",o.line=N.startsWith("+")||N.startsWith("-")?N:`+${N}`)}if(!o.line&&o.pickTeam){const N=g.match(/([+-]\d{3,4})/);if(N)o.pickType="moneyline",o.odds=N[1];else return console.log(`\u26A0\uFE0F No line/odds found for team in: "${u}"`),null}const V=g.match(/([A-Za-z]+)\s*[@vs]+\s*([A-Za-z]+)/i);return V&&(o.awayTeam=F(V[1]),o.homeTeam=F(V[2]),o.game=`${o.awayTeam} @ ${o.homeTeam}`),console.log(`\u2705 Parsed: "${u}" -> ${o.pickTeam} ${o.line||o.odds} (${o.segment})`),o}function m(t){const e=t.split("|").map(N=>N.trim());if(e.length<3)return null;const[n,r,o]=e,g=n.match(/^(.+?)\s*(?:vs\.?|@|versus)\s*(.+)$/i);if(!g)return null;const u=g[1].trim(),w=g[2].trim();let S="Full Game";const A=r.toLowerCase();A.includes("1st half")||A.includes("1h")?S="1st Half":A.includes("2nd half")||A.includes("2h")?S="2nd Half":(A.includes("1st quarter")||A.includes("1q"))&&(S="1st Quarter");const f={sport:"NCAAB",segment:S,status:"pending",date:re(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD",awayTeam:u,homeTeam:w,game:`${u} @ ${w}`},B=o.match(/\(([+-]?\d+)\)\s*$/);B&&(f.odds=B[1].startsWith("+")||B[1].startsWith("-")?B[1]:`-${B[1]}`);let I=o.replace(/\s*\([+-]?\d+\)\s*$/,"").trim();const K=I.match(/^(over|under|o|u)\s+(\d+\.?\d*)/i);if(K)return f.pickType="total",f.pickDirection=/^(over|o)$/i.test(K[1])?"Over":"Under",f.pickTeam=f.pickDirection,f.line=K[2],console.log(`\u2705 Parsed pipe format (total): "${t}" -> ${f.pickDirection} ${f.line}`),f;const O=I.match(/^(.+?)\s+ml$/i);if(O)return f.pickType="moneyline",f.pickTeam=O[1].trim(),console.log(`\u2705 Parsed pipe format (ML): "${t}" -> ${f.pickTeam} ML`),f;const V=I.match(/^(.+?)\s+([+-]?\d+\.?\d*)$/);if(V){f.pickType="spread",f.pickTeam=V[1].trim();const N=V[2];return f.line=N.startsWith("+")||N.startsWith("-")?N:`+${N}`,console.log(`\u2705 Parsed pipe format (spread): "${t}" -> ${f.pickTeam} ${f.line}`),f}return console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: "${o}"`),null}function k(t,e,n){const r={sport:e,segment:"Full Game",status:"pending",date:re()};/\b1h\b/i.test(t)?(r.segment="1st Half",t=t.replace(/\b1h\b/i,"").trim()):/\b2h\b/i.test(t)?(r.segment="2nd Half",t=t.replace(/\b2h\b/i,"").trim()):/\b1q\b/i.test(t)&&(r.segment="1st Quarter",t=t.replace(/\b1q\b/i,"").trim());const o=t.match(/\$(\d+(?:\.\d+)?)\s*$/);o&&(r.risk=parseFloat(o[1])*h,t=t.replace(/\$\d+(?:\.\d+)?\s*$/,"").trim());const g=t.match(/^(over|under|o|u)\s+(\d+\.?\d*)\s*([+-]\d{2,4})?/i);if(g)return r.pickType="total",r.pickDirection=/over|o/i.test(g[1])?"Over":"Under",r.pickTeam=r.pickDirection,r.line=g[2],g[3]&&(r.odds=g[3]),r.risk&&r.odds&&(r.win=R(r.risk,r.odds)),n&&(r.game=n),r;const u=t.match(/^([A-Za-z][A-Za-z\s]*?)(?=\s+[\d+-]|\s+ML|\s+over|\s+under|\s*$)/i);if(!u)return null;const w=u[1].trim();r.pickTeam=F(w);let S=t.substring(u[0].length).trim();if(/^ML\s*/i.test(S)){r.pickType="moneyline",S=S.replace(/^ML\s*/i,"").trim();const A=S.match(/^([+-]\d{2,4})/);A&&(r.odds=A[1])}else if(/^(over|under|o|u)\s*/i.test(S)){r.pickType="team-total";const A=S.match(/^(over|under|o|u)\s*(\d+\.?\d*)\s*([+-]\d{2,4})?/i);A&&(r.pickDirection=/over|o/i.test(A[1])?"Over":"Under",r.line=A[2],A[3]&&(r.odds=A[3]))}else if(/^\d/.test(S)||/^[+-]\d/.test(S)){const A=S.match(/^([+-])(\d+)(?:\s|$)/);if(A){const f=A[1],B=A[2];if(parseInt(B)>=100)r.pickType="moneyline",r.odds=f+B;else{r.pickType="spread",r.line=f+B;const O=S.substring(A[0].length).trim().match(/^([+-]\d{2,4})/);O&&(r.odds=O[1])}}else{r.pickType="spread";const f=S.match(/^(\d+\.?\d*)\s*([+-]\d{2,4})?/);f&&(r.line="+"+f[1],f[2]&&(r.odds=f[2]))}}return r.risk&&r.odds&&(r.win=R(r.risk,r.odds)),n&&(r.game=n),r.pickType?r:null}function L(t){const e=t.toLowerCase();return t.length<3?!0:[/^tonight['']?s?\s+game/i,/^today['']?s?\s+game/i,/^correction/i,/^note:/i,/^fyi/i,/^\d+k\s+is\s+the\s+unit/i,/^unit/i,/^\^+/].some(r=>r.test(t))}function $(t,e){const n=t.toLowerCase(),r={};n.includes("nba")?r.sport="NBA":n.includes("nfl")?r.sport="NFL":n.includes("ncaab")||n.includes("ncaam")?r.sport="NCAAB":n.includes("ncaaf")?r.sport="NCAAF":n.includes("mlb")?r.sport="MLB":n.includes("nhl")&&(r.sport="NHL");const o=t.match(/([A-Za-z\s]+)\s*(?:vs\.?|@|\/)\s*([A-Za-z\s]+)/i);o&&(r.game=`${o[1].trim()} @ ${o[2].trim()}`),e(r)}function F(t){const e=t.toLowerCase().trim();return l[e]||t}function x(t){if(!t)return 0;const e=t.replace(/[$,]/g,"");return parseFloat(e)||0}function M(t){const e=t.match(/(\w+\s+\d+,?\s+\d{4})\s+(\d+:\d+\s*[AP]M)/i);return e?{date:e[1].trim(),time:e[2].trim()}:null}function j(t){const e=t.match(/(.+?)\s*(?:\/|vs\.?|@)\s*(.+)/i);return e?{away:e[1].trim(),home:e[2].trim()}:null}function R(t,e){const n=parseInt(e);return n>0?t*(n/100):t/(Math.abs(n)/100)}function re(){const t=new Date;return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`}function de(t){return t.map(e=>{let n="";return e.pickType==="spread"?n=`${e.pickTeam} ${e.line}`:e.pickType==="moneyline"?n=`${e.pickTeam} ML`:e.pickType==="total"?n=`${e.pickDirection||e.pickTeam} ${e.line}`:e.pickType==="team-total"&&(n=`${e.pickTeam} ${e.pickDirection} ${e.line}`),e.odds&&(n+=` (${e.odds})`),{...e,selection:n,displaySegment:e.segment!=="Full Game"?e.segment:"",displayRisk:e.risk?`$${e.risk.toLocaleString()}`:"",displayWin:e.win?`$${Math.round(e.win).toLocaleString()}`:""}})}function i(t){const e=["Date","Time","Sport","Game","Team","Pick Type","Line","Odds","Segment","Risk","To Win","Status"],n=t.map(r=>[r.date||"",r.time||"",r.sport||"",r.game||"",r.pickTeam||"",r.pickType||"",r.line||"",r.odds||"",r.segment||"",r.risk||"",r.win?Math.round(r.win):"",r.status||"pending"]);return[e,...n].map(r=>r.map(o=>`"${o}"`).join(",")).join(`
`)}function d(t){h=t}window.PickStandardizer={standardize:c,parseHTML:te,parseGameLines:P,parseText:T,parseBetHistory:y,loadTeamVariants:s,toDisplayFormat:de,toCSV:i,setUnitMultiplier:d,resolveTeamName:F,_parseTextLine:k,_parseLineAndOdds:X,_parseGamePanel:E,_isBetHistoryFormat:p,_parseBetHistoryLeg:v},console.log("\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser")})();const API_BASE_URL=window.APP_CONFIG?.API_BASE_URL||"/api";let selectedFiles=[];const ALLOWED_EXTENSIONS=[".pdf",".jpg",".jpeg",".png",".html",".htm",".txt",".csv"],ALLOWED_MIME_TYPES=["application/pdf","image/jpeg","image/png","text/html","text/plain","text/csv"],MAX_FILE_SIZE_MB=10,MAX_FILE_SIZE=MAX_FILE_SIZE_MB*1024*1024;function getSelectedSportsbookMeta(){const h=document.getElementById("upload-sportsbook-select")||document.getElementById("manual-sportsbook-select");if(!h)return{value:"manual",label:"Manual Upload"};const l=(h.value||"").trim(),a=(h.options[h.selectedIndex]?.textContent||l||"Manual Upload").trim();return{value:l||"manual",label:a||"Manual Upload"}}function isFileAllowed(h){const l="."+h.name.split(".").pop().toLowerCase(),a=ALLOWED_EXTENSIONS.includes(l),s=ALLOWED_MIME_TYPES.some(p=>h.type.startsWith(p.split("/")[0])||h.type===p),c=h.size<=MAX_FILE_SIZE;return{valid:a&&c,ext:l,size:h.size,isSizeAllowed:c,isExtAllowed:a}}document.addEventListener("DOMContentLoaded",()=>{const h=document.getElementById("action-buttons"),l=document.getElementById("import-options"),a=document.querySelector(".import-picks-btn"),s=document.querySelector(".import-back-btn");if(!l){console.warn("Import options element not found");return}function c(){h&&(h.style.display="none"),l.removeAttribute("hidden")}function p(){l.setAttribute("hidden",""),h&&(h.style.display="flex"),y()}function y(){selectedFiles=[];const T=document.getElementById("file-upload"),C=document.getElementById("paste-area"),b=document.getElementById("file-list"),m=document.getElementById("upload-files-btn"),k=document.getElementById("upload-status");T&&(T.value=""),C&&(C.value=""),b&&(b.innerHTML="",b.style.display="none"),m&&(m.style.display="none"),k&&(k.style.display="none")}a&&a.addEventListener("click",T=>{T.stopPropagation(),c()}),s&&s.addEventListener("click",T=>{T.stopPropagation(),p()});const v=document.getElementById("drop-zone"),P=document.getElementById("file-upload"),E=document.getElementById("file-list"),G=document.getElementById("upload-files-btn");if(v&&P){let T=function(C){C.preventDefault(),C.stopPropagation()};var X=T;["dragenter","dragover","dragleave","drop"].forEach(C=>{v.addEventListener(C,T,!1)}),["dragenter","dragover"].forEach(C=>{v.addEventListener(C,()=>{v.style.borderColor="#10b981",v.style.background="rgba(16, 185, 129, 0.05)"})}),["dragleave","drop"].forEach(C=>{v.addEventListener(C,()=>{v.style.borderColor="",v.style.background=""})}),v.addEventListener("drop",C=>{const m=C.dataTransfer.files;W(m)}),P.addEventListener("change",function(){W(this.files)})}function W(T){const C=[],b=[];if(Array.from(T).forEach(m=>{const k=isFileAllowed(m);if(k.valid)C.push(m);else{const L=k.isExtAllowed?`File too large (${Q(k.size)} > ${MAX_FILE_SIZE_MB}MB)`:`Invalid file type (${k.ext})`;b.push({name:m.name,reason:L})}}),b.length>0){const m=b.map(k=>`${k.name}: ${k.reason}`).join(`
`);console.warn("Rejected files:",m),U(`Some files rejected:
${b.map(k=>k.name).join(", ")}`,"error")}selectedFiles=C,q()}function q(){if(selectedFiles.length===0){E.style.display="none",G.style.display="none";return}E.style.display="block",G.style.display="block",E.innerHTML=selectedFiles.map((T,C)=>{const b=Q(T.size);return`
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem; background: rgba(16, 185, 129, 0.05); border-radius: 4px; margin-bottom: 0.25rem;">
                    <span style="font-size: 0.75rem; color: #374151; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;">${oe(T.name)} (${b})</span>
                    <button onclick="window.removeFile(${C})" style="background: none; border: none; color: #ef4444; cursor: pointer; font-size: 1rem; padding: 0 0.5rem;">\xD7</button>
                </div>
            `}).join("")}window.removeFile=function(T){selectedFiles.splice(T,1),q()},G&&G.addEventListener("click",async T=>{T.stopPropagation(),await D()});async function D(){if(selectedFiles.length!==0){G.disabled=!0,G.textContent="Uploading...";try{for(const T of selectedFiles){const C=new FormData,{value:b,label:m}=getSelectedSportsbookMeta();C.append("file",T),C.append("sportsbook",b),C.append("sportsbookLabel",m);const k=await fetch(`${API_BASE_URL}/upload`,{method:"POST",body:C});if(!k.ok)throw new Error(`Failed to upload ${T.name}: ${k.statusText}`);const L=await k.json();console.log(`Uploaded ${T.name}:`,L)}U(`Successfully uploaded ${selectedFiles.length} file(s)!`,"success"),selectedFiles=[],q(),P.value="",window.loadUploadedPicks?setTimeout(()=>window.loadUploadedPicks(),1e3):window.loadAndAppendPicks&&setTimeout(()=>window.loadAndAppendPicks(),1e3),window.loadPicksFromDatabase&&setTimeout(()=>window.loadPicksFromDatabase(),1500)}catch(T){console.error("Upload error:",T),U(`Upload failed: ${T.message}`,"error")}finally{G.disabled=!1,G.textContent="Upload Selected Files"}}}const Y=document.getElementById("paste-area"),_=document.getElementById("upload-paste-btn"),Z=document.querySelector(".paste-clear-btn");_&&_.addEventListener("click",async T=>{T.stopPropagation();const C=Y.value.trim(),b=getSelectedSportsbookMeta();if(!C){U("Please paste some content first.","error");return}_.disabled=!0,_.textContent="Uploading...";try{const m=C.includes("<html")||C.includes("<!DOCTYPE")||C.includes("<div"),k=window.LocalPicksManager?.parseAndAdd||ae,L=window.LocalPicksManager?.parseAndAdd?await k(C,b.label):await k(C,m,b);if(L.length===0){U("No picks could be parsed from the pasted content.","error");return}U(`Successfully parsed and saved ${L.length} pick(s)!`,"success"),Y.value="",window.loadUploadedPicks?setTimeout(()=>window.loadUploadedPicks(),1e3):window.loadAndAppendPicks&&setTimeout(()=>window.loadAndAppendPicks(),1e3),window.loadPicksFromDatabase&&setTimeout(()=>window.loadPicksFromDatabase(),1500)}catch(m){console.error("Upload error:",m),U(`Processing failed: ${m.message}`,"error")}finally{_.disabled=!1,_.textContent="Upload Pasted Content"}}),Z&&Z.addEventListener("click",T=>{T.stopPropagation(),Y&&(Y.value="")});function U(T,C){const b=document.getElementById("upload-status");b&&(b.textContent=T,b.style.display="block",C==="success"?(b.style.background="rgba(16, 185, 129, 0.1)",b.style.color="#059669",b.style.border="1px solid rgba(16, 185, 129, 0.3)"):(b.style.background="rgba(239, 68, 68, 0.1)",b.style.color="#dc2626",b.style.border="1px solid rgba(239, 68, 68, 0.3)"),setTimeout(()=>{b.style.display="none"},5e3))}function Q(T){return T<1024?T+" B":T<1024*1024?(T/1024).toFixed(1)+" KB":(T/(1024*1024)).toFixed(1)+" MB"}function oe(T){const C=document.createElement("div");return C.textContent=T,C.innerHTML}async function ae(T,C=!1,b=null){try{const m=b||getSelectedSportsbookMeta(),k=m?.value||"manual",L=m?.label||"Manual Upload";let $=[];if(window.PickStandardizer)try{$=window.PickStandardizer.standardize(T),console.log("Used PickStandardizer to parse picks:",$.length)}catch(x){console.warn("PickStandardizer failed, falling back to basic parser:",x),$=C?te(T):z(T)}else $=C?te(T):z(T);$=$.map(x=>({...x,sportsbook:x.sportsbook||L,bookKey:x.bookKey||k}));const F=x=>{const M=(x.game||x.description||x.pickTeam||"").trim();if(!M)return null;const j=M.match(/(.+?)\s+(?:vs\.?|@|at)\s+(.+?)(?:\s+(over|under))?$/i);return j?{awayTeam:j[1].trim(),homeTeam:j[2].trim()}:null};if($.length>0&&window.AutoGameFetcher)try{await window.AutoGameFetcher.fetchTodaysGames();const x=window.AutoGameFetcher.getTodaysGames()||[];$=$.filter(M=>{const j=F(M);j&&(M.awayTeam||(M.awayTeam=j.awayTeam),M.homeTeam||(M.homeTeam=j.homeTeam));const R=window.AutoGameFetcher.findGame((M.awayTeam||M.pickTeam||"").replace(/\bover\b|\bunder\b/i,"").trim(),M.homeTeam);return R?window.AutoGameFetcher.isGameFinished(R)?(console.warn(`Skipping pick for finished game: ${R.awayTeam} @ ${R.homeTeam}`),!1):(M.game=`${R.awayTeam} @ ${R.homeTeam}`,M.date=R.date,M.time=R.time,M.sport=R.sport,M.gameStatus=R.status,M.awayTeam=R.awayTeam,M.homeTeam=R.homeTeam,!0):(console.warn(`Game not found for today: ${M.game||M.pickTeam}`),!0)}),console.log(`After validation: ${$.length} valid picks remaining`)}catch(x){console.warn("AutoGameFetcher validation failed:",x)}if($.length>0){const x=await fetch(`${API_BASE_URL}/save-picks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({picks:$,source:"upload",sportsbook:k,sportsbookLabel:L})});if(!x.ok){const j=await x.text();throw new Error(`Failed to save picks: ${x.statusText} - ${j}`)}const M=await x.json();console.log("Picks saved to database:",M)}else console.warn("No valid picks to save after processing");return $}catch(m){throw console.error("Error processing picks:",m),m}}function te(T){const C=[];return new DOMParser().parseFromString(T,"text/html").querySelectorAll('[class*="bet"], [class*="pick"], [class*="wager"]').forEach(L=>{try{const $=L.textContent,F=se($);F&&C.push(F)}catch($){console.warn("Failed to parse bet element:",$)}}),C}function z(T){const C=[];return T.split(`
`).forEach(m=>{const k=se(m);k&&C.push(k)}),C}function se(T){const C=/([A-Za-z\s]+)\s+([-+]?\d+\.?\d*)\s+\(([-+]\d+)\)/,b=/([A-Za-z\s]+)\s+(O|U|Over|Under)\s+(\d+\.?\d*)/i,m=/([A-Za-z\s]+)\s+ML\s+([-+]\d+)/i;let k,L=null;if((k=T.match(C))?L={pickType:"spread",pickTeam:k[1].trim(),line:k[2],odds:k[3]}:(k=T.match(b))?L={pickType:"total",pickTeam:k[2].toUpperCase()==="O"||k[2].toLowerCase()==="over"?"Over":"Under",line:k[3]}:(k=T.match(m))&&(L={pickType:"moneyline",pickTeam:k[1].trim(),odds:k[2]}),L){const $=/([A-Za-z\s]+)\s+(vs?|@|at)\s+([A-Za-z\s]+)/i,F=T.match($);F&&(L.awayTeam=F[1].trim(),L.homeTeam=F[3].trim()),L.sport="nfl",L.gameDate=new Date().toISOString().split("T")[0],L.status="pending"}return L}window.processAndSavePicks=ae,window.parseTextPicks=z}),function(){"use strict";const h={getParentRowsOnly(a){return a?Array.from(a.children).filter(s=>s&&s.tagName==="TR"&&!s.classList.contains("parlay-legs")):[]},getDirectChildRows(a){return a?Array.from(a.children).filter(s=>s&&s.tagName==="TR"):[]},isRowVisibleForZebra(a){return!(!a||a.style.display==="none")},applyZebraStripes(){if(window.ZebraStripes&&typeof window.ZebraStripes.applyPicksTableZebraStripes=="function"){window.ZebraStripes.applyPicksTableZebraStripes();return}const a=document.getElementById("picks-tbody");if(!a)return;this.getParentRowsOnly(a).filter(c=>this.isRowVisibleForZebra(c)).forEach((c,p)=>{const y=p%2===0?"zebra-even":"zebra-odd",v=p%2===0?"zebra-odd":"zebra-even";if(c.classList.remove(v),c.classList.add(y),c.classList.add("zebra-row"),window.PicksParlayManager){const P=window.PicksParlayManager.findParlayLegsRow(c);P&&(P.classList.remove(v),P.classList.add(y),P.classList.add("zebra-row"))}})},updateTable(){const a=document.getElementById("picks-tbody");if(!a)return;let s=this.getParentRowsOnly(a);(window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort).column&&(s=window.PicksSortManager?window.PicksSortManager.applySorting(s):s,s.forEach(p=>{a.appendChild(p),window.PicksParlayManager&&p.classList.contains("parlay-row")&&window.PicksParlayManager.ensureLegRowPosition(p)})),this.applyFiltersToRows(s),window.PicksParlayManager&&window.PicksParlayManager.refreshAllParlayVisibility(),this.applyZebraStripes(),this.renderFilterChips()},applyFiltersToRows(a){if(!a){const s=document.getElementById("picks-tbody");a=this.getParentRowsOnly(s)}a.forEach(s=>{const c=window.DashboardFilterPills?.passesAllFilters?window.DashboardFilterPills.passesAllFilters(s):window.PicksFilterManager?window.PicksFilterManager.passesAllFilters(s):!0;if(s.style.display=c?"":"none",window.PicksParlayManager&&s.classList.contains("parlay-row")){const p=window.PicksParlayManager.findParlayLegsRow(s);if(p)if(!c)p.style.display="none";else{const y=s.getAttribute("data-row-id"),v=window.PicksStateManager?window.PicksStateManager.isParlayExpanded(y):s.getAttribute("aria-expanded")==="true";p.style.display=v?"table-row":"none"}}})},renderFilterChips(){const a=document.querySelector(".filter-chips")||document.getElementById("filter-chips-container");if(!a)return;a.innerHTML="";const c=(window.PicksStateManager?window.PicksStateManager.getState():window.tableState).filters,p=[];if(c.date.selectedDates&&c.date.selectedDates.length>0&&p.push({type:"date",subtype:"dates",label:`Dates: ${c.date.selectedDates.length} selected`,value:c.date.selectedDates}),c.date.selectedTimes&&c.date.selectedTimes.length>0&&p.push({type:"date",subtype:"times",label:`Times: ${c.date.selectedTimes.length} selected`,value:c.date.selectedTimes}),c.date.selectedBooks&&c.date.selectedBooks.length>0&&p.push({type:"date",subtype:"books",label:`Books: ${c.date.selectedBooks.length} selected`,value:c.date.selectedBooks}),c.matchup.league||c.matchup.selectedTeams){const y=c.matchup.selectedTeams?`Teams: ${c.matchup.selectedTeams.length} selected`:`League: ${c.matchup.league}`;p.push({type:"matchup",label:y,value:c.matchup})}if(c.pick.betType||c.pick.subtype){const y=[];c.pick.betType&&y.push(c.pick.betType),c.pick.subtype&&y.push(c.pick.subtype),p.push({type:"pick",label:`Pick: ${y.join(" - ")}`,value:c.pick})}if(c.pick.segment&&p.push({type:"segment",label:`Segment: ${c.pick.segment}`,value:c.pick.segment}),c.risk.selectedRiskRanges&&c.risk.selectedRiskRanges.length>0&&p.push({type:"risk",label:`Risk: ${c.risk.selectedRiskRanges.length} ranges`,value:c.risk.selectedRiskRanges}),c.risk.selectedWinRanges&&c.risk.selectedWinRanges.length>0&&p.push({type:"win",label:`Win: ${c.risk.selectedWinRanges.length} ranges`,value:c.risk.selectedWinRanges}),c.status&&c.status.length>0&&p.push({type:"status",label:`Status: ${c.status.join(", ")}`,value:c.status}),p.forEach(y=>{const v=document.createElement("div");v.className="filter-chip",v.setAttribute("data-filter-type",y.type),y.subtype&&v.setAttribute("data-filter-subtype",y.subtype);const P=document.createElement("span");P.className="filter-chip-label",P.textContent=y.label;const E=document.createElement("button");E.className="filter-chip-remove",E.innerHTML="&times;",E.setAttribute("aria-label",`Remove ${y.label} filter`),E.onclick=()=>this.removeFilterChip(y.type,y.subtype),v.appendChild(P),v.appendChild(E),a.appendChild(v)}),p.length>0){const y=document.createElement("button");y.className="clear-all-filters",y.textContent="Clear All",y.onclick=()=>this.clearAllFilters(),a.appendChild(y)}},removeFilterChip(a,s){window.PicksFilterManager?window.PicksFilterManager.clearFilterByChip(a,s):console.warn("PicksFilterManager not loaded")},clearAllFilters(){window.PicksStateManager&&window.PicksStateManager.resetAllFilters(),this.updateTable()},updateFilterIndicators(){const a={"date-filter-btn":window.tableState.filters.date.selectedDates||window.tableState.filters.date.selectedTimes||window.tableState.filters.date.selectedBooks,"matchup-filter-btn":window.tableState.filters.matchup.league||window.tableState.filters.matchup.selectedTeams,"pick-filter-btn":window.tableState.filters.pick.betType||window.tableState.filters.pick.subtype,"risk-filter-btn":window.tableState.filters.risk.selectedRiskRanges?.length>0||window.tableState.filters.risk.selectedWinRanges?.length>0,"status-filter-btn":window.tableState.filters.status?.length>0};Object.entries(a).forEach(([p,y])=>{const v=document.getElementById(p);if(!v)return;const P=v.querySelector(".filter-indicator")||v.querySelector(".indicator");y?(v.classList.add("has-filter"),P&&(P.style.display="inline-block")):(v.classList.remove("has-filter"),P&&(P.style.display="none"))});const s=window.PicksStateManager?window.PicksStateManager.getActiveFilterCount():0,c=document.getElementById("active-filter-count");c&&(c.textContent=s>0?`(${s})`:"")},announceFilterChange(a){let s=document.getElementById("filter-announcer");s||(s=document.createElement("div"),s.id="filter-announcer",s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),s.setAttribute("aria-atomic","true"),s.style.position="absolute",s.style.left="-10000px",s.style.width="1px",s.style.height="1px",s.style.overflow="hidden",document.body.appendChild(s)),s.textContent=a},refresh(){this.updateTable(),this.updateFilterIndicators()}};let l;h.debouncedZebraStripes=function(){clearTimeout(l),l=setTimeout(()=>{h.applyZebraStripes()},50)},window.PicksTableRenderer=h}(),function(){"use strict";const h={getColumnIndex(l,a){return window.PicksDOMUtils?.getColumnIndex?window.PicksDOMUtils.getColumnIndex(l,a):null},getCell(l,a,s){if(window.PicksDOMUtils?.getCell)return window.PicksDOMUtils.getCell(l,a,s);const c=s||null;return c?l.querySelector(`td:nth-child(${c})`):null},getDateSortValue(l){if(!l)return 0;const s=l.replace(/^(mon|tue|wed|thu|fri|sat|sun)\s+/i,"").split("/");if(s.length===2){const c=parseInt(s[0],10)||0,p=parseInt(s[1],10)||0,y=new Date,v=y.getMonth()+1,P=y.getFullYear();let E=P;return v>=11&&c<=2?E=P+1:v<=2&&c>=11&&(E=P-1),new Date(E,c-1,p).getTime()}return 0},getTimeSortValue(l){if(!l)return 0;const a=l.match(/(\d{1,2}):(\d{2})\s*(am|pm)?/i);if(a){let s=parseInt(a[1],10);const c=parseInt(a[2],10),p=a[3]?a[3].toLowerCase():"";return p==="pm"&&s!==12?s+=12:p==="am"&&s===12&&(s=0),s*60+c}return 0},getSortValue(l,a){switch(a){case"date":{const s=l.querySelector("td:first-child");if(!s)return 0;const c=s.querySelector(".cell-date"),p=s.querySelector(".cell-time"),y=this.getDateSortValue(c?c.textContent:""),v=this.getTimeSortValue(p?p.textContent:"");return y+v/1440}case"league":{const s=this.getCell(l,"league");return s?s.textContent.trim().toLowerCase():""}case"matchup":{const s=this.getCell(l,"matchup",2);return s?s.textContent.trim().toLowerCase():""}case"pick":{const s=this.getCell(l,"pick",3);return s?s.textContent.trim().toLowerCase():""}case"segment":{const s=this.getCell(l,"segment",4);return s?s.textContent.trim().toLowerCase():""}case"risk":{const s=this.getCell(l,"risk",5);if(!s)return 0;const c=s.querySelector(".risk-amount");if(!c)return 0;const p=c.textContent.replace(/[$,]/g,"").trim();return parseFloat(p)||0}case"win":{const s=this.getCell(l,"risk",5);if(!s)return 0;const c=s.querySelector(".win-amount");if(!c)return 0;const p=c.textContent.replace(/[$,]/g,"").trim();return parseFloat(p)||0}case"status":{const s=this.getCell(l,"status")||l.querySelector("td:last-child");if(!s)return 0;const c=s.querySelector(".status-badge");if(c){const p=c.getAttribute("data-status")||c.className.match(/status-(\w+)/)?.[1]||c.textContent.trim();return this.getStatusSortPriority(p)}return this.getStatusSortPriority(s.textContent.trim().toLowerCase())}case"profit":{const s=l.querySelector("td:last-child");if(!s)return 0;const c=s.querySelector(".profit-amount");if(!c)return 0;const p=c.textContent.replace(/[$,]/g,"").trim();return parseFloat(p)||0}case"score":{const s=l.getAttribute("data-epoch");return s?parseInt(s,10):0}default:return""}},getStatusSortPriority(l){const a={live:1,"in-progress":1,active:1,pending:2,open:2,win:3,won:3,loss:4,lost:4,push:5,tie:5,void:6,voided:6,cancelled:6},s=l.toString().toLowerCase();return a[s]||99},applySorting(l){const a=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort;return a.column?[...l].sort((c,p)=>{const y=this.getSortValue(c,a.column),v=this.getSortValue(p,a.column);if(typeof y=="number"&&typeof v=="number")return a.direction==="asc"?y-v:v-y;const P=y.toString(),E=v.toString();return a.direction==="asc"?P.localeCompare(E):E.localeCompare(P)}):l},handleHeaderClick(l){const a=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort;if(a.column===l){const s=a.direction==="asc"?"desc":"asc";this.updateSort(l,s)}else this.updateSort(l,"asc");window.PicksTableRenderer&&window.PicksTableRenderer.updateTable(),this.updateSortIndicators()},updateSort(l,a){window.PicksStateManager?window.PicksStateManager.updateSort(l,a):window.tableState.sort={column:l,direction:a}},resetSorting(){window.PicksStateManager?window.PicksStateManager.resetSort():window.tableState.sort={column:null,direction:"asc"},this.updateSortIndicators(),window.PicksTableRenderer&&window.PicksTableRenderer.updateTable()},SORT_ICONS:{unsorted:"\u25B2",asc:"\u25B2",desc:"\u25BC"},updateSortIndicators(){const l=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState?.sort;if(document.querySelectorAll("th[data-sort]").forEach(y=>{y.classList.remove("sorted-asc","sorted-desc","sort-asc","sort-desc"),y.setAttribute("aria-sort","none");const v=y.querySelector(".sort-icon");v&&(v.textContent=this.SORT_ICONS.unsorted)}),!l?.column)return;const s=document.querySelector(`th[data-sort="${l.column}"]`);if(!s)return;const c=l.direction==="desc";s.classList.add(c?"sorted-desc":"sorted-asc"),s.setAttribute("aria-sort",c?"descending":"ascending");const p=s.querySelector(".sort-icon");p&&(p.textContent=c?this.SORT_ICONS.desc:this.SORT_ICONS.asc)},initSorting(){document.querySelectorAll(".th-sort-btn").forEach(a=>{a.addEventListener("click",s=>{s.stopPropagation();const c=a.closest("th");if(!c)return;const p=c.getAttribute("data-sort");p&&this.handleHeaderClick(p)})}),this.updateSortIndicators()}};window.PicksSortManager=h}(),function(){"use strict";typeof window.tableState>"u"&&(window.tableState={filters:{date:{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null},matchup:{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"},pick:{betType:"",subtype:"",segment:"",selectedSegments:null},risk:{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]},status:[]},sort:{column:null,direction:"asc"},expandedParlayIds:[]});const h={createDateFilterState(){return{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null}},createMatchupFilterState(){return{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"}},createRiskFilterState(){return{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]}},createPickFilterState(){return{betType:"",subtype:"",segment:"",selectedSegments:null}},ensureDateFilterShape(){const a=window.tableState;if(!a.filters.date||typeof a.filters.date!="object"){a.filters.date=this.createDateFilterState();return}const s=a.filters.date;"start"in s||(s.start=null),"end"in s||(s.end=null),"selectedDates"in s||(s.selectedDates=null),"selectedTimes"in s||(s.selectedTimes=null),"selectedBooks"in s||(s.selectedBooks=null)},ensureMatchupFilterShape(){const a=window.tableState;if(!a.filters.matchup||typeof a.filters.matchup!="object"){a.filters.matchup=this.createMatchupFilterState();return}const s=a.filters.matchup;"ticketType"in s||(s.ticketType="all"),"selectedTeams"in s||(s.selectedTeams=null),"league"in s||(s.league="")},ensureRiskFilterShape(){const a=window.tableState;if(!a.filters.risk||typeof a.filters.risk!="object"){a.filters.risk=this.createRiskFilterState();return}const s=a.filters.risk;"min"in s||(s.min=null),"max"in s||(s.max=null),Array.isArray(s.selectedRiskRanges)||(s.selectedRiskRanges=[]),Array.isArray(s.selectedWinRanges)||(s.selectedWinRanges=[])},ensurePickFilterShape(){const a=window.tableState;a.filters.pick||(a.filters.pick=this.createPickFilterState())},ensureAllFilterShapes(){this.ensureDateFilterShape(),this.ensureMatchupFilterShape(),this.ensureRiskFilterShape(),this.ensurePickFilterShape()}},l={getState(){return window.tableState},getFilter(a){return window.tableState.filters[a]},updateFilter(a,s){if(!window.tableState.filters[a]){console.warn(`Filter type ${a} does not exist`);return}Object.assign(window.tableState.filters[a],s)},resetFilter(a){switch(a){case"date":window.tableState.filters.date=h.createDateFilterState();break;case"matchup":window.tableState.filters.matchup=h.createMatchupFilterState();break;case"pick":window.tableState.filters.pick=h.createPickFilterState();break;case"risk":window.tableState.filters.risk=h.createRiskFilterState();break;case"status":window.tableState.filters.status=[];break;case"league":window.tableState.filters.matchup.league="",window.tableState.filters.matchup.selectedLeagues=null;break;case"segment":window.tableState.filters.pick.segment="",window.tableState.filters.pick.selectedSegments=null;break;default:console.warn(`Unknown filter type: ${a}`)}},resetAllFilters(){window.tableState.filters={date:h.createDateFilterState(),matchup:h.createMatchupFilterState(),pick:h.createPickFilterState(),risk:h.createRiskFilterState(),status:[]}},getExpandedParlayIds(){return Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]),window.tableState.expandedParlayIds},setParlayExpanded(a,s){if(!a)return;Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]);const c=window.tableState.expandedParlayIds.indexOf(a);s&&c===-1?window.tableState.expandedParlayIds.push(a):!s&&c!==-1&&window.tableState.expandedParlayIds.splice(c,1)},isParlayExpanded(a){return!a||!Array.isArray(window.tableState.expandedParlayIds)?!1:window.tableState.expandedParlayIds.includes(a)},toggleParlayExpanded(a){const s=this.isParlayExpanded(a);return this.setParlayExpanded(a,!s),!s},resetExpansionState(){window.tableState.expandedParlayIds=[]},getSortState(){return window.tableState.sort},updateSort(a,s){window.tableState.sort={column:a,direction:s||"asc"}},resetSort(){window.tableState.sort={column:null,direction:"asc"}},hasActiveFilters(){const a=window.tableState.filters;return!!(a.date.selectedDates||a.date.selectedTimes||a.date.selectedBooks||a.date.start||a.date.end||a.matchup.league||a.matchup.selectedLeagues||a.matchup.selectedTeams||a.matchup.ticketType!=="all"||a.pick.betType||a.pick.subtype||a.pick.segment||a.pick.selectedSegments||a.risk.min!==null||a.risk.max!==null||a.risk.selectedRiskRanges.length>0||a.risk.selectedWinRanges.length>0||a.status.length>0)},getActiveFilterCount(){let a=0;const s=window.tableState.filters;return s.date.selectedDates&&a++,s.date.selectedTimes&&a++,s.date.selectedBooks&&a++,(s.matchup.league||s.matchup.selectedLeagues)&&a++,s.matchup.selectedTeams&&a++,(s.pick.betType||s.pick.subtype)&&a++,(s.pick.segment||s.pick.selectedSegments)&&a++,s.risk.selectedRiskRanges.length>0&&a++,s.risk.selectedWinRanges.length>0&&a++,s.status.length>0&&a++,a},init(){h.ensureAllFilterShapes(),Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[])}};window.PicksStateManager={...l,validators:h,state:window.tableState},l.init()}();function parseScoreFromResult(h){if(!h)return{away:null,home:null};const l=/(\d+)\s*-\s*(\d+)/,a=h.match(l);return a?{away:parseInt(a[1]),home:parseInt(a[2])}:{away:null,home:null}}function normalizeStatus(h){const l=(h||"").toString().toLowerCase();return l==="lost"?"loss":l}function calculateKPIs(h){(!h||!Array.isArray(h))&&(h=[]);const l={activePicks:0,activeRisk:0,toWin:0,onTrackAmount:0,atRiskAmount:0,projected:0,netProfit:0,totalWon:0,totalLost:0,wins:0,losses:0,pushes:0,roePercentage:0,winPercentage:0,currentStreak:"",totalRisk:0,topLeague:{name:"N/A",winRate:0},topBetType:{name:"N/A",winRate:0},topSegment:{name:"N/A",winRate:0},topSportsbook:{name:"N/A",winRate:0}},a={},s={},c={},p={};h.forEach(P=>{const E=P.risk!=null?String(P.risk).replace(/,/g,""):"0",G=P.win!=null?String(P.win).replace(/,/g,""):"0",W=parseFloat(E)||0,q=parseFloat(G)||0,D=normalizeStatus(P.status),Y=D==="loss";(D==="pending"||D==="live"||D==="on-track"||D==="at-risk")&&(l.activePicks++,l.toWin+=q,l.activeRisk+=W,D==="on-track"?l.onTrackAmount+=q:D==="at-risk"?l.atRiskAmount+=W:D==="pending"&&(l.onTrackAmount+=q*.5,l.atRiskAmount+=W*.5)),D==="win"&&(l.wins++,l.totalWon+=q,trackWin(a,P.league||"Unknown"),trackWin(s,P.pickType||"Unknown"),trackWin(c,P.segment||"Full Game"),trackWin(p,P.book||"Unknown")),Y&&(l.losses++,l.totalLost+=W,trackLoss(a,P.league||"Unknown"),trackLoss(s,P.pickType||"Unknown"),trackLoss(c,P.segment||"Full Game"),trackLoss(p,P.book||"Unknown")),D==="push"&&l.pushes++,l.totalRisk+=W}),l.projected=l.toWin-l.activeRisk,l.netProfit=l.totalWon-l.totalLost;const y=l.wins+l.losses+l.pushes,v=l.wins+l.losses;return v>0?l.winPercentage=(l.wins/v*100).toFixed(1):l.winPercentage="0.0",l.totalRisk>0?l.roePercentage=(l.netProfit/l.totalRisk*100).toFixed(1):l.roePercentage="0.0",l.currentStreak=calculateStreak(h),l.topLeague=findTopPerformer(a),l.topBetType=findTopPerformer(s),l.topSegment=findTopPerformer(c),l.topSportsbook=findTopPerformer(p),l}function trackWin(h,l){h[l]||(h[l]={wins:0,losses:0}),h[l].wins++}function trackLoss(h,l){h[l]||(h[l]={wins:0,losses:0}),h[l].losses++}function findTopPerformer(h){let l="N/A",a=0;for(const[s,c]of Object.entries(h)){const p=c.wins+c.losses;if(p>=3){const y=c.wins/p*100;y>a&&(a=y,l=s)}}return{name:l,winRate:a.toFixed(1)}}function calculateStreak(h){const l=h.filter(c=>{const p=normalizeStatus(c.status);return p==="win"||p==="loss"}).reverse();if(l.length===0)return"W0";let a=1;const s=normalizeStatus(l[0].status);for(let c=1;c<l.length&&normalizeStatus(l[c].status)===s;c++)a++;return s==="win"?`W${a}`:`L${a}`}function updateKPITiles(h){const l=document.querySelector('[data-tile-id="1"]');if(l){const c=l.querySelectorAll(".kpi-tile-layer");if(c[0]){const p=c[0].querySelector(".kpi-value"),y=c[0].querySelector(".kpi-subtext");if(p){const v=h.projected>=0?"+":"";p.textContent=`${v}$${Math.abs(h.projected).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,p.classList.remove("positive","negative"),h.projected>0?p.classList.add("positive"):h.projected<0&&p.classList.add("negative")}y&&(y.textContent=`${h.activePicks} Active Picks`)}if(c[1]){const p=c[1].querySelector(".kpi-value"),y=c[1].querySelector(".kpi-subtext");if(p){const v=h.netProfit>=0?"+":"";p.textContent=`${v}$${Math.abs(h.netProfit).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,p.classList.remove("positive","negative"),h.netProfit>0?p.classList.add("positive"):h.netProfit<0&&p.classList.add("negative")}y&&(y.textContent="Season Total")}}const a=document.querySelector('[data-tile-id="2"]');if(a){const c=a.querySelectorAll(".kpi-tile-layer");if(c[0]){const p=c[0].querySelector(".kpi-value"),y=c[0].querySelector(".kpi-subtext");p&&(p.textContent=`${h.winPercentage}%`),y&&(y.textContent=`${h.wins}-${h.losses}-${h.pushes} Record`)}if(c[1]){const p=c[1].querySelector(".kpi-value"),y=c[1].querySelector(".kpi-subtext");if(p){const v=parseFloat(h.roePercentage)>=0?"+":"";p.textContent=`${v}${h.roePercentage}%`,p.classList.remove("positive","negative"),parseFloat(h.roePercentage)>0?p.classList.add("positive"):parseFloat(h.roePercentage)<0&&p.classList.add("negative")}y&&(y.textContent="Return on Equity")}}const s=document.querySelector('[data-tile-id="3"]');if(s){const c=s.querySelectorAll(".kpi-tile-layer");if(c[0]){const p=c[0].querySelector(".kpi-value"),y=c[0].querySelector(".kpi-subtext");p&&(p.textContent=`$${h.activeRisk.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`),y&&(y.textContent="Total at Risk")}if(c[1]){const p=c[1].querySelector(".kpi-value"),y=c[1].querySelector(".kpi-subtext");p&&(p.textContent=`$${h.toWin.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,p.classList.add("positive")),y&&(y.textContent="Potential Payout")}}}window.calculateKPIs=calculateKPIs,window.updateKPITiles=updateKPITiles,window.parseScoreFromResult=parseScoreFromResult,typeof module<"u"&&module.exports&&(module.exports={calculateKPIs,parseScoreFromResult,normalizeStatus});const PicksService=function(){"use strict";const a=`${window.GBSV_CONFIG?.FUNCTIONS_URL||window.APP_CONFIG?.FUNCTIONS_BASE_URL||(window.APP_CONFIG?.API_BASE_URL?window.APP_CONFIG.API_BASE_URL.replace(/\/api$/,""):"")||window.APP_CONFIG?.API_BASE_FALLBACK||window.location.origin}/api/picks`;let s=null,c=null;const p=3e4;async function y(b,m={}){const k=b.startsWith("http")?b:`${a}${b}`,L={method:m.method||"GET",headers:{"Content-Type":"application/json",...m.headers},...m};m.body&&typeof m.body=="object"&&(L.body=JSON.stringify(m.body));try{const $=await fetch(k,L),F=await $.json();if(!$.ok)throw new Error(F.error||`API error: ${$.status}`);return F}catch($){throw console.error("[PicksService] API request failed:",$),$}}function v(){s=null,c=null}async function P(b={}){const m=new URLSearchParams;Object.entries(b).forEach(([L,$])=>{$!=null&&$!==""&&m.append(L,$)});const k=m.toString()?`?${m}`:"";try{return(await y(k)).picks||[]}catch(L){return console.error("[PicksService] Failed to get picks:",L),[]}}async function E(){try{return(await y("/active")).picks||[]}catch(b){return console.error("[PicksService] Failed to get active picks:",b),[]}}async function G(){try{return(await y("/settled")).picks||[]}catch(b){return console.error("[PicksService] Failed to get settled picks:",b),[]}}async function W(b){try{return(await y(`/${b}`)).pick||null}catch(m){if(m.message.includes("404"))return null;throw m}}async function q(b){return P({league:b.toUpperCase()})}async function D(b){return P({date:b})}async function Y(b,m){return P({from:b,to:m})}async function _(){const b=new Date().toISOString().split("T")[0];return D(b)}async function Z(b){v();const m=Array.isArray(b)?b:[b];try{const k=await y("",{method:"POST",body:m});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"create",count:k.created||m.length}})),k}catch(k){throw console.error("[PicksService] Failed to create picks:",k),k}}async function U(b,m){v();try{const k=await y(`/${b}`,{method:"PATCH",body:m});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"update",id:b}})),k.pick}catch(k){throw console.error("[PicksService] Failed to update pick:",k),k}}async function Q(b,m,k={}){return U(b,{status:m,...k})}async function oe(b,m=0){return U(b,{status:"won",result:"WIN",pnl:m})}async function ae(b,m=0){return U(b,{status:"lost",result:"LOSS",pnl:-Math.abs(m)})}async function te(b){return U(b,{status:"push",result:"PUSH",pnl:0})}async function z(b){v();try{return await y(`/${b}`,{method:"DELETE"}),window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"delete",id:b}})),!0}catch(m){throw console.error("[PicksService] Failed to delete pick:",m),m}}async function se(b=!1){if(!b)throw new Error("Must pass confirm=true to clear all picks");v();try{const m=await y("/clear",{method:"DELETE",headers:{"x-confirm-clear":"true"}});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"clearAll",deleted:m.deleted}})),m}catch(m){throw console.error("[PicksService] Failed to clear picks:",m),m}}async function X(b=null){b||(b=await P());const m={total:b.length,pending:0,live:0,won:0,lost:0,push:0,totalRisk:0,totalPnl:0,byLeague:{}};return b.forEach(k=>{const L=(k.status||"pending").toLowerCase();L==="pending"?m.pending++:L==="live"||L==="on-track"||L==="at-risk"?m.live++:L==="won"||L==="win"?m.won++:L==="lost"||L==="loss"?m.lost++:L==="push"&&m.push++,m.totalRisk+=parseFloat(k.risk)||0,m.totalPnl+=parseFloat(k.pnl)||0;const $=k.league||"Unknown";m.byLeague[$]||(m.byLeague[$]={total:0,won:0,lost:0,pnl:0}),m.byLeague[$].total++,(L==="won"||L==="win")&&m.byLeague[$].won++,(L==="lost"||L==="loss")&&m.byLeague[$].lost++,m.byLeague[$].pnl+=parseFloat(k.pnl)||0}),m.winRate=m.won+m.lost>0?(m.won/(m.won+m.lost)*100).toFixed(1)+"%":"N/A",m}async function T(){const b="gbsv_picks";try{const m=localStorage.getItem(b);if(!m)return{success:!0,migrated:0,message:"No local picks to migrate"};const k=JSON.parse(m);if(!Array.isArray(k)||k.length===0)return{success:!0,migrated:0,message:"No local picks to migrate"};console.log(`[PicksService] Migrating ${k.length} picks from localStorage to Azure...`);const L=await Z(k);return L.success?(localStorage.setItem(`${b}_backup_${Date.now()}`,m),localStorage.removeItem(b),console.log(`[PicksService] Migration complete: ${L.created} picks migrated`),{success:!0,migrated:L.created,errors:L.errors,message:`Successfully migrated ${L.created} picks to Azure`}):{success:!1,migrated:0,error:"Migration failed"}}catch(m){return console.error("[PicksService] Migration failed:",m),{success:!1,migrated:0,error:m.message}}}function C(){const b="gbsv_picks";try{const m=localStorage.getItem(b);if(!m)return{needed:!1,count:0};const k=JSON.parse(m);return{needed:Array.isArray(k)&&k.length>0,count:Array.isArray(k)?k.length:0}}catch{return{needed:!1,count:0}}}return{getAll:P,getActive:E,getSettled:G,getById:W,create:Z,update:U,remove:z,clearAll:se,getByLeague:q,getByDate:D,getByDateRange:Y,getToday:_,updateStatus:Q,markWon:oe,markLost:ae,markPush:te,getSummary:X,migrateFromLocalStorage:T,checkMigrationNeeded:C,invalidateCache:v}}();typeof module<"u"&&module.exports&&(module.exports=PicksService),window.PicksService=PicksService,function(){"use strict";const h="gbsv_picks",l="gbsv_unit_multiplier";function a(){try{const i=localStorage.getItem(h);return i?JSON.parse(i):[]}catch(i){return console.error("Error reading picks from localStorage:",i),window.ErrorHandler&&window.ErrorHandler.handleStorage(i,"read"),[]}}function s(i){try{return localStorage.setItem(h,JSON.stringify(i)),console.log(`\u2705 Saved ${i.length} picks to localStorage`),!0}catch(d){return console.error("Error saving picks to localStorage:",d),window.ErrorHandler&&window.ErrorHandler.handleStorage(d,"write"),!1}}function c(i){const d=a(),t=i.map((n,r)=>{let o=(n.sport||n.league||"NBA").toUpperCase();o={NCAAM:"NCAAB",NCAB:"NCAAB",CBB:"NCAAB","COLLEGE BASKETBALL":"NCAAB",NCAAF:"NCAAF",CFB:"NCAAF","COLLEGE FOOTBALL":"NCAAF",NFL:"NFL",NBA:"NBA",NCAAB:"NCAAB",MLB:"MLB",NHL:"NHL"}[o]||o;let u=n.awayTeam||"",w=n.homeTeam||"";if(n.game&&!u&&!w){const f=n.game.split(/\s*(?:@|vs\.?|versus)\s*/i);f.length===2&&(u=f[0].trim(),w=f[1].trim())}let S=n.pickDirection||"";S&&(S=S.replace(/^UNDE\b/i,"UNDER").toUpperCase());let A=(n.pickType||"spread").toLowerCase();return A==="ml"&&(A="moneyline"),A==="tt"&&(A="team-total"),A==="ou"&&(A="total"),{...n,id:n.id||`pick_${Date.now()}_${r}_${Math.random().toString(36).substring(7)}`,createdAt:n.createdAt||new Date().toISOString(),status:n.status||"pending",sport:o,league:o,awayTeam:u,homeTeam:w,pickDirection:S,pickType:A}}),e=[...d,...t];return s(e),t}function p(){localStorage.removeItem(h),console.log("CLEANUP Cleared all picks from localStorage"),z()}function y(i){const d=a().filter(t=>t.id!==i);s(d),z()}function v(i,d){const t=a().map(e=>e.id===i?{...e,status:d,updatedAt:new Date().toISOString()}:e);s(t),z()}function P(){return parseInt(localStorage.getItem(l))||1e3}function E(i){localStorage.setItem(l,i.toString()),window.PickStandardizer&&window.PickStandardizer.setUnitMultiplier(i)}function G(i,d={}){const t=(i||"pending").toLowerCase(),e={win:"Won",won:"Won",loss:"Lost",lost:"Lost",push:"Push","on-track":"On Track","at-risk":"At Risk",live:"Live"};return e[t]?e[t]:t==="pending"?d.countdown?d.countdown:d.scheduled||d.gameTime?`Starts ${d.scheduled||d.gameTime}`:"Pending":i.charAt(0).toUpperCase()+i.slice(1)}function W(i,d={}){const t=(i||"pending").toLowerCase(),e=(d.pickType||"spread").toLowerCase(),n=d.line||"";switch(t){case"pending":return d.gameTime?`Game starts at ${d.gameTime}`:"Awaiting game start";case"on-track":return e==="spread"?`Covering by 8.5 pts \u2022 ${d.countdown||"Live"}`:e==="total"?`On pace for ${d.pickDirection||"Over"} \u2022 ${d.countdown||"Live"}`:e==="moneyline"?`Leading \u2022 ${d.countdown||"Live"}`:`On track to hit \u2022 ${d.countdown||"Live"}`;case"at-risk":return e==="spread"?`Need 5.5 pts to cover \u2022 ${d.countdown||"Live"}`:e==="total"?`Need 12 more pts \u2022 ${d.countdown||"Live"}`:e==="moneyline"?`Trailing \u2022 ${d.countdown||"Live"}`:`At risk \u2022 ${d.countdown||"Live"}`;case"win":case"won":return`+$${(d.win||0).toLocaleString()}`;case"loss":case"lost":return`-$${(d.risk||0).toLocaleString()}`;case"push":return"$0 \u2022 Refunded";default:return""}}const q={"san antonio spurs":{abbr:"SAS",league:"nba"},spurs:{abbr:"SAS",league:"nba"},"new york knicks":{abbr:"NYK",league:"nba"},knicks:{abbr:"NYK",league:"nba"},"los angeles lakers":{abbr:"LAL",league:"nba"},lakers:{abbr:"LAL",league:"nba"},"golden state warriors":{abbr:"GSW",league:"nba"},warriors:{abbr:"GSW",league:"nba"},"boston celtics":{abbr:"BOS",league:"nba"},celtics:{abbr:"BOS",league:"nba"},"miami heat":{abbr:"MIA",league:"nba"},heat:{abbr:"MIA",league:"nba"},"dallas mavericks":{abbr:"DAL",league:"nba"},mavericks:{abbr:"DAL",league:"nba"},mavs:{abbr:"DAL",league:"nba"},"denver nuggets":{abbr:"DEN",league:"nba"},nuggets:{abbr:"DEN",league:"nba"},"phoenix suns":{abbr:"PHX",league:"nba"},suns:{abbr:"PHX",league:"nba"},"milwaukee bucks":{abbr:"MIL",league:"nba"},bucks:{abbr:"MIL",league:"nba"},"philadelphia 76ers":{abbr:"PHI",league:"nba"},"76ers":{abbr:"PHI",league:"nba"},sixers:{abbr:"PHI",league:"nba"},"brooklyn nets":{abbr:"BKN",league:"nba"},nets:{abbr:"BKN",league:"nba"},"chicago bulls":{abbr:"CHI",league:"nba"},bulls:{abbr:"CHI",league:"nba"},"cleveland cavaliers":{abbr:"CLE",league:"nba"},cavaliers:{abbr:"CLE",league:"nba"},cavs:{abbr:"CLE",league:"nba"},"atlanta hawks":{abbr:"ATL",league:"nba"},hawks:{abbr:"ATL",league:"nba"},"toronto raptors":{abbr:"TOR",league:"nba"},raptors:{abbr:"TOR",league:"nba"},"orlando magic":{abbr:"ORL",league:"nba"},magic:{abbr:"ORL",league:"nba"},"indiana pacers":{abbr:"IND",league:"nba"},pacers:{abbr:"IND",league:"nba"},"detroit pistons":{abbr:"DET",league:"nba"},pistons:{abbr:"DET",league:"nba"},"charlotte hornets":{abbr:"CHA",league:"nba"},hornets:{abbr:"CHA",league:"nba"},"washington wizards":{abbr:"WAS",league:"nba"},wizards:{abbr:"WAS",league:"nba"},"memphis grizzlies":{abbr:"MEM",league:"nba"},grizzlies:{abbr:"MEM",league:"nba"},"new orleans pelicans":{abbr:"NOP",league:"nba"},pelicans:{abbr:"NOP",league:"nba"},"houston rockets":{abbr:"HOU",league:"nba"},rockets:{abbr:"HOU",league:"nba"},"minnesota timberwolves":{abbr:"MIN",league:"nba"},timberwolves:{abbr:"MIN",league:"nba"},wolves:{abbr:"MIN",league:"nba"},"oklahoma city thunder":{abbr:"OKC",league:"nba"},thunder:{abbr:"OKC",league:"nba"},"portland trail blazers":{abbr:"POR",league:"nba"},"trail blazers":{abbr:"POR",league:"nba"},blazers:{abbr:"POR",league:"nba"},"utah jazz":{abbr:"UTA",league:"nba"},jazz:{abbr:"UTA",league:"nba"},"sacramento kings":{abbr:"SAC",league:"nba"},kings:{abbr:"SAC",league:"nba"},"la clippers":{abbr:"LAC",league:"nba"},clippers:{abbr:"LAC",league:"nba"},butler:{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},"butler bulldogs":{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},connecticut:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"u conn":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},uconn:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"uconn huskies":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"abilene christian":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},"abilene christian wildcats":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},arizona:{abbr:"ARIZ",fullName:"Arizona Wildcats",league:"ncaam",logoId:"12"},"arizona wildcats":{abbr:"ARIZ",fullName:"Arizona Wildcats",league:"ncaam",logoId:"12"},"montana st":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state bobcats":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"cal poly slo":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly mustangs":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"oral roberts":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"oral roberts golden eagles":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"missouri st":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state bears":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},marist:{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"marist red foxes":{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"georgia tech":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"georgia tech yellow jackets":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"east tenn st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"etsu buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"north carolina":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},unc:{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"north carolina tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"buffalo bills":{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},bills:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},buffalo:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},"philadelphia eagles":{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},eagles:{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},"kansas city chiefs":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},chiefs:{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"kansas city":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"detroit lions":{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},lions:{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},"baltimore ravens":{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},ravens:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},baltimore:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},"minnesota vikings":{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},vikings:{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},"green bay packers":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},packers:{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"green bay":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"pittsburgh steelers":{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},steelers:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},pittsburgh:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},"houston texans":{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},texans:{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},"los angeles chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},chargers:{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"la chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"denver broncos":{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},broncos:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},denver:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},"cincinnati bengals":{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},bengals:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},cincinnati:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},"seattle seahawks":{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seahawks:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seattle:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},"tampa bay buccaneers":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},buccaneers:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},bucs:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"tampa bay":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"san francisco 49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},niners:{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"san francisco":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"dallas cowboys":{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},cowboys:{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},"miami dolphins":{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},dolphins:{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},"los angeles rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},rams:{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"la rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"arizona cardinals":{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},cardinals:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},arizona:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},"indianapolis colts":{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},colts:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},indianapolis:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},"tennessee titans":{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},titans:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},tennessee:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},"jacksonville jaguars":{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jaguars:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jags:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jacksonville:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},"cleveland browns":{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},browns:{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},"new york giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},giants:{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"ny giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"new york jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},jets:{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"ny jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"new england patriots":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},patriots:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},pats:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"new england":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"washington commanders":{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},commanders:{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},"carolina panthers":{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},panthers:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},carolina:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},"atlanta falcons":{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},falcons:{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},"new orleans saints":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},saints:{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"new orleans":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"chicago bears":{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},bears:{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},"las vegas raiders":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},raiders:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},"las vegas":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},vegas:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"}};function D(i,d,t){if(!window.LogoLoader||!i)return"";if((d==="ncaam"||d==="ncaaf")&&t)return window.LogoLoader.getLogoUrl(d,t);const e=i.toLowerCase();return window.LogoLoader.getLogoUrl(d,e)}async function Y(i){if(!i)return{abbr:"N/A",fullName:"",logo:""};if(window.TeamDataLoader&&typeof window.TeamDataLoader.getTeamInfo=="function")try{const e=await window.TeamDataLoader.getTeamInfo(i);if(e&&e.abbr!=="N/A")return e}catch(e){console.warn("[LocalPicksManager] TeamDataLoader failed, using fallback:",e)}const d=i.toLowerCase().trim(),t=q[d];if(t){const e=t.league||"nba",n=D(t.abbr,e,t.logoId);return{abbr:t.abbr,fullName:t.fullName||i,logo:n}}return{abbr:i.substring(0,3).toUpperCase(),fullName:i,logo:""}}function _(i){if(!i)return{abbr:"N/A",fullName:"",logo:""};const d=i.toLowerCase().trim(),t=q[d];if(t){const e=t.league||"nba",n=D(t.abbr,e,t.logoId);return{abbr:t.abbr,fullName:t.fullName||i,logo:n}}return{abbr:i.substring(0,3).toUpperCase(),fullName:i,logo:""}}async function Z(i,d=""){if(!window.PickStandardizer)return console.error("PickStandardizer not loaded"),[];window.PickStandardizer.loadTeamVariants&&await window.PickStandardizer.loadTeamVariants(),window.PickStandardizer.setUnitMultiplier(P());const t=window.PickStandardizer.standardize(i);if(t.length===0)return console.warn("No picks could be parsed from content"),[];const e=P(),n=t.map(g=>{const u=g.risk||e;let w=g.win;if(!w&&g.odds&&u){const S=parseInt(g.odds);S>0?w=u*(S/100):S<0&&(w=u/(Math.abs(S)/100))}return{...g,sportsbook:d||g.sportsbook||"Manual Upload",risk:Math.round(u),win:Math.round(w||u*.91),gameDate:g.gameDate||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:g.gameTime||"TBD"}}),r=await U(n),o=c(r);return z(),o}async function U(i){let d=[];if(window.AutoGameFetcher)try{await window.AutoGameFetcher.fetchTodaysGames(),d=window.AutoGameFetcher.getTodaysGames()||[],console.log(`\u{1F3C0} Found ${d.length} games today:`,d.map(t=>`${t.awayTeam} @ ${t.homeTeam} (${t.time})`))}catch(t){console.warn("Could not fetch games:",t)}else console.warn("\u26A0\uFE0F AutoGameFetcher not available");return i.map(t=>{const e={...t},n=t.pickTeam;if(console.log(`\u{1F50D} Looking for game with team: "${n}"`),window.AutoGameFetcher&&d.length>0){const r=window.AutoGameFetcher.findGame(n);r?(console.log(`\u2705 Found game: ${r.awayTeam} (${r.awayRecord}) @ ${r.homeTeam} (${r.homeRecord}) at ${r.time}`),e.awayTeam=r.awayTeam,e.homeTeam=r.homeTeam,e.awayRecord=r.awayRecord||"",e.homeRecord=r.homeRecord||"",e.gameTime=r.time,e.gameDate=r.date,e.sport=r.sport,e.gameStatus=r.status,e.game=`${r.awayTeam} @ ${r.homeTeam}`):console.warn(`\u274C No game found for "${n}" - available teams:`,d.flatMap(o=>[o.awayTeam,o.homeTeam]))}return e.gameDate||(e.gameDate=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})),e.gameTime||(e.gameTime="TBD"),e})}function Q(i){if(i==null||i==="")return"$0.00";const d=typeof i=="number"?i:parseFloat(String(i).replace(/[$,]/g,""));return isNaN(d)?"$0.00":`$${d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function oe(i){if(!i)return"Today";if(i.includes("/")||i.includes("-")){const d=new Date(i);if(!isNaN(d))return d.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}return i}function ae(i){if(!i)return"";const d=i.toUpperCase();if(window.LogoLoader&&typeof window.LogoLoader.getLeagueLogoUrl=="function"){const n={NCAAB:"ncaam",NCAAM:"ncaam","NCAA MEN'S BASKETBALL":"ncaam",CBB:"ncaam",NCAAF:"ncaaf","COLLEGE FOOTBALL":"ncaaf",CFB:"ncaaf",NBA:"nba",NFL:"nfl",MLB:"mlb",NHL:"nhl",MLS:"mls"}[d]||d.toLowerCase();return window.LogoLoader.getLeagueLogoUrl(n)}return{NBA:"/assets/nba-logo.png",NFL:"/assets/nfl-logo.png",NCAAB:"/assets/ncaam-logo.png",NCAAM:"/assets/ncaam-logo.png",NCAAF:"/assets/ncaaf-logo.png",MLB:"/assets/mlb-logo.png",NHL:"/assets/nhl-logo.png"}[d]||""}function te(i){const d=(i||"").toUpperCase(),e={NCAAAB:"NCAAM",NCAAB:"NCAAM",NCAAF:"NCAAF",NBA:"NBA",NFL:"NFL",MLB:"MLB",NHL:"NHL"}[d]||d,n=ae(d);return`
            <div class="league-cell">
                ${n?`<img src="${n}" class="league-logo" alt="${e}" onerror="this.style.display='none'">`:""}
                <span class="league-text">${e}</span>
            </div>
        `}function z(){const i=a(),d=document.getElementById("picks-tbody");if(!d)return;d.innerHTML="";const t=d.closest(".table-container");if(t&&t.classList.toggle("has-picks",i.length>0),i.length===0){console.log("No picks to display");return}i.forEach((e,n)=>{const r=m(e,n);d.appendChild(r)}),console.log(`\u{1F4CA} Displayed ${i.length} picks in table`),typeof window.calculateKPIs=="function"&&typeof window.updateKPITiles=="function"&&setTimeout(()=>{const e=window.calculateKPIs(a());window.updateKPITiles(e)},100),window.ZebraStripes?.applyPicksTableZebraStripes&&setTimeout(()=>window.ZebraStripes.applyPicksTableZebraStripes(),50),window.DashboardFilters&&typeof window.DashboardFilters.applyFilters=="function"&&setTimeout(()=>window.DashboardFilters.applyFilters(),50),window.DashboardFilterPills&&typeof window.DashboardFilterPills.applyFilters=="function"&&setTimeout(()=>window.DashboardFilterPills.applyFilters(),50),setTimeout(async()=>{try{if(window.AutoGameFetcher){console.log("[PICKS-TABLE] Fetching today's games for live scores..."),await window.AutoGameFetcher.fetchTodaysGames(!0);const e=window.AutoGameFetcher.getTodaysGames()||[];console.log(`[PICKS-TABLE] Loaded ${e.length} games for live score matching`)}window.LiveScoreUpdater&&(console.log("[PICKS-TABLE] Starting live score updates..."),window.LiveScoreUpdater.stopLiveUpdates(),window.LiveScoreUpdater.startLiveUpdates(),window.LiveScoreUpdater.updateScores()),typeof window.populateTeamRecordsWhenReady=="function"&&window.populateTeamRecordsWhenReady(d,{force:!0}),console.log("[PICKS-TABLE] \u2705 Live scores and box scores activated")}catch(e){console.warn("[PICKS-TABLE] Error activating live scores:",e)}},200),se(),T()}function se(){document.querySelectorAll(".sportsbook-dropdown").forEach(d=>{d.removeEventListener("change",X),d.addEventListener("change",X)})}function X(i){const d=i.target.getAttribute("data-pick-id"),t=i.target.value;if(!d)return;const e=a(),n=e.find(r=>r.id===d);n&&(n.sportsbook=t,s(e),console.log(`\u2705 Updated pick ${d} sportsbook to: ${t||"None"}`))}function T(){const i=document.querySelectorAll(".editable-risk"),d=document.querySelectorAll(".editable-win");i.forEach(t=>{t.removeEventListener("change",C),t.addEventListener("change",C)}),d.forEach(t=>{t.removeEventListener("change",b),t.addEventListener("change",b)})}function C(i){const d=i.target.getAttribute("data-pick-id"),t=parseFloat(i.target.value)||0;if(!d)return;const e=a(),n=e.find(r=>r.id===d);n&&(n.risk=Math.round(t),s(e),console.log(`\u2705 Updated pick ${d} risk to: $${n.risk.toLocaleString()}`))}function b(i){const d=i.target.getAttribute("data-pick-id"),t=parseFloat(i.target.value)||0;if(!d)return;const e=a(),n=e.find(r=>r.id===d);n&&(n.win=Math.round(t),s(e),console.log(`\u2705 Updated pick ${d} win to: $${n.win.toLocaleString()}`))}function m(i,d){const t=document.createElement("tr"),e=_(i.pickTeam),n=i.awayTeam||i.pickTeam||"TBD",r=i.homeTeam||"TBD",o=i.awayRecord||"",g=i.homeRecord||"",u=_(n),w=_(r),S=i.segment||"Full Game",A=S.toLowerCase().includes("1h")||S.toLowerCase().includes("1st")?"1h":S.toLowerCase().includes("2h")||S.toLowerCase().includes("2nd")?"2h":"full-game",f={"1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter","full-game":"Full Game"}[A]||"Full Game";let B="";if(i.pickType==="spread"){const J=i.line||"";B=J.startsWith("+")||J.startsWith("-")?J:J?`+${J}`:""}else if(i.pickType==="moneyline"||i.pickType==="ml")B="ML";else if(i.pickType==="total"||i.pickType==="team-total"||i.pickType==="tt"){let J=(i.pickDirection||"Over").toUpperCase();(J==="UNDE"||J.startsWith("UNDE"))&&(J="UNDER"),B=`${J} ${i.line||""}`.trim()}const I=i.status||"pending",K=i.sportsbook||"";let O=(i.sport||"NBA").toLowerCase();const V={college:"ncaaf",cfb:"ncaaf","college football":"ncaaf","ncaa football":"ncaaf",cbb:"ncaab","college basketball":"ncaab","ncaa basketball":"ncaab",ncaam:"ncaab"};V[O]&&(O=V[O]);const N=i.gameDate&&i.gameTime?new Date(`${i.gameDate} ${i.gameTime}`).getTime():Date.now();t.setAttribute("data-pick-id",i.id||`pick-${d}`),t.setAttribute("data-row-id",i.id||`pick-${d}`),t.setAttribute("data-league",O),t.setAttribute("data-sport",O),t.setAttribute("data-epoch",N),t.setAttribute("data-book",K.toLowerCase()),t.setAttribute("data-away",n.toLowerCase()),t.setAttribute("data-home",r.toLowerCase()),t.setAttribute("data-away-team",n),t.setAttribute("data-home-team",r),t.setAttribute("data-away-abbr",u.abbr||""),t.setAttribute("data-home-abbr",w.abbr||""),t.setAttribute("data-pick-type",i.pickType||"spread"),t.setAttribute("data-pick-team",i.pickTeam||""),t.setAttribute("data-pick-text",B),t.setAttribute("data-line",i.line||""),t.setAttribute("data-segment",A),t.setAttribute("data-odds",i.odds||""),t.setAttribute("data-risk",i.risk||""),t.setAttribute("data-win",i.win||""),t.setAttribute("data-status",I),t.setAttribute("data-game-id",i.gameId||""),t.classList.add("group-start");const H=!i.homeTeam||r==="TBD",ee=u.logo?`<img src="${u.logo}" class="team-logo" alt="${u.abbr}" onerror="this.style.display='none'">`:"",ie=w.logo?`<img src="${w.logo}" class="team-logo" alt="${w.abbr}" onerror="this.style.display='none'">`:"",he=e.logo?`<img src="${e.logo}" class="pick-team-logo" alt="${e.abbr}" onerror="this.style.display='none'">`:"",we=H?`<div class="matchup-cell">
                    <div class="team-line">
                        ${ee}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${n}</span>
                            <span class="team-record">${o?`(${o})`:""}</span>
                        </div>
                    </div>
                </div>`:`<div class="matchup-cell">
                    <div class="team-line">
                        ${ee}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${n}</span>
                            <span class="team-record">${o?`(${o})`:""}</span>
                        </div>
                    </div>
                    <div class="vs-divider">vs</div>
                    <div class="team-line">
                        ${ie}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${r}</span>
                            <span class="team-record">${g?`(${g})`:""}</span>
                        </div>
                    </div>
                </div>`,pe=O==="NBA"||O==="NFL",ye=pe?"boxscore-quarters":"boxscore-halves";let ue,me,ge;pe?(ge=`
                <div class="boxscore-cell header-cell">Q1</div>
                <div class="boxscore-cell header-cell">Q2</div>
                <div class="boxscore-cell header-cell">Q3</div>
                <div class="boxscore-cell header-cell">Q4</div>
                <div class="boxscore-cell header-cell">T</div>`,ue=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${u.logo?`<img src="${u.logo}" class="boxscore-team-logo"  alt="${u.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${u.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-away"></div>
                    <div class="boxscore-cell period-cell q2-away"></div>
                    <div class="boxscore-cell period-cell q3-away"></div>
                    <div class="boxscore-cell period-cell q4-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${w.logo?`<img src="${w.logo}" class="boxscore-team-logo"  alt="${w.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${w.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-home"></div>
                    <div class="boxscore-cell period-cell q2-home"></div>
                    <div class="boxscore-cell period-cell q3-home"></div>
                    <div class="boxscore-cell period-cell q4-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`):(ge=`
                <div class="boxscore-cell header-cell">1H</div>
                <div class="boxscore-cell header-cell">2H</div>
                <div class="boxscore-cell header-cell">T</div>`,ue=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${u.logo?`<img src="${u.logo}" class="boxscore-team-logo"  alt="${u.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${u.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-away"></div>
                    <div class="boxscore-cell period-cell h2-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${w.logo?`<img src="${w.logo}" class="boxscore-team-logo"  alt="${w.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${w.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-home"></div>
                    <div class="boxscore-cell period-cell h2-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`);const ne=i.status||"pending";let le=i.gameTime||"Pending",ce="countdown";ne==="final"||ne==="win"||ne==="loss"||ne==="push"?(le="Final",ce="final"):ne==="live"||ne==="on-track"||ne==="at-risk"?(le=i.gameTime||"Live",ce="live"):ne==="pending"&&(le=i.gameTime||"Pending",ce="countdown");const ke=`
            <div class="boxscore-container" data-live-ready="false">
                <div class="compact-boxscore">
                    <div class="boxscore-grid ${ye}">
                        <div class="boxscore-row header">
                            <div class="boxscore-cell header-cell game-time-cell">
                                <span class="game-time-status ${ce}">${le}</span>
                            </div>
                            ${ge}
                        </div>
                        ${ue}
                        ${H?"":me}
                    </div>
                </div>
            </div>`,fe=J=>`$${Math.abs(J).toLocaleString()}`,be=I==="win"?`+${fe(i.win||0)}`:I==="loss"?`-${fe(i.risk||0)}`:I==="push"?"$0":"",Se=be;return t.innerHTML=`
            <td data-label="Date & Time">
                <div class="cell-date">${oe(i.gameDate)}</div>
                <div class="cell-time">${i.gameTime||"TBD"}</div>
                <select class="sportsbook-dropdown" data-pick-id="${i.id}" aria-label="Change sportsbook for this pick">
                    <option value="">No Book</option>
                    <option value="hulkwager" ${K==="hulkwager"?"selected":""}>Hulk Wager</option>
                    <option value="bombay711" ${K==="bombay711"?"selected":""}>Bombay 711</option>
                    <option value="kingofsports" ${K==="kingofsports"?"selected":""}>King of Sports</option>
                    <option value="primetimeaction" ${K==="primetimeaction"?"selected":""}>Prime Time Action</option>
                    <option value="other" ${K==="other"?"selected":""}>Other</option>
                </select>
            </td>
            <td class="center" data-label="League">
                ${te(O)}
            </td>
            <td data-label="Matchup">
                ${we}
            </td>
            <td class="center" data-label="Segment">
                <span class="game-segment" data-segment="${A}">${f}</span>
            </td>
            <td data-label="Pick">
                <div class="pick-cell">
                    <div class="pick-team-info">
                        ${he}
                        <span class="pick-team-abbr">${e.abbr||i.pickTeam}</span>
                    </div>
                    <div class="pick-details">
                        <span class="pick-line">${B||i.line||""}</span>
                        <span class="pick-odds">(${i.odds||"-110"})</span>
                    </div>
                    ${i.edge?`<div class="pick-edge"><span class="edge-badge">+${parseFloat(i.edge).toFixed(1)}%</span></div>`:""}
                </div>
            </td>
            <td class="center" data-label="Risk / Win">
                <div class="currency-combined currency-stacked editable-amounts">
                    <div class="currency-risk-row">
                        <input type="number"
                               class="editable-risk"
                               value="${Math.round(i.risk||5e4)}"
                               data-pick-id="${i.id}"
                               aria-label="Risk amount"
                               min="0"
                               step="1000">
                        <span class="currency-separator"> /</span>
                    </div>
                    <input type="number"
                           class="editable-win"
                           value="${Math.round(i.win||5e4)}"
                           data-pick-id="${i.id}"
                           aria-label="Win amount"
                           min="0"
                           step="1000">
                </div>
            </td>
            <td class="center" data-label="Box Score">
                ${ke}
            </td>
            <td class="center" data-label="Status">
                <span class="status-badge" data-status="${I}" data-blurb="${W(I,i)}">${G(I,i)}</span>
            </td>
            <td class="center" data-label="Hit / Miss">
                <span class="hit-miss-value" data-status="${I}">${be}</span>
            </td>
            <td class="center" data-label="$ Won / Lost">
                <span class="won-lost-value" data-status="${I}">${Se}</span>
                <button class="delete-pick-btn" onclick="event.stopPropagation(); window.LocalPicksManager.delete('${i.id}')" title="Remove pick from dashboard">\u2715</button>
            </td>
        `,t}async function k(){const i=a();if(i.length===0)return;if(!i.some(e=>!e.awayRecord&&!e.homeRecord)){console.log("\u2705 All picks already have records");return}console.log("\u{1F504} Re-enriching existing picks with ESPN data...");let t=0;for(;!window.AutoGameFetcher&&t<10;)await new Promise(e=>setTimeout(e,200)),t++;if(!window.AutoGameFetcher){console.warn("\u26A0\uFE0F AutoGameFetcher not available for re-enrichment");return}try{await window.AutoGameFetcher.fetchTodaysGames();const e=window.AutoGameFetcher.getTodaysGames()||[];if(e.length===0){console.log("\u{1F4ED} No games today to enrich with");return}console.log(`\u{1F3C0} Found ${e.length} games for enrichment`);let n=!1;const r=i.map(o=>{if(o.awayRecord||o.homeRecord)return o;const g=o.pickTeam||o.awayTeam;if(!g)return o;const u=window.AutoGameFetcher.findGame(g);return u?(console.log(`\u{1F4DD} Enriching: ${o.pickTeam} -> ${u.awayTeam} (${u.awayRecord}) vs ${u.homeTeam} (${u.homeRecord})`),n=!0,{...o,awayTeam:u.awayTeam,homeTeam:u.homeTeam,awayRecord:u.awayRecord||"",homeRecord:u.homeRecord||"",gameTime:o.gameTime||u.time,gameDate:o.gameDate||u.date,sport:o.sport||u.sport,gameStatus:u.status}):o});n&&(s(r),console.log("\u2705 Picks re-enriched with team records"),z())}catch(e){console.error("Error re-enriching picks:",e)}}function L(i=7){const d="gbsv_last_stale_cleanup",t=localStorage.getItem(d),e=new Date().toDateString();if(t===e)return;const n=a();if(n.length===0){localStorage.setItem(d,e);return}const r=new Date;r.setDate(r.getDate()-i),r.setHours(0,0,0,0);const o=n.filter(g=>{const u=(g.status||"pending").toLowerCase();if(["win","won","loss","lost","push"].includes(u))return!0;const w=g.gameDate||g.createdAt||"";let S=null;try{S=w?new Date(w):null}catch{}return!S||isNaN(S.getTime())?!0:S>=r});if(o.length<n.length){const g=n.length-o.length;console.log(`\u{1F5D1}\uFE0F [Stale Cleanup] Removed ${g} old pending picks (>${i}d), kept ${o.length} picks`),s(o)}localStorage.setItem(d,e)}function $(){const i="gbsv_cleanup_v5";if(localStorage.getItem(i))return;localStorage.removeItem("gbsv_demo_imported_v1"),localStorage.removeItem("gbsv_cleanup_v1");const d=a();if(d.length===0){localStorage.setItem(i,"done");return}const t=new Set(["demo","sample","mock","placeholder","fake","test","example"]),e=d.filter(n=>{if(n.isDemo===!0||n.isSample===!0)return!1;const r=String(n.source||"").toLowerCase();if(t.has(r))return!1;const o=String(n.sportsbook||"").toLowerCase();return!(o==="demo book"||/(demo|sample|mock|placeholder|fake|test|example)/.test(o))});if(e.length<d.length){const n=d.length-e.length;console.log(`[Cleanup] Removed ${n} demo picks, kept ${e.length} real picks`),s(e)}localStorage.setItem(i,"done")}function F(){if(document.body.classList.contains("page-weekly-lineup"))return!1;const i=window.location.pathname.toLowerCase();return!(i.includes("weekly-lineup")||i.includes("odds-market"))}function x(){console.log("\u{1F3E0} LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)"),$(),L(7),window.processAndSavePicks=Z,window.loadUploadedPicks=z,F()?(z(),window.PicksSortManager&&typeof window.PicksSortManager.initSorting=="function"&&setTimeout(()=>window.PicksSortManager.initSorting(),100),setTimeout(()=>k(),500)):console.log("\u{1F3E0} LocalPicksManager: Skipping auto-refresh (not on dashboard page)")}function M(){return a().filter(d=>{const t=(d.status||"pending").toLowerCase();return t==="pending"||t==="live"||t==="on-track"||t==="at-risk"})}function j(){return a().filter(d=>{const t=(d.status||"pending").toLowerCase();return t==="win"||t==="won"||t==="loss"||t==="lost"||t==="push"})}function R(i=null,d=null){const t=a();return!i&&!d?t:t.filter(e=>{const n=e.gameDate||e.createdAt||e.date||"";if(!n)return!0;try{const r=new Date(n);return!(i&&r<i||d&&r>d)}catch{return!0}})}function re(){const i=new Date,d=new Date(i.getFullYear(),i.getMonth(),i.getDate()),t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),23,59,59,999);return R(d,t)}function de(i=30){const d=a(),t=new Date;t.setDate(t.getDate()-i),t.setHours(0,0,0,0);const e=[],n=[];if(d.forEach(r=>{const o=(r.status||"pending").toLowerCase(),g=["win","won","loss","lost","push"].includes(o),u=r.gameDate||r.createdAt||"";let w=null;try{w=u?new Date(u):null}catch{}g&&w&&w<t?e.push(r):n.push(r)}),e.length>0){const r=JSON.parse(localStorage.getItem("gbsv_picks_archive")||"[]");localStorage.setItem("gbsv_picks_archive",JSON.stringify([...r,...e])),s(n),console.log(`\u{1F4E6} [LocalPicksManager] Archived ${e.length} old settled picks`)}return e.length}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x(),window.LocalPicksManager={getAll:a,getActive:M,getSettled:j,getByDateRange:R,getToday:re,add:c,parseAndAdd:Z,clear:p,delete:y,updateStatus:v,refresh:z,reEnrich:k,getUnitMultiplier:P,setUnitMultiplier:E,archiveOldPicks:de,cleanupStale:L,debug:()=>{const i=a();console.log("=== LocalPicksManager Debug ==="),console.log(`Total picks in localStorage: ${i.length}`),console.log("Storage key:",h),console.log("Raw localStorage:",localStorage.getItem(h)?.substring(0,500)),i.length>0&&console.log("Sample pick:",JSON.stringify(i[0],null,2));const d=document.getElementById("picks-tbody");return console.log("Table element found:",!!d),console.log("Table rows:",d?.children?.length||0),i},forceRefresh:()=>(console.log("Force refreshing picks table..."),z(),a().length)},console.log("\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)")}(),function(){"use strict";const h={init(){console.log("Initializing Dashboard UI..."),this.initKPITiles(),this.initRefreshButton(),this.initBackToTop()},initKPITiles(){document.querySelectorAll('.kpi-tile[data-action="flip-tile"]').forEach(a=>{a.addEventListener("click",()=>{this.flipTile(a)}),a.addEventListener("keydown",s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),this.flipTile(a))})})},flipTile(l){const a=l.querySelectorAll(".kpi-tile-layer");a.length<2||a.forEach(s=>{s.classList.toggle("active")})},initRefreshButton(){const l=document.querySelector(".refresh-btn");l&&l.addEventListener("click",()=>{this.handleRefresh(l)})},handleRefresh(l){l.classList.add("spinning"),window.ActivePicks&&typeof window.ActivePicks.refreshData=="function"?window.ActivePicks.refreshData():window.location.reload(),setTimeout(()=>{l.classList.remove("spinning")},1e3)},initBackToTop(){const l=document.getElementById("back-to-top");l&&(window.addEventListener("scroll",()=>{window.scrollY>300?l.classList.add("visible"):l.classList.remove("visible")}),l.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>h.init()):h.init()}();
//# sourceMappingURL=dashboard.min.js.map
