(function(){"use strict";let n=null,a=null;async function e(){return n||a||(a=(async()=>{try{const o=await fetch("assets/data/team-data.json?v=20250101");if(!o.ok)throw new Error(`HTTP ${o.status}`);const r=await o.json(),c={};return Object.keys(r).forEach(d=>{Object.assign(c,r[d])}),n=c,c}catch(o){return console.warn("[TeamDataLoader] Failed to load team-data.json, using fallback:",o),{}}})(),a)}async function t(o,r=null){if(!o)return{abbr:"N/A",fullName:"",logo:""};const c=await e(),d=o.toLowerCase().trim();if(c[d])return{abbr:c[d].abbr||o.substring(0,3).toUpperCase(),fullName:c[d].fullName||o,logo:c[d].logo||""};if(r&&window.TEAM_DATA_BY_LEAGUE&&window.TEAM_DATA_BY_LEAGUE[r]){const u=window.TEAM_DATA_BY_LEAGUE[r];if(u[d])return{abbr:u[d].abbr||o.substring(0,3).toUpperCase(),fullName:u[d].fullName||o,logo:u[d].logo||""}}return{abbr:o.substring(0,3).toUpperCase(),fullName:o,logo:""}}function s(){e().catch(o=>{console.warn("[TeamDataLoader] Preload failed:",o)})}window.TeamDataLoader={load:e,getTeamInfo:t,preload:s},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()})(),function(){"use strict";const n="gbsv_filter_state",a="1.0";function e(){try{if(!window.tableState||!window.tableState.filters)return;const u={version:a,filters:{matchup:{league:window.tableState.filters.matchup?.league||"",selectedLeagues:window.tableState.filters.matchup?.selectedLeagues||null},pick:{segment:window.tableState.filters.pick?.segment||"",selectedSegments:window.tableState.filters.pick?.selectedSegments||null},status:window.tableState.filters.status||[]},dashboardFilters:window.DashboardFilterPills?{leagues:window.DashboardFilterPills.activeFilters?.leagues||[],segment:window.DashboardFilterPills.activeFilters?.segment||"",pick:window.DashboardFilterPills.activeFilters?.pick||"",status:window.DashboardFilterPills.activeFilters?.status||""}:null,timestamp:Date.now()};localStorage.setItem(n,JSON.stringify(u))}catch(u){console.warn("[FilterStatePersistence] Failed to save filter state:",u)}}function t(){try{const u=localStorage.getItem(n);if(!u)return null;const S=JSON.parse(u);return S.version!==a?(console.log("[FilterStatePersistence] Version mismatch, clearing old state"),localStorage.removeItem(n),null):S}catch(u){return console.warn("[FilterStatePersistence] Failed to load filter state:",u),null}}function s(){const u=t();u&&(u.filters&&window.tableState&&window.tableState.filters&&(u.filters.matchup&&(window.tableState.filters.matchup.league=u.filters.matchup.league||"",window.tableState.filters.matchup.selectedLeagues=u.filters.matchup.selectedLeagues),u.filters.pick&&(window.tableState.filters.pick.segment=u.filters.pick.segment||"",window.tableState.filters.pick.selectedSegments=u.filters.pick.selectedSegments),u.filters.status&&(window.tableState.filters.status=u.filters.status)),u.dashboardFilters&&window.DashboardFilterPills&&(window.DashboardFilterPills.activeFilters={leagues:u.dashboardFilters.leagues||[],segment:u.dashboardFilters.segment||"",pick:u.dashboardFilters.pick||"",status:u.dashboardFilters.status||""},setTimeout(()=>{if(u.dashboardFilters.leagues&&u.dashboardFilters.leagues.length>0&&document.querySelectorAll(".ft-pill.ft-league").forEach(S=>{const x=S.getAttribute("data-league");x==="all"?S.classList.remove("active"):u.dashboardFilters.leagues.includes(x)&&S.classList.add("active")}),u.dashboardFilters.segment){const S=document.getElementById("segment-dropdown-btn"),x=document.querySelector(`#segment-dropdown-menu .ft-dropdown-item[data-v="${u.dashboardFilters.segment}"]`);if(x&&S){document.querySelectorAll("#segment-dropdown-menu .ft-dropdown-item").forEach(R=>R.classList.remove("active")),x.classList.add("active");const k={all:"Segment",full:"Full Game","1h":"1st Half","2h":"2nd Half"};S.textContent=`${k[u.dashboardFilters.segment]||"Segment"} \u25BE`}}if(u.dashboardFilters.pick){const S=document.getElementById("pick-dropdown-btn"),x=document.querySelector(`#pick-dropdown-menu .ft-dropdown-item[data-v="${u.dashboardFilters.pick}"]`);if(x&&S){document.querySelectorAll("#pick-dropdown-menu .ft-dropdown-item").forEach(R=>R.classList.remove("active")),x.classList.add("active");const k={all:"Pick Type",spread:"Spread",ml:"Moneyline",total:"Total",tt:"Team Total"};S.textContent=`${k[u.dashboardFilters.pick]||"Pick Type"} \u25BE`}}if(u.dashboardFilters.status){const S=document.getElementById("status-dropdown-btn"),x=document.querySelector(`#status-dropdown-menu .ft-dropdown-item[data-v="${u.dashboardFilters.status}"]`);if(x&&S){document.querySelectorAll("#status-dropdown-menu .ft-dropdown-item").forEach(R=>R.classList.remove("active")),x.classList.add("active");const k={all:"Status",pending:"Pending",win:"Won",loss:"Lost",push:"Push"};S.textContent=`${k[u.dashboardFilters.status]||"Status"} \u25BE`}}window.DashboardFilterPills&&typeof window.DashboardFilterPills.applyFilters=="function"&&window.DashboardFilterPills.applyFilters()},100)))}function o(){try{localStorage.removeItem(n)}catch(u){console.warn("[FilterStatePersistence] Failed to clear filter state:",u)}}let r=null;function c(){clearTimeout(r),r=setTimeout(e,500)}function d(){if(window.DashboardFilterPills){const S=window.DashboardFilterPills.applyFilters;S&&(window.DashboardFilterPills.applyFilters=function(){S.apply(this,arguments),c()})}const u=window.PicksStateManager?.updateFilter;u&&(window.PicksStateManager.updateFilter=function(S,x){u.apply(this,arguments),c()}),s()}window.FilterStatePersistence={save:e,load:t,restore:s,clear:o,init:d},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d()}(),function(){"use strict";class n{constructor(){this.dropZone=document.getElementById("manual-upload-drop-zone"),this.fileInput=document.getElementById("manual-upload-file"),this.browseBtn=document.querySelector(".upload-browse-btn"),this.textArea=document.querySelector(".manual-picks-input"),this.submitBtn=document.querySelector(".manual-submit-btn-header"),this.clearBtn=document.querySelector(".manual-clear-btn-header"),this.sportsbookSelect=document.getElementById("manual-sportsbook-select"),this.dropZone&&this.init()}init(){this.setupDragAndDrop(),this.setupFileSelection(),this.setupPaste(),this.setupSubmit(),this.setupClear()}setupDragAndDrop(){["dragenter","dragover","dragleave","drop"].forEach(e=>{this.dropZone.addEventListener(e,t=>{t.preventDefault(),t.stopPropagation()},!1)}),["dragenter","dragover"].forEach(e=>{this.dropZone.addEventListener(e,()=>{this.dropZone.classList.add("drag-over")},!1)}),["dragleave","drop"].forEach(e=>{this.dropZone.addEventListener(e,()=>{this.dropZone.classList.remove("drag-over")},!1)}),this.dropZone.addEventListener("drop",e=>{const s=e.dataTransfer.files;this.handleFiles(s)},!1)}setupFileSelection(){this.browseBtn.addEventListener("click",e=>{e.stopPropagation(),this.fileInput.click()}),this.fileInput.addEventListener("change",e=>{this.handleFiles(this.fileInput.files)}),this.dropZone.addEventListener("click",e=>{e.target!==this.browseBtn&&(e.stopPropagation(),this.fileInput.click())})}setupPaste(){this.textArea.addEventListener("paste",t=>{const s=(t.clipboardData||t.originalEvent.clipboardData).items;let o=null;for(let r=0;r<s.length;r++)if(s[r].type.indexOf("image")!==-1){o=s[r].getAsFile(),t.preventDefault(),this.handleFiles([o]);break}}),this.dropZone.addEventListener("paste",t=>{const s=(t.clipboardData||t.originalEvent.clipboardData).items;let o=null;for(let r=0;r<s.length;r++)if(s[r].type.indexOf("image")!==-1){o=s[r].getAsFile(),t.preventDefault(),this.handleFiles([o]);break}});const e=this;document.addEventListener("paste",t=>{const s=document.getElementById("sportsbooks-menu");if(!s||s.hasAttribute("hidden"))return;const o=(t.clipboardData||t.originalEvent.clipboardData).items;for(let r=0;r<o.length;r++)if(o[r].type.indexOf("image")!==-1){const c=o[r].getAsFile();t.preventDefault(),e.handleFiles([c]);break}})}setupSubmit(){this.submitBtn.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.uploadPicks()})}setupClear(){this.clearBtn&&this.clearBtn.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),this.textArea.value.trim()||this.selectedFile){this.resetForm();return}confirm("Clear ALL saved picks from the dashboard?")&&window.LocalPicksManager?.clear&&(window.LocalPicksManager.clear(),console.log("\u2705 Cleared all picks"))})}handleFiles(e){if(e.length>0){const t=e[0],s=this.dropZone.querySelector(".drop-zone-text");s.textContent=`Selected: ${t.name}`,s.style.color="#00ffaa",this.selectedFile=t}}async uploadPicks(){const e=this.textArea.value.trim(),t=this.selectedFile,s=this.sportsbookSelect?.value||"";if(!s){alert("Please select a sportsbook first."),this.sportsbookSelect?.focus();return}if(!e&&!t){alert("Please enter picks or upload a file.");return}const o=this.submitBtn.textContent;this.submitBtn.textContent="Processing...",this.submitBtn.disabled=!0;try{let r=e;t&&!e&&(r=await this.readFileContent(t)),console.log("Processing picks:",{content:r.substring(0,200),file:t?t.name:null});const c={value:s,label:this.sportsbookSelect?.options[this.sportsbookSelect.selectedIndex]?.textContent?.trim()||s},d=window.LocalPicksManager?.parseAndAdd?await window.LocalPicksManager.parseAndAdd(r,c.label):window.processAndSavePicks?await window.processAndSavePicks(r,!1,c):null;if(!d)throw new Error("Pick processing not available. Please refresh the page.");if(!d||d.length===0)throw new Error("No picks could be parsed from the input. Please check the format.");console.log(`\u2705 Successfully added ${d.length} picks`),this.submitBtn.textContent=`Added ${d.length} picks!`,this.submitBtn.style.background="#00ffaa",setTimeout(()=>{this.resetForm()},2e3),this.sportsbookSelect&&(this.sportsbookSelect.value="")}catch(r){console.error("Upload failed:",r),this.submitBtn.textContent="Error",this.submitBtn.style.background="#ff5570",alert(r.message||"Failed to process picks. Please try again."),setTimeout(()=>{this.submitBtn.textContent=o,this.submitBtn.disabled=!1,this.submitBtn.style.background=""},2e3)}}readFileContent(e){return new Promise((t,s)=>{const o=new FileReader;o.onload=r=>t(r.target.result),o.onerror=r=>s(new Error("Failed to read file")),o.readAsText(e)})}resetForm(){this.textArea.value="",this.selectedFile=null,this.fileInput.value="";const e=this.dropZone.querySelector(".drop-zone-text");e.textContent="Drag & Drop or Paste Image",e.style.color="",this.submitBtn.textContent="Upload Picks",this.submitBtn.disabled=!1,this.submitBtn.style.background=""}}document.addEventListener("DOMContentLoaded",()=>{new n})}(),function(){"use strict";const n="GBSV_SELECTED_SPORTSBOOK";let a=null;function e(){a=localStorage.getItem(n),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}function t(){document.querySelectorAll(".sportsbook-card:not(.upload-picks-card)").forEach(S=>{const x=S.getAttribute("data-book");S.addEventListener("click",k=>{k.target.closest("input")||k.target.closest("button")||s(x,S)})}),a&&o(a)}function s(u,S){u&&(a=u,localStorage.setItem(n,u),document.querySelectorAll(".sportsbook-card:not(.upload-picks-card)").forEach(x=>{x.getAttribute("data-book")===u?x.classList.add("selected"):x.classList.remove("selected")}),r(u),console.log("[SPORTSBOOK SELECTION]",`Selected: ${u}`))}function o(u){const S=document.querySelector(`.sportsbook-card[data-book="${u}"]`);S&&s(u,S)}function r(u){const S=document.getElementById("sportsbooks-trigger");if(!S)return;const k={hulkwager:"Hulk Wager",bombay711:"Bombay 711",kingofsports:"King of Sports",primetimeaction:"Prime Time Action"}[u];if(k){S.classList.add("has-selection"),S.textContent=k;const R=document.createElement("span");R.style.marginLeft="4px",R.textContent="\u25BC",S.appendChild(R)}else{S.classList.remove("has-selection"),S.textContent="Sports Books";const R=document.createElement("span");R.style.marginLeft="4px",R.textContent="\u25BC",S.appendChild(R)}}function c(){return a}function d(){a=null,localStorage.removeItem(n),document.querySelectorAll(".sportsbook-card").forEach(S=>{S.classList.remove("selected")});const u=document.getElementById("sportsbooks-trigger");if(u){u.classList.remove("has-selection"),u.textContent="Sports Books";const S=document.createElement("span");S.style.marginLeft="4px",S.textContent="\u25BC",u.appendChild(S)}}window.SportsBookSelectionHandler={getSelected:c,selectBook:s,clearSelection:d},e()}(),function(){"use strict";let n=null;const a=50;function e(k){if(!k||k.style.display==="none"||k.hasAttribute("hidden")||k.getAttribute("aria-hidden")==="true"||k.classList.contains("is-hidden")||k.classList.contains("hidden"))return!1;if(typeof window<"u"&&typeof window.getComputedStyle=="function"){const R=window.getComputedStyle(k);if(!R||R.display==="none"||R.visibility==="hidden")return!1}return!0}function t(k){return k?Array.from(k.children).filter(R=>R&&R.tagName==="TR"):[]}function s(k){return t(k).filter(R=>!R.classList.contains("parlay-legs"))}function o(k){if(!k)return null;const R=k.getAttribute("data-row-id");if(R){const y=document.querySelector(`tr.parlay-legs[data-parent-id="${R}"]`);if(y)return y}const H=k.nextElementSibling;return H&&H.classList.contains("parlay-legs")?H:null}let r=null,c=0;const d=1e3;function u(k){let R=k;if(!R){const D=Date.now();(!r||D-c>d)&&(r=document.getElementById("picks-tbody")||document.querySelector(".picks-table tbody"),c=D),R=r}if(!R)return 0;const H=["zebra-row","zebra-odd","zebra-even"];R.querySelectorAll(".zebra-row, .zebra-odd, .zebra-even").forEach(D=>{H.forEach(F=>D.classList.remove(F))});const y=t(R).filter(D=>!(!D||D.classList.contains("parlay-legs")||D.dataset&&D.dataset.zebraIgnore==="true")),$=D=>{if(!D)return;let F=D.querySelectorAll(".compact-leg-table tbody tr");if(!F.length){const T=D.querySelectorAll(".compact-leg-table tr");F=Array.from(T).filter(M=>!M.closest("thead"))}F.length&&F.forEach((T,M)=>{H.forEach(j=>T.classList.remove(j));const O=M%2===0?"zebra-odd":"zebra-even";T.classList.add("zebra-row",O)})};let E=0;return y.forEach(D=>{if(!e(D))return;const F=E%2===0?"zebra-odd":"zebra-even";if(D.classList.add("zebra-row",F),E+=1,D.classList.contains("parlay-row")){const T=o(D);if(T)if(e(T)){const O=E%2===0?"zebra-odd":"zebra-even";T.classList.add("zebra-row",O),$(T),E+=1}else T.classList.add("zebra-row",F)}}),E}function S(k){const R=k||a;clearTimeout(n),n=setTimeout(()=>{u()},R)}function x(){clearTimeout(n),u()}if(window.ZebraStripes={isRowVisibleForZebra:e,getDirectChildRows:t,getParentRowsOnly:s,findParlayLegsRow:o,applyPicksTableZebraStripes:u,debouncedApply:S,applyNow:x,DEBOUNCE_DELAY:a},window.__gbsvApplyZebraStripes=u,window.getDirectChildRows=t,window.getParentRowsOnly=s,window.findParlayLegsRow=o,typeof document<"u")if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",u);else try{u()}catch{}console.log("\u2705 zebra-stripes.js loaded")}(),function(){"use strict";const n=new WeakMap,a={getColumnIndex(e,t){try{const s=e?.closest?.("table");if(!s)return null;let o=n.get(s);if(o||(o=new Map,n.set(s,o)),o.has(t))return o.get(t);const r=s.querySelector(`thead th[data-sort="${t}"]`)||s.querySelector(`thead th[data-filter="${t}"]`);if(!r)return o.set(t,null),null;const c=r.closest("tr"),u=(c?Array.from(c.children).filter(x=>x.tagName==="TH"):[]).indexOf(r),S=u>=0?u+1:null;return o.set(t,S),S}catch{return null}},getCell(e,t,s){const o=this.getColumnIndex(e,t)||s||null;return o?e.querySelector(`td:nth-child(${o})`):null},clearColumnIndexCache(e){e&&n.delete(e)},escapeHtml(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML},formatCurrency(e){if(e==null||isNaN(e))return"-";const t=parseFloat(e),s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.abs(t));return t<0?`(${s})`:s},formatCurrencyForChip(e){if(!e)return"";const t=parseFloat(e);return t>=1e3?`$${(t/1e3).toFixed(1)}k`:`$${t}`},formatDateWithDay(e){if(!e)return"";if(/^(mon|tue|wed|thu|fri|sat|sun)\s+/i.test(e))return e;const t=this.getWeekdayName(e);return t?`${t} ${e}`:e},getWeekdayName(e){if(!e)return"";const t=e.match(/(\d{1,2})\/(\d{1,2})/);if(!t)return"";const s=parseInt(t[1],10)-1,o=parseInt(t[2],10),r=new Date().getFullYear(),c=new Date(r,s,o);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][c.getDay()]},normalizeStatus(e){if(!e)return"pending";const t=e.toString().toLowerCase().trim();return{win:"win",won:"win",winner:"win",loss:"loss",lost:"loss",lose:"loss",loser:"loss",push:"push",tie:"push",void:"void",voided:"void",cancelled:"void",pending:"pending",open:"pending",live:"live",active:"live","in-progress":"live","in progress":"live"}[t]||"pending"},formatBadgeStatus(e){return e?this.normalizeStatus(e).toUpperCase():""},formatTeamRecordValue(e){return e?e.toString().replace(/[^\d-]/g,""):""},formatBetTypeLabel(e){return e?{spread:"Spread",total:"Total",moneyline:"Moneyline",ml:"Moneyline",parlay:"Parlay",prop:"Prop",player:"Player Prop"}[e.toLowerCase()]||e:""},formatSubtypeLabel(e){return e?{"1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter",game:"Full Game",full:"Full Game"}[e.toLowerCase()]||e:""},formatSegmentLabel(e){return e?{"1h":"1st Half","2h":"2nd Half",game:"Full Game",full:"Full Game",live:"Live",pregame:"Pre-Game"}[e.toLowerCase()]||e:""},createElement(e,t={},s=[]){const o=document.createElement(e);return Object.entries(t).forEach(([r,c])=>{r==="className"?o.className=c:r==="innerHTML"?o.innerHTML=c:r==="textContent"?o.textContent=c:r.startsWith("data-")?o.setAttribute(r,c):o[r]=c}),s.forEach(r=>{typeof r=="string"?o.appendChild(document.createTextNode(r)):r instanceof Element&&o.appendChild(r)}),o},positionDropdown(e,t){if(!e||!t)return;const s=e.getBoundingClientRect(),o=t.offsetHeight,r=window.innerHeight;t.style.position="absolute",t.style.left=`${s.left}px`,s.bottom+o>r&&s.top>o?(t.style.top=`${s.top-o}px`,t.classList.add("dropdown-above")):(t.style.top=`${s.bottom}px`,t.classList.remove("dropdown-above")),t.getBoundingClientRect().right>window.innerWidth&&(t.style.left=`${window.innerWidth-t.offsetWidth-10}px`)},closeAllDropdowns(){document.querySelectorAll(".filter-dropdown.show").forEach(e=>{e.classList.remove("show");const t=e.getAttribute("aria-labelledby");if(t){const s=document.getElementById(t);s&&s.setAttribute("aria-expanded","false")}})},extractAbbreviation(e){if(!e)return"";const s=e.replace(/(fc|united|city|town|athletic|rovers)$/i,"").trim().split(/\s+/);return s.length===1?s[0].substring(0,3).toUpperCase():s.map(o=>o.charAt(0)).join("").substring(0,3).toUpperCase()},formatTeamName(e){return e?e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()):""},debounce(e,t){let s;return function(...r){const c=()=>{clearTimeout(s),e(...r)};clearTimeout(s),s=setTimeout(c,t)}},throttle(e,t){let s;return function(...o){s||(e.apply(this,o),s=!0,setTimeout(()=>s=!1,t))}},isElementVisible(e){if(!e)return!1;const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},scrollIntoViewSmoothly(e,t={}){if(!e)return;const s={behavior:"smooth",block:"center",inline:"nearest"};e.scrollIntoView({...s,...t})},getTextContent(e,t){if(!e)return"";if(t){const s=e.querySelector(t);return s?s.textContent.trim():""}return e.textContent.trim()},setLoadingState(e,t,s="Loading..."){if(e){if(t)e.classList.add("loading"),e.setAttribute("aria-busy","true"),e.tagName==="BUTTON"&&(e.disabled=!0,e.setAttribute("data-original-text",e.textContent),e.textContent=s);else if(e.classList.remove("loading"),e.setAttribute("aria-busy","false"),e.tagName==="BUTTON"){e.disabled=!1;const o=e.getAttribute("data-original-text");o&&(e.textContent=o,e.removeAttribute("data-original-text"))}}},parseRange(e){if(!e)return{min:null,max:null};const t=e.split("-").map(s=>parseFloat(s.trim()));return{min:t[0]||null,max:t[1]||t[0]||null}},formatRangeLabel(e){if(!e)return"";if(typeof e=="string"){const{min:t,max:s}=this.parseRange(e);return t===s||!s?this.formatCurrency(t):`${this.formatCurrency(t)} - ${this.formatCurrency(s)}`}return e.toString()},addEventListenerWithCleanup(e,t,s){return e?(e.addEventListener(t,s),()=>e.removeEventListener(t,s)):null},batchDOMUpdates(e){requestAnimationFrame(()=>{e.forEach(t=>t())})},createFragment(e){const t=document.createDocumentFragment();return e.forEach(s=>{s&&t.appendChild(s)}),t}};window.PicksDOMUtils=a}(),function(){"use strict";typeof window.tableState>"u"&&(window.tableState={filters:{date:{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null},matchup:{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"},pick:{betType:"",subtype:"",segment:"",selectedSegments:null},risk:{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]},status:[]},sort:{column:null,direction:"asc"},expandedParlayIds:[]});const n={createDateFilterState(){return{start:null,end:null,selectedDates:null,selectedTimes:null,selectedBooks:null}},createMatchupFilterState(){return{league:"",selectedLeagues:null,selectedTeams:null,ticketType:"all"}},createRiskFilterState(){return{min:null,max:null,selectedRiskRanges:[],selectedWinRanges:[]}},createPickFilterState(){return{betType:"",subtype:"",segment:"",selectedSegments:null}},ensureDateFilterShape(){const e=window.tableState;if(!e.filters.date||typeof e.filters.date!="object"){e.filters.date=this.createDateFilterState();return}const t=e.filters.date;"start"in t||(t.start=null),"end"in t||(t.end=null),"selectedDates"in t||(t.selectedDates=null),"selectedTimes"in t||(t.selectedTimes=null),"selectedBooks"in t||(t.selectedBooks=null)},ensureMatchupFilterShape(){const e=window.tableState;if(!e.filters.matchup||typeof e.filters.matchup!="object"){e.filters.matchup=this.createMatchupFilterState();return}const t=e.filters.matchup;"ticketType"in t||(t.ticketType="all"),"selectedTeams"in t||(t.selectedTeams=null),"league"in t||(t.league="")},ensureRiskFilterShape(){const e=window.tableState;if(!e.filters.risk||typeof e.filters.risk!="object"){e.filters.risk=this.createRiskFilterState();return}const t=e.filters.risk;"min"in t||(t.min=null),"max"in t||(t.max=null),Array.isArray(t.selectedRiskRanges)||(t.selectedRiskRanges=[]),Array.isArray(t.selectedWinRanges)||(t.selectedWinRanges=[])},ensurePickFilterShape(){const e=window.tableState;e.filters.pick||(e.filters.pick=this.createPickFilterState())},ensureAllFilterShapes(){this.ensureDateFilterShape(),this.ensureMatchupFilterShape(),this.ensureRiskFilterShape(),this.ensurePickFilterShape()}},a={getState(){return window.tableState},getFilter(e){return window.tableState.filters[e]},updateFilter(e,t){if(!window.tableState.filters[e]){console.warn(`Filter type ${e} does not exist`);return}Object.assign(window.tableState.filters[e],t)},resetFilter(e){switch(e){case"date":window.tableState.filters.date=n.createDateFilterState();break;case"matchup":window.tableState.filters.matchup=n.createMatchupFilterState();break;case"pick":window.tableState.filters.pick=n.createPickFilterState();break;case"risk":window.tableState.filters.risk=n.createRiskFilterState();break;case"status":window.tableState.filters.status=[];break;case"league":window.tableState.filters.matchup.league="",window.tableState.filters.matchup.selectedLeagues=null;break;case"segment":window.tableState.filters.pick.segment="",window.tableState.filters.pick.selectedSegments=null;break;default:console.warn(`Unknown filter type: ${e}`)}},resetAllFilters(){window.tableState.filters={date:n.createDateFilterState(),matchup:n.createMatchupFilterState(),pick:n.createPickFilterState(),risk:n.createRiskFilterState(),status:[]}},getExpandedParlayIds(){return Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]),window.tableState.expandedParlayIds},setParlayExpanded(e,t){if(!e)return;Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[]);const s=window.tableState.expandedParlayIds.indexOf(e);t&&s===-1?window.tableState.expandedParlayIds.push(e):!t&&s!==-1&&window.tableState.expandedParlayIds.splice(s,1)},isParlayExpanded(e){return!e||!Array.isArray(window.tableState.expandedParlayIds)?!1:window.tableState.expandedParlayIds.includes(e)},toggleParlayExpanded(e){const t=this.isParlayExpanded(e);return this.setParlayExpanded(e,!t),!t},resetExpansionState(){window.tableState.expandedParlayIds=[]},getSortState(){return window.tableState.sort},updateSort(e,t){window.tableState.sort={column:e,direction:t||"asc"}},resetSort(){window.tableState.sort={column:null,direction:"asc"}},hasActiveFilters(){const e=window.tableState.filters;return!!(e.date.selectedDates||e.date.selectedTimes||e.date.selectedBooks||e.date.start||e.date.end||e.matchup.league||e.matchup.selectedLeagues||e.matchup.selectedTeams||e.matchup.ticketType!=="all"||e.pick.betType||e.pick.subtype||e.pick.segment||e.pick.selectedSegments||e.risk.min!==null||e.risk.max!==null||e.risk.selectedRiskRanges.length>0||e.risk.selectedWinRanges.length>0||e.status.length>0)},getActiveFilterCount(){let e=0;const t=window.tableState.filters;return t.date.selectedDates&&e++,t.date.selectedTimes&&e++,t.date.selectedBooks&&e++,(t.matchup.league||t.matchup.selectedLeagues)&&e++,t.matchup.selectedTeams&&e++,(t.pick.betType||t.pick.subtype)&&e++,(t.pick.segment||t.pick.selectedSegments)&&e++,t.risk.selectedRiskRanges.length>0&&e++,t.risk.selectedWinRanges.length>0&&e++,t.status.length>0&&e++,e},init(){n.ensureAllFilterShapes(),Array.isArray(window.tableState.expandedParlayIds)||(window.tableState.expandedParlayIds=[])}};window.PicksStateManager={...a,validators:n,state:window.tableState},a.init()}(),function(){"use strict";const n={_headerIndexCache:null,_headerIndexCacheTable:null,getPicksTable(){return document.getElementById("picks-table")},getColumnIndex(a){try{const e=this.getPicksTable();if(!e)return null;if(this._headerIndexCacheTable!==e&&(this._headerIndexCacheTable=e,this._headerIndexCache=new Map),this._headerIndexCache.has(a))return this._headerIndexCache.get(a);const t=e.querySelector(`thead th[data-sort="${a}"]`)||e.querySelector(`thead th[data-filter="${a}"]`);if(!t)return this._headerIndexCache.set(a,null),null;const s=t.closest("tr"),r=(s?Array.from(s.children).filter(d=>d.tagName==="TH"):[]).indexOf(t),c=r>=0?r+1:null;return this._headerIndexCache.set(a,c),c}catch{return null}},getCell(a,e,t){const s=this.getColumnIndex(e)||t||null;return s?a.querySelector(`td:nth-child(${s})`):null},collectDateFilterFacets(){const a=document.getElementById("picks-tbody");if(!a)return{dates:new Set,times:new Set,books:new Set};const e={dates:new Set,times:new Set,books:new Set};return a.querySelectorAll("tr:not(.parlay-legs)").forEach(s=>{const o=s.querySelector("td:first-child");if(!o)return;const r=o.querySelector(".cell-date");if(r){const u=r.textContent.trim();if(u){const S=window.PicksDOMUtils?window.PicksDOMUtils.getWeekdayName(u):"",x=S?`${S} ${u}`:u;e.dates.add(x)}}const c=o.querySelector(".cell-time");if(c){const u=c.textContent.trim();u&&e.times.add(u)}const d=o.querySelector(".cell-book, .sportsbook-name, .sportsbook-value");if(d){const u=d.textContent.trim();u&&e.books.add(u)}}),{dates:Array.from(e.dates).sort(),times:Array.from(e.times).sort((s,o)=>{const r=this.parseTimeValue(s),c=this.parseTimeValue(o);return r-c}),books:Array.from(e.books).sort()}},parseTimeValue(a){const e=a.match(/(\d{1,2}):(\d{2})\s*(am|pm)?/i);if(!e)return 0;let t=parseInt(e[1],10);const s=parseInt(e[2],10),o=e[3]?e[3].toLowerCase():"";return o==="pm"&&t!==12?t+=12:o==="am"&&t===12&&(t=0),t*60+s},getLeaguesFromTable(){const a=document.getElementById("picks-tbody");if(!a)return[];const e=new Set;return a.querySelectorAll("tr:not(.parlay-legs)").forEach(s=>{const r=(s.getAttribute("data-league")||(this.getCell(s,"league")?this.getCell(s,"league").textContent:"")||"").toString().trim();r&&e.add(r.toUpperCase())}),Array.from(e).sort()},detectLeagueFromCell(a){if(!a)return"";const e=a.textContent.toLowerCase(),t={nfl:/(?:patriots|cowboys|packers|chiefs|bills|dolphins|jets|ravens|bengals|browns|steelers|texans|colts|jaguars|titans|broncos|chargers|raiders|eagles|giants|commanders|bears|lions|vikings|falcons|panthers|saints|buccaneers|cardinals|rams|49ers|seahawks)/,nba:/(?:celtics|nets|knicks|76ers|raptors|bulls|cavaliers|pistons|pacers|bucks|hawks|heat|magic|wizards|hornets|nuggets|timberwolves|thunder|blazers|jazz|warriors|clippers|lakers|suns|kings|mavericks|rockets|grizzlies|pelicans|spurs)/,mlb:/(?:orioles|red sox|yankees|rays|blue jays|white sox|guardians|tigers|royals|twins|astros|athletics|angels|mariners|rangers|braves|marlins|mets|phillies|nationals|brewers|cubs|reds|pirates|cardinals|diamondbacks|rockies|dodgers|padres|giants)/,nhl:/(?:bruins|sabres|red wings|panthers|canadiens|senators|lightning|maple leafs|hurricanes|blue jackets|devils|islanders|rangers|flyers|penguins|capitals|blackhawks|avalanche|stars|wild|predators|blues|jets|ducks|coyotes|flames|oilers|kings|sharks|kraken|canucks|golden knights)/,ncaa:/(?:alabama|georgia|michigan|ohio state|clemson|lsu|oklahoma|texas|florida|usc|notre dame|penn state|tennessee|auburn|wisconsin|oregon|washington|miami|florida state|nebraska)/,soccer:/(?:manchester|liverpool|chelsea|arsenal|barcelona|real madrid|bayern|juventus|psg|milan|inter|atletico|dortmund|ajax|benfica|porto|celtic|rangers)/};for(const[s,o]of Object.entries(t))if(o.test(e))return s;return""},getTeamsForLeague(a){const e=document.getElementById("picks-tbody");if(!e||!a)return[];const t=new Set;return e.querySelectorAll("tr:not(.parlay-legs)").forEach(o=>{const r=(o.getAttribute("data-league")||"").toString();if(r&&r.toUpperCase()!==a.toUpperCase())return;const c=this.getCell(o,"matchup",2);if(!c)return;this.extractTeamsFromCell(c).forEach(u=>t.add(u))}),Array.from(t).sort()},extractTeamsFromCell(a){if(!a)return[];const e=[],t=a.querySelectorAll(".team-logo");return t.length>0&&t.forEach(s=>{const o=s.getAttribute("alt")||s.getAttribute("title")||"";o&&e.push(o)}),e.length===0&&a.textContent.split(/\s+(?:vs?\.?|@|at)\s+/i).forEach(r=>{const c=r.trim();c&&c.length>2&&e.push(c)}),e},getGameDayFromRow(a){const e=a.querySelector("td:first-child");if(!e)return null;const t=e.querySelector(".cell-date");if(!t)return null;const s=t.textContent.trim();if(!s)return null;const o=s.match(/(\d{1,2})\/(\d{1,2})/);if(!o)return null;const r=parseInt(o[1],10),c=parseInt(o[2],10),d=new Date().getFullYear();return new Date(d,r-1,c)},collectStatusValues(){const a=document.getElementById("picks-tbody");if(!a)return[];const e=new Set;return a.querySelectorAll("tr:not(.parlay-legs)").forEach(s=>{const o=this.getCell(s,"status")||s.querySelector("td:last-child");if(o){const r=o.querySelector(".status-badge");if(r){const c=r.getAttribute("data-status")||r.className.match(/status-(\w+)/)?.[1]||r.textContent.trim();c&&e.add(c.toLowerCase())}}}),Array.from(e).sort()},collectRiskRanges(){const a=document.getElementById("picks-tbody");if(!a)return[];const e=[];return a.querySelectorAll("tr:not(.parlay-legs)").forEach(s=>{const o=this.getCell(s,"risk",5);if(!o)return;const r=o.querySelector(".risk-amount");if(!r)return;const c=parseFloat(r.textContent.replace(/[$,]/g,"").trim());isNaN(c)||e.push(c)}),this.createValueRanges(e)},collectWinRanges(){const a=document.getElementById("picks-tbody");if(!a)return[];const e=[];return a.querySelectorAll("tr:not(.parlay-legs)").forEach(s=>{const o=this.getCell(s,"risk",5);if(!o)return;const r=o.querySelector(".win-amount");if(!r)return;const c=parseFloat(r.textContent.replace(/[$,]/g,"").trim());isNaN(c)||e.push(c)}),this.createValueRanges(e)},collectValueRanges(a){const e=document.getElementById("picks-tbody");if(!e)return[];const t=[];return e.querySelectorAll("tr:not(.parlay-legs)").forEach(o=>{const r=o.querySelector(`td:nth-child(${a})`);if(r){const c=r.textContent.replace(/[$,]/g,"").trim(),d=parseFloat(c);isNaN(d)||t.push(d)}}),this.createValueRanges(t)},createValueRanges(a){if(!a||a.length===0)return[];const e=a.sort((r,c)=>r-c),t=e[0],s=e[e.length-1],o=[];return s<=100?o.push("0-25","25-50","50-75","75-100"):s<=500?o.push("0-50","50-100","100-250","250-500"):s<=1e3?o.push("0-100","100-250","250-500","500-1000"):o.push("0-100","100-500","500-1000","1000-5000","5000+"),o.filter(r=>{const[c,d]=r.includes("+")?[parseFloat(r),1/0]:r.split("-").map(parseFloat);return a.some(u=>u>=c&&u<=d)})},calculateKPIsFromVisibleRows(){const a=document.getElementById("picks-tbody");if(!a)return this.getEmptyKPIs();const e=Array.from(a.querySelectorAll("tr:not(.parlay-legs)")).filter(H=>H.style.display!=="none");let t=0,s=0,o=0,r=0,c=0,d=0,u=0;e.forEach(H=>{const y=this.getCell(H,"risk",5);if(y){const E=y.querySelector(".risk-amount"),D=y.querySelector(".win-amount"),F=E&&parseFloat(E.textContent.replace(/[$,]/g,""))||0,T=D&&parseFloat(D.textContent.replace(/[$,]/g,""))||0;t+=F,s+=T}const $=this.getCell(H,"status")||H.querySelector("td:last-child");if($){const E=$.querySelector(".status-badge"),D=E?E.getAttribute("data-status")||E.textContent.trim():$.textContent.trim(),F=window.PicksDOMUtils&&window.PicksDOMUtils.normalizeStatus?window.PicksDOMUtils.normalizeStatus(D):D.toLowerCase();F==="win"||F.includes("win")||F==="won"?o++:F==="loss"||F.includes("loss")||F==="lost"?r++:F==="push"||F.includes("push")?c++:F==="live"||F.includes("live")||F.includes("active")?u++:(F==="pending"||F.includes("pending")||F==="open")&&d++}});const S=e.length,x=o+r+c,k=x>0?(o/x*100).toFixed(1):0,R=t>0?((s-t)/t*100).toFixed(1):0;return{totalBets:S,totalRisk:t,totalWin:s,profit:s-t,roi:R,winRate:k,wins:o,losses:r,pushes:c,pending:d,live:u,settled:x}},getEmptyKPIs(){return{totalBets:0,totalRisk:0,totalWin:0,profit:0,roi:0,winRate:0,wins:0,losses:0,pushes:0,pending:0,live:0,settled:0}},collectBetTypes(){const a=document.getElementById("picks-tbody");if(!a)return{types:[],subtypes:[]};const e=new Set,t=new Set;return a.querySelectorAll("tr:not(.parlay-legs)").forEach(o=>{const r=this.getCell(o,"pick",5);if(r){const c=this.detectBetTypeFromCell(r);c.type&&e.add(c.type),c.subtype&&t.add(c.subtype)}}),{types:Array.from(e).sort(),subtypes:Array.from(t).sort()}},detectBetTypeFromCell(a){if(!a)return{type:"",subtype:""};const e=(a.textContent||"").toLowerCase(),t=a.querySelector("[data-bet-type]");return t?{type:t.getAttribute("data-bet-type")||"",subtype:t.getAttribute("data-bet-subtype")||""}:e.includes("spread")||/[+-]\d+\.?\d*/.test(e)?{type:"spread",subtype:this.detectSegmentFromText(e)}:e.includes("total")||e.includes("over")||e.includes("under")?{type:"total",subtype:this.detectSegmentFromText(e)}:e.includes("moneyline")||e.includes(" ml ")?{type:"moneyline",subtype:this.detectSegmentFromText(e)}:e.includes("parlay")?{type:"parlay",subtype:""}:e.includes("prop")||e.includes("player")?{type:"prop",subtype:""}:{type:"",subtype:""}},detectSegmentFromText(a){const e=a.toLowerCase();return e.includes("1st")||e.includes("first")||e.includes("1h")||e.includes("1q")?"1h":e.includes("2nd")||e.includes("second")||e.includes("2h")||e.includes("3q")||e.includes("4q")?"2h":"game"}};window.PicksDataProcessor=n}(),function(){"use strict";const n={getColumnIndex(a,e){return window.PicksDOMUtils?.getColumnIndex?window.PicksDOMUtils.getColumnIndex(a,e):null},getCell(a,e,t){if(window.PicksDOMUtils?.getCell)return window.PicksDOMUtils.getCell(a,e,t);const s=t||null;return s?a.querySelector(`td:nth-child(${s})`):null},DATE_FILTER_GROUP_MAP:{dates:"selectedDates",times:"selectedTimes",books:"selectedBooks"},DATE_FILTER_GROUP_LABELS:{dates:"Dates",times:"Times",books:"Sportsbooks"},normalizeFilterValue(a){return(a??"").toString().trim().toLowerCase()},getDateTimeParts(a){const e=a.querySelector("td:first-child");if(!e)return{date:"",time:"",book:""};const t=e.querySelector(".cell-date"),s=e.querySelector(".cell-time"),o=e.querySelector(".cell-book, .sportsbook-name, .sportsbook-value");let r=t?t.textContent.trim():"",c=s?s.textContent.trim():"",d=o?o.textContent.trim():"";const u=e.querySelector(".cell-weekday");if(u){const S=u.textContent.trim();S&&!r.includes(S)&&(r=`${S} ${r}`)}return{date:r,time:c,book:d}},getMatchupValue(a){const e=this.getCell(a,"matchup",2);if(!e)return"";let t=e.textContent||"";const s=e.querySelectorAll(".team-logo");if(s.length>0){const o=Array.from(s).map(r=>r.getAttribute("alt")||r.getAttribute("title")||"").filter(Boolean);o.length>0&&(t=o.join(" vs "))}return t.toLowerCase()},getPickValue(a){const e=this.getCell(a,"pick",3);if(!e)return"";const t=e.textContent||"",s=e.querySelector("[data-bet-type]"),o=s?s.getAttribute("data-bet-type"):"";return{text:t.toLowerCase(),betType:o.toLowerCase()}},getCurrencyValue(a,e){const t=a.querySelector(`td:nth-child(${e})`);if(!t)return null;const s=t.textContent.replace(/[$,]/g,"").trim();return s?parseFloat(s):null},getRiskValue(a){const e=this.getCell(a,"risk",5);if(!e)return null;const t=e.querySelector(".risk-amount");if(!t)return null;const s=t.textContent.replace(/[$,]/g,"").trim();return s?parseFloat(s):null},getWinValue(a){const e=this.getCell(a,"risk",5);if(!e)return null;const t=e.querySelector(".win-amount");if(!t)return null;const s=t.textContent.replace(/[$,]/g,"").trim();return s?parseFloat(s):null},getStatusValue(a){const e=this.getCell(a,"status")||a.querySelector("td:last-child");if(!e)return"";const t=e.querySelector(".status-badge");return t?t.getAttribute("data-status")||t.className.match(/status-(\w+)/)?.[1]||t.textContent.trim().toLowerCase():e.textContent.trim().toLowerCase()},normalizeStatus(a){if(window.PicksDOMUtils&&window.PicksDOMUtils.normalizeStatus)return window.PicksDOMUtils.normalizeStatus(a);if(!a)return"";const e=a.toString().toLowerCase().trim();return{win:"win",won:"win",winner:"win",loss:"loss",lost:"loss",lose:"loss",loser:"loss",push:"push",tie:"push",void:"void",voided:"void",cancelled:"void",pending:"pending",open:"pending",live:"live","in-progress":"live","in progress":"live",active:"live"}[e]||e},detectBetType(a){const e=this.getCell(a,"pick",3);if(!e)return{type:"",subtype:""};const t=(e.textContent||"").toLowerCase(),s=e.querySelector("[data-bet-type]");if(s){const o=s.getAttribute("data-bet-type").toLowerCase(),r=s.getAttribute("data-bet-subtype")||"";return{type:o,subtype:r.toLowerCase()}}return t.includes("spread")||t.includes("+")||t.includes("-")?t.includes("1st")||t.includes("first")?{type:"spread",subtype:"1h"}:t.includes("2nd")||t.includes("second")?{type:"spread",subtype:"2h"}:{type:"spread",subtype:"game"}:t.includes("total")||t.includes("over")||t.includes("under")?t.includes("1st")||t.includes("first")?{type:"total",subtype:"1h"}:t.includes("2nd")||t.includes("second")?{type:"total",subtype:"2h"}:{type:"total",subtype:"game"}:t.includes("moneyline")||t.includes("ml")?t.includes("1st")||t.includes("first")?{type:"moneyline",subtype:"1h"}:t.includes("2nd")||t.includes("second")?{type:"moneyline",subtype:"2h"}:{type:"moneyline",subtype:"game"}:t.includes("parlay")?{type:"parlay",subtype:""}:t.includes("prop")||t.includes("player")?{type:"prop",subtype:""}:{type:"",subtype:""}},detectSegment(a){const e=this.getCell(a,"segment",4);if(!e)return"game";const t=e.querySelector(".game-segment");if(t&&t.getAttribute("data-segment"))return t.getAttribute("data-segment").toLowerCase();const s=e.textContent.trim().toLowerCase();return s.includes("1st")||s.includes("1h")||s.includes("1q")?"1h":s.includes("2nd")||s.includes("2h")||s.includes("2q")?"2h":"game"},valueMatchesRangeList(a,e){return!a||a.length===0||e===null?!1:a.some(t=>{const[s,o]=t.split("-").map(r=>parseFloat(r));return e>=s&&e<=o})},passesDateFilter(a){const e=window.tableState.filters.date;if(!e.selectedDates&&!e.selectedTimes&&!e.selectedBooks&&!e.start&&!e.end)return!0;const{date:t,time:s,book:o}=this.getDateTimeParts(a);if(e.selectedDates&&e.selectedDates.length>0){const r=this.normalizeFilterValue(t);if(!e.selectedDates.some(d=>r.includes(this.normalizeFilterValue(d))))return!1}if(e.selectedTimes&&e.selectedTimes.length>0){const r=this.normalizeFilterValue(s);if(!e.selectedTimes.some(d=>r.includes(this.normalizeFilterValue(d))))return!1}if(e.selectedBooks&&e.selectedBooks.length>0){const r=this.normalizeFilterValue(o);if(!e.selectedBooks.some(d=>r.includes(this.normalizeFilterValue(d))))return!1}return!0},passesMatchupFilter(a){const e=window.tableState.filters.matchup;if(e.ticketType&&e.ticketType!=="all"){const t=a.classList.contains("parlay-row");if(e.ticketType==="single"&&t||e.ticketType==="parlay"&&!t)return!1}if(e.league&&!this.getMatchupValue(a).includes(e.league.toLowerCase()))return!1;if(e.selectedTeams&&e.selectedTeams.length>0){const t=this.getMatchupValue(a);if(!e.selectedTeams.some(o=>t.includes(o.toLowerCase())))return!1}return!0},passesPickFilter(a){const e=window.tableState.filters.pick;if(e.betType||e.subtype){const t=this.detectBetType(a);if(e.betType&&t.type!==e.betType.toLowerCase()||e.subtype&&t.subtype!==e.subtype.toLowerCase())return!1}return!(e.segment&&this.detectSegment(a)!==e.segment.toLowerCase())},passesRiskFilter(a){const e=window.tableState.filters.risk;if(e.selectedRiskRanges&&e.selectedRiskRanges.length>0){const t=this.getRiskValue(a);if(!this.valueMatchesRangeList(e.selectedRiskRanges,t))return!1}if(e.selectedWinRanges&&e.selectedWinRanges.length>0){const t=this.getWinValue(a);if(!this.valueMatchesRangeList(e.selectedWinRanges,t))return!1}if(e.min!==null||e.max!==null){const t=this.getRiskValue(a);if(e.min!==null&&t<e.min||e.max!==null&&t>e.max)return!1}return!0},passesStatusFilter(a){const e=window.tableState.filters.status;if(!e||e.length===0)return!0;const t=this.normalizeStatus(this.getStatusValue(a));return e.some(s=>this.normalizeStatus(s)===t)},passesAllFilters(a){const e=window.tableState?.filters;if(!e)return!0;if(e.search&&!a.textContent.toLowerCase().includes(e.search))return!1;if(e.date){const{start:t,end:s}=e.date;if(t&&s){const o=a.getAttribute("data-epoch");if(o){const r=parseInt(o,10);if(!isNaN(r)){const c=new Date(r*1e3),d=new Date(t);d.setHours(0,0,0,0);const u=new Date(s);if(u.setHours(23,59,59,999),c<d||c>u)return!1}}}}if(e.matchup?.league){if((a.getAttribute("data-league")||"").toLowerCase()!==e.matchup.league.toLowerCase())return!1}else if(e.matchup?.selectedLeagues?.length>0){const t=(a.getAttribute("data-league")||"").toLowerCase();if(!e.matchup.selectedLeagues.map(o=>o.toLowerCase()).includes(t))return!1}if(e.pick?.segment){const t=(a.getAttribute("data-segment")||"").toLowerCase();let s=t;if(t==="full game"&&(s="full"),s!==e.pick.segment.toLowerCase())return!1}else if(e.pick?.selectedSegments?.length>0){const t=(a.getAttribute("data-segment")||"").toLowerCase();let s=t;if(t==="full game"&&(s="full"),!e.pick.selectedSegments.map(r=>r.toLowerCase()).includes(s))return!1}return!0},applyFilters:function(){let a=null;return function(){!a&&window.SharedUtils?.debounce&&(a=window.SharedUtils.debounce(function(){window.PicksTableRenderer&&window.PicksTableRenderer.updateTable()},150)),a?a():window.PicksTableRenderer?window.PicksTableRenderer.updateTable():console.warn("PicksTableRenderer not loaded")}}(),applyFilter(a,e={}){switch(a){case"date":this.syncDateFilterStateFromUI();break;case"matchup":this.syncMatchupFilterStateFromUI();break;case"pick":this.syncPickFilterStateFromUI();break;case"risk":this.syncRiskFilterStateFromUI();break;case"status":this.syncStatusFilterStateFromUI();break;case"league":this.syncLeagueFilterStateFromUI();break;case"segment":this.syncSegmentFilterStateFromUI();break}if(this.applyFilters(),window.PicksTableRenderer){const t=this.countVisibleRows();window.PicksTableRenderer.announceFilterChange(`Filter applied. ${t} rows visible.`)}},resetFilter(a){window.PicksStateManager&&window.PicksStateManager.resetFilter(a),this.clearFilterUI(a),this.applyFilters()},clearFilterByChip(a,e){if(a==="date"&&e){const t=this.DATE_FILTER_GROUP_MAP[e];t&&(window.tableState.filters.date[t]=null)}else this.resetFilter(a);this.applyFilters()},syncDateFilterStateFromUI(){const a=document.getElementById("date-filter-options");if(!a)return;const e=a.querySelectorAll('input[type="checkbox"]:checked'),t={dates:[],times:[],books:[]};e.forEach(s=>{if(s.id==="date-select-all")return;const o=s.getAttribute("data-group"),r=s.value;o&&r&&t[o]&&t[o].push(r)}),window.tableState.filters.date.selectedDates=t.dates.length>0?t.dates:null,window.tableState.filters.date.selectedTimes=t.times.length>0?t.times:null,window.tableState.filters.date.selectedBooks=t.books.length>0?t.books:null},syncMatchupFilterStateFromUI(){const a=document.querySelectorAll('#teams-list input[type="checkbox"]:not(#teams-select-all)'),e=Array.from(a).filter(t=>t.checked).map(t=>t.value);window.tableState.filters.matchup.selectedTeams=e.length>0?e:null},syncPickFilterStateFromUI(){const a=document.getElementById("bet-type-select"),e=document.getElementById("subtype-select"),t=document.getElementById("segment-select");a&&(window.tableState.filters.pick.betType=a.value),e&&(window.tableState.filters.pick.subtype=e.value),t&&(window.tableState.filters.pick.segment=t.value)},syncRiskFilterStateFromUI(){const a=document.getElementById("risk-ranges"),e=document.getElementById("win-ranges");if(a){const t=a.querySelectorAll('input[type="checkbox"]:checked'),s=Array.from(t).map(o=>o.value);window.tableState.filters.risk.selectedRiskRanges=s}if(e){const t=e.querySelectorAll('input[type="checkbox"]:checked'),s=Array.from(t).map(o=>o.value);window.tableState.filters.risk.selectedWinRanges=s}},syncStatusFilterStateFromUI(){const a=document.getElementById("status-filter-options");if(!a)return;const e=a.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(e).map(s=>s.value);window.tableState.filters.status=t},syncLeagueFilterStateFromUI(){const a=document.getElementById("league-options");if(!a)return;const e=a.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(e).map(o=>o.value),s=a.querySelectorAll('input[type="checkbox"]');t.length===s.length?window.tableState.filters.matchup.league=null:t.length===1?window.tableState.filters.matchup.league=t[0]:t.length>0?(window.tableState.filters.matchup.selectedLeagues=t,window.tableState.filters.matchup.league=null):(window.tableState.filters.matchup.league=null,window.tableState.filters.matchup.selectedLeagues=null)},syncSegmentFilterStateFromUI(){const a=document.getElementById("segment-options");if(!a)return;const e=a.querySelectorAll('input[type="checkbox"]:checked'),t=Array.from(e).map(o=>o.value),s=a.querySelectorAll('input[type="checkbox"]');t.length===s.length?window.tableState.filters.pick.segment=null:t.length===1?window.tableState.filters.pick.segment=t[0]:t.length>0?(window.tableState.filters.pick.selectedSegments=t,window.tableState.filters.pick.segment=null):(window.tableState.filters.pick.segment=null,window.tableState.filters.pick.selectedSegments=null)},clearFilterUI(a){switch(a){case"date":document.querySelectorAll('#date-filter-options input[type="checkbox"]').forEach(k=>k.checked=!1);break;case"matchup":const t=document.getElementById("league-select");t&&(t.value=""),document.querySelectorAll('#teams-list input[type="checkbox"]').forEach(k=>k.checked=!1);break;case"pick":const o=document.getElementById("bet-type-select");o&&(o.value="");const r=document.getElementById("subtype-select");r&&(r.value="");const c=document.getElementById("segment-select");c&&(c.value="");break;case"risk":document.querySelectorAll('#risk-ranges input[type="checkbox"], #win-ranges input[type="checkbox"]').forEach(k=>k.checked=!1);break;case"status":document.querySelectorAll('#status-filter-options input[type="checkbox"]').forEach(k=>k.checked=!1);break;case"league":document.querySelectorAll('#league-options input[type="checkbox"]').forEach(k=>k.checked=!0);break;case"segment":document.querySelectorAll('#segment-options input[type="checkbox"]').forEach(k=>k.checked=!0);break}},countVisibleRows(){const a=document.getElementById("picks-tbody");if(!a)return 0;const e=a.querySelectorAll("tr:not(.parlay-legs)");return Array.from(e).filter(t=>t.style.display!=="none").length}};window.PicksFilterManager=n}(),function(){"use strict";const n={getColumnIndex(a,e){return window.PicksDOMUtils?.getColumnIndex?window.PicksDOMUtils.getColumnIndex(a,e):null},getCell(a,e,t){if(window.PicksDOMUtils?.getCell)return window.PicksDOMUtils.getCell(a,e,t);const s=t||null;return s?a.querySelector(`td:nth-child(${s})`):null},getDateSortValue(a){if(!a)return 0;const t=a.replace(/^(mon|tue|wed|thu|fri|sat|sun)\s+/i,"").split("/");if(t.length===2){const s=parseInt(t[0],10)||0,o=parseInt(t[1],10)||0,r=new Date,c=r.getMonth()+1,d=r.getFullYear();let u=d;return c>=11&&s<=2?u=d+1:c<=2&&s>=11&&(u=d-1),new Date(u,s-1,o).getTime()}return 0},getTimeSortValue(a){if(!a)return 0;const e=a.match(/(\d{1,2}):(\d{2})\s*(am|pm)?/i);if(e){let t=parseInt(e[1],10);const s=parseInt(e[2],10),o=e[3]?e[3].toLowerCase():"";return o==="pm"&&t!==12?t+=12:o==="am"&&t===12&&(t=0),t*60+s}return 0},getSortValue(a,e){switch(e){case"date":{const t=a.querySelector("td:first-child");if(!t)return 0;const s=t.querySelector(".cell-date"),o=t.querySelector(".cell-time"),r=this.getDateSortValue(s?s.textContent:""),c=this.getTimeSortValue(o?o.textContent:"");return r+c/1440}case"league":{const t=this.getCell(a,"league");return t?t.textContent.trim().toLowerCase():""}case"matchup":{const t=this.getCell(a,"matchup",2);return t?t.textContent.trim().toLowerCase():""}case"pick":{const t=this.getCell(a,"pick",3);return t?t.textContent.trim().toLowerCase():""}case"segment":{const t=this.getCell(a,"segment",4);return t?t.textContent.trim().toLowerCase():""}case"risk":{const t=this.getCell(a,"risk",5);if(!t)return 0;const s=t.querySelector(".risk-amount");if(!s)return 0;const o=s.textContent.replace(/[$,]/g,"").trim();return parseFloat(o)||0}case"win":{const t=this.getCell(a,"risk",5);if(!t)return 0;const s=t.querySelector(".win-amount");if(!s)return 0;const o=s.textContent.replace(/[$,]/g,"").trim();return parseFloat(o)||0}case"status":{const t=this.getCell(a,"status")||a.querySelector("td:last-child");if(!t)return 0;const s=t.querySelector(".status-badge");if(s){const o=s.getAttribute("data-status")||s.className.match(/status-(\w+)/)?.[1]||s.textContent.trim();return this.getStatusSortPriority(o)}return this.getStatusSortPriority(t.textContent.trim().toLowerCase())}case"profit":{const t=a.querySelector("td:last-child");if(!t)return 0;const s=t.querySelector(".profit-amount");if(!s)return 0;const o=s.textContent.replace(/[$,]/g,"").trim();return parseFloat(o)||0}case"score":{const t=a.getAttribute("data-epoch");return t?parseInt(t,10):0}default:return""}},getStatusSortPriority(a){const e={live:1,"in-progress":1,active:1,pending:2,open:2,win:3,won:3,loss:4,lost:4,push:5,tie:5,void:6,voided:6,cancelled:6},t=a.toString().toLowerCase();return e[t]||99},applySorting(a){const e=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort;return e.column?[...a].sort((s,o)=>{const r=this.getSortValue(s,e.column),c=this.getSortValue(o,e.column);if(typeof r=="number"&&typeof c=="number")return e.direction==="asc"?r-c:c-r;const d=r.toString(),u=c.toString();return e.direction==="asc"?d.localeCompare(u):u.localeCompare(d)}):a},handleHeaderClick(a){const e=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort;if(e.column===a){const t=e.direction==="asc"?"desc":"asc";this.updateSort(a,t)}else this.updateSort(a,"asc");window.PicksTableRenderer&&window.PicksTableRenderer.updateTable(),this.updateSortIndicators()},updateSort(a,e){window.PicksStateManager?window.PicksStateManager.updateSort(a,e):window.tableState.sort={column:a,direction:e}},resetSorting(){window.PicksStateManager?window.PicksStateManager.resetSort():window.tableState.sort={column:null,direction:"asc"},this.updateSortIndicators(),window.PicksTableRenderer&&window.PicksTableRenderer.updateTable()},SORT_ICONS:{unsorted:"\u25B2",asc:"\u25B2",desc:"\u25BC"},updateSortIndicators(){const a=window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState?.sort;if(document.querySelectorAll("th[data-sort]").forEach(r=>{r.classList.remove("sorted-asc","sorted-desc","sort-asc","sort-desc"),r.setAttribute("aria-sort","none");const c=r.querySelector(".sort-icon");c&&(c.textContent=this.SORT_ICONS.unsorted)}),!a?.column)return;const t=document.querySelector(`th[data-sort="${a.column}"]`);if(!t)return;const s=a.direction==="desc";t.classList.add(s?"sorted-desc":"sorted-asc"),t.setAttribute("aria-sort",s?"descending":"ascending");const o=t.querySelector(".sort-icon");o&&(o.textContent=s?this.SORT_ICONS.desc:this.SORT_ICONS.asc)},initSorting(){document.querySelectorAll(".th-sort-btn").forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();const s=e.closest("th");if(!s)return;const o=s.getAttribute("data-sort");o&&this.handleHeaderClick(o)})}),this.updateSortIndicators()}};window.PicksSortManager=n}(),function(){"use strict";const n={getParentRowsOnly(e){return e?Array.from(e.children).filter(t=>t&&t.tagName==="TR"&&!t.classList.contains("parlay-legs")):[]},getDirectChildRows(e){return e?Array.from(e.children).filter(t=>t&&t.tagName==="TR"):[]},isRowVisibleForZebra(e){return!(!e||e.style.display==="none")},applyZebraStripes(){if(window.ZebraStripes&&typeof window.ZebraStripes.applyPicksTableZebraStripes=="function"){window.ZebraStripes.applyPicksTableZebraStripes();return}const e=document.getElementById("picks-tbody");if(!e)return;this.getParentRowsOnly(e).filter(s=>this.isRowVisibleForZebra(s)).forEach((s,o)=>{const r=o%2===0?"zebra-even":"zebra-odd",c=o%2===0?"zebra-odd":"zebra-even";if(s.classList.remove(c),s.classList.add(r),s.classList.add("zebra-row"),window.PicksParlayManager){const d=window.PicksParlayManager.findParlayLegsRow(s);d&&(d.classList.remove(c),d.classList.add(r),d.classList.add("zebra-row"))}})},updateTable(){const e=document.getElementById("picks-tbody");if(!e)return;let t=this.getParentRowsOnly(e);(window.PicksStateManager?window.PicksStateManager.getSortState():window.tableState.sort).column&&(t=window.PicksSortManager?window.PicksSortManager.applySorting(t):t,t.forEach(o=>{e.appendChild(o),window.PicksParlayManager&&o.classList.contains("parlay-row")&&window.PicksParlayManager.ensureLegRowPosition(o)})),this.applyFiltersToRows(t),window.PicksParlayManager&&window.PicksParlayManager.refreshAllParlayVisibility(),this.applyZebraStripes(),this.renderFilterChips()},applyFiltersToRows(e){if(!e){const t=document.getElementById("picks-tbody");e=this.getParentRowsOnly(t)}e.forEach(t=>{const s=window.DashboardFilterPills?.passesAllFilters?window.DashboardFilterPills.passesAllFilters(t):window.PicksFilterManager?window.PicksFilterManager.passesAllFilters(t):!0;if(t.style.display=s?"":"none",window.PicksParlayManager&&t.classList.contains("parlay-row")){const o=window.PicksParlayManager.findParlayLegsRow(t);if(o)if(!s)o.style.display="none";else{const r=t.getAttribute("data-row-id"),c=window.PicksStateManager?window.PicksStateManager.isParlayExpanded(r):t.getAttribute("aria-expanded")==="true";o.style.display=c?"table-row":"none"}}})},renderFilterChips(){const e=document.querySelector(".filter-chips")||document.getElementById("filter-chips-container");if(!e)return;e.innerHTML="";const s=(window.PicksStateManager?window.PicksStateManager.getState():window.tableState).filters,o=[];if(s.date.selectedDates&&s.date.selectedDates.length>0&&o.push({type:"date",subtype:"dates",label:`Dates: ${s.date.selectedDates.length} selected`,value:s.date.selectedDates}),s.date.selectedTimes&&s.date.selectedTimes.length>0&&o.push({type:"date",subtype:"times",label:`Times: ${s.date.selectedTimes.length} selected`,value:s.date.selectedTimes}),s.date.selectedBooks&&s.date.selectedBooks.length>0&&o.push({type:"date",subtype:"books",label:`Books: ${s.date.selectedBooks.length} selected`,value:s.date.selectedBooks}),s.matchup.league||s.matchup.selectedTeams){const r=s.matchup.selectedTeams?`Teams: ${s.matchup.selectedTeams.length} selected`:`League: ${s.matchup.league}`;o.push({type:"matchup",label:r,value:s.matchup})}if(s.pick.betType||s.pick.subtype){const r=[];s.pick.betType&&r.push(s.pick.betType),s.pick.subtype&&r.push(s.pick.subtype),o.push({type:"pick",label:`Pick: ${r.join(" - ")}`,value:s.pick})}if(s.pick.segment&&o.push({type:"segment",label:`Segment: ${s.pick.segment}`,value:s.pick.segment}),s.risk.selectedRiskRanges&&s.risk.selectedRiskRanges.length>0&&o.push({type:"risk",label:`Risk: ${s.risk.selectedRiskRanges.length} ranges`,value:s.risk.selectedRiskRanges}),s.risk.selectedWinRanges&&s.risk.selectedWinRanges.length>0&&o.push({type:"win",label:`Win: ${s.risk.selectedWinRanges.length} ranges`,value:s.risk.selectedWinRanges}),s.status&&s.status.length>0&&o.push({type:"status",label:`Status: ${s.status.join(", ")}`,value:s.status}),o.forEach(r=>{const c=document.createElement("div");c.className="filter-chip",c.setAttribute("data-filter-type",r.type),r.subtype&&c.setAttribute("data-filter-subtype",r.subtype);const d=document.createElement("span");d.className="filter-chip-label",d.textContent=r.label;const u=document.createElement("button");u.className="filter-chip-remove",u.innerHTML="&times;",u.setAttribute("aria-label",`Remove ${r.label} filter`),u.onclick=()=>this.removeFilterChip(r.type,r.subtype),c.appendChild(d),c.appendChild(u),e.appendChild(c)}),o.length>0){const r=document.createElement("button");r.className="clear-all-filters",r.textContent="Clear All",r.onclick=()=>this.clearAllFilters(),e.appendChild(r)}},removeFilterChip(e,t){window.PicksFilterManager?window.PicksFilterManager.clearFilterByChip(e,t):console.warn("PicksFilterManager not loaded")},clearAllFilters(){window.PicksStateManager&&window.PicksStateManager.resetAllFilters(),this.updateTable()},updateFilterIndicators(){const e={"date-filter-btn":window.tableState.filters.date.selectedDates||window.tableState.filters.date.selectedTimes||window.tableState.filters.date.selectedBooks,"matchup-filter-btn":window.tableState.filters.matchup.league||window.tableState.filters.matchup.selectedTeams,"pick-filter-btn":window.tableState.filters.pick.betType||window.tableState.filters.pick.subtype,"risk-filter-btn":window.tableState.filters.risk.selectedRiskRanges?.length>0||window.tableState.filters.risk.selectedWinRanges?.length>0,"status-filter-btn":window.tableState.filters.status?.length>0};Object.entries(e).forEach(([o,r])=>{const c=document.getElementById(o);if(!c)return;const d=c.querySelector(".filter-indicator")||c.querySelector(".indicator");r?(c.classList.add("has-filter"),d&&(d.style.display="inline-block")):(c.classList.remove("has-filter"),d&&(d.style.display="none"))});const t=window.PicksStateManager?window.PicksStateManager.getActiveFilterCount():0,s=document.getElementById("active-filter-count");s&&(s.textContent=t>0?`(${t})`:"")},announceFilterChange(e){let t=document.getElementById("filter-announcer");t||(t=document.createElement("div"),t.id="filter-announcer",t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.style.width="1px",t.style.height="1px",t.style.overflow="hidden",document.body.appendChild(t)),t.textContent=e},refresh(){this.updateTable(),this.updateFilterIndicators()}};let a;n.debouncedZebraStripes=function(){clearTimeout(a),a=setTimeout(()=>{n.applyZebraStripes()},50)},window.PicksTableRenderer=n}();function parseScoreFromResult(n){if(!n)return{away:null,home:null};const a=/(\d+)\s*-\s*(\d+)/,e=n.match(a);return e?{away:parseInt(e[1]),home:parseInt(e[2])}:{away:null,home:null}}function normalizeStatus(n){const a=(n||"").toString().toLowerCase();return a==="lost"?"loss":a}function calculateKPIs(n){(!n||!Array.isArray(n))&&(n=[]);const a={activePicks:0,activeRisk:0,toWin:0,onTrackAmount:0,atRiskAmount:0,projected:0,netProfit:0,totalWon:0,totalLost:0,wins:0,losses:0,pushes:0,roePercentage:0,winPercentage:0,currentStreak:"",totalRisk:0,topLeague:{name:"N/A",winRate:0},topBetType:{name:"N/A",winRate:0},topSegment:{name:"N/A",winRate:0},topSportsbook:{name:"N/A",winRate:0}},e={},t={},s={},o={};n.forEach(d=>{const u=d.risk!=null?String(d.risk).replace(/,/g,""):"0",S=d.win!=null?String(d.win).replace(/,/g,""):"0",x=parseFloat(u)||0,k=parseFloat(S)||0,R=normalizeStatus(d.status),H=R==="loss";(R==="pending"||R==="live"||R==="on-track"||R==="at-risk")&&(a.activePicks++,a.toWin+=k,a.activeRisk+=x,R==="on-track"?a.onTrackAmount+=k:R==="at-risk"?a.atRiskAmount+=x:R==="pending"&&(a.onTrackAmount+=k*.5,a.atRiskAmount+=x*.5)),R==="win"&&(a.wins++,a.totalWon+=k,trackWin(e,d.league||"Unknown"),trackWin(t,d.pickType||"Unknown"),trackWin(s,d.segment||"Full Game"),trackWin(o,d.book||"Unknown")),H&&(a.losses++,a.totalLost+=x,trackLoss(e,d.league||"Unknown"),trackLoss(t,d.pickType||"Unknown"),trackLoss(s,d.segment||"Full Game"),trackLoss(o,d.book||"Unknown")),R==="push"&&a.pushes++,a.totalRisk+=x}),a.projected=a.toWin-a.activeRisk,a.netProfit=a.totalWon-a.totalLost;const r=a.wins+a.losses+a.pushes,c=a.wins+a.losses;return c>0?a.winPercentage=(a.wins/c*100).toFixed(1):a.winPercentage="0.0",a.totalRisk>0?a.roePercentage=(a.netProfit/a.totalRisk*100).toFixed(1):a.roePercentage="0.0",a.currentStreak=calculateStreak(n),a.topLeague=findTopPerformer(e),a.topBetType=findTopPerformer(t),a.topSegment=findTopPerformer(s),a.topSportsbook=findTopPerformer(o),a}function trackWin(n,a){n[a]||(n[a]={wins:0,losses:0}),n[a].wins++}function trackLoss(n,a){n[a]||(n[a]={wins:0,losses:0}),n[a].losses++}function findTopPerformer(n){let a="N/A",e=0;for(const[t,s]of Object.entries(n)){const o=s.wins+s.losses;if(o>=3){const r=s.wins/o*100;r>e&&(e=r,a=t)}}return{name:a,winRate:e.toFixed(1)}}function calculateStreak(n){const a=n.filter(s=>{const o=normalizeStatus(s.status);return o==="win"||o==="loss"}).reverse();if(a.length===0)return"W0";let e=1;const t=normalizeStatus(a[0].status);for(let s=1;s<a.length&&normalizeStatus(a[s].status)===t;s++)e++;return t==="win"?`W${e}`:`L${e}`}function updateKPITiles(n){const a=document.querySelector('[data-tile-id="1"]');if(a){const s=a.querySelectorAll(".kpi-tile-layer");if(s[0]){const o=s[0].querySelector(".kpi-value"),r=s[0].querySelector(".kpi-subtext");if(o){const c=n.projected>=0?"+":"";o.textContent=`${c}$${Math.abs(n.projected).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,o.classList.remove("positive","negative"),n.projected>0?o.classList.add("positive"):n.projected<0&&o.classList.add("negative")}r&&(r.textContent=`${n.activePicks} Active Picks`)}if(s[1]){const o=s[1].querySelector(".kpi-value"),r=s[1].querySelector(".kpi-subtext");if(o){const c=n.netProfit>=0?"+":"";o.textContent=`${c}$${Math.abs(n.netProfit).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,o.classList.remove("positive","negative"),n.netProfit>0?o.classList.add("positive"):n.netProfit<0&&o.classList.add("negative")}r&&(r.textContent="Season Total")}}const e=document.querySelector('[data-tile-id="2"]');if(e){const s=e.querySelectorAll(".kpi-tile-layer");if(s[0]){const o=s[0].querySelector(".kpi-value"),r=s[0].querySelector(".kpi-subtext");o&&(o.textContent=`${n.winPercentage}%`),r&&(r.textContent=`${n.wins}-${n.losses}-${n.pushes} Record`)}if(s[1]){const o=s[1].querySelector(".kpi-value"),r=s[1].querySelector(".kpi-subtext");if(o){const c=parseFloat(n.roePercentage)>=0?"+":"";o.textContent=`${c}${n.roePercentage}%`,o.classList.remove("positive","negative"),parseFloat(n.roePercentage)>0?o.classList.add("positive"):parseFloat(n.roePercentage)<0&&o.classList.add("negative")}r&&(r.textContent="Return on Equity")}}const t=document.querySelector('[data-tile-id="3"]');if(t){const s=t.querySelectorAll(".kpi-tile-layer");if(s[0]){const o=s[0].querySelector(".kpi-value"),r=s[0].querySelector(".kpi-subtext");o&&(o.textContent=`$${n.activeRisk.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`),r&&(r.textContent="Total at Risk")}if(s[1]){const o=s[1].querySelector(".kpi-value"),r=s[1].querySelector(".kpi-subtext");o&&(o.textContent=`$${n.toWin.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,o.classList.add("positive")),r&&(r.textContent="Potential Payout")}}}window.calculateKPIs=calculateKPIs,window.updateKPITiles=updateKPITiles,window.parseScoreFromResult=parseScoreFromResult,typeof module<"u"&&module.exports&&(module.exports={calculateKPIs,parseScoreFromResult,normalizeStatus});const PicksService=function(){"use strict";const e=`${window.GBSV_CONFIG?.FUNCTIONS_URL||window.APP_CONFIG?.FUNCTIONS_BASE_URL||(window.APP_CONFIG?.API_BASE_URL?window.APP_CONFIG.API_BASE_URL.replace(/\/api$/,""):"")||window.APP_CONFIG?.API_BASE_FALLBACK||window.location.origin}/picks`;let t=null,s=null;const o=3e4;async function r(p,m={}){const h=p.startsWith("http")?p:`${e}${p}`,C={method:m.method||"GET",headers:{"Content-Type":"application/json",...m.headers},...m};m.body&&typeof m.body=="object"&&(C.body=JSON.stringify(m.body));try{const I=await fetch(h,C),G=await I.json();if(!I.ok)throw new Error(G.error||`API error: ${I.status}`);return G}catch(I){throw console.error("[PicksService] API request failed:",I),I}}function c(){t=null,s=null}async function d(p={}){const m=new URLSearchParams;Object.entries(p).forEach(([C,I])=>{I!=null&&I!==""&&m.append(C,I)});const h=m.toString()?`?${m}`:"";try{return(await r(h)).picks||[]}catch(C){return console.error("[PicksService] Failed to get picks:",C),[]}}async function u(){try{return(await r("/active")).picks||[]}catch(p){return console.error("[PicksService] Failed to get active picks:",p),[]}}async function S(){try{return(await r("/settled")).picks||[]}catch(p){return console.error("[PicksService] Failed to get settled picks:",p),[]}}async function x(p){try{return(await r(`/${p}`)).pick||null}catch(m){if(m.message.includes("404"))return null;throw m}}async function k(p){return d({league:p.toUpperCase()})}async function R(p){return d({date:p})}async function H(p,m){return d({from:p,to:m})}async function y(){const p=new Date().toISOString().split("T")[0];return R(p)}async function $(p){c();const m=Array.isArray(p)?p:[p];try{const h=await r("",{method:"POST",body:m});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"create",count:h.created||m.length}})),h}catch(h){throw console.error("[PicksService] Failed to create picks:",h),h}}async function E(p,m){c();try{const h=await r(`/${p}`,{method:"PATCH",body:m});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"update",id:p}})),h.pick}catch(h){throw console.error("[PicksService] Failed to update pick:",h),h}}async function D(p,m,h={}){return E(p,{status:m,...h})}async function F(p,m=0){return E(p,{status:"won",result:"WIN",pnl:m})}async function T(p,m=0){return E(p,{status:"lost",result:"LOSS",pnl:-Math.abs(m)})}async function M(p){return E(p,{status:"push",result:"PUSH",pnl:0})}async function O(p){c();try{return await r(`/${p}`,{method:"DELETE"}),window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"delete",id:p}})),!0}catch(m){throw console.error("[PicksService] Failed to delete pick:",m),m}}async function j(p=!1){if(!p)throw new Error("Must pass confirm=true to clear all picks");c();try{const m=await r("/clear",{method:"DELETE",headers:{"x-confirm-clear":"true"}});return window.dispatchEvent(new CustomEvent("picksUpdated",{detail:{action:"clearAll",deleted:m.deleted}})),m}catch(m){throw console.error("[PicksService] Failed to clear picks:",m),m}}async function v(p=null){p||(p=await d());const m={total:p.length,pending:0,live:0,won:0,lost:0,push:0,totalRisk:0,totalPnl:0,byLeague:{}};return p.forEach(h=>{const C=(h.status||"pending").toLowerCase();C==="pending"?m.pending++:C==="live"||C==="on-track"||C==="at-risk"?m.live++:C==="won"||C==="win"?m.won++:C==="lost"||C==="loss"?m.lost++:C==="push"&&m.push++,m.totalRisk+=parseFloat(h.risk)||0,m.totalPnl+=parseFloat(h.pnl)||0;const I=h.league||"Unknown";m.byLeague[I]||(m.byLeague[I]={total:0,won:0,lost:0,pnl:0}),m.byLeague[I].total++,(C==="won"||C==="win")&&m.byLeague[I].won++,(C==="lost"||C==="loss")&&m.byLeague[I].lost++,m.byLeague[I].pnl+=parseFloat(h.pnl)||0}),m.winRate=m.won+m.lost>0?(m.won/(m.won+m.lost)*100).toFixed(1)+"%":"N/A",m}async function A(){const p="gbsv_picks";try{const m=localStorage.getItem(p);if(!m)return{success:!0,migrated:0,message:"No local picks to migrate"};const h=JSON.parse(m);if(!Array.isArray(h)||h.length===0)return{success:!0,migrated:0,message:"No local picks to migrate"};console.log(`[PicksService] Migrating ${h.length} picks from localStorage to Azure...`);const C=await $(h);return C.success?(localStorage.setItem(`${p}_backup_${Date.now()}`,m),localStorage.removeItem(p),console.log(`[PicksService] Migration complete: ${C.created} picks migrated`),{success:!0,migrated:C.created,errors:C.errors,message:`Successfully migrated ${C.created} picks to Azure`}):{success:!1,migrated:0,error:"Migration failed"}}catch(m){return console.error("[PicksService] Migration failed:",m),{success:!1,migrated:0,error:m.message}}}function L(){const p="gbsv_picks";try{const m=localStorage.getItem(p);if(!m)return{needed:!1,count:0};const h=JSON.parse(m);return{needed:Array.isArray(h)&&h.length>0,count:Array.isArray(h)?h.length:0}}catch{return{needed:!1,count:0}}}return{getAll:d,getActive:u,getSettled:S,getById:x,create:$,update:E,remove:O,clearAll:j,getByLeague:k,getByDate:R,getByDateRange:H,getToday:y,updateStatus:D,markWon:F,markLost:T,markPush:M,getSummary:v,migrateFromLocalStorage:A,checkMigrationNeeded:L,invalidateCache:c}}();typeof module<"u"&&module.exports&&(module.exports=PicksService),window.PicksService=PicksService;const LEAGUE_REGISTRY={nfl:{teams:["bills","patriots","jets","dolphins","ravens","bengals","browns","steelers","jaguars","colts","titans","texans","chiefs","chargers","raiders","broncos","cowboys","eagles","giants","commanders","packers","vikings","lions","bears","saints","buccaneers","falcons","panthers","49ers","rams","seahawks","cardinals"],logoPath:"team-logos/nfl-500-",display:"NFL",color:"#1d3557"},nba:{teams:["suns","clippers","lakers","warriors","celtics","heat","knicks","spurs","mavericks","76ers","nets","kings","grizzlies","rockets","timberwolves","nuggets","pelicans","trail blazers","jazz","bucks","cavaliers","hawks","raptors","pacers","pistons","bulls","hornets"],logoPath:"team-logos/nba-500-",display:"NBA",color:"#0a2342"},ncaab:{teams:["georgia southern","appalachian st","appalachian state","uconn","connecticut","butler","abilene","oral roberts","marist","georgia tech","east tenn","north carolina","unc","duke","missouri st"],logoPath:"team-logos/ncaam-500-",display:"NCAAM",color:"#264653"},ncaaf:{teams:["utsa","south florida","cal poly","montana st","arizona"],logoPath:"team-logos/ncaaf-500-",display:"NCAAF",color:"#2a9d8f"}},TEAM_MAP={bills:{full:"Buffalo Bills",abbr:"BUF",logo:"bills",league:"nfl"},jaguars:{full:"Jacksonville Jaguars",abbr:"JAX",logo:"jaguars",league:"nfl"},patriots:{full:"New England Patriots",abbr:"NE",logo:"patriots",league:"nfl"},jets:{full:"New York Jets",abbr:"NYJ",logo:"jets",league:"nfl"},dolphins:{full:"Miami Dolphins",abbr:"MIA",logo:"dolphins",league:"nfl"},suns:{full:"Phoenix Suns",abbr:"PHX",logo:"suns",league:"nba"},clippers:{full:"Los Angeles Clippers",abbr:"LAC",logo:"clippers",league:"nba"},"georgia southern":{full:"Georgia Southern",abbr:"GASO",logo:"georgia_southern",league:"ncaab"},utsa:{full:"UTSA",abbr:"UTSA",logo:"utsa",league:"ncaaf"}};function getTeamInfo(n){return TEAM_MAP[n?.toLowerCase()]||{full:n,abbr:n,logo:n,league:null}}function detectLeagueFromTeams(n,a,e){const t=(n||"").toLowerCase(),s=(a||"").toLowerCase(),o=(e||"").toLowerCase(),r=`${s} ${o}`.toLowerCase();return NBA_TEAMS.some(c=>r.includes(c))?"nba":NFL_TEAMS.some(c=>r.includes(c))?"nfl":COLLEGE_BASKETBALL_TEAMS.some(c=>r.includes(c))?"ncaab":COLLEGE_FOOTBALL_TEAMS.some(c=>r.includes(c))?"ncaaf":"nfl"}let teamRecordsCache=null,teamRecordsPromise=null;const globalScope=typeof window<"u"?window:globalThis;globalScope&&typeof globalScope.__TEAM_RECORDS_PROMISE__>"u"&&(globalScope.__TEAM_RECORDS_PROMISE__=null);function normalizeTeamRecordValue(n){if(n==null)return"";const a=String(n).trim().replace(/[()]/g,"");return a?`(${a})`:""}function getTeamRecordFromCache(n){if(!teamRecordsCache||!n)return"";const a=n.toUpperCase();return teamRecordsCache[a]||teamRecordsCache[n]||teamRecordsCache[a.toLowerCase()]||""}function populateTeamRecords(n=document,a={}){if(!teamRecordsCache)return;const{force:e=!1}=a;(n&&typeof n.querySelectorAll=="function"?n:document).querySelectorAll(".team-record[data-team], .boxscore-team-record[data-team]").forEach(s=>{if(!e&&s.textContent&&s.textContent.trim())return;const o=s.getAttribute("data-team"),r=getTeamRecordFromCache(o);r&&(s.textContent=normalizeTeamRecordValue(r))})}function populateTeamRecordsWhenReady(n=document,a={}){if(!n||typeof populateTeamRecords!="function")return;const e=()=>populateTeamRecords(n,a);if(teamRecordsCache){e();return}const t=teamRecordsPromise||(typeof loadTeamRecords=="function"?loadTeamRecords():null);t&&typeof t.then=="function"&&t.then(()=>e()).catch(s=>console.warn("[RECORDS] Deferred populate failed:",s))}globalScope&&(globalScope.populateTeamRecords=populateTeamRecords,globalScope.populateTeamRecordsWhenReady=populateTeamRecordsWhenReady);function parsePickDescription(n){const a={matchup:"",pickType:"",pickTeam:"",line:"",odds:"",segment:"Full Game",isTeamTotal:!1},e=n.match(/\(([+-]\d+)\)/);e&&(a.odds=e[1]),n.includes("1st Half")?a.segment="1st Half":n.includes("2nd Half")?a.segment="2nd Half":n.includes("1st Quarter")&&(a.segment="1st Quarter");const t=n.match(/^(.+?)\s+([OU])\s+(\d+\.?\d*)/i);if(t&&!n.includes("@"))return a.pickTeam=t[1].trim(),a.pickType=t[2].toUpperCase()==="O"?"Over":"Under",a.line=t[3],a.isTeamTotal=!0,a;if(n.match(/under|over/i)){const s=n.match(/(under|over)\s+(\d+\.?\d*)/i);s&&(a.pickType=s[1].charAt(0).toUpperCase()+s[1].slice(1),a.line=s[2],a.isTeamTotal=!1)}else if(n.match(/moneyline|ml/i)){a.pickType="Moneyline";const s=n.match(/^(.+?)\s+(?:Moneyline|ML)/i);s&&(a.pickTeam=s[1].replace(/@.*$/,"").trim())}else{const s=n.match(/^(.+?)\s+([+-]\d+\.?\d*)/);s&&(a.pickTeam=s[1].replace(/@.*$/,"").trim(),a.pickType="Spread",a.line=s[2])}return a}function buildDescriptionFromFields(n={}){const a=[];n.awayTeam&&n.homeTeam?a.push(`${n.awayTeam} @ ${n.homeTeam}`):n.game?a.push(n.game):n.pickTeam&&a.push(n.pickTeam);const e=(n.pickType||"").toLowerCase();return e==="moneyline"||e==="ml"?a.push("ML"):e==="spread"&&n.line?a.push(n.line):(e==="total"||e==="team-total")&&n.pickDirection?a.push(`${n.pickDirection} ${n.line||""}`.trim()):n.line&&a.push(n.line),n.odds&&a.push(`(${n.odds})`),a.filter(Boolean).join(" ").trim()}function parseTeamsFromGame(n){if(!n)return{away:"",home:""};const a=["@"," / "," vs "," vs. "];for(let e of a)if(n.includes(e)){const t=n.split(e);return{away:t[0].trim(),home:t[1].trim()}}return{away:n,home:""}}function getTeamAbbr(n){const a={"las vegas raiders":"LV",raiders:"LV","denver broncos":"DEN",broncos:"DEN","dallas cowboys":"DAL",cowboys:"DAL","philadelphia eagles":"PHI",eagles:"PHI","phoenix suns":"PHX",suns:"PHX","los angeles clippers":"LAC",clippers:"LAC","georgia southern":"GASO","appalachian st":"APP","appalachian state":"APP",utsa:"UTSA","south florida":"USF",butler:"BUT",connecticut:"CONN","u conn":"CONN",uconn:"CONN","abilene christian":"ACU",arizona:"ARIZ","montana st":"MTST","montana state":"MTST","cal poly slo":"CPSU","cal poly":"CPSU","oral roberts":"ORU","missouri st":"MOST","missouri state":"MOST",marist:"MAR","georgia tech":"GT","east tenn st":"ETSU","east tennessee st":"ETSU","east tennessee state":"ETSU","north carolina":"UNC",unc:"UNC",duke:"DUKE","duke blue devils":"DUKE","san antonio spurs":"SAS",spurs:"SAS","new york knicks":"NYK",knicks:"NYK"},e=(n||"").toLowerCase();if(a[e])return a[e];const t=(n||"").match(/[A-Za-z0-9]+/g);if(t&&t.length>1){const s=t.map(o=>o[0]).join("").toUpperCase();if(s.length>=2&&s.length<=4)return s}return(n||"").substring(0,3).toUpperCase()}function getTeamLogoId(n){const a={"georgia southern":"290","appalachian st":"2026","appalachian state":"2026",utsa:"2636","south florida":"58",butler:"2086",connecticut:"41","u conn":"41",uconn:"41","abilene christian":"2000",arizona:"12","montana st":"149","montana state":"149","cal poly slo":"13","cal poly":"13","oral roberts":"198","missouri st":"2623","missouri state":"2623",marist:"2368","georgia tech":"59","east tenn st":"2193","east tennessee st":"2193","east tennessee state":"2193","north carolina":"153",unc:"153",duke:"150","duke blue devils":"150"},e=n.toLowerCase();return a[e]?a[e]:getTeamAbbr(n).toLowerCase()}function getTeamLogo(n,a="nfl"){window.LogoCache&&window.LogoCache.getTeamLogo&&window.LogoCache.getTeamLogo(n,a).catch(t=>{console.warn("Logo cache error:",t)});const e=getTeamLogoId(n);return a==="nba"?`https://a.espncdn.com/i/teamlogos/nba/500/${e}.png`:a==="college"||a.includes("ncaa")||a==="ncaab"||a==="ncaaf"?`https://a.espncdn.com/i/teamlogos/ncaa/500/${e}.png`:`https://a.espncdn.com/i/teamlogos/nfl/500/${e}.png`}function generatePickDisplay(n,a,e,t,s=null,o="pending"){let r="";return(o==="on-track"||o==="at-risk"||o==="live")&&s&&(typeof s.diff=="number"?s.diff>0?r='<span class="live-status-arrow up">\u2191</span>':s.diff<0&&(r='<span class="live-status-arrow down">\u2193</span>'):s.coverageState==="covering"?r='<span class="live-status-arrow up">\u2191</span>':s.coverageState==="trailing"&&(r='<span class="live-status-arrow down">\u2193</span>')),(n.pickType==="Over"||n.pickType==="Under")&&!n.isTeamTotal?`
            <div class="pick-details">
                ${r}
                <span class="pick-line">${n.pickType} ${n.line}</span>
                ${n.odds?`<span class="pick-odds">(${n.odds})</span>`:""}
            </div>
        `:n.isTeamTotal?`
            <div class="pick-team-info">
                <img src="${a}" class="pick-team-logo" loading="lazy" alt="${e}">
                <span class="pick-team-abbr">${e}</span>
            </div>
            <div class="pick-details">
                ${r}
                <span class="pick-line">${n.pickType} ${n.line}</span>
                ${n.odds?`<span class="pick-odds">(${n.odds})</span>`:""}
            </div>
        `:n.pickType==="Moneyline"?`
            <div class="pick-team-info">
                <img src="${a}" class="pick-team-logo" loading="lazy" alt="${e}">
                <span class="pick-team-abbr">${e}</span>
            </div>
            <div class="pick-details">
                ${r}
                ${n.odds?`<span class="pick-odds">(${n.odds})</span>`:""}
            </div>
        `:n.pickType==="Spread"?`
            <div class="pick-team-info">
                <img src="${a}" class="pick-team-logo" loading="lazy" alt="${e}">
                <span class="pick-team-abbr">${e}</span>
            </div>
            <div class="pick-details">
                ${r}
                <span class="pick-line">${n.line}</span>
                ${n.odds?`<span class="pick-odds">(${n.odds})</span>`:""}
            </div>
        `:`
        <div class="pick-team-info">
            <img src="${a}" class="pick-team-logo" loading="lazy" alt="${e}">
            <span class="pick-team-abbr">${e}</span>
        </div>
        <div class="pick-details">
            ${r}
            ${n.pickType?`<span class="pick-type">${n.pickType}</span>`:""}
            ${n.line?`<span class="pick-line">${n.line}</span>`:""}
            ${n.odds?`<span class="pick-odds">(${n.odds})</span>`:""}
        </div>
    `}function createBoxScoreRows(n,a,e,t,s,o){let r="\u2014",c="\u2014",d="",u="",S="\u2014",x="\u2014",k="\u2014",R="\u2014",H="\u2014",y="\u2014",$="\u2014",E="\u2014";if(n.quarters&&(S=n.quarters.q1_away!==void 0?n.quarters.q1_away:"\u2014",x=n.quarters.q2_away!==void 0?n.quarters.q2_away:"\u2014",k=n.quarters.q3_away!==void 0?n.quarters.q3_away:"\u2014",R=n.quarters.q4_away!==void 0?n.quarters.q4_away:"\u2014",H=n.quarters.q1_home!==void 0?n.quarters.q1_home:"\u2014",y=n.quarters.q2_home!==void 0?n.quarters.q2_home:"\u2014",$=n.quarters.q3_home!==void 0?n.quarters.q3_home:"\u2014",E=n.quarters.q4_home!==void 0?n.quarters.q4_home:"\u2014"),n.result){const D=n.result.match(/\d+/g);if(D&&D.length>=2){r=D[0],c=D[1];const F=parseInt(r),T=parseInt(c);F>T?(d="winning",u="losing"):T>F&&(u="winning",d="losing")}}return`
        <div class="boxscore-row ${d}">
            <div class="boxscore-cell team-cell">
                <div class="boxscore-team">
                    <img src="${a}" class="boxscore-team-logo" loading="lazy" alt="${e}">
                    <span class="boxscore-team-abbr">${e}</span>
                    <span class="boxscore-team-record" data-team="${e}"></span>
                </div>
            </div>
            <div class="boxscore-cell">${S}</div>
            <div class="boxscore-cell">${x}</div>
            <div class="boxscore-cell">${k}</div>
            <div class="boxscore-cell">${R}</div>
            <div class="boxscore-cell total">${r}</div>
        </div>
        <div class="boxscore-row ${u}">
            <div class="boxscore-cell team-cell">
                <div class="boxscore-team">
                    <img src="${t}" class="boxscore-team-logo" loading="lazy" alt="${s}">
                    <span class="boxscore-team-abbr">${s}</span>
                    <span class="boxscore-team-record" data-team="${s}"></span>
                </div>
            </div>
            <div class="boxscore-cell">${H}</div>
            <div class="boxscore-cell">${y}</div>
            <div class="boxscore-cell">${$}</div>
            <div class="boxscore-cell">${E}</div>
            <div class="boxscore-cell total">${c}</div>
        </div>
    `}function normalizeTeamKey(n){return(n||"").toString().toLowerCase().replace(/[^a-z0-9]/g,"")}function sanitizeSelectionName(n){return(n||"").replace(/\([^)]+\)/g,"").replace(/[+-]\d+(\.\d+)?/g,"").replace(/\b(ml|moneyline|spread|total|over|under|team total|tt)\b/gi,"").replace(/\s+/g," ").trim()}function matchPickSide(n,a){const e=normalizeTeamKey(n);if(!e)return null;const t=normalizeTeamKey(a.away),s=normalizeTeamKey(a.home),o=normalizeTeamKey(getTeamAbbr(a.away||"")),r=normalizeTeamKey(getTeamAbbr(a.home||""));return t&&(t.includes(e)||e.includes(t))?"away":s&&(s.includes(e)||e.includes(s))?"home":o&&o===e?"away":r&&r===e?"home":null}function parsePhaseDetails(n=""){const a=(n||"").trim();if(!a)return{isFinal:!1,isHalftime:!1,isPreGame:!1,clock:"",period:"",label:""};const e=a.toUpperCase(),t=e.includes("FINAL"),s=!t&&e.includes("HALF"),o=/ET|AM|PM|START|TIP|PREGAME|SCHEDULED|KICK/i.test(e)&&!t,r=a.match(/(\d{1,2}:\d{2})/),c=r?r[1]:"",d=a.match(/(Q\d+|OT|1ST|2ND|3RD|4TH|OT|1H|2H)/i);let u=d?d[1].toUpperCase():"";u==="1ST"?u="Q1":u==="2ND"?u="Q2":u==="3RD"?u="Q3":u==="4TH"&&(u="Q4");let S="";return t?S="Final":s?S="Halftime":c&&u?S=`${c} left in ${u}`:c?S=`${c} left`:u?S=u:S=a,{isFinal:t,isHalftime:s,isPreGame:o,clock:c,period:u,label:S}}function extractScoreboardDetails(n,a){const e=(n||"").trim();if(!e)return null;const t=e.match(/\(([^)]+)\)/),s=t?t[1].trim():"",r=(t?e.replace(t[0],"").trim():e).match(/^([A-Za-z0-9 .&'-]+)\s+(\d+)\s*[-]\s*(\d+)/),c=parseTeamsFromGame(a||""),d=parsePhaseDetails(s);if(!r)return{raw:e,phaseRaw:s,phaseLabel:d.label,isFinal:d.isFinal,isHalftime:d.isHalftime,isPreGame:d.isPreGame,clock:d.clock,period:d.period,teams:c};const u=r[1].trim(),S=parseInt(r[2],10),x=parseInt(r[3],10),k=getTeamAbbr(c.away||u),R=getTeamAbbr(c.home||""),H=normalizeTeamKey(u),y=normalizeTeamKey(k||c.away),$=normalizeTeamKey(R||c.home);let E=S,D=x;$&&H&&H===$&&(D=S,E=x);const F=j=>{const v=(j||"").trim().split(/\s+/).filter(Boolean);if(!v.length)return"";const A=v.map(L=>L[0]).join("").toUpperCase();return A.length>=2&&A.length<=4?A:(j||"").substring(0,3).toUpperCase()},T=k||F(c.away||"Away")||"AWY",M=R||F(c.home||"Home")||"HME",O=`${T} ${E}-${M} ${D}`;return{raw:e,phaseRaw:s,phaseLabel:d.label,isFinal:d.isFinal,isHalftime:d.isHalftime,isPreGame:d.isPreGame,clock:d.clock,period:d.period,awayScore:E,homeScore:D,awayAbbr:T,homeAbbr:M,teams:c,scoreboardText:O}}function determinePickMeta(n){const a=n.matchup||n.game||"",e=n.selection||n.description||"",t=n.parsedPick||(e?parsePickDescription(e):null),s=parseTeamsFromGame(a),o={type:"unknown",side:null,lineValue:null,isOver:!1,isUnder:!1,parsedPick:t,teams:s};if(t){const r=(t.pickType||"").toLowerCase();if(t.isTeamTotal?(o.type="team-total",o.isOver=r==="over",o.isUnder=r==="under"):r==="moneyline"?o.type="moneyline":r==="spread"?o.type="spread":(r==="over"||r==="under")&&(o.type="total",o.isOver=r==="over",o.isUnder=r==="under"),t.line!==void 0&&t.line!==null&&t.line!==""){const c=parseFloat(String(t.line).replace(/[^\d.-]/g,""));Number.isNaN(c)||(o.lineValue=c)}}if(o.type==="unknown"){const r=(n.market||"").toLowerCase(),c=e.toLowerCase();r.includes("moneyline")||/moneyline|ml/.test(c)?o.type="moneyline":r.includes("spread")||/[+-]\d/.test(c)?o.type="spread":(r.includes("total")||/over|under/.test(c))&&(o.type="total")}if((o.type==="moneyline"||o.type==="spread"||o.type==="team-total")&&!o.side){const r=t?.pickTeam||sanitizeSelectionName(e);o.side=matchPickSide(r,s)}if(o.type==="total"&&o.lineValue==null){const r=e.match(/(\d+\.?\d*)/);if(r){const c=parseFloat(r[1]);Number.isNaN(c)||(o.lineValue=c)}}if(o.type==="team-total"&&o.lineValue==null){const r=e.match(/(\d+\.?\d*)/);if(r){const c=parseFloat(r[1]);Number.isNaN(c)||(o.lineValue=c)}!o.isOver&&!o.isUnder&&(/over/i.test(e)&&(o.isOver=!0),/under/i.test(e)&&(o.isUnder=!0))}return o}function evaluateCoverage(n,a){if(!n)return{coverageState:"unknown"};if(!a||typeof a!="object")return{coverageState:"unknown"};const{type:e,side:t,lineValue:s,isOver:o,isUnder:r}=a;if(n.awayScore==null||n.homeScore==null)return{coverageState:"unknown"};if(e==="total"){if(!Number.isFinite(s))return{coverageState:"unknown",type:e};const c=(n.awayScore||0)+(n.homeScore||0),d=o?c-s:s-c;let u="unknown";return d>0?u="covering":d<0?u="trailing":u="push",{coverageState:u,totalScore:c,margin:d,lineValue:s,type:e}}if(e==="team-total"){if(!t||!Number.isFinite(s))return{coverageState:"unknown",type:e};const c=t==="home"?n.homeScore:n.awayScore,d=t==="home"?n.awayScore:n.homeScore,u=o?c-s:s-c;let S="unknown";return u>0?S="covering":u<0?S="trailing":S="push",{coverageState:S,ourScore:c,oppScore:d,diff:c-d,margin:u,lineValue:s,type:e}}if(e==="moneyline"||e==="spread"){if(!t)return{coverageState:"unknown",type:e};const c=t==="home"?n.homeScore:n.awayScore,d=t==="home"?n.awayScore:n.homeScore,u=c-d;if(e==="spread"&&Number.isFinite(s)){const x=u+s;let k="unknown";return x>0?k="covering":x<0?k="trailing":k="push",{coverageState:k,ourScore:c,oppScore:d,diff:u,coverMargin:x,lineValue:s,type:e}}let S="unknown";return u>0?S="covering":u<0?S="trailing":S="push",{coverageState:S,ourScore:c,oppScore:d,diff:u,type:e}}return{coverageState:"unknown",type:e}}function buildStatusDecision(n,a,e){const t=(n||"").toLowerCase(),s=t==="loss"?"lost":t,o=r=>r.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");if(["win","lost","push"].includes(s))return{key:s,label:o(s)};if(a&&a.isFinal){if(e.coverageState==="covering")return{key:"win",label:"Win"};if(e.coverageState==="trailing")return{key:"lost",label:"Lost"};if(e.coverageState==="push")return{key:"push",label:"Push"}}return e.coverageState==="covering"?{key:"on-track",label:"On Track"}:e.coverageState==="trailing"?{key:"at-risk",label:"At Risk"}:e.coverageState==="push"?{key:s||"pending",label:o(s||"Pending")}:s?{key:s,label:o(s)}:{key:"pending",label:"Pending"}}function composeStatusTooltip(n,a,e,t,s){const o=[];if(a){if(e){if(typeof e.diff=="number"&&(s.type==="moneyline"||s.type==="spread"||s.type==="team-total"))e.diff>0?o.push(`Up ${Math.abs(e.diff)}`):e.diff<0?o.push(`Down ${Math.abs(e.diff)}`):o.push("Tied");else if(s.type==="total"&&typeof e.margin=="number"&&Number.isFinite(s.lineValue)){const r=Math.abs(e.margin).toFixed(1).replace(/\.0$/,"");e.coverageState==="covering"?o.push(`+${r}`):e.coverageState==="trailing"&&o.push(`Need ${r}`)}}if(!e&&a.scoreboardText?o.push(a.scoreboardText):!e&&n.result&&o.push(n.result),a.phaseLabel){const r=a.phaseLabel.match(/(Q\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i),c=a.phaseLabel.match(/(\d{1,2}:\d{2})/);r&&c?o.push(`${normalizePeriodLabel(r[1])} ${c[1]}`):r?o.push(normalizePeriodLabel(r[1])):c&&o.push(c[1])}}return!o.length&&n.start&&o.push(`Starts ${n.start}`),!o.length&&n.countdown&&o.push(n.countdown),!o.length&&n.result&&o.push(n.result),!o.length&&t&&o.push(t.label),!o.length&&n.status&&o.push(n.status),o.filter(Boolean).join(" \u2022 ")}function formatPointValue(n){if(n==null)return"";const a=Math.abs(n);if(!Number.isFinite(a))return"";const e=Math.round(a*10)/10;return Number.isInteger(e)?String(e):e.toFixed(1).replace(/\.0$/,"")}function formatLineValue(n){if(!Number.isFinite(n))return"";const a=Math.round(n*10)/10;return Number.isInteger(a)?String(a):a.toFixed(1).replace(/\.0$/,"")}function normalizePeriodLabel(n){if(!n)return"";const a=n.toString().toUpperCase();return a==="1ST"?"Q1":a==="2ND"?"Q2":a==="3RD"?"Q3":a==="4TH"?"Q4":a}function parsePhaseSnippet(n){if(!n)return"";const a=n.replace(/\s*(left in|remaining|left)\s*/i," "),e=a.match(/(\d{1,2}:\d{2})/),t=a.match(/(Q\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i),s=t?normalizePeriodLabel(t[1]):"";return e&&s?`${s} ${e[1]}`:s||(e?e[1]:a.trim())}function formatPhaseSnippet(n){if(!n)return"";if(n.isFinal)return"Final";if(n.isHalftime)return"Halftime";const a=parsePhaseSnippet(n.phaseLabel);if(a)return a;const e=[n.period,n.clock].filter(Boolean).join(" ").trim();return e?parsePhaseSnippet(e):""}function formatLiveMarginSnippet(n,a){if(!n||!a)return"";const{type:e}=a;if(e==="spread"&&typeof n.coverMargin=="number"){if(n.coverMargin===0)return"At number";const t=formatPointValue(n.coverMargin);return t?n.coverMargin>0?`Covering by ${t}`:`Need ${t}`:""}if((e==="total"||e==="team-total")&&typeof n.margin=="number"){if(n.margin===0)return Number.isFinite(a.lineValue)?`On ${formatLineValue(a.lineValue)}`:"Even";const t=formatPointValue(n.margin);if(!t)return"";const s=e==="team-total"?a.isOver?"Over TT":"Under TT":a.isOver?"Over":"Under";return n.margin>0?`${s} by ${t}`:`Need ${t}`}if(typeof n.diff=="number"){if(n.diff===0)return"Tied";const t=formatPointValue(n.diff);return t?n.diff>0?`Up ${t}`:`Down ${t}`:""}return""}function formatFinalBadgeContext(n,a,e){if(!e)return"";if(n==="push")return Number.isFinite(e.lineValue)?`Push @ ${formatLineValue(e.lineValue)}`:"Push";if(!a)return"";const{type:t}=e;if(t==="spread"&&typeof a.coverMargin=="number"){if(a.coverMargin===0)return Number.isFinite(e.lineValue)?`Push @ ${formatLineValue(e.lineValue)}`:"Push";const s=formatPointValue(a.coverMargin),o=Number.isFinite(a.diff)?formatPointValue(a.diff):"";if(!s&&!o)return"";if(a.coverMargin>0)return o?`Won by ${o}${s?` \u2022 Cov ${s}`:""}`:`Covered by ${s}`;if(o){const r=a.diff<0?`Lost by ${o}`:`Won by ${o}`,c=s?` \u2022 Need ${s}`:"";return`${r}${c}`}return s?`Missed by ${s}`:""}if((t==="total"||t==="team-total")&&typeof a.margin=="number"){if(a.margin===0)return Number.isFinite(e.lineValue)?`Push @ ${formatLineValue(e.lineValue)}`:"Push";const s=formatPointValue(a.margin);if(!s)return"";const o=t==="team-total"?e.isOver?"Over TT":"Under TT":e.isOver?"Over":"Under",r=Number.isFinite(e.lineValue)?` vs ${formatLineValue(e.lineValue)}`:"";return a.margin>0?`${o} by ${s}${r}`:`Short ${s}${r}`}if(typeof a.diff=="number"){if(a.diff===0)return"Tied";const s=formatPointValue(a.diff);return s?a.diff>0?`Won by ${s}`:`Lost by ${s}`:""}return""}function formatPendingBadgeContext(n){return n?n.countdown?n.countdown:n.start?n.start:n.scheduled?n.scheduled:"":""}function formatStatusBadgeContext(n,a,e,t,s){if(!n)return"";const o=n.key;if(o==="on-track"||o==="at-risk"||o==="live"){const r=formatLiveMarginSnippet(e,t),c=formatPhaseSnippet(a);return r&&c?`${r} \u2022 ${c}`:r||c}if(o==="win"||o==="lost"||o==="push"){const r=formatFinalBadgeContext(o,e,t);return r||(a?.scoreboardText?a.scoreboardText:s?.result?s.result:"")}return o==="pending"?formatPendingBadgeContext(s):""}function normalizeBlurbPayload(n){return!n||typeof n!="object"||Array.isArray(n)?{status:n}:{...n}}function escapeHtmlForStatus(n){return n?String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}function calculatePickMargin(n,a,e){if(!a||!n)return null;const t=a.match(/(\d+)-(\d+)|(\d+)\s*-\s*(\d+)/);if(!t)return null;const s=parseInt(t[1]||t[3]),o=parseInt(t[2]||t[4]);if(isNaN(s)||isNaN(o))return null;const r=s-o,c=s+o;let d=!1;if(n.pickTeam&&e){const u=parseTeamsFromGame(e),S=n.pickTeam.toLowerCase(),x=u.away.toLowerCase();d=x.includes(S)||S.includes(x)}if(n.pickType==="Spread"&&n.line){const u=parseFloat(n.line);let S;d?S=s+u-o:S=o+u-s;const x=Math.abs(S);return S>0?`Covered by ${x.toFixed(1)} pts`:S<0?`Lost by ${x.toFixed(1)} pts`:"Push (exact)"}else if(n.pickType==="Over"||n.pickType==="Under"){const u=parseFloat(n.line);if(isNaN(u))return null;const S=Math.abs(c-u);return n.pickType==="Over"?c>u?`Covered by ${S.toFixed(1)} pts`:c<u?`Lost by ${S.toFixed(1)} pts`:"Push (exact)":c<u?`Covered by ${S.toFixed(1)} pts`:c>u?`Lost by ${S.toFixed(1)} pts`:"Push (exact)"}else if(n.pickType==="Moneyline"){let u;d?u=s-o:u=o-s;const S=Math.abs(u);return u>0?`Won by ${S} pts`:u<0?`Lost by ${S} pts`:"Tied"}return null}function buildStatusBadgeHTML({statusClass:n,label:a,tooltip:e,info:t,extraClass:s="",margin:o=null}){const r=escapeHtmlForStatus(n||"pending"),c=escapeHtmlForStatus(a||""),d=e?escapeHtmlForStatus(e):"",u=t?escapeHtmlForStatus(t):"",S=o?escapeHtmlForStatus(o):"",x=u&&/(^|[^\d])([1-9]\d*)W|(^|[^\d])([1-9]\d*)L/.test(u),k=u&&x,R=d?` data-blurb="${d}"`:"",H=k?` data-status-info="${u}"`:"",y=S?` data-margin="${S}"`:"";return`<span class="status-badge${s?` ${s}`:""}" data-status="${r}"${R}${H}${y}>${c}</span>`}function formatGameTimeStatus(n,a,e,t,s,o){if(n==="win"||n==="lost"||n==="final")return'<span class="game-time-status final">FINAL</span>';if(n==="on-track"||n==="at-risk"||n==="live"){let r="";if(a)if(a.phaseLabel){const c=a.phaseLabel.match(/(Q\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i),d=a.phaseLabel.match(/(\d{1,2}:\d{2})/);c&&d?r=`${c[1].toUpperCase()} ${d[1]}`:c?r=c[1].toUpperCase():d?r=d[1]:r=a.phaseLabel}else a.period&&a.clock?r=`${a.period} ${a.clock}`:a.period?r=a.period:a.clock&&(r=a.clock);if(!r&&e){const c=e.match(/(Q\d+|OT|1ST|2ND|3RD|4TH|1H|2H)/i),d=e.match(/(\d{1,2}:\d{2})/);c&&d?r=`${c[1].toUpperCase()} ${d[1]}`:c?r=c[1].toUpperCase():d&&(r=d[1])}return r?`<span class="live-indicator">LIVE</span><span class="game-time-status">${escapeHtmlForStatus(r)}</span>`:'<span class="live-indicator">LIVE</span><span class="game-time-status">LIVE</span>'}return s?`<span class="game-time-status countdown">${escapeHtmlForStatus(s)}</span>`:o?o.includes("Starts in")||o.includes("starts in")?`<span class="game-time-status countdown">${escapeHtmlForStatus(o)}</span>`:`<span class="game-time-status countdown">${escapeHtmlForStatus(o)}</span>`:e?`<span class="game-time-status">${escapeHtmlForStatus(e)}</span>`:t?`<span class="game-time-status">${escapeHtmlForStatus(t)}</span>`:'<span class="game-time-status">\u2014</span>'}function buildStatusMeta(n,a){const e=normalizeBlurbPayload(n);a!==void 0&&e.result===void 0&&(e.result=a),!e.status&&e.baseStatus&&(e.status=e.baseStatus),e.score===void 0&&(e.score=e.result),!e.matchup&&e.game&&(e.matchup=e.game);const t=determinePickMeta(e),s=extractScoreboardDetails(e.score,e.matchup),o=evaluateCoverage(s,t),r=buildStatusDecision(e.status,s,o),c=composeStatusTooltip(e,s,o,r,t),d=formatStatusBadgeContext(r,s,o,t,e);return{statusKey:r.key,statusLabel:r.label,tooltip:c,liveInfo:s,coverage:o,pickMeta:t,badgeContext:d}}function getStatusBlurb(n,a){return typeof n=="object"&&n!==null&&!Array.isArray(n)?buildStatusMeta(n).tooltip:buildStatusMeta({status:n},a).tooltip}function parseMoneyAmount(n){if(n==null)return 0;const a=parseFloat(n.toString().replace(/[$,]/g,"").trim());return Number.isFinite(a)?a:0}function formatCurrencyTerse(n){if(n==null||n==="")return"\u2014";const a=parseMoneyAmount(n);return Number.isFinite(a)?`$${Math.round(a).toLocaleString()}`:"\u2014"}function normalizeBookName(n){return(n||"").toString().trim().replace(/_/g," ")||"Manual Upload"}function normalizeBookKey(n){return normalizeBookName(n).toLowerCase().replace(/[^a-z0-9]+/g,"-")}function normalizeDateTimeParts(n){let a=n.gameDate||n.date||"",e=n.gameTime||n.time||"";const t=n.scheduled||n.start||n.accepted||"",s=r=>{const c=new Date(r);if(!Number.isNaN(c.getTime()))return{date:c.toLocaleDateString(void 0,{month:"short",day:"numeric"}),time:c.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})};const d=r.split(" ");return d.length>=2?{date:d.slice(0,d.length-1).join(" "),time:d.slice(-1)[0]}:{date:r,time:""}};if((!a||!e)&&t){const r=s(t);a||(a=r.date),e||(e=r.time)}return{displayDate:a||"TBD",displayTime:e||"",epoch:(()=>{if(a&&e){const r=Date.parse(`${a} ${e}`);if(!Number.isNaN(r))return r}if(t){const r=Date.parse(t);if(!Number.isNaN(r))return r}return Date.now()})()}}function toMoneyValue(n){if(n==null||n==="")return null;const a=parseFloat(n.toString().replace(/[$,]/g,"").trim());return Number.isFinite(a)?a:null}function formatCurrencyDisplay(n,a="-"){if(n==null||Number.isNaN(n))return a;const e=typeof n=="number"?n:parseMoneyAmount(n);return Number.isFinite(e)?`$${e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})}`:a}function calculateWinFromOdds(n,a){const e=toMoneyValue(n),t=(a||"").toString().trim(),s=parseInt(t.replace(/[^\d+-]/g,""),10);return e===null||Number.isNaN(s)?null:s>0?e*(s/100):s<0?e/(Math.abs(s)/100):null}function normalizeOddsValue(n){if(!n&&n!==0)return"";const a=n.toString().trim();return a?!/^[+-]/.test(a)&&/^\d/.test(a)?`+${a}`:a:""}function normalizeSegmentLabel(n){const a=(n||"").toString().toLowerCase().trim();return a.includes("1q")?"1st Quarter":a.includes("2q")?"2nd Quarter":a.includes("3q")?"3rd Quarter":a.includes("4q")?"4th Quarter":a.includes("1h")||a.includes("1st half")?"1st Half":a.includes("2h")||a.includes("2nd half")?"2nd Half":(a.includes("full"),"Full Game")}function combinePickDetails(n,a){const e={...n},t=(a.pickType||"").toString().toLowerCase(),s=(a.pickDirection||a.totalType||"").toString(),o=a.segment||a.period||n.segment||"Full Game";return e.segment=normalizeSegmentLabel(o),e.pickTeam=e.pickTeam||a.pickTeam||a.team||"",e.line=e.line||a.line||"",e.odds=normalizeOddsValue(e.odds||a.odds||a.price||""),!e.pickDirection&&s&&(e.pickDirection=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()),e.pickType||(t==="moneyline"||t==="ml"?e.pickType="Moneyline":t==="spread"||t==="ats"?e.pickType="Spread":t==="team-total"||t==="tt"?(e.pickType=e.pickDirection?e.pickDirection:"Over",e.isTeamTotal=!0):t==="total"&&(e.pickType=e.pickDirection?e.pickDirection:"Over")),!e.pickType&&e.pickDirection&&(e.pickType=e.pickDirection),(t==="team-total"||a.isTeamTotal)&&e.pickDirection&&(e.isTeamTotal=!0),e.pickType==="Moneyline"&&!e.odds&&e.line&&(e.odds=normalizeOddsValue(e.line),e.line=""),e}function formatSignedCurrency(n){const a=n>0?"+":n<0?"-":"",e=Math.abs(n),t=e.toLocaleString(void 0,{minimumFractionDigits:e%1===0?0:2,maximumFractionDigits:2});return`${a}$${t}`}function computeHitMissAndProfit(n,a,e){const t=(n||"").toLowerCase(),s=parseMoneyAmount(a),o=parseMoneyAmount(e);return t==="win"||t==="won"?{key:"hit",label:"HIT",amount:o,amountClass:"profit-positive"}:t==="loss"||t==="lost"?{key:"miss",label:"MISS",amount:-s,amountClass:"profit-negative"}:t==="push"||t==="tie"?{key:"push",label:"PUSH",amount:0,amountClass:"profit-neutral"}:{key:"na",label:"\u2014",amount:null,amountClass:"profit-neutral"}}function buildPickRow(n,a){const e=n.description||n.selection||buildDescriptionFromFields(n),t=combinePickDetails(parsePickDescription(e),n),s=n.game||(n.awayTeam&&n.homeTeam?`${n.awayTeam} @ ${n.homeTeam}`:t.awayTeam&&t.homeTeam?`${t.awayTeam} @ ${t.homeTeam}`:e),o=buildStatusMeta({status:n.status,result:n.result,score:n.result,matchup:s,selection:e,description:e,parsedPick:t,start:n.scheduled||n.start,countdown:n.countdown,market:n.market}),r=(o.statusKey||n.status||"pending").toLowerCase(),c=r==="on-track"||r==="at-risk"||r==="live";let d=o.statusLabel||n.status||"Pending";r==="pending"&&n.countdown?d=n.countdown:r==="pending"&&n.scheduled&&(d=`Starts ${n.scheduled}`);let u=null;(r==="win"||r==="lost")&&n.result&&(u=calculatePickMargin(t,n.result,n.game||s));const S=buildStatusBadgeHTML({statusClass:r,label:d,tooltip:o.tooltip||getStatusBlurb(n.status,n.result)||"",info:o.badgeContext,margin:u}),x=n.league||n.sport||"";let k=x?x.toString().toLowerCase():"";k||(k=detectLeagueFromTeams(n.game,y,$));const R={college:"ncaaf",cfb:"ncaaf","college football":"ncaaf","ncaa football":"ncaaf",cbb:"ncaab","college basketball":"ncaab","ncaa basketball":"ncaab",ncaam:"ncaab",ncaab:"ncaab",ncaa:"ncaab"};R[k]&&(k=R[k]);const H=parseTeamsFromGame(n.game),y=n.awayTeam||H.away||t.awayTeam||t.pickTeam||"TBD",$=n.homeTeam||H.home||"",E=getTeamAbbr(y),D=$?getTeamAbbr($):"",F=getTeamLogo(y,k),T=$?getTeamLogo($,k):"";let M=F,O=E||(t.pickType==="Over"?"O":"U"),j=y;if(t.pickTeam){const Z=t.pickTeam.toLowerCase(),Q=y.toLowerCase(),te=$.toLowerCase();(te.includes(Z)||Z.includes(te))&&(M=T,O=D,j=$)}else(t.pickType==="Over"||t.pickType==="Under")&&(M=F,O=t.pickType.substring(0,1));const v=normalizeBookName(n.sportsbook||n.book||n.sourceBook||n.bookKey||n.source),A=normalizeBookKey(v),L=toMoneyValue(n.risk),p=toMoneyValue(n.win),m=p!==null?p:calculateWinFromOdds(L,t.odds),h=formatCurrencyDisplay(L),C=formatCurrencyDisplay(m),I=normalizeDateTimeParts({...n,gameDate:n.gameDate||n.date,gameTime:n.gameTime||n.time}),G=computeHitMissAndProfit(r,L??0,m??0),_=document.createElement("tr");_.className=`group-start ${c?"live-game":""}`,_.dataset.pickIndex=a;let q="spread";if(t.pickType){const Z=t.pickType.toLowerCase();Z==="over"||Z==="under"?q=t.isTeamTotal?"tt":"total":Z==="moneyline"?q="moneyline":Z==="spread"&&(q="spread")}_.setAttribute("data-league",k),_.setAttribute("data-book",A),_.setAttribute("data-status",r),_.setAttribute("data-risk",L!=null?String(L).replace(/,/g,""):"0"),_.setAttribute("data-win",m!=null?String(m).replace(/,/g,""):"0"),_.setAttribute("data-away",y.toLowerCase()),_.setAttribute("data-home",$?$.toLowerCase():""),_.setAttribute("data-pick-type",q),_.setAttribute("data-pick-text",(e||"").toLowerCase()),_.setAttribute("data-segment",t.segment.toLowerCase().replace(/\s+/g,"-")),_.setAttribute("data-odds",t.odds||"-110"),_.setAttribute("data-epoch",I.epoch);let W="";return k==="nba"?W="https://a.espncdn.com/i/teamlogos/leagues/500/nba.png":k==="nfl"?W="https://a.espncdn.com/i/teamlogos/leagues/500/nfl.png":k==="mlb"?W="https://a.espncdn.com/i/teamlogos/leagues/500/mlb.png":k==="nhl"?W="https://a.espncdn.com/i/teamlogos/leagues/500/nhl.png":k==="ncaaf"?W="assets/icons/league-ncaaf.svg":k==="ncaab"?W="assets/icons/league-ncaam.svg":(k.includes("college")||k.includes("ncaa"))&&(W="assets/icons/league-ncaaf.svg"),_.innerHTML=`
        <td>
            <div class="datetime-cell">
                <span class="cell-date">${I.displayDate}</span>
                <span class="cell-time">${I.displayTime}</span>
                <span class="sportsbook-value">${v}</span>
            </div>
        </td>
        <td class="center">
            <div class="league-cell">
                ${W?`<img src="${W}" class="league-logo" alt="${k}">`:""}
                <span class="league-text">${k.replace("college","NCAA").toUpperCase()}</span>
            </div>
        </td>
        <td>
            ${$?`<div class="matchup-cell">
                        <div class="team-line">
                            <img src="${F}" class="team-logo" loading="lazy" alt="${E}">
                            <div class="team-name-wrapper">
                                <span class="team-name-full">${y}</span>
                                <span class="team-record" data-team="${E}"></span>
                            </div>
                        </div>
                        <div class="vs-divider">vs</div>
                        <div class="team-line">
                            <img src="${T}" class="team-logo" loading="lazy" alt="${D}">
                            <div class="team-name-wrapper">
                                <span class="team-name-full">${$}</span>
                                <span class="team-record" data-team="${D}"></span>
                            </div>
                        </div>
                    </div>`:`<div class="matchup-cell">
                        <div class="team-line">
                            <img src="${F}" class="team-logo" loading="lazy" alt="${E}">
                            <div class="team-name-wrapper">
                                <span class="team-name-full">${y}</span>
                                <span class="team-record" data-team="${E}"></span>
                            </div>
                        </div>
                    </div>`}
        </td>
        <td class="center">
            <span class="game-segment">${t.segment||"Full Game"}</span>
        </td>
        <td>
            <div class="pick-cell">
                ${generatePickDisplay(t,M,O,j,o.coverage,r)}
            </div>
        </td>
        <td class="center">
            <span class="currency-combined currency-stacked">
                <span class="currency-risk-row"><span class="risk-amount">${h}</span><span class="currency-separator"> /</span></span>
                <span class="win-amount">${C}</span>
            </span>
        </td>
        <td class="center">
            <div class="compact-boxscore">
                <div class="boxscore-grid">
                    <div class="boxscore-row header">
                        <div class="boxscore-cell header-cell game-time-cell">
                            ${formatGameTimeStatus(r,o.liveInfo,n.result,n.status,n.countdown,n.scheduled||n.start)}
                            ${t.segment!=="Full Game"?`<div style="font-size: 9px; color: rgba(170, 188, 204, 0.9); margin-top: 2px;">${t.segment}</div>`:""}
                        </div>
                        <div class="boxscore-cell header-cell">Q1</div>
                        <div class="boxscore-cell header-cell">Q2</div>
                        <div class="boxscore-cell header-cell">Q3</div>
                        <div class="boxscore-cell header-cell">Q4</div>
                        <div class="boxscore-cell header-cell">T</div>
                    </div>
                    ${createBoxScoreRows(n,F,E,T||F,D||E,r)}
                </div>
            </div>
        </td>
        <td class="center">
            ${S}
        </td>
        <td class="center">
            <span class="hitmiss-badge hitmiss-${G.key}">${G.label}</span>
        </td>
        <td class="center">
            <div class="won-lost-cell">
                ${G.amount===null?'<span class="profit-amount profit-neutral">\u2014</span>':`<span class="profit-amount ${G.amountClass}">${formatSignedCurrency(G.amount)}</span>`}
                <button class="delete-pick-btn" data-pick-index="${a}" title="Remove pick">\u2715</button>
            </div>
        </td>
    `,_}async function loadAndAppendPicks(){console.log("[PICKS LOADER] Starting to load picks...");try{const n=window.APP_CONFIG?.API_BASE_URL||"/api";if(window.APP_CONFIG?.ENABLE_DB_SYNC===!1){console.log("[PICKS LOADER] DB sync disabled in config - skipping API fetch");return}const a=await fetch(`${n}/get-picks`);if(console.log("[PICKS LOADER] API response status:",a.status),!a.ok){console.log("[PICKS LOADER] API not available (expected - using LocalPicksManager). Status:",a.status);return}let e;try{e=await a.json()}catch(r){window.ErrorHandler&&window.ErrorHandler.handleParse(r,"API response");return}const t=e.picks||[];if(console.log("[PICKS LOADER] Received picks:",t.length,t),t.length===0){console.log("[PICKS LOADER] No picks to load");return}const s=document.getElementById("picks-tbody");if(!s){console.error("[PICKS LOADER] ERROR: Table body #picks-tbody not found!");return}console.log("[PICKS LOADER] Found table body, clearing and adding rows..."),s.innerHTML="";const o=s.closest(".table-container");if(o&&(t&&t.length>0?o.classList.add("has-picks"):o.classList.remove("has-picks")),t.forEach((r,c)=>{try{const d=buildPickRow(r,c);s.appendChild(d)}catch(d){console.error(`[PICKS LOADER] ERROR creating row for pick ${c+1}:`,d),console.error("[PICKS LOADER] Pick data:",r)}}),console.log(`[PICKS LOADER] \u2713 Successfully loaded ${t.length} picks from API`),typeof calculateKPIs=="function"&&typeof updateKPITiles=="function"){const r=calculateKPIs(t);updateKPITiles(r)}typeof updateTable=="function"&&updateTable(),typeof updateTableWithFilters=="function"&&updateTableWithFilters(),window.DashboardFilterPills&&typeof window.DashboardFilterPills.applyFilters=="function"&&window.DashboardFilterPills.applyFilters(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{typeof window.__gbsvApplyZebraStripes=="function"&&window.__gbsvApplyZebraStripes()})}),populateTeamRecordsWhenReady(document,{force:!1}),typeof populateLeagueDropdown=="function"&&populateLeagueDropdown()}catch(n){console.log("[PICKS LOADER] API not available, using static HTML picks"),window.ErrorHandler&&!n.message?.includes("Failed to fetch")&&!n.message?.includes("CORS")&&window.ErrorHandler.handleApi(n,"Load picks")}}window.loadLivePicks=loadAndAppendPicks;async function loadTeamRecords(n={}){const{force:a=!1}=n;if(teamRecordsPromise&&!a)return teamRecordsPromise;const e=(async()=>{try{if(window.APP_CONFIG?.API_BASE_URL&&window.APP_CONFIG?.TEAM_RECORDS_API_ENABLED===!0&&window.APP_CONFIG?.ENABLE_DB_SYNC!==!1)try{const t=window.APP_CONFIG.API_BASE_URL,s=await fetch(`${t}/team-records`);if(s.ok){const o=await s.json();if(o.records){const r={};return Object.keys(o.records).forEach(c=>{r[c.toUpperCase()]=o.records[c]}),teamRecordsCache=r,globalScope&&(globalScope.__TEAM_RECORDS_CACHE__=r,globalScope.teamRecordsCache=r),populateTeamRecords(document,{force:!0}),r}}console.log("[TEAM RECORDS] API endpoint not available (expected). Team records will use local data. Status:",s.status)}catch{console.log("[RECORDS] API not available, trying config file")}try{const t=await fetch("assets/data/team-records.json?v=20250101");if(t.ok){const s=await t.json(),o={};Object.keys(s).forEach(c=>{Object.assign(o,s[c])});const r={};return Object.keys(o).forEach(c=>{r[c.toUpperCase()]=o[c]}),teamRecordsCache=r,globalScope&&(globalScope.__TEAM_RECORDS_CACHE__=r,globalScope.teamRecordsCache=r),populateTeamRecords(document,{force:!0}),r}}catch(t){console.warn("[RECORDS] Config file not available:",t)}return console.warn("[RECORDS] No team records available, using empty cache"),teamRecordsCache={},{}}catch(t){throw console.warn("[RECORDS] Could not load team records:",t),window.ErrorHandler&&window.ErrorHandler.handleApi(t,"Load team records"),t}})();return teamRecordsPromise=e,globalScope&&(globalScope.__TEAM_RECORDS_PROMISE__=e),e.catch(()=>{teamRecordsPromise===e&&(teamRecordsPromise=null,globalScope&&(globalScope.__TEAM_RECORDS_PROMISE__=null))}),e}async function loadPicksFromDatabase(){try{if(window.PicksService){console.log("[DB LOADER] Loading picks from Azure Cosmos DB via PicksService...");const s=window.PicksService.checkMigrationNeeded();if(s.needed){console.log(`[DB LOADER] Found ${s.count} picks in localStorage, migrating to Azure...`);const r=await window.PicksService.migrateFromLocalStorage();console.log("[DB LOADER] Migration result:",r)}const o=await window.PicksService.getAll({locked:!0,limit:200});if(o&&o.length>0)return console.log(`[DB LOADER] \u2705 Loaded ${o.length} picks from Azure Cosmos DB`),o.map(r=>({...r,awayLogo:r.awayLogo||getTeamLogo(r.awayTeam,r.sport),homeLogo:r.homeLogo||getTeamLogo(r.homeTeam,r.sport)}))}if(!window.APP_CONFIG||!window.APP_CONFIG.API_BASE_URL)return console.log("[DB LOADER] API not configured, falling back to localStorage"),null;if(window.APP_CONFIG?.ENABLE_DB_SYNC===!1)return console.log("[DB LOADER] DB sync disabled in config - skipping API fetch"),null;const n=window.APP_CONFIG.API_BASE_URL,a=await fetch(`${n}/get-picks?limit=100`);if(!a.ok)return console.log("[DB LOADER] Legacy API not available, falling back to localStorage. Status:",a.status),null;let e;try{e=await a.json()}catch(s){throw window.ErrorHandler&&window.ErrorHandler.handleParse(s,"Database response"),s}const t=e.picks||[];return console.log(`Loaded ${t.length} picks from legacy database`),t.map(s=>({...s,awayLogo:s.awayLogo||getTeamLogo(s.awayTeam,s.sport),homeLogo:s.homeLogo||getTeamLogo(s.homeTeam,s.sport)}))}catch(n){return console.warn("[DB LOADER] Failed to load picks from database:",n),window.ErrorHandler&&!n.message?.includes("Failed to fetch")&&!n.message?.includes("CORS")&&window.ErrorHandler.handleApi(n,"Load picks from database"),null}}function initializePicksAndRecords(){loadPicksFromDatabase().then(a=>{if(a&&a.length>0)console.log("[DASHBOARD] \u2705 Using picks from database");else{console.log("[DASHBOARD] No database picks available, falling back to localStorage (LocalPicksManager)");const e=loadAndAppendPicks();e&&typeof e.catch=="function"&&e.catch(t=>console.warn("[PICKS LOADER] Initial load encountered an error:",t))}}).catch(a=>{console.warn("[DASHBOARD] Database load failed, trying API/localStorage:",a.message);const e=loadAndAppendPicks();e&&typeof e.catch=="function"&&e.catch(t=>console.warn("[PICKS LOADER] Initial load encountered an error:",t))})}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{const n=loadTeamRecords();n&&typeof n.catch=="function"&&n.catch(a=>console.warn("[RECORDS] Initial team records load failed:",a)),initializePicksAndRecords(),initializeDeleteButtons()});else{const n=loadTeamRecords();n&&typeof n.catch=="function"&&n.catch(a=>console.warn("[RECORDS] Initial team records load failed:",a)),initializePicksAndRecords(),initializeDeleteButtons()}function initializeDeleteButtons(){const n=document.getElementById("picks-tbody");n&&(n.addEventListener("click",async a=>{const e=a.target.closest(".delete-pick-btn");if(!e)return;a.stopPropagation();const t=e.closest("tr");if(t&&confirm("Remove this pick from the dashboard?")){const s=e.dataset.pickIndex,o=t.dataset.pickId||e.dataset.pickId;if(window.PicksService&&o)try{await window.PicksService.update(o,{locked:!1,lockedAt:null}),console.log("[PICKS] Unlocked pick in Azure:",o)}catch(r){if(console.warn("[PICKS] Failed to unlock in Azure, trying delete/localStorage fallback:",r),window.LocalPicksManager&&s!==void 0){const c=window.LocalPicksManager.getAll?window.LocalPicksManager.getAll():[];c[s]&&c[s].id&&window.LocalPicksManager.delete(c[s].id)}}else if(window.LocalPicksManager&&s!==void 0){const r=window.LocalPicksManager.getAll?window.LocalPicksManager.getAll():[];r[s]&&r[s].id&&window.LocalPicksManager.delete(r[s].id)}t.remove(),console.log("[PICKS] Removed pick from UI:",o||s),window.KPICalculator&&window.KPICalculator.recalculateLiveKPI&&window.KPICalculator.recalculateLiveKPI()}}),console.log("[PICKS] Delete button handlers initialized"))}globalScope&&(globalScope.loadTeamRecords=loadTeamRecords),function(){"use strict";function n(y){if(!y.isLive)return"pending";if(y.isFinal){if(y.didWin)return"win";if(y.didLose)return"loss";if(y.isPush)return"push"}return y.pickType==="spread"?a(y):y.pickType==="total"||y.pickType.includes("ou")?e(y):y.pickType==="moneyline"?t(y):"pending"}function a(y){const{awayScore:$,homeScore:E,pickTeam:D,spread:F,timeRemaining:T,quarter:M}=y,v=(D===y.awayTeam?$-E:E-$)-F,A=s(M,T);return v>3||v>0&&A<.15?"on-track":v<-3||v<0&&A<.15?"at-risk":(Math.abs(v)<=3,v>=0?"on-track":"at-risk")}function e(y){const{awayScore:$,homeScore:E,pickTeam:D,total:F,isOver:T,timeRemaining:M,quarter:O,isTeamTotal:j=!1}=y;let v;j&&D?v=D===y.awayTeam?$:E:v=$+E;const A=T?v-F:F-v,L=s(O,M),m=o(M,O)*7;if(T){if(A>m*.5)return"on-track";if(A<-m)return"at-risk"}else{if(A>m*.5)return"on-track";if(A<-m)return"at-risk"}return A>=0?"on-track":"at-risk"}function t(y){const{awayScore:$,homeScore:E,pickTeam:D,timeRemaining:F,quarter:T}=y,O=D===y.awayTeam?$-E:E-$,j=s(T,F);return O>7||O>0&&j<.1?"on-track":O<-7||O<0&&j<.1?"at-risk":O>=0?"on-track":"at-risk"}function s(y,$){let D=0;return y==="Q1"?D=45*60+r($):y==="Q2"?D=30*60+r($):y==="Q3"?D=15*60+r($):y==="Q4"&&(D=r($)),D/3600}function o(y,$){const E=s($,y)*3600;return Math.ceil(E/180)}function r(y){if(!y)return 0;const[$,E]=y.split(":").map(Number);return $*60+(E||0)}function c(y,$){if($==="pending")return`Game starts ${y.startTime}`;const{awayScore:E,homeScore:D,pickTeam:F,spread:T,total:M,isOver:O,finalScore:j,isTeamTotal:v=!1}=y;let A="";if($==="win"||$==="loss"){if(y.isFinal){const L=F===y.awayTeam;let p,m,h;if(y.pickType==="spread")p=(L?E-D:D-E)-T,m=T,h="spread";else if(y.pickType==="total"||y.pickType.includes("ou")){let G;v&&F?G=L?E:D:G=E+D,p=O?G-M:M-G,m=M,h=v?"team total":"total"}else y.pickType==="moneyline"&&(p=L?E-D:D-E,h="moneyline");const C=Math.abs(p).toFixed(1),I=v?" (TT)":"";if($==="win"?h==="spread"?A=`\u2713 Bet won - Covered ${m>=0?" + ":""}${m} by ${C} pts${I} - ${j}`:h==="total"?A=`\u2713 Bet won - ${O?"Over":"Under"} ${m}${I} by ${C} pts - ${j}`:h==="moneyline"&&(A=`\u2713 Bet won - Won by ${C} pts - ${j}`):h==="spread"?A=`\u2717 Bet lost - Failed to cover ${m>=0?"+":""}${m} (missed by ${C} pts)${I} - ${j}`:h==="total"?O?A=`\u2717 Bet lost - Over ${m}${I} (scored ${currentTotal}, short ${C} pts) - ${j}`:A=`\u2717 Bet lost - Under ${m}${I} (scored ${currentTotal}, over by ${C} pts) - ${j}`:h==="moneyline"&&(A=`\u2717 Bet lost - Lost by ${C} pts - ${j}`),A)return A}return $==="win"?`\u2713 Bet won - ${j||"Final"}`:`\u2717 Bet lost - ${j||"Final"}`}if($==="push")return`Push - ${j||y.finalScore}`;if(y.isLive){if(y.pickType==="spread"){const m=(F===y.awayTeam?E-D:D-E)-T;return $==="on-track"?`Covering by ${Math.abs(m).toFixed(1)} pts \u2022 ${y.timeRemaining} ${y.quarter}`:`Need ${Math.abs(m).toFixed(1)} pts to cover \u2022 ${y.timeRemaining} ${y.quarter}`}if(y.pickType==="total"||y.pickType.includes("ou")){const L=F===y.awayTeam;let p;v&&F?p=L?E:D:p=E+D;const m=O?p-M:M-p,h=v?"TT ":"";return $==="on-track"?`${O?"Over":"Under"} ${h}by ${Math.abs(m).toFixed(1)} pts \u2022 ${y.timeRemaining} ${y.quarter}`:`Need ${Math.abs(m).toFixed(1)} more pts for ${O?"over":"under"} ${h}\u2022 ${y.timeRemaining} ${y.quarter}`}if(y.pickType==="moneyline"){const p=F===y.awayTeam?E-D:D-E;return $==="on-track"?`Leading by ${Math.abs(p)} \u2022 ${y.timeRemaining} ${y.quarter}`:`Down ${Math.abs(p)} \u2022 ${y.timeRemaining} ${y.quarter}`}return`Live \u2022 ${y.timeRemaining} ${y.quarter}`}return`Status: ${$}`}function d(){const y=document.getElementById("picks-tbody");if(!y)return;const $=Array.from(y.children).filter(M=>M&&M.tagName==="TR"&&!M.classList.contains("parlay-legs")).filter(M=>M.style.display!=="none"),E={totalActivePicks:0,toWin:0,riskAmount:0,winCount:0,lossCount:0,pendingCount:0,onTrackCount:0,atRiskCount:0};$.forEach(M=>{const O=(M.getAttribute("data-status")||"").toLowerCase(),j=parseFloat(M.getAttribute("data-risk"))||0,v=parseFloat(M.getAttribute("data-win"))||0;E.riskAmount+=j,O==="win"?(E.winCount++,E.toWin+=v):O==="loss"?E.lossCount++:O==="pending"?(E.pendingCount++,E.totalActivePicks++,E.toWin+=v):O==="on-track"?(E.onTrackCount++,E.totalActivePicks++,E.toWin+=v):O==="at-risk"&&(E.atRiskCount++,E.totalActivePicks++,E.toWin+=v)}),u("active-picks",E.totalActivePicks),u("to-win",`$${E.toWin.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`);const D=E.riskAmount>0?(E.toWin-E.riskAmount)/E.riskAmount*100:0;u("roe",`${D>=0?"+":""}${D.toFixed(1)}%`);const F=S($,10),T=x(F);u("streak",T)}function u(y,$){const E=[`#${y} .kpi-value`,`.kpi-tile[data-metric="${y}"] .kpi-value`,`.metric-card[data-metric="${y}"] .metric-value`];for(const D of E){const F=document.querySelector(D);if(F){F.textContent=$;return}}}function S(y,$=10){return y.filter(E=>{const D=(E.getAttribute("data-status")||"").toLowerCase();return D==="win"||D==="loss"}).slice(0,$).map(E=>(E.getAttribute("data-status")||"").toLowerCase()==="win"?"W":"L")}function x(y){if(y.length===0)return"N/A";const $=y[0];let E=0;for(const D of y)if(D===$)E++;else break;return`${$}${E}`}function k(){document.querySelectorAll(".status-badge, .status-chip, .status-badge--mini").forEach($=>{const E=$.getAttribute("data-blurb")||$.getAttribute("title");if(!E||E===""){const D=$.closest("tr");if(D){const F=$.getAttribute("data-status")||D.getAttribute("data-status"),T=R(F);$.setAttribute("data-blurb",T)}}$.hasAttribute("title")&&$.removeAttribute("title")})}function R(y){return{pending:"Awaiting game start","on-track":"Currently covering the bet","at-risk":"Currently not covering",win:"Bet won successfully",loss:"Bet did not cover",push:"Bet pushed (tie)"}[y]||"Status unknown"}document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{d(),k()},500)});const H=window.updateTable||function(){};window.updateTable=function(){H.apply(this,arguments),setTimeout(d,100)},window.dashboardStatusLogic={calculatePickStatus:n,generateStatusTooltip:c,syncKPIsWithTable:d,initializeStatusTooltips:k}}(),function(){"use strict";const n=".status-badge, .status-badge--mini";let a=null,e=null,t=null,s=null,o=null;function r(){return a||(a=document.createElement("div"),a.className="status-tooltip",a.setAttribute("role","tooltip"),a.setAttribute("aria-hidden","true"),document.body.appendChild(a),a)}function c(p){return{live:"tooltip-live","on-track":"tooltip-on-track","at-risk":"tooltip-at-risk",win:"tooltip-win",final:"tooltip-win",loss:"tooltip-loss",pending:"tooltip-pending",push:"tooltip-push"}[p]||""}function d(p,m){const h=p.getBoundingClientRect(),C=m.getBoundingClientRect(),I={width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX,scrollY:window.scrollY},G=12,_=6;let q,W,Z="top";return q=h.top-C.height-G-_,W=h.left+h.width/2-C.width/2,q<I.scrollY+10&&(q=h.bottom+G+_,Z="bottom",q+C.height>I.scrollY+I.height-10&&(h.right+C.width+G<I.scrollX+I.width?(W=h.right+G,q=h.top+h.height/2-C.height/2,Z="right"):h.left-C.width-G>I.scrollX&&(W=h.left-C.width-G,q=h.top+h.height/2-C.height/2,Z="left"))),W<I.scrollX+10?W=I.scrollX+10:W+C.width>I.scrollX+I.width-10&&(W=I.scrollX+I.width-C.width-10),{top:q,left:W,placement:Z}}function u(p,m){const h=_=>String(_??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),C=_=>h(_).replace(/([+\-]?\d+(?:\.\d+)?%?)/g,'<span class="tooltip-highlight">$1</span>'),I=String(p||"").trim();if(!I)return"";const G=I.split("\u2022").map(_=>_.trim()).filter(_=>_);return G.length>1?G.map(C).join("<br>"):C(I)}function S(p,m){if(!m||m.trim()==="")return;o&&(clearTimeout(o),o=null);const h=r(),C=p.getAttribute("data-status")||"",I=u(m,C);h.innerHTML=`<span class="tooltip-content">${I}</span>`,h.className="status-tooltip "+c(C),h.style.visibility="hidden",h.style.display="block",h.setAttribute("aria-hidden","false");const G=d(p,h);h.style.top=G.top+"px",h.style.left=G.left+"px",h.setAttribute("data-placement",G.placement),h.style.visibility="visible",h.offsetWidth,h.style.opacity="1",h.classList.add("showing"),e=p}function x(){a&&(s&&(clearTimeout(s),s=null),a.classList.remove("showing"),a.style.opacity="0",a.setAttribute("aria-hidden","true"),o&&clearTimeout(o),o=setTimeout(()=>{a&&(a.style.display="none",a.style.visibility="hidden"),e=null,o=null},80))}function k(p){const m=p.getAttribute("data-blurb")||p.getAttribute("title")||"",h=p.getAttribute("data-status-info")||"",C=p.getAttribute("data-margin")||"";let I=[];m.trim()&&I.push(m.trim()),C&&I.push(C),h&&I.push(h);let G=I.join(" \u2022 ");return G||(G=p.textContent||""),G.trim()}function R(p){const m=p.currentTarget;if(m.hasAttribute("title")){const C=m.getAttribute("title");C&&!m.hasAttribute("data-blurb")&&m.setAttribute("data-blurb",C),m.removeAttribute("title")}const h=k(m);h&&(t&&(clearTimeout(t),t=null),s&&(clearTimeout(s),s=null),S(m,h))}function H(p){s&&(clearTimeout(s),s=null),x()}function y(p){const m=p.currentTarget,h=k(m);h&&(s&&(clearTimeout(s),s=null),S(m,h))}function $(){s&&(clearTimeout(s),s=null),x()}function E(){document.querySelectorAll(n).forEach(m=>{if(m.hasAttribute("title")){const h=m.getAttribute("title");h&&!m.hasAttribute("data-blurb")&&m.setAttribute("data-blurb",h),m.removeAttribute("title")}m.removeEventListener("mouseenter",R),m.removeEventListener("mouseleave",H),m.removeEventListener("focus",y),m.removeEventListener("blur",$),m.addEventListener("mouseenter",R),m.addEventListener("mouseleave",H),m.addEventListener("focus",y,!0),m.addEventListener("blur",$,!0),m.hasAttribute("tabindex")||m.setAttribute("tabindex","0")})}function D(){if(e&&a&&a.style.opacity==="1"){const p=k(e);p&&S(e,p)}}function F(){document.removeEventListener("mouseenter",T,!0),document.removeEventListener("mouseleave",M,!0),document.removeEventListener("focusin",O,!0),document.removeEventListener("focusout",j,!0),document.addEventListener("mouseenter",T,!0),document.addEventListener("mouseleave",M,!0),document.addEventListener("focusin",O,!0),document.addEventListener("focusout",j,!0)}function T(p){if(!p.target||typeof p.target.closest!="function")return;const m=p.target.closest(n);m&&R({currentTarget:m})}function M(p){if(!p.target||typeof p.target.closest!="function")return;const m=p.target.closest(n);m&&H({currentTarget:m})}function O(p){if(!p.target||typeof p.target.closest!="function")return;const m=p.target.closest(n);m&&y({currentTarget:m})}function j(p){!p.target||typeof p.target.closest!="function"||!p.target.closest(n)||$()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{E(),F()}):(E(),F());const v=window.updateTable||function(){};window.updateTable=function(){v.apply(this,arguments),setTimeout(E,100)};let A;window.addEventListener("resize",()=>{clearTimeout(A),A=setTimeout(D,100)});let L;window.addEventListener("scroll",()=>{clearTimeout(L),L=setTimeout(D,50)},{passive:!0}),window.addEventListener("beforeunload",()=>{a&&a.remove()}),window.statusTooltipSystem={initialize:E,setupDelegation:F,show:S,hide:x}}(),function(){"use strict";const n=new Date,a=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,e=a.replace(/-/g,""),t=6*60*60*1e3,s=18e4,o=6e5;let r=null,c={},d=null;const u={NBA:0,NFL:0,NCAAM:0,NCAAF:0};let S=s;function x(){const v=window.APP_CONFIG?.API_BASE_URL;if(v)return`${v.replace(/\/+$/,"")}/scoreboard`;const A=window.APP_CONFIG?.FUNCTIONS_BASE_URL;return A?`${A.replace(/\/+$/,"")}/scoreboard`:"/api/scoreboard"}async function k(v){const L=`${x()}/${v}?date=${a}`;console.log(`[AUTO-GAME-FETCHER] Fetching ${v} via proxy: ${L}`);const p=await fetch(L);if(!p.ok)throw new Error(`Scoreboard proxy ${v} error: ${p.status}`);return await p.json()}async function R(v){const A=Date.now();if(u[v]&&A-u[v]<t)return;const L=v==="NBA"?"nba":v==="NFL"?"nfl":v==="NCAAM"?"mens-college-basketball":v==="NCAAF"?"college-football":null;if(!L)return;const m=`https://site.api.espn.com/apis/v2/sports/${v==="NBA"||v==="NCAAM"?"basketball":"football"}/${L}/standings`;try{console.log(`[AUTO-GAME-FETCHER] Fetching ${v} standings...`);const h=await fetch(m);if(!h.ok)return;const I=(await h.json()).children||[];for(const G of I){const _=G.standings?.entries||[];for(const q of _){const W=q.team?.displayName;if(!W)continue;const Z=q.stats||[],Q=Z.find(l=>l.name==="wins"),te=Z.find(l=>l.name==="losses"),w=Q?.displayValue||Q?.value||"0",P=te?.displayValue||te?.value||"0";c[W.toLowerCase()]=`${w}-${P}`}}u[v]=A,console.log(`[AUTO-GAME-FETCHER] Loaded ${Object.keys(c).length} team records for ${v}`)}catch(h){console.warn(`[AUTO-GAME-FETCHER] Could not fetch ${v} standings:`,h.message)}}function H(v){if(!v)return"";const A=v.toLowerCase();return c[A]||""}async function y(v){const A=v==="NCAAM"?"mens-college-basketball":v==="NBA"?"nba":v==="NCAAF"?"college-football":v==="NFL"?"nfl":null;if(!A)throw new Error("Unknown sport");const m=`https://site.api.espn.com/apis/site/v2/sports/${v==="NBA"||v==="NCAAM"?"basketball":"football"}/${A}/scoreboard?dates=${e}`;console.log(`[AUTO-GAME-FETCHER] Fetching ${v} from: ${m}`);const h=await fetch(m);if(!h.ok)throw new Error(`ESPN ${v} API error: ${h.status}`);return await h.json()}function $(v,A){return!v||!v.events||v.events.length===0?[]:v.events.map(L=>{const p=L.competitions?.[0],m=p?.competitors||[],h=m.find(W=>W.homeAway==="home"),C=m.find(W=>W.homeAway==="away");if(!p||!h||!C)return null;const G=(p.status||L.status||{}).type||{},_=C.team.displayName,q=h.team.displayName;return{sport:A,date:a,time:new Date(L.date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),awayTeam:_,homeTeam:q,awayRecord:H(_),homeRecord:H(q),awayScore:parseInt(C.score,10)||0,homeScore:parseInt(h.score,10)||0,status:G.description||G.name||"Scheduled",statusDetail:G.detail||"",gameId:L.id,channel:p.broadcasts?.[0]?.names?.[0]||"TBD"}}).filter(Boolean)}function E(v,A){return!Array.isArray(v)||v.length===0?[]:v.map(L=>{const p=L.AwayTeam||L.AwayTeamName||"",m=L.HomeTeam||L.HomeTeamName||"";let h="TBD";if(L.DateTime)try{h=new Date(L.DateTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{h="TBD"}const C=(L.Status||"").toLowerCase();let I="Scheduled",G="";return C==="final"||C==="f"||C==="f/ot"?(I="Final",G=C==="f/ot"?"Final/OT":"Final"):C==="inprogress"||C==="in progress"?(I="In Progress",G=L.TimeRemaining?`Q${L.Quarter} ${L.TimeRemaining}`:`Q${L.Quarter||1}`):C==="halftime"?(I="Halftime",G="Halftime"):C==="postponed"?I="Postponed":C==="canceled"&&(I="Canceled"),{sport:A,date:a,time:h,awayTeam:p,homeTeam:m,awayRecord:H(p),homeRecord:H(m),awayScore:L.AwayScore||0,homeScore:L.HomeScore||0,status:I,statusDetail:G,gameId:String(L.GameID||L.ScoreID||""),channel:L.Channel||"TBD",source:"sportsdata.io"}}).filter(L=>L.awayTeam&&L.homeTeam)}async function D(v=!1){if(!v&&r&&d&&Date.now()-d<6e4)return r;const A=new Set(window.APP_CONFIG?.WEEKLY_LINEUP_DISABLED_LEAGUES||window.WEEKLY_LINEUP_DISABLED_LEAGUES||["NFL","NCAAF"]),L=h=>!A.has(h);console.log("[AUTO-GAME-FETCHER] Fetching team standings for records (cached)...");const p=[];L("NBA")&&p.push(R("NBA")),L("NFL")&&p.push(R("NFL")),L("NCAAM")&&p.push(R("NCAAM")),L("NCAAF")&&p.push(R("NCAAF")),await Promise.all(p);const m=[];try{if(L("NCAAM")){console.log("[AUTO-GAME-FETCHER] Fetching NCAAM games...");const h=await y("NCAAM"),C=$(h,"NCAAM");m.push(...C),console.log(`[AUTO-GAME-FETCHER] Found ${C.length} NCAAM games`)}}catch(h){console.error("[AUTO-GAME-FETCHER] Error fetching NCAAM:",h.message)}try{if(L("NBA")){console.log("[AUTO-GAME-FETCHER] Fetching NBA games...");const h=await y("NBA"),C=$(h,"NBA");m.push(...C),console.log(`[AUTO-GAME-FETCHER] Found ${C.length} NBA games`)}}catch(h){console.error("[AUTO-GAME-FETCHER] Error fetching NBA:",h.message)}try{if(L("NFL")){console.log("[AUTO-GAME-FETCHER] Fetching NFL games from SportsDataIO...");const h=await k("nfl"),C=E(h,"NFL");if(C.length>0)m.push(...C),console.log(`[AUTO-GAME-FETCHER] Found ${C.length} NFL games (SportsDataIO)`);else throw new Error("No games from SportsDataIO")}}catch(h){if(L("NFL")){console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NFL failed (${h.message}), trying ESPN...`);try{const C=await y("NFL"),I=$(C,"NFL");m.push(...I),console.log(`[AUTO-GAME-FETCHER] Found ${I.length} NFL games (ESPN fallback)`)}catch(C){console.error("[AUTO-GAME-FETCHER] Error fetching NFL from both sources:",C.message)}}}try{if(L("NCAAF")){console.log("[AUTO-GAME-FETCHER] Fetching NCAAF games from SportsDataIO...");const h=await k("cfb"),C=E(h,"NCAAF");if(C.length>0)m.push(...C),console.log(`[AUTO-GAME-FETCHER] Found ${C.length} NCAAF games (SportsDataIO)`);else throw new Error("No games from SportsDataIO")}}catch(h){if(L("NCAAF")){console.warn(`[AUTO-GAME-FETCHER] SportsDataIO NCAAF failed (${h.message}), trying ESPN...`);try{const C=await y("NCAAF"),I=$(C,"NCAAF");m.push(...I),console.log(`[AUTO-GAME-FETCHER] Found ${I.length} NCAAF games (ESPN fallback)`)}catch(C){console.error("[AUTO-GAME-FETCHER] Error fetching NCAAF from both sources:",C.message)}}}return r=m,d=Date.now(),console.log(`[AUTO-GAME-FETCHER] Total games today: ${m.length}`),m}function F(v,A){if(!r)return null;const L=v.toLowerCase(),p=A?A.toLowerCase():null;return r.find(m=>{const h=m.awayTeam.toLowerCase(),C=m.homeTeam.toLowerCase();return p?h.includes(L)&&C.includes(p)||h.includes(p)&&C.includes(L):h.includes(L)||C.includes(L)})}function T(v){if(!v)return!1;const A=(v.status||"").toLowerCase();return!A.includes("scheduled")&&!A.includes("pre")}function M(v){if(!v)return!1;const A=(v.status||"").toLowerCase();return A.includes("final")||A.includes("completed")}function O(v){return v?M(v)?`Game finished: ${v.awayTeam} ${v.awayScore}, ${v.homeTeam} ${v.homeScore}`:T(v)?`In progress: ${v.awayTeam} ${v.awayScore}, ${v.homeTeam} ${v.homeScore}`:`Scheduled for ${v.time}`:"Game not found for today"}async function j(){try{await D(!0),S=s}catch(v){console.error("[AUTO-GAME-FETCHER] Refresh failed:",v.message||v),S=Math.min(S*2,o)}finally{setTimeout(j,S)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{D().catch(console.error).finally(()=>j())}):D().catch(console.error).finally(()=>j()),window.AutoGameFetcher={fetchTodaysGames:D,findGame:F,hasGameStarted:T,isGameFinished:M,getGameStatusMessage:O,getTodaysGames:()=>r,getTeamRecord:H,getRecordsCache:()=>c},console.log("\u2705 AutoGameFetcher v2.4 loaded - NFL/NCAAF: SportsDataIO via proxy | NBA/NCAAM: ESPN")}(),function(){"use strict";let n=1e3;const a={spurs:"San Antonio Spurs","san antonio":"San Antonio Spurs",sas:"San Antonio Spurs",knicks:"New York Knicks","new york":"New York Knicks",nyk:"New York Knicks",lakers:"Los Angeles Lakers","la lakers":"Los Angeles Lakers",lal:"Los Angeles Lakers",clippers:"Los Angeles Clippers","la clippers":"Los Angeles Clippers",lac:"Los Angeles Clippers",warriors:"Golden State Warriors","golden state":"Golden State Warriors",gsw:"Golden State Warriors",gs:"Golden State Warriors",celtics:"Boston Celtics",boston:"Boston Celtics",bos:"Boston Celtics",heat:"Miami Heat",miami:"Miami Heat",mia:"Miami Heat",bulls:"Chicago Bulls",chicago:"Chicago Bulls",chi:"Chicago Bulls",cavs:"Cleveland Cavaliers",cavaliers:"Cleveland Cavaliers",cleveland:"Cleveland Cavaliers",cle:"Cleveland Cavaliers",mavs:"Dallas Mavericks",mavericks:"Dallas Mavericks",dallas:"Dallas Mavericks",dal:"Dallas Mavericks",nuggets:"Denver Nuggets",denver:"Denver Nuggets",den:"Denver Nuggets",pistons:"Detroit Pistons",detroit:"Detroit Pistons",det:"Detroit Pistons",rockets:"Houston Rockets",houston:"Houston Rockets",hou:"Houston Rockets",pacers:"Indiana Pacers",indiana:"Indiana Pacers",ind:"Indiana Pacers",grizzlies:"Memphis Grizzlies",memphis:"Memphis Grizzlies",mem:"Memphis Grizzlies",bucks:"Milwaukee Bucks",milwaukee:"Milwaukee Bucks",mil:"Milwaukee Bucks",wolves:"Minnesota Timberwolves",timberwolves:"Minnesota Timberwolves",minnesota:"Minnesota Timberwolves",min:"Minnesota Timberwolves",pelicans:"New Orleans Pelicans","new orleans":"New Orleans Pelicans",nop:"New Orleans Pelicans",no:"New Orleans Pelicans",nets:"Brooklyn Nets",brooklyn:"Brooklyn Nets",bkn:"Brooklyn Nets",bk:"Brooklyn Nets",thunder:"Oklahoma City Thunder",okc:"Oklahoma City Thunder",magic:"Orlando Magic",orlando:"Orlando Magic",orl:"Orlando Magic","76ers":"Philadelphia 76ers",sixers:"Philadelphia 76ers",philly:"Philadelphia 76ers",philadelphia:"Philadelphia 76ers",phi:"Philadelphia 76ers",suns:"Phoenix Suns",phoenix:"Phoenix Suns",phx:"Phoenix Suns",blazers:"Portland Trail Blazers",portland:"Portland Trail Blazers",por:"Portland Trail Blazers",kings:"Sacramento Kings",sacramento:"Sacramento Kings",sac:"Sacramento Kings",raptors:"Toronto Raptors",toronto:"Toronto Raptors",tor:"Toronto Raptors",jazz:"Utah Jazz",utah:"Utah Jazz",uta:"Utah Jazz",wizards:"Washington Wizards",washington:"Washington Wizards",was:"Washington Wizards",wsh:"Washington Wizards",hawks:"Atlanta Hawks",atlanta:"Atlanta Hawks",atl:"Atlanta Hawks",hornets:"Charlotte Hornets",charlotte:"Charlotte Hornets",cha:"Charlotte Hornets",chiefs:"Kansas City Chiefs","kansas city":"Kansas City Chiefs",kc:"Kansas City Chiefs",eagles:"Philadelphia Eagles",cowboys:"Dallas Cowboys",niners:"San Francisco 49ers","49ers":"San Francisco 49ers",bills:"Buffalo Bills",buffalo:"Buffalo Bills",ravens:"Baltimore Ravens",baltimore:"Baltimore Ravens",bengals:"Cincinnati Bengals",cincinnati:"Cincinnati Bengals",browns:"Cleveland Browns",steelers:"Pittsburgh Steelers",pittsburgh:"Pittsburgh Steelers",colts:"Indianapolis Colts",texans:"Houston Texans",jaguars:"Jacksonville Jaguars",jags:"Jacksonville Jaguars",jacksonville:"Jacksonville Jaguars",titans:"Tennessee Titans",tennessee:"Tennessee Titans",broncos:"Denver Broncos",chargers:"Los Angeles Chargers","la chargers":"Los Angeles Chargers",raiders:"Las Vegas Raiders",vegas:"Las Vegas Raiders",seahawks:"Seattle Seahawks",seattle:"Seattle Seahawks",cardinals:"Arizona Cardinals",arizona:"Arizona Cardinals",rams:"Los Angeles Rams","la rams":"Los Angeles Rams",packers:"Green Bay Packers","green bay":"Green Bay Packers",bears:"Chicago Bears",lions:"Detroit Lions",vikings:"Minnesota Vikings",saints:"New Orleans Saints",falcons:"Atlanta Falcons",panthers:"Carolina Panthers",carolina:"Carolina Panthers",bucs:"Tampa Bay Buccaneers",buccaneers:"Tampa Bay Buccaneers",tampa:"Tampa Bay Buccaneers","tampa bay":"Tampa Bay Buccaneers",commanders:"Washington Commanders",giants:"New York Giants","ny giants":"New York Giants",jets:"New York Jets","ny jets":"New York Jets",patriots:"New England Patriots",pats:"New England Patriots","new england":"New England Patriots",dolphins:"Miami Dolphins",army:"Army Black Knights",navy:"Navy Midshipmen",alabama:"Alabama Crimson Tide",bama:"Alabama Crimson Tide",georgia:"Georgia Bulldogs","ohio state":"Ohio State Buckeyes","ohio st":"Ohio State Buckeyes",osu:"Ohio State Buckeyes",michigan:"Michigan Wolverines","michigan state":"Michigan State Spartans","michigan st":"Michigan State Spartans",msu:"Michigan State Spartans",texas:"Texas Longhorns","notre dame":"Notre Dame Fighting Irish",duke:"Duke Blue Devils",unc:"North Carolina Tar Heels","north carolina":"North Carolina Tar Heels",kentucky:"Kentucky Wildcats",kansas:"Kansas Jayhawks",gonzaga:"Gonzaga Bulldogs",auburn:"Auburn Tigers",tennessee:"Tennessee Volunteers",purdue:"Purdue Boilermakers",uconn:"UConn Huskies","iowa state":"Iowa State Cyclones","iowa st":"Iowa State Cyclones",houston:"Houston Cougars",baylor:"Baylor Bears",arizona:"Arizona Wildcats",ucla:"UCLA Bruins",florida:"Florida Gators",lsu:"LSU Tigers",arkansas:"Arkansas Razorbacks",oregon:"Oregon Ducks",wisconsin:"Wisconsin Badgers",illinois:"Illinois Fighting Illini",iowa:"Iowa Hawkeyes",siena:"Siena Saints","st peters":"Saint Peter's Peacocks","saint peters":"Saint Peter's Peacocks","st peter's":"Saint Peter's Peacocks","saint peter's":"Saint Peter's Peacocks",iona:"Iona Gaels",merrimack:"Merrimack Warriors","robert morris":"Robert Morris Colonials","rob morris":"Robert Morris Colonials","wright state":"Wright State Raiders","wright st":"Wright State Raiders","cleveland state":"Cleveland State Vikings","cleveland st":"Cleveland State Vikings",ipfw:"Purdue Fort Wayne Mastodons","purdue fort wayne":"Purdue Fort Wayne Mastodons","n kentucky":"Northern Kentucky Norse","northern kentucky":"Northern Kentucky Norse",nku:"Northern Kentucky Norse",youngstown:"Youngstown State Penguins","youngstown state":"Youngstown State Penguins","youngstown st":"Youngstown State Penguins","wisc green bay":"Green Bay Phoenix","green bay":"Green Bay Phoenix","wisconsin green bay":"Green Bay Phoenix","detroit mercy":"Detroit Mercy Titans",detroit:"Detroit Mercy Titans",rice:"Rice Owls",utsa:"UTSA Roadrunners",tulane:"Tulane Green Wave",uab:"UAB Blazers","louisiana tech":"Louisiana Tech Bulldogs","la tech":"Louisiana Tech Bulldogs","wisc milwaukee":"Milwaukee Panthers",milwaukee:"Milwaukee Panthers","wisconsin milwaukee":"Milwaukee Panthers",uwm:"Milwaukee Panthers",oakland:"Oakland Golden Grizzlies",marist:"Marist Red Foxes","sacred heart":"Sacred Heart Pioneers",fairfield:"Fairfield Stags",quinnipiac:"Quinnipiac Bobcats",rider:"Rider Broncs",niagara:"Niagara Purple Eagles",manhattan:"Manhattan Jaspers",canisius:"Canisius Golden Griffins","mount st marys":"Mount St. Mary's Mountaineers",wagner:"Wagner Seahawks","youngstown state":"Youngstown State Penguins","purdue fort wayne":"Purdue Fort Wayne Mastodons",marshall:"Marshall Thundering Herd",wku:"Western Kentucky Hilltoppers","western kentucky":"Western Kentucky Hilltoppers",fiu:"FIU Panthers","middle tennessee":"Middle Tennessee Blue Raiders",mtsu:"Middle Tennessee Blue Raiders","old dominion":"Old Dominion Monarchs",odu:"Old Dominion Monarchs",charlotte:"Charlotte 49ers","east carolina":"East Carolina Pirates",ecu:"East Carolina Pirates","north texas":"North Texas Mean Green",utep:"UTEP Miners","sam houston":"Sam Houston Bearkats","jacksonville st":"Jacksonville State Gamecocks","new mexico st":"New Mexico State Aggies",liberty:"Liberty Flames","kennesaw state":"Kennesaw State Owls"};let e=!1;async function t(){if(!e)try{const[l,i]=await Promise.all([fetch("assets/data/team-variants/ncaam_team_variants.json").then(g=>g.ok?g.json():null).catch(()=>null),fetch("assets/data/team-variants/nba_team_variants.json").then(g=>g.ok?g.json():null).catch(()=>null)]);if(l){let g=0;for(const[f,b]of Object.entries(l)){const B=b.name,N=(b.location||"").toLowerCase().trim(),z=(b.nickname||"").toLowerCase().trim();N&&!a[N]&&(a[N]=B),f&&!a[f.toLowerCase()]&&(a[f.toLowerCase()]=B);for(const V of b.abbreviations||[]){const K=V.toLowerCase().trim();K.length>2&&!a[K]&&(a[K]=B)}z&&z.length>5&&!a[z]&&(a[z]=B),g++}console.log(`\u2705 Loaded ${g} NCAAM team variants into standardizer`)}if(i){let g=0;for(const[f,b]of Object.entries(i)){const B=b.name||b.fullName,N=(b.location||"").toLowerCase().trim();N&&!a[N]&&(a[N]=B),f&&!a[f.toLowerCase()]&&(a[f.toLowerCase()]=B);for(const z of b.abbreviations||[]){const V=z.toLowerCase().trim();V.length>1&&!a[V]&&(a[V]=B)}g++}console.log(`\u2705 Loaded ${g} NBA team variants into standardizer`)}e=!0}catch(l){console.warn("[PickStandardizer] Could not load team variants:",l)}}t();function s(l,i={}){if(i.unitMultiplier&&(n=i.unitMultiplier),typeof l=="string"&&o(l))return console.log("\u{1F4CB} Detected bet-history paste format"),r(l);if(typeof l=="string"&&l.includes("<")){if(l.includes('data-panel="line"')||l.includes("data-sport-line"))return d(l);if(l.includes("<table")||l.includes("<tr"))return M(l);if(l.includes("class="))return d(l)}return A(l)}function o(l){if(typeof l!="string")return!1;const i=/\$[\d,]+/.test(l),g=/\b(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\b\s+\d{1,2},?\s*\d{4}/i.test(l),f=/\bML\b/i.test(l)||/[+-]\d{3,4}/.test(l);return i&&(g||f)}function r(l){if(typeof l!="string")return[];const i=l.split(`
`).map(g=>g.trim()).filter(Boolean).map(g=>g.replace(/^(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{1,2},?\s*\d{4}\s+\d{1,2}:\d{2}\s*(?:am|pm)?\s*/i,"").trim()).filter(g=>!/^\$[\d,]+/.test(g));return A(i.join(`
`))}function c(l,i="NBA",g=null){return typeof l!="string"?null:p(l,i,g)}function d(l){const i=[],f=new DOMParser().parseFromString(l,"text/html");let b=f.querySelectorAll('[data-panel="line"]');if(b.length===0&&(b=f.querySelectorAll(".line-panel, .game-panel, [data-sport-line]")),b.length===0&&(b=f.querySelectorAll(".lines-row, .game-row, .event-row")),console.log(`\u{1F50D} Found ${b.length} game panels to parse`),b.forEach((B,N)=>{try{const z=u(B);console.log(`  Panel ${N+1}: ${z.length} picks found`),i.push(...z)}catch(z){console.warn("Failed to parse game panel:",z)}}),i.length===0){console.log("\u{1F4DD} No HTML picks found, falling back to text parsing...");const B=f.body?.textContent||l.replace(/<[^>]*>/g," "),N=A(B);i.push(...N)}return console.log(`\u{1F4CA} Total parsed: ${i.length} betting lines`),i}function u(l){const i=[],g=S(l);return!g.firstTeam&&!g.secondTeam||(l.querySelectorAll(".group, .line-group, [data-group-line]").forEach(b=>{try{const B=x(b,g);i.push(...B)}catch(B){console.warn("Failed to parse line group:",B)}}),i.length===0&&l.querySelectorAll('.line-play, .bet-line, [data-field="line"]').forEach(B=>{const N=H(B,g);N&&i.push(N)})),i}function S(l){const i={firstTeam:"",secondTeam:"",date:Q(),time:"",sport:"NBA",league:""},g=l.querySelector('[data-field="first-team"], .first-team, .away-team, .team-1'),f=l.querySelector('[data-field="second-team"], .second-team, .home-team, .team-2');g&&(i.firstTeam=g.textContent.trim()),f&&(i.secondTeam=f.textContent.trim());const b=l.querySelector('[data-field="min-date"], .game-date, .date'),B=l.querySelector('[data-field="min-time"], .game-time, .time');b&&(i.date=b.textContent.trim()),B&&(i.time=B.textContent.trim());const N=l.querySelector('[data-field="league-name"], .league, .sport-name');N&&(i.league=N.textContent.trim(),i.sport=F(i.league));const z=l.querySelector("[data-sport-line]");if(z){const V=z.getAttribute("data-sport-line");V&&(i.sport=T(V))}return i.firstTeam&&i.secondTeam&&(i.game=`${i.firstTeam} @ ${i.secondTeam}`,i.awayTeam=i.firstTeam,i.homeTeam=i.secondTeam),i}function x(l,i){const g=[],f=k(l);return l.querySelectorAll(".line-play, .bet-option, [data-type]").forEach((B,N)=>{const z=R(B,i,f,N);z&&g.push(z)}),g}function k(l){const i=l.className||"",g=l.getAttribute("data-type")||"",f=l.textContent.toLowerCase();return g.includes("spread")||g.includes("ps")?"spread":g.includes("ml")||g.includes("money")?"moneyline":g.includes("total")||g.includes("ou")?g.includes("team")||g.includes("tt")?"team-total":"total":i.includes("spread")?"spread":i.includes("money")||i.includes("ml")?"moneyline":i.includes("team-total")||i.includes("tt")?"team-total":i.includes("total")||i.includes("ou")?"total":i.includes("group-1")||i.includes("group-0")?"spread":i.includes("group-2")?"moneyline":i.includes("group-3")?"total":i.includes("group-4")||i.includes("group-5")?"team-total":f.includes("spread")?"spread":f.includes("money")?"moneyline":f.includes("over")||f.includes("under")?"total":"spread"}function R(l,i,g,f){const b={sport:i.sport,segment:"Full Game",status:"pending",date:i.date,time:i.time,game:i.game,awayTeam:i.awayTeam,homeTeam:i.homeTeam},B=l.querySelector('[data-field="line"], .line, .spread-value, .total-value'),N=l.querySelector('[data-field="price"], .price, .odds, .juice');let z=B?B.textContent.trim():"",V=N?N.textContent.trim():"-110";z=z.replace(//g,".5").replace(//g,".25").replace(//g,".75");const K=y(l,f);switch(g){case"spread":b.pickType="spread",b.pickTeam=K===0?i.firstTeam:i.secondTeam,b.line=E(z),b.odds=D(V);break;case"moneyline":b.pickType="moneyline",b.pickTeam=K===0?i.firstTeam:i.secondTeam,b.odds=D(z||V);break;case"total":b.pickType="total",b.pickDirection=K===0?"Over":"Under",b.pickTeam=b.pickDirection,b.line=z.replace(/[ou]/gi,"").trim(),b.odds=D(V);break;case"team-total":b.pickType="team-total",b.pickDirection=$(l,f);const U=Math.floor(f/2);b.pickTeam=U===0?i.firstTeam:i.secondTeam,b.line=z.replace(/[ou]/gi,"").trim(),b.odds=D(V);break}return!b.pickTeam||!b.pickType||!b.line&&!b.odds&&b.pickType!=="moneyline"?null:b}function H(l,i){const g={sport:i.sport,segment:"Full Game",status:"pending",date:i.date,time:i.time,game:i.game,awayTeam:i.awayTeam,homeTeam:i.homeTeam},f=l.textContent.trim();return!f||(v(g,f),!g.pickType)?null:(g.pickTeam||(g.pickTeam=i.firstTeam||"Unknown"),g)}function y(l,i){const g=l.getAttribute("data-team")||l.getAttribute("data-index");if(g)return parseInt(g)||0;const f=l.parentElement;if(f){const B=Array.from(f.children).indexOf(l);if(B!==-1)return B%2}return i%2}function $(l,i){const g=l.textContent.toLowerCase();return g.includes("over")||g.includes("o ")?"Over":g.includes("under")||g.includes("u ")?"Under":i%2===0?"Over":"Under"}function E(l){return l?(l=l.trim(),/^\d+\.?\d*$/.test(l)||/^[+-]/.test(l)?l:/^\d/.test(l)?"+"+l:l):""}function D(l){if(!l)return"-110";if(l=l.trim(),l=l.replace(/[$]/g,""),/^\d+$/.test(l)){const i=parseInt(l);return i>=100?`-${i}`:`+${i}`}return/^[+-]\d+/.test(l)?l:"-110"}function F(l){const i=l.toLowerCase();return i.includes("nba")||i.includes("basketball")?"NBA":i.includes("nfl")||i.includes("football")?"NFL":i.includes("ncaab")||i.includes("ncaam")||i.includes("college basketball")?"NCAAB":i.includes("ncaaf")||i.includes("college football")?"NCAAF":i.includes("mlb")||i.includes("baseball")?"MLB":i.includes("nhl")||i.includes("hockey")?"NHL":i.includes("soccer")||i.includes("mls")||i.includes("premier")?"Soccer":"NBA"}function T(l){const i=l.toLowerCase();return i.includes("nba")?"NBA":i.includes("nfl")?"NFL":i.includes("ncaab")||i.includes("ncaam")?"NCAAB":i.includes("ncaaf")?"NCAAF":i.includes("mlb")?"MLB":i.includes("nhl")?"NHL":"NBA"}function M(l){const i=[],b=new DOMParser().parseFromString(l,"text/html").querySelectorAll("tr[data-ticket], tr.odd, tr.even"),B=new Set;return b.forEach(N=>{try{const z=N.getAttribute("data-ticket")||"",V=N.querySelector(".type-magic");if(V!==null){const U=V.textContent.trim(),J=N.querySelectorAll(".wager-simple"),X=parseFloat(N.querySelector("[data-risk]")?.getAttribute("data-risk"))||0,se=parseFloat(N.querySelector("[data-win]")?.getAttribute("data-win"))||0;J.forEach((ee,ne)=>{const Y=O(ee,z,U,ne);if(Y){const ae=`${z}_${Y.pickTeam}_${Y.line||"ML"}_${Y.segment}`;B.has(ae)||(B.add(ae),Y.risk=Math.round(X/J.length),Y.win=Math.round(se/J.length),Y.parlayId=z,Y.parlayType=U,Y.isParlay=!0,i.push(Y))}})}else{const U=j(N);U&&(U.isParlay=!1,i.push(U))}}catch(z){console.warn("Failed to parse HTML row:",z)}}),i}function O(l,i,g,f){const b={sport:"NCAAB",segment:"Full Game",status:"pending"},B=l.querySelector(".choosen");if(B&&(b.pickTeam=B.textContent.trim(),b.pickTeam.includes("/"))){const U=b.pickTeam.split("/").map(J=>J.trim());b.awayTeam=U[0],b.homeTeam=U[1]}const N=l.querySelector(".line-selected");if(N){const U=N.textContent.trim();v(b,U)}const z=l.querySelector(".period-description-s");if(z){const U=z.textContent.trim().toLowerCase();U.includes("1st half")||U.includes("1h")?b.segment="1st Half":(U.includes("2nd half")||U.includes("2h"))&&(b.segment="2nd Half")}const V=l.querySelector("img.team-logo");if(V){const U=V.getAttribute("src")||"";(U.includes("NBA")||U.includes("Spurs")||U.includes("Knicks"))&&(b.sport="NBA")}if(b.pickTeam){const U=b.pickTeam.toLowerCase();(U.includes("spurs")||U.includes("knicks")||U.includes("lakers")||U.includes("celtics"))&&(b.sport="NBA")}const K=l.closest("tr")?.querySelector("td span");if(K){const U=K.textContent.trim(),J=q(U);J&&(b.date=J.date,b.time=J.time)}return!b.pickTeam||!b.pickType?null:b}function j(l){const i={sport:"NBA",segment:"Full Game",status:"pending"},g=l.querySelector("td span");if(g){const U=g.textContent.trim(),J=q(U);J&&(i.date=J.date,i.time=J.time)}const f=l.querySelector(".choosen");f&&(i.pickTeam=f.textContent.trim());const b=l.querySelector(".line-selected");if(b){const U=b.textContent.trim();v(i,U)}const B=l.querySelector(".period-description-s");if(B){const U=B.textContent.trim().toLowerCase();U.includes("1st half")||U.includes("1h")?i.segment="1st Half":U.includes("2nd half")||U.includes("2h")?i.segment="2nd Half":(U.includes("1st quarter")||U.includes("q1")||U.includes("1q"))&&(i.segment="1st Quarter")}const N=l.querySelector("[data-risk]");if(N)i.risk=parseFloat(N.getAttribute("data-risk"))||0;else{const U=l.querySelector(".risk-col span");U&&(i.risk=_(U.textContent))}const z=l.querySelector("[data-win]");if(z)i.win=parseFloat(z.getAttribute("data-win"))||0;else{const U=l.querySelector(".win-col span");U&&(i.win=_(U.textContent))}const V=l.querySelector(".d-r");if(V){const U=V.textContent;if(U.includes("/")||U.includes(" vs ")||U.includes(" @ ")){i.game=U.trim();const J=W(U);J&&(i.awayTeam=J.away,i.homeTeam=J.home)}}const K=l.querySelector(".selection-S .d-r, .selection-M .d-r");if(K){const U=K.textContent.toLowerCase();U.includes("nba")?i.sport="NBA":U.includes("nfl")?i.sport="NFL":U.includes("ncaab")||U.includes("ncaam")?i.sport="NCAAB":U.includes("ncaaf")?i.sport="NCAAF":U.includes("mlb")?i.sport="MLB":U.includes("nhl")&&(i.sport="NHL")}return!i.pickTeam||!i.pickType?null:i}function v(l,i){if(i=i.replace(//g,".5").replace(//g,".25").replace(//g,".75"),/\bML\b/i.test(i)){l.pickType="moneyline";const b=i.match(/ML\s*([+-]\d+)/i);b&&(l.odds=b[1]);return}if(/\b(over|under|o|u)\s*(\d+\.?\d*)/i.test(i)){const b=i.match(/\b(over|under|o|u)\s*(\d+\.?\d*)/i);l.pickType="total",l.pickDirection=/over|o/i.test(b[1])?"Over":"Under",l.line=b[2];const B=i.match(/([+-]\d{2,4})(?:\s|$)/);B&&(l.odds=B[1]);return}const g=i.match(/([+-]?\d+\.?\d*)\s+([+-]\d{2,4})/);if(g){l.pickType="spread",l.line=g[1].startsWith("+")||g[1].startsWith("-")?g[1]:"+"+g[1],l.odds=g[2];return}const f=i.match(/([+-]?\d+\.?\d*)/);f&&(l.pickType="spread",l.line=f[1].startsWith("+")||f[1].startsWith("-")?f[1]:"+"+f[1])}function A(l){const i=[],g=l.replace(/;/g,`
`).replace(/\.\s+/g,`
`).split(`
`).map(N=>N.trim()).filter(N=>N.length>0);let f="NBA",b=null;for(const N of g){if(N.includes("|")){const K=m(N);if(K){K.sport&&(K.sport=K.sport.toUpperCase()),i.push(K);continue}}const z=L(N);if(z.sport&&(f=z.sport.toUpperCase()),z.game&&(b=z.game),z.isContextOnly)continue;const V=p(N,f,b);V&&i.push(V)}const B=i.map(N=>({...N,sport:(N.sport||"NBA").toUpperCase(),league:(N.league||N.sport||"NBA").toUpperCase(),pickDirection:N.pickDirection?N.pickDirection.replace(/^UNDE\b/i,"UNDER").toUpperCase():"",pickType:(N.pickType||"spread").toLowerCase()}));return console.log(`\u{1F4CA} Parsed ${B.length} picks from text input`),B}function L(l){const i=l.toLowerCase(),g={sport:null,game:null,isContextOnly:!1};/\bnfl\b/i.test(i)?g.sport="NFL":/\bnba\b/i.test(i)?g.sport="NBA":/\bncaab\b|\bncaam\b|\bcbb\b/i.test(i)?g.sport="NCAAB":/\bncaaf\b|\bcfb\b/i.test(i)?g.sport="NCAAF":/\bmlb\b/i.test(i)?g.sport="MLB":/\bnhl\b/i.test(i)&&(g.sport="NHL");const f=l.match(/\b([A-Za-z]+)\s*(?:at|@|vs\.?|versus)\s*([A-Za-z]+)\b/i);return f&&(g.game={away:G(f[1]),home:G(f[2])}),!l.match(/\d/)&&(g.sport||g.game)&&(g.isContextOnly=!0),g}function p(l,i,g){const f=(i||"NBA").toUpperCase(),b={sport:f,league:f,segment:"Full Game",status:"pending",date:Q(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD"};g&&(b.awayTeam=g.away,b.homeTeam=g.home,b.game=`${g.away} @ ${g.home}`);let B=l.replace(/\s*\/\s*/g," ").replace(/\s+/g," ").trim();const N=B,z=[{pattern:/\b(1st\s*half|first\s*half|1h)\b/i,segment:"1st Half"},{pattern:/\b(2nd\s*half|second\s*half|2h)\b/i,segment:"2nd Half"},{pattern:/\b(1st\s*quarter|first\s*quarter|1q)\b/i,segment:"1st Quarter"},{pattern:/\b(full\s*game|fg)\b/i,segment:"Full Game"}];for(const{pattern:Y,segment:ae}of z)if(Y.test(B)){b.segment=ae,B=B.replace(Y," ").trim();break}if(/\bml\b/i.test(B)){b.pickType="moneyline",B=B.replace(/\bml\b/gi," ").trim();const Y=Object.keys(a);for(const re of Y)if(new RegExp(`\\b${re}\\b`,"i").test(B)){b.pickTeam=G(re);break}const ae=B.match(/([+-]\d{3,4})/);if(ae&&(b.odds=ae[1]),b.pickTeam)return console.log(`\u2705 Parsed ML: "${N}" -> ${b.pickTeam} ML (${b.segment})`),b}const V=B.match(/\b([A-Za-z]+)\s*(?:tto|ttu|o|u)\s*([\d.]+)/i)||B.match(/\b([A-Za-z]+)\s+(?:over|under)\s*([\d.]+)/i);if(V){const Y=V[1].toLowerCase(),ae=V[2],re=V[0].toLowerCase();if(Y!=="over"&&Y!=="under"&&Y!=="o"&&Y!=="u")return b.pickType="team-total",b.pickTeam=G(Y),b.line=ae,/tto|over|\bo\d/i.test(re)?b.pickDirection="Over":b.pickDirection="Under",console.log(`\u2705 Parsed team total: "${N}" -> ${b.pickTeam} ${b.pickDirection} ${b.line} (${b.segment})`),b}const K=B.match(/\b(over|under|o|u)\s*([\d.]+)/i);if(K){b.pickType="total",b.pickDirection=/^(over|o)$/i.test(K[1])?"Over":"Under",b.pickTeam=b.pickDirection,b.line=K[2];const Y=B.match(/([+-]\d{3,4})/);return Y&&(b.odds=Y[1]),console.log(`\u2705 Parsed game total: "${N}" -> ${b.pickDirection} ${b.line}`),b}B=B.replace(/\b(spread|total|moneyline)\b/gi," ").trim();const U=Object.keys(a);let J=null,X=-1;for(const Y of U){const ae=new RegExp(`\\b${Y}\\b`,"i"),re=B.match(ae);if(re){const le=re.index;(X===-1||le<X)&&(J=Y,X=le)}}if(!J){const Y=B.match(/\b([A-Z]{2,4})\b/);Y&&(J=Y[1].toLowerCase())}if(!J)return console.log(`\u26A0\uFE0F No team found in: "${N}"`),null;b.pickTeam=G(J);const se=[/([+-]?\d+\.?\d*)\s*([+-]\d{3,4})?/],ee=B.match(/[+-]?\d+\.?\d*/g)||[];for(const Y of ee){const ae=parseFloat(Y);if(Math.abs(ae)>=100&&(Y.startsWith("+")||Y.startsWith("-"))){b.odds=Y;continue}b.line||(b.pickType="spread",b.line=Y.startsWith("+")||Y.startsWith("-")?Y:`+${Y}`)}if(!b.line&&b.pickTeam){const Y=B.match(/([+-]\d{3,4})/);if(Y)b.pickType="moneyline",b.odds=Y[1];else return console.log(`\u26A0\uFE0F No line/odds found for team in: "${N}"`),null}const ne=B.match(/([A-Za-z]+)\s*[@vs]+\s*([A-Za-z]+)/i);return ne&&(b.awayTeam=G(ne[1]),b.homeTeam=G(ne[2]),b.game=`${b.awayTeam} @ ${b.homeTeam}`),console.log(`\u2705 Parsed: "${N}" -> ${b.pickTeam} ${b.line||b.odds} (${b.segment})`),b}function m(l){const i=l.split("|").map(Y=>Y.trim());if(i.length<3)return null;const[g,f,b]=i,B=g.match(/^(.+?)\s*(?:vs\.?|@|versus)\s*(.+)$/i);if(!B)return null;const N=B[1].trim(),z=B[2].trim();let V="Full Game";const K=f.toLowerCase();K.includes("1st half")||K.includes("1h")?V="1st Half":K.includes("2nd half")||K.includes("2h")?V="2nd Half":(K.includes("1st quarter")||K.includes("1q"))&&(V="1st Quarter");const U={sport:"NCAAB",segment:V,status:"pending",date:Q(),gameDate:new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:"TBD",awayTeam:N,homeTeam:z,game:`${N} @ ${z}`},J=b.match(/\(([+-]?\d+)\)\s*$/);J&&(U.odds=J[1].startsWith("+")||J[1].startsWith("-")?J[1]:`-${J[1]}`);let X=b.replace(/\s*\([+-]?\d+\)\s*$/,"").trim();const se=X.match(/^(over|under|o|u)\s+(\d+\.?\d*)/i);if(se)return U.pickType="total",U.pickDirection=/^(over|o)$/i.test(se[1])?"Over":"Under",U.pickTeam=U.pickDirection,U.line=se[2],console.log(`\u2705 Parsed pipe format (total): "${l}" -> ${U.pickDirection} ${U.line}`),U;const ee=X.match(/^(.+?)\s+ml$/i);if(ee)return U.pickType="moneyline",U.pickTeam=ee[1].trim(),console.log(`\u2705 Parsed pipe format (ML): "${l}" -> ${U.pickTeam} ML`),U;const ne=X.match(/^(.+?)\s+([+-]?\d+\.?\d*)$/);if(ne){U.pickType="spread",U.pickTeam=ne[1].trim();const Y=ne[2];return U.line=Y.startsWith("+")||Y.startsWith("-")?Y:`+${Y}`,console.log(`\u2705 Parsed pipe format (spread): "${l}" -> ${U.pickTeam} ${U.line}`),U}return console.log(`\u26A0\uFE0F Could not parse pipe-delimited pick: "${b}"`),null}function h(l,i,g){const f={sport:i,segment:"Full Game",status:"pending",date:Q()};/\b1h\b/i.test(l)?(f.segment="1st Half",l=l.replace(/\b1h\b/i,"").trim()):/\b2h\b/i.test(l)?(f.segment="2nd Half",l=l.replace(/\b2h\b/i,"").trim()):/\b1q\b/i.test(l)&&(f.segment="1st Quarter",l=l.replace(/\b1q\b/i,"").trim());const b=l.match(/\$(\d+(?:\.\d+)?)\s*$/);b&&(f.risk=parseFloat(b[1])*n,l=l.replace(/\$\d+(?:\.\d+)?\s*$/,"").trim());const B=l.match(/^(over|under|o|u)\s+(\d+\.?\d*)\s*([+-]\d{2,4})?/i);if(B)return f.pickType="total",f.pickDirection=/over|o/i.test(B[1])?"Over":"Under",f.pickTeam=f.pickDirection,f.line=B[2],B[3]&&(f.odds=B[3]),f.risk&&f.odds&&(f.win=Z(f.risk,f.odds)),g&&(f.game=g),f;const N=l.match(/^([A-Za-z][A-Za-z\s]*?)(?=\s+[\d+-]|\s+ML|\s+over|\s+under|\s*$)/i);if(!N)return null;const z=N[1].trim();f.pickTeam=G(z);let V=l.substring(N[0].length).trim();if(/^ML\s*/i.test(V)){f.pickType="moneyline",V=V.replace(/^ML\s*/i,"").trim();const K=V.match(/^([+-]\d{2,4})/);K&&(f.odds=K[1])}else if(/^(over|under|o|u)\s*/i.test(V)){f.pickType="team-total";const K=V.match(/^(over|under|o|u)\s*(\d+\.?\d*)\s*([+-]\d{2,4})?/i);K&&(f.pickDirection=/over|o/i.test(K[1])?"Over":"Under",f.line=K[2],K[3]&&(f.odds=K[3]))}else if(/^\d/.test(V)||/^[+-]\d/.test(V)){const K=V.match(/^([+-])(\d+)(?:\s|$)/);if(K){const U=K[1],J=K[2];if(parseInt(J)>=100)f.pickType="moneyline",f.odds=U+J;else{f.pickType="spread",f.line=U+J;const ee=V.substring(K[0].length).trim().match(/^([+-]\d{2,4})/);ee&&(f.odds=ee[1])}}else{f.pickType="spread";const U=V.match(/^(\d+\.?\d*)\s*([+-]\d{2,4})?/);U&&(f.line="+"+U[1],U[2]&&(f.odds=U[2]))}}return f.risk&&f.odds&&(f.win=Z(f.risk,f.odds)),g&&(f.game=g),f.pickType?f:null}function C(l){const i=l.toLowerCase();return l.length<3?!0:[/^tonight['']?s?\s+game/i,/^today['']?s?\s+game/i,/^correction/i,/^note:/i,/^fyi/i,/^\d+k\s+is\s+the\s+unit/i,/^unit/i,/^\^+/].some(f=>f.test(l))}function I(l,i){const g=l.toLowerCase(),f={};g.includes("nba")?f.sport="NBA":g.includes("nfl")?f.sport="NFL":g.includes("ncaab")||g.includes("ncaam")?f.sport="NCAAB":g.includes("ncaaf")?f.sport="NCAAF":g.includes("mlb")?f.sport="MLB":g.includes("nhl")&&(f.sport="NHL");const b=l.match(/([A-Za-z\s]+)\s*(?:vs\.?|@|\/)\s*([A-Za-z\s]+)/i);b&&(f.game=`${b[1].trim()} @ ${b[2].trim()}`),i(f)}function G(l){const i=l.toLowerCase().trim();return a[i]||l}function _(l){if(!l)return 0;const i=l.replace(/[$,]/g,"");return parseFloat(i)||0}function q(l){const i=l.match(/(\w+\s+\d+,?\s+\d{4})\s+(\d+:\d+\s*[AP]M)/i);return i?{date:i[1].trim(),time:i[2].trim()}:null}function W(l){const i=l.match(/(.+?)\s*(?:\/|vs\.?|@)\s*(.+)/i);return i?{away:i[1].trim(),home:i[2].trim()}:null}function Z(l,i){const g=parseInt(i);return g>0?l*(g/100):l/(Math.abs(g)/100)}function Q(){const l=new Date;return`${l.getMonth()+1}/${l.getDate()}/${l.getFullYear()}`}function te(l){return l.map(i=>{let g="";return i.pickType==="spread"?g=`${i.pickTeam} ${i.line}`:i.pickType==="moneyline"?g=`${i.pickTeam} ML`:i.pickType==="total"?g=`${i.pickDirection||i.pickTeam} ${i.line}`:i.pickType==="team-total"&&(g=`${i.pickTeam} ${i.pickDirection} ${i.line}`),i.odds&&(g+=` (${i.odds})`),{...i,selection:g,displaySegment:i.segment!=="Full Game"?i.segment:"",displayRisk:i.risk?`$${i.risk.toLocaleString()}`:"",displayWin:i.win?`$${Math.round(i.win).toLocaleString()}`:""}})}function w(l){const i=["Date","Time","Sport","Game","Team","Pick Type","Line","Odds","Segment","Risk","To Win","Status"],g=l.map(f=>[f.date||"",f.time||"",f.sport||"",f.game||"",f.pickTeam||"",f.pickType||"",f.line||"",f.odds||"",f.segment||"",f.risk||"",f.win?Math.round(f.win):"",f.status||"pending"]);return[i,...g].map(f=>f.map(b=>`"${b}"`).join(",")).join(`
`)}function P(l){n=l}window.PickStandardizer={standardize:s,parseHTML:M,parseGameLines:d,parseText:A,parseBetHistory:r,loadTeamVariants:t,toDisplayFormat:te,toCSV:w,setUnitMultiplier:P,resolveTeamName:G,_parseTextLine:h,_parseLineAndOdds:v,_parseGamePanel:u,_isBetHistoryFormat:o,_parseBetHistoryLeg:c},console.log("\u2705 PickStandardizer v3.1 loaded \u2014 362 NCAAM teams + bet-history parser")}();const API_BASE_URL=window.APP_CONFIG?.API_BASE_URL||"/api";let selectedFiles=[];const ALLOWED_EXTENSIONS=[".pdf",".jpg",".jpeg",".png",".html",".htm",".txt",".csv"],ALLOWED_MIME_TYPES=["application/pdf","image/jpeg","image/png","text/html","text/plain","text/csv"],MAX_FILE_SIZE_MB=10,MAX_FILE_SIZE=MAX_FILE_SIZE_MB*1024*1024;function getSelectedSportsbookMeta(){const n=document.getElementById("upload-sportsbook-select")||document.getElementById("manual-sportsbook-select");if(!n)return{value:"manual",label:"Manual Upload"};const a=(n.value||"").trim(),e=(n.options[n.selectedIndex]?.textContent||a||"Manual Upload").trim();return{value:a||"manual",label:e||"Manual Upload"}}function isFileAllowed(n){const a="."+n.name.split(".").pop().toLowerCase(),e=ALLOWED_EXTENSIONS.includes(a),t=ALLOWED_MIME_TYPES.some(o=>n.type.startsWith(o.split("/")[0])||n.type===o),s=n.size<=MAX_FILE_SIZE;return{valid:e&&s,ext:a,size:n.size,isSizeAllowed:s,isExtAllowed:e}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("action-buttons"),a=document.getElementById("import-options"),e=document.querySelector(".import-picks-btn"),t=document.querySelector(".import-back-btn");if(!a){console.warn("Import options element not found");return}function s(){n&&(n.style.display="none"),a.removeAttribute("hidden")}function o(){a.setAttribute("hidden",""),n&&(n.style.display="flex"),r()}function r(){selectedFiles=[];const A=document.getElementById("file-upload"),L=document.getElementById("paste-area"),p=document.getElementById("file-list"),m=document.getElementById("upload-files-btn"),h=document.getElementById("upload-status");A&&(A.value=""),L&&(L.value=""),p&&(p.innerHTML="",p.style.display="none"),m&&(m.style.display="none"),h&&(h.style.display="none")}e&&e.addEventListener("click",A=>{A.stopPropagation(),s()}),t&&t.addEventListener("click",A=>{A.stopPropagation(),o()});const c=document.getElementById("drop-zone"),d=document.getElementById("file-upload"),u=document.getElementById("file-list"),S=document.getElementById("upload-files-btn");if(c&&d){let A=function(L){L.preventDefault(),L.stopPropagation()};var v=A;["dragenter","dragover","dragleave","drop"].forEach(L=>{c.addEventListener(L,A,!1)}),["dragenter","dragover"].forEach(L=>{c.addEventListener(L,()=>{c.style.borderColor="#10b981",c.style.background="rgba(16, 185, 129, 0.05)"})}),["dragleave","drop"].forEach(L=>{c.addEventListener(L,()=>{c.style.borderColor="",c.style.background=""})}),c.addEventListener("drop",L=>{const m=L.dataTransfer.files;x(m)}),d.addEventListener("change",function(){x(this.files)})}function x(A){const L=[],p=[];if(Array.from(A).forEach(m=>{const h=isFileAllowed(m);if(h.valid)L.push(m);else{const C=h.isExtAllowed?`File too large (${D(h.size)} > ${MAX_FILE_SIZE_MB}MB)`:`Invalid file type (${h.ext})`;p.push({name:m.name,reason:C})}}),p.length>0){const m=p.map(h=>`${h.name}: ${h.reason}`).join(`
`);console.warn("Rejected files:",m),E(`Some files rejected:
${p.map(h=>h.name).join(", ")}`,"error")}selectedFiles=L,k()}function k(){if(selectedFiles.length===0){u.style.display="none",S.style.display="none";return}u.style.display="block",S.style.display="block",u.innerHTML=selectedFiles.map((A,L)=>{const p=D(A.size);return`
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 0.5rem; background: rgba(16, 185, 129, 0.05); border-radius: 4px; margin-bottom: 0.25rem;">
                    <span style="font-size: 0.75rem; color: #374151; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;">${F(A.name)} (${p})</span>
                    <button onclick="window.removeFile(${L})" style="background: none; border: none; color: #ef4444; cursor: pointer; font-size: 1rem; padding: 0 0.5rem;">\xD7</button>
                </div>
            `}).join("")}window.removeFile=function(A){selectedFiles.splice(A,1),k()},S&&S.addEventListener("click",async A=>{A.stopPropagation(),await R()});async function R(){if(selectedFiles.length!==0){S.disabled=!0,S.textContent="Uploading...";try{for(const A of selectedFiles){const L=new FormData,{value:p,label:m}=getSelectedSportsbookMeta();L.append("file",A),L.append("sportsbook",p),L.append("sportsbookLabel",m);const h=await fetch(`${API_BASE_URL}/upload`,{method:"POST",body:L});if(!h.ok)throw new Error(`Failed to upload ${A.name}: ${h.statusText}`);const C=await h.json();console.log(`Uploaded ${A.name}:`,C)}E(`Successfully uploaded ${selectedFiles.length} file(s)!`,"success"),selectedFiles=[],k(),d.value="",window.loadUploadedPicks?setTimeout(()=>window.loadUploadedPicks(),1e3):window.loadAndAppendPicks&&setTimeout(()=>window.loadAndAppendPicks(),1e3),window.loadPicksFromDatabase&&setTimeout(()=>window.loadPicksFromDatabase(),1500)}catch(A){console.error("Upload error:",A),E(`Upload failed: ${A.message}`,"error")}finally{S.disabled=!1,S.textContent="Upload Selected Files"}}}const H=document.getElementById("paste-area"),y=document.getElementById("upload-paste-btn"),$=document.querySelector(".paste-clear-btn");y&&y.addEventListener("click",async A=>{A.stopPropagation();const L=H.value.trim(),p=getSelectedSportsbookMeta();if(!L){E("Please paste some content first.","error");return}y.disabled=!0,y.textContent="Uploading...";try{const m=L.includes("<html")||L.includes("<!DOCTYPE")||L.includes("<div"),h=window.LocalPicksManager?.parseAndAdd||T,C=window.LocalPicksManager?.parseAndAdd?await h(L,p.label):await h(L,m,p);if(C.length===0){E("No picks could be parsed from the pasted content.","error");return}E(`Successfully parsed and saved ${C.length} pick(s)!`,"success"),H.value="",window.loadUploadedPicks?setTimeout(()=>window.loadUploadedPicks(),1e3):window.loadAndAppendPicks&&setTimeout(()=>window.loadAndAppendPicks(),1e3),window.loadPicksFromDatabase&&setTimeout(()=>window.loadPicksFromDatabase(),1500)}catch(m){console.error("Upload error:",m),E(`Processing failed: ${m.message}`,"error")}finally{y.disabled=!1,y.textContent="Upload Pasted Content"}}),$&&$.addEventListener("click",A=>{A.stopPropagation(),H&&(H.value="")});function E(A,L){const p=document.getElementById("upload-status");p&&(p.textContent=A,p.style.display="block",L==="success"?(p.style.background="rgba(16, 185, 129, 0.1)",p.style.color="#059669",p.style.border="1px solid rgba(16, 185, 129, 0.3)"):(p.style.background="rgba(239, 68, 68, 0.1)",p.style.color="#dc2626",p.style.border="1px solid rgba(239, 68, 68, 0.3)"),setTimeout(()=>{p.style.display="none"},5e3))}function D(A){return A<1024?A+" B":A<1024*1024?(A/1024).toFixed(1)+" KB":(A/(1024*1024)).toFixed(1)+" MB"}function F(A){const L=document.createElement("div");return L.textContent=A,L.innerHTML}async function T(A,L=!1,p=null){try{const m=p||getSelectedSportsbookMeta(),h=m?.value||"manual",C=m?.label||"Manual Upload";let I=[];if(window.PickStandardizer)try{I=window.PickStandardizer.standardize(A),console.log("Used PickStandardizer to parse picks:",I.length)}catch(_){console.warn("PickStandardizer failed, falling back to basic parser:",_),I=L?M(A):O(A)}else I=L?M(A):O(A);I=I.map(_=>({..._,sportsbook:_.sportsbook||C,bookKey:_.bookKey||h}));const G=_=>{const q=(_.game||_.description||_.pickTeam||"").trim();if(!q)return null;const W=q.match(/(.+?)\s+(?:vs\.?|@|at)\s+(.+?)(?:\s+(over|under))?$/i);return W?{awayTeam:W[1].trim(),homeTeam:W[2].trim()}:null};if(I.length>0&&window.AutoGameFetcher)try{await window.AutoGameFetcher.fetchTodaysGames();const _=window.AutoGameFetcher.getTodaysGames()||[];I=I.filter(q=>{const W=G(q);W&&(q.awayTeam||(q.awayTeam=W.awayTeam),q.homeTeam||(q.homeTeam=W.homeTeam));const Z=window.AutoGameFetcher.findGame((q.awayTeam||q.pickTeam||"").replace(/\bover\b|\bunder\b/i,"").trim(),q.homeTeam);return Z?window.AutoGameFetcher.isGameFinished(Z)?(console.warn(`Skipping pick for finished game: ${Z.awayTeam} @ ${Z.homeTeam}`),!1):(q.game=`${Z.awayTeam} @ ${Z.homeTeam}`,q.date=Z.date,q.time=Z.time,q.sport=Z.sport,q.gameStatus=Z.status,q.awayTeam=Z.awayTeam,q.homeTeam=Z.homeTeam,!0):(console.warn(`Game not found for today: ${q.game||q.pickTeam}`),!0)}),console.log(`After validation: ${I.length} valid picks remaining`)}catch(_){console.warn("AutoGameFetcher validation failed:",_)}if(I.length>0){const _=await fetch(`${API_BASE_URL}/save-picks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({picks:I,source:"upload",sportsbook:h,sportsbookLabel:C})});if(!_.ok){const W=await _.text();throw new Error(`Failed to save picks: ${_.statusText} - ${W}`)}const q=await _.json();console.log("Picks saved to database:",q)}else console.warn("No valid picks to save after processing");return I}catch(m){throw console.error("Error processing picks:",m),m}}function M(A){const L=[];return new DOMParser().parseFromString(A,"text/html").querySelectorAll('[class*="bet"], [class*="pick"], [class*="wager"]').forEach(C=>{try{const I=C.textContent,G=j(I);G&&L.push(G)}catch(I){console.warn("Failed to parse bet element:",I)}}),L}function O(A){const L=[];return A.split(`
`).forEach(m=>{const h=j(m);h&&L.push(h)}),L}function j(A){const L=/([A-Za-z\s]+)\s+([-+]?\d+\.?\d*)\s+\(([-+]\d+)\)/,p=/([A-Za-z\s]+)\s+(O|U|Over|Under)\s+(\d+\.?\d*)/i,m=/([A-Za-z\s]+)\s+ML\s+([-+]\d+)/i;let h,C=null;if((h=A.match(L))?C={pickType:"spread",pickTeam:h[1].trim(),line:h[2],odds:h[3]}:(h=A.match(p))?C={pickType:"total",pickTeam:h[2].toUpperCase()==="O"||h[2].toLowerCase()==="over"?"Over":"Under",line:h[3]}:(h=A.match(m))&&(C={pickType:"moneyline",pickTeam:h[1].trim(),odds:h[2]}),C){const I=/([A-Za-z\s]+)\s+(vs?|@|at)\s+([A-Za-z\s]+)/i,G=A.match(I);G&&(C.awayTeam=G[1].trim(),C.homeTeam=G[3].trim()),C.sport="nfl",C.gameDate=new Date().toISOString().split("T")[0],C.status="pending"}return C}window.processAndSavePicks=T,window.parseTextPicks=O}),function(){"use strict";const n="gbsv_picks",a="gbsv_unit_multiplier";function e(){try{const w=localStorage.getItem(n);return w?JSON.parse(w):[]}catch(w){return console.error("Error reading picks from localStorage:",w),window.ErrorHandler&&window.ErrorHandler.handleStorage(w,"read"),[]}}function t(w){try{return localStorage.setItem(n,JSON.stringify(w)),console.log(`\u2705 Saved ${w.length} picks to localStorage`),!0}catch(P){return console.error("Error saving picks to localStorage:",P),window.ErrorHandler&&window.ErrorHandler.handleStorage(P,"write"),!1}}function s(w){const P=e(),l=w.map((g,f)=>{let b=(g.sport||g.league||"NBA").toUpperCase();b={NCAAM:"NCAAB",NCAB:"NCAAB",CBB:"NCAAB","COLLEGE BASKETBALL":"NCAAB",NCAAF:"NCAAF",CFB:"NCAAF","COLLEGE FOOTBALL":"NCAAF",NFL:"NFL",NBA:"NBA",NCAAB:"NCAAB",MLB:"MLB",NHL:"NHL"}[b]||b;let N=g.awayTeam||"",z=g.homeTeam||"";if(g.game&&!N&&!z){const U=g.game.split(/\s*(?:@|vs\.?|versus)\s*/i);U.length===2&&(N=U[0].trim(),z=U[1].trim())}let V=g.pickDirection||"";V&&(V=V.replace(/^UNDE\b/i,"UNDER").toUpperCase());let K=(g.pickType||"spread").toLowerCase();return K==="ml"&&(K="moneyline"),K==="tt"&&(K="team-total"),K==="ou"&&(K="total"),{...g,id:g.id||`pick_${Date.now()}_${f}_${Math.random().toString(36).substring(7)}`,createdAt:g.createdAt||new Date().toISOString(),status:g.status||"pending",sport:b,league:b,awayTeam:N,homeTeam:z,pickDirection:V,pickType:K}}),i=[...P,...l];return t(i),l}function o(){localStorage.removeItem(n),console.log("CLEANUP Cleared all picks from localStorage"),O()}function r(w){const P=e().filter(l=>l.id!==w);t(P),O()}function c(w,P){const l=e().map(i=>i.id===w?{...i,status:P,updatedAt:new Date().toISOString()}:i);t(l),O()}function d(){return parseInt(localStorage.getItem(a))||1e3}function u(w){localStorage.setItem(a,w.toString()),window.PickStandardizer&&window.PickStandardizer.setUnitMultiplier(w)}function S(w,P={}){const l=(w||"pending").toLowerCase(),i={win:"Won",won:"Won",loss:"Lost",lost:"Lost",push:"Push","on-track":"On Track","at-risk":"At Risk",live:"Live"};return i[l]?i[l]:l==="pending"?P.countdown?P.countdown:P.scheduled||P.gameTime?`Starts ${P.scheduled||P.gameTime}`:"Pending":w.charAt(0).toUpperCase()+w.slice(1)}function x(w,P={}){const l=(w||"pending").toLowerCase(),i=(P.pickType||"spread").toLowerCase(),g=P.line||"";switch(l){case"pending":return P.gameTime?`Game starts at ${P.gameTime}`:"Awaiting game start";case"on-track":return i==="spread"?`Covering by 8.5 pts \u2022 ${P.countdown||"Live"}`:i==="total"?`On pace for ${P.pickDirection||"Over"} \u2022 ${P.countdown||"Live"}`:i==="moneyline"?`Leading \u2022 ${P.countdown||"Live"}`:`On track to hit \u2022 ${P.countdown||"Live"}`;case"at-risk":return i==="spread"?`Need 5.5 pts to cover \u2022 ${P.countdown||"Live"}`:i==="total"?`Need 12 more pts \u2022 ${P.countdown||"Live"}`:i==="moneyline"?`Trailing \u2022 ${P.countdown||"Live"}`:`At risk \u2022 ${P.countdown||"Live"}`;case"win":case"won":return`+$${(P.win||0).toLocaleString()}`;case"loss":case"lost":return`-$${(P.risk||0).toLocaleString()}`;case"push":return"$0 \u2022 Refunded";default:return""}}const k={"san antonio spurs":{abbr:"SAS",league:"nba"},spurs:{abbr:"SAS",league:"nba"},"new york knicks":{abbr:"NYK",league:"nba"},knicks:{abbr:"NYK",league:"nba"},"los angeles lakers":{abbr:"LAL",league:"nba"},lakers:{abbr:"LAL",league:"nba"},"golden state warriors":{abbr:"GSW",league:"nba"},warriors:{abbr:"GSW",league:"nba"},"boston celtics":{abbr:"BOS",league:"nba"},celtics:{abbr:"BOS",league:"nba"},"miami heat":{abbr:"MIA",league:"nba"},heat:{abbr:"MIA",league:"nba"},"dallas mavericks":{abbr:"DAL",league:"nba"},mavericks:{abbr:"DAL",league:"nba"},mavs:{abbr:"DAL",league:"nba"},"denver nuggets":{abbr:"DEN",league:"nba"},nuggets:{abbr:"DEN",league:"nba"},"phoenix suns":{abbr:"PHX",league:"nba"},suns:{abbr:"PHX",league:"nba"},"milwaukee bucks":{abbr:"MIL",league:"nba"},bucks:{abbr:"MIL",league:"nba"},"philadelphia 76ers":{abbr:"PHI",league:"nba"},"76ers":{abbr:"PHI",league:"nba"},sixers:{abbr:"PHI",league:"nba"},"brooklyn nets":{abbr:"BKN",league:"nba"},nets:{abbr:"BKN",league:"nba"},"chicago bulls":{abbr:"CHI",league:"nba"},bulls:{abbr:"CHI",league:"nba"},"cleveland cavaliers":{abbr:"CLE",league:"nba"},cavaliers:{abbr:"CLE",league:"nba"},cavs:{abbr:"CLE",league:"nba"},"atlanta hawks":{abbr:"ATL",league:"nba"},hawks:{abbr:"ATL",league:"nba"},"toronto raptors":{abbr:"TOR",league:"nba"},raptors:{abbr:"TOR",league:"nba"},"orlando magic":{abbr:"ORL",league:"nba"},magic:{abbr:"ORL",league:"nba"},"indiana pacers":{abbr:"IND",league:"nba"},pacers:{abbr:"IND",league:"nba"},"detroit pistons":{abbr:"DET",league:"nba"},pistons:{abbr:"DET",league:"nba"},"charlotte hornets":{abbr:"CHA",league:"nba"},hornets:{abbr:"CHA",league:"nba"},"washington wizards":{abbr:"WAS",league:"nba"},wizards:{abbr:"WAS",league:"nba"},"memphis grizzlies":{abbr:"MEM",league:"nba"},grizzlies:{abbr:"MEM",league:"nba"},"new orleans pelicans":{abbr:"NOP",league:"nba"},pelicans:{abbr:"NOP",league:"nba"},"houston rockets":{abbr:"HOU",league:"nba"},rockets:{abbr:"HOU",league:"nba"},"minnesota timberwolves":{abbr:"MIN",league:"nba"},timberwolves:{abbr:"MIN",league:"nba"},wolves:{abbr:"MIN",league:"nba"},"oklahoma city thunder":{abbr:"OKC",league:"nba"},thunder:{abbr:"OKC",league:"nba"},"portland trail blazers":{abbr:"POR",league:"nba"},"trail blazers":{abbr:"POR",league:"nba"},blazers:{abbr:"POR",league:"nba"},"utah jazz":{abbr:"UTA",league:"nba"},jazz:{abbr:"UTA",league:"nba"},"sacramento kings":{abbr:"SAC",league:"nba"},kings:{abbr:"SAC",league:"nba"},"la clippers":{abbr:"LAC",league:"nba"},clippers:{abbr:"LAC",league:"nba"},butler:{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},"butler bulldogs":{abbr:"BUT",fullName:"Butler Bulldogs",league:"ncaam",logoId:"2086"},connecticut:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"u conn":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},uconn:{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"uconn huskies":{abbr:"CONN",fullName:"UConn Huskies",league:"ncaam",logoId:"41"},"abilene christian":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},"abilene christian wildcats":{abbr:"ACU",fullName:"Abilene Christian Wildcats",league:"ncaam",logoId:"2000"},arizona:{abbr:"ARIZ",fullName:"Arizona Wildcats",league:"ncaam",logoId:"12"},"arizona wildcats":{abbr:"ARIZ",fullName:"Arizona Wildcats",league:"ncaam",logoId:"12"},"montana st":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"montana state bobcats":{abbr:"MTST",fullName:"Montana State Bobcats",league:"ncaam",logoId:"149"},"cal poly slo":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"cal poly mustangs":{abbr:"CPSU",fullName:"Cal Poly Mustangs",league:"ncaam",logoId:"13"},"oral roberts":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"oral roberts golden eagles":{abbr:"ORU",fullName:"Oral Roberts Golden Eagles",league:"ncaam",logoId:"198"},"missouri st":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},"missouri state bears":{abbr:"MOST",fullName:"Missouri State Bears",league:"ncaam",logoId:"2623"},marist:{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"marist red foxes":{abbr:"MAR",fullName:"Marist Red Foxes",league:"ncaam",logoId:"2368"},"georgia tech":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"georgia tech yellow jackets":{abbr:"GT",fullName:"Georgia Tech Yellow Jackets",league:"ncaam",logoId:"59"},"east tenn st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee st":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"east tennessee state buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"etsu buccaneers":{abbr:"ETSU",fullName:"East Tennessee State Buccaneers",league:"ncaam",logoId:"2193"},"north carolina":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},unc:{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"north carolina tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"tar heels":{abbr:"UNC",fullName:"North Carolina Tar Heels",league:"ncaam",logoId:"153"},"buffalo bills":{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},bills:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},buffalo:{abbr:"BUF",fullName:"Buffalo Bills",league:"nfl"},"philadelphia eagles":{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},eagles:{abbr:"PHI",fullName:"Philadelphia Eagles",league:"nfl"},"kansas city chiefs":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},chiefs:{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"kansas city":{abbr:"KC",fullName:"Kansas City Chiefs",league:"nfl"},"detroit lions":{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},lions:{abbr:"DET",fullName:"Detroit Lions",league:"nfl"},"baltimore ravens":{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},ravens:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},baltimore:{abbr:"BAL",fullName:"Baltimore Ravens",league:"nfl"},"minnesota vikings":{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},vikings:{abbr:"MIN",fullName:"Minnesota Vikings",league:"nfl"},"green bay packers":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},packers:{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"green bay":{abbr:"GB",fullName:"Green Bay Packers",league:"nfl"},"pittsburgh steelers":{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},steelers:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},pittsburgh:{abbr:"PIT",fullName:"Pittsburgh Steelers",league:"nfl"},"houston texans":{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},texans:{abbr:"HOU",fullName:"Houston Texans",league:"nfl"},"los angeles chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},chargers:{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"la chargers":{abbr:"LAC",fullName:"Los Angeles Chargers",league:"nfl"},"denver broncos":{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},broncos:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},denver:{abbr:"DEN",fullName:"Denver Broncos",league:"nfl"},"cincinnati bengals":{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},bengals:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},cincinnati:{abbr:"CIN",fullName:"Cincinnati Bengals",league:"nfl"},"seattle seahawks":{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seahawks:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},seattle:{abbr:"SEA",fullName:"Seattle Seahawks",league:"nfl"},"tampa bay buccaneers":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},buccaneers:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},bucs:{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"tampa bay":{abbr:"TB",fullName:"Tampa Bay Buccaneers",league:"nfl"},"san francisco 49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"49ers":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},niners:{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"san francisco":{abbr:"SF",fullName:"San Francisco 49ers",league:"nfl"},"dallas cowboys":{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},cowboys:{abbr:"DAL",fullName:"Dallas Cowboys",league:"nfl"},"miami dolphins":{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},dolphins:{abbr:"MIA",fullName:"Miami Dolphins",league:"nfl"},"los angeles rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},rams:{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"la rams":{abbr:"LAR",fullName:"Los Angeles Rams",league:"nfl"},"arizona cardinals":{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},cardinals:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},arizona:{abbr:"ARI",fullName:"Arizona Cardinals",league:"nfl"},"indianapolis colts":{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},colts:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},indianapolis:{abbr:"IND",fullName:"Indianapolis Colts",league:"nfl"},"tennessee titans":{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},titans:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},tennessee:{abbr:"TEN",fullName:"Tennessee Titans",league:"nfl"},"jacksonville jaguars":{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jaguars:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jags:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},jacksonville:{abbr:"JAX",fullName:"Jacksonville Jaguars",league:"nfl"},"cleveland browns":{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},browns:{abbr:"CLE",fullName:"Cleveland Browns",league:"nfl"},"new york giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},giants:{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"ny giants":{abbr:"NYG",fullName:"New York Giants",league:"nfl"},"new york jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},jets:{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"ny jets":{abbr:"NYJ",fullName:"New York Jets",league:"nfl"},"new england patriots":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},patriots:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},pats:{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"new england":{abbr:"NE",fullName:"New England Patriots",league:"nfl"},"washington commanders":{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},commanders:{abbr:"WSH",fullName:"Washington Commanders",league:"nfl"},"carolina panthers":{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},panthers:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},carolina:{abbr:"CAR",fullName:"Carolina Panthers",league:"nfl"},"atlanta falcons":{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},falcons:{abbr:"ATL",fullName:"Atlanta Falcons",league:"nfl"},"new orleans saints":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},saints:{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"new orleans":{abbr:"NO",fullName:"New Orleans Saints",league:"nfl"},"chicago bears":{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},bears:{abbr:"CHI",fullName:"Chicago Bears",league:"nfl"},"las vegas raiders":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},raiders:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},"las vegas":{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"},vegas:{abbr:"LV",fullName:"Las Vegas Raiders",league:"nfl"}};function R(w,P,l){if(!window.LogoLoader||!w)return"";if((P==="ncaam"||P==="ncaaf")&&l)return window.LogoLoader.getLogoUrl(P,l);const i=w.toLowerCase();return window.LogoLoader.getLogoUrl(P,i)}async function H(w){if(!w)return{abbr:"N/A",fullName:"",logo:""};if(window.TeamDataLoader&&typeof window.TeamDataLoader.getTeamInfo=="function")try{const i=await window.TeamDataLoader.getTeamInfo(w);if(i&&i.abbr!=="N/A")return i}catch(i){console.warn("[LocalPicksManager] TeamDataLoader failed, using fallback:",i)}const P=w.toLowerCase().trim(),l=k[P];if(l){const i=l.league||"nba",g=R(l.abbr,i,l.logoId);return{abbr:l.abbr,fullName:l.fullName||w,logo:g}}return{abbr:w.substring(0,3).toUpperCase(),fullName:w,logo:""}}function y(w){if(!w)return{abbr:"N/A",fullName:"",logo:""};const P=w.toLowerCase().trim(),l=k[P];if(l){const i=l.league||"nba",g=R(l.abbr,i,l.logoId);return{abbr:l.abbr,fullName:l.fullName||w,logo:g}}return{abbr:w.substring(0,3).toUpperCase(),fullName:w,logo:""}}async function $(w,P=""){if(!window.PickStandardizer)return console.error("PickStandardizer not loaded"),[];window.PickStandardizer.loadTeamVariants&&await window.PickStandardizer.loadTeamVariants(),window.PickStandardizer.setUnitMultiplier(d());const l=window.PickStandardizer.standardize(w);if(l.length===0)return console.warn("No picks could be parsed from content"),[];const i=d(),g=l.map(B=>{const N=B.risk||i;let z=B.win;if(!z&&B.odds&&N){const V=parseInt(B.odds);V>0?z=N*(V/100):V<0&&(z=N/(Math.abs(V)/100))}return{...B,sportsbook:P||B.sportsbook||"Manual Upload",risk:Math.round(N),win:Math.round(z||N*.91),gameDate:B.gameDate||new Date().toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),gameTime:B.gameTime||"TBD"}}),f=await E(g),b=s(f);return O(),b}async function E(w){let P=[];if(window.AutoGameFetcher)try{await window.AutoGameFetcher.fetchTodaysGames(),P=window.AutoGameFetcher.getTodaysGames()||[],console.log(`\u{1F3C0} Found ${P.length} games today:`,P.map(l=>`${l.awayTeam} @ ${l.homeTeam} (${l.time})`))}catch(l){console.warn("Could not fetch games:",l)}else console.warn("\u26A0\uFE0F AutoGameFetcher not available");return w.map(l=>{const i={...l},g=l.pickTeam;if(console.log(`\u{1F50D} Looking for game with team: "${g}"`),window.AutoGameFetcher&&P.length>0){const f=window.AutoGameFetcher.findGame(g);f?(console.log(`\u2705 Found game: ${f.awayTeam} (${f.awayRecord}) @ ${f.homeTeam} (${f.homeRecord}) at ${f.time}`),i.awayTeam=f.awayTeam,i.homeTeam=f.homeTeam,i.awayRecord=f.awayRecord||"",i.homeRecord=f.homeRecord||"",i.gameTime=f.time,i.gameDate=f.date,i.sport=f.sport,i.gameStatus=f.status,i.game=`${f.awayTeam} @ ${f.homeTeam}`):console.warn(`\u274C No game found for "${g}" - available teams:`,P.flatMap(b=>[b.awayTeam,b.homeTeam]))}return i.gameDate||(i.gameDate=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})),i.gameTime||(i.gameTime="TBD"),i})}function D(w){if(w==null||w==="")return"$0.00";const P=typeof w=="number"?w:parseFloat(String(w).replace(/[$,]/g,""));return isNaN(P)?"$0.00":`$${P.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function F(w){if(!w)return"Today";if(w.includes("/")||w.includes("-")){const P=new Date(w);if(!isNaN(P))return P.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}return w}function T(w){if(!w)return"";const P=w.toUpperCase();if(window.LogoLoader&&typeof window.LogoLoader.getLeagueLogoUrl=="function"){const g={NCAAB:"ncaam",NCAAM:"ncaam","NCAA MEN'S BASKETBALL":"ncaam",CBB:"ncaam",NCAAF:"ncaaf","COLLEGE FOOTBALL":"ncaaf",CFB:"ncaaf",NBA:"nba",NFL:"nfl",MLB:"mlb",NHL:"nhl",MLS:"mls"}[P]||P.toLowerCase();return window.LogoLoader.getLeagueLogoUrl(g)}return{NBA:"/assets/nba-logo.png",NFL:"/assets/nfl-logo.png",NCAAB:"/assets/ncaam-logo.png",NCAAM:"/assets/ncaam-logo.png",NCAAF:"/assets/ncaaf-logo.png",MLB:"/assets/mlb-logo.png",NHL:"/assets/nhl-logo.png"}[P]||""}function M(w){const P=(w||"").toUpperCase(),i={NCAAAB:"NCAAM",NCAAB:"NCAAM",NCAAF:"NCAAF",NBA:"NBA",NFL:"NFL",MLB:"MLB",NHL:"NHL"}[P]||P,g=T(P);return`
            <div class="league-cell">
                ${g?`<img src="${g}" class="league-logo" alt="${i}" onerror="this.style.display='none'">`:""}
                <span class="league-text">${i}</span>
            </div>
        `}function O(){const w=e(),P=document.getElementById("picks-tbody");if(!P)return;P.innerHTML="";const l=P.closest(".table-container");if(l&&l.classList.toggle("has-picks",w.length>0),w.length===0){console.log("No picks to display");return}w.forEach((i,g)=>{const f=m(i,g);P.appendChild(f)}),console.log(`\u{1F4CA} Displayed ${w.length} picks in table`),typeof window.calculateKPIs=="function"&&typeof window.updateKPITiles=="function"&&setTimeout(()=>{const i=window.calculateKPIs(e());window.updateKPITiles(i)},100),window.ZebraStripes?.applyPicksTableZebraStripes&&setTimeout(()=>window.ZebraStripes.applyPicksTableZebraStripes(),50),window.DashboardFilters&&typeof window.DashboardFilters.applyFilters=="function"&&setTimeout(()=>window.DashboardFilters.applyFilters(),50),window.DashboardFilterPills&&typeof window.DashboardFilterPills.applyFilters=="function"&&setTimeout(()=>window.DashboardFilterPills.applyFilters(),50),setTimeout(async()=>{try{if(window.AutoGameFetcher){console.log("[PICKS-TABLE] Fetching today's games for live scores..."),await window.AutoGameFetcher.fetchTodaysGames(!0);const i=window.AutoGameFetcher.getTodaysGames()||[];console.log(`[PICKS-TABLE] Loaded ${i.length} games for live score matching`)}window.LiveScoreUpdater&&(console.log("[PICKS-TABLE] Starting live score updates..."),window.LiveScoreUpdater.stopLiveUpdates(),window.LiveScoreUpdater.startLiveUpdates(),window.LiveScoreUpdater.updateScores()),typeof window.populateTeamRecordsWhenReady=="function"&&window.populateTeamRecordsWhenReady(P,{force:!0}),console.log("[PICKS-TABLE] \u2705 Live scores and box scores activated")}catch(i){console.warn("[PICKS-TABLE] Error activating live scores:",i)}},200),j(),A()}function j(){document.querySelectorAll(".sportsbook-dropdown").forEach(P=>{P.removeEventListener("change",v),P.addEventListener("change",v)})}function v(w){const P=w.target.getAttribute("data-pick-id"),l=w.target.value;if(!P)return;const i=e(),g=i.find(f=>f.id===P);g&&(g.sportsbook=l,t(i),console.log(`\u2705 Updated pick ${P} sportsbook to: ${l||"None"}`))}function A(){const w=document.querySelectorAll(".editable-risk"),P=document.querySelectorAll(".editable-win");w.forEach(l=>{l.removeEventListener("change",L),l.addEventListener("change",L)}),P.forEach(l=>{l.removeEventListener("change",p),l.addEventListener("change",p)})}function L(w){const P=w.target.getAttribute("data-pick-id"),l=parseFloat(w.target.value)||0;if(!P)return;const i=e(),g=i.find(f=>f.id===P);g&&(g.risk=Math.round(l),t(i),console.log(`\u2705 Updated pick ${P} risk to: $${g.risk.toLocaleString()}`))}function p(w){const P=w.target.getAttribute("data-pick-id"),l=parseFloat(w.target.value)||0;if(!P)return;const i=e(),g=i.find(f=>f.id===P);g&&(g.win=Math.round(l),t(i),console.log(`\u2705 Updated pick ${P} win to: $${g.win.toLocaleString()}`))}function m(w,P){const l=document.createElement("tr"),i=y(w.pickTeam),g=w.awayTeam||w.pickTeam||"TBD",f=w.homeTeam||"TBD",b=w.awayRecord||"",B=w.homeRecord||"",N=y(g),z=y(f),V=w.segment||"Full Game",K=V.toLowerCase().includes("1h")||V.toLowerCase().includes("1st")?"1h":V.toLowerCase().includes("2h")||V.toLowerCase().includes("2nd")?"2h":"full-game",U={"1h":"1st Half","2h":"2nd Half","1q":"1st Quarter","2q":"2nd Quarter","3q":"3rd Quarter","4q":"4th Quarter","full-game":"Full Game"}[K]||"Full Game";let J="";if(w.pickType==="spread"){const oe=w.line||"";J=oe.startsWith("+")||oe.startsWith("-")?oe:oe?`+${oe}`:""}else if(w.pickType==="moneyline"||w.pickType==="ml")J="ML";else if(w.pickType==="total"||w.pickType==="team-total"||w.pickType==="tt"){let oe=(w.pickDirection||"Over").toUpperCase();(oe==="UNDE"||oe.startsWith("UNDE"))&&(oe="UNDER"),J=`${oe} ${w.line||""}`.trim()}const X=w.status||"pending",se=w.sportsbook||"";let ee=(w.sport||"NBA").toLowerCase();const ne={college:"ncaaf",cfb:"ncaaf","college football":"ncaaf","ncaa football":"ncaaf",cbb:"ncaab","college basketball":"ncaab","ncaa basketball":"ncaab",ncaam:"ncaab"};ne[ee]&&(ee=ne[ee]);const Y=w.gameDate&&w.gameTime?new Date(`${w.gameDate} ${w.gameTime}`).getTime():Date.now();l.setAttribute("data-pick-id",w.id||`pick-${P}`),l.setAttribute("data-row-id",w.id||`pick-${P}`),l.setAttribute("data-league",ee),l.setAttribute("data-sport",ee),l.setAttribute("data-epoch",Y),l.setAttribute("data-book",se.toLowerCase()),l.setAttribute("data-away",g.toLowerCase()),l.setAttribute("data-home",f.toLowerCase()),l.setAttribute("data-away-team",g),l.setAttribute("data-home-team",f),l.setAttribute("data-away-abbr",N.abbr||""),l.setAttribute("data-home-abbr",z.abbr||""),l.setAttribute("data-pick-type",w.pickType||"spread"),l.setAttribute("data-pick-team",w.pickTeam||""),l.setAttribute("data-pick-text",J),l.setAttribute("data-line",w.line||""),l.setAttribute("data-segment",K),l.setAttribute("data-odds",w.odds||""),l.setAttribute("data-risk",w.risk||""),l.setAttribute("data-win",w.win||""),l.setAttribute("data-status",X),l.setAttribute("data-game-id",w.gameId||""),l.classList.add("group-start");const ae=!w.homeTeam||f==="TBD",re=N.logo?`<img src="${N.logo}" class="team-logo" alt="${N.abbr}" onerror="this.style.display='none'">`:"",le=z.logo?`<img src="${z.logo}" class="team-logo" alt="${z.abbr}" onerror="this.style.display='none'">`:"",be=i.logo?`<img src="${i.logo}" class="pick-team-logo" alt="${i.abbr}" onerror="this.style.display='none'">`:"",we=ae?`<div class="matchup-cell">
                    <div class="team-line">
                        ${re}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${g}</span>
                            <span class="team-record">${b?`(${b})`:""}</span>
                        </div>
                    </div>
                </div>`:`<div class="matchup-cell">
                    <div class="team-line">
                        ${re}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${g}</span>
                            <span class="team-record">${b?`(${b})`:""}</span>
                        </div>
                    </div>
                    <div class="vs-divider">vs</div>
                    <div class="team-line">
                        ${le}
                        <div class="team-name-wrapper">
                            <span class="team-name-full">${f}</span>
                            <span class="team-record">${B?`(${B})`:""}</span>
                        </div>
                    </div>
                </div>`,pe=ee==="NBA"||ee==="NFL",ye=pe?"boxscore-quarters":"boxscore-halves";let de,me,fe;pe?(fe=`
                <div class="boxscore-cell header-cell">Q1</div>
                <div class="boxscore-cell header-cell">Q2</div>
                <div class="boxscore-cell header-cell">Q3</div>
                <div class="boxscore-cell header-cell">Q4</div>
                <div class="boxscore-cell header-cell">T</div>`,de=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${N.logo?`<img src="${N.logo}" class="boxscore-team-logo"  alt="${N.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${N.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-away"></div>
                    <div class="boxscore-cell period-cell q2-away"></div>
                    <div class="boxscore-cell period-cell q3-away"></div>
                    <div class="boxscore-cell period-cell q4-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${z.logo?`<img src="${z.logo}" class="boxscore-team-logo"  alt="${z.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${z.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell q1-home"></div>
                    <div class="boxscore-cell period-cell q2-home"></div>
                    <div class="boxscore-cell period-cell q3-home"></div>
                    <div class="boxscore-cell period-cell q4-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`):(fe=`
                <div class="boxscore-cell header-cell">1H</div>
                <div class="boxscore-cell header-cell">2H</div>
                <div class="boxscore-cell header-cell">T</div>`,de=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${N.logo?`<img src="${N.logo}" class="boxscore-team-logo"  alt="${N.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${N.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-away"></div>
                    <div class="boxscore-cell period-cell h2-away"></div>
                    <div class="boxscore-cell total total-away"></div>
                </div>`,me=`
                <div class="boxscore-row">
                    <div class="boxscore-cell team-cell">
                        <div class="boxscore-team">
                            ${z.logo?`<img src="${z.logo}" class="boxscore-team-logo"  alt="${z.abbr}" onerror="this.style.display='none'">`:""}
                            <span class="boxscore-team-abbr">${z.abbr}</span>
                        </div>
                    </div>
                    <div class="boxscore-cell period-cell h1-home"></div>
                    <div class="boxscore-cell period-cell h2-home"></div>
                    <div class="boxscore-cell total total-home"></div>
                </div>`);const ie=w.status||"pending";let ce=w.gameTime||"Pending",ue="countdown";ie==="final"||ie==="win"||ie==="loss"||ie==="push"?(ce="Final",ue="final"):ie==="live"||ie==="on-track"||ie==="at-risk"?(ce=w.gameTime||"Live",ue="live"):ie==="pending"&&(ce=w.gameTime||"Pending",ue="countdown");const Se=`
            <div class="boxscore-container" data-live-ready="false">
                <div class="compact-boxscore">
                    <div class="boxscore-grid ${ye}">
                        <div class="boxscore-row header">
                            <div class="boxscore-cell header-cell game-time-cell">
                                <span class="game-time-status ${ue}">${ce}</span>
                            </div>
                            ${fe}
                        </div>
                        ${de}
                        ${ae?"":me}
                    </div>
                </div>
            </div>`,ge=oe=>`$${Math.abs(oe).toLocaleString()}`,he=X==="win"?`+${ge(w.win||0)}`:X==="loss"?`-${ge(w.risk||0)}`:X==="push"?"$0":"",ke=he;return l.innerHTML=`
            <td data-label="Date & Time">
                <div class="cell-date">${F(w.gameDate)}</div>
                <div class="cell-time">${w.gameTime||"TBD"}</div>
                <select class="sportsbook-dropdown" data-pick-id="${w.id}" aria-label="Change sportsbook for this pick">
                    <option value="">No Book</option>
                    <option value="hulkwager" ${se==="hulkwager"?"selected":""}>Hulk Wager</option>
                    <option value="bombay711" ${se==="bombay711"?"selected":""}>Bombay 711</option>
                    <option value="kingofsports" ${se==="kingofsports"?"selected":""}>King of Sports</option>
                    <option value="primetimeaction" ${se==="primetimeaction"?"selected":""}>Prime Time Action</option>
                    <option value="other" ${se==="other"?"selected":""}>Other</option>
                </select>
            </td>
            <td class="center" data-label="League">
                ${M(ee)}
            </td>
            <td data-label="Matchup">
                ${we}
            </td>
            <td class="center" data-label="Segment">
                <span class="game-segment" data-segment="${K}">${U}</span>
            </td>
            <td data-label="Pick">
                <div class="pick-cell">
                    <div class="pick-team-info">
                        ${be}
                        <span class="pick-team-abbr">${i.abbr||w.pickTeam}</span>
                    </div>
                    <div class="pick-details">
                        <span class="pick-line">${J||w.line||""}</span>
                        <span class="pick-odds">(${w.odds||"-110"})</span>
                    </div>
                    ${w.edge?`<div class="pick-edge"><span class="edge-badge">+${parseFloat(w.edge).toFixed(1)}%</span></div>`:""}
                </div>
            </td>
            <td class="center" data-label="Risk / Win">
                <div class="currency-combined currency-stacked editable-amounts">
                    <div class="currency-risk-row">
                        <input type="number"
                               class="editable-risk"
                               value="${Math.round(w.risk||5e4)}"
                               data-pick-id="${w.id}"
                               aria-label="Risk amount"
                               min="0"
                               step="1000">
                        <span class="currency-separator"> /</span>
                    </div>
                    <input type="number"
                           class="editable-win"
                           value="${Math.round(w.win||5e4)}"
                           data-pick-id="${w.id}"
                           aria-label="Win amount"
                           min="0"
                           step="1000">
                </div>
            </td>
            <td class="center" data-label="Box Score">
                ${Se}
            </td>
            <td class="center" data-label="Status">
                <span class="status-badge" data-status="${X}" data-blurb="${x(X,w)}">${S(X,w)}</span>
            </td>
            <td class="center" data-label="Hit / Miss">
                <span class="hit-miss-value" data-status="${X}">${he}</span>
            </td>
            <td class="center" data-label="$ Won / Lost">
                <span class="won-lost-value" data-status="${X}">${ke}</span>
                <button class="delete-pick-btn" onclick="event.stopPropagation(); window.LocalPicksManager.delete('${w.id}')" title="Remove pick from dashboard">\u2715</button>
            </td>
        `,l}async function h(){const w=e();if(w.length===0)return;if(!w.some(i=>!i.awayRecord&&!i.homeRecord)){console.log("\u2705 All picks already have records");return}console.log("\u{1F504} Re-enriching existing picks with ESPN data...");let l=0;for(;!window.AutoGameFetcher&&l<10;)await new Promise(i=>setTimeout(i,200)),l++;if(!window.AutoGameFetcher){console.warn("\u26A0\uFE0F AutoGameFetcher not available for re-enrichment");return}try{await window.AutoGameFetcher.fetchTodaysGames();const i=window.AutoGameFetcher.getTodaysGames()||[];if(i.length===0){console.log("\u{1F4ED} No games today to enrich with");return}console.log(`\u{1F3C0} Found ${i.length} games for enrichment`);let g=!1;const f=w.map(b=>{if(b.awayRecord||b.homeRecord)return b;const B=b.pickTeam||b.awayTeam;if(!B)return b;const N=window.AutoGameFetcher.findGame(B);return N?(console.log(`\u{1F4DD} Enriching: ${b.pickTeam} -> ${N.awayTeam} (${N.awayRecord}) vs ${N.homeTeam} (${N.homeRecord})`),g=!0,{...b,awayTeam:N.awayTeam,homeTeam:N.homeTeam,awayRecord:N.awayRecord||"",homeRecord:N.homeRecord||"",gameTime:b.gameTime||N.time,gameDate:b.gameDate||N.date,sport:b.sport||N.sport,gameStatus:N.status}):b});g&&(t(f),console.log("\u2705 Picks re-enriched with team records"),O())}catch(i){console.error("Error re-enriching picks:",i)}}function C(w=7){const P="gbsv_last_stale_cleanup",l=localStorage.getItem(P),i=new Date().toDateString();if(l===i)return;const g=e();if(g.length===0){localStorage.setItem(P,i);return}const f=new Date;f.setDate(f.getDate()-w),f.setHours(0,0,0,0);const b=g.filter(B=>{const N=(B.status||"pending").toLowerCase();if(["win","won","loss","lost","push"].includes(N))return!0;const z=B.gameDate||B.createdAt||"";let V=null;try{V=z?new Date(z):null}catch{}return!V||isNaN(V.getTime())?!0:V>=f});if(b.length<g.length){const B=g.length-b.length;console.log(`\u{1F5D1}\uFE0F [Stale Cleanup] Removed ${B} old pending picks (>${w}d), kept ${b.length} picks`),t(b)}localStorage.setItem(P,i)}function I(){const w="gbsv_cleanup_v5";if(localStorage.getItem(w))return;localStorage.removeItem("gbsv_demo_imported_v1"),localStorage.removeItem("gbsv_cleanup_v1");const P=e();if(P.length===0){localStorage.setItem(w,"done");return}const l=new Set(["demo","sample","mock","placeholder","fake","test","example"]),i=P.filter(g=>{if(g.isDemo===!0||g.isSample===!0)return!1;const f=String(g.source||"").toLowerCase();if(l.has(f))return!1;const b=String(g.sportsbook||"").toLowerCase();return!(b==="demo book"||/(demo|sample|mock|placeholder|fake|test|example)/.test(b))});if(i.length<P.length){const g=P.length-i.length;console.log(`[Cleanup] Removed ${g} demo picks, kept ${i.length} real picks`),t(i)}localStorage.setItem(w,"done")}function G(){if(document.body.classList.contains("page-weekly-lineup"))return!1;const w=window.location.pathname.toLowerCase();return!(w.includes("weekly-lineup")||w.includes("odds-market"))}function _(){console.log("\u{1F3E0} LocalPicksManager v33.02.0 initialized (real data only + auto-cleanup)"),I(),C(7),window.processAndSavePicks=$,window.loadUploadedPicks=O,G()?(O(),window.PicksSortManager&&typeof window.PicksSortManager.initSorting=="function"&&setTimeout(()=>window.PicksSortManager.initSorting(),100),setTimeout(()=>h(),500)):console.log("\u{1F3E0} LocalPicksManager: Skipping auto-refresh (not on dashboard page)")}function q(){return e().filter(P=>{const l=(P.status||"pending").toLowerCase();return l==="pending"||l==="live"||l==="on-track"||l==="at-risk"})}function W(){return e().filter(P=>{const l=(P.status||"pending").toLowerCase();return l==="win"||l==="won"||l==="loss"||l==="lost"||l==="push"})}function Z(w=null,P=null){const l=e();return!w&&!P?l:l.filter(i=>{const g=i.gameDate||i.createdAt||i.date||"";if(!g)return!0;try{const f=new Date(g);return!(w&&f<w||P&&f>P)}catch{return!0}})}function Q(){const w=new Date,P=new Date(w.getFullYear(),w.getMonth(),w.getDate()),l=new Date(w.getFullYear(),w.getMonth(),w.getDate(),23,59,59,999);return Z(P,l)}function te(w=30){const P=e(),l=new Date;l.setDate(l.getDate()-w),l.setHours(0,0,0,0);const i=[],g=[];if(P.forEach(f=>{const b=(f.status||"pending").toLowerCase(),B=["win","won","loss","lost","push"].includes(b),N=f.gameDate||f.createdAt||"";let z=null;try{z=N?new Date(N):null}catch{}B&&z&&z<l?i.push(f):g.push(f)}),i.length>0){const f=JSON.parse(localStorage.getItem("gbsv_picks_archive")||"[]");localStorage.setItem("gbsv_picks_archive",JSON.stringify([...f,...i])),t(g),console.log(`\u{1F4E6} [LocalPicksManager] Archived ${i.length} old settled picks`)}return i.length}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",_):_(),window.LocalPicksManager={getAll:e,getActive:q,getSettled:W,getByDateRange:Z,getToday:Q,add:s,parseAndAdd:$,clear:o,delete:r,updateStatus:c,refresh:O,reEnrich:h,getUnitMultiplier:d,setUnitMultiplier:u,archiveOldPicks:te,cleanupStale:C,debug:()=>{const w=e();console.log("=== LocalPicksManager Debug ==="),console.log(`Total picks in localStorage: ${w.length}`),console.log("Storage key:",n),console.log("Raw localStorage:",localStorage.getItem(n)?.substring(0,500)),w.length>0&&console.log("Sample pick:",JSON.stringify(w[0],null,2));const P=document.getElementById("picks-tbody");return console.log("Table element found:",!!P),console.log("Table rows:",P?.children?.length||0),w},forceRefresh:()=>(console.log("Force refreshing picks table..."),O(),e().length)},console.log("\u2705 LocalPicksManager v33.02.0 loaded (with auto-cleanup)")}(),function(){"use strict";const n={init(){console.log("Initializing Dashboard UI..."),this.initKPITiles(),this.initRefreshButton(),this.initBackToTop()},initKPITiles(){document.querySelectorAll('.kpi-tile[data-action="flip-tile"]').forEach(e=>{e.addEventListener("click",()=>{this.flipTile(e)}),e.addEventListener("keydown",t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.flipTile(e))})})},flipTile(a){const e=a.querySelectorAll(".kpi-tile-layer");e.length<2||e.forEach(t=>{t.classList.toggle("active")})},initRefreshButton(){const a=document.querySelector(".refresh-btn");a&&a.addEventListener("click",()=>{this.handleRefresh(a)})},handleRefresh(a){a.classList.add("spinning"),window.ActivePicks&&typeof window.ActivePicks.refreshData=="function"?window.ActivePicks.refreshData():window.location.reload(),setTimeout(()=>{a.classList.remove("spinning")},1e3)},initBackToTop(){const a=document.getElementById("back-to-top");a&&(window.addEventListener("scroll",()=>{window.scrollY>300?a.classList.add("visible"):a.classList.remove("visible")}),a.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>n.init()):n.init()}(),function(){"use strict";let n={leagues:[],segment:"",pick:"",status:""};window.DashboardFilterPills=window.DashboardFilterPills||{},Object.defineProperty(window.DashboardFilterPills,"activeFilters",{get:()=>n,set:d=>{n=d||{leagues:[],segment:"",pick:"",status:""}}});function a(){const d=document.getElementById("filter-toolbar");if(!d){console.warn("[DashboardFilterPills] Filter toolbar not found");return}document.querySelectorAll(".ft-pill.ft-league").forEach(x=>{x.addEventListener("click",function(k){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const R=this.getAttribute("data-league");d.querySelectorAll(".ft-dropdown-menu").forEach(H=>H.classList.remove("open")),d.querySelectorAll(".ft-dropdown-btn").forEach(H=>H.classList.remove("open")),this.classList.toggle("active"),n.leagues=[],document.querySelectorAll(".ft-pill.ft-league.active").forEach(H=>{const y=H.getAttribute("data-league");y&&y!=="all"&&n.leagues.push(y.toLowerCase())}),R==="all"&&this.classList.contains("active")?(document.querySelectorAll(".ft-pill.ft-league").forEach(H=>{H!==this&&H.classList.remove("active")}),n.leagues=[]):R!=="all"&&document.querySelector('.ft-pill.ft-league[data-league="all"]')?.classList.remove("active"),o()})});const u=d.querySelectorAll(".ft-dropdown");u.forEach(x=>{const k=x.querySelector(".ft-dropdown-btn"),R=x.querySelector(".ft-dropdown-menu");!k||!R||k.addEventListener("click",H=>{H.target.closest(".ft-pill")||(H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation(),u.forEach(y=>{y!==x&&(y.querySelector(".ft-dropdown-menu")?.classList.remove("open"),y.querySelector(".ft-dropdown-btn")?.classList.remove("open"))}),R.classList.toggle("open"),k.classList.toggle("open"))})}),document.addEventListener("click",x=>{x.target.closest(".ft-pill.ft-league")||x.target.closest(".ft-dropdown")||(d.querySelectorAll(".ft-dropdown-menu").forEach(k=>k.classList.remove("open")),d.querySelectorAll(".ft-dropdown-btn").forEach(k=>k.classList.remove("open")))}),d.querySelectorAll("#segment-dropdown-menu .ft-dropdown-item").forEach(x=>{x.addEventListener("click",function(k){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const R=this.getAttribute("data-v"),H=this.closest(".ft-dropdown-menu"),y=H?.closest(".ft-dropdown");H&&H.classList.remove("open"),y&&y.querySelector(".ft-dropdown-btn")?.classList.remove("open"),d.querySelectorAll("#segment-dropdown-menu .ft-dropdown-item").forEach(D=>D.classList.remove("active")),this.classList.add("active");const $=document.getElementById("segment-dropdown-btn"),E={all:"Segment",full:"Full Game","1h":"1st Half","2h":"2nd Half"};$.textContent=`${E[R]||"Segment"} \u25BE`,n.segment=R==="all"?"":R,o()})}),d.querySelectorAll("#pick-dropdown-menu .ft-dropdown-item").forEach(x=>{x.addEventListener("click",function(k){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const R=this.getAttribute("data-v"),H=this.closest(".ft-dropdown-menu"),y=H?.closest(".ft-dropdown");H&&H.classList.remove("open"),y&&y.querySelector(".ft-dropdown-btn")?.classList.remove("open"),d.querySelectorAll("#pick-dropdown-menu .ft-dropdown-item").forEach(D=>D.classList.remove("active")),this.classList.add("active");const $=document.getElementById("pick-dropdown-btn"),E={all:"Pick Type",spread:"Spread",ml:"Moneyline",total:"Total",tt:"Team Total"};$.textContent=`${E[R]||"Pick Type"} \u25BE`,n.pick=R==="all"?"":R,o()})}),d.querySelectorAll("#status-dropdown-menu .ft-dropdown-item").forEach(x=>{x.addEventListener("click",function(k){k.preventDefault(),k.stopPropagation(),k.stopImmediatePropagation();const R=this.getAttribute("data-v"),H=this.closest(".ft-dropdown-menu"),y=H?.closest(".ft-dropdown");H&&H.classList.remove("open"),y&&y.querySelector(".ft-dropdown-btn")?.classList.remove("open"),d.querySelectorAll("#status-dropdown-menu .ft-dropdown-item").forEach(D=>D.classList.remove("active")),this.classList.add("active");const $=document.getElementById("status-dropdown-btn"),E={all:"Status",pending:"Pending",win:"Won",loss:"Lost",push:"Push"};$.textContent=`${E[R]||"Status"} \u25BE`,n.status=R==="all"?"":R,o()})});const S=document.getElementById("ft-clear");S&&S.addEventListener("click",function(x){x.stopPropagation(),c()})}function e(d){const u=(d||"").toLowerCase().trim();return u==="full-game"||u==="full game"||u==="full"?"full":u==="1st-half"||u==="1st half"||u==="1h"||u.includes("1st")?"1h":u==="2nd-half"||u==="2nd half"||u==="2h"||u.includes("2nd")?"2h":u}function t(d){const u=(d||"").toLowerCase().trim();return u==="moneyline"||u==="ml"?"ml":u==="spread"?"spread":u==="total"||u==="over"||u==="under"?"total":u==="team-total"||u==="team total"||u==="tt"?"tt":u}function s(){if(!(!window.tableState||!window.tableState.filters)){if(n.leagues.length>0?(window.tableState.filters.matchup.selectedLeagues=n.leagues,window.tableState.filters.matchup.league=""):(window.tableState.filters.matchup.selectedLeagues=null,window.tableState.filters.matchup.league=""),n.segment?(window.tableState.filters.pick.segment=n.segment,window.tableState.filters.pick.selectedSegments=null):(window.tableState.filters.pick.segment="",window.tableState.filters.pick.selectedSegments=null),n.pick){const d={spread:"spread",ml:"moneyline",total:"total",tt:"team-total"};window.tableState.filters.pick.betType=d[n.pick]||""}else window.tableState.filters.pick.betType="";n.status?window.tableState.filters.status=[n.status]:window.tableState.filters.status=[]}}function o(){s();const d=document.getElementById("picks-table");if(!d){console.warn("[DashboardFilterPills] Table #picks-table not found");return}const u=d.querySelector("tbody");if(!u){console.warn("[DashboardFilterPills] Table tbody not found");return}const S=u.querySelectorAll("tr");if(S.length===0){console.warn("[DashboardFilterPills] No rows found in table");return}let x=0;S.forEach((k,R)=>{let H=!0;if(n.leagues.length>0){const y=(k.getAttribute("data-league")||"").toLowerCase().trim();n.leagues.some(E=>{const D=E.toLowerCase().trim();return!!(y===D||D==="ncaaf"&&(y==="college"||y==="cfb"||y.includes("college football")||y.includes("ncaa football"))||D==="ncaab"&&(y==="ncaam"||y==="cbb"||y.includes("college basketball")||y.includes("ncaa basketball")))})||(H=!1)}if(n.segment){const y=k.getAttribute("data-segment")||"",$=e(y),E=n.segment.toLowerCase().trim();$!==E&&(H=!1)}if(n.pick){const y=k.getAttribute("data-pick-type")||"",$=t(y),E=n.pick.toLowerCase().trim();$!==E&&(H=!1)}if(n.status){const y=(k.getAttribute("data-status")||"").toLowerCase().trim(),$=n.status.toLowerCase().trim();let E=!1;(y===$||$==="win"&&(y==="won"||y==="win")||$==="loss"&&(y==="lost"||y==="loss")||$==="pending"&&(y==="pending"||y==="live"||y==="on-track"||y==="at-risk"))&&(E=!0),E||(H=!1)}H?(k.style.display="",k.classList.remove("filter-hidden"),x++):(k.style.display="none",k.classList.add("filter-hidden"))}),typeof window.updateKPIValues=="function"?window.updateKPIValues():typeof window.recalculateKPIs=="function"&&window.recalculateKPIs(),window.PicksTableRenderer&&typeof window.PicksTableRenderer.updateTable=="function"&&window.PicksTableRenderer.updateTable()}function r(d){if(!d)return!0;if(s(),window.PicksFilterManager&&typeof window.PicksFilterManager.passesAllFilters=="function")return window.PicksFilterManager.passesAllFilters(d);if(n.leagues.length>0){const u=(d.getAttribute("data-league")||"").toLowerCase().trim();if(!n.leagues.some(x=>{const k=x.toLowerCase().trim();return!!(u===k||k==="ncaaf"&&(u==="college"||u==="cfb"||u.includes("college football")||u.includes("ncaa football"))||k==="ncaab"&&(u==="ncaam"||u==="cbb"||u.includes("college basketball")||u.includes("ncaa basketball")))}))return!1}if(n.segment){const u=d.getAttribute("data-segment")||"",S=e(u),x=n.segment.toLowerCase().trim();if(S!==x)return!1}if(n.pick){const u=d.getAttribute("data-pick-type")||"",S=t(u),x=n.pick.toLowerCase().trim();if(S!==x)return!1}if(n.status){const u=(d.getAttribute("data-status")||"").toLowerCase().trim(),S=n.status.toLowerCase().trim();let x=!1;if((u===S||S==="win"&&(u==="won"||u==="win")||S==="loss"&&(u==="lost"||u==="loss")||S==="pending"&&(u==="pending"||u==="live"||u==="on-track"||u==="at-risk"))&&(x=!0),!x)return!1}return!0}function c(){n={leagues:[],segment:"",pick:"",status:""},document.querySelectorAll(".ft-pill.ft-league").forEach(u=>{u.classList.remove("active"),u.getAttribute("data-league")==="all"&&u.classList.add("active")});const d=document.getElementById("filter-toolbar");d&&(d.querySelectorAll("#segment-dropdown-menu .ft-dropdown-item").forEach(u=>{u.classList.remove("active"),u.getAttribute("data-v")==="all"&&u.classList.add("active")}),document.getElementById("segment-dropdown-btn").textContent="Segment \u25BE",d.querySelectorAll("#pick-dropdown-menu .ft-dropdown-item").forEach(u=>{u.classList.remove("active"),u.getAttribute("data-v")==="all"&&u.classList.add("active")}),document.getElementById("pick-dropdown-btn").textContent="Pick Type \u25BE",d.querySelectorAll("#status-dropdown-menu .ft-dropdown-item").forEach(u=>{u.classList.remove("active"),u.getAttribute("data-v")==="all"&&u.classList.add("active")}),document.getElementById("status-dropdown-btn").textContent="Status \u25BE"),o()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a(),Object.assign(window.DashboardFilterPills,{applyFilters:o,clearAllFilters:c,passesAllFilters:r})}(),function(){"use strict";let n="active",a=null,e=null;function t(){const F=document.getElementById("date-range-toggle"),T=document.getElementById("date-range-dropdown"),M=document.getElementById("date-range-label"),O=document.querySelectorAll(".date-range-option");if(!F||!T||!M){console.log("[DateToggles] Date range dropdown elements not found");return}F.addEventListener("click",function(A){A.stopPropagation(),!T.hidden?(T.hidden=!0,F.setAttribute("aria-expanded","false")):(T.hidden=!1,F.setAttribute("aria-expanded","true"))}),O.forEach(A=>{A.addEventListener("click",function(L){L.stopPropagation();const p=this.dataset.range,m=this.textContent;if(p==="custom"){const h=document.getElementById("custom-calendar-card");if(h){T.hidden=!0,F.setAttribute("aria-expanded","false"),h.hidden=!1,s();return}}O.forEach(h=>{h.classList.remove("active"),h.setAttribute("aria-selected","false")}),this.classList.add("active"),this.setAttribute("aria-selected","true"),M.textContent=m,T.hidden=!0,F.setAttribute("aria-expanded","false"),n=p,y(p)})}),document.addEventListener("click",function(A){!T.hidden&&!F.contains(A.target)&&!T.contains(A.target)&&(T.hidden=!0,F.setAttribute("aria-expanded","false"))}),document.addEventListener("keydown",function(A){if(A.key==="Escape"){T.hidden||(T.hidden=!0,F.setAttribute("aria-expanded","false"),F.focus());const L=document.getElementById("custom-calendar-card");L&&!L.hidden&&(L.hidden=!0,F.focus())}}),console.log("[DateToggles] Date range dropdown initialized");const j=document.getElementById("calendar-card-close"),v=document.getElementById("custom-calendar-card");j&&v&&j.addEventListener("click",function(A){A.stopPropagation(),v.hidden=!0}),document.addEventListener("click",function(A){v&&!v.hidden&&(v.contains(A.target)||document.getElementById("custom-range-trigger")?.contains(A.target)||(v.hidden=!0))})}function s(){const F=document.getElementById("custom-calendar-card");if(!F)return;if(S){I();return}const T=document.getElementById("date-range-start-display"),M=document.getElementById("date-range-end-display"),O=document.getElementById("custom-calendar-days"),j=document.getElementById("custom-calendar-month"),v=F.querySelector(".calendar-nav.prev"),A=F.querySelector(".calendar-nav.next"),L=F.querySelectorAll(".date-target-btn"),p=document.getElementById("calendar-apply-btn"),m=document.getElementById("calendar-clear-btn");if(!O||!j||!v||!A||!T||!M){console.warn("[DateToggles] Calendar card elements not found");return}function h(_){r=_==="end"?"end":"start",L.forEach(q=>{const W=q.dataset.target===r;q.classList.toggle("active",W),q.setAttribute("aria-selected",W?"true":"false")})}function C(){d?(T.textContent=k(d),T.classList.remove("is-placeholder")):(T.textContent="\u2014",T.classList.add("is-placeholder")),u?(M.textContent=k(u),M.classList.remove("is-placeholder")):(M.textContent="\u2014",M.classList.add("is-placeholder"))}function I(){const _=c.getFullYear(),q=c.getMonth();j.textContent=c.toLocaleDateString("en-US",{month:"long",year:"numeric"}),O.innerHTML="";const Z=new Date(_,q,1).getDay(),Q=new Date(_,q+1,0).getDate(),te=d?d.getTime():null,w=u?u.getTime():null;for(let P=0;P<Z;P++){const l=document.createElement("button");l.className="calendar-day empty",l.tabIndex=-1,l.setAttribute("aria-hidden","true"),O.appendChild(l)}for(let P=1;P<=Q;P++){const l=new Date(_,q,P),i=x(l),g=l.getTime(),f=document.createElement("button");f.type="button",f.className="calendar-day",f.textContent=String(P),f.setAttribute("data-date",i),f.setAttribute("aria-label",k(l)),te&&g===te&&f.classList.add("selected","selected-start"),w&&g===w&&f.classList.add("selected","selected-end"),te&&w&&g>te&&g<w&&f.classList.add("in-range"),f.addEventListener("click",b=>{b.stopPropagation(),G(l)}),O.appendChild(f)}C()}function G(_){const q=x(_);r==="start"?(d=_,u&&_.getTime()>u.getTime()&&(u=null)):(u=_,d&&_.getTime()<d.getTime()&&(d=null,h("start"))),I()}L.forEach(_=>{_.addEventListener("click",q=>{q.stopPropagation();const W=_.dataset.target==="end"?"end":"start";h(W)})}),v.addEventListener("click",_=>{_.stopPropagation(),c.setMonth(c.getMonth()-1),I()}),A.addEventListener("click",_=>{_.stopPropagation(),c.setMonth(c.getMonth()+1),I()}),p&&p.addEventListener("click",_=>{if(_.stopPropagation(),d&&u){a=new Date(d),a.setHours(0,0,0,0),e=new Date(u),e.setHours(23,59,59,999);const q=document.getElementById("date-range-label");q&&(q.textContent=`${k(a)} - ${k(e)}`),document.querySelectorAll(".date-range-option").forEach(Q=>{Q.classList.remove("active"),Q.setAttribute("aria-selected","false")});const Z=document.getElementById("custom-range-trigger");Z&&(Z.classList.add("active"),Z.setAttribute("aria-selected","true")),F.hidden=!0,n="custom",y("custom")}}),m&&m.addEventListener("click",_=>{_.stopPropagation(),d=null,u=null,I()}),h("start"),c=new Date,c.setDate(1),C(),I(),S=!0}function o(){t();const F=document.querySelectorAll(".date-toggle-btn"),T=document.querySelector(".custom-date-range"),M=document.querySelector(".date-apply-btn"),O=document.querySelector(".date-clear-btn"),j=document.getElementById("date-range-start"),v=document.getElementById("date-range-end");setTimeout(()=>{y(n),console.log(`[DateToggles] Applied default filter: ${n}`)},500);const A=document.querySelector('.date-toggle-btn[data-range="all"]');A&&A.classList.add("active"),F.forEach(p=>{p.addEventListener("click",function(m){m.stopPropagation();const h=this.getAttribute("data-range");H(h,this)})});const L=document.querySelector('.date-toggle-btn[data-range="custom"]');L&&L.addEventListener("click",function(p){if(p.stopPropagation(),T){const m=T.classList.contains("active");T.classList.toggle("active"),!m&&j&&setTimeout(()=>j.focus(),100)}}),R({container:T,startInput:j,endInput:v}),M&&M.addEventListener("click",function(p){p.stopPropagation();const m=j?.value,h=v?.value;m&&h?(a=new Date(m),e=new Date(h),e.setHours(23,59,59,999),L&&(document.querySelectorAll(".date-toggle-btn").forEach(I=>I.classList.remove("active")),L.classList.add("active")),y("custom"),T&&T.classList.remove("active")):(!m&&j&&(j.style.borderColor="#FF4757",setTimeout(()=>j.style.borderColor="",2e3)),!h&&v&&(v.style.borderColor="#FF4757",setTimeout(()=>v.style.borderColor="",2e3)))}),O&&O.addEventListener("click",function(p){p.stopPropagation(),D()}),document.addEventListener("click",function(p){T&&T.classList.contains("active")&&(T.contains(p.target)||L?.contains(p.target)||T.classList.remove("active"))}),document.addEventListener("keydown",function(p){p.key==="Escape"&&T?.classList.contains("active")&&(T.classList.remove("active"),L?.focus())})}let r="start",c=new Date;c.setDate(1);let d=null,u=null,S=!1;function x(F){const T=F.getFullYear(),M=String(F.getMonth()+1).padStart(2,"0"),O=String(F.getDate()).padStart(2,"0");return`${T}-${M}-${O}`}function k(F){return F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function R(F){const T=F.container,M=F.startInput,O=F.endInput;if(!T||!M||!O)return;const j=T.querySelector("#custom-calendar-month"),v=T.querySelector("#custom-calendar-days"),A=T.querySelector(".calendar-nav.prev"),L=T.querySelector(".calendar-nav.next"),p=T.querySelectorAll(".date-target-btn"),m=T.querySelector("#date-range-start-display"),h=T.querySelector("#date-range-end-display");if(!j||!v||!A||!L||!m||!h)return;function C(q){r=q==="end"?"end":"start",p.forEach(W=>{const Z=W.dataset.target===r;W.classList.toggle("active",Z),W.setAttribute("aria-selected",Z?"true":"false")})}function I(){if(M.value){const q=new Date(M.value),W=!isNaN(q.getTime());m.textContent=W?k(q):"\u2014",m.classList.toggle("is-placeholder",!W)}else m.textContent="\u2014",m.classList.add("is-placeholder");if(O.value){const q=new Date(O.value),W=!isNaN(q.getTime());h.textContent=W?k(q):"\u2014",h.classList.toggle("is-placeholder",!W)}else h.textContent="\u2014",h.classList.add("is-placeholder")}function G(){const q=c.getFullYear(),W=c.getMonth();j.textContent=c.toLocaleDateString("en-US",{month:"long",year:"numeric"}),v.innerHTML="";const Q=new Date(q,W,1).getDay(),te=new Date(q,W+1,0).getDate(),w=M.value?new Date(M.value):null,P=O.value?new Date(O.value):null;for(let l=0;l<Q;l++){const i=document.createElement("button");i.className="calendar-day empty",i.tabIndex=-1,i.setAttribute("aria-hidden","true"),v.appendChild(i)}for(let l=1;l<=te;l++){const i=new Date(q,W,l),g=x(i),f=document.createElement("button");f.type="button",f.className="calendar-day",f.textContent=String(l),f.setAttribute("data-date",g),f.setAttribute("aria-label",k(i));const b=i.getTime(),B=w?w.getTime():null,N=P?P.getTime():null;B&&b===B&&f.classList.add("selected","selected-start"),N&&b===N&&f.classList.add("selected","selected-end"),B&&N&&b>B&&b<N&&f.classList.add("in-range"),f.addEventListener("click",z=>{z.stopPropagation(),_(i)}),v.appendChild(f)}I()}function _(q){const W=x(q),Z=M.value?new Date(M.value):null,Q=O.value?new Date(O.value):null;r==="start"?(M.value=W,Q&&q.getTime()>Q.getTime()&&(O.value=W)):(O.value=W,Z&&q.getTime()<Z.getTime()&&(M.value=W)),G()}p.forEach(q=>{q.addEventListener("click",W=>{W.stopPropagation();const Z=q.dataset.target==="end"?"end":"start";C(Z)})}),A.addEventListener("click",q=>{q.stopPropagation(),c.setMonth(c.getMonth()-1),G()}),L.addEventListener("click",q=>{q.stopPropagation(),c.setMonth(c.getMonth()+1),G()}),C("start"),c=new Date,c.setDate(1),I(),G()}function H(F,T){if(F==="custom")return;document.querySelectorAll(".date-toggle-btn").forEach(j=>j.classList.remove("active")),T.classList.add("active"),n=F,y(F);const O=document.querySelector(".custom-date-range");O&&O.classList.remove("active")}function y(F){const T=new Date;let M,O;if(F==="active"||F==="settled"){window.tableState&&window.tableState.filters&&(window.tableState.filters.date={start:null,end:null},window.tableState.filters.status=F==="active"?["pending","live","on-track","at-risk"]:["win","won","loss","lost","push"],window.updateTableWithFilters&&window.updateTableWithFilters()),$();return}switch(window.tableState&&window.tableState.filters&&(window.tableState.filters.status=[]),F){case"today":M=new Date(T.getFullYear(),T.getMonth(),T.getDate()),O=new Date(T.getFullYear(),T.getMonth(),T.getDate(),23,59,59,999);break;case"tomorrow":M=new Date(T.getFullYear(),T.getMonth(),T.getDate()+1),O=new Date(T.getFullYear(),T.getMonth(),T.getDate()+1,23,59,59,999);break;case"week":const j=T.getDay();M=new Date(T),M.setDate(T.getDate()-j),M.setHours(0,0,0,0),O=new Date(M),O.setDate(M.getDate()+6),O.setHours(23,59,59,999);break;case"7days":M=new Date(T.getFullYear(),T.getMonth(),T.getDate()),O=new Date(T.getFullYear(),T.getMonth(),T.getDate()+7,23,59,59,999);break;case"month":M=new Date(T.getFullYear(),T.getMonth(),1),O=new Date(T.getFullYear(),T.getMonth()+1,0,23,59,59,999);break;case"yesterday":M=new Date(T.getFullYear(),T.getMonth(),T.getDate()-1),M.setHours(0,0,0,0),O=new Date(T.getFullYear(),T.getMonth(),T.getDate()-1,23,59,59,999);break;case"lastWeek":const v=T.getDay();M=new Date(T),M.setDate(T.getDate()-v-7),M.setHours(0,0,0,0),O=new Date(M),O.setDate(M.getDate()+6),O.setHours(23,59,59,999);break;case"lastMonth":M=new Date(T.getFullYear(),T.getMonth()-1,1),M.setHours(0,0,0,0),O=new Date(T.getFullYear(),T.getMonth(),0,23,59,59,999);break;case"last30days":case"30days":M=new Date(T),M.setDate(T.getDate()-30),M.setHours(0,0,0,0),O=new Date(T.getFullYear(),T.getMonth(),T.getDate(),23,59,59,999);break;case"custom":M=a,O=e;break;case"sinceInception":M=new Date(2020,0,1),M.setHours(0,0,0,0),O=new Date(T.getFullYear(),T.getMonth(),T.getDate(),23,59,59,999);break;case"all":default:window.tableState&&window.tableState.filters&&(window.tableState.filters.date={start:null,end:null},window.updateTableWithFilters&&window.updateTableWithFilters()),$();return}window.tableState&&window.tableState.filters&&(window.tableState.filters.date.start=M,window.tableState.filters.date.end=O,window.updateTableWithFilters&&window.updateTableWithFilters()),$()}function $(){typeof window.updateKPIValues=="function"?window.updateKPIValues():typeof window.recalculateKPIs=="function"&&window.recalculateKPIs()}function E(){return{range:n,customStart:a,customEnd:e}}function D(){n="active",a=null,e=null,document.querySelectorAll(".date-toggle-btn").forEach(v=>v.classList.remove("active"));const T=document.querySelector('.date-toggle-btn[data-range="active"]');T&&T.classList.add("active");const M=document.getElementById("date-range-label");M&&(M.textContent="Active"),document.querySelectorAll(".date-range-option").forEach(v=>{const A=v.dataset.range==="active";v.classList.toggle("active",A),v.setAttribute("aria-selected",A?"true":"false")});const j=document.querySelector(".custom-date-range");j&&j.classList.remove("active"),window.PicksStateManager?(window.PicksStateManager.resetAllFilters(),window.PicksStateManager.resetSort()):window.tableState&&(window.tableState.filters={date:{start:null,end:null},league:[],team:[],betType:[],segment:[],status:["pending","live","on-track","at-risk"]},window.tableState.sort={column:null,direction:"asc"}),document.querySelectorAll('.th-filter-dropdown input[type="checkbox"]').forEach(v=>{v.checked=!1}),document.querySelectorAll(".th-filter-dropdown select").forEach(v=>{v.selectedIndex=0}),document.querySelectorAll('.th-filter-dropdown input[type="text"]').forEach(v=>{v.value=""}),document.querySelectorAll(".th-filter-btn.has-filter").forEach(v=>{v.classList.remove("has-filter")}),window.PicksSortManager&&window.PicksSortManager.updateSortIndicators(),window.updateTableWithFilters?window.updateTableWithFilters():window.PicksTableRenderer&&window.PicksTableRenderer.updateTable(),$()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o(),window.DateToggles={getCurrentDateRange:E,resetDateFilter:D,applyDateFilter:y}}(),function(){"use strict";const n="gbsv_weekly_lineup_picks",a="gbsv_picks",e={getLatestPicks(){try{if(window.WeeklyLineup&&typeof window.WeeklyLineup.getActivePicks=="function"){const s=window.WeeklyLineup.getActivePicks();if(s&&s.length>0)return console.log("[SYNC] Got picks from Weekly Lineup (live):",s.length),s}const t=localStorage.getItem(n);if(t){const s=JSON.parse(t);if(s.picks&&Array.isArray(s.picks))return console.log("[SYNC] Got picks from localStorage cache:",s.picks.length),s.picks}}catch(t){console.warn("[SYNC] Error getting latest picks:",t.message)}return[]},pushOutcomes(t){try{if(!Array.isArray(t)){console.warn("[SYNC] pushOutcomes expects an array");return}return window.WeeklyLineup&&typeof window.WeeklyLineup.syncDashboardOutcomes=="function"?(console.log("[SYNC] Pushing outcomes to live Weekly Lineup:",t.length),window.WeeklyLineup.syncDashboardOutcomes(t),!0):(localStorage.setItem("gbsv_pending_outcomes",JSON.stringify({outcomes:t,timestamp:new Date().toISOString()})),console.log("[SYNC] Stored pending outcomes for Weekly Lineup"),!0)}catch(s){return console.error("[SYNC] Error pushing outcomes:",s.message),!1}},getPendingOutcomes(){try{const t=localStorage.getItem("gbsv_pending_outcomes");if(t)return JSON.parse(t).outcomes||null}catch(t){console.warn("[SYNC] Error reading pending outcomes:",t.message)}return null},clearPendingOutcomes(){try{localStorage.removeItem("gbsv_pending_outcomes"),console.log("[SYNC] Cleared pending outcomes")}catch(t){console.warn("[SYNC] Error clearing pending outcomes:",t.message)}},isWeeklyLineupActive(){return!!(window.WeeklyLineup&&typeof window.WeeklyLineup.getActivePicks=="function")},importWeeklyLineupPicks(){try{const t=this.getLatestPicks();return t.length===0?(console.warn("[SYNC] No picks available from Weekly Lineup to import"),!1):window.loadLivePicks&&typeof window.loadLivePicks=="function"?(console.log("[SYNC] Importing picks to Dashboard:",t.length),!0):(console.log("[SYNC] Dashboard table not ready for import"),!1)}catch(t){return console.error("[SYNC] Error importing picks:",t.message),!1}}};if(window.WeeklyLineupSync=e,document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>{if(e.isWeeklyLineupActive()){const t=e.getPendingOutcomes();t&&t.length>0&&(console.log("[SYNC] Processing pending outcomes:",t.length),e.pushOutcomes(t),e.clearPendingOutcomes())}});else if(e.isWeeklyLineupActive()){const t=e.getPendingOutcomes();t&&t.length>0&&(console.log("[SYNC] Processing pending outcomes:",t.length),e.pushOutcomes(t),e.clearPendingOutcomes())}console.log("\u2705 WeeklyLineupSync bridge initialized")}(),function(){"use strict";const n=()=>window.APP_CONFIG?.FUNCTIONS_BASE_URL||"";class a{constructor(){this.connectedBooks=new Map,this.adapters={},this.initialized=!1}init(){this.initialized||(this._registerAdapters(),this._loadConnections(),this.initialized=!0,console.log("\u{1F4DA} Sportsbook Connector initialized"))}_registerAdapters(){this.adapters={action_network:{name:"Action Network",logo:"/assets/sportsbooks/actionnetwork.png",authType:"credentials",fetchBets:t=>this._fetchActionNetworkBets(t),parseBet:t=>this._parseActionNetworkBet(t)}}}_loadConnections(){try{const s=localStorage.getItem("gbsv_sportsbook_connections");s&&(JSON.parse(s).forEach(r=>{const c=r.connectedAt?new Date(r.connectedAt).getTime():0;if(Date.now()-c>864e5){console.warn(`[SPORTSBOOK] Expired token for ${r.bookId}, removing`);return}this.connectedBooks.set(r.bookId,{...r,lastSync:r.lastSync?new Date(r.lastSync):null})}),this._saveConnections())}catch(s){console.error("Failed to load sportsbook connections:",s)}}_saveConnections(){try{const t=Array.from(this.connectedBooks.values());localStorage.setItem("gbsv_sportsbook_connections",JSON.stringify(t))}catch(t){console.error("Failed to save sportsbook connections:",t)}}getAvailableBooks(){return Object.entries(this.adapters).map(([t,s])=>({id:t,name:s.name,logo:s.logo,authType:s.authType,connected:this.connectedBooks.has(t)}))}getConnectedBooks(){return Array.from(this.connectedBooks.values())}async connect(t,s){const o=this.adapters[t];if(!o)throw new Error(`Unknown sportsbook: ${t}`);if(o.authType==="oauth")return this._initiateOAuth(t);const r=await fetch(`${n()}/api/sportsbook/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:t,credentials:s})});if(!r.ok){const d=await r.json();throw new Error(d.message||"Failed to connect")}const c=await r.json();return this.connectedBooks.set(t,{bookId:t,name:o.name,connectedAt:new Date().toISOString(),lastSync:null,token:c.token}),this._saveConnections(),window.dispatchEvent(new CustomEvent("sportsbook:connected",{detail:{bookId:t,name:o.name}})),c}disconnect(t){this.connectedBooks.has(t)&&(this.connectedBooks.delete(t),this._saveConnections(),window.dispatchEvent(new CustomEvent("sportsbook:disconnected",{detail:{bookId:t}})))}async fetchBets(t,s={}){const o=this.connectedBooks.get(t);if(!o)throw new Error(`Not connected to ${t}`);const r=await fetch(`${n()}/api/sportsbook/bets`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookId:t,token:o.token,dateRange:s.dateRange||"week",status:s.status||"all"})});if(!r.ok)throw new Error("Failed to fetch bets");const c=await r.json(),d=this.adapters[t],u=(c.bets||[]).map(S=>d.parseBet(S));return o.lastSync=new Date().toISOString(),this._saveConnections(),u}async fetchAllBets(t={}){const s=[];for(const[o,r]of this.connectedBooks)try{const c=await this.fetchBets(o,t);s.push(...c.map(d=>({...d,source:o})))}catch(c){console.error(`Failed to fetch from ${o}:`,c)}return s.sort((o,r)=>new Date(r.placedAt)-new Date(o.placedAt)),s}async syncToDashboard(t){if(!t||t.length===0)return[];const s=[];for(const o of t){const r=this._convertToPickFormat(o);if(window.LocalPicksManager)try{await window.LocalPicksManager.addPick(r),s.push(r)}catch(c){console.error("Failed to add bet to dashboard:",c)}}return s}_convertToPickFormat(t){return{id:`${t.source}-${t.betId}`,source:t.source,league:t.league,gameDate:t.gameDate,gameTime:t.gameTime,awayTeam:t.awayTeam,homeTeam:t.homeTeam,pick:t.selection,odds:t.odds,risk:t.stake,toWin:t.potentialWin,outcome:t.outcome,sportsbook:t.source,placedAt:t.placedAt,settledAt:t.settledAt}}_initiateOAuth(t){const s=encodeURIComponent(window.location.href);window.location.href=`${n()}/api/sportsbook/oauth/${t}?redirect=${s}`}async _fetchActionNetworkBets(t){return[]}_parseActionNetworkBet(t){return{betId:t.id,league:t.sport?.toUpperCase(),awayTeam:t.away_team,homeTeam:t.home_team,selection:t.pick_label,odds:t.odds,stake:t.risk,potentialWin:t.to_win,outcome:t.result,placedAt:t.created_at,settledAt:t.settled_at,gameDate:t.game_date,gameTime:t.game_time}}}window.SportsbookConnector=new a,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>window.SportsbookConnector.init()):window.SportsbookConnector.init()}();
//# sourceMappingURL=dashboard.min.js.map
